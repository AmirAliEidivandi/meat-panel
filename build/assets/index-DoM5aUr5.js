function IY(r,t){for(var e=0;e<t.length;e++){const a=t[e];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in r)){const s=Object.getOwnPropertyDescriptor(a,n);s&&Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function e8(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nN={exports:{}},gp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p4;function kY(){if(p4)return gp;p4=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(a,n,s){var l=null;if(s!==void 0&&(l=""+s),n.key!==void 0&&(l=""+n.key),"key"in n){s={};for(var o in n)o!=="key"&&(s[o]=n[o])}else s=n;return n=s.ref,{$$typeof:r,type:a,key:l,ref:n!==void 0?n:null,props:s}}return gp.Fragment=t,gp.jsx=e,gp.jsxs=e,gp}var g4;function OY(){return g4||(g4=1,nN.exports=kY()),nN.exports}var i=OY(),sN={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4;function PY(){if(m4)return mt;m4=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function g(G){return G===null||typeof G!="object"?null:(G=p&&G[p]||G["@@iterator"],typeof G=="function"?G:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function b(G,$,Z){this.props=G,this.context=$,this.refs=x,this.updater=Z||v}b.prototype.isReactComponent={},b.prototype.setState=function(G,$){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,$,"setState")},b.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function N(){}N.prototype=b.prototype;function w(G,$,Z){this.props=G,this.context=$,this.refs=x,this.updater=Z||v}var S=w.prototype=new N;S.constructor=w,y(S,b.prototype),S.isPureReactComponent=!0;var T=Array.isArray;function A(){}var C={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(G,$,Z){var te=Z.ref;return{$$typeof:r,type:G,key:$,ref:te!==void 0?te:null,props:Z}}function k(G,$){return R(G.type,$,G.props)}function L(G){return typeof G=="object"&&G!==null&&G.$$typeof===r}function O(G){var $={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Z){return $[Z]})}var z=/\/+/g;function U(G,$){return typeof G=="object"&&G!==null&&G.key!=null?O(""+G.key):$.toString(36)}function H(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(A,A):(G.status="pending",G.then(function($){G.status==="pending"&&(G.status="fulfilled",G.value=$)},function($){G.status==="pending"&&(G.status="rejected",G.reason=$)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function P(G,$,Z,te,me){var Ce=typeof G;(Ce==="undefined"||Ce==="boolean")&&(G=null);var Ve=!1;if(G===null)Ve=!0;else switch(Ce){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(G.$$typeof){case r:case t:Ve=!0;break;case d:return Ve=G._init,P(Ve(G._payload),$,Z,te,me)}}if(Ve)return me=me(G),Ve=te===""?"."+U(G,0):te,T(me)?(Z="",Ve!=null&&(Z=Ve.replace(z,"$&/")+"/"),P(me,$,Z,"",function(He){return He})):me!=null&&(L(me)&&(me=k(me,Z+(me.key==null||G&&G.key===me.key?"":(""+me.key).replace(z,"$&/")+"/")+Ve)),$.push(me)),1;Ve=0;var Ee=te===""?".":te+":";if(T(G))for(var be=0;be<G.length;be++)te=G[be],Ce=Ee+U(te,be),Ve+=P(te,$,Z,Ce,me);else if(be=g(G),typeof be=="function")for(G=be.call(G),be=0;!(te=G.next()).done;)te=te.value,Ce=Ee+U(te,be++),Ve+=P(te,$,Z,Ce,me);else if(Ce==="object"){if(typeof G.then=="function")return P(H(G),$,Z,te,me);throw $=String(G),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function F(G,$,Z){if(G==null)return G;var te=[],me=0;return P(G,te,"","",function(Ce){return $.call(Z,Ce,me++)}),te}function Y(G){if(G._status===-1){var $=G._result;$=$(),$.then(function(Z){(G._status===0||G._status===-1)&&(G._status=1,G._result=Z)},function(Z){(G._status===0||G._status===-1)&&(G._status=2,G._result=Z)}),G._status===-1&&(G._status=0,G._result=$)}if(G._status===1)return G._result.default;throw G._result}var X=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},q={map:F,forEach:function(G,$,Z){F(G,function(){$.apply(this,arguments)},Z)},count:function(G){var $=0;return F(G,function(){$++}),$},toArray:function(G){return F(G,function($){return $})||[]},only:function(G){if(!L(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return mt.Activity=h,mt.Children=q,mt.Component=b,mt.Fragment=e,mt.Profiler=n,mt.PureComponent=w,mt.StrictMode=a,mt.Suspense=c,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,mt.__COMPILER_RUNTIME={__proto__:null,c:function(G){return C.H.useMemoCache(G)}},mt.cache=function(G){return function(){return G.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(G,$,Z){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var te=y({},G.props),me=G.key;if($!=null)for(Ce in $.key!==void 0&&(me=""+$.key),$)!M.call($,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&$.ref===void 0||(te[Ce]=$[Ce]);var Ce=arguments.length-2;if(Ce===1)te.children=Z;else if(1<Ce){for(var Ve=Array(Ce),Ee=0;Ee<Ce;Ee++)Ve[Ee]=arguments[Ee+2];te.children=Ve}return R(G.type,me,te)},mt.createContext=function(G){return G={$$typeof:l,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},mt.createElement=function(G,$,Z){var te,me={},Ce=null;if($!=null)for(te in $.key!==void 0&&(Ce=""+$.key),$)M.call($,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(me[te]=$[te]);var Ve=arguments.length-2;if(Ve===1)me.children=Z;else if(1<Ve){for(var Ee=Array(Ve),be=0;be<Ve;be++)Ee[be]=arguments[be+2];me.children=Ee}if(G&&G.defaultProps)for(te in Ve=G.defaultProps,Ve)me[te]===void 0&&(me[te]=Ve[te]);return R(G,Ce,me)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(G){return{$$typeof:o,render:G}},mt.isValidElement=L,mt.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:Y}},mt.memo=function(G,$){return{$$typeof:u,type:G,compare:$===void 0?null:$}},mt.startTransition=function(G){var $=C.T,Z={};C.T=Z;try{var te=G(),me=C.S;me!==null&&me(Z,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(A,X)}catch(Ce){X(Ce)}finally{$!==null&&Z.types!==null&&($.types=Z.types),C.T=$}},mt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},mt.use=function(G){return C.H.use(G)},mt.useActionState=function(G,$,Z){return C.H.useActionState(G,$,Z)},mt.useCallback=function(G,$){return C.H.useCallback(G,$)},mt.useContext=function(G){return C.H.useContext(G)},mt.useDebugValue=function(){},mt.useDeferredValue=function(G,$){return C.H.useDeferredValue(G,$)},mt.useEffect=function(G,$){return C.H.useEffect(G,$)},mt.useEffectEvent=function(G){return C.H.useEffectEvent(G)},mt.useId=function(){return C.H.useId()},mt.useImperativeHandle=function(G,$,Z){return C.H.useImperativeHandle(G,$,Z)},mt.useInsertionEffect=function(G,$){return C.H.useInsertionEffect(G,$)},mt.useLayoutEffect=function(G,$){return C.H.useLayoutEffect(G,$)},mt.useMemo=function(G,$){return C.H.useMemo(G,$)},mt.useOptimistic=function(G,$){return C.H.useOptimistic(G,$)},mt.useReducer=function(G,$,Z){return C.H.useReducer(G,$,Z)},mt.useRef=function(G){return C.H.useRef(G)},mt.useState=function(G){return C.H.useState(G)},mt.useSyncExternalStore=function(G,$,Z){return C.H.useSyncExternalStore(G,$,Z)},mt.useTransition=function(){return C.H.useTransition()},mt.version="19.2.0",mt}var v4;function AC(){return v4||(v4=1,sN.exports=PY()),sN.exports}var I=AC();const t8=e8(I),zY=IY({__proto__:null,default:t8},[I]);var iN={exports:{}},mp={},lN={exports:{}},oN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x4;function BY(){return x4||(x4=1,(function(r){function t(P,F){var Y=P.length;P.push(F);e:for(;0<Y;){var X=Y-1>>>1,q=P[X];if(0<n(q,F))P[X]=F,P[Y]=q,Y=X;else break e}}function e(P){return P.length===0?null:P[0]}function a(P){if(P.length===0)return null;var F=P[0],Y=P.pop();if(Y!==F){P[0]=Y;e:for(var X=0,q=P.length,G=q>>>1;X<G;){var $=2*(X+1)-1,Z=P[$],te=$+1,me=P[te];if(0>n(Z,Y))te<q&&0>n(me,Z)?(P[X]=me,P[te]=Y,X=te):(P[X]=Z,P[$]=Y,X=$);else if(te<q&&0>n(me,Y))P[X]=me,P[te]=Y,X=te;else break e}}return F}function n(P,F){var Y=P.sortIndex-F.sortIndex;return Y!==0?Y:P.id-F.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();r.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,h=null,p=3,g=!1,v=!1,y=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function S(P){for(var F=e(u);F!==null;){if(F.callback===null)a(u);else if(F.startTime<=P)a(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=e(u)}}function T(P){if(y=!1,S(P),!v)if(e(c)!==null)v=!0,A||(A=!0,O());else{var F=e(u);F!==null&&H(T,F.startTime-P)}}var A=!1,C=-1,M=5,R=-1;function k(){return x?!0:!(r.unstable_now()-R<M)}function L(){if(x=!1,A){var P=r.unstable_now();R=P;var F=!0;try{e:{v=!1,y&&(y=!1,N(C),C=-1),g=!0;var Y=p;try{t:{for(S(P),h=e(c);h!==null&&!(h.expirationTime>P&&k());){var X=h.callback;if(typeof X=="function"){h.callback=null,p=h.priorityLevel;var q=X(h.expirationTime<=P);if(P=r.unstable_now(),typeof q=="function"){h.callback=q,S(P),F=!0;break t}h===e(c)&&a(c),S(P)}else a(c);h=e(c)}if(h!==null)F=!0;else{var G=e(u);G!==null&&H(T,G.startTime-P),F=!1}}break e}finally{h=null,p=Y,g=!1}F=void 0}}finally{F?O():A=!1}}}var O;if(typeof w=="function")O=function(){w(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,U=z.port2;z.port1.onmessage=L,O=function(){U.postMessage(null)}}else O=function(){b(L,0)};function H(P,F){C=b(function(){P(r.unstable_now())},F)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_next=function(P){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var Y=p;p=F;try{return P()}finally{p=Y}},r.unstable_requestPaint=function(){x=!0},r.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Y=p;p=P;try{return F()}finally{p=Y}},r.unstable_scheduleCallback=function(P,F,Y){var X=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,P){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Y+q,P={id:d++,callback:F,priorityLevel:P,startTime:Y,expirationTime:q,sortIndex:-1},Y>X?(P.sortIndex=Y,t(u,P),e(c)===null&&P===e(u)&&(y?(N(C),C=-1):y=!0,H(T,Y-X))):(P.sortIndex=q,t(c,P),v||g||(v=!0,A||(A=!0,O()))),P},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(P){var F=p;return function(){var Y=p;p=F;try{return P.apply(this,arguments)}finally{p=Y}}}})(oN)),oN}var y4;function VY(){return y4||(y4=1,lN.exports=BY()),lN.exports}var cN={exports:{}},Ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b4;function HY(){if(b4)return Ra;b4=1;var r=AC();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var a={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(c,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:h==null?null:""+h,children:c,containerInfo:u,implementation:d}}var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ra.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Ra.flushSync=function(c){var u=l.T,d=a.p;try{if(l.T=null,a.p=2,c)return c()}finally{l.T=u,a.p=d,a.d.f()}},Ra.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,a.d.C(c,u))},Ra.prefetchDNS=function(c){typeof c=="string"&&a.d.D(c)},Ra.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?a.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):d==="script"&&a.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ra.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);a.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&a.d.M(c)},Ra.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);a.d.L(c,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ra.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);a.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else a.d.m(c)},Ra.requestFormReset=function(c){a.d.r(c)},Ra.unstable_batchedUpdates=function(c,u){return c(u)},Ra.useFormState=function(c,u,d){return l.H.useFormState(c,u,d)},Ra.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ra.version="19.2.0",Ra}var _4;function r8(){if(_4)return cN.exports;_4=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),cN.exports=HY(),cN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4;function GY(){if(N4)return mp;N4=1;var r=VY(),t=AC(),e=r8();function a(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var m=f,_=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(_=m.return),f=m.return;while(f)}return m.tag===3?_:null}function l(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function o(f){if(f.tag===31){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function c(f){if(s(f)!==f)throw Error(a(188))}function u(f){var m=f.alternate;if(!m){if(m=s(f),m===null)throw Error(a(188));return m!==f?null:f}for(var _=f,j=m;;){var E=_.return;if(E===null)break;var D=E.alternate;if(D===null){if(j=E.return,j!==null){_=j;continue}break}if(E.child===D.child){for(D=E.child;D;){if(D===_)return c(E),f;if(D===j)return c(E),m;D=D.sibling}throw Error(a(188))}if(_.return!==j.return)_=E,j=D;else{for(var V=!1,W=E.child;W;){if(W===_){V=!0,_=E,j=D;break}if(W===j){V=!0,j=E,_=D;break}W=W.sibling}if(!V){for(W=D.child;W;){if(W===_){V=!0,_=D,j=E;break}if(W===j){V=!0,j=D,_=E;break}W=W.sibling}if(!V)throw Error(a(189))}}if(_.alternate!==j)throw Error(a(190))}if(_.tag!==3)throw Error(a(188));return _.stateNode.current===_?f:m}function d(f){var m=f.tag;if(m===5||m===26||m===27||m===6)return f;for(f=f.child;f!==null;){if(m=d(f),m!==null)return m;f=f.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function O(f){return f===null||typeof f!="object"?null:(f=L&&f[L]||f["@@iterator"],typeof f=="function"?f:null)}var z=Symbol.for("react.client.reference");function U(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===z?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case y:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList";case R:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case v:return"Portal";case w:return f.displayName||"Context";case N:return(f._context.displayName||"Context")+".Consumer";case S:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case C:return m=f.displayName||null,m!==null?m:U(f.type)||"Memo";case M:m=f._payload,f=f._init;try{return U(f(m))}catch{}}return null}var H=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},X=[],q=-1;function G(f){return{current:f}}function $(f){0>q||(f.current=X[q],X[q]=null,q--)}function Z(f,m){q++,X[q]=f.current,f.current=m}var te=G(null),me=G(null),Ce=G(null),Ve=G(null);function Ee(f,m){switch(Z(Ce,m),Z(me,f),Z(te,null),m.nodeType){case 9:case 11:f=(f=m.documentElement)&&(f=f.namespaceURI)?P5(f):0;break;default:if(f=m.tagName,m=m.namespaceURI)m=P5(m),f=z5(m,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}$(te),Z(te,f)}function be(){$(te),$(me),$(Ce)}function He(f){f.memoizedState!==null&&Z(Ve,f);var m=te.current,_=z5(m,f.type);m!==_&&(Z(me,f),Z(te,_))}function Se(f){me.current===f&&($(te),$(me)),Ve.current===f&&($(Ve),dp._currentValue=Y)}var Ie,ft;function le(f){if(Ie===void 0)try{throw Error()}catch(_){var m=_.stack.trim().match(/\n( *(at )?)/);Ie=m&&m[1]||"",ft=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ie+f+ft}var ze=!1;function $e(f,m){if(!f||ze)return"";ze=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(m){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(fe){var ce=fe}Reflect.construct(f,[],ye)}else{try{ye.call()}catch(fe){ce=fe}f.call(ye.prototype)}}else{try{throw Error()}catch(fe){ce=fe}(ye=f())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(fe){if(fe&&ce&&typeof fe.stack=="string")return[fe.stack,ce.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=j.DetermineComponentFrameRoot(),V=D[0],W=D[1];if(V&&W){var K=V.split(`
`),se=W.split(`
`);for(E=j=0;j<K.length&&!K[j].includes("DetermineComponentFrameRoot");)j++;for(;E<se.length&&!se[E].includes("DetermineComponentFrameRoot");)E++;if(j===K.length||E===se.length)for(j=K.length-1,E=se.length-1;1<=j&&0<=E&&K[j]!==se[E];)E--;for(;1<=j&&0<=E;j--,E--)if(K[j]!==se[E]){if(j!==1||E!==1)do if(j--,E--,0>E||K[j]!==se[E]){var ve=`
`+K[j].replace(" at new "," at ");return f.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",f.displayName)),ve}while(1<=j&&0<=E);break}}}finally{ze=!1,Error.prepareStackTrace=_}return(_=f?f.displayName||f.name:"")?le(_):""}function ot(f,m){switch(f.tag){case 26:case 27:case 5:return le(f.type);case 16:return le("Lazy");case 13:return f.child!==m&&m!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return $e(f.type,!1);case 11:return $e(f.type.render,!1);case 1:return $e(f.type,!0);case 31:return le("Activity");default:return""}}function Rt(f){try{var m="",_=null;do m+=ot(f,_),_=f,f=f.return;while(f);return m}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var or=Object.prototype.hasOwnProperty,Qr=r.unstable_scheduleCallback,Vr=r.unstable_cancelCallback,gn=r.unstable_shouldYield,Il=r.unstable_requestPaint,oa=r.unstable_now,Ws=r.unstable_getCurrentPriorityLevel,Zo=r.unstable_ImmediatePriority,kl=r.unstable_UserBlockingPriority,Mi=r.unstable_NormalPriority,Ko=r.unstable_LowPriority,Qo=r.unstable_IdlePriority,Yu=r.log,vf=r.unstable_setDisableYieldValue,$s=null,xa=null;function Pn(f){if(typeof Yu=="function"&&vf(f),xa&&typeof xa.setStrictMode=="function")try{xa.setStrictMode($s,f)}catch{}}var ca=Math.clz32?Math.clz32:Wu,xf=Math.log,yf=Math.LN2;function Wu(f){return f>>>=0,f===0?32:31-(xf(f)/yf|0)|0}var Ol=256,oe=262144,Et=4194304;function Jr(f){var m=f&42;if(m!==0)return m;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function xs(f,m,_){var j=f.pendingLanes;if(j===0)return 0;var E=0,D=f.suspendedLanes,V=f.pingedLanes;f=f.warmLanes;var W=j&134217727;return W!==0?(j=W&~D,j!==0?E=Jr(j):(V&=W,V!==0?E=Jr(V):_||(_=W&~f,_!==0&&(E=Jr(_))))):(W=j&~D,W!==0?E=Jr(W):V!==0?E=Jr(V):_||(_=j&~f,_!==0&&(E=Jr(_)))),E===0?0:m!==0&&m!==E&&(m&D)===0&&(D=E&-E,_=m&-m,D>=_||D===32&&(_&4194048)!==0)?m:E}function Ga(f,m){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&m)===0}function ys(f,m){switch(f){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ri(){var f=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),f}function mr(f){for(var m=[],_=0;31>_;_++)m.push(f);return m}function Dr(f,m){f.pendingLanes|=m,m!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function $u(f,m,_,j,E,D){var V=f.pendingLanes;f.pendingLanes=_,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=_,f.entangledLanes&=_,f.errorRecoveryDisabledLanes&=_,f.shellSuspendCounter=0;var W=f.entanglements,K=f.expirationTimes,se=f.hiddenUpdates;for(_=V&~_;0<_;){var ve=31-ca(_),ye=1<<ve;W[ve]=0,K[ve]=-1;var ce=se[ve];if(ce!==null)for(se[ve]=null,ve=0;ve<ce.length;ve++){var fe=ce[ve];fe!==null&&(fe.lane&=-536870913)}_&=~ye}j!==0&&bf(f,j,0),D!==0&&E===0&&f.tag!==0&&(f.suspendedLanes|=D&~(V&~m))}function bf(f,m,_){f.pendingLanes|=m,f.suspendedLanes&=~m;var j=31-ca(m);f.entangledLanes|=m,f.entanglements[j]=f.entanglements[j]|1073741824|_&261930}function _f(f,m){var _=f.entangledLanes|=m;for(f=f.entanglements;_;){var j=31-ca(_),E=1<<j;E&m|f[j]&m&&(f[j]|=m),_&=~E}}function Nf(f,m){var _=m&-m;return _=(_&42)!==0?1:jf(_),(_&(f.suspendedLanes|m))!==0?0:_}function jf(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function wf(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Um(){var f=F.p;return f!==0?f:(f=window.event,f===void 0?32:l4(f.type))}function Sf(f,m){var _=F.p;try{return F.p=f,m()}finally{F.p=_}}var Q=Math.random().toString(36).slice(2),Re="__reactFiber$"+Q,qe="__reactProps$"+Q,cr="__reactContainer$"+Q,ya="__reactEvents$"+Q,mn="__reactListeners$"+Q,wU="__reactHandles$"+Q,wE="__reactResources$"+Q,Cf="__reactMarker$"+Q;function Zb(f){delete f[Re],delete f[qe],delete f[ya],delete f[mn],delete f[wU]}function qu(f){var m=f[Re];if(m)return m;for(var _=f.parentNode;_;){if(m=_[cr]||_[Re]){if(_=m.alternate,m.child!==null||_!==null&&_.child!==null)for(f=Y5(f);f!==null;){if(_=f[Re])return _;f=Y5(f)}return m}f=_,_=f.parentNode}return null}function Xu(f){if(f=f[Re]||f[cr]){var m=f.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return f}return null}function Tf(f){var m=f.tag;if(m===5||m===26||m===27||m===6)return f.stateNode;throw Error(a(33))}function Zu(f){var m=f[wE];return m||(m=f[wE]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function ua(f){f[Cf]=!0}var SE=new Set,CE={};function Jo(f,m){Ku(f,m),Ku(f+"Capture",m)}function Ku(f,m){for(CE[f]=m,f=0;f<m.length;f++)SE.add(m[f])}var SU=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),TE={},AE={};function CU(f){return or.call(AE,f)?!0:or.call(TE,f)?!1:SU.test(f)?AE[f]=!0:(TE[f]=!0,!1)}function Fm(f,m,_){if(CU(m))if(_===null)f.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":f.removeAttribute(m);return;case"boolean":var j=m.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){f.removeAttribute(m);return}}f.setAttribute(m,""+_)}}function Ym(f,m,_){if(_===null)f.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(m);return}f.setAttribute(m,""+_)}}function Li(f,m,_,j){if(j===null)f.removeAttribute(_);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(_);return}f.setAttributeNS(m,_,""+j)}}function zn(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function EE(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function TU(f,m,_){var j=Object.getOwnPropertyDescriptor(f.constructor.prototype,m);if(!f.hasOwnProperty(m)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var E=j.get,D=j.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return E.call(this)},set:function(V){_=""+V,D.call(this,V)}}),Object.defineProperty(f,m,{enumerable:j.enumerable}),{getValue:function(){return _},setValue:function(V){_=""+V},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Kb(f){if(!f._valueTracker){var m=EE(f)?"checked":"value";f._valueTracker=TU(f,m,""+f[m])}}function DE(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var _=m.getValue(),j="";return f&&(j=EE(f)?f.checked?"true":"false":f.value),f=j,f!==_?(m.setValue(f),!0):!1}function Wm(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var AU=/[\n"\\]/g;function Bn(f){return f.replace(AU,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Qb(f,m,_,j,E,D,V,W){f.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?f.type=V:f.removeAttribute("type"),m!=null?V==="number"?(m===0&&f.value===""||f.value!=m)&&(f.value=""+zn(m)):f.value!==""+zn(m)&&(f.value=""+zn(m)):V!=="submit"&&V!=="reset"||f.removeAttribute("value"),m!=null?Jb(f,V,zn(m)):_!=null?Jb(f,V,zn(_)):j!=null&&f.removeAttribute("value"),E==null&&D!=null&&(f.defaultChecked=!!D),E!=null&&(f.checked=E&&typeof E!="function"&&typeof E!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?f.name=""+zn(W):f.removeAttribute("name")}function ME(f,m,_,j,E,D,V,W){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(f.type=D),m!=null||_!=null){if(!(D!=="submit"&&D!=="reset"||m!=null)){Kb(f);return}_=_!=null?""+zn(_):"",m=m!=null?""+zn(m):_,W||m===f.value||(f.value=m),f.defaultValue=m}j=j??E,j=typeof j!="function"&&typeof j!="symbol"&&!!j,f.checked=W?f.checked:!!j,f.defaultChecked=!!j,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(f.name=V),Kb(f)}function Jb(f,m,_){m==="number"&&Wm(f.ownerDocument)===f||f.defaultValue===""+_||(f.defaultValue=""+_)}function Qu(f,m,_,j){if(f=f.options,m){m={};for(var E=0;E<_.length;E++)m["$"+_[E]]=!0;for(_=0;_<f.length;_++)E=m.hasOwnProperty("$"+f[_].value),f[_].selected!==E&&(f[_].selected=E),E&&j&&(f[_].defaultSelected=!0)}else{for(_=""+zn(_),m=null,E=0;E<f.length;E++){if(f[E].value===_){f[E].selected=!0,j&&(f[E].defaultSelected=!0);return}m!==null||f[E].disabled||(m=f[E])}m!==null&&(m.selected=!0)}}function RE(f,m,_){if(m!=null&&(m=""+zn(m),m!==f.value&&(f.value=m),_==null)){f.defaultValue!==m&&(f.defaultValue=m);return}f.defaultValue=_!=null?""+zn(_):""}function LE(f,m,_,j){if(m==null){if(j!=null){if(_!=null)throw Error(a(92));if(H(j)){if(1<j.length)throw Error(a(93));j=j[0]}_=j}_==null&&(_=""),m=_}_=zn(m),f.defaultValue=_,j=f.textContent,j===_&&j!==""&&j!==null&&(f.value=j),Kb(f)}function Ju(f,m){if(m){var _=f.firstChild;if(_&&_===f.lastChild&&_.nodeType===3){_.nodeValue=m;return}}f.textContent=m}var EU=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function IE(f,m,_){var j=m.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?j?f.setProperty(m,""):m==="float"?f.cssFloat="":f[m]="":j?f.setProperty(m,_):typeof _!="number"||_===0||EU.has(m)?m==="float"?f.cssFloat=_:f[m]=(""+_).trim():f[m]=_+"px"}function kE(f,m,_){if(m!=null&&typeof m!="object")throw Error(a(62));if(f=f.style,_!=null){for(var j in _)!_.hasOwnProperty(j)||m!=null&&m.hasOwnProperty(j)||(j.indexOf("--")===0?f.setProperty(j,""):j==="float"?f.cssFloat="":f[j]="");for(var E in m)j=m[E],m.hasOwnProperty(E)&&_[E]!==j&&IE(f,E,j)}else for(var D in m)m.hasOwnProperty(D)&&IE(f,D,m[D])}function e1(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DU=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MU=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $m(f){return MU.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function Ii(){}var t1=null;function r1(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var ed=null,td=null;function OE(f){var m=Xu(f);if(m&&(f=m.stateNode)){var _=f[qe]||null;e:switch(f=m.stateNode,m.type){case"input":if(Qb(f,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),m=_.name,_.type==="radio"&&m!=null){for(_=f;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+Bn(""+m)+'"][type="radio"]'),m=0;m<_.length;m++){var j=_[m];if(j!==f&&j.form===f.form){var E=j[qe]||null;if(!E)throw Error(a(90));Qb(j,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(m=0;m<_.length;m++)j=_[m],j.form===f.form&&DE(j)}break e;case"textarea":RE(f,_.value,_.defaultValue);break e;case"select":m=_.value,m!=null&&Qu(f,!!_.multiple,m,!1)}}}var a1=!1;function PE(f,m,_){if(a1)return f(m,_);a1=!0;try{var j=f(m);return j}finally{if(a1=!1,(ed!==null||td!==null)&&(Iv(),ed&&(m=ed,f=td,td=ed=null,OE(m),f)))for(m=0;m<f.length;m++)OE(f[m])}}function Af(f,m){var _=f.stateNode;if(_===null)return null;var j=_[qe]||null;if(j===null)return null;_=j[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(f=f.type,j=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!j;break e;default:f=!1}if(f)return null;if(_&&typeof _!="function")throw Error(a(231,m,typeof _));return _}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n1=!1;if(ki)try{var Ef={};Object.defineProperty(Ef,"passive",{get:function(){n1=!0}}),window.addEventListener("test",Ef,Ef),window.removeEventListener("test",Ef,Ef)}catch{n1=!1}var Pl=null,s1=null,qm=null;function zE(){if(qm)return qm;var f,m=s1,_=m.length,j,E="value"in Pl?Pl.value:Pl.textContent,D=E.length;for(f=0;f<_&&m[f]===E[f];f++);var V=_-f;for(j=1;j<=V&&m[_-j]===E[D-j];j++);return qm=E.slice(f,1<j?1-j:void 0)}function Xm(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function Zm(){return!0}function BE(){return!1}function Ka(f){function m(_,j,E,D,V){this._reactName=_,this._targetInst=E,this.type=j,this.nativeEvent=D,this.target=V,this.currentTarget=null;for(var W in f)f.hasOwnProperty(W)&&(_=f[W],this[W]=_?_(D):D[W]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Zm:BE,this.isPropagationStopped=BE,this}return h(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Zm)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Zm)},persist:function(){},isPersistent:Zm}),m}var ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Km=Ka(ec),Df=h({},ec,{view:0,detail:0}),RU=Ka(Df),i1,l1,Mf,Qm=h({},Df,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c1,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Mf&&(Mf&&f.type==="mousemove"?(i1=f.screenX-Mf.screenX,l1=f.screenY-Mf.screenY):l1=i1=0,Mf=f),i1)},movementY:function(f){return"movementY"in f?f.movementY:l1}}),VE=Ka(Qm),LU=h({},Qm,{dataTransfer:0}),IU=Ka(LU),kU=h({},Df,{relatedTarget:0}),o1=Ka(kU),OU=h({},ec,{animationName:0,elapsedTime:0,pseudoElement:0}),PU=Ka(OU),zU=h({},ec,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),BU=Ka(zU),VU=h({},ec,{data:0}),HE=Ka(VU),HU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FU(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=UU[f])?!!m[f]:!1}function c1(){return FU}var YU=h({},Df,{key:function(f){if(f.key){var m=HU[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=Xm(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?GU[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c1,charCode:function(f){return f.type==="keypress"?Xm(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Xm(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),WU=Ka(YU),$U=h({},Qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GE=Ka($U),qU=h({},Df,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c1}),XU=Ka(qU),ZU=h({},ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),KU=Ka(ZU),QU=h({},Qm,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),JU=Ka(QU),eF=h({},ec,{newState:0,oldState:0}),tF=Ka(eF),rF=[9,13,27,32],u1=ki&&"CompositionEvent"in window,Rf=null;ki&&"documentMode"in document&&(Rf=document.documentMode);var aF=ki&&"TextEvent"in window&&!Rf,UE=ki&&(!u1||Rf&&8<Rf&&11>=Rf),FE=" ",YE=!1;function WE(f,m){switch(f){case"keyup":return rF.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $E(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var rd=!1;function nF(f,m){switch(f){case"compositionend":return $E(m);case"keypress":return m.which!==32?null:(YE=!0,FE);case"textInput":return f=m.data,f===FE&&YE?null:f;default:return null}}function sF(f,m){if(rd)return f==="compositionend"||!u1&&WE(f,m)?(f=zE(),qm=s1=Pl=null,rd=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return UE&&m.locale!=="ko"?null:m.data;default:return null}}var iF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qE(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!iF[f.type]:m==="textarea"}function XE(f,m,_,j){ed?td?td.push(j):td=[j]:ed=j,m=Hv(m,"onChange"),0<m.length&&(_=new Km("onChange","change",null,_,j),f.push({event:_,listeners:m}))}var Lf=null,If=null;function lF(f){M5(f,0)}function Jm(f){var m=Tf(f);if(DE(m))return f}function ZE(f,m){if(f==="change")return m}var KE=!1;if(ki){var d1;if(ki){var h1="oninput"in document;if(!h1){var QE=document.createElement("div");QE.setAttribute("oninput","return;"),h1=typeof QE.oninput=="function"}d1=h1}else d1=!1;KE=d1&&(!document.documentMode||9<document.documentMode)}function JE(){Lf&&(Lf.detachEvent("onpropertychange",eD),If=Lf=null)}function eD(f){if(f.propertyName==="value"&&Jm(If)){var m=[];XE(m,If,f,r1(f)),PE(lF,m)}}function oF(f,m,_){f==="focusin"?(JE(),Lf=m,If=_,Lf.attachEvent("onpropertychange",eD)):f==="focusout"&&JE()}function cF(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Jm(If)}function uF(f,m){if(f==="click")return Jm(m)}function dF(f,m){if(f==="input"||f==="change")return Jm(m)}function hF(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var vn=typeof Object.is=="function"?Object.is:hF;function kf(f,m){if(vn(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var _=Object.keys(f),j=Object.keys(m);if(_.length!==j.length)return!1;for(j=0;j<_.length;j++){var E=_[j];if(!or.call(m,E)||!vn(f[E],m[E]))return!1}return!0}function tD(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function rD(f,m){var _=tD(f);f=0;for(var j;_;){if(_.nodeType===3){if(j=f+_.textContent.length,f<=m&&j>=m)return{node:_,offset:m-f};f=j}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=tD(_)}}function aD(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?aD(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function nD(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var m=Wm(f.document);m instanceof f.HTMLIFrameElement;){try{var _=typeof m.contentWindow.location.href=="string"}catch{_=!1}if(_)f=m.contentWindow;else break;m=Wm(f.document)}return m}function f1(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}var fF=ki&&"documentMode"in document&&11>=document.documentMode,ad=null,p1=null,Of=null,g1=!1;function sD(f,m,_){var j=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;g1||ad==null||ad!==Wm(j)||(j=ad,"selectionStart"in j&&f1(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Of&&kf(Of,j)||(Of=j,j=Hv(p1,"onSelect"),0<j.length&&(m=new Km("onSelect","select",null,m,_),f.push({event:m,listeners:j}),m.target=ad)))}function tc(f,m){var _={};return _[f.toLowerCase()]=m.toLowerCase(),_["Webkit"+f]="webkit"+m,_["Moz"+f]="moz"+m,_}var nd={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionrun:tc("Transition","TransitionRun"),transitionstart:tc("Transition","TransitionStart"),transitioncancel:tc("Transition","TransitionCancel"),transitionend:tc("Transition","TransitionEnd")},m1={},iD={};ki&&(iD=document.createElement("div").style,"AnimationEvent"in window||(delete nd.animationend.animation,delete nd.animationiteration.animation,delete nd.animationstart.animation),"TransitionEvent"in window||delete nd.transitionend.transition);function rc(f){if(m1[f])return m1[f];if(!nd[f])return f;var m=nd[f],_;for(_ in m)if(m.hasOwnProperty(_)&&_ in iD)return m1[f]=m[_];return f}var lD=rc("animationend"),oD=rc("animationiteration"),cD=rc("animationstart"),pF=rc("transitionrun"),gF=rc("transitionstart"),mF=rc("transitioncancel"),uD=rc("transitionend"),dD=new Map,v1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");v1.push("scrollEnd");function bs(f,m){dD.set(f,m),Jo(m,[f])}var ev=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},Vn=[],sd=0,x1=0;function tv(){for(var f=sd,m=x1=sd=0;m<f;){var _=Vn[m];Vn[m++]=null;var j=Vn[m];Vn[m++]=null;var E=Vn[m];Vn[m++]=null;var D=Vn[m];if(Vn[m++]=null,j!==null&&E!==null){var V=j.pending;V===null?E.next=E:(E.next=V.next,V.next=E),j.pending=E}D!==0&&hD(_,E,D)}}function rv(f,m,_,j){Vn[sd++]=f,Vn[sd++]=m,Vn[sd++]=_,Vn[sd++]=j,x1|=j,f.lanes|=j,f=f.alternate,f!==null&&(f.lanes|=j)}function y1(f,m,_,j){return rv(f,m,_,j),av(f)}function ac(f,m){return rv(f,null,null,m),av(f)}function hD(f,m,_){f.lanes|=_;var j=f.alternate;j!==null&&(j.lanes|=_);for(var E=!1,D=f.return;D!==null;)D.childLanes|=_,j=D.alternate,j!==null&&(j.childLanes|=_),D.tag===22&&(f=D.stateNode,f===null||f._visibility&1||(E=!0)),f=D,D=D.return;return f.tag===3?(D=f.stateNode,E&&m!==null&&(E=31-ca(_),f=D.hiddenUpdates,j=f[E],j===null?f[E]=[m]:j.push(m),m.lane=_|536870912),D):null}function av(f){if(50<np)throw np=0,A_=null,Error(a(185));for(var m=f.return;m!==null;)f=m,m=f.return;return f.tag===3?f.stateNode:null}var id={};function vF(f,m,_,j){this.tag=f,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(f,m,_,j){return new vF(f,m,_,j)}function b1(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Oi(f,m){var _=f.alternate;return _===null?(_=xn(f.tag,m,f.key,f.mode),_.elementType=f.elementType,_.type=f.type,_.stateNode=f.stateNode,_.alternate=f,f.alternate=_):(_.pendingProps=m,_.type=f.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=f.flags&65011712,_.childLanes=f.childLanes,_.lanes=f.lanes,_.child=f.child,_.memoizedProps=f.memoizedProps,_.memoizedState=f.memoizedState,_.updateQueue=f.updateQueue,m=f.dependencies,_.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},_.sibling=f.sibling,_.index=f.index,_.ref=f.ref,_.refCleanup=f.refCleanup,_}function fD(f,m){f.flags&=65011714;var _=f.alternate;return _===null?(f.childLanes=0,f.lanes=m,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=_.childLanes,f.lanes=_.lanes,f.child=_.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=_.memoizedProps,f.memoizedState=_.memoizedState,f.updateQueue=_.updateQueue,f.type=_.type,m=_.dependencies,f.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),f}function nv(f,m,_,j,E,D){var V=0;if(j=f,typeof f=="function")b1(f)&&(V=1);else if(typeof f=="string")V=NY(f,_,te.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case R:return f=xn(31,_,m,E),f.elementType=R,f.lanes=D,f;case y:return nc(_.children,E,D,m);case x:V=8,E|=24;break;case b:return f=xn(12,_,m,E|2),f.elementType=b,f.lanes=D,f;case T:return f=xn(13,_,m,E),f.elementType=T,f.lanes=D,f;case A:return f=xn(19,_,m,E),f.elementType=A,f.lanes=D,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case w:V=10;break e;case N:V=9;break e;case S:V=11;break e;case C:V=14;break e;case M:V=16,j=null;break e}V=29,_=Error(a(130,f===null?"null":typeof f,"")),j=null}return m=xn(V,_,m,E),m.elementType=f,m.type=j,m.lanes=D,m}function nc(f,m,_,j){return f=xn(7,f,j,m),f.lanes=_,f}function _1(f,m,_){return f=xn(6,f,null,m),f.lanes=_,f}function pD(f){var m=xn(18,null,null,0);return m.stateNode=f,m}function N1(f,m,_){return m=xn(4,f.children!==null?f.children:[],f.key,m),m.lanes=_,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}var gD=new WeakMap;function Hn(f,m){if(typeof f=="object"&&f!==null){var _=gD.get(f);return _!==void 0?_:(m={value:f,source:m,stack:Rt(m)},gD.set(f,m),m)}return{value:f,source:m,stack:Rt(m)}}var ld=[],od=0,sv=null,Pf=0,Gn=[],Un=0,zl=null,qs=1,Xs="";function Pi(f,m){ld[od++]=Pf,ld[od++]=sv,sv=f,Pf=m}function mD(f,m,_){Gn[Un++]=qs,Gn[Un++]=Xs,Gn[Un++]=zl,zl=f;var j=qs;f=Xs;var E=32-ca(j)-1;j&=~(1<<E),_+=1;var D=32-ca(m)+E;if(30<D){var V=E-E%5;D=(j&(1<<V)-1).toString(32),j>>=V,E-=V,qs=1<<32-ca(m)+E|_<<E|j,Xs=D+f}else qs=1<<D|_<<E|j,Xs=f}function j1(f){f.return!==null&&(Pi(f,1),mD(f,1,0))}function w1(f){for(;f===sv;)sv=ld[--od],ld[od]=null,Pf=ld[--od],ld[od]=null;for(;f===zl;)zl=Gn[--Un],Gn[Un]=null,Xs=Gn[--Un],Gn[Un]=null,qs=Gn[--Un],Gn[Un]=null}function vD(f,m){Gn[Un++]=qs,Gn[Un++]=Xs,Gn[Un++]=zl,qs=m.id,Xs=m.overflow,zl=f}var ba=null,ur=null,kt=!1,Bl=null,Fn=!1,S1=Error(a(519));function Vl(f){var m=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zf(Hn(m,f)),S1}function xD(f){var m=f.stateNode,_=f.type,j=f.memoizedProps;switch(m[Re]=f,m[qe]=j,_){case"dialog":Mt("cancel",m),Mt("close",m);break;case"iframe":case"object":case"embed":Mt("load",m);break;case"video":case"audio":for(_=0;_<ip.length;_++)Mt(ip[_],m);break;case"source":Mt("error",m);break;case"img":case"image":case"link":Mt("error",m),Mt("load",m);break;case"details":Mt("toggle",m);break;case"input":Mt("invalid",m),ME(m,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":Mt("invalid",m);break;case"textarea":Mt("invalid",m),LE(m,j.value,j.defaultValue,j.children)}_=j.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||m.textContent===""+_||j.suppressHydrationWarning===!0||k5(m.textContent,_)?(j.popover!=null&&(Mt("beforetoggle",m),Mt("toggle",m)),j.onScroll!=null&&Mt("scroll",m),j.onScrollEnd!=null&&Mt("scrollend",m),j.onClick!=null&&(m.onclick=Ii),m=!0):m=!1,m||Vl(f,!0)}function yD(f){for(ba=f.return;ba;)switch(ba.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:ba=ba.return}}function cd(f){if(f!==ba)return!1;if(!kt)return yD(f),kt=!0,!1;var m=f.tag,_;if((_=m!==3&&m!==27)&&((_=m===5)&&(_=f.type,_=!(_!=="form"&&_!=="button")||U_(f.type,f.memoizedProps)),_=!_),_&&ur&&Vl(f),yD(f),m===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));ur=F5(f)}else if(m===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));ur=F5(f)}else m===27?(m=ur,eo(f.type)?(f=q_,q_=null,ur=f):ur=m):ur=ba?Wn(f.stateNode.nextSibling):null;return!0}function sc(){ur=ba=null,kt=!1}function C1(){var f=Bl;return f!==null&&(tn===null?tn=f:tn.push.apply(tn,f),Bl=null),f}function zf(f){Bl===null?Bl=[f]:Bl.push(f)}var T1=G(null),ic=null,zi=null;function Hl(f,m,_){Z(T1,m._currentValue),m._currentValue=_}function Bi(f){f._currentValue=T1.current,$(T1)}function A1(f,m,_){for(;f!==null;){var j=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,j!==null&&(j.childLanes|=m)):j!==null&&(j.childLanes&m)!==m&&(j.childLanes|=m),f===_)break;f=f.return}}function E1(f,m,_,j){var E=f.child;for(E!==null&&(E.return=f);E!==null;){var D=E.dependencies;if(D!==null){var V=E.child;D=D.firstContext;e:for(;D!==null;){var W=D;D=E;for(var K=0;K<m.length;K++)if(W.context===m[K]){D.lanes|=_,W=D.alternate,W!==null&&(W.lanes|=_),A1(D.return,_,f),j||(V=null);break e}D=W.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(a(341));V.lanes|=_,D=V.alternate,D!==null&&(D.lanes|=_),A1(V,_,f),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===f){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function ud(f,m,_,j){f=null;for(var E=m,D=!1;E!==null;){if(!D){if((E.flags&524288)!==0)D=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(a(387));if(V=V.memoizedProps,V!==null){var W=E.type;vn(E.pendingProps.value,V.value)||(f!==null?f.push(W):f=[W])}}else if(E===Ve.current){if(V=E.alternate,V===null)throw Error(a(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(f!==null?f.push(dp):f=[dp])}E=E.return}f!==null&&E1(m,f,_,j),m.flags|=262144}function iv(f){for(f=f.firstContext;f!==null;){if(!vn(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function lc(f){ic=f,zi=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function _a(f){return bD(ic,f)}function lv(f,m){return ic===null&&lc(f),bD(f,m)}function bD(f,m){var _=m._currentValue;if(m={context:m,memoizedValue:_,next:null},zi===null){if(f===null)throw Error(a(308));zi=m,f.dependencies={lanes:0,firstContext:m},f.flags|=524288}else zi=zi.next=m;return _}var xF=typeof AbortController<"u"?AbortController:function(){var f=[],m=this.signal={aborted:!1,addEventListener:function(_,j){f.push(j)}};this.abort=function(){m.aborted=!0,f.forEach(function(_){return _()})}},yF=r.unstable_scheduleCallback,bF=r.unstable_NormalPriority,Hr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function D1(){return{controller:new xF,data:new Map,refCount:0}}function Bf(f){f.refCount--,f.refCount===0&&yF(bF,function(){f.controller.abort()})}var Vf=null,M1=0,dd=0,hd=null;function _F(f,m){if(Vf===null){var _=Vf=[];M1=0,dd=I_(),hd={status:"pending",value:void 0,then:function(j){_.push(j)}}}return M1++,m.then(_D,_D),m}function _D(){if(--M1===0&&Vf!==null){hd!==null&&(hd.status="fulfilled");var f=Vf;Vf=null,dd=0,hd=null;for(var m=0;m<f.length;m++)(0,f[m])()}}function NF(f,m){var _=[],j={status:"pending",value:null,reason:null,then:function(E){_.push(E)}};return f.then(function(){j.status="fulfilled",j.value=m;for(var E=0;E<_.length;E++)(0,_[E])(m)},function(E){for(j.status="rejected",j.reason=E,E=0;E<_.length;E++)(0,_[E])(void 0)}),j}var ND=P.S;P.S=function(f,m){s5=oa(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&_F(f,m),ND!==null&&ND(f,m)};var oc=G(null);function R1(){var f=oc.current;return f!==null?f:ar.pooledCache}function ov(f,m){m===null?Z(oc,oc.current):Z(oc,m.pool)}function jD(){var f=R1();return f===null?null:{parent:Hr._currentValue,pool:f}}var fd=Error(a(460)),L1=Error(a(474)),cv=Error(a(542)),uv={then:function(){}};function wD(f){return f=f.status,f==="fulfilled"||f==="rejected"}function SD(f,m,_){switch(_=f[_],_===void 0?f.push(m):_!==m&&(m.then(Ii,Ii),m=_),m.status){case"fulfilled":return m.value;case"rejected":throw f=m.reason,TD(f),f;default:if(typeof m.status=="string")m.then(Ii,Ii);else{if(f=ar,f!==null&&100<f.shellSuspendCounter)throw Error(a(482));f=m,f.status="pending",f.then(function(j){if(m.status==="pending"){var E=m;E.status="fulfilled",E.value=j}},function(j){if(m.status==="pending"){var E=m;E.status="rejected",E.reason=j}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw f=m.reason,TD(f),f}throw uc=m,fd}}function cc(f){try{var m=f._init;return m(f._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(uc=_,fd):_}}var uc=null;function CD(){if(uc===null)throw Error(a(459));var f=uc;return uc=null,f}function TD(f){if(f===fd||f===cv)throw Error(a(483))}var pd=null,Hf=0;function dv(f){var m=Hf;return Hf+=1,pd===null&&(pd=[]),SD(pd,f,m)}function Gf(f,m){m=m.props.ref,f.ref=m!==void 0?m:null}function hv(f,m){throw m.$$typeof===p?Error(a(525)):(f=Object.prototype.toString.call(m),Error(a(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f)))}function AD(f){function m(ae,J){if(f){var ne=ae.deletions;ne===null?(ae.deletions=[J],ae.flags|=16):ne.push(J)}}function _(ae,J){if(!f)return null;for(;J!==null;)m(ae,J),J=J.sibling;return null}function j(ae){for(var J=new Map;ae!==null;)ae.key!==null?J.set(ae.key,ae):J.set(ae.index,ae),ae=ae.sibling;return J}function E(ae,J){return ae=Oi(ae,J),ae.index=0,ae.sibling=null,ae}function D(ae,J,ne){return ae.index=ne,f?(ne=ae.alternate,ne!==null?(ne=ne.index,ne<J?(ae.flags|=67108866,J):ne):(ae.flags|=67108866,J)):(ae.flags|=1048576,J)}function V(ae){return f&&ae.alternate===null&&(ae.flags|=67108866),ae}function W(ae,J,ne,xe){return J===null||J.tag!==6?(J=_1(ne,ae.mode,xe),J.return=ae,J):(J=E(J,ne),J.return=ae,J)}function K(ae,J,ne,xe){var at=ne.type;return at===y?ve(ae,J,ne.props.children,xe,ne.key):J!==null&&(J.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===M&&cc(at)===J.type)?(J=E(J,ne.props),Gf(J,ne),J.return=ae,J):(J=nv(ne.type,ne.key,ne.props,null,ae.mode,xe),Gf(J,ne),J.return=ae,J)}function se(ae,J,ne,xe){return J===null||J.tag!==4||J.stateNode.containerInfo!==ne.containerInfo||J.stateNode.implementation!==ne.implementation?(J=N1(ne,ae.mode,xe),J.return=ae,J):(J=E(J,ne.children||[]),J.return=ae,J)}function ve(ae,J,ne,xe,at){return J===null||J.tag!==7?(J=nc(ne,ae.mode,xe,at),J.return=ae,J):(J=E(J,ne),J.return=ae,J)}function ye(ae,J,ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=_1(""+J,ae.mode,ne),J.return=ae,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return ne=nv(J.type,J.key,J.props,null,ae.mode,ne),Gf(ne,J),ne.return=ae,ne;case v:return J=N1(J,ae.mode,ne),J.return=ae,J;case M:return J=cc(J),ye(ae,J,ne)}if(H(J)||O(J))return J=nc(J,ae.mode,ne,null),J.return=ae,J;if(typeof J.then=="function")return ye(ae,dv(J),ne);if(J.$$typeof===w)return ye(ae,lv(ae,J),ne);hv(ae,J)}return null}function ce(ae,J,ne,xe){var at=J!==null?J.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return at!==null?null:W(ae,J,""+ne,xe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return ne.key===at?K(ae,J,ne,xe):null;case v:return ne.key===at?se(ae,J,ne,xe):null;case M:return ne=cc(ne),ce(ae,J,ne,xe)}if(H(ne)||O(ne))return at!==null?null:ve(ae,J,ne,xe,null);if(typeof ne.then=="function")return ce(ae,J,dv(ne),xe);if(ne.$$typeof===w)return ce(ae,J,lv(ae,ne),xe);hv(ae,ne)}return null}function fe(ae,J,ne,xe,at){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ae=ae.get(ne)||null,W(J,ae,""+xe,at);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case g:return ae=ae.get(xe.key===null?ne:xe.key)||null,K(J,ae,xe,at);case v:return ae=ae.get(xe.key===null?ne:xe.key)||null,se(J,ae,xe,at);case M:return xe=cc(xe),fe(ae,J,ne,xe,at)}if(H(xe)||O(xe))return ae=ae.get(ne)||null,ve(J,ae,xe,at,null);if(typeof xe.then=="function")return fe(ae,J,ne,dv(xe),at);if(xe.$$typeof===w)return fe(ae,J,ne,lv(J,xe),at);hv(J,xe)}return null}function Ze(ae,J,ne,xe){for(var at=null,Bt=null,Qe=J,jt=J=0,It=null;Qe!==null&&jt<ne.length;jt++){Qe.index>jt?(It=Qe,Qe=null):It=Qe.sibling;var Vt=ce(ae,Qe,ne[jt],xe);if(Vt===null){Qe===null&&(Qe=It);break}f&&Qe&&Vt.alternate===null&&m(ae,Qe),J=D(Vt,J,jt),Bt===null?at=Vt:Bt.sibling=Vt,Bt=Vt,Qe=It}if(jt===ne.length)return _(ae,Qe),kt&&Pi(ae,jt),at;if(Qe===null){for(;jt<ne.length;jt++)Qe=ye(ae,ne[jt],xe),Qe!==null&&(J=D(Qe,J,jt),Bt===null?at=Qe:Bt.sibling=Qe,Bt=Qe);return kt&&Pi(ae,jt),at}for(Qe=j(Qe);jt<ne.length;jt++)It=fe(Qe,ae,jt,ne[jt],xe),It!==null&&(f&&It.alternate!==null&&Qe.delete(It.key===null?jt:It.key),J=D(It,J,jt),Bt===null?at=It:Bt.sibling=It,Bt=It);return f&&Qe.forEach(function(so){return m(ae,so)}),kt&&Pi(ae,jt),at}function lt(ae,J,ne,xe){if(ne==null)throw Error(a(151));for(var at=null,Bt=null,Qe=J,jt=J=0,It=null,Vt=ne.next();Qe!==null&&!Vt.done;jt++,Vt=ne.next()){Qe.index>jt?(It=Qe,Qe=null):It=Qe.sibling;var so=ce(ae,Qe,Vt.value,xe);if(so===null){Qe===null&&(Qe=It);break}f&&Qe&&so.alternate===null&&m(ae,Qe),J=D(so,J,jt),Bt===null?at=so:Bt.sibling=so,Bt=so,Qe=It}if(Vt.done)return _(ae,Qe),kt&&Pi(ae,jt),at;if(Qe===null){for(;!Vt.done;jt++,Vt=ne.next())Vt=ye(ae,Vt.value,xe),Vt!==null&&(J=D(Vt,J,jt),Bt===null?at=Vt:Bt.sibling=Vt,Bt=Vt);return kt&&Pi(ae,jt),at}for(Qe=j(Qe);!Vt.done;jt++,Vt=ne.next())Vt=fe(Qe,ae,jt,Vt.value,xe),Vt!==null&&(f&&Vt.alternate!==null&&Qe.delete(Vt.key===null?jt:Vt.key),J=D(Vt,J,jt),Bt===null?at=Vt:Bt.sibling=Vt,Bt=Vt);return f&&Qe.forEach(function(LY){return m(ae,LY)}),kt&&Pi(ae,jt),at}function er(ae,J,ne,xe){if(typeof ne=="object"&&ne!==null&&ne.type===y&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:e:{for(var at=ne.key;J!==null;){if(J.key===at){if(at=ne.type,at===y){if(J.tag===7){_(ae,J.sibling),xe=E(J,ne.props.children),xe.return=ae,ae=xe;break e}}else if(J.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===M&&cc(at)===J.type){_(ae,J.sibling),xe=E(J,ne.props),Gf(xe,ne),xe.return=ae,ae=xe;break e}_(ae,J);break}else m(ae,J);J=J.sibling}ne.type===y?(xe=nc(ne.props.children,ae.mode,xe,ne.key),xe.return=ae,ae=xe):(xe=nv(ne.type,ne.key,ne.props,null,ae.mode,xe),Gf(xe,ne),xe.return=ae,ae=xe)}return V(ae);case v:e:{for(at=ne.key;J!==null;){if(J.key===at)if(J.tag===4&&J.stateNode.containerInfo===ne.containerInfo&&J.stateNode.implementation===ne.implementation){_(ae,J.sibling),xe=E(J,ne.children||[]),xe.return=ae,ae=xe;break e}else{_(ae,J);break}else m(ae,J);J=J.sibling}xe=N1(ne,ae.mode,xe),xe.return=ae,ae=xe}return V(ae);case M:return ne=cc(ne),er(ae,J,ne,xe)}if(H(ne))return Ze(ae,J,ne,xe);if(O(ne)){if(at=O(ne),typeof at!="function")throw Error(a(150));return ne=at.call(ne),lt(ae,J,ne,xe)}if(typeof ne.then=="function")return er(ae,J,dv(ne),xe);if(ne.$$typeof===w)return er(ae,J,lv(ae,ne),xe);hv(ae,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,J!==null&&J.tag===6?(_(ae,J.sibling),xe=E(J,ne),xe.return=ae,ae=xe):(_(ae,J),xe=_1(ne,ae.mode,xe),xe.return=ae,ae=xe),V(ae)):_(ae,J)}return function(ae,J,ne,xe){try{Hf=0;var at=er(ae,J,ne,xe);return pd=null,at}catch(Qe){if(Qe===fd||Qe===cv)throw Qe;var Bt=xn(29,Qe,null,ae.mode);return Bt.lanes=xe,Bt.return=ae,Bt}finally{}}}var dc=AD(!0),ED=AD(!1),Gl=!1;function I1(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function k1(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Ul(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Fl(f,m,_){var j=f.updateQueue;if(j===null)return null;if(j=j.shared,(Ht&2)!==0){var E=j.pending;return E===null?m.next=m:(m.next=E.next,E.next=m),j.pending=m,m=av(f),hD(f,null,_),m}return rv(f,j,m,_),av(f)}function Uf(f,m,_){if(m=m.updateQueue,m!==null&&(m=m.shared,(_&4194048)!==0)){var j=m.lanes;j&=f.pendingLanes,_|=j,m.lanes=_,_f(f,_)}}function O1(f,m){var _=f.updateQueue,j=f.alternate;if(j!==null&&(j=j.updateQueue,_===j)){var E=null,D=null;if(_=_.firstBaseUpdate,_!==null){do{var V={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};D===null?E=D=V:D=D.next=V,_=_.next}while(_!==null);D===null?E=D=m:D=D.next=m}else E=D=m;_={baseState:j.baseState,firstBaseUpdate:E,lastBaseUpdate:D,shared:j.shared,callbacks:j.callbacks},f.updateQueue=_;return}f=_.lastBaseUpdate,f===null?_.firstBaseUpdate=m:f.next=m,_.lastBaseUpdate=m}var P1=!1;function Ff(){if(P1){var f=hd;if(f!==null)throw f}}function Yf(f,m,_,j){P1=!1;var E=f.updateQueue;Gl=!1;var D=E.firstBaseUpdate,V=E.lastBaseUpdate,W=E.shared.pending;if(W!==null){E.shared.pending=null;var K=W,se=K.next;K.next=null,V===null?D=se:V.next=se,V=K;var ve=f.alternate;ve!==null&&(ve=ve.updateQueue,W=ve.lastBaseUpdate,W!==V&&(W===null?ve.firstBaseUpdate=se:W.next=se,ve.lastBaseUpdate=K))}if(D!==null){var ye=E.baseState;V=0,ve=se=K=null,W=D;do{var ce=W.lane&-536870913,fe=ce!==W.lane;if(fe?(Lt&ce)===ce:(j&ce)===ce){ce!==0&&ce===dd&&(P1=!0),ve!==null&&(ve=ve.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Ze=f,lt=W;ce=m;var er=_;switch(lt.tag){case 1:if(Ze=lt.payload,typeof Ze=="function"){ye=Ze.call(er,ye,ce);break e}ye=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=lt.payload,ce=typeof Ze=="function"?Ze.call(er,ye,ce):Ze,ce==null)break e;ye=h({},ye,ce);break e;case 2:Gl=!0}}ce=W.callback,ce!==null&&(f.flags|=64,fe&&(f.flags|=8192),fe=E.callbacks,fe===null?E.callbacks=[ce]:fe.push(ce))}else fe={lane:ce,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ve===null?(se=ve=fe,K=ye):ve=ve.next=fe,V|=ce;if(W=W.next,W===null){if(W=E.shared.pending,W===null)break;fe=W,W=fe.next,fe.next=null,E.lastBaseUpdate=fe,E.shared.pending=null}}while(!0);ve===null&&(K=ye),E.baseState=K,E.firstBaseUpdate=se,E.lastBaseUpdate=ve,D===null&&(E.shared.lanes=0),Xl|=V,f.lanes=V,f.memoizedState=ye}}function DD(f,m){if(typeof f!="function")throw Error(a(191,f));f.call(m)}function MD(f,m){var _=f.callbacks;if(_!==null)for(f.callbacks=null,f=0;f<_.length;f++)DD(_[f],m)}var gd=G(null),fv=G(0);function RD(f,m){f=qi,Z(fv,f),Z(gd,m),qi=f|m.baseLanes}function z1(){Z(fv,qi),Z(gd,gd.current)}function B1(){qi=fv.current,$(gd),$(fv)}var yn=G(null),Yn=null;function Yl(f){var m=f.alternate;Z(Mr,Mr.current&1),Z(yn,f),Yn===null&&(m===null||gd.current!==null||m.memoizedState!==null)&&(Yn=f)}function V1(f){Z(Mr,Mr.current),Z(yn,f),Yn===null&&(Yn=f)}function LD(f){f.tag===22?(Z(Mr,Mr.current),Z(yn,f),Yn===null&&(Yn=f)):Wl()}function Wl(){Z(Mr,Mr.current),Z(yn,yn.current)}function bn(f){$(yn),Yn===f&&(Yn=null),$(Mr)}var Mr=G(0);function pv(f){for(var m=f;m!==null;){if(m.tag===13){var _=m.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||W_(_)||$_(_)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Vi=0,yt=null,Qt=null,Gr=null,gv=!1,md=!1,hc=!1,mv=0,Wf=0,vd=null,jF=0;function br(){throw Error(a(321))}function H1(f,m){if(m===null)return!1;for(var _=0;_<m.length&&_<f.length;_++)if(!vn(f[_],m[_]))return!1;return!0}function G1(f,m,_,j,E,D){return Vi=D,yt=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,P.H=f===null||f.memoizedState===null?mM:a_,hc=!1,D=_(j,E),hc=!1,md&&(D=kD(m,_,j,E)),ID(f),D}function ID(f){P.H=Xf;var m=Qt!==null&&Qt.next!==null;if(Vi=0,Gr=Qt=yt=null,gv=!1,Wf=0,vd=null,m)throw Error(a(300));f===null||Ur||(f=f.dependencies,f!==null&&iv(f)&&(Ur=!0))}function kD(f,m,_,j){yt=f;var E=0;do{if(md&&(vd=null),Wf=0,md=!1,25<=E)throw Error(a(301));if(E+=1,Gr=Qt=null,f.updateQueue!=null){var D=f.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}P.H=vM,D=m(_,j)}while(md);return D}function wF(){var f=P.H,m=f.useState()[0];return m=typeof m.then=="function"?$f(m):m,f=f.useState()[0],(Qt!==null?Qt.memoizedState:null)!==f&&(yt.flags|=1024),m}function U1(){var f=mv!==0;return mv=0,f}function F1(f,m,_){m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~_}function Y1(f){if(gv){for(f=f.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}gv=!1}Vi=0,Gr=Qt=yt=null,md=!1,Wf=mv=0,vd=null}function Ua(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?yt.memoizedState=Gr=f:Gr=Gr.next=f,Gr}function Rr(){if(Qt===null){var f=yt.alternate;f=f!==null?f.memoizedState:null}else f=Qt.next;var m=Gr===null?yt.memoizedState:Gr.next;if(m!==null)Gr=m,Qt=f;else{if(f===null)throw yt.alternate===null?Error(a(467)):Error(a(310));Qt=f,f={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Gr===null?yt.memoizedState=Gr=f:Gr=Gr.next=f}return Gr}function vv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $f(f){var m=Wf;return Wf+=1,vd===null&&(vd=[]),f=SD(vd,f,m),m=yt,(Gr===null?m.memoizedState:Gr.next)===null&&(m=m.alternate,P.H=m===null||m.memoizedState===null?mM:a_),f}function xv(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return $f(f);if(f.$$typeof===w)return _a(f)}throw Error(a(438,String(f)))}function W1(f){var m=null,_=yt.updateQueue;if(_!==null&&(m=_.memoCache),m==null){var j=yt.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(m={data:j.data.map(function(E){return E.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),_===null&&(_=vv(),yt.updateQueue=_),_.memoCache=m,_=m.data[m.index],_===void 0)for(_=m.data[m.index]=Array(f),j=0;j<f;j++)_[j]=k;return m.index++,_}function Hi(f,m){return typeof m=="function"?m(f):m}function yv(f){var m=Rr();return $1(m,Qt,f)}function $1(f,m,_){var j=f.queue;if(j===null)throw Error(a(311));j.lastRenderedReducer=_;var E=f.baseQueue,D=j.pending;if(D!==null){if(E!==null){var V=E.next;E.next=D.next,D.next=V}m.baseQueue=E=D,j.pending=null}if(D=f.baseState,E===null)f.memoizedState=D;else{m=E.next;var W=V=null,K=null,se=m,ve=!1;do{var ye=se.lane&-536870913;if(ye!==se.lane?(Lt&ye)===ye:(Vi&ye)===ye){var ce=se.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ye===dd&&(ve=!0);else if((Vi&ce)===ce){se=se.next,ce===dd&&(ve=!0);continue}else ye={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},K===null?(W=K=ye,V=D):K=K.next=ye,yt.lanes|=ce,Xl|=ce;ye=se.action,hc&&_(D,ye),D=se.hasEagerState?se.eagerState:_(D,ye)}else ce={lane:ye,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},K===null?(W=K=ce,V=D):K=K.next=ce,yt.lanes|=ye,Xl|=ye;se=se.next}while(se!==null&&se!==m);if(K===null?V=D:K.next=W,!vn(D,f.memoizedState)&&(Ur=!0,ve&&(_=hd,_!==null)))throw _;f.memoizedState=D,f.baseState=V,f.baseQueue=K,j.lastRenderedState=D}return E===null&&(j.lanes=0),[f.memoizedState,j.dispatch]}function q1(f){var m=Rr(),_=m.queue;if(_===null)throw Error(a(311));_.lastRenderedReducer=f;var j=_.dispatch,E=_.pending,D=m.memoizedState;if(E!==null){_.pending=null;var V=E=E.next;do D=f(D,V.action),V=V.next;while(V!==E);vn(D,m.memoizedState)||(Ur=!0),m.memoizedState=D,m.baseQueue===null&&(m.baseState=D),_.lastRenderedState=D}return[D,j]}function OD(f,m,_){var j=yt,E=Rr(),D=kt;if(D){if(_===void 0)throw Error(a(407));_=_()}else _=m();var V=!vn((Qt||E).memoizedState,_);if(V&&(E.memoizedState=_,Ur=!0),E=E.queue,K1(BD.bind(null,j,E,f),[f]),E.getSnapshot!==m||V||Gr!==null&&Gr.memoizedState.tag&1){if(j.flags|=2048,xd(9,{destroy:void 0},zD.bind(null,j,E,_,m),null),ar===null)throw Error(a(349));D||(Vi&127)!==0||PD(j,m,_)}return _}function PD(f,m,_){f.flags|=16384,f={getSnapshot:m,value:_},m=yt.updateQueue,m===null?(m=vv(),yt.updateQueue=m,m.stores=[f]):(_=m.stores,_===null?m.stores=[f]:_.push(f))}function zD(f,m,_,j){m.value=_,m.getSnapshot=j,VD(m)&&HD(f)}function BD(f,m,_){return _(function(){VD(m)&&HD(f)})}function VD(f){var m=f.getSnapshot;f=f.value;try{var _=m();return!vn(f,_)}catch{return!0}}function HD(f){var m=ac(f,2);m!==null&&rn(m,f,2)}function X1(f){var m=Ua();if(typeof f=="function"){var _=f;if(f=_(),hc){Pn(!0);try{_()}finally{Pn(!1)}}}return m.memoizedState=m.baseState=f,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:f},m}function GD(f,m,_,j){return f.baseState=_,$1(f,Qt,typeof j=="function"?j:Hi)}function SF(f,m,_,j,E){if(Nv(f))throw Error(a(485));if(f=m.action,f!==null){var D={payload:E,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){D.listeners.push(V)}};P.T!==null?_(!0):D.isTransition=!1,j(D),_=m.pending,_===null?(D.next=m.pending=D,UD(m,D)):(D.next=_.next,m.pending=_.next=D)}}function UD(f,m){var _=m.action,j=m.payload,E=f.state;if(m.isTransition){var D=P.T,V={};P.T=V;try{var W=_(E,j),K=P.S;K!==null&&K(V,W),FD(f,m,W)}catch(se){Z1(f,m,se)}finally{D!==null&&V.types!==null&&(D.types=V.types),P.T=D}}else try{D=_(E,j),FD(f,m,D)}catch(se){Z1(f,m,se)}}function FD(f,m,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(j){YD(f,m,j)},function(j){return Z1(f,m,j)}):YD(f,m,_)}function YD(f,m,_){m.status="fulfilled",m.value=_,WD(m),f.state=_,m=f.pending,m!==null&&(_=m.next,_===m?f.pending=null:(_=_.next,m.next=_,UD(f,_)))}function Z1(f,m,_){var j=f.pending;if(f.pending=null,j!==null){j=j.next;do m.status="rejected",m.reason=_,WD(m),m=m.next;while(m!==j)}f.action=null}function WD(f){f=f.listeners;for(var m=0;m<f.length;m++)(0,f[m])()}function $D(f,m){return m}function qD(f,m){if(kt){var _=ar.formState;if(_!==null){e:{var j=yt;if(kt){if(ur){t:{for(var E=ur,D=Fn;E.nodeType!==8;){if(!D){E=null;break t}if(E=Wn(E.nextSibling),E===null){E=null;break t}}D=E.data,E=D==="F!"||D==="F"?E:null}if(E){ur=Wn(E.nextSibling),j=E.data==="F!";break e}}Vl(j)}j=!1}j&&(m=_[0])}}return _=Ua(),_.memoizedState=_.baseState=m,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$D,lastRenderedState:m},_.queue=j,_=fM.bind(null,yt,j),j.dispatch=_,j=X1(!1),D=r_.bind(null,yt,!1,j.queue),j=Ua(),E={state:m,dispatch:null,action:f,pending:null},j.queue=E,_=SF.bind(null,yt,E,D,_),E.dispatch=_,j.memoizedState=f,[m,_,!1]}function XD(f){var m=Rr();return ZD(m,Qt,f)}function ZD(f,m,_){if(m=$1(f,m,$D)[0],f=yv(Hi)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var j=$f(m)}catch(V){throw V===fd?cv:V}else j=m;m=Rr();var E=m.queue,D=E.dispatch;return _!==m.memoizedState&&(yt.flags|=2048,xd(9,{destroy:void 0},CF.bind(null,E,_),null)),[j,D,f]}function CF(f,m){f.action=m}function KD(f){var m=Rr(),_=Qt;if(_!==null)return ZD(m,_,f);Rr(),m=m.memoizedState,_=Rr();var j=_.queue.dispatch;return _.memoizedState=f,[m,j,!1]}function xd(f,m,_,j){return f={tag:f,create:_,deps:j,inst:m,next:null},m=yt.updateQueue,m===null&&(m=vv(),yt.updateQueue=m),_=m.lastEffect,_===null?m.lastEffect=f.next=f:(j=_.next,_.next=f,f.next=j,m.lastEffect=f),f}function QD(){return Rr().memoizedState}function bv(f,m,_,j){var E=Ua();yt.flags|=f,E.memoizedState=xd(1|m,{destroy:void 0},_,j===void 0?null:j)}function _v(f,m,_,j){var E=Rr();j=j===void 0?null:j;var D=E.memoizedState.inst;Qt!==null&&j!==null&&H1(j,Qt.memoizedState.deps)?E.memoizedState=xd(m,D,_,j):(yt.flags|=f,E.memoizedState=xd(1|m,D,_,j))}function JD(f,m){bv(8390656,8,f,m)}function K1(f,m){_v(2048,8,f,m)}function TF(f){yt.flags|=4;var m=yt.updateQueue;if(m===null)m=vv(),yt.updateQueue=m,m.events=[f];else{var _=m.events;_===null?m.events=[f]:_.push(f)}}function eM(f){var m=Rr().memoizedState;return TF({ref:m,nextImpl:f}),function(){if((Ht&2)!==0)throw Error(a(440));return m.impl.apply(void 0,arguments)}}function tM(f,m){return _v(4,2,f,m)}function rM(f,m){return _v(4,4,f,m)}function aM(f,m){if(typeof m=="function"){f=f();var _=m(f);return function(){typeof _=="function"?_():m(null)}}if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function nM(f,m,_){_=_!=null?_.concat([f]):null,_v(4,4,aM.bind(null,m,f),_)}function Q1(){}function sM(f,m){var _=Rr();m=m===void 0?null:m;var j=_.memoizedState;return m!==null&&H1(m,j[1])?j[0]:(_.memoizedState=[f,m],f)}function iM(f,m){var _=Rr();m=m===void 0?null:m;var j=_.memoizedState;if(m!==null&&H1(m,j[1]))return j[0];if(j=f(),hc){Pn(!0);try{f()}finally{Pn(!1)}}return _.memoizedState=[j,m],j}function J1(f,m,_){return _===void 0||(Vi&1073741824)!==0&&(Lt&261930)===0?f.memoizedState=m:(f.memoizedState=_,f=l5(),yt.lanes|=f,Xl|=f,_)}function lM(f,m,_,j){return vn(_,m)?_:gd.current!==null?(f=J1(f,_,j),vn(f,m)||(Ur=!0),f):(Vi&42)===0||(Vi&1073741824)!==0&&(Lt&261930)===0?(Ur=!0,f.memoizedState=_):(f=l5(),yt.lanes|=f,Xl|=f,m)}function oM(f,m,_,j,E){var D=F.p;F.p=D!==0&&8>D?D:8;var V=P.T,W={};P.T=W,r_(f,!1,m,_);try{var K=E(),se=P.S;if(se!==null&&se(W,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ve=NF(K,j);qf(f,m,ve,jn(f))}else qf(f,m,j,jn(f))}catch(ye){qf(f,m,{then:function(){},status:"rejected",reason:ye},jn())}finally{F.p=D,V!==null&&W.types!==null&&(V.types=W.types),P.T=V}}function AF(){}function e_(f,m,_,j){if(f.tag!==5)throw Error(a(476));var E=cM(f).queue;oM(f,E,m,Y,_===null?AF:function(){return uM(f),_(j)})}function cM(f){var m=f.memoizedState;if(m!==null)return m;m={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:Y},next:null};var _={};return m.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:_},next:null},f.memoizedState=m,f=f.alternate,f!==null&&(f.memoizedState=m),m}function uM(f){var m=cM(f);m.next===null&&(m=f.alternate.memoizedState),qf(f,m.next.queue,{},jn())}function t_(){return _a(dp)}function dM(){return Rr().memoizedState}function hM(){return Rr().memoizedState}function EF(f){for(var m=f.return;m!==null;){switch(m.tag){case 24:case 3:var _=jn();f=Ul(_);var j=Fl(m,f,_);j!==null&&(rn(j,m,_),Uf(j,m,_)),m={cache:D1()},f.payload=m;return}m=m.return}}function DF(f,m,_){var j=jn();_={lane:j,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Nv(f)?pM(m,_):(_=y1(f,m,_,j),_!==null&&(rn(_,f,j),gM(_,m,j)))}function fM(f,m,_){var j=jn();qf(f,m,_,j)}function qf(f,m,_,j){var E={lane:j,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(Nv(f))pM(m,E);else{var D=f.alternate;if(f.lanes===0&&(D===null||D.lanes===0)&&(D=m.lastRenderedReducer,D!==null))try{var V=m.lastRenderedState,W=D(V,_);if(E.hasEagerState=!0,E.eagerState=W,vn(W,V))return rv(f,m,E,0),ar===null&&tv(),!1}catch{}finally{}if(_=y1(f,m,E,j),_!==null)return rn(_,f,j),gM(_,m,j),!0}return!1}function r_(f,m,_,j){if(j={lane:2,revertLane:I_(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},Nv(f)){if(m)throw Error(a(479))}else m=y1(f,_,j,2),m!==null&&rn(m,f,2)}function Nv(f){var m=f.alternate;return f===yt||m!==null&&m===yt}function pM(f,m){md=gv=!0;var _=f.pending;_===null?m.next=m:(m.next=_.next,_.next=m),f.pending=m}function gM(f,m,_){if((_&4194048)!==0){var j=m.lanes;j&=f.pendingLanes,_|=j,m.lanes=_,_f(f,_)}}var Xf={readContext:_a,use:xv,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useLayoutEffect:br,useInsertionEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useSyncExternalStore:br,useId:br,useHostTransitionStatus:br,useFormState:br,useActionState:br,useOptimistic:br,useMemoCache:br,useCacheRefresh:br};Xf.useEffectEvent=br;var mM={readContext:_a,use:xv,useCallback:function(f,m){return Ua().memoizedState=[f,m===void 0?null:m],f},useContext:_a,useEffect:JD,useImperativeHandle:function(f,m,_){_=_!=null?_.concat([f]):null,bv(4194308,4,aM.bind(null,m,f),_)},useLayoutEffect:function(f,m){return bv(4194308,4,f,m)},useInsertionEffect:function(f,m){bv(4,2,f,m)},useMemo:function(f,m){var _=Ua();m=m===void 0?null:m;var j=f();if(hc){Pn(!0);try{f()}finally{Pn(!1)}}return _.memoizedState=[j,m],j},useReducer:function(f,m,_){var j=Ua();if(_!==void 0){var E=_(m);if(hc){Pn(!0);try{_(m)}finally{Pn(!1)}}}else E=m;return j.memoizedState=j.baseState=E,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:E},j.queue=f,f=f.dispatch=DF.bind(null,yt,f),[j.memoizedState,f]},useRef:function(f){var m=Ua();return f={current:f},m.memoizedState=f},useState:function(f){f=X1(f);var m=f.queue,_=fM.bind(null,yt,m);return m.dispatch=_,[f.memoizedState,_]},useDebugValue:Q1,useDeferredValue:function(f,m){var _=Ua();return J1(_,f,m)},useTransition:function(){var f=X1(!1);return f=oM.bind(null,yt,f.queue,!0,!1),Ua().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,m,_){var j=yt,E=Ua();if(kt){if(_===void 0)throw Error(a(407));_=_()}else{if(_=m(),ar===null)throw Error(a(349));(Lt&127)!==0||PD(j,m,_)}E.memoizedState=_;var D={value:_,getSnapshot:m};return E.queue=D,JD(BD.bind(null,j,D,f),[f]),j.flags|=2048,xd(9,{destroy:void 0},zD.bind(null,j,D,_,m),null),_},useId:function(){var f=Ua(),m=ar.identifierPrefix;if(kt){var _=Xs,j=qs;_=(j&~(1<<32-ca(j)-1)).toString(32)+_,m="_"+m+"R_"+_,_=mv++,0<_&&(m+="H"+_.toString(32)),m+="_"}else _=jF++,m="_"+m+"r_"+_.toString(32)+"_";return f.memoizedState=m},useHostTransitionStatus:t_,useFormState:qD,useActionState:qD,useOptimistic:function(f){var m=Ua();m.memoizedState=m.baseState=f;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=_,m=r_.bind(null,yt,!0,_),_.dispatch=m,[f,m]},useMemoCache:W1,useCacheRefresh:function(){return Ua().memoizedState=EF.bind(null,yt)},useEffectEvent:function(f){var m=Ua(),_={impl:f};return m.memoizedState=_,function(){if((Ht&2)!==0)throw Error(a(440));return _.impl.apply(void 0,arguments)}}},a_={readContext:_a,use:xv,useCallback:sM,useContext:_a,useEffect:K1,useImperativeHandle:nM,useInsertionEffect:tM,useLayoutEffect:rM,useMemo:iM,useReducer:yv,useRef:QD,useState:function(){return yv(Hi)},useDebugValue:Q1,useDeferredValue:function(f,m){var _=Rr();return lM(_,Qt.memoizedState,f,m)},useTransition:function(){var f=yv(Hi)[0],m=Rr().memoizedState;return[typeof f=="boolean"?f:$f(f),m]},useSyncExternalStore:OD,useId:dM,useHostTransitionStatus:t_,useFormState:XD,useActionState:XD,useOptimistic:function(f,m){var _=Rr();return GD(_,Qt,f,m)},useMemoCache:W1,useCacheRefresh:hM};a_.useEffectEvent=eM;var vM={readContext:_a,use:xv,useCallback:sM,useContext:_a,useEffect:K1,useImperativeHandle:nM,useInsertionEffect:tM,useLayoutEffect:rM,useMemo:iM,useReducer:q1,useRef:QD,useState:function(){return q1(Hi)},useDebugValue:Q1,useDeferredValue:function(f,m){var _=Rr();return Qt===null?J1(_,f,m):lM(_,Qt.memoizedState,f,m)},useTransition:function(){var f=q1(Hi)[0],m=Rr().memoizedState;return[typeof f=="boolean"?f:$f(f),m]},useSyncExternalStore:OD,useId:dM,useHostTransitionStatus:t_,useFormState:KD,useActionState:KD,useOptimistic:function(f,m){var _=Rr();return Qt!==null?GD(_,Qt,f,m):(_.baseState=f,[f,_.queue.dispatch])},useMemoCache:W1,useCacheRefresh:hM};vM.useEffectEvent=eM;function n_(f,m,_,j){m=f.memoizedState,_=_(j,m),_=_==null?m:h({},m,_),f.memoizedState=_,f.lanes===0&&(f.updateQueue.baseState=_)}var s_={enqueueSetState:function(f,m,_){f=f._reactInternals;var j=jn(),E=Ul(j);E.payload=m,_!=null&&(E.callback=_),m=Fl(f,E,j),m!==null&&(rn(m,f,j),Uf(m,f,j))},enqueueReplaceState:function(f,m,_){f=f._reactInternals;var j=jn(),E=Ul(j);E.tag=1,E.payload=m,_!=null&&(E.callback=_),m=Fl(f,E,j),m!==null&&(rn(m,f,j),Uf(m,f,j))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var _=jn(),j=Ul(_);j.tag=2,m!=null&&(j.callback=m),m=Fl(f,j,_),m!==null&&(rn(m,f,_),Uf(m,f,_))}};function xM(f,m,_,j,E,D,V){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(j,D,V):m.prototype&&m.prototype.isPureReactComponent?!kf(_,j)||!kf(E,D):!0}function yM(f,m,_,j){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(_,j),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(_,j),m.state!==f&&s_.enqueueReplaceState(m,m.state,null)}function fc(f,m){var _=m;if("ref"in m){_={};for(var j in m)j!=="ref"&&(_[j]=m[j])}if(f=f.defaultProps){_===m&&(_=h({},_));for(var E in f)_[E]===void 0&&(_[E]=f[E])}return _}function bM(f){ev(f)}function _M(f){console.error(f)}function NM(f){ev(f)}function jv(f,m){try{var _=f.onUncaughtError;_(m.value,{componentStack:m.stack})}catch(j){setTimeout(function(){throw j})}}function jM(f,m,_){try{var j=f.onCaughtError;j(_.value,{componentStack:_.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function i_(f,m,_){return _=Ul(_),_.tag=3,_.payload={element:null},_.callback=function(){jv(f,m)},_}function wM(f){return f=Ul(f),f.tag=3,f}function SM(f,m,_,j){var E=_.type.getDerivedStateFromError;if(typeof E=="function"){var D=j.value;f.payload=function(){return E(D)},f.callback=function(){jM(m,_,j)}}var V=_.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(f.callback=function(){jM(m,_,j),typeof E!="function"&&(Zl===null?Zl=new Set([this]):Zl.add(this));var W=j.stack;this.componentDidCatch(j.value,{componentStack:W!==null?W:""})})}function MF(f,m,_,j,E){if(_.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(m=_.alternate,m!==null&&ud(m,_,E,!0),_=yn.current,_!==null){switch(_.tag){case 31:case 13:return Yn===null?kv():_.alternate===null&&_r===0&&(_r=3),_.flags&=-257,_.flags|=65536,_.lanes=E,j===uv?_.flags|=16384:(m=_.updateQueue,m===null?_.updateQueue=new Set([j]):m.add(j),M_(f,j,E)),!1;case 22:return _.flags|=65536,j===uv?_.flags|=16384:(m=_.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([j])},_.updateQueue=m):(_=m.retryQueue,_===null?m.retryQueue=new Set([j]):_.add(j)),M_(f,j,E)),!1}throw Error(a(435,_.tag))}return M_(f,j,E),kv(),!1}if(kt)return m=yn.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=E,j!==S1&&(f=Error(a(422),{cause:j}),zf(Hn(f,_)))):(j!==S1&&(m=Error(a(423),{cause:j}),zf(Hn(m,_))),f=f.current.alternate,f.flags|=65536,E&=-E,f.lanes|=E,j=Hn(j,_),E=i_(f.stateNode,j,E),O1(f,E),_r!==4&&(_r=2)),!1;var D=Error(a(520),{cause:j});if(D=Hn(D,_),ap===null?ap=[D]:ap.push(D),_r!==4&&(_r=2),m===null)return!0;j=Hn(j,_),_=m;do{switch(_.tag){case 3:return _.flags|=65536,f=E&-E,_.lanes|=f,f=i_(_.stateNode,j,f),O1(_,f),!1;case 1:if(m=_.type,D=_.stateNode,(_.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Zl===null||!Zl.has(D))))return _.flags|=65536,E&=-E,_.lanes|=E,E=wM(E),SM(E,f,_,j),O1(_,E),!1}_=_.return}while(_!==null);return!1}var l_=Error(a(461)),Ur=!1;function Na(f,m,_,j){m.child=f===null?ED(m,null,_,j):dc(m,f.child,_,j)}function CM(f,m,_,j,E){_=_.render;var D=m.ref;if("ref"in j){var V={};for(var W in j)W!=="ref"&&(V[W]=j[W])}else V=j;return lc(m),j=G1(f,m,_,V,D,E),W=U1(),f!==null&&!Ur?(F1(f,m,E),Gi(f,m,E)):(kt&&W&&j1(m),m.flags|=1,Na(f,m,j,E),m.child)}function TM(f,m,_,j,E){if(f===null){var D=_.type;return typeof D=="function"&&!b1(D)&&D.defaultProps===void 0&&_.compare===null?(m.tag=15,m.type=D,AM(f,m,D,j,E)):(f=nv(_.type,null,j,m,m.mode,E),f.ref=m.ref,f.return=m,m.child=f)}if(D=f.child,!g_(f,E)){var V=D.memoizedProps;if(_=_.compare,_=_!==null?_:kf,_(V,j)&&f.ref===m.ref)return Gi(f,m,E)}return m.flags|=1,f=Oi(D,j),f.ref=m.ref,f.return=m,m.child=f}function AM(f,m,_,j,E){if(f!==null){var D=f.memoizedProps;if(kf(D,j)&&f.ref===m.ref)if(Ur=!1,m.pendingProps=j=D,g_(f,E))(f.flags&131072)!==0&&(Ur=!0);else return m.lanes=f.lanes,Gi(f,m,E)}return o_(f,m,_,j,E)}function EM(f,m,_,j){var E=j.children,D=f!==null?f.memoizedState:null;if(f===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((m.flags&128)!==0){if(D=D!==null?D.baseLanes|_:_,f!==null){for(j=m.child=f.child,E=0;j!==null;)E=E|j.lanes|j.childLanes,j=j.sibling;j=E&~D}else j=0,m.child=null;return DM(f,m,D,_,j)}if((_&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},f!==null&&ov(m,D!==null?D.cachePool:null),D!==null?RD(m,D):z1(),LD(m);else return j=m.lanes=536870912,DM(f,m,D!==null?D.baseLanes|_:_,_,j)}else D!==null?(ov(m,D.cachePool),RD(m,D),Wl(),m.memoizedState=null):(f!==null&&ov(m,null),z1(),Wl());return Na(f,m,E,_),m.child}function Zf(f,m){return f!==null&&f.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function DM(f,m,_,j,E){var D=R1();return D=D===null?null:{parent:Hr._currentValue,pool:D},m.memoizedState={baseLanes:_,cachePool:D},f!==null&&ov(m,null),z1(),LD(m),f!==null&&ud(f,m,j,!0),m.childLanes=E,null}function wv(f,m){return m=Cv({mode:m.mode,children:m.children},f.mode),m.ref=f.ref,f.child=m,m.return=f,m}function MM(f,m,_){return dc(m,f.child,null,_),f=wv(m,m.pendingProps),f.flags|=2,bn(m),m.memoizedState=null,f}function RF(f,m,_){var j=m.pendingProps,E=(m.flags&128)!==0;if(m.flags&=-129,f===null){if(kt){if(j.mode==="hidden")return f=wv(m,j),m.lanes=536870912,Zf(null,f);if(V1(m),(f=ur)?(f=U5(f,Fn),f=f!==null&&f.data==="&"?f:null,f!==null&&(m.memoizedState={dehydrated:f,treeContext:zl!==null?{id:qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},_=pD(f),_.return=m,m.child=_,ba=m,ur=null)):f=null,f===null)throw Vl(m);return m.lanes=536870912,null}return wv(m,j)}var D=f.memoizedState;if(D!==null){var V=D.dehydrated;if(V1(m),E)if(m.flags&256)m.flags&=-257,m=MM(f,m,_);else if(m.memoizedState!==null)m.child=f.child,m.flags|=128,m=null;else throw Error(a(558));else if(Ur||ud(f,m,_,!1),E=(_&f.childLanes)!==0,Ur||E){if(j=ar,j!==null&&(V=Nf(j,_),V!==0&&V!==D.retryLane))throw D.retryLane=V,ac(f,V),rn(j,f,V),l_;kv(),m=MM(f,m,_)}else f=D.treeContext,ur=Wn(V.nextSibling),ba=m,kt=!0,Bl=null,Fn=!1,f!==null&&vD(m,f),m=wv(m,j),m.flags|=4096;return m}return f=Oi(f.child,{mode:j.mode,children:j.children}),f.ref=m.ref,m.child=f,f.return=m,f}function Sv(f,m){var _=m.ref;if(_===null)f!==null&&f.ref!==null&&(m.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(a(284));(f===null||f.ref!==_)&&(m.flags|=4194816)}}function o_(f,m,_,j,E){return lc(m),_=G1(f,m,_,j,void 0,E),j=U1(),f!==null&&!Ur?(F1(f,m,E),Gi(f,m,E)):(kt&&j&&j1(m),m.flags|=1,Na(f,m,_,E),m.child)}function RM(f,m,_,j,E,D){return lc(m),m.updateQueue=null,_=kD(m,j,_,E),ID(f),j=U1(),f!==null&&!Ur?(F1(f,m,D),Gi(f,m,D)):(kt&&j&&j1(m),m.flags|=1,Na(f,m,_,D),m.child)}function LM(f,m,_,j,E){if(lc(m),m.stateNode===null){var D=id,V=_.contextType;typeof V=="object"&&V!==null&&(D=_a(V)),D=new _(j,D),m.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=s_,m.stateNode=D,D._reactInternals=m,D=m.stateNode,D.props=j,D.state=m.memoizedState,D.refs={},I1(m),V=_.contextType,D.context=typeof V=="object"&&V!==null?_a(V):id,D.state=m.memoizedState,V=_.getDerivedStateFromProps,typeof V=="function"&&(n_(m,_,V,j),D.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(V=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),V!==D.state&&s_.enqueueReplaceState(D,D.state,null),Yf(m,j,D,E),Ff(),D.state=m.memoizedState),typeof D.componentDidMount=="function"&&(m.flags|=4194308),j=!0}else if(f===null){D=m.stateNode;var W=m.memoizedProps,K=fc(_,W);D.props=K;var se=D.context,ve=_.contextType;V=id,typeof ve=="object"&&ve!==null&&(V=_a(ve));var ye=_.getDerivedStateFromProps;ve=typeof ye=="function"||typeof D.getSnapshotBeforeUpdate=="function",W=m.pendingProps!==W,ve||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(W||se!==V)&&yM(m,D,j,V),Gl=!1;var ce=m.memoizedState;D.state=ce,Yf(m,j,D,E),Ff(),se=m.memoizedState,W||ce!==se||Gl?(typeof ye=="function"&&(n_(m,_,ye,j),se=m.memoizedState),(K=Gl||xM(m,_,K,j,ce,se,V))?(ve||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(m.flags|=4194308)):(typeof D.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=j,m.memoizedState=se),D.props=j,D.state=se,D.context=V,j=K):(typeof D.componentDidMount=="function"&&(m.flags|=4194308),j=!1)}else{D=m.stateNode,k1(f,m),V=m.memoizedProps,ve=fc(_,V),D.props=ve,ye=m.pendingProps,ce=D.context,se=_.contextType,K=id,typeof se=="object"&&se!==null&&(K=_a(se)),W=_.getDerivedStateFromProps,(se=typeof W=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(V!==ye||ce!==K)&&yM(m,D,j,K),Gl=!1,ce=m.memoizedState,D.state=ce,Yf(m,j,D,E),Ff();var fe=m.memoizedState;V!==ye||ce!==fe||Gl||f!==null&&f.dependencies!==null&&iv(f.dependencies)?(typeof W=="function"&&(n_(m,_,W,j),fe=m.memoizedState),(ve=Gl||xM(m,_,ve,j,ce,fe,K)||f!==null&&f.dependencies!==null&&iv(f.dependencies))?(se||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(j,fe,K),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(j,fe,K)),typeof D.componentDidUpdate=="function"&&(m.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof D.componentDidUpdate!="function"||V===f.memoizedProps&&ce===f.memoizedState||(m.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===f.memoizedProps&&ce===f.memoizedState||(m.flags|=1024),m.memoizedProps=j,m.memoizedState=fe),D.props=j,D.state=fe,D.context=K,j=ve):(typeof D.componentDidUpdate!="function"||V===f.memoizedProps&&ce===f.memoizedState||(m.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===f.memoizedProps&&ce===f.memoizedState||(m.flags|=1024),j=!1)}return D=j,Sv(f,m),j=(m.flags&128)!==0,D||j?(D=m.stateNode,_=j&&typeof _.getDerivedStateFromError!="function"?null:D.render(),m.flags|=1,f!==null&&j?(m.child=dc(m,f.child,null,E),m.child=dc(m,null,_,E)):Na(f,m,_,E),m.memoizedState=D.state,f=m.child):f=Gi(f,m,E),f}function IM(f,m,_,j){return sc(),m.flags|=256,Na(f,m,_,j),m.child}var c_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function u_(f){return{baseLanes:f,cachePool:jD()}}function d_(f,m,_){return f=f!==null?f.childLanes&~_:0,m&&(f|=Nn),f}function kM(f,m,_){var j=m.pendingProps,E=!1,D=(m.flags&128)!==0,V;if((V=D)||(V=f!==null&&f.memoizedState===null?!1:(Mr.current&2)!==0),V&&(E=!0,m.flags&=-129),V=(m.flags&32)!==0,m.flags&=-33,f===null){if(kt){if(E?Yl(m):Wl(),(f=ur)?(f=U5(f,Fn),f=f!==null&&f.data!=="&"?f:null,f!==null&&(m.memoizedState={dehydrated:f,treeContext:zl!==null?{id:qs,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},_=pD(f),_.return=m,m.child=_,ba=m,ur=null)):f=null,f===null)throw Vl(m);return $_(f)?m.lanes=32:m.lanes=536870912,null}var W=j.children;return j=j.fallback,E?(Wl(),E=m.mode,W=Cv({mode:"hidden",children:W},E),j=nc(j,E,_,null),W.return=m,j.return=m,W.sibling=j,m.child=W,j=m.child,j.memoizedState=u_(_),j.childLanes=d_(f,V,_),m.memoizedState=c_,Zf(null,j)):(Yl(m),h_(m,W))}var K=f.memoizedState;if(K!==null&&(W=K.dehydrated,W!==null)){if(D)m.flags&256?(Yl(m),m.flags&=-257,m=f_(f,m,_)):m.memoizedState!==null?(Wl(),m.child=f.child,m.flags|=128,m=null):(Wl(),W=j.fallback,E=m.mode,j=Cv({mode:"visible",children:j.children},E),W=nc(W,E,_,null),W.flags|=2,j.return=m,W.return=m,j.sibling=W,m.child=j,dc(m,f.child,null,_),j=m.child,j.memoizedState=u_(_),j.childLanes=d_(f,V,_),m.memoizedState=c_,m=Zf(null,j));else if(Yl(m),$_(W)){if(V=W.nextSibling&&W.nextSibling.dataset,V)var se=V.dgst;V=se,j=Error(a(419)),j.stack="",j.digest=V,zf({value:j,source:null,stack:null}),m=f_(f,m,_)}else if(Ur||ud(f,m,_,!1),V=(_&f.childLanes)!==0,Ur||V){if(V=ar,V!==null&&(j=Nf(V,_),j!==0&&j!==K.retryLane))throw K.retryLane=j,ac(f,j),rn(V,f,j),l_;W_(W)||kv(),m=f_(f,m,_)}else W_(W)?(m.flags|=192,m.child=f.child,m=null):(f=K.treeContext,ur=Wn(W.nextSibling),ba=m,kt=!0,Bl=null,Fn=!1,f!==null&&vD(m,f),m=h_(m,j.children),m.flags|=4096);return m}return E?(Wl(),W=j.fallback,E=m.mode,K=f.child,se=K.sibling,j=Oi(K,{mode:"hidden",children:j.children}),j.subtreeFlags=K.subtreeFlags&65011712,se!==null?W=Oi(se,W):(W=nc(W,E,_,null),W.flags|=2),W.return=m,j.return=m,j.sibling=W,m.child=j,Zf(null,j),j=m.child,W=f.child.memoizedState,W===null?W=u_(_):(E=W.cachePool,E!==null?(K=Hr._currentValue,E=E.parent!==K?{parent:K,pool:K}:E):E=jD(),W={baseLanes:W.baseLanes|_,cachePool:E}),j.memoizedState=W,j.childLanes=d_(f,V,_),m.memoizedState=c_,Zf(f.child,j)):(Yl(m),_=f.child,f=_.sibling,_=Oi(_,{mode:"visible",children:j.children}),_.return=m,_.sibling=null,f!==null&&(V=m.deletions,V===null?(m.deletions=[f],m.flags|=16):V.push(f)),m.child=_,m.memoizedState=null,_)}function h_(f,m){return m=Cv({mode:"visible",children:m},f.mode),m.return=f,f.child=m}function Cv(f,m){return f=xn(22,f,null,m),f.lanes=0,f}function f_(f,m,_){return dc(m,f.child,null,_),f=h_(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function OM(f,m,_){f.lanes|=m;var j=f.alternate;j!==null&&(j.lanes|=m),A1(f.return,m,_)}function p_(f,m,_,j,E,D){var V=f.memoizedState;V===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:j,tail:_,tailMode:E,treeForkCount:D}:(V.isBackwards=m,V.rendering=null,V.renderingStartTime=0,V.last=j,V.tail=_,V.tailMode=E,V.treeForkCount=D)}function PM(f,m,_){var j=m.pendingProps,E=j.revealOrder,D=j.tail;j=j.children;var V=Mr.current,W=(V&2)!==0;if(W?(V=V&1|2,m.flags|=128):V&=1,Z(Mr,V),Na(f,m,j,_),j=kt?Pf:0,!W&&f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&OM(f,_,m);else if(f.tag===19)OM(f,_,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(E){case"forwards":for(_=m.child,E=null;_!==null;)f=_.alternate,f!==null&&pv(f)===null&&(E=_),_=_.sibling;_=E,_===null?(E=m.child,m.child=null):(E=_.sibling,_.sibling=null),p_(m,!1,E,_,D,j);break;case"backwards":case"unstable_legacy-backwards":for(_=null,E=m.child,m.child=null;E!==null;){if(f=E.alternate,f!==null&&pv(f)===null){m.child=E;break}f=E.sibling,E.sibling=_,_=E,E=f}p_(m,!0,_,null,D,j);break;case"together":p_(m,!1,null,null,void 0,j);break;default:m.memoizedState=null}return m.child}function Gi(f,m,_){if(f!==null&&(m.dependencies=f.dependencies),Xl|=m.lanes,(_&m.childLanes)===0)if(f!==null){if(ud(f,m,_,!1),(_&m.childLanes)===0)return null}else return null;if(f!==null&&m.child!==f.child)throw Error(a(153));if(m.child!==null){for(f=m.child,_=Oi(f,f.pendingProps),m.child=_,_.return=m;f.sibling!==null;)f=f.sibling,_=_.sibling=Oi(f,f.pendingProps),_.return=m;_.sibling=null}return m.child}function g_(f,m){return(f.lanes&m)!==0?!0:(f=f.dependencies,!!(f!==null&&iv(f)))}function LF(f,m,_){switch(m.tag){case 3:Ee(m,m.stateNode.containerInfo),Hl(m,Hr,f.memoizedState.cache),sc();break;case 27:case 5:He(m);break;case 4:Ee(m,m.stateNode.containerInfo);break;case 10:Hl(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,V1(m),null;break;case 13:var j=m.memoizedState;if(j!==null)return j.dehydrated!==null?(Yl(m),m.flags|=128,null):(_&m.child.childLanes)!==0?kM(f,m,_):(Yl(m),f=Gi(f,m,_),f!==null?f.sibling:null);Yl(m);break;case 19:var E=(f.flags&128)!==0;if(j=(_&m.childLanes)!==0,j||(ud(f,m,_,!1),j=(_&m.childLanes)!==0),E){if(j)return PM(f,m,_);m.flags|=128}if(E=m.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Z(Mr,Mr.current),j)break;return null;case 22:return m.lanes=0,EM(f,m,_,m.pendingProps);case 24:Hl(m,Hr,f.memoizedState.cache)}return Gi(f,m,_)}function zM(f,m,_){if(f!==null)if(f.memoizedProps!==m.pendingProps)Ur=!0;else{if(!g_(f,_)&&(m.flags&128)===0)return Ur=!1,LF(f,m,_);Ur=(f.flags&131072)!==0}else Ur=!1,kt&&(m.flags&1048576)!==0&&mD(m,Pf,m.index);switch(m.lanes=0,m.tag){case 16:e:{var j=m.pendingProps;if(f=cc(m.elementType),m.type=f,typeof f=="function")b1(f)?(j=fc(f,j),m.tag=1,m=LM(null,m,f,j,_)):(m.tag=0,m=o_(null,m,f,j,_));else{if(f!=null){var E=f.$$typeof;if(E===S){m.tag=11,m=CM(null,m,f,j,_);break e}else if(E===C){m.tag=14,m=TM(null,m,f,j,_);break e}}throw m=U(f)||f,Error(a(306,m,""))}}return m;case 0:return o_(f,m,m.type,m.pendingProps,_);case 1:return j=m.type,E=fc(j,m.pendingProps),LM(f,m,j,E,_);case 3:e:{if(Ee(m,m.stateNode.containerInfo),f===null)throw Error(a(387));j=m.pendingProps;var D=m.memoizedState;E=D.element,k1(f,m),Yf(m,j,null,_);var V=m.memoizedState;if(j=V.cache,Hl(m,Hr,j),j!==D.cache&&E1(m,[Hr],_,!0),Ff(),j=V.element,D.isDehydrated)if(D={element:j,isDehydrated:!1,cache:V.cache},m.updateQueue.baseState=D,m.memoizedState=D,m.flags&256){m=IM(f,m,j,_);break e}else if(j!==E){E=Hn(Error(a(424)),m),zf(E),m=IM(f,m,j,_);break e}else{switch(f=m.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(ur=Wn(f.firstChild),ba=m,kt=!0,Bl=null,Fn=!0,_=ED(m,null,j,_),m.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(sc(),j===E){m=Gi(f,m,_);break e}Na(f,m,j,_)}m=m.child}return m;case 26:return Sv(f,m),f===null?(_=X5(m.type,null,m.pendingProps,null))?m.memoizedState=_:kt||(_=m.type,f=m.pendingProps,j=Gv(Ce.current).createElement(_),j[Re]=m,j[qe]=f,ja(j,_,f),ua(j),m.stateNode=j):m.memoizedState=X5(m.type,f.memoizedProps,m.pendingProps,f.memoizedState),null;case 27:return He(m),f===null&&kt&&(j=m.stateNode=W5(m.type,m.pendingProps,Ce.current),ba=m,Fn=!0,E=ur,eo(m.type)?(q_=E,ur=Wn(j.firstChild)):ur=E),Na(f,m,m.pendingProps.children,_),Sv(f,m),f===null&&(m.flags|=4194304),m.child;case 5:return f===null&&kt&&((E=j=ur)&&(j=cY(j,m.type,m.pendingProps,Fn),j!==null?(m.stateNode=j,ba=m,ur=Wn(j.firstChild),Fn=!1,E=!0):E=!1),E||Vl(m)),He(m),E=m.type,D=m.pendingProps,V=f!==null?f.memoizedProps:null,j=D.children,U_(E,D)?j=null:V!==null&&U_(E,V)&&(m.flags|=32),m.memoizedState!==null&&(E=G1(f,m,wF,null,null,_),dp._currentValue=E),Sv(f,m),Na(f,m,j,_),m.child;case 6:return f===null&&kt&&((f=_=ur)&&(_=uY(_,m.pendingProps,Fn),_!==null?(m.stateNode=_,ba=m,ur=null,f=!0):f=!1),f||Vl(m)),null;case 13:return kM(f,m,_);case 4:return Ee(m,m.stateNode.containerInfo),j=m.pendingProps,f===null?m.child=dc(m,null,j,_):Na(f,m,j,_),m.child;case 11:return CM(f,m,m.type,m.pendingProps,_);case 7:return Na(f,m,m.pendingProps,_),m.child;case 8:return Na(f,m,m.pendingProps.children,_),m.child;case 12:return Na(f,m,m.pendingProps.children,_),m.child;case 10:return j=m.pendingProps,Hl(m,m.type,j.value),Na(f,m,j.children,_),m.child;case 9:return E=m.type._context,j=m.pendingProps.children,lc(m),E=_a(E),j=j(E),m.flags|=1,Na(f,m,j,_),m.child;case 14:return TM(f,m,m.type,m.pendingProps,_);case 15:return AM(f,m,m.type,m.pendingProps,_);case 19:return PM(f,m,_);case 31:return RF(f,m,_);case 22:return EM(f,m,_,m.pendingProps);case 24:return lc(m),j=_a(Hr),f===null?(E=R1(),E===null&&(E=ar,D=D1(),E.pooledCache=D,D.refCount++,D!==null&&(E.pooledCacheLanes|=_),E=D),m.memoizedState={parent:j,cache:E},I1(m),Hl(m,Hr,E)):((f.lanes&_)!==0&&(k1(f,m),Yf(m,null,null,_),Ff()),E=f.memoizedState,D=m.memoizedState,E.parent!==j?(E={parent:j,cache:j},m.memoizedState=E,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=E),Hl(m,Hr,j)):(j=D.cache,Hl(m,Hr,j),j!==E.cache&&E1(m,[Hr],_,!0))),Na(f,m,m.pendingProps.children,_),m.child;case 29:throw m.pendingProps}throw Error(a(156,m.tag))}function Ui(f){f.flags|=4}function m_(f,m,_,j,E){if((m=(f.mode&32)!==0)&&(m=!1),m){if(f.flags|=16777216,(E&335544128)===E)if(f.stateNode.complete)f.flags|=8192;else if(d5())f.flags|=8192;else throw uc=uv,L1}else f.flags&=-16777217}function BM(f,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!e4(m))if(d5())f.flags|=8192;else throw uc=uv,L1}function Tv(f,m){m!==null&&(f.flags|=4),f.flags&16384&&(m=f.tag!==22?Ri():536870912,f.lanes|=m,Nd|=m)}function Kf(f,m){if(!kt)switch(f.tailMode){case"hidden":m=f.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?f.tail=null:_.sibling=null;break;case"collapsed":_=f.tail;for(var j=null;_!==null;)_.alternate!==null&&(j=_),_=_.sibling;j===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:j.sibling=null}}function dr(f){var m=f.alternate!==null&&f.alternate.child===f.child,_=0,j=0;if(m)for(var E=f.child;E!==null;)_|=E.lanes|E.childLanes,j|=E.subtreeFlags&65011712,j|=E.flags&65011712,E.return=f,E=E.sibling;else for(E=f.child;E!==null;)_|=E.lanes|E.childLanes,j|=E.subtreeFlags,j|=E.flags,E.return=f,E=E.sibling;return f.subtreeFlags|=j,f.childLanes=_,m}function IF(f,m,_){var j=m.pendingProps;switch(w1(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dr(m),null;case 1:return dr(m),null;case 3:return _=m.stateNode,j=null,f!==null&&(j=f.memoizedState.cache),m.memoizedState.cache!==j&&(m.flags|=2048),Bi(Hr),be(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(f===null||f.child===null)&&(cd(m)?Ui(m):f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,C1())),dr(m),null;case 26:var E=m.type,D=m.memoizedState;return f===null?(Ui(m),D!==null?(dr(m),BM(m,D)):(dr(m),m_(m,E,null,j,_))):D?D!==f.memoizedState?(Ui(m),dr(m),BM(m,D)):(dr(m),m.flags&=-16777217):(f=f.memoizedProps,f!==j&&Ui(m),dr(m),m_(m,E,f,j,_)),null;case 27:if(Se(m),_=Ce.current,E=m.type,f!==null&&m.stateNode!=null)f.memoizedProps!==j&&Ui(m);else{if(!j){if(m.stateNode===null)throw Error(a(166));return dr(m),null}f=te.current,cd(m)?xD(m):(f=W5(E,j,_),m.stateNode=f,Ui(m))}return dr(m),null;case 5:if(Se(m),E=m.type,f!==null&&m.stateNode!=null)f.memoizedProps!==j&&Ui(m);else{if(!j){if(m.stateNode===null)throw Error(a(166));return dr(m),null}if(D=te.current,cd(m))xD(m);else{var V=Gv(Ce.current);switch(D){case 1:D=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:D=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":D=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":D=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":D=V.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof j.is=="string"?V.createElement("select",{is:j.is}):V.createElement("select"),j.multiple?D.multiple=!0:j.size&&(D.size=j.size);break;default:D=typeof j.is=="string"?V.createElement(E,{is:j.is}):V.createElement(E)}}D[Re]=m,D[qe]=j;e:for(V=m.child;V!==null;){if(V.tag===5||V.tag===6)D.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===m)break e;for(;V.sibling===null;){if(V.return===null||V.return===m)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}m.stateNode=D;e:switch(ja(D,E,j),E){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&Ui(m)}}return dr(m),m_(m,m.type,f===null?null:f.memoizedProps,m.pendingProps,_),null;case 6:if(f&&m.stateNode!=null)f.memoizedProps!==j&&Ui(m);else{if(typeof j!="string"&&m.stateNode===null)throw Error(a(166));if(f=Ce.current,cd(m)){if(f=m.stateNode,_=m.memoizedProps,j=null,E=ba,E!==null)switch(E.tag){case 27:case 5:j=E.memoizedProps}f[Re]=m,f=!!(f.nodeValue===_||j!==null&&j.suppressHydrationWarning===!0||k5(f.nodeValue,_)),f||Vl(m,!0)}else f=Gv(f).createTextNode(j),f[Re]=m,m.stateNode=f}return dr(m),null;case 31:if(_=m.memoizedState,f===null||f.memoizedState!==null){if(j=cd(m),_!==null){if(f===null){if(!j)throw Error(a(318));if(f=m.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(557));f[Re]=m}else sc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;dr(m),f=!1}else _=C1(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=_),f=!0;if(!f)return m.flags&256?(bn(m),m):(bn(m),null);if((m.flags&128)!==0)throw Error(a(558))}return dr(m),null;case 13:if(j=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(E=cd(m),j!==null&&j.dehydrated!==null){if(f===null){if(!E)throw Error(a(318));if(E=m.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[Re]=m}else sc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;dr(m),E=!1}else E=C1(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=E),E=!0;if(!E)return m.flags&256?(bn(m),m):(bn(m),null)}return bn(m),(m.flags&128)!==0?(m.lanes=_,m):(_=j!==null,f=f!==null&&f.memoizedState!==null,_&&(j=m.child,E=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(E=j.alternate.memoizedState.cachePool.pool),D=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(D=j.memoizedState.cachePool.pool),D!==E&&(j.flags|=2048)),_!==f&&_&&(m.child.flags|=8192),Tv(m,m.updateQueue),dr(m),null);case 4:return be(),f===null&&z_(m.stateNode.containerInfo),dr(m),null;case 10:return Bi(m.type),dr(m),null;case 19:if($(Mr),j=m.memoizedState,j===null)return dr(m),null;if(E=(m.flags&128)!==0,D=j.rendering,D===null)if(E)Kf(j,!1);else{if(_r!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(D=pv(f),D!==null){for(m.flags|=128,Kf(j,!1),f=D.updateQueue,m.updateQueue=f,Tv(m,f),m.subtreeFlags=0,f=_,_=m.child;_!==null;)fD(_,f),_=_.sibling;return Z(Mr,Mr.current&1|2),kt&&Pi(m,j.treeForkCount),m.child}f=f.sibling}j.tail!==null&&oa()>Rv&&(m.flags|=128,E=!0,Kf(j,!1),m.lanes=4194304)}else{if(!E)if(f=pv(D),f!==null){if(m.flags|=128,E=!0,f=f.updateQueue,m.updateQueue=f,Tv(m,f),Kf(j,!0),j.tail===null&&j.tailMode==="hidden"&&!D.alternate&&!kt)return dr(m),null}else 2*oa()-j.renderingStartTime>Rv&&_!==536870912&&(m.flags|=128,E=!0,Kf(j,!1),m.lanes=4194304);j.isBackwards?(D.sibling=m.child,m.child=D):(f=j.last,f!==null?f.sibling=D:m.child=D,j.last=D)}return j.tail!==null?(f=j.tail,j.rendering=f,j.tail=f.sibling,j.renderingStartTime=oa(),f.sibling=null,_=Mr.current,Z(Mr,E?_&1|2:_&1),kt&&Pi(m,j.treeForkCount),f):(dr(m),null);case 22:case 23:return bn(m),B1(),j=m.memoizedState!==null,f!==null?f.memoizedState!==null!==j&&(m.flags|=8192):j&&(m.flags|=8192),j?(_&536870912)!==0&&(m.flags&128)===0&&(dr(m),m.subtreeFlags&6&&(m.flags|=8192)):dr(m),_=m.updateQueue,_!==null&&Tv(m,_.retryQueue),_=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),j=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(j=m.memoizedState.cachePool.pool),j!==_&&(m.flags|=2048),f!==null&&$(oc),null;case 24:return _=null,f!==null&&(_=f.memoizedState.cache),m.memoizedState.cache!==_&&(m.flags|=2048),Bi(Hr),dr(m),null;case 25:return null;case 30:return null}throw Error(a(156,m.tag))}function kF(f,m){switch(w1(m),m.tag){case 1:return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return Bi(Hr),be(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 26:case 27:case 5:return Se(m),null;case 31:if(m.memoizedState!==null){if(bn(m),m.alternate===null)throw Error(a(340));sc()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 13:if(bn(m),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(a(340));sc()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return $(Mr),null;case 4:return be(),null;case 10:return Bi(m.type),null;case 22:case 23:return bn(m),B1(),f!==null&&$(oc),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 24:return Bi(Hr),null;case 25:return null;default:return null}}function VM(f,m){switch(w1(m),m.tag){case 3:Bi(Hr),be();break;case 26:case 27:case 5:Se(m);break;case 4:be();break;case 31:m.memoizedState!==null&&bn(m);break;case 13:bn(m);break;case 19:$(Mr);break;case 10:Bi(m.type);break;case 22:case 23:bn(m),B1(),f!==null&&$(oc);break;case 24:Bi(Hr)}}function Qf(f,m){try{var _=m.updateQueue,j=_!==null?_.lastEffect:null;if(j!==null){var E=j.next;_=E;do{if((_.tag&f)===f){j=void 0;var D=_.create,V=_.inst;j=D(),V.destroy=j}_=_.next}while(_!==E)}}catch(W){Xt(m,m.return,W)}}function $l(f,m,_){try{var j=m.updateQueue,E=j!==null?j.lastEffect:null;if(E!==null){var D=E.next;j=D;do{if((j.tag&f)===f){var V=j.inst,W=V.destroy;if(W!==void 0){V.destroy=void 0,E=m;var K=_,se=W;try{se()}catch(ve){Xt(E,K,ve)}}}j=j.next}while(j!==D)}}catch(ve){Xt(m,m.return,ve)}}function HM(f){var m=f.updateQueue;if(m!==null){var _=f.stateNode;try{MD(m,_)}catch(j){Xt(f,f.return,j)}}}function GM(f,m,_){_.props=fc(f.type,f.memoizedProps),_.state=f.memoizedState;try{_.componentWillUnmount()}catch(j){Xt(f,m,j)}}function Jf(f,m){try{var _=f.ref;if(_!==null){switch(f.tag){case 26:case 27:case 5:var j=f.stateNode;break;case 30:j=f.stateNode;break;default:j=f.stateNode}typeof _=="function"?f.refCleanup=_(j):_.current=j}}catch(E){Xt(f,m,E)}}function Zs(f,m){var _=f.ref,j=f.refCleanup;if(_!==null)if(typeof j=="function")try{j()}catch(E){Xt(f,m,E)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(E){Xt(f,m,E)}else _.current=null}function UM(f){var m=f.type,_=f.memoizedProps,j=f.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":_.autoFocus&&j.focus();break e;case"img":_.src?j.src=_.src:_.srcSet&&(j.srcset=_.srcSet)}}catch(E){Xt(f,f.return,E)}}function v_(f,m,_){try{var j=f.stateNode;aY(j,f.type,_,m),j[qe]=m}catch(E){Xt(f,f.return,E)}}function FM(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&eo(f.type)||f.tag===4}function x_(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||FM(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&eo(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function y_(f,m,_){var j=f.tag;if(j===5||j===6)f=f.stateNode,m?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(f,m):(m=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,m.appendChild(f),_=_._reactRootContainer,_!=null||m.onclick!==null||(m.onclick=Ii));else if(j!==4&&(j===27&&eo(f.type)&&(_=f.stateNode,m=null),f=f.child,f!==null))for(y_(f,m,_),f=f.sibling;f!==null;)y_(f,m,_),f=f.sibling}function Av(f,m,_){var j=f.tag;if(j===5||j===6)f=f.stateNode,m?_.insertBefore(f,m):_.appendChild(f);else if(j!==4&&(j===27&&eo(f.type)&&(_=f.stateNode),f=f.child,f!==null))for(Av(f,m,_),f=f.sibling;f!==null;)Av(f,m,_),f=f.sibling}function YM(f){var m=f.stateNode,_=f.memoizedProps;try{for(var j=f.type,E=m.attributes;E.length;)m.removeAttributeNode(E[0]);ja(m,j,_),m[Re]=f,m[qe]=_}catch(D){Xt(f,f.return,D)}}var Fi=!1,Fr=!1,b_=!1,WM=typeof WeakSet=="function"?WeakSet:Set,da=null;function OF(f,m){if(f=f.containerInfo,H_=Xv,f=nD(f),f1(f)){if("selectionStart"in f)var _={start:f.selectionStart,end:f.selectionEnd};else e:{_=(_=f.ownerDocument)&&_.defaultView||window;var j=_.getSelection&&_.getSelection();if(j&&j.rangeCount!==0){_=j.anchorNode;var E=j.anchorOffset,D=j.focusNode;j=j.focusOffset;try{_.nodeType,D.nodeType}catch{_=null;break e}var V=0,W=-1,K=-1,se=0,ve=0,ye=f,ce=null;t:for(;;){for(var fe;ye!==_||E!==0&&ye.nodeType!==3||(W=V+E),ye!==D||j!==0&&ye.nodeType!==3||(K=V+j),ye.nodeType===3&&(V+=ye.nodeValue.length),(fe=ye.firstChild)!==null;)ce=ye,ye=fe;for(;;){if(ye===f)break t;if(ce===_&&++se===E&&(W=V),ce===D&&++ve===j&&(K=V),(fe=ye.nextSibling)!==null)break;ye=ce,ce=ye.parentNode}ye=fe}_=W===-1||K===-1?null:{start:W,end:K}}else _=null}_=_||{start:0,end:0}}else _=null;for(G_={focusedElem:f,selectionRange:_},Xv=!1,da=m;da!==null;)if(m=da,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,da=f;else for(;da!==null;){switch(m=da,D=m.alternate,f=m.flags,m.tag){case 0:if((f&4)!==0&&(f=m.updateQueue,f=f!==null?f.events:null,f!==null))for(_=0;_<f.length;_++)E=f[_],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&D!==null){f=void 0,_=m,E=D.memoizedProps,D=D.memoizedState,j=_.stateNode;try{var Ze=fc(_.type,E);f=j.getSnapshotBeforeUpdate(Ze,D),j.__reactInternalSnapshotBeforeUpdate=f}catch(lt){Xt(_,_.return,lt)}}break;case 3:if((f&1024)!==0){if(f=m.stateNode.containerInfo,_=f.nodeType,_===9)Y_(f);else if(_===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":Y_(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(a(163))}if(f=m.sibling,f!==null){f.return=m.return,da=f;break}da=m.return}}function $M(f,m,_){var j=_.flags;switch(_.tag){case 0:case 11:case 15:Wi(f,_),j&4&&Qf(5,_);break;case 1:if(Wi(f,_),j&4)if(f=_.stateNode,m===null)try{f.componentDidMount()}catch(V){Xt(_,_.return,V)}else{var E=fc(_.type,m.memoizedProps);m=m.memoizedState;try{f.componentDidUpdate(E,m,f.__reactInternalSnapshotBeforeUpdate)}catch(V){Xt(_,_.return,V)}}j&64&&HM(_),j&512&&Jf(_,_.return);break;case 3:if(Wi(f,_),j&64&&(f=_.updateQueue,f!==null)){if(m=null,_.child!==null)switch(_.child.tag){case 27:case 5:m=_.child.stateNode;break;case 1:m=_.child.stateNode}try{MD(f,m)}catch(V){Xt(_,_.return,V)}}break;case 27:m===null&&j&4&&YM(_);case 26:case 5:Wi(f,_),m===null&&j&4&&UM(_),j&512&&Jf(_,_.return);break;case 12:Wi(f,_);break;case 31:Wi(f,_),j&4&&ZM(f,_);break;case 13:Wi(f,_),j&4&&KM(f,_),j&64&&(f=_.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(_=YF.bind(null,_),dY(f,_))));break;case 22:if(j=_.memoizedState!==null||Fi,!j){m=m!==null&&m.memoizedState!==null||Fr,E=Fi;var D=Fr;Fi=j,(Fr=m)&&!D?$i(f,_,(_.subtreeFlags&8772)!==0):Wi(f,_),Fi=E,Fr=D}break;case 30:break;default:Wi(f,_)}}function qM(f){var m=f.alternate;m!==null&&(f.alternate=null,qM(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&Zb(m)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var hr=null,Qa=!1;function Yi(f,m,_){for(_=_.child;_!==null;)XM(f,m,_),_=_.sibling}function XM(f,m,_){if(xa&&typeof xa.onCommitFiberUnmount=="function")try{xa.onCommitFiberUnmount($s,_)}catch{}switch(_.tag){case 26:Fr||Zs(_,m),Yi(f,m,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:Fr||Zs(_,m);var j=hr,E=Qa;eo(_.type)&&(hr=_.stateNode,Qa=!1),Yi(f,m,_),op(_.stateNode),hr=j,Qa=E;break;case 5:Fr||Zs(_,m);case 6:if(j=hr,E=Qa,hr=null,Yi(f,m,_),hr=j,Qa=E,hr!==null)if(Qa)try{(hr.nodeType===9?hr.body:hr.nodeName==="HTML"?hr.ownerDocument.body:hr).removeChild(_.stateNode)}catch(D){Xt(_,m,D)}else try{hr.removeChild(_.stateNode)}catch(D){Xt(_,m,D)}break;case 18:hr!==null&&(Qa?(f=hr,H5(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,_.stateNode),Dd(f)):H5(hr,_.stateNode));break;case 4:j=hr,E=Qa,hr=_.stateNode.containerInfo,Qa=!0,Yi(f,m,_),hr=j,Qa=E;break;case 0:case 11:case 14:case 15:$l(2,_,m),Fr||$l(4,_,m),Yi(f,m,_);break;case 1:Fr||(Zs(_,m),j=_.stateNode,typeof j.componentWillUnmount=="function"&&GM(_,m,j)),Yi(f,m,_);break;case 21:Yi(f,m,_);break;case 22:Fr=(j=Fr)||_.memoizedState!==null,Yi(f,m,_),Fr=j;break;default:Yi(f,m,_)}}function ZM(f,m){if(m.memoizedState===null&&(f=m.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{Dd(f)}catch(_){Xt(m,m.return,_)}}}function KM(f,m){if(m.memoizedState===null&&(f=m.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{Dd(f)}catch(_){Xt(m,m.return,_)}}function PF(f){switch(f.tag){case 31:case 13:case 19:var m=f.stateNode;return m===null&&(m=f.stateNode=new WM),m;case 22:return f=f.stateNode,m=f._retryCache,m===null&&(m=f._retryCache=new WM),m;default:throw Error(a(435,f.tag))}}function Ev(f,m){var _=PF(f);m.forEach(function(j){if(!_.has(j)){_.add(j);var E=WF.bind(null,f,j);j.then(E,E)}})}function Ja(f,m){var _=m.deletions;if(_!==null)for(var j=0;j<_.length;j++){var E=_[j],D=f,V=m,W=V;e:for(;W!==null;){switch(W.tag){case 27:if(eo(W.type)){hr=W.stateNode,Qa=!1;break e}break;case 5:hr=W.stateNode,Qa=!1;break e;case 3:case 4:hr=W.stateNode.containerInfo,Qa=!0;break e}W=W.return}if(hr===null)throw Error(a(160));XM(D,V,E),hr=null,Qa=!1,D=E.alternate,D!==null&&(D.return=null),E.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)QM(m,f),m=m.sibling}var _s=null;function QM(f,m){var _=f.alternate,j=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Ja(m,f),en(f),j&4&&($l(3,f,f.return),Qf(3,f),$l(5,f,f.return));break;case 1:Ja(m,f),en(f),j&512&&(Fr||_===null||Zs(_,_.return)),j&64&&Fi&&(f=f.updateQueue,f!==null&&(j=f.callbacks,j!==null&&(_=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=_===null?j:_.concat(j))));break;case 26:var E=_s;if(Ja(m,f),en(f),j&512&&(Fr||_===null||Zs(_,_.return)),j&4){var D=_!==null?_.memoizedState:null;if(j=f.memoizedState,_===null)if(j===null)if(f.stateNode===null){e:{j=f.type,_=f.memoizedProps,E=E.ownerDocument||E;t:switch(j){case"title":D=E.getElementsByTagName("title")[0],(!D||D[Cf]||D[Re]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=E.createElement(j),E.head.insertBefore(D,E.querySelector("head > title"))),ja(D,j,_),D[Re]=f,ua(D),j=D;break e;case"link":var V=Q5("link","href",E).get(j+(_.href||""));if(V){for(var W=0;W<V.length;W++)if(D=V[W],D.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&D.getAttribute("rel")===(_.rel==null?null:_.rel)&&D.getAttribute("title")===(_.title==null?null:_.title)&&D.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){V.splice(W,1);break t}}D=E.createElement(j),ja(D,j,_),E.head.appendChild(D);break;case"meta":if(V=Q5("meta","content",E).get(j+(_.content||""))){for(W=0;W<V.length;W++)if(D=V[W],D.getAttribute("content")===(_.content==null?null:""+_.content)&&D.getAttribute("name")===(_.name==null?null:_.name)&&D.getAttribute("property")===(_.property==null?null:_.property)&&D.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&D.getAttribute("charset")===(_.charSet==null?null:_.charSet)){V.splice(W,1);break t}}D=E.createElement(j),ja(D,j,_),E.head.appendChild(D);break;default:throw Error(a(468,j))}D[Re]=f,ua(D),j=D}f.stateNode=j}else J5(E,f.type,f.stateNode);else f.stateNode=K5(E,j,f.memoizedProps);else D!==j?(D===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):D.count--,j===null?J5(E,f.type,f.stateNode):K5(E,j,f.memoizedProps)):j===null&&f.stateNode!==null&&v_(f,f.memoizedProps,_.memoizedProps)}break;case 27:Ja(m,f),en(f),j&512&&(Fr||_===null||Zs(_,_.return)),_!==null&&j&4&&v_(f,f.memoizedProps,_.memoizedProps);break;case 5:if(Ja(m,f),en(f),j&512&&(Fr||_===null||Zs(_,_.return)),f.flags&32){E=f.stateNode;try{Ju(E,"")}catch(Ze){Xt(f,f.return,Ze)}}j&4&&f.stateNode!=null&&(E=f.memoizedProps,v_(f,E,_!==null?_.memoizedProps:E)),j&1024&&(b_=!0);break;case 6:if(Ja(m,f),en(f),j&4){if(f.stateNode===null)throw Error(a(162));j=f.memoizedProps,_=f.stateNode;try{_.nodeValue=j}catch(Ze){Xt(f,f.return,Ze)}}break;case 3:if(Yv=null,E=_s,_s=Uv(m.containerInfo),Ja(m,f),_s=E,en(f),j&4&&_!==null&&_.memoizedState.isDehydrated)try{Dd(m.containerInfo)}catch(Ze){Xt(f,f.return,Ze)}b_&&(b_=!1,JM(f));break;case 4:j=_s,_s=Uv(f.stateNode.containerInfo),Ja(m,f),en(f),_s=j;break;case 12:Ja(m,f),en(f);break;case 31:Ja(m,f),en(f),j&4&&(j=f.updateQueue,j!==null&&(f.updateQueue=null,Ev(f,j)));break;case 13:Ja(m,f),en(f),f.child.flags&8192&&f.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Mv=oa()),j&4&&(j=f.updateQueue,j!==null&&(f.updateQueue=null,Ev(f,j)));break;case 22:E=f.memoizedState!==null;var K=_!==null&&_.memoizedState!==null,se=Fi,ve=Fr;if(Fi=se||E,Fr=ve||K,Ja(m,f),Fr=ve,Fi=se,en(f),j&8192)e:for(m=f.stateNode,m._visibility=E?m._visibility&-2:m._visibility|1,E&&(_===null||K||Fi||Fr||pc(f)),_=null,m=f;;){if(m.tag===5||m.tag===26){if(_===null){K=_=m;try{if(D=K.stateNode,E)V=D.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{W=K.stateNode;var ye=K.memoizedProps.style,ce=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;W.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Ze){Xt(K,K.return,Ze)}}}else if(m.tag===6){if(_===null){K=m;try{K.stateNode.nodeValue=E?"":K.memoizedProps}catch(Ze){Xt(K,K.return,Ze)}}}else if(m.tag===18){if(_===null){K=m;try{var fe=K.stateNode;E?G5(fe,!0):G5(K.stateNode,!1)}catch(Ze){Xt(K,K.return,Ze)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===f)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break e;for(;m.sibling===null;){if(m.return===null||m.return===f)break e;_===m&&(_=null),m=m.return}_===m&&(_=null),m.sibling.return=m.return,m=m.sibling}j&4&&(j=f.updateQueue,j!==null&&(_=j.retryQueue,_!==null&&(j.retryQueue=null,Ev(f,_))));break;case 19:Ja(m,f),en(f),j&4&&(j=f.updateQueue,j!==null&&(f.updateQueue=null,Ev(f,j)));break;case 30:break;case 21:break;default:Ja(m,f),en(f)}}function en(f){var m=f.flags;if(m&2){try{for(var _,j=f.return;j!==null;){if(FM(j)){_=j;break}j=j.return}if(_==null)throw Error(a(160));switch(_.tag){case 27:var E=_.stateNode,D=x_(f);Av(f,D,E);break;case 5:var V=_.stateNode;_.flags&32&&(Ju(V,""),_.flags&=-33);var W=x_(f);Av(f,W,V);break;case 3:case 4:var K=_.stateNode.containerInfo,se=x_(f);y_(f,se,K);break;default:throw Error(a(161))}}catch(ve){Xt(f,f.return,ve)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function JM(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var m=f;JM(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),f=f.sibling}}function Wi(f,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)$M(f,m.alternate,m),m=m.sibling}function pc(f){for(f=f.child;f!==null;){var m=f;switch(m.tag){case 0:case 11:case 14:case 15:$l(4,m,m.return),pc(m);break;case 1:Zs(m,m.return);var _=m.stateNode;typeof _.componentWillUnmount=="function"&&GM(m,m.return,_),pc(m);break;case 27:op(m.stateNode);case 26:case 5:Zs(m,m.return),pc(m);break;case 22:m.memoizedState===null&&pc(m);break;case 30:pc(m);break;default:pc(m)}f=f.sibling}}function $i(f,m,_){for(_=_&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var j=m.alternate,E=f,D=m,V=D.flags;switch(D.tag){case 0:case 11:case 15:$i(E,D,_),Qf(4,D);break;case 1:if($i(E,D,_),j=D,E=j.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(se){Xt(j,j.return,se)}if(j=D,E=j.updateQueue,E!==null){var W=j.stateNode;try{var K=E.shared.hiddenCallbacks;if(K!==null)for(E.shared.hiddenCallbacks=null,E=0;E<K.length;E++)DD(K[E],W)}catch(se){Xt(j,j.return,se)}}_&&V&64&&HM(D),Jf(D,D.return);break;case 27:YM(D);case 26:case 5:$i(E,D,_),_&&j===null&&V&4&&UM(D),Jf(D,D.return);break;case 12:$i(E,D,_);break;case 31:$i(E,D,_),_&&V&4&&ZM(E,D);break;case 13:$i(E,D,_),_&&V&4&&KM(E,D);break;case 22:D.memoizedState===null&&$i(E,D,_),Jf(D,D.return);break;case 30:break;default:$i(E,D,_)}m=m.sibling}}function __(f,m){var _=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),f=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(f=m.memoizedState.cachePool.pool),f!==_&&(f!=null&&f.refCount++,_!=null&&Bf(_))}function N_(f,m){f=null,m.alternate!==null&&(f=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==f&&(m.refCount++,f!=null&&Bf(f))}function Ns(f,m,_,j){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)e5(f,m,_,j),m=m.sibling}function e5(f,m,_,j){var E=m.flags;switch(m.tag){case 0:case 11:case 15:Ns(f,m,_,j),E&2048&&Qf(9,m);break;case 1:Ns(f,m,_,j);break;case 3:Ns(f,m,_,j),E&2048&&(f=null,m.alternate!==null&&(f=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==f&&(m.refCount++,f!=null&&Bf(f)));break;case 12:if(E&2048){Ns(f,m,_,j),f=m.stateNode;try{var D=m.memoizedProps,V=D.id,W=D.onPostCommit;typeof W=="function"&&W(V,m.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(K){Xt(m,m.return,K)}}else Ns(f,m,_,j);break;case 31:Ns(f,m,_,j);break;case 13:Ns(f,m,_,j);break;case 23:break;case 22:D=m.stateNode,V=m.alternate,m.memoizedState!==null?D._visibility&2?Ns(f,m,_,j):ep(f,m):D._visibility&2?Ns(f,m,_,j):(D._visibility|=2,yd(f,m,_,j,(m.subtreeFlags&10256)!==0||!1)),E&2048&&__(V,m);break;case 24:Ns(f,m,_,j),E&2048&&N_(m.alternate,m);break;default:Ns(f,m,_,j)}}function yd(f,m,_,j,E){for(E=E&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var D=f,V=m,W=_,K=j,se=V.flags;switch(V.tag){case 0:case 11:case 15:yd(D,V,W,K,E),Qf(8,V);break;case 23:break;case 22:var ve=V.stateNode;V.memoizedState!==null?ve._visibility&2?yd(D,V,W,K,E):ep(D,V):(ve._visibility|=2,yd(D,V,W,K,E)),E&&se&2048&&__(V.alternate,V);break;case 24:yd(D,V,W,K,E),E&&se&2048&&N_(V.alternate,V);break;default:yd(D,V,W,K,E)}m=m.sibling}}function ep(f,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var _=f,j=m,E=j.flags;switch(j.tag){case 22:ep(_,j),E&2048&&__(j.alternate,j);break;case 24:ep(_,j),E&2048&&N_(j.alternate,j);break;default:ep(_,j)}m=m.sibling}}var tp=8192;function bd(f,m,_){if(f.subtreeFlags&tp)for(f=f.child;f!==null;)t5(f,m,_),f=f.sibling}function t5(f,m,_){switch(f.tag){case 26:bd(f,m,_),f.flags&tp&&f.memoizedState!==null&&jY(_,_s,f.memoizedState,f.memoizedProps);break;case 5:bd(f,m,_);break;case 3:case 4:var j=_s;_s=Uv(f.stateNode.containerInfo),bd(f,m,_),_s=j;break;case 22:f.memoizedState===null&&(j=f.alternate,j!==null&&j.memoizedState!==null?(j=tp,tp=16777216,bd(f,m,_),tp=j):bd(f,m,_));break;default:bd(f,m,_)}}function r5(f){var m=f.alternate;if(m!==null&&(f=m.child,f!==null)){m.child=null;do m=f.sibling,f.sibling=null,f=m;while(f!==null)}}function rp(f){var m=f.deletions;if((f.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var j=m[_];da=j,n5(j,f)}r5(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)a5(f),f=f.sibling}function a5(f){switch(f.tag){case 0:case 11:case 15:rp(f),f.flags&2048&&$l(9,f,f.return);break;case 3:rp(f);break;case 12:rp(f);break;case 22:var m=f.stateNode;f.memoizedState!==null&&m._visibility&2&&(f.return===null||f.return.tag!==13)?(m._visibility&=-3,Dv(f)):rp(f);break;default:rp(f)}}function Dv(f){var m=f.deletions;if((f.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var j=m[_];da=j,n5(j,f)}r5(f)}for(f=f.child;f!==null;){switch(m=f,m.tag){case 0:case 11:case 15:$l(8,m,m.return),Dv(m);break;case 22:_=m.stateNode,_._visibility&2&&(_._visibility&=-3,Dv(m));break;default:Dv(m)}f=f.sibling}}function n5(f,m){for(;da!==null;){var _=da;switch(_.tag){case 0:case 11:case 15:$l(8,_,m);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var j=_.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:Bf(_.memoizedState.cache)}if(j=_.child,j!==null)j.return=_,da=j;else e:for(_=f;da!==null;){j=da;var E=j.sibling,D=j.return;if(qM(j),j===_){da=null;break e}if(E!==null){E.return=D,da=E;break e}da=D}}}var zF={getCacheForType:function(f){var m=_a(Hr),_=m.data.get(f);return _===void 0&&(_=f(),m.data.set(f,_)),_},cacheSignal:function(){return _a(Hr).controller.signal}},BF=typeof WeakMap=="function"?WeakMap:Map,Ht=0,ar=null,Dt=null,Lt=0,qt=0,_n=null,ql=!1,_d=!1,j_=!1,qi=0,_r=0,Xl=0,gc=0,w_=0,Nn=0,Nd=0,ap=null,tn=null,S_=!1,Mv=0,s5=0,Rv=1/0,Lv=null,Zl=null,ea=0,Kl=null,jd=null,Xi=0,C_=0,T_=null,i5=null,np=0,A_=null;function jn(){return(Ht&2)!==0&&Lt!==0?Lt&-Lt:P.T!==null?I_():Um()}function l5(){if(Nn===0)if((Lt&536870912)===0||kt){var f=oe;oe<<=1,(oe&3932160)===0&&(oe=262144),Nn=f}else Nn=536870912;return f=yn.current,f!==null&&(f.flags|=32),Nn}function rn(f,m,_){(f===ar&&(qt===2||qt===9)||f.cancelPendingCommit!==null)&&(wd(f,0),Ql(f,Lt,Nn,!1)),Dr(f,_),((Ht&2)===0||f!==ar)&&(f===ar&&((Ht&2)===0&&(gc|=_),_r===4&&Ql(f,Lt,Nn,!1)),Ks(f))}function o5(f,m,_){if((Ht&6)!==0)throw Error(a(327));var j=!_&&(m&127)===0&&(m&f.expiredLanes)===0||Ga(f,m),E=j?GF(f,m):D_(f,m,!0),D=j;do{if(E===0){_d&&!j&&Ql(f,m,0,!1);break}else{if(_=f.current.alternate,D&&!VF(_)){E=D_(f,m,!1),D=!1;continue}if(E===2){if(D=m,f.errorRecoveryDisabledLanes&D)var V=0;else V=f.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){m=V;e:{var W=f;E=ap;var K=W.current.memoizedState.isDehydrated;if(K&&(wd(W,V).flags|=256),V=D_(W,V,!1),V!==2){if(j_&&!K){W.errorRecoveryDisabledLanes|=D,gc|=D,E=4;break e}D=tn,tn=E,D!==null&&(tn===null?tn=D:tn.push.apply(tn,D))}E=V}if(D=!1,E!==2)continue}}if(E===1){wd(f,0),Ql(f,m,0,!0);break}e:{switch(j=f,D=E,D){case 0:case 1:throw Error(a(345));case 4:if((m&4194048)!==m)break;case 6:Ql(j,m,Nn,!ql);break e;case 2:tn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((m&62914560)===m&&(E=Mv+300-oa(),10<E)){if(Ql(j,m,Nn,!ql),xs(j,0,!0)!==0)break e;Xi=m,j.timeoutHandle=B5(c5.bind(null,j,_,tn,Lv,S_,m,Nn,gc,Nd,ql,D,"Throttled",-0,0),E);break e}c5(j,_,tn,Lv,S_,m,Nn,gc,Nd,ql,D,null,-0,0)}}break}while(!0);Ks(f)}function c5(f,m,_,j,E,D,V,W,K,se,ve,ye,ce,fe){if(f.timeoutHandle=-1,ye=m.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},t5(m,D,ye);var Ze=(D&62914560)===D?Mv-oa():(D&4194048)===D?s5-oa():0;if(Ze=wY(ye,Ze),Ze!==null){Xi=D,f.cancelPendingCommit=Ze(v5.bind(null,f,m,D,_,j,E,V,W,K,ve,ye,null,ce,fe)),Ql(f,D,V,!se);return}}v5(f,m,D,_,j,E,V,W,K)}function VF(f){for(var m=f;;){var _=m.tag;if((_===0||_===11||_===15)&&m.flags&16384&&(_=m.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var j=0;j<_.length;j++){var E=_[j],D=E.getSnapshot;E=E.value;try{if(!vn(D(),E))return!1}catch{return!1}}if(_=m.child,m.subtreeFlags&16384&&_!==null)_.return=m,m=_;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Ql(f,m,_,j){m&=~w_,m&=~gc,f.suspendedLanes|=m,f.pingedLanes&=~m,j&&(f.warmLanes|=m),j=f.expirationTimes;for(var E=m;0<E;){var D=31-ca(E),V=1<<D;j[D]=-1,E&=~V}_!==0&&bf(f,_,m)}function Iv(){return(Ht&6)===0?(sp(0),!1):!0}function E_(){if(Dt!==null){if(qt===0)var f=Dt.return;else f=Dt,zi=ic=null,Y1(f),pd=null,Hf=0,f=Dt;for(;f!==null;)VM(f.alternate,f),f=f.return;Dt=null}}function wd(f,m){var _=f.timeoutHandle;_!==-1&&(f.timeoutHandle=-1,iY(_)),_=f.cancelPendingCommit,_!==null&&(f.cancelPendingCommit=null,_()),Xi=0,E_(),ar=f,Dt=_=Oi(f.current,null),Lt=m,qt=0,_n=null,ql=!1,_d=Ga(f,m),j_=!1,Nd=Nn=w_=gc=Xl=_r=0,tn=ap=null,S_=!1,(m&8)!==0&&(m|=m&32);var j=f.entangledLanes;if(j!==0)for(f=f.entanglements,j&=m;0<j;){var E=31-ca(j),D=1<<E;m|=f[E],j&=~D}return qi=m,tv(),_}function u5(f,m){yt=null,P.H=Xf,m===fd||m===cv?(m=CD(),qt=3):m===L1?(m=CD(),qt=4):qt=m===l_?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,_n=m,Dt===null&&(_r=1,jv(f,Hn(m,f.current)))}function d5(){var f=yn.current;return f===null?!0:(Lt&4194048)===Lt?Yn===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?f===Yn:!1}function h5(){var f=P.H;return P.H=Xf,f===null?Xf:f}function f5(){var f=P.A;return P.A=zF,f}function kv(){_r=4,ql||(Lt&4194048)!==Lt&&yn.current!==null||(_d=!0),(Xl&134217727)===0&&(gc&134217727)===0||ar===null||Ql(ar,Lt,Nn,!1)}function D_(f,m,_){var j=Ht;Ht|=2;var E=h5(),D=f5();(ar!==f||Lt!==m)&&(Lv=null,wd(f,m)),m=!1;var V=_r;e:do try{if(qt!==0&&Dt!==null){var W=Dt,K=_n;switch(qt){case 8:E_(),V=6;break e;case 3:case 2:case 9:case 6:yn.current===null&&(m=!0);var se=qt;if(qt=0,_n=null,Sd(f,W,K,se),_&&_d){V=0;break e}break;default:se=qt,qt=0,_n=null,Sd(f,W,K,se)}}HF(),V=_r;break}catch(ve){u5(f,ve)}while(!0);return m&&f.shellSuspendCounter++,zi=ic=null,Ht=j,P.H=E,P.A=D,Dt===null&&(ar=null,Lt=0,tv()),V}function HF(){for(;Dt!==null;)p5(Dt)}function GF(f,m){var _=Ht;Ht|=2;var j=h5(),E=f5();ar!==f||Lt!==m?(Lv=null,Rv=oa()+500,wd(f,m)):_d=Ga(f,m);e:do try{if(qt!==0&&Dt!==null){m=Dt;var D=_n;t:switch(qt){case 1:qt=0,_n=null,Sd(f,m,D,1);break;case 2:case 9:if(wD(D)){qt=0,_n=null,g5(m);break}m=function(){qt!==2&&qt!==9||ar!==f||(qt=7),Ks(f)},D.then(m,m);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:wD(D)?(qt=0,_n=null,g5(m)):(qt=0,_n=null,Sd(f,m,D,7));break;case 5:var V=null;switch(Dt.tag){case 26:V=Dt.memoizedState;case 5:case 27:var W=Dt;if(V?e4(V):W.stateNode.complete){qt=0,_n=null;var K=W.sibling;if(K!==null)Dt=K;else{var se=W.return;se!==null?(Dt=se,Ov(se)):Dt=null}break t}}qt=0,_n=null,Sd(f,m,D,5);break;case 6:qt=0,_n=null,Sd(f,m,D,6);break;case 8:E_(),_r=6;break e;default:throw Error(a(462))}}UF();break}catch(ve){u5(f,ve)}while(!0);return zi=ic=null,P.H=j,P.A=E,Ht=_,Dt!==null?0:(ar=null,Lt=0,tv(),_r)}function UF(){for(;Dt!==null&&!gn();)p5(Dt)}function p5(f){var m=zM(f.alternate,f,qi);f.memoizedProps=f.pendingProps,m===null?Ov(f):Dt=m}function g5(f){var m=f,_=m.alternate;switch(m.tag){case 15:case 0:m=RM(_,m,m.pendingProps,m.type,void 0,Lt);break;case 11:m=RM(_,m,m.pendingProps,m.type.render,m.ref,Lt);break;case 5:Y1(m);default:VM(_,m),m=Dt=fD(m,qi),m=zM(_,m,qi)}f.memoizedProps=f.pendingProps,m===null?Ov(f):Dt=m}function Sd(f,m,_,j){zi=ic=null,Y1(m),pd=null,Hf=0;var E=m.return;try{if(MF(f,E,m,_,Lt)){_r=1,jv(f,Hn(_,f.current)),Dt=null;return}}catch(D){if(E!==null)throw Dt=E,D;_r=1,jv(f,Hn(_,f.current)),Dt=null;return}m.flags&32768?(kt||j===1?f=!0:_d||(Lt&536870912)!==0?f=!1:(ql=f=!0,(j===2||j===9||j===3||j===6)&&(j=yn.current,j!==null&&j.tag===13&&(j.flags|=16384))),m5(m,f)):Ov(m)}function Ov(f){var m=f;do{if((m.flags&32768)!==0){m5(m,ql);return}f=m.return;var _=IF(m.alternate,m,qi);if(_!==null){Dt=_;return}if(m=m.sibling,m!==null){Dt=m;return}Dt=m=f}while(m!==null);_r===0&&(_r=5)}function m5(f,m){do{var _=kF(f.alternate,f);if(_!==null){_.flags&=32767,Dt=_;return}if(_=f.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!m&&(f=f.sibling,f!==null)){Dt=f;return}Dt=f=_}while(f!==null);_r=6,Dt=null}function v5(f,m,_,j,E,D,V,W,K){f.cancelPendingCommit=null;do Pv();while(ea!==0);if((Ht&6)!==0)throw Error(a(327));if(m!==null){if(m===f.current)throw Error(a(177));if(D=m.lanes|m.childLanes,D|=x1,$u(f,_,D,V,W,K),f===ar&&(Dt=ar=null,Lt=0),jd=m,Kl=f,Xi=_,C_=D,T_=E,i5=j,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,$F(Mi,function(){return N5(),null})):(f.callbackNode=null,f.callbackPriority=0),j=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||j){j=P.T,P.T=null,E=F.p,F.p=2,V=Ht,Ht|=4;try{OF(f,m,_)}finally{Ht=V,F.p=E,P.T=j}}ea=1,x5(),y5(),b5()}}function x5(){if(ea===1){ea=0;var f=Kl,m=jd,_=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||_){_=P.T,P.T=null;var j=F.p;F.p=2;var E=Ht;Ht|=4;try{QM(m,f);var D=G_,V=nD(f.containerInfo),W=D.focusedElem,K=D.selectionRange;if(V!==W&&W&&W.ownerDocument&&aD(W.ownerDocument.documentElement,W)){if(K!==null&&f1(W)){var se=K.start,ve=K.end;if(ve===void 0&&(ve=se),"selectionStart"in W)W.selectionStart=se,W.selectionEnd=Math.min(ve,W.value.length);else{var ye=W.ownerDocument||document,ce=ye&&ye.defaultView||window;if(ce.getSelection){var fe=ce.getSelection(),Ze=W.textContent.length,lt=Math.min(K.start,Ze),er=K.end===void 0?lt:Math.min(K.end,Ze);!fe.extend&&lt>er&&(V=er,er=lt,lt=V);var ae=rD(W,lt),J=rD(W,er);if(ae&&J&&(fe.rangeCount!==1||fe.anchorNode!==ae.node||fe.anchorOffset!==ae.offset||fe.focusNode!==J.node||fe.focusOffset!==J.offset)){var ne=ye.createRange();ne.setStart(ae.node,ae.offset),fe.removeAllRanges(),lt>er?(fe.addRange(ne),fe.extend(J.node,J.offset)):(ne.setEnd(J.node,J.offset),fe.addRange(ne))}}}}for(ye=[],fe=W;fe=fe.parentNode;)fe.nodeType===1&&ye.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<ye.length;W++){var xe=ye[W];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Xv=!!H_,G_=H_=null}finally{Ht=E,F.p=j,P.T=_}}f.current=m,ea=2}}function y5(){if(ea===2){ea=0;var f=Kl,m=jd,_=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||_){_=P.T,P.T=null;var j=F.p;F.p=2;var E=Ht;Ht|=4;try{$M(f,m.alternate,m)}finally{Ht=E,F.p=j,P.T=_}}ea=3}}function b5(){if(ea===4||ea===3){ea=0,Il();var f=Kl,m=jd,_=Xi,j=i5;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?ea=5:(ea=0,jd=Kl=null,_5(f,f.pendingLanes));var E=f.pendingLanes;if(E===0&&(Zl=null),wf(_),m=m.stateNode,xa&&typeof xa.onCommitFiberRoot=="function")try{xa.onCommitFiberRoot($s,m,void 0,(m.current.flags&128)===128)}catch{}if(j!==null){m=P.T,E=F.p,F.p=2,P.T=null;try{for(var D=f.onRecoverableError,V=0;V<j.length;V++){var W=j[V];D(W.value,{componentStack:W.stack})}}finally{P.T=m,F.p=E}}(Xi&3)!==0&&Pv(),Ks(f),E=f.pendingLanes,(_&261930)!==0&&(E&42)!==0?f===A_?np++:(np=0,A_=f):np=0,sp(0)}}function _5(f,m){(f.pooledCacheLanes&=m)===0&&(m=f.pooledCache,m!=null&&(f.pooledCache=null,Bf(m)))}function Pv(){return x5(),y5(),b5(),N5()}function N5(){if(ea!==5)return!1;var f=Kl,m=C_;C_=0;var _=wf(Xi),j=P.T,E=F.p;try{F.p=32>_?32:_,P.T=null,_=T_,T_=null;var D=Kl,V=Xi;if(ea=0,jd=Kl=null,Xi=0,(Ht&6)!==0)throw Error(a(331));var W=Ht;if(Ht|=4,a5(D.current),e5(D,D.current,V,_),Ht=W,sp(0,!1),xa&&typeof xa.onPostCommitFiberRoot=="function")try{xa.onPostCommitFiberRoot($s,D)}catch{}return!0}finally{F.p=E,P.T=j,_5(f,m)}}function j5(f,m,_){m=Hn(_,m),m=i_(f.stateNode,m,2),f=Fl(f,m,2),f!==null&&(Dr(f,2),Ks(f))}function Xt(f,m,_){if(f.tag===3)j5(f,f,_);else for(;m!==null;){if(m.tag===3){j5(m,f,_);break}else if(m.tag===1){var j=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Zl===null||!Zl.has(j))){f=Hn(_,f),_=wM(2),j=Fl(m,_,2),j!==null&&(SM(_,j,m,f),Dr(j,2),Ks(j));break}}m=m.return}}function M_(f,m,_){var j=f.pingCache;if(j===null){j=f.pingCache=new BF;var E=new Set;j.set(m,E)}else E=j.get(m),E===void 0&&(E=new Set,j.set(m,E));E.has(_)||(j_=!0,E.add(_),f=FF.bind(null,f,m,_),m.then(f,f))}function FF(f,m,_){var j=f.pingCache;j!==null&&j.delete(m),f.pingedLanes|=f.suspendedLanes&_,f.warmLanes&=~_,ar===f&&(Lt&_)===_&&(_r===4||_r===3&&(Lt&62914560)===Lt&&300>oa()-Mv?(Ht&2)===0&&wd(f,0):w_|=_,Nd===Lt&&(Nd=0)),Ks(f)}function w5(f,m){m===0&&(m=Ri()),f=ac(f,m),f!==null&&(Dr(f,m),Ks(f))}function YF(f){var m=f.memoizedState,_=0;m!==null&&(_=m.retryLane),w5(f,_)}function WF(f,m){var _=0;switch(f.tag){case 31:case 13:var j=f.stateNode,E=f.memoizedState;E!==null&&(_=E.retryLane);break;case 19:j=f.stateNode;break;case 22:j=f.stateNode._retryCache;break;default:throw Error(a(314))}j!==null&&j.delete(m),w5(f,_)}function $F(f,m){return Qr(f,m)}var zv=null,Cd=null,R_=!1,Bv=!1,L_=!1,Jl=0;function Ks(f){f!==Cd&&f.next===null&&(Cd===null?zv=Cd=f:Cd=Cd.next=f),Bv=!0,R_||(R_=!0,XF())}function sp(f,m){if(!L_&&Bv){L_=!0;do for(var _=!1,j=zv;j!==null;){if(f!==0){var E=j.pendingLanes;if(E===0)var D=0;else{var V=j.suspendedLanes,W=j.pingedLanes;D=(1<<31-ca(42|f)+1)-1,D&=E&~(V&~W),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(_=!0,A5(j,D))}else D=Lt,D=xs(j,j===ar?D:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(D&3)===0||Ga(j,D)||(_=!0,A5(j,D));j=j.next}while(_);L_=!1}}function qF(){S5()}function S5(){Bv=R_=!1;var f=0;Jl!==0&&sY()&&(f=Jl);for(var m=oa(),_=null,j=zv;j!==null;){var E=j.next,D=C5(j,m);D===0?(j.next=null,_===null?zv=E:_.next=E,E===null&&(Cd=_)):(_=j,(f!==0||(D&3)!==0)&&(Bv=!0)),j=E}ea!==0&&ea!==5||sp(f),Jl!==0&&(Jl=0)}function C5(f,m){for(var _=f.suspendedLanes,j=f.pingedLanes,E=f.expirationTimes,D=f.pendingLanes&-62914561;0<D;){var V=31-ca(D),W=1<<V,K=E[V];K===-1?((W&_)===0||(W&j)!==0)&&(E[V]=ys(W,m)):K<=m&&(f.expiredLanes|=W),D&=~W}if(m=ar,_=Lt,_=xs(f,f===m?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),j=f.callbackNode,_===0||f===m&&(qt===2||qt===9)||f.cancelPendingCommit!==null)return j!==null&&j!==null&&Vr(j),f.callbackNode=null,f.callbackPriority=0;if((_&3)===0||Ga(f,_)){if(m=_&-_,m===f.callbackPriority)return m;switch(j!==null&&Vr(j),wf(_)){case 2:case 8:_=kl;break;case 32:_=Mi;break;case 268435456:_=Qo;break;default:_=Mi}return j=T5.bind(null,f),_=Qr(_,j),f.callbackPriority=m,f.callbackNode=_,m}return j!==null&&j!==null&&Vr(j),f.callbackPriority=2,f.callbackNode=null,2}function T5(f,m){if(ea!==0&&ea!==5)return f.callbackNode=null,f.callbackPriority=0,null;var _=f.callbackNode;if(Pv()&&f.callbackNode!==_)return null;var j=Lt;return j=xs(f,f===ar?j:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),j===0?null:(o5(f,j,m),C5(f,oa()),f.callbackNode!=null&&f.callbackNode===_?T5.bind(null,f):null)}function A5(f,m){if(Pv())return null;o5(f,m,!0)}function XF(){lY(function(){(Ht&6)!==0?Qr(Zo,qF):S5()})}function I_(){if(Jl===0){var f=dd;f===0&&(f=Ol,Ol<<=1,(Ol&261888)===0&&(Ol=256)),Jl=f}return Jl}function E5(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:$m(""+f)}function D5(f,m){var _=m.ownerDocument.createElement("input");return _.name=m.name,_.value=m.value,f.id&&_.setAttribute("form",f.id),m.parentNode.insertBefore(_,m),f=new FormData(f),_.parentNode.removeChild(_),f}function ZF(f,m,_,j,E){if(m==="submit"&&_&&_.stateNode===E){var D=E5((E[qe]||null).action),V=j.submitter;V&&(m=(m=V[qe]||null)?E5(m.formAction):V.getAttribute("formAction"),m!==null&&(D=m,V=null));var W=new Km("action","action",null,j,E);f.push({event:W,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(Jl!==0){var K=V?D5(E,V):new FormData(E);e_(_,{pending:!0,data:K,method:E.method,action:D},null,K)}}else typeof D=="function"&&(W.preventDefault(),K=V?D5(E,V):new FormData(E),e_(_,{pending:!0,data:K,method:E.method,action:D},D,K))},currentTarget:E}]})}}for(var k_=0;k_<v1.length;k_++){var O_=v1[k_],KF=O_.toLowerCase(),QF=O_[0].toUpperCase()+O_.slice(1);bs(KF,"on"+QF)}bs(lD,"onAnimationEnd"),bs(oD,"onAnimationIteration"),bs(cD,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(pF,"onTransitionRun"),bs(gF,"onTransitionStart"),bs(mF,"onTransitionCancel"),bs(uD,"onTransitionEnd"),Ku("onMouseEnter",["mouseout","mouseover"]),Ku("onMouseLeave",["mouseout","mouseover"]),Ku("onPointerEnter",["pointerout","pointerover"]),Ku("onPointerLeave",["pointerout","pointerover"]),Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ip="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ip));function M5(f,m){m=(m&4)!==0;for(var _=0;_<f.length;_++){var j=f[_],E=j.event;j=j.listeners;e:{var D=void 0;if(m)for(var V=j.length-1;0<=V;V--){var W=j[V],K=W.instance,se=W.currentTarget;if(W=W.listener,K!==D&&E.isPropagationStopped())break e;D=W,E.currentTarget=se;try{D(E)}catch(ve){ev(ve)}E.currentTarget=null,D=K}else for(V=0;V<j.length;V++){if(W=j[V],K=W.instance,se=W.currentTarget,W=W.listener,K!==D&&E.isPropagationStopped())break e;D=W,E.currentTarget=se;try{D(E)}catch(ve){ev(ve)}E.currentTarget=null,D=K}}}}function Mt(f,m){var _=m[ya];_===void 0&&(_=m[ya]=new Set);var j=f+"__bubble";_.has(j)||(R5(m,f,2,!1),_.add(j))}function P_(f,m,_){var j=0;m&&(j|=4),R5(_,f,j,m)}var Vv="_reactListening"+Math.random().toString(36).slice(2);function z_(f){if(!f[Vv]){f[Vv]=!0,SE.forEach(function(_){_!=="selectionchange"&&(JF.has(_)||P_(_,!1,f),P_(_,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[Vv]||(m[Vv]=!0,P_("selectionchange",!1,m))}}function R5(f,m,_,j){switch(l4(m)){case 2:var E=TY;break;case 8:E=AY;break;default:E=J_}_=E.bind(null,m,_,f),E=void 0,!n1||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(E=!0),j?E!==void 0?f.addEventListener(m,_,{capture:!0,passive:E}):f.addEventListener(m,_,!0):E!==void 0?f.addEventListener(m,_,{passive:E}):f.addEventListener(m,_,!1)}function B_(f,m,_,j,E){var D=j;if((m&1)===0&&(m&2)===0&&j!==null)e:for(;;){if(j===null)return;var V=j.tag;if(V===3||V===4){var W=j.stateNode.containerInfo;if(W===E)break;if(V===4)for(V=j.return;V!==null;){var K=V.tag;if((K===3||K===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;W!==null;){if(V=qu(W),V===null)return;if(K=V.tag,K===5||K===6||K===26||K===27){j=D=V;continue e}W=W.parentNode}}j=j.return}PE(function(){var se=D,ve=r1(_),ye=[];e:{var ce=dD.get(f);if(ce!==void 0){var fe=Km,Ze=f;switch(f){case"keypress":if(Xm(_)===0)break e;case"keydown":case"keyup":fe=WU;break;case"focusin":Ze="focus",fe=o1;break;case"focusout":Ze="blur",fe=o1;break;case"beforeblur":case"afterblur":fe=o1;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=VE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=IU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=XU;break;case lD:case oD:case cD:fe=PU;break;case uD:fe=KU;break;case"scroll":case"scrollend":fe=RU;break;case"wheel":fe=JU;break;case"copy":case"cut":case"paste":fe=BU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=GE;break;case"toggle":case"beforetoggle":fe=tF}var lt=(m&4)!==0,er=!lt&&(f==="scroll"||f==="scrollend"),ae=lt?ce!==null?ce+"Capture":null:ce;lt=[];for(var J=se,ne;J!==null;){var xe=J;if(ne=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ne===null||ae===null||(xe=Af(J,ae),xe!=null&&lt.push(lp(J,xe,ne))),er)break;J=J.return}0<lt.length&&(ce=new fe(ce,Ze,null,_,ve),ye.push({event:ce,listeners:lt}))}}if((m&7)===0){e:{if(ce=f==="mouseover"||f==="pointerover",fe=f==="mouseout"||f==="pointerout",ce&&_!==t1&&(Ze=_.relatedTarget||_.fromElement)&&(qu(Ze)||Ze[cr]))break e;if((fe||ce)&&(ce=ve.window===ve?ve:(ce=ve.ownerDocument)?ce.defaultView||ce.parentWindow:window,fe?(Ze=_.relatedTarget||_.toElement,fe=se,Ze=Ze?qu(Ze):null,Ze!==null&&(er=s(Ze),lt=Ze.tag,Ze!==er||lt!==5&&lt!==27&&lt!==6)&&(Ze=null)):(fe=null,Ze=se),fe!==Ze)){if(lt=VE,xe="onMouseLeave",ae="onMouseEnter",J="mouse",(f==="pointerout"||f==="pointerover")&&(lt=GE,xe="onPointerLeave",ae="onPointerEnter",J="pointer"),er=fe==null?ce:Tf(fe),ne=Ze==null?ce:Tf(Ze),ce=new lt(xe,J+"leave",fe,_,ve),ce.target=er,ce.relatedTarget=ne,xe=null,qu(ve)===se&&(lt=new lt(ae,J+"enter",Ze,_,ve),lt.target=ne,lt.relatedTarget=er,xe=lt),er=xe,fe&&Ze)t:{for(lt=eY,ae=fe,J=Ze,ne=0,xe=ae;xe;xe=lt(xe))ne++;xe=0;for(var at=J;at;at=lt(at))xe++;for(;0<ne-xe;)ae=lt(ae),ne--;for(;0<xe-ne;)J=lt(J),xe--;for(;ne--;){if(ae===J||J!==null&&ae===J.alternate){lt=ae;break t}ae=lt(ae),J=lt(J)}lt=null}else lt=null;fe!==null&&L5(ye,ce,fe,lt,!1),Ze!==null&&er!==null&&L5(ye,er,Ze,lt,!0)}}e:{if(ce=se?Tf(se):window,fe=ce.nodeName&&ce.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ce.type==="file")var Bt=ZE;else if(qE(ce))if(KE)Bt=dF;else{Bt=cF;var Qe=oF}else fe=ce.nodeName,!fe||fe.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?se&&e1(se.elementType)&&(Bt=ZE):Bt=uF;if(Bt&&(Bt=Bt(f,se))){XE(ye,Bt,_,ve);break e}Qe&&Qe(f,ce,se),f==="focusout"&&se&&ce.type==="number"&&se.memoizedProps.value!=null&&Jb(ce,"number",ce.value)}switch(Qe=se?Tf(se):window,f){case"focusin":(qE(Qe)||Qe.contentEditable==="true")&&(ad=Qe,p1=se,Of=null);break;case"focusout":Of=p1=ad=null;break;case"mousedown":g1=!0;break;case"contextmenu":case"mouseup":case"dragend":g1=!1,sD(ye,_,ve);break;case"selectionchange":if(fF)break;case"keydown":case"keyup":sD(ye,_,ve)}var jt;if(u1)e:{switch(f){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else rd?WE(f,_)&&(It="onCompositionEnd"):f==="keydown"&&_.keyCode===229&&(It="onCompositionStart");It&&(UE&&_.locale!=="ko"&&(rd||It!=="onCompositionStart"?It==="onCompositionEnd"&&rd&&(jt=zE()):(Pl=ve,s1="value"in Pl?Pl.value:Pl.textContent,rd=!0)),Qe=Hv(se,It),0<Qe.length&&(It=new HE(It,f,null,_,ve),ye.push({event:It,listeners:Qe}),jt?It.data=jt:(jt=$E(_),jt!==null&&(It.data=jt)))),(jt=aF?nF(f,_):sF(f,_))&&(It=Hv(se,"onBeforeInput"),0<It.length&&(Qe=new HE("onBeforeInput","beforeinput",null,_,ve),ye.push({event:Qe,listeners:It}),Qe.data=jt)),ZF(ye,f,se,_,ve)}M5(ye,m)})}function lp(f,m,_){return{instance:f,listener:m,currentTarget:_}}function Hv(f,m){for(var _=m+"Capture",j=[];f!==null;){var E=f,D=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||D===null||(E=Af(f,_),E!=null&&j.unshift(lp(f,E,D)),E=Af(f,m),E!=null&&j.push(lp(f,E,D))),f.tag===3)return j;f=f.return}return[]}function eY(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function L5(f,m,_,j,E){for(var D=m._reactName,V=[];_!==null&&_!==j;){var W=_,K=W.alternate,se=W.stateNode;if(W=W.tag,K!==null&&K===j)break;W!==5&&W!==26&&W!==27||se===null||(K=se,E?(se=Af(_,D),se!=null&&V.unshift(lp(_,se,K))):E||(se=Af(_,D),se!=null&&V.push(lp(_,se,K)))),_=_.return}V.length!==0&&f.push({event:m,listeners:V})}var tY=/\r\n?/g,rY=/\u0000|\uFFFD/g;function I5(f){return(typeof f=="string"?f:""+f).replace(tY,`
`).replace(rY,"")}function k5(f,m){return m=I5(m),I5(f)===m}function Jt(f,m,_,j,E,D){switch(_){case"children":typeof j=="string"?m==="body"||m==="textarea"&&j===""||Ju(f,j):(typeof j=="number"||typeof j=="bigint")&&m!=="body"&&Ju(f,""+j);break;case"className":Ym(f,"class",j);break;case"tabIndex":Ym(f,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":Ym(f,_,j);break;case"style":kE(f,j,D);break;case"data":if(m!=="object"){Ym(f,"data",j);break}case"src":case"href":if(j===""&&(m!=="a"||_!=="href")){f.removeAttribute(_);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){f.removeAttribute(_);break}j=$m(""+j),f.setAttribute(_,j);break;case"action":case"formAction":if(typeof j=="function"){f.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(_==="formAction"?(m!=="input"&&Jt(f,m,"name",E.name,E,null),Jt(f,m,"formEncType",E.formEncType,E,null),Jt(f,m,"formMethod",E.formMethod,E,null),Jt(f,m,"formTarget",E.formTarget,E,null)):(Jt(f,m,"encType",E.encType,E,null),Jt(f,m,"method",E.method,E,null),Jt(f,m,"target",E.target,E,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){f.removeAttribute(_);break}j=$m(""+j),f.setAttribute(_,j);break;case"onClick":j!=null&&(f.onclick=Ii);break;case"onScroll":j!=null&&Mt("scroll",f);break;case"onScrollEnd":j!=null&&Mt("scrollend",f);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(a(61));if(_=j.__html,_!=null){if(E.children!=null)throw Error(a(60));f.innerHTML=_}}break;case"multiple":f.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":f.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){f.removeAttribute("xlink:href");break}_=$m(""+j),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?f.setAttribute(_,""+j):f.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?f.setAttribute(_,""):f.removeAttribute(_);break;case"capture":case"download":j===!0?f.setAttribute(_,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?f.setAttribute(_,j):f.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?f.setAttribute(_,j):f.removeAttribute(_);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?f.removeAttribute(_):f.setAttribute(_,j);break;case"popover":Mt("beforetoggle",f),Mt("toggle",f),Fm(f,"popover",j);break;case"xlinkActuate":Li(f,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":Li(f,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":Li(f,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":Li(f,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":Li(f,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":Li(f,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":Li(f,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":Li(f,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":Li(f,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":Fm(f,"is",j);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=DU.get(_)||_,Fm(f,_,j))}}function V_(f,m,_,j,E,D){switch(_){case"style":kE(f,j,D);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(a(61));if(_=j.__html,_!=null){if(E.children!=null)throw Error(a(60));f.innerHTML=_}}break;case"children":typeof j=="string"?Ju(f,j):(typeof j=="number"||typeof j=="bigint")&&Ju(f,""+j);break;case"onScroll":j!=null&&Mt("scroll",f);break;case"onScrollEnd":j!=null&&Mt("scrollend",f);break;case"onClick":j!=null&&(f.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!CE.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(E=_.endsWith("Capture"),m=_.slice(2,E?_.length-7:void 0),D=f[qe]||null,D=D!=null?D[_]:null,typeof D=="function"&&f.removeEventListener(m,D,E),typeof j=="function")){typeof D!="function"&&D!==null&&(_ in f?f[_]=null:f.hasAttribute(_)&&f.removeAttribute(_)),f.addEventListener(m,j,E);break e}_ in f?f[_]=j:j===!0?f.setAttribute(_,""):Fm(f,_,j)}}}function ja(f,m,_){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",f),Mt("load",f);var j=!1,E=!1,D;for(D in _)if(_.hasOwnProperty(D)){var V=_[D];if(V!=null)switch(D){case"src":j=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,m));default:Jt(f,m,D,V,_,null)}}E&&Jt(f,m,"srcSet",_.srcSet,_,null),j&&Jt(f,m,"src",_.src,_,null);return;case"input":Mt("invalid",f);var W=D=V=E=null,K=null,se=null;for(j in _)if(_.hasOwnProperty(j)){var ve=_[j];if(ve!=null)switch(j){case"name":E=ve;break;case"type":V=ve;break;case"checked":K=ve;break;case"defaultChecked":se=ve;break;case"value":D=ve;break;case"defaultValue":W=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(a(137,m));break;default:Jt(f,m,j,ve,_,null)}}ME(f,D,W,K,se,V,E,!1);return;case"select":Mt("invalid",f),j=V=D=null;for(E in _)if(_.hasOwnProperty(E)&&(W=_[E],W!=null))switch(E){case"value":D=W;break;case"defaultValue":V=W;break;case"multiple":j=W;default:Jt(f,m,E,W,_,null)}m=D,_=V,f.multiple=!!j,m!=null?Qu(f,!!j,m,!1):_!=null&&Qu(f,!!j,_,!0);return;case"textarea":Mt("invalid",f),D=E=j=null;for(V in _)if(_.hasOwnProperty(V)&&(W=_[V],W!=null))switch(V){case"value":j=W;break;case"defaultValue":E=W;break;case"children":D=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(91));break;default:Jt(f,m,V,W,_,null)}LE(f,j,E,D);return;case"option":for(K in _)if(_.hasOwnProperty(K)&&(j=_[K],j!=null))switch(K){case"selected":f.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Jt(f,m,K,j,_,null)}return;case"dialog":Mt("beforetoggle",f),Mt("toggle",f),Mt("cancel",f),Mt("close",f);break;case"iframe":case"object":Mt("load",f);break;case"video":case"audio":for(j=0;j<ip.length;j++)Mt(ip[j],f);break;case"image":Mt("error",f),Mt("load",f);break;case"details":Mt("toggle",f);break;case"embed":case"source":case"link":Mt("error",f),Mt("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in _)if(_.hasOwnProperty(se)&&(j=_[se],j!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,m));default:Jt(f,m,se,j,_,null)}return;default:if(e1(m)){for(ve in _)_.hasOwnProperty(ve)&&(j=_[ve],j!==void 0&&V_(f,m,ve,j,_,void 0));return}}for(W in _)_.hasOwnProperty(W)&&(j=_[W],j!=null&&Jt(f,m,W,j,_,null))}function aY(f,m,_,j){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,D=null,V=null,W=null,K=null,se=null,ve=null;for(fe in _){var ye=_[fe];if(_.hasOwnProperty(fe)&&ye!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":K=ye;default:j.hasOwnProperty(fe)||Jt(f,m,fe,null,j,ye)}}for(var ce in j){var fe=j[ce];if(ye=_[ce],j.hasOwnProperty(ce)&&(fe!=null||ye!=null))switch(ce){case"type":D=fe;break;case"name":E=fe;break;case"checked":se=fe;break;case"defaultChecked":ve=fe;break;case"value":V=fe;break;case"defaultValue":W=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(a(137,m));break;default:fe!==ye&&Jt(f,m,ce,fe,j,ye)}}Qb(f,V,W,K,se,ve,D,E);return;case"select":fe=V=W=ce=null;for(D in _)if(K=_[D],_.hasOwnProperty(D)&&K!=null)switch(D){case"value":break;case"multiple":fe=K;default:j.hasOwnProperty(D)||Jt(f,m,D,null,j,K)}for(E in j)if(D=j[E],K=_[E],j.hasOwnProperty(E)&&(D!=null||K!=null))switch(E){case"value":ce=D;break;case"defaultValue":W=D;break;case"multiple":V=D;default:D!==K&&Jt(f,m,E,D,j,K)}m=W,_=V,j=fe,ce!=null?Qu(f,!!_,ce,!1):!!j!=!!_&&(m!=null?Qu(f,!!_,m,!0):Qu(f,!!_,_?[]:"",!1));return;case"textarea":fe=ce=null;for(W in _)if(E=_[W],_.hasOwnProperty(W)&&E!=null&&!j.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Jt(f,m,W,null,j,E)}for(V in j)if(E=j[V],D=_[V],j.hasOwnProperty(V)&&(E!=null||D!=null))switch(V){case"value":ce=E;break;case"defaultValue":fe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==D&&Jt(f,m,V,E,j,D)}RE(f,ce,fe);return;case"option":for(var Ze in _)if(ce=_[Ze],_.hasOwnProperty(Ze)&&ce!=null&&!j.hasOwnProperty(Ze))switch(Ze){case"selected":f.selected=!1;break;default:Jt(f,m,Ze,null,j,ce)}for(K in j)if(ce=j[K],fe=_[K],j.hasOwnProperty(K)&&ce!==fe&&(ce!=null||fe!=null))switch(K){case"selected":f.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Jt(f,m,K,ce,j,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in _)ce=_[lt],_.hasOwnProperty(lt)&&ce!=null&&!j.hasOwnProperty(lt)&&Jt(f,m,lt,null,j,ce);for(se in j)if(ce=j[se],fe=_[se],j.hasOwnProperty(se)&&ce!==fe&&(ce!=null||fe!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(137,m));break;default:Jt(f,m,se,ce,j,fe)}return;default:if(e1(m)){for(var er in _)ce=_[er],_.hasOwnProperty(er)&&ce!==void 0&&!j.hasOwnProperty(er)&&V_(f,m,er,void 0,j,ce);for(ve in j)ce=j[ve],fe=_[ve],!j.hasOwnProperty(ve)||ce===fe||ce===void 0&&fe===void 0||V_(f,m,ve,ce,j,fe);return}}for(var ae in _)ce=_[ae],_.hasOwnProperty(ae)&&ce!=null&&!j.hasOwnProperty(ae)&&Jt(f,m,ae,null,j,ce);for(ye in j)ce=j[ye],fe=_[ye],!j.hasOwnProperty(ye)||ce===fe||ce==null&&fe==null||Jt(f,m,ye,ce,j,fe)}function O5(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nY(){if(typeof performance.getEntriesByType=="function"){for(var f=0,m=0,_=performance.getEntriesByType("resource"),j=0;j<_.length;j++){var E=_[j],D=E.transferSize,V=E.initiatorType,W=E.duration;if(D&&W&&O5(V)){for(V=0,W=E.responseEnd,j+=1;j<_.length;j++){var K=_[j],se=K.startTime;if(se>W)break;var ve=K.transferSize,ye=K.initiatorType;ve&&O5(ye)&&(K=K.responseEnd,V+=ve*(K<W?1:(W-se)/(K-se)))}if(--j,m+=8*(D+V)/(E.duration/1e3),f++,10<f)break}}if(0<f)return m/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var H_=null,G_=null;function Gv(f){return f.nodeType===9?f:f.ownerDocument}function P5(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z5(f,m){if(f===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&m==="foreignObject"?0:f}function U_(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var F_=null;function sY(){var f=window.event;return f&&f.type==="popstate"?f===F_?!1:(F_=f,!0):(F_=null,!1)}var B5=typeof setTimeout=="function"?setTimeout:void 0,iY=typeof clearTimeout=="function"?clearTimeout:void 0,V5=typeof Promise=="function"?Promise:void 0,lY=typeof queueMicrotask=="function"?queueMicrotask:typeof V5<"u"?function(f){return V5.resolve(null).then(f).catch(oY)}:B5;function oY(f){setTimeout(function(){throw f})}function eo(f){return f==="head"}function H5(f,m){var _=m,j=0;do{var E=_.nextSibling;if(f.removeChild(_),E&&E.nodeType===8)if(_=E.data,_==="/$"||_==="/&"){if(j===0){f.removeChild(E),Dd(m);return}j--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")j++;else if(_==="html")op(f.ownerDocument.documentElement);else if(_==="head"){_=f.ownerDocument.head,op(_);for(var D=_.firstChild;D;){var V=D.nextSibling,W=D.nodeName;D[Cf]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||_.removeChild(D),D=V}}else _==="body"&&op(f.ownerDocument.body);_=E}while(_);Dd(m)}function G5(f,m){var _=f;f=0;do{var j=_.nextSibling;if(_.nodeType===1?m?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(m?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),j&&j.nodeType===8)if(_=j.data,_==="/$"){if(f===0)break;f--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||f++;_=j}while(_)}function Y_(f){var m=f.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var _=m;switch(m=m.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":Y_(_),Zb(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}f.removeChild(_)}}function cY(f,m,_,j){for(;f.nodeType===1;){var E=_;if(f.nodeName.toLowerCase()!==m.toLowerCase()){if(!j&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(j){if(!f[Cf])switch(m){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(D=f.getAttribute("rel"),D==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(D!==E.rel||f.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||f.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||f.getAttribute("title")!==(E.title==null?null:E.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(D=f.getAttribute("src"),(D!==(E.src==null?null:E.src)||f.getAttribute("type")!==(E.type==null?null:E.type)||f.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&D&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(m==="input"&&f.type==="hidden"){var D=E.name==null?null:""+E.name;if(E.type==="hidden"&&f.getAttribute("name")===D)return f}else return f;if(f=Wn(f.nextSibling),f===null)break}return null}function uY(f,m,_){if(m==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!_||(f=Wn(f.nextSibling),f===null))return null;return f}function U5(f,m){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!m||(f=Wn(f.nextSibling),f===null))return null;return f}function W_(f){return f.data==="$?"||f.data==="$~"}function $_(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function dY(f,m){var _=f.ownerDocument;if(f.data==="$~")f._reactRetry=m;else if(f.data!=="$?"||_.readyState!=="loading")m();else{var j=function(){m(),_.removeEventListener("DOMContentLoaded",j)};_.addEventListener("DOMContentLoaded",j),f._reactRetry=j}}function Wn(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return f}var q_=null;function F5(f){f=f.nextSibling;for(var m=0;f;){if(f.nodeType===8){var _=f.data;if(_==="/$"||_==="/&"){if(m===0)return Wn(f.nextSibling);m--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||m++}f=f.nextSibling}return null}function Y5(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var _=f.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(m===0)return f;m--}else _!=="/$"&&_!=="/&"||m++}f=f.previousSibling}return null}function W5(f,m,_){switch(m=Gv(_),f){case"html":if(f=m.documentElement,!f)throw Error(a(452));return f;case"head":if(f=m.head,!f)throw Error(a(453));return f;case"body":if(f=m.body,!f)throw Error(a(454));return f;default:throw Error(a(451))}}function op(f){for(var m=f.attributes;m.length;)f.removeAttributeNode(m[0]);Zb(f)}var $n=new Map,$5=new Set;function Uv(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Zi=F.d;F.d={f:hY,r:fY,D:pY,C:gY,L:mY,m:vY,X:yY,S:xY,M:bY};function hY(){var f=Zi.f(),m=Iv();return f||m}function fY(f){var m=Xu(f);m!==null&&m.tag===5&&m.type==="form"?uM(m):Zi.r(f)}var Td=typeof document>"u"?null:document;function q5(f,m,_){var j=Td;if(j&&typeof m=="string"&&m){var E=Bn(m);E='link[rel="'+f+'"][href="'+E+'"]',typeof _=="string"&&(E+='[crossorigin="'+_+'"]'),$5.has(E)||($5.add(E),f={rel:f,crossOrigin:_,href:m},j.querySelector(E)===null&&(m=j.createElement("link"),ja(m,"link",f),ua(m),j.head.appendChild(m)))}}function pY(f){Zi.D(f),q5("dns-prefetch",f,null)}function gY(f,m){Zi.C(f,m),q5("preconnect",f,m)}function mY(f,m,_){Zi.L(f,m,_);var j=Td;if(j&&f&&m){var E='link[rel="preload"][as="'+Bn(m)+'"]';m==="image"&&_&&_.imageSrcSet?(E+='[imagesrcset="'+Bn(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(E+='[imagesizes="'+Bn(_.imageSizes)+'"]')):E+='[href="'+Bn(f)+'"]';var D=E;switch(m){case"style":D=Ad(f);break;case"script":D=Ed(f)}$n.has(D)||(f=h({rel:"preload",href:m==="image"&&_&&_.imageSrcSet?void 0:f,as:m},_),$n.set(D,f),j.querySelector(E)!==null||m==="style"&&j.querySelector(cp(D))||m==="script"&&j.querySelector(up(D))||(m=j.createElement("link"),ja(m,"link",f),ua(m),j.head.appendChild(m)))}}function vY(f,m){Zi.m(f,m);var _=Td;if(_&&f){var j=m&&typeof m.as=="string"?m.as:"script",E='link[rel="modulepreload"][as="'+Bn(j)+'"][href="'+Bn(f)+'"]',D=E;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Ed(f)}if(!$n.has(D)&&(f=h({rel:"modulepreload",href:f},m),$n.set(D,f),_.querySelector(E)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(up(D)))return}j=_.createElement("link"),ja(j,"link",f),ua(j),_.head.appendChild(j)}}}function xY(f,m,_){Zi.S(f,m,_);var j=Td;if(j&&f){var E=Zu(j).hoistableStyles,D=Ad(f);m=m||"default";var V=E.get(D);if(!V){var W={loading:0,preload:null};if(V=j.querySelector(cp(D)))W.loading=5;else{f=h({rel:"stylesheet",href:f,"data-precedence":m},_),(_=$n.get(D))&&X_(f,_);var K=V=j.createElement("link");ua(K),ja(K,"link",f),K._p=new Promise(function(se,ve){K.onload=se,K.onerror=ve}),K.addEventListener("load",function(){W.loading|=1}),K.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Fv(V,m,j)}V={type:"stylesheet",instance:V,count:1,state:W},E.set(D,V)}}}function yY(f,m){Zi.X(f,m);var _=Td;if(_&&f){var j=Zu(_).hoistableScripts,E=Ed(f),D=j.get(E);D||(D=_.querySelector(up(E)),D||(f=h({src:f,async:!0},m),(m=$n.get(E))&&Z_(f,m),D=_.createElement("script"),ua(D),ja(D,"link",f),_.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},j.set(E,D))}}function bY(f,m){Zi.M(f,m);var _=Td;if(_&&f){var j=Zu(_).hoistableScripts,E=Ed(f),D=j.get(E);D||(D=_.querySelector(up(E)),D||(f=h({src:f,async:!0,type:"module"},m),(m=$n.get(E))&&Z_(f,m),D=_.createElement("script"),ua(D),ja(D,"link",f),_.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},j.set(E,D))}}function X5(f,m,_,j){var E=(E=Ce.current)?Uv(E):null;if(!E)throw Error(a(446));switch(f){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(m=Ad(_.href),_=Zu(E).hoistableStyles,j=_.get(m),j||(j={type:"style",instance:null,count:0,state:null},_.set(m,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){f=Ad(_.href);var D=Zu(E).hoistableStyles,V=D.get(f);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(f,V),(D=E.querySelector(cp(f)))&&!D._p&&(V.instance=D,V.state.loading=5),$n.has(f)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},$n.set(f,_),D||_Y(E,f,_,V.state))),m&&j===null)throw Error(a(528,""));return V}if(m&&j!==null)throw Error(a(529,""));return null;case"script":return m=_.async,_=_.src,typeof _=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Ed(_),_=Zu(E).hoistableScripts,j=_.get(m),j||(j={type:"script",instance:null,count:0,state:null},_.set(m,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,f))}}function Ad(f){return'href="'+Bn(f)+'"'}function cp(f){return'link[rel="stylesheet"]['+f+"]"}function Z5(f){return h({},f,{"data-precedence":f.precedence,precedence:null})}function _Y(f,m,_,j){f.querySelector('link[rel="preload"][as="style"]['+m+"]")?j.loading=1:(m=f.createElement("link"),j.preload=m,m.addEventListener("load",function(){return j.loading|=1}),m.addEventListener("error",function(){return j.loading|=2}),ja(m,"link",_),ua(m),f.head.appendChild(m))}function Ed(f){return'[src="'+Bn(f)+'"]'}function up(f){return"script[async]"+f}function K5(f,m,_){if(m.count++,m.instance===null)switch(m.type){case"style":var j=f.querySelector('style[data-href~="'+Bn(_.href)+'"]');if(j)return m.instance=j,ua(j),j;var E=h({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return j=(f.ownerDocument||f).createElement("style"),ua(j),ja(j,"style",E),Fv(j,_.precedence,f),m.instance=j;case"stylesheet":E=Ad(_.href);var D=f.querySelector(cp(E));if(D)return m.state.loading|=4,m.instance=D,ua(D),D;j=Z5(_),(E=$n.get(E))&&X_(j,E),D=(f.ownerDocument||f).createElement("link"),ua(D);var V=D;return V._p=new Promise(function(W,K){V.onload=W,V.onerror=K}),ja(D,"link",j),m.state.loading|=4,Fv(D,_.precedence,f),m.instance=D;case"script":return D=Ed(_.src),(E=f.querySelector(up(D)))?(m.instance=E,ua(E),E):(j=_,(E=$n.get(D))&&(j=h({},_),Z_(j,E)),f=f.ownerDocument||f,E=f.createElement("script"),ua(E),ja(E,"link",j),f.head.appendChild(E),m.instance=E);case"void":return null;default:throw Error(a(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(j=m.instance,m.state.loading|=4,Fv(j,_.precedence,f));return m.instance}function Fv(f,m,_){for(var j=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=j.length?j[j.length-1]:null,D=E,V=0;V<j.length;V++){var W=j[V];if(W.dataset.precedence===m)D=W;else if(D!==E)break}D?D.parentNode.insertBefore(f,D.nextSibling):(m=_.nodeType===9?_.head:_,m.insertBefore(f,m.firstChild))}function X_(f,m){f.crossOrigin==null&&(f.crossOrigin=m.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=m.referrerPolicy),f.title==null&&(f.title=m.title)}function Z_(f,m){f.crossOrigin==null&&(f.crossOrigin=m.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=m.referrerPolicy),f.integrity==null&&(f.integrity=m.integrity)}var Yv=null;function Q5(f,m,_){if(Yv===null){var j=new Map,E=Yv=new Map;E.set(_,j)}else E=Yv,j=E.get(_),j||(j=new Map,E.set(_,j));if(j.has(f))return j;for(j.set(f,null),_=_.getElementsByTagName(f),E=0;E<_.length;E++){var D=_[E];if(!(D[Cf]||D[Re]||f==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var V=D.getAttribute(m)||"";V=f+V;var W=j.get(V);W?W.push(D):j.set(V,[D])}}return j}function J5(f,m,_){f=f.ownerDocument||f,f.head.insertBefore(_,m==="title"?f.querySelector("head > title"):null)}function NY(f,m,_){if(_===1||m.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return f=m.disabled,typeof m.precedence=="string"&&f==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function e4(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function jY(f,m,_,j){if(_.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var E=Ad(j.href),D=m.querySelector(cp(E));if(D){m=D._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(f.count++,f=Wv.bind(f),m.then(f,f)),_.state.loading|=4,_.instance=D,ua(D);return}D=m.ownerDocument||m,j=Z5(j),(E=$n.get(E))&&X_(j,E),D=D.createElement("link"),ua(D);var V=D;V._p=new Promise(function(W,K){V.onload=W,V.onerror=K}),ja(D,"link",j),_.instance=D}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(_,m),(m=_.state.preload)&&(_.state.loading&3)===0&&(f.count++,_=Wv.bind(f),m.addEventListener("load",_),m.addEventListener("error",_))}}var K_=0;function wY(f,m){return f.stylesheets&&f.count===0&&qv(f,f.stylesheets),0<f.count||0<f.imgCount?function(_){var j=setTimeout(function(){if(f.stylesheets&&qv(f,f.stylesheets),f.unsuspend){var D=f.unsuspend;f.unsuspend=null,D()}},6e4+m);0<f.imgBytes&&K_===0&&(K_=62500*nY());var E=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&qv(f,f.stylesheets),f.unsuspend)){var D=f.unsuspend;f.unsuspend=null,D()}},(f.imgBytes>K_?50:800)+m);return f.unsuspend=_,function(){f.unsuspend=null,clearTimeout(j),clearTimeout(E)}}:null}function Wv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qv(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var $v=null;function qv(f,m){f.stylesheets=null,f.unsuspend!==null&&(f.count++,$v=new Map,m.forEach(SY,f),$v=null,Wv.call(f))}function SY(f,m){if(!(m.state.loading&4)){var _=$v.get(f);if(_)var j=_.get(null);else{_=new Map,$v.set(f,_);for(var E=f.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<E.length;D++){var V=E[D];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(_.set(V.dataset.precedence,V),j=V)}j&&_.set(null,j)}E=m.instance,V=E.getAttribute("data-precedence"),D=_.get(V)||j,D===j&&_.set(null,E),_.set(V,E),this.count++,j=Wv.bind(this),E.addEventListener("load",j),E.addEventListener("error",j),D?D.parentNode.insertBefore(E,D.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(E,f.firstChild)),m.state.loading|=4}}var dp={$$typeof:w,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function CY(f,m,_,j,E,D,V,W,K){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=j,this.onUncaughtError=E,this.onCaughtError=D,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function t4(f,m,_,j,E,D,V,W,K,se,ve,ye){return f=new CY(f,m,_,V,K,se,ve,ye,W),m=1,D===!0&&(m|=24),D=xn(3,null,null,m),f.current=D,D.stateNode=f,m=D1(),m.refCount++,f.pooledCache=m,m.refCount++,D.memoizedState={element:j,isDehydrated:_,cache:m},I1(D),f}function r4(f){return f?(f=id,f):id}function a4(f,m,_,j,E,D){E=r4(E),j.context===null?j.context=E:j.pendingContext=E,j=Ul(m),j.payload={element:_},D=D===void 0?null:D,D!==null&&(j.callback=D),_=Fl(f,j,m),_!==null&&(rn(_,f,m),Uf(_,f,m))}function n4(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var _=f.retryLane;f.retryLane=_!==0&&_<m?_:m}}function Q_(f,m){n4(f,m),(f=f.alternate)&&n4(f,m)}function s4(f){if(f.tag===13||f.tag===31){var m=ac(f,67108864);m!==null&&rn(m,f,67108864),Q_(f,67108864)}}function i4(f){if(f.tag===13||f.tag===31){var m=jn();m=jf(m);var _=ac(f,m);_!==null&&rn(_,f,m),Q_(f,m)}}var Xv=!0;function TY(f,m,_,j){var E=P.T;P.T=null;var D=F.p;try{F.p=2,J_(f,m,_,j)}finally{F.p=D,P.T=E}}function AY(f,m,_,j){var E=P.T;P.T=null;var D=F.p;try{F.p=8,J_(f,m,_,j)}finally{F.p=D,P.T=E}}function J_(f,m,_,j){if(Xv){var E=eN(j);if(E===null)B_(f,m,j,Zv,_),o4(f,j);else if(DY(E,f,m,_,j))j.stopPropagation();else if(o4(f,j),m&4&&-1<EY.indexOf(f)){for(;E!==null;){var D=Xu(E);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var V=Jr(D.pendingLanes);if(V!==0){var W=D;for(W.pendingLanes|=2,W.entangledLanes|=2;V;){var K=1<<31-ca(V);W.entanglements[1]|=K,V&=~K}Ks(D),(Ht&6)===0&&(Rv=oa()+500,sp(0))}}break;case 31:case 13:W=ac(D,2),W!==null&&rn(W,D,2),Iv(),Q_(D,2)}if(D=eN(j),D===null&&B_(f,m,j,Zv,_),D===E)break;E=D}E!==null&&j.stopPropagation()}else B_(f,m,j,null,_)}}function eN(f){return f=r1(f),tN(f)}var Zv=null;function tN(f){if(Zv=null,f=qu(f),f!==null){var m=s(f);if(m===null)f=null;else{var _=m.tag;if(_===13){if(f=l(m),f!==null)return f;f=null}else if(_===31){if(f=o(m),f!==null)return f;f=null}else if(_===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null)}}return Zv=f,null}function l4(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ws()){case Zo:return 2;case kl:return 8;case Mi:case Ko:return 32;case Qo:return 268435456;default:return 32}default:return 32}}var rN=!1,to=null,ro=null,ao=null,hp=new Map,fp=new Map,no=[],EY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o4(f,m){switch(f){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":hp.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":fp.delete(m.pointerId)}}function pp(f,m,_,j,E,D){return f===null||f.nativeEvent!==D?(f={blockedOn:m,domEventName:_,eventSystemFlags:j,nativeEvent:D,targetContainers:[E]},m!==null&&(m=Xu(m),m!==null&&s4(m)),f):(f.eventSystemFlags|=j,m=f.targetContainers,E!==null&&m.indexOf(E)===-1&&m.push(E),f)}function DY(f,m,_,j,E){switch(m){case"focusin":return to=pp(to,f,m,_,j,E),!0;case"dragenter":return ro=pp(ro,f,m,_,j,E),!0;case"mouseover":return ao=pp(ao,f,m,_,j,E),!0;case"pointerover":var D=E.pointerId;return hp.set(D,pp(hp.get(D)||null,f,m,_,j,E)),!0;case"gotpointercapture":return D=E.pointerId,fp.set(D,pp(fp.get(D)||null,f,m,_,j,E)),!0}return!1}function c4(f){var m=qu(f.target);if(m!==null){var _=s(m);if(_!==null){if(m=_.tag,m===13){if(m=l(_),m!==null){f.blockedOn=m,Sf(f.priority,function(){i4(_)});return}}else if(m===31){if(m=o(_),m!==null){f.blockedOn=m,Sf(f.priority,function(){i4(_)});return}}else if(m===3&&_.stateNode.current.memoizedState.isDehydrated){f.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Kv(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var _=eN(f.nativeEvent);if(_===null){_=f.nativeEvent;var j=new _.constructor(_.type,_);t1=j,_.target.dispatchEvent(j),t1=null}else return m=Xu(_),m!==null&&s4(m),f.blockedOn=_,!1;m.shift()}return!0}function u4(f,m,_){Kv(f)&&_.delete(m)}function MY(){rN=!1,to!==null&&Kv(to)&&(to=null),ro!==null&&Kv(ro)&&(ro=null),ao!==null&&Kv(ao)&&(ao=null),hp.forEach(u4),fp.forEach(u4)}function Qv(f,m){f.blockedOn===m&&(f.blockedOn=null,rN||(rN=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,MY)))}var Jv=null;function d4(f){Jv!==f&&(Jv=f,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Jv===f&&(Jv=null);for(var m=0;m<f.length;m+=3){var _=f[m],j=f[m+1],E=f[m+2];if(typeof j!="function"){if(tN(j||_)===null)continue;break}var D=Xu(_);D!==null&&(f.splice(m,3),m-=3,e_(D,{pending:!0,data:E,method:_.method,action:j},j,E))}}))}function Dd(f){function m(K){return Qv(K,f)}to!==null&&Qv(to,f),ro!==null&&Qv(ro,f),ao!==null&&Qv(ao,f),hp.forEach(m),fp.forEach(m);for(var _=0;_<no.length;_++){var j=no[_];j.blockedOn===f&&(j.blockedOn=null)}for(;0<no.length&&(_=no[0],_.blockedOn===null);)c4(_),_.blockedOn===null&&no.shift();if(_=(f.ownerDocument||f).$$reactFormReplay,_!=null)for(j=0;j<_.length;j+=3){var E=_[j],D=_[j+1],V=E[qe]||null;if(typeof D=="function")V||d4(_);else if(V){var W=null;if(D&&D.hasAttribute("formAction")){if(E=D,V=D[qe]||null)W=V.formAction;else if(tN(E)!==null)continue}else W=V.action;typeof W=="function"?_[j+1]=W:(_.splice(j,3),j-=3),d4(_)}}}function h4(){function f(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function m(){E!==null&&(E(),E=null),j||setTimeout(_,20)}function _(){if(!j&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,E=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(_,100),function(){j=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),E!==null&&(E(),E=null)}}}function aN(f){this._internalRoot=f}e0.prototype.render=aN.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(a(409));var _=m.current,j=jn();a4(_,j,f,m,null,null)},e0.prototype.unmount=aN.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;a4(f.current,2,null,f,null,null),Iv(),m[cr]=null}};function e0(f){this._internalRoot=f}e0.prototype.unstable_scheduleHydration=function(f){if(f){var m=Um();f={blockedOn:null,target:f,priority:m};for(var _=0;_<no.length&&m!==0&&m<no[_].priority;_++);no.splice(_,0,f),_===0&&c4(f)}};var f4=t.version;if(f4!=="19.2.0")throw Error(a(527,f4,"19.2.0"));F.findDOMNode=function(f){var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(a(188)):(f=Object.keys(f).join(","),Error(a(268,f)));return f=u(m),f=f!==null?d(f):null,f=f===null?null:f.stateNode,f};var RY={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{$s=t0.inject(RY),xa=t0}catch{}}return mp.createRoot=function(f,m){if(!n(f))throw Error(a(299));var _=!1,j="",E=bM,D=_M,V=NM;return m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(j=m.identifierPrefix),m.onUncaughtError!==void 0&&(E=m.onUncaughtError),m.onCaughtError!==void 0&&(D=m.onCaughtError),m.onRecoverableError!==void 0&&(V=m.onRecoverableError)),m=t4(f,1,!1,null,null,_,j,null,E,D,V,h4),f[cr]=m.current,z_(f),new aN(m)},mp.hydrateRoot=function(f,m,_){if(!n(f))throw Error(a(299));var j=!1,E="",D=bM,V=_M,W=NM,K=null;return _!=null&&(_.unstable_strictMode===!0&&(j=!0),_.identifierPrefix!==void 0&&(E=_.identifierPrefix),_.onUncaughtError!==void 0&&(D=_.onUncaughtError),_.onCaughtError!==void 0&&(V=_.onCaughtError),_.onRecoverableError!==void 0&&(W=_.onRecoverableError),_.formState!==void 0&&(K=_.formState)),m=t4(f,1,!0,m,_??null,j,E,K,D,V,W,h4),m.context=r4(null),_=m.current,j=jn(),j=jf(j),E=Ul(j),E.callback=null,Fl(_,E,j),_=j,m.current.lanes=_,Dr(m,_),Ks(m),f[cr]=m.current,z_(f),new e0(m)},mp.version="19.2.0",mp}var j4;function UY(){if(j4)return iN.exports;j4=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),iN.exports=GY(),iN.exports}var FY=UY();r8();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mg(){return Mg=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Mg.apply(this,arguments)}var yo;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(yo||(yo={}));const w4="popstate";function YY(r){r===void 0&&(r={});function t(a,n){let{pathname:s,search:l,hash:o}=a.location;return tS("",{pathname:s,search:l,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function e(a,n){return typeof n=="string"?n:n8(n)}return $Y(t,e,null,r)}function qr(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function a8(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WY(){return Math.random().toString(36).substr(2,8)}function S4(r,t){return{usr:r.state,key:r.key,idx:t}}function tS(r,t,e,a){return e===void 0&&(e=null),Mg({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?Yh(t):t,{state:e,key:t&&t.key||a||WY()})}function n8(r){let{pathname:t="/",search:e="",hash:a=""}=r;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Yh(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substr(e),r=r.substr(0,e));let a=r.indexOf("?");a>=0&&(t.search=r.substr(a),r=r.substr(0,a)),r&&(t.pathname=r)}return t}function $Y(r,t,e,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:s=!1}=a,l=n.history,o=yo.Pop,c=null,u=d();u==null&&(u=0,l.replaceState(Mg({},l.state,{idx:u}),""));function d(){return(l.state||{idx:null}).idx}function h(){o=yo.Pop;let x=d(),b=x==null?null:x-u;u=x,c&&c({action:o,location:y.location,delta:b})}function p(x,b){o=yo.Push;let N=tS(y.location,x,b);u=d()+1;let w=S4(N,u),S=y.createHref(N);try{l.pushState(w,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(S)}s&&c&&c({action:o,location:y.location,delta:1})}function g(x,b){o=yo.Replace;let N=tS(y.location,x,b);u=d();let w=S4(N,u),S=y.createHref(N);l.replaceState(w,"",S),s&&c&&c({action:o,location:y.location,delta:0})}function v(x){let b=n.location.origin!=="null"?n.location.origin:n.location.href,N=typeof x=="string"?x:n8(x);return N=N.replace(/ $/,"%20"),qr(b,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,b)}let y={get action(){return o},get location(){return r(n,l)},listen(x){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(w4,h),c=x,()=>{n.removeEventListener(w4,h),c=null}},createHref(x){return t(n,x)},createURL:v,encodeLocation(x){let b=v(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:g,go(x){return l.go(x)}};return y}var C4;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(C4||(C4={}));function qY(r,t,e){return e===void 0&&(e="/"),XY(r,t,e)}function XY(r,t,e,a){let n=typeof t=="string"?Yh(t):t,s=l8(n.pathname||"/",e);if(s==null)return null;let l=s8(r);ZY(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=oW(s);o=sW(l[c],u)}return o}function s8(r,t,e,a){t===void 0&&(t=[]),e===void 0&&(e=[]),a===void 0&&(a="");let n=(s,l,o)=>{let c={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};c.relativePath.startsWith("/")&&(qr(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let u=cu([a,c.relativePath]),d=e.concat(c);s.children&&s.children.length>0&&(qr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),s8(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:aW(u,s.index),routesMeta:d})};return r.forEach((s,l)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))n(s,l);else for(let c of i8(s.path))n(s,l,c)}),t}function i8(r){let t=r.split("/");if(t.length===0)return[];let[e,...a]=t,n=e.endsWith("?"),s=e.replace(/\?$/,"");if(a.length===0)return n?[s,""]:[s];let l=i8(a.join("/")),o=[];return o.push(...l.map(c=>c===""?s:[s,c].join("/"))),n&&o.push(...l),o.map(c=>r.startsWith("/")&&c===""?"/":c)}function ZY(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:nW(t.routesMeta.map(a=>a.childrenIndex),e.routesMeta.map(a=>a.childrenIndex)))}const KY=/^:[\w-]+$/,QY=3,JY=2,eW=1,tW=10,rW=-2,T4=r=>r==="*";function aW(r,t){let e=r.split("/"),a=e.length;return e.some(T4)&&(a+=rW),t&&(a+=JY),e.filter(n=>!T4(n)).reduce((n,s)=>n+(KY.test(s)?QY:s===""?eW:tW),a)}function nW(r,t){return r.length===t.length&&r.slice(0,-1).every((a,n)=>a===t[n])?r[r.length-1]-t[t.length-1]:0}function sW(r,t,e){let{routesMeta:a}=r,n={},s="/",l=[];for(let o=0;o<a.length;++o){let c=a[o],u=o===a.length-1,d=s==="/"?t:t.slice(s.length)||"/",h=iW({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h)return null;Object.assign(n,h.params),l.push({params:n,pathname:cu([s,h.pathname]),pathnameBase:hW(cu([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=cu([s,h.pathnameBase]))}return l}function iW(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,a]=lW(r.path,r.caseSensitive,r.end),n=t.match(e);if(!n)return null;let s=n[0],l=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:a.reduce((u,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let y=o[h]||"";l=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[h];return g&&!v?u[p]=void 0:u[p]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:l,pattern:r}}function lW(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),a8(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let a=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function oW(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return a8(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function l8(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,a=r.charAt(e);return a&&a!=="/"?null:r.slice(e)||"/"}function cW(r,t){t===void 0&&(t="/");let{pathname:e,search:a="",hash:n=""}=typeof r=="string"?Yh(r):r;return{pathname:e?e.startsWith("/")?e:uW(e,t):t,search:fW(a),hash:pW(n)}}function uW(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?e.length>1&&e.pop():n!=="."&&e.push(n)}),e.length>1?e.join("/"):"/"}function uN(r,t,e,a){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dW(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function o8(r,t){let e=dW(r);return t?e.map((a,n)=>n===e.length-1?a.pathname:a.pathnameBase):e.map(a=>a.pathnameBase)}function c8(r,t,e,a){a===void 0&&(a=!1);let n;typeof r=="string"?n=Yh(r):(n=Mg({},r),qr(!n.pathname||!n.pathname.includes("?"),uN("?","pathname","search",n)),qr(!n.pathname||!n.pathname.includes("#"),uN("#","pathname","hash",n)),qr(!n.search||!n.search.includes("#"),uN("#","search","hash",n)));let s=r===""||n.pathname==="",l=s?"/":n.pathname,o;if(l==null)o=e;else{let h=t.length-1;if(!a&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),h-=1;n.pathname=p.join("/")}o=h>=0?t[h]:"/"}let c=cW(n,o),u=l&&l!=="/"&&l.endsWith("/"),d=(s||l===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const cu=r=>r.join("/").replace(/\/\/+/g,"/"),hW=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),fW=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,pW=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function gW(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const u8=["post","put","patch","delete"];new Set(u8);const mW=["get",...u8];new Set(mW);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rg(){return Rg=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Rg.apply(this,arguments)}const EC=I.createContext(null),vW=I.createContext(null),pm=I.createContext(null),nb=I.createContext(null),Uo=I.createContext({outlet:null,matches:[],isDataRoute:!1}),d8=I.createContext(null);function gm(){return I.useContext(nb)!=null}function Wh(){return gm()||qr(!1),I.useContext(nb).location}function h8(r){I.useContext(pm).static||I.useLayoutEffect(r)}function Je(){let{isDataRoute:r}=I.useContext(Uo);return r?DW():xW()}function xW(){gm()||qr(!1);let r=I.useContext(EC),{basename:t,future:e,navigator:a}=I.useContext(pm),{matches:n}=I.useContext(Uo),{pathname:s}=Wh(),l=JSON.stringify(o8(n,e.v7_relativeSplatPath)),o=I.useRef(!1);return h8(()=>{o.current=!0}),I.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){a.go(u);return}let h=c8(u,JSON.parse(l),s,d.relative==="path");r==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:cu([t,h.pathname])),(d.replace?a.replace:a.push)(h,d.state,d)},[t,a,l,s,r])}function sr(){let{matches:r}=I.useContext(Uo),t=r[r.length-1];return t?t.params:{}}function yW(r,t){return bW(r,t)}function bW(r,t,e,a){gm()||qr(!1);let{navigator:n}=I.useContext(pm),{matches:s}=I.useContext(Uo),l=s[s.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=Wh(),d;if(t){var h;let x=typeof t=="string"?Yh(t):t;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||qr(!1),d=x}else d=u;let p=d.pathname||"/",g=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=qY(r,{pathname:g}),y=SW(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:cu([c,n.encodeLocation?n.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:cu([c,n.encodeLocation?n.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,e,a);return t&&y?I.createElement(nb.Provider,{value:{location:Rg({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:yo.Pop}},y):y}function _W(){let r=EW(),t=gW(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),e?I.createElement("pre",{style:n},e):null,null)}const NW=I.createElement(_W,null);class jW extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?I.createElement(Uo.Provider,{value:this.props.routeContext},I.createElement(d8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wW(r){let{routeContext:t,match:e,children:a}=r,n=I.useContext(EC);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Uo.Provider,{value:t},a)}function SW(r,t,e,a){var n;if(t===void 0&&(t=[]),e===void 0&&(e=null),a===void 0&&(a=null),r==null){var s;if(!e)return null;if(e.errors)r=e.matches;else if((s=a)!=null&&s.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let l=r,o=(n=e)==null?void 0:n.errors;if(o!=null){let d=l.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);d>=0||qr(!1),l=l.slice(0,Math.min(l.length,d+1))}let c=!1,u=-1;if(e&&a&&a.v7_partialHydration)for(let d=0;d<l.length;d++){let h=l[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:g}=e,v=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((d,h,p)=>{let g,v=!1,y=null,x=null;e&&(g=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||NW,c&&(u<0&&p===0?(MW("route-fallback"),v=!0,x=null):u===p&&(v=!0,x=h.route.hydrateFallbackElement||null)));let b=t.concat(l.slice(0,p+1)),N=()=>{let w;return g?w=y:v?w=x:h.route.Component?w=I.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,I.createElement(wW,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:e!=null},children:w})};return e&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?I.createElement(jW,{location:e.location,revalidation:e.revalidation,component:y,error:g,children:N(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):N()},null)}var f8=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(f8||{}),p8=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(p8||{});function CW(r){let t=I.useContext(EC);return t||qr(!1),t}function TW(r){let t=I.useContext(vW);return t||qr(!1),t}function AW(r){let t=I.useContext(Uo);return t||qr(!1),t}function g8(r){let t=AW(),e=t.matches[t.matches.length-1];return e.route.id||qr(!1),e.route.id}function EW(){var r;let t=I.useContext(d8),e=TW(),a=g8();return t!==void 0?t:(r=e.errors)==null?void 0:r[a]}function DW(){let{router:r}=CW(f8.UseNavigateStable),t=g8(p8.UseNavigateStable),e=I.useRef(!1);return h8(()=>{e.current=!0}),I.useCallback(function(n,s){s===void 0&&(s={}),e.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,Rg({fromRouteId:t},s)))},[r,t])}const A4={};function MW(r,t,e){A4[r]||(A4[r]=!0)}function RW(r,t){r?.v7_startTransition,r?.v7_relativeSplatPath}function ll(r){let{to:t,replace:e,state:a,relative:n}=r;gm()||qr(!1);let{future:s,static:l}=I.useContext(pm),{matches:o}=I.useContext(Uo),{pathname:c}=Wh(),u=Je(),d=c8(t,o8(o,s.v7_relativeSplatPath),c,n==="path"),h=JSON.stringify(d);return I.useEffect(()=>u(JSON.parse(h),{replace:e,state:a,relative:n}),[u,h,n,e,a]),null}function ke(r){qr(!1)}function LW(r){let{basename:t="/",children:e=null,location:a,navigationType:n=yo.Pop,navigator:s,static:l=!1,future:o}=r;gm()&&qr(!1);let c=t.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:c,navigator:s,static:l,future:Rg({v7_relativeSplatPath:!1},o)}),[c,o,s,l]);typeof a=="string"&&(a=Yh(a));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:v="default"}=a,y=I.useMemo(()=>{let x=l8(d,c);return x==null?null:{location:{pathname:x,search:h,hash:p,state:g,key:v},navigationType:n}},[c,d,h,p,g,v,n]);return y==null?null:I.createElement(pm.Provider,{value:u},I.createElement(nb.Provider,{children:e,value:y}))}function DC(r){let{children:t,location:e}=r;return yW(rS(t),e)}new Promise(()=>{});function rS(r,t){t===void 0&&(t=[]);let e=[];return I.Children.forEach(r,(a,n)=>{if(!I.isValidElement(a))return;let s=[...t,n];if(a.type===I.Fragment){e.push.apply(e,rS(a.props.children,s));return}a.type!==ke&&qr(!1),!a.props.index||!a.props.children||qr(!1);let l={id:a.props.id||s.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=rS(a.props.children,s)),e.push(l)}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aS(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,e)=>{let a=r[e];return t.concat(Array.isArray(a)?a.map(n=>[e,n]):[[e,a]])},[]))}function IW(r,t){let e=aS(r);return t&&t.forEach((a,n)=>{e.has(n)||t.getAll(n).forEach(s=>{e.append(n,s)})}),e}const kW="6";try{window.__reactRouterVersion=kW}catch{}const OW="startTransition",E4=zY[OW];function PW(r){let{basename:t,children:e,future:a,window:n}=r,s=I.useRef();s.current==null&&(s.current=YY({window:n,v5Compat:!0}));let l=s.current,[o,c]=I.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},d=I.useCallback(h=>{u&&E4?E4(()=>c(h)):c(h)},[c,u]);return I.useLayoutEffect(()=>l.listen(d),[l,d]),I.useEffect(()=>RW(a),[a]),I.createElement(LW,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:l,future:a})}var D4;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(D4||(D4={}));var M4;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(M4||(M4={}));function MC(r){let t=I.useRef(aS(r)),e=I.useRef(!1),a=Wh(),n=I.useMemo(()=>IW(a.search,e.current?null:t.current),[a.search]),s=Je(),l=I.useCallback((o,c)=>{const u=aS(typeof o=="function"?o(n):o);e.current=!0,s("?"+u,c)},[s,n]);return[n,l]}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m8=(...r)=>r.filter((t,e,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=I.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:a,className:n="",children:s,iconNode:l,...o},c)=>I.createElement("svg",{ref:c,...BW,width:t,height:t,stroke:r,strokeWidth:a?Number(e)*24/Number(t):e,className:m8("lucide",n),...o},[...l.map(([u,d])=>I.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(r,t)=>{const e=I.forwardRef(({className:a,...n},s)=>I.createElement(VW,{ref:s,iconNode:t,className:m8(`lucide-${zW(r)}`,a),...n}));return e.displayName=`${r}`,e};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Be("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=Be("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=Be("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=Be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=Be("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Be("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Be("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=Be("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Be("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=Be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=Be("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=Be("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=Be("FileChartColumnIncreasing",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=Be("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Be("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=Be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=Be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=Be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=Be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=Be("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Be("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=Be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=Be("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Be("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=Be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=Be("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Be("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=Be("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=Be("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=Be("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=Be("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=Be("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=Be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=Be("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=Be("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Be("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=Be("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=Be("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ue(r){if(r==null)return"N/A";const t=new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(Math.abs(r)),e=r<0?"":"",a=t.replace(//g," ");return e?`${e}${a}`:a}function _e(r){if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return" ";const a=new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric",calendar:"persian"}).formatToParts(t);let n="",s="",l="";for(const p of a)p.type==="day"?n=p.value:p.type==="month"?s=p.value:p.type==="year"&&(l=p.value);const o=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0"),u=["","","","","","","","","",""],d=p=>p.replace(/\d/g,g=>u[parseInt(g)]);return`${`${d(o)}:${d(c)}`} - ${n} ${s} ${l}`}catch(t){return console.error("Error formatting date:",t)," "}}function ih(r){if(r==null||r==="")return"";const t=typeof r=="string"?parseFloat(r.replace(/,/g,"")):r;return isNaN(t)?"":new Intl.NumberFormat("fa-IR").format(t)}function r$(r){if(!r)return 0;let t=r.replace(/,/g,"");const e=["","","","","","","","","",""],a=["0","1","2","3","4","5","6","7","8","9"];e.forEach((s,l)=>{t=t.replace(new RegExp(s,"g"),a[l])});const n=parseFloat(t);return isNaN(n)?0:n}function C8(r,t){return function(){return r.apply(t,arguments)}}const{toString:a$}=Object.prototype,{getPrototypeOf:OC}=Object,{iterator:ib,toStringTag:T8}=Symbol,lb=(r=>t=>{const e=a$.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Hs=r=>(r=r.toLowerCase(),t=>lb(t)===r),ob=r=>t=>typeof t===r,{isArray:$h}=Array,Th=ob("undefined");function vm(r){return r!==null&&!Th(r)&&r.constructor!==null&&!Th(r.constructor)&&dn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const A8=Hs("ArrayBuffer");function n$(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&A8(r.buffer),t}const s$=ob("string"),dn=ob("function"),E8=ob("number"),xm=r=>r!==null&&typeof r=="object",i$=r=>r===!0||r===!1,xx=r=>{if(lb(r)!=="object")return!1;const t=OC(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(T8 in r)&&!(ib in r)},l$=r=>{if(!xm(r)||vm(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},o$=Hs("Date"),c$=Hs("File"),u$=Hs("Blob"),d$=Hs("FileList"),h$=r=>xm(r)&&dn(r.pipe),f$=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||dn(r.append)&&((t=lb(r))==="formdata"||t==="object"&&dn(r.toString)&&r.toString()==="[object FormData]"))},p$=Hs("URLSearchParams"),[g$,m$,v$,x$]=["ReadableStream","Request","Response","Headers"].map(Hs),y$=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ym(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let a,n;if(typeof r!="object"&&(r=[r]),$h(r))for(a=0,n=r.length;a<n;a++)t.call(null,r[a],a,r);else{if(vm(r))return;const s=e?Object.getOwnPropertyNames(r):Object.keys(r),l=s.length;let o;for(a=0;a<l;a++)o=s[a],t.call(null,r[o],o,r)}}function D8(r,t){if(vm(r))return null;t=t.toLowerCase();const e=Object.keys(r);let a=e.length,n;for(;a-- >0;)if(n=e[a],t===n.toLowerCase())return n;return null}const Jc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,M8=r=>!Th(r)&&r!==Jc;function lS(){const{caseless:r,skipUndefined:t}=M8(this)&&this||{},e={},a=(n,s)=>{const l=r&&D8(e,s)||s;xx(e[l])&&xx(n)?e[l]=lS(e[l],n):xx(n)?e[l]=lS({},n):$h(n)?e[l]=n.slice():(!t||!Th(n))&&(e[l]=n)};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ym(arguments[n],a);return e}const b$=(r,t,e,{allOwnKeys:a}={})=>(ym(t,(n,s)=>{e&&dn(n)?r[s]=C8(n,e):r[s]=n},{allOwnKeys:a}),r),_$=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),N$=(r,t,e,a)=>{r.prototype=Object.create(t.prototype,a),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},j$=(r,t,e,a)=>{let n,s,l;const o={};if(t=t||{},r==null)return t;do{for(n=Object.getOwnPropertyNames(r),s=n.length;s-- >0;)l=n[s],(!a||a(l,r,t))&&!o[l]&&(t[l]=r[l],o[l]=!0);r=e!==!1&&OC(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},w$=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const a=r.indexOf(t,e);return a!==-1&&a===e},S$=r=>{if(!r)return null;if($h(r))return r;let t=r.length;if(!E8(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},C$=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&OC(Uint8Array)),T$=(r,t)=>{const a=(r&&r[ib]).call(r);let n;for(;(n=a.next())&&!n.done;){const s=n.value;t.call(r,s[0],s[1])}},A$=(r,t)=>{let e;const a=[];for(;(e=r.exec(t))!==null;)a.push(e);return a},E$=Hs("HTMLFormElement"),D$=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,a,n){return a.toUpperCase()+n}),k4=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),M$=Hs("RegExp"),R8=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),a={};ym(e,(n,s)=>{let l;(l=t(n,s,r))!==!1&&(a[s]=l||n)}),Object.defineProperties(r,a)},R$=r=>{R8(r,(t,e)=>{if(dn(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const a=r[e];if(dn(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},L$=(r,t)=>{const e={},a=n=>{n.forEach(s=>{e[s]=!0})};return $h(r)?a(r):a(String(r).split(t)),e},I$=()=>{},k$=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function O$(r){return!!(r&&dn(r.append)&&r[T8]==="FormData"&&r[ib])}const P$=r=>{const t=new Array(10),e=(a,n)=>{if(xm(a)){if(t.indexOf(a)>=0)return;if(vm(a))return a;if(!("toJSON"in a)){t[n]=a;const s=$h(a)?[]:{};return ym(a,(l,o)=>{const c=e(l,n+1);!Th(c)&&(s[o]=c)}),t[n]=void 0,s}}return a};return e(r,0)},z$=Hs("AsyncFunction"),B$=r=>r&&(xm(r)||dn(r))&&dn(r.then)&&dn(r.catch),L8=((r,t)=>r?setImmediate:t?((e,a)=>(Jc.addEventListener("message",({source:n,data:s})=>{n===Jc&&s===e&&a.length&&a.shift()()},!1),n=>{a.push(n),Jc.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",dn(Jc.postMessage)),V$=typeof queueMicrotask<"u"?queueMicrotask.bind(Jc):typeof process<"u"&&process.nextTick||L8,H$=r=>r!=null&&dn(r[ib]),he={isArray:$h,isArrayBuffer:A8,isBuffer:vm,isFormData:f$,isArrayBufferView:n$,isString:s$,isNumber:E8,isBoolean:i$,isObject:xm,isPlainObject:xx,isEmptyObject:l$,isReadableStream:g$,isRequest:m$,isResponse:v$,isHeaders:x$,isUndefined:Th,isDate:o$,isFile:c$,isBlob:u$,isRegExp:M$,isFunction:dn,isStream:h$,isURLSearchParams:p$,isTypedArray:C$,isFileList:d$,forEach:ym,merge:lS,extend:b$,trim:y$,stripBOM:_$,inherits:N$,toFlatObject:j$,kindOf:lb,kindOfTest:Hs,endsWith:w$,toArray:S$,forEachEntry:T$,matchAll:A$,isHTMLForm:E$,hasOwnProperty:k4,hasOwnProp:k4,reduceDescriptors:R8,freezeMethods:R$,toObjectSet:L$,toCamelCase:D$,noop:I$,toFiniteNumber:k$,findKey:D8,global:Jc,isContextDefined:M8,isSpecCompliantForm:O$,toJSONObject:P$,isAsyncFn:z$,isThenable:B$,setImmediate:L8,asap:V$,isIterable:H$};function bt(r,t,e,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}he.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.status}}});const I8=bt.prototype,k8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{k8[r]={value:r}});Object.defineProperties(bt,k8);Object.defineProperty(I8,"isAxiosError",{value:!0});bt.from=(r,t,e,a,n,s)=>{const l=Object.create(I8);he.toFlatObject(r,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const o=r&&r.message?r.message:"Error",c=t==null&&r?r.code:t;return bt.call(l,o,c,e,a,n),r&&l.cause==null&&Object.defineProperty(l,"cause",{value:r,configurable:!0}),l.name=r&&r.name||"Error",s&&Object.assign(l,s),l};const G$=null;function oS(r){return he.isPlainObject(r)||he.isArray(r)}function O8(r){return he.endsWith(r,"[]")?r.slice(0,-2):r}function O4(r,t,e){return r?r.concat(t).map(function(n,s){return n=O8(n),!e&&s?"["+n+"]":n}).join(e?".":""):t}function U$(r){return he.isArray(r)&&!r.some(oS)}const F$=he.toFlatObject(he,{},null,function(t){return/^is[A-Z]/.test(t)});function cb(r,t,e){if(!he.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=he.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,x){return!he.isUndefined(x[y])});const a=e.metaTokens,n=e.visitor||d,s=e.dots,l=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(t);if(!he.isFunction(n))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(he.isDate(v))return v.toISOString();if(he.isBoolean(v))return v.toString();if(!c&&he.isBlob(v))throw new bt("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(v)||he.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,y,x){let b=v;if(v&&!x&&typeof v=="object"){if(he.endsWith(y,"{}"))y=a?y:y.slice(0,-2),v=JSON.stringify(v);else if(he.isArray(v)&&U$(v)||(he.isFileList(v)||he.endsWith(y,"[]"))&&(b=he.toArray(v)))return y=O8(y),b.forEach(function(w,S){!(he.isUndefined(w)||w===null)&&t.append(l===!0?O4([y],S,s):l===null?y:y+"[]",u(w))}),!1}return oS(v)?!0:(t.append(O4(x,y,s),u(v)),!1)}const h=[],p=Object.assign(F$,{defaultVisitor:d,convertValue:u,isVisitable:oS});function g(v,y){if(!he.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),he.forEach(v,function(b,N){(!(he.isUndefined(b)||b===null)&&n.call(t,b,he.isString(N)?N.trim():N,y,p))===!0&&g(b,y?y.concat(N):[N])}),h.pop()}}if(!he.isObject(r))throw new TypeError("data must be an object");return g(r),t}function P4(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function PC(r,t){this._pairs=[],r&&cb(r,this,t)}const P8=PC.prototype;P8.append=function(t,e){this._pairs.push([t,e])};P8.toString=function(t){const e=t?function(a){return t.call(this,a,P4)}:P4;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function Y$(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function z8(r,t,e){if(!t)return r;const a=e&&e.encode||Y$;he.isFunction(e)&&(e={serialize:e});const n=e&&e.serialize;let s;if(n?s=n(t,e):s=he.isURLSearchParams(t)?t.toString():new PC(t,e).toString(a),s){const l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class z4{constructor(){this.handlers=[]}use(t,e,a){return this.handlers.push({fulfilled:t,rejected:e,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){he.forEach(this.handlers,function(a){a!==null&&t(a)})}}const B8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},W$=typeof URLSearchParams<"u"?URLSearchParams:PC,$$=typeof FormData<"u"?FormData:null,q$=typeof Blob<"u"?Blob:null,X$={isBrowser:!0,classes:{URLSearchParams:W$,FormData:$$,Blob:q$},protocols:["http","https","file","blob","url","data"]},zC=typeof window<"u"&&typeof document<"u",cS=typeof navigator=="object"&&navigator||void 0,Z$=zC&&(!cS||["ReactNative","NativeScript","NS"].indexOf(cS.product)<0),K$=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Q$=zC&&window.location.href||"http://localhost",J$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zC,hasStandardBrowserEnv:Z$,hasStandardBrowserWebWorkerEnv:K$,navigator:cS,origin:Q$},Symbol.toStringTag,{value:"Module"})),za={...J$,...X$};function eq(r,t){return cb(r,new za.classes.URLSearchParams,{visitor:function(e,a,n,s){return za.isNode&&he.isBuffer(e)?(this.append(a,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function tq(r){return he.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function rq(r){const t={},e=Object.keys(r);let a;const n=e.length;let s;for(a=0;a<n;a++)s=e[a],t[s]=r[s];return t}function V8(r){function t(e,a,n,s){let l=e[s++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=s>=e.length;return l=!l&&he.isArray(n)?n.length:l,c?(he.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!o):((!n[l]||!he.isObject(n[l]))&&(n[l]=[]),t(e,a,n[l],s)&&he.isArray(n[l])&&(n[l]=rq(n[l])),!o)}if(he.isFormData(r)&&he.isFunction(r.entries)){const e={};return he.forEachEntry(r,(a,n)=>{t(tq(a),n,e,0)}),e}return null}function aq(r,t,e){if(he.isString(r))try{return(t||JSON.parse)(r),he.trim(r)}catch(a){if(a.name!=="SyntaxError")throw a}return(e||JSON.stringify)(r)}const bm={transitional:B8,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const a=e.getContentType()||"",n=a.indexOf("application/json")>-1,s=he.isObject(t);if(s&&he.isHTMLForm(t)&&(t=new FormData(t)),he.isFormData(t))return n?JSON.stringify(V8(t)):t;if(he.isArrayBuffer(t)||he.isBuffer(t)||he.isStream(t)||he.isFile(t)||he.isBlob(t)||he.isReadableStream(t))return t;if(he.isArrayBufferView(t))return t.buffer;if(he.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return eq(t,this.formSerializer).toString();if((o=he.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return cb(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||n?(e.setContentType("application/json",!1),aq(t)):t}],transformResponse:[function(t){const e=this.transitional||bm.transitional,a=e&&e.forcedJSONParsing,n=this.responseType==="json";if(he.isResponse(t)||he.isReadableStream(t))return t;if(t&&he.isString(t)&&(a&&!this.responseType||n)){const l=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?bt.from(o,bt.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:za.classes.FormData,Blob:za.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],r=>{bm.headers[r]={}});const nq=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sq=r=>{const t={};let e,a,n;return r&&r.split(`
`).forEach(function(l){n=l.indexOf(":"),e=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!e||t[e]&&nq[e])&&(e==="set-cookie"?t[e]?t[e].push(a):t[e]=[a]:t[e]=t[e]?t[e]+", "+a:a)}),t},B4=Symbol("internals");function xp(r){return r&&String(r).trim().toLowerCase()}function yx(r){return r===!1||r==null?r:he.isArray(r)?r.map(yx):String(r)}function iq(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=e.exec(r);)t[a[1]]=a[2];return t}const lq=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function dN(r,t,e,a,n){if(he.isFunction(a))return a.call(this,t,e);if(n&&(t=e),!!he.isString(t)){if(he.isString(a))return t.indexOf(a)!==-1;if(he.isRegExp(a))return a.test(t)}}function oq(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,a)=>e.toUpperCase()+a)}function cq(r,t){const e=he.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(r,a+e,{value:function(n,s,l){return this[a].call(this,t,n,s,l)},configurable:!0})})}let hn=class{constructor(t){t&&this.set(t)}set(t,e,a){const n=this;function s(o,c,u){const d=xp(c);if(!d)throw new Error("header name must be a non-empty string");const h=he.findKey(n,d);(!h||n[h]===void 0||u===!0||u===void 0&&n[h]!==!1)&&(n[h||c]=yx(o))}const l=(o,c)=>he.forEach(o,(u,d)=>s(u,d,c));if(he.isPlainObject(t)||t instanceof this.constructor)l(t,e);else if(he.isString(t)&&(t=t.trim())&&!lq(t))l(sq(t),e);else if(he.isObject(t)&&he.isIterable(t)){let o={},c,u;for(const d of t){if(!he.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?he.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}l(o,e)}else t!=null&&s(e,t,a);return this}get(t,e){if(t=xp(t),t){const a=he.findKey(this,t);if(a){const n=this[a];if(!e)return n;if(e===!0)return iq(n);if(he.isFunction(e))return e.call(this,n,a);if(he.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=xp(t),t){const a=he.findKey(this,t);return!!(a&&this[a]!==void 0&&(!e||dN(this,this[a],a,e)))}return!1}delete(t,e){const a=this;let n=!1;function s(l){if(l=xp(l),l){const o=he.findKey(a,l);o&&(!e||dN(a,a[o],o,e))&&(delete a[o],n=!0)}}return he.isArray(t)?t.forEach(s):s(t),n}clear(t){const e=Object.keys(this);let a=e.length,n=!1;for(;a--;){const s=e[a];(!t||dN(this,this[s],s,t,!0))&&(delete this[s],n=!0)}return n}normalize(t){const e=this,a={};return he.forEach(this,(n,s)=>{const l=he.findKey(a,s);if(l){e[l]=yx(n),delete e[s];return}const o=t?oq(s):String(s).trim();o!==s&&delete e[s],e[o]=yx(n),a[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return he.forEach(this,(a,n)=>{a!=null&&a!==!1&&(e[n]=t&&he.isArray(a)?a.join(", "):a)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const a=new this(t);return e.forEach(n=>a.set(n)),a}static accessor(t){const a=(this[B4]=this[B4]={accessors:{}}).accessors,n=this.prototype;function s(l){const o=xp(l);a[o]||(cq(n,l),a[o]=!0)}return he.isArray(t)?t.forEach(s):s(t),this}};hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(hn.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(a){this[e]=a}}});he.freezeMethods(hn);function hN(r,t){const e=this||bm,a=t||e,n=hn.from(a.headers);let s=a.data;return he.forEach(r,function(o){s=o.call(e,s,n.normalize(),t?t.status:void 0)}),n.normalize(),s}function H8(r){return!!(r&&r.__CANCEL__)}function qh(r,t,e){bt.call(this,r??"canceled",bt.ERR_CANCELED,t,e),this.name="CanceledError"}he.inherits(qh,bt,{__CANCEL__:!0});function G8(r,t,e){const a=e.config.validateStatus;!e.status||!a||a(e.status)?r(e):t(new bt("Request failed with status code "+e.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function uq(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function dq(r,t){r=r||10;const e=new Array(r),a=new Array(r);let n=0,s=0,l;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=a[s];l||(l=u),e[n]=c,a[n]=u;let h=s,p=0;for(;h!==n;)p+=e[h++],h=h%r;if(n=(n+1)%r,n===s&&(s=(s+1)%r),u-l<t)return;const g=d&&u-d;return g?Math.round(p*1e3/g):void 0}}function hq(r,t){let e=0,a=1e3/t,n,s;const l=(u,d=Date.now())=>{e=d,n=null,s&&(clearTimeout(s),s=null),r(...u)};return[(...u)=>{const d=Date.now(),h=d-e;h>=a?l(u,d):(n=u,s||(s=setTimeout(()=>{s=null,l(n)},a-h)))},()=>n&&l(n)]}const $x=(r,t,e=3)=>{let a=0;const n=dq(50,250);return hq(s=>{const l=s.loaded,o=s.lengthComputable?s.total:void 0,c=l-a,u=n(c),d=l<=o;a=l;const h={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-l)/u:void 0,event:s,lengthComputable:o!=null,[t?"download":"upload"]:!0};r(h)},e)},V4=(r,t)=>{const e=r!=null;return[a=>t[0]({lengthComputable:e,total:r,loaded:a}),t[1]]},H4=r=>(...t)=>he.asap(()=>r(...t)),fq=za.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,za.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(za.origin),za.navigator&&/(msie|trident)/i.test(za.navigator.userAgent)):()=>!0,pq=za.hasStandardBrowserEnv?{write(r,t,e,a,n,s){const l=[r+"="+encodeURIComponent(t)];he.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),he.isString(a)&&l.push("path="+a),he.isString(n)&&l.push("domain="+n),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read(r){const t=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function gq(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function mq(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function U8(r,t,e){let a=!gq(t);return r&&(a||e==!1)?mq(r,t):t}const G4=r=>r instanceof hn?{...r}:r;function _u(r,t){t=t||{};const e={};function a(u,d,h,p){return he.isPlainObject(u)&&he.isPlainObject(d)?he.merge.call({caseless:p},u,d):he.isPlainObject(d)?he.merge({},d):he.isArray(d)?d.slice():d}function n(u,d,h,p){if(he.isUndefined(d)){if(!he.isUndefined(u))return a(void 0,u,h,p)}else return a(u,d,h,p)}function s(u,d){if(!he.isUndefined(d))return a(void 0,d)}function l(u,d){if(he.isUndefined(d)){if(!he.isUndefined(u))return a(void 0,u)}else return a(void 0,d)}function o(u,d,h){if(h in t)return a(u,d);if(h in r)return a(void 0,u)}const c={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(u,d,h)=>n(G4(u),G4(d),h,!0)};return he.forEach(Object.keys({...r,...t}),function(d){const h=c[d]||n,p=h(r[d],t[d],d);he.isUndefined(p)&&h!==o||(e[d]=p)}),e}const F8=r=>{const t=_u({},r);let{data:e,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:s,headers:l,auth:o}=t;if(t.headers=l=hn.from(l),t.url=z8(U8(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),he.isFormData(e)){if(za.hasStandardBrowserEnv||za.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(he.isFunction(e.getHeaders)){const c=e.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{u.includes(d.toLowerCase())&&l.set(d,h)})}}if(za.hasStandardBrowserEnv&&(a&&he.isFunction(a)&&(a=a(t)),a||a!==!1&&fq(t.url))){const c=n&&s&&pq.read(s);c&&l.set(n,c)}return t},vq=typeof XMLHttpRequest<"u",xq=vq&&function(r){return new Promise(function(e,a){const n=F8(r);let s=n.data;const l=hn.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=n,d,h,p,g,v;function y(){g&&g(),v&&v(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout;function b(){if(!x)return;const w=hn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:w,config:r,request:x};G8(function(C){e(C),y()},function(C){a(C),y()},T),x=null}"onloadend"in x?x.onloadend=b:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(b)},x.onabort=function(){x&&(a(new bt("Request aborted",bt.ECONNABORTED,r,x)),x=null)},x.onerror=function(S){const T=S&&S.message?S.message:"Network Error",A=new bt(T,bt.ERR_NETWORK,r,x);A.event=S||null,a(A),x=null},x.ontimeout=function(){let S=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const T=n.transitional||B8;n.timeoutErrorMessage&&(S=n.timeoutErrorMessage),a(new bt(S,T.clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,r,x)),x=null},s===void 0&&l.setContentType(null),"setRequestHeader"in x&&he.forEach(l.toJSON(),function(S,T){x.setRequestHeader(T,S)}),he.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),o&&o!=="json"&&(x.responseType=n.responseType),u&&([p,v]=$x(u,!0),x.addEventListener("progress",p)),c&&x.upload&&([h,g]=$x(c),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(d=w=>{x&&(a(!w||w.type?new qh(null,r,x):w),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const N=uq(n.url);if(N&&za.protocols.indexOf(N)===-1){a(new bt("Unsupported protocol "+N+":",bt.ERR_BAD_REQUEST,r));return}x.send(s||null)})},yq=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let a=new AbortController,n;const s=function(u){if(!n){n=!0,o();const d=u instanceof Error?u:this.reason;a.abort(d instanceof bt?d:new qh(d instanceof Error?d.message:d))}};let l=t&&setTimeout(()=>{l=null,s(new bt(`timeout ${t} of ms exceeded`,bt.ETIMEDOUT))},t);const o=()=>{r&&(l&&clearTimeout(l),l=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),r=null)};r.forEach(u=>u.addEventListener("abort",s));const{signal:c}=a;return c.unsubscribe=()=>he.asap(o),c}},bq=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let a=0,n;for(;a<e;)n=a+t,yield r.slice(a,n),a=n},_q=async function*(r,t){for await(const e of Nq(r))yield*bq(e,t)},Nq=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:a}=await t.read();if(e)break;yield a}}finally{await t.cancel()}},U4=(r,t,e,a)=>{const n=_q(r,t);let s=0,l,o=c=>{l||(l=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await n.next();if(u){o(),c.close();return}let h=d.byteLength;if(e){let p=s+=h;e(p)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},F4=64*1024,{isFunction:r0}=he,jq=(({Request:r,Response:t})=>({Request:r,Response:t}))(he.global),{ReadableStream:Y4,TextEncoder:W4}=he.global,$4=(r,...t)=>{try{return!!r(...t)}catch{return!1}},wq=r=>{r=he.merge.call({skipUndefined:!0},jq,r);const{fetch:t,Request:e,Response:a}=r,n=t?r0(t):typeof fetch=="function",s=r0(e),l=r0(a);if(!n)return!1;const o=n&&r0(Y4),c=n&&(typeof W4=="function"?(v=>y=>v.encode(y))(new W4):async v=>new Uint8Array(await new e(v).arrayBuffer())),u=s&&o&&$4(()=>{let v=!1;const y=new e(za.origin,{body:new Y4,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!y}),d=l&&o&&$4(()=>he.isReadableStream(new a("").body)),h={stream:d&&(v=>v.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!h[v]&&(h[v]=(y,x)=>{let b=y&&y[v];if(b)return b.call(y);throw new bt(`Response type '${v}' is not supported`,bt.ERR_NOT_SUPPORT,x)})});const p=async v=>{if(v==null)return 0;if(he.isBlob(v))return v.size;if(he.isSpecCompliantForm(v))return(await new e(za.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(he.isArrayBufferView(v)||he.isArrayBuffer(v))return v.byteLength;if(he.isURLSearchParams(v)&&(v=v+""),he.isString(v))return(await c(v)).byteLength},g=async(v,y)=>{const x=he.toFiniteNumber(v.getContentLength());return x??p(y)};return async v=>{let{url:y,method:x,data:b,signal:N,cancelToken:w,timeout:S,onDownloadProgress:T,onUploadProgress:A,responseType:C,headers:M,withCredentials:R="same-origin",fetchOptions:k}=F8(v),L=t||fetch;C=C?(C+"").toLowerCase():"text";let O=yq([N,w&&w.toAbortSignal()],S),z=null;const U=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let H;try{if(A&&u&&x!=="get"&&x!=="head"&&(H=await g(M,b))!==0){let G=new e(y,{method:"POST",body:b,duplex:"half"}),$;if(he.isFormData(b)&&($=G.headers.get("content-type"))&&M.setContentType($),G.body){const[Z,te]=V4(H,$x(H4(A)));b=U4(G.body,F4,Z,te)}}he.isString(R)||(R=R?"include":"omit");const P=s&&"credentials"in e.prototype,F={...k,signal:O,method:x.toUpperCase(),headers:M.normalize().toJSON(),body:b,duplex:"half",credentials:P?R:void 0};z=s&&new e(y,F);let Y=await(s?L(z,k):L(y,F));const X=d&&(C==="stream"||C==="response");if(d&&(T||X&&U)){const G={};["status","statusText","headers"].forEach(me=>{G[me]=Y[me]});const $=he.toFiniteNumber(Y.headers.get("content-length")),[Z,te]=T&&V4($,$x(H4(T),!0))||[];Y=new a(U4(Y.body,F4,Z,()=>{te&&te(),U&&U()}),G)}C=C||"text";let q=await h[he.findKey(h,C)||"text"](Y,v);return!X&&U&&U(),await new Promise((G,$)=>{G8(G,$,{data:q,headers:hn.from(Y.headers),status:Y.status,statusText:Y.statusText,config:v,request:z})})}catch(P){throw U&&U(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new bt("Network Error",bt.ERR_NETWORK,v,z),{cause:P.cause||P}):bt.from(P,P&&P.code,v,z)}}},Sq=new Map,Y8=r=>{let t=r?r.env:{};const{fetch:e,Request:a,Response:n}=t,s=[a,n,e];let l=s.length,o=l,c,u,d=Sq;for(;o--;)c=s[o],u=d.get(c),u===void 0&&d.set(c,u=o?new Map:wq(t)),d=u;return u};Y8();const uS={http:G$,xhr:xq,fetch:{get:Y8}};he.forEach(uS,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const q4=r=>`- ${r}`,Cq=r=>he.isFunction(r)||r===null||r===!1,W8={getAdapter:(r,t)=>{r=he.isArray(r)?r:[r];const{length:e}=r;let a,n;const s={};for(let l=0;l<e;l++){a=r[l];let o;if(n=a,!Cq(a)&&(n=uS[(o=String(a)).toLowerCase()],n===void 0))throw new bt(`Unknown adapter '${o}'`);if(n&&(he.isFunction(n)||(n=n.get(t))))break;s[o||"#"+l]=n}if(!n){const l=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?l.length>1?`since :
`+l.map(q4).join(`
`):" "+q4(l[0]):"as no adapter specified";throw new bt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:uS};function fN(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new qh(null,r)}function X4(r){return fN(r),r.headers=hn.from(r.headers),r.data=hN.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),W8.getAdapter(r.adapter||bm.adapter,r)(r).then(function(a){return fN(r),a.data=hN.call(r,r.transformResponse,a),a.headers=hn.from(a.headers),a},function(a){return H8(a)||(fN(r),a&&a.response&&(a.response.data=hN.call(r,r.transformResponse,a.response),a.response.headers=hn.from(a.response.headers))),Promise.reject(a)})}const $8="1.12.2",ub={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{ub[r]=function(a){return typeof a===r||"a"+(t<1?"n ":" ")+r}});const Z4={};ub.transitional=function(t,e,a){function n(s,l){return"[Axios v"+$8+"] Transitional option '"+s+"'"+l+(a?". "+a:"")}return(s,l,o)=>{if(t===!1)throw new bt(n(l," has been removed"+(e?" in "+e:"")),bt.ERR_DEPRECATED);return e&&!Z4[l]&&(Z4[l]=!0,console.warn(n(l," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,l,o):!0}};ub.spelling=function(t){return(e,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function Tq(r,t,e){if(typeof r!="object")throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const a=Object.keys(r);let n=a.length;for(;n-- >0;){const s=a[n],l=t[s];if(l){const o=r[s],c=o===void 0||l(o,s,r);if(c!==!0)throw new bt("option "+s+" must be "+c,bt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new bt("Unknown option "+s,bt.ERR_BAD_OPTION)}}const bx={assertOptions:Tq,validators:ub},Qs=bx.validators;let uu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new z4,response:new z4}}async request(t,e){try{return await this._request(t,e)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const s=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?s&&!String(a.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+s):a.stack=s}catch{}}throw a}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=_u(this.defaults,e);const{transitional:a,paramsSerializer:n,headers:s}=e;a!==void 0&&bx.assertOptions(a,{silentJSONParsing:Qs.transitional(Qs.boolean),forcedJSONParsing:Qs.transitional(Qs.boolean),clarifyTimeoutError:Qs.transitional(Qs.boolean)},!1),n!=null&&(he.isFunction(n)?e.paramsSerializer={serialize:n}:bx.assertOptions(n,{encode:Qs.function,serialize:Qs.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),bx.assertOptions(e,{baseUrl:Qs.spelling("baseURL"),withXsrfToken:Qs.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=s&&he.merge(s.common,s[e.method]);s&&he.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),e.headers=hn.concat(l,s);const o=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(e)===!1||(c=c&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,h=0,p;if(!c){const v=[X4.bind(this),void 0];for(v.unshift(...o),v.push(...u),p=v.length,d=Promise.resolve(e);h<p;)d=d.then(v[h++],v[h++]);return d}p=o.length;let g=e;for(;h<p;){const v=o[h++],y=o[h++];try{g=v(g)}catch(x){y.call(this,x);break}}try{d=X4.call(this,g)}catch(v){return Promise.reject(v)}for(h=0,p=u.length;h<p;)d=d.then(u[h++],u[h++]);return d}getUri(t){t=_u(this.defaults,t);const e=U8(t.baseURL,t.url,t.allowAbsoluteUrls);return z8(e,t.params,t.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(t){uu.prototype[t]=function(e,a){return this.request(_u(a||{},{method:t,url:e,data:(a||{}).data}))}});he.forEach(["post","put","patch"],function(t){function e(a){return function(s,l,o){return this.request(_u(o||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}uu.prototype[t]=e(),uu.prototype[t+"Form"]=e(!0)});let Aq=class q8{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const a=this;this.promise.then(n=>{if(!a._listeners)return;let s=a._listeners.length;for(;s-- >0;)a._listeners[s](n);a._listeners=null}),this.promise.then=n=>{let s;const l=new Promise(o=>{a.subscribe(o),s=o}).then(n);return l.cancel=function(){a.unsubscribe(s)},l},t(function(s,l,o){a.reason||(a.reason=new qh(s,l,o),e(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=a=>{t.abort(a)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new q8(function(n){t=n}),cancel:t}}};function Eq(r){return function(e){return r.apply(null,e)}}function Dq(r){return he.isObject(r)&&r.isAxiosError===!0}const dS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dS).forEach(([r,t])=>{dS[t]=r});function X8(r){const t=new uu(r),e=C8(uu.prototype.request,t);return he.extend(e,uu.prototype,t,{allOwnKeys:!0}),he.extend(e,t,null,{allOwnKeys:!0}),e.create=function(n){return X8(_u(r,n))},e}const Ar=X8(bm);Ar.Axios=uu;Ar.CanceledError=qh;Ar.CancelToken=Aq;Ar.isCancel=H8;Ar.VERSION=$8;Ar.toFormData=cb;Ar.AxiosError=bt;Ar.Cancel=Ar.CanceledError;Ar.all=function(t){return Promise.all(t)};Ar.spread=Eq;Ar.isAxiosError=Dq;Ar.mergeConfig=_u;Ar.AxiosHeaders=hn;Ar.formToJSON=r=>V8(he.isHTMLForm(r)?new FormData(r):r);Ar.getAdapter=W8.getAdapter;Ar.HttpStatusCode=dS;Ar.default=Ar;const{Axios:f1e,AxiosError:p1e,CanceledError:g1e,isCancel:m1e,CancelToken:v1e,VERSION:x1e,all:y1e,Cancel:b1e,isAxiosError:_1e,spread:N1e,toFormData:j1e,AxiosHeaders:w1e,HttpStatusCode:S1e,formToJSON:C1e,getAdapter:T1e,mergeConfig:A1e}=Ar,Mq="https://meat-core-dev.darkube.app",Rq="https://apit.aradgbk.com/files";let yp=null,Rd=null;async function Lq(){if(yp)return yp;if(Rd)return Rd;const r=localStorage.getItem("client_ip");return r?(yp=r,r):(Rd=Ar.get("https://api.ipify.org?format=json",{timeout:5e3}).then(t=>{const e=t.data.ip||"unknown";return yp=e,localStorage.setItem("client_ip",e),Rd=null,e}).catch(t=>{console.warn("Failed to fetch IP address:",t),Rd=null;const e="unknown";return yp=e,e}),Rd)}const ge=Ar.create({baseURL:Mq,headers:{"Content-Type":"application/json",version:"1",branch:"ISFAHAN"}});ge.interceptors.request.use(async r=>{const t=localStorage.getItem("access_token");t&&(r.headers.Authorization=`Bearer ${t}`);try{const e=await Lq();r.headers["x-forwarded-for"]=e,r.headers["x-real-ip"]=e}catch(e){console.warn("Failed to get client IP:",e)}return r},r=>Promise.reject(r));ge.interceptors.response.use(r=>r,async r=>{const t=r.config;if(r.response?.status===401&&!t._retry){t._retry=!0;const e=localStorage.getItem("refresh_token");if(e)try{const a=await ge.post("/auth/refresh",{refresh_token:e}),{access_token:n}=a.data;return localStorage.setItem("access_token",n),t.headers.Authorization=`Bearer ${n}`,ge(t)}catch(a){return a.response?.status===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login"),Promise.reject(a)}else localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login"}return Promise.reject(r)});const lr=r=>r?`${Rq}/${r}`:null,bo={login:async r=>(await ge.post("/auth/login",r)).data,logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("selected_role"),localStorage.removeItem("client_ip")},verifyToken:async r=>(await ge.post("/auth/verify-token",{token:r})).data,checkAuth:async()=>{const r=localStorage.getItem("access_token"),t=localStorage.getItem("refresh_token");if(!r&&!t)return!1;if(r)try{return await bo.verifyToken(r),!0}catch{if(t)try{const a=await ge.post("/auth/refresh",{refresh_token:t}),{access_token:n}=a.data;return localStorage.setItem("access_token",n),!0}catch{return console.warn("Both tokens are invalid, logging out..."),bo.logout(),!1}else return bo.logout(),!1}return!1},initAuthCheck:async()=>{const r=await bo.checkAuth();return r||window.location.pathname.includes("/login")||(window.location.href="/login"),r}},Ig={getInvoices:async r=>(await ge.get("/invoices",{params:{...r}})).data,getInvoiceById:async r=>(await ge.get(`/invoices/${r}`)).data},Gs={getWalletHistory:async(r={})=>(await ge.get("/wallet-history",{params:{page:1,"page-size":10,...r}})).data,getWalletHistoryById:async r=>(await ge.get(`/wallet-history/${r}`)).data,getOrderHistory:async(r={})=>(await ge.get("/order-history",{params:{page:1,"page-size":10,...r}})).data,getOrderHistoryById:async r=>(await ge.get(`/order-history/${r}`)).data,getPaymentHistory:async(r={})=>(await ge.get("/payment-history",{params:{page:1,"page-size":10,...r}})).data,getPaymentHistoryById:async r=>(await ge.get(`/payment-history/${r}`)).data,getInvoiceHistory:async(r={})=>(await ge.get("/invoice-history",{params:{page:1,"page-size":10,...r}})).data,getInvoiceHistoryById:async r=>(await ge.get(`/invoice-history/${r}`)).data,getCargoHistory:async(r={})=>(await ge.get("/cargo-history",{params:{page:1,"page-size":10,...r}})).data,getCustomerRequests:async(r=1,t=10)=>(await ge.get("/customer-requests",{params:{page:r,"page-size":t}})).data,getCustomerRequestById:async r=>(await ge.get(`/customer-requests/${r}`)).data},Us={getWarehouses:async()=>{const r=await ge.get("/warehouses");return r.data.data||r.data},getWarehouseById:async r=>(await ge.get(`/warehouses/${r}`)).data},_x={getCategoriesByWarehouse:async r=>{const t=await ge.get(`/categories/warehouse/${r}`);return t.data.data||t.data},getCategoryById:async r=>(await ge.get(`/categories/${r}`)).data,uploadCategoryImage:async(r,t)=>{await ge.patch(`/categories/${r}/image`,{image_id:t})},updateCategory:async(r,t)=>(await ge.put(`/categories/${r}`,t)).data},Oo={getProductsByWarehouse:async r=>{const t=await ge.get(`/products/warehouse/${r}`);return t.data.data||t.data},getProductById:async r=>(await ge.get(`/products/${r}`)).data,updateProduct:async(r,t)=>{await ge.patch(`/products/${r}/product`,t)},updateProductPrices:async(r,t)=>(await ge.put(`/products/prices/${r}`,t)).data},gr={getCustomerForShow:async()=>(await ge.get("/customers/show")).data,getAllCustomers:async r=>(await ge.get("/customers",{params:{...r}})).data,getCustomerById:async r=>(await ge.get(`/customers/${r}`)).data,getCustomerTransactions:async(r,t)=>(await ge.get(`/customers/transactions/${r}`,{params:{...t}})).data,getCustomersByDebt:async r=>(await ge.get("/customers/by-debt",{params:{...r}})).data,getCustomersByLastOrder:async r=>(await ge.get("/customers/last-order",{params:{...r}})).data,getCustomerInfo:async()=>(await ge.get("/customers/info")).data,updateCustomerInfo:async r=>(await ge.patch("/customers/info",r)).data,updateSeller:async(r,t)=>(await ge.put(`/customers/update-seller/${r}`,{seller_id:t})).data,updateCapillarySalesLine:async(r,t)=>(await ge.put(`/customers/update-capillary-sales-line/${r}`,{capillary_sales_line_id:t})).data},BC={getCapillarySalesLines:async r=>(await ge.get("/capillary-sales-lines",{params:{...r}})).data,getCapillarySalesLineById:async r=>(await ge.get(`/capillary-sales-lines/${r}`)).data},Z8={getAllReturnRequests:async r=>(await ge.get("/return-requests",{params:{...r}})).data,getReturnRequestById:async r=>(await ge.get(`/return-requests/${r}`)).data},Iu={getWalletByCustomerId:async r=>(await ge.get(`/wallets/customer/${r}`)).data,getWalletList:async r=>(await ge.get("/wallets",{params:{...r}})).data,getWalletInfo:async()=>(await ge.get("/wallets/info")).data,getWalletById:async r=>(await ge.get(`/wallets/${r}`)).data,updateCustomerCreditCap:async(r,t)=>(await ge.put(`/wallets/customer/${r}`,{credit_cap:t})).data,addCustomerInitialBalance:async(r,t)=>(await ge.put(`/wallets/initial-balance/${r}`,t)).data,updateWallet:async(r,t)=>(await ge.put(`/wallets/${r}`,t)).data},ls={createOrder:async r=>(await ge.post("/orders",r)).data,getOrders:async r=>(await ge.get("/orders",{params:{...r}})).data,getOrderById:async r=>(await ge.get(`/orders/${r}`)).data,getOrderDetails:async r=>(await ge.get(`/orders/${r}`)).data,createOrderFromRequest:async r=>(await ge.post("/orders/from-request",r)).data,changeOrderStep:async(r,t)=>(await ge.put(`/orders/step/${r}`,t)).data,updateOrderHpCode:async(r,t)=>(await ge.patch(`/orders/${r}/hp-code`,{hp_invoice_code:t})).data,fulfillProduct:async(r,t)=>(await ge.put(`/orders/${r}/fulfill-product/${t}`)).data,changePaymentStatus:async(r,t)=>(await ge.put(`/orders/payment-status/${r}`,{paymentStatus:t})).data,archiveOrder:async(r,t)=>(await ge.put(`/orders/archive/${r}`,{archived:t})).data},K8={createDispatch:async r=>(await ge.post("/cargos/dispatch",r)).data,createReturn:async r=>(await ge.post("/cargos/return",r)).data},Q8={getTrucksByWarehouse:async r=>(await ge.get(`/trucks/warehouse/${r}`)).data},un={createPayment:async r=>(await ge.post("/payments",r)).data,getPayments:async r=>(await ge.get("/payments",{params:{...r}})).data,getPaymentById:async r=>(await ge.get(`/payments/${r}`)).data,zarinpalInitiateWalletTopup:async(r,t)=>(await ge.post("/payments/wallets/topup/zarinpal",{amount:r,description:t})).data,zibalInitiateWalletTopup:async(r,t)=>(await ge.post("/payments/wallets/topup/zibal",{amount:r,description:t})).data,zarinpalWalletTopupCallback:async(r,t,e)=>(await ge.get("/payments/wallets/topup/zarinpal/callback",{params:{payment_transaction_id:r,Authority:t,Status:e}})).data,zibalWalletTopupCallback:async(r,t)=>(await ge.get("/payments/wallets/topup/zibal/callback",{params:{payment_transaction_id:r,trackId:t}})).data,getInvoicePaymentInfo:async r=>(await ge.get(`/orders/${r}/invoice/payment-info`)).data,payInvoiceFromWallet:async(r,t)=>(await ge.post(`/orders/${r}/invoice/pay-from-wallet`,t)).data,initiateInvoiceZarinpalPayment:async(r,t)=>(await ge.post(`/payments/invoices/${r}/gateway/zarinpal`,{amount:t,gateway:"zarinpal"})).data,initiateInvoiceZibalPayment:async(r,t)=>(await ge.post(`/payments/invoices/${r}/gateway/zibal`,{amount:t,gateway:"zibal"})).data,invoiceZarinpalCallback:async(r,t,e,a)=>(await ge.get(`/payments/invoices/${r}/callback/zarinpal`,{params:{payment_transaction_id:t,Authority:e,Status:a}})).data,invoiceZibalCallback:async(r,t,e)=>(await ge.get(`/payments/invoices/${r}/callback/zibal`,{params:{payment_transaction_id:t,trackId:e}})).data,deletePayment:async r=>(await ge.delete(`/payments/${r}`)).data},Es={createTicket:async r=>(await ge.post("/tickets",r)).data,getTickets:async r=>(await ge.get("/tickets",{params:{...r}})).data,getTicketById:async r=>(await ge.get(`/tickets/${r}`)).data,getTicketMessages:async(r,t)=>(await ge.get(`/tickets/${r}/messages`,{params:{...t}})).data,replyTicket:async(r,t)=>(await ge.post(`/tickets/${r}/reply`,t)).data,assignTicket:async(r,t)=>{await ge.patch(`/tickets/${r}/assign`,{employee_id:t})},updateTicketStatus:async(r,t)=>{await ge.patch(`/tickets/${r}/status`,{status:t})}},Nu={getProfileDetails:async r=>(await ge.get(`/profiles/${r}`)).data.data[0],getByGroups:async r=>(await ge.get(`/profiles/get-by-groups/${r}`)).data,getProfileList:async()=>(await ge.get("/profiles")).data,getEmployees:async r=>(await ge.get("/profiles/employees",{params:r})).data,getNonEmployees:async r=>(await ge.get("/profiles/non-employees",{params:r})).data,updateNonEmployee:async(r,t)=>{await ge.put(`/profiles/non-employee/${r}`,t)},createEmployee:async r=>{await ge.post("/profiles",r)},updateEmployee:async(r,t)=>{await ge.put(`/profiles/${r}`,t)},getProfileInfo:async()=>(await ge.get("/profiles/info")).data,updateProfileInfo:async r=>(await ge.patch("/profiles/info",r)).data,getRoles:async()=>(await ge.get("/profiles/roles")).data},Iq={getPeopleInfo:async()=>(await ge.get("/people/info")).data,updatePeopleInfo:async r=>(await ge.patch("/people/info",r)).data},J8={getMyRequests:async(r=1,t=10)=>(await ge.get("/customer-requests",{params:{page:r,"page-size":t}})).data,getMyRequestById:async r=>(await ge.get(`/customer-requests/${r}`)).data},K4={getClients:async()=>(await ge.get("/clients")).data,getGroups:async()=>(await ge.get("/groups")).data,getGroupsWithClientId:async r=>(await ge.get(`/groups/client/${r}`)).data},_m={getAllEmployees:async()=>(await ge.get("/employees")).data,getEmployeeById:async r=>(await ge.get(`/employees/${r}`)).data,getEmployeeInfo:async()=>(await ge.get("/employees/info")).data,getSellers:async()=>(await ge.get("/employees/sellers")).data},du={getSellerReport:async()=>(await ge.get("/stats/seller-report")).data,getNegativeInventoryReport:async()=>(await ge.get("/stats/negative-inventory")).data,getActualCustomerDebtReport:async()=>(await ge.get("/stats/actual-customer-debt")).data,getReturnedOrdersReport:async()=>(await ge.get("/stats/returned-orders")).data,getReturnedProductsReport:async()=>(await ge.get("/stats/returned-products")).data,getInactiveCustomersReport:async()=>(await ge.get("/stats/inactive-customers")).data,getCustomersWithoutPurchaseReport:async()=>(await ge.get("/stats/customers-without-purchase")).data,getProductKardex:async r=>(await ge.get("/stats/product-kardex",{params:{...r}})).data},ez={getReceivings:async(r,t)=>(await ge.get(`/receivings/warehouse/${t}`,{params:{...r}})).data,getReceivingById:async r=>(await ge.get(`/receivings/${r}`)).data},tz={getLogs:async r=>(await ge.get("/logs",{params:{...r}})).data,getLogById:async r=>(await ge.get(`/logs/${r}`)).data},hS={getProducts:async r=>(await ge.get("/public/products",{params:{...r}})).data,getProductById:async r=>(await ge.get(`/public/products/${r}`)).data,getSpecialProducts:async r=>(await ge.get("/public/special-products",{params:{...r}})).data},qc={getMyCart:async()=>(await ge.get("/cart")).data,addCartItem:async r=>(await ge.post("/cart/items",r)).data,updateCartItem:async r=>(await ge.patch("/cart/items",r)).data,removeCartItem:async r=>{await ge.delete(`/cart/items/${r}`)},clearCart:async()=>{await ge.delete("/cart")},checkout:async r=>(await ge.post("/cart/checkout",r)).data},kg={createCheck:async r=>(await ge.post("/accountants/checks",r)).data,getChecks:async r=>(await ge.get("/accountants/checks",{params:r})).data,getCheckById:async r=>(await ge.get(`/accountants/checks/${r}`)).data,changeCheckStatus:async(r,t)=>{await ge.patch(`/accountants/checks/${r}/status`,{status:t})},deleteCheck:async r=>{await ge.delete(`/accountants/checks/${r}`)}},VC={createReminder:async r=>(await ge.post("/reminders",r)).data,getReminders:async r=>(await ge.get("/reminders",{params:r})).data,getReminderById:async r=>(await ge.get(`/reminders/${r}`)).data},fS={addFavoriteProduct:async r=>(await ge.post("/product-favorites/toggle",r)).data,getFavoriteProducts:async()=>(await ge.get("/product-favorites")).data},ku={uploadFiles:async r=>{const t=new FormData;return r.forEach(a=>{t.append("files",a)}),(await ge.post("/files",t,{headers:{"Content-Type":"multipart/form-data"}})).data}};function kq(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),c=d=>({ISFAHAN:"",TEHRAN:""})[d]||d,u=async()=>{if(t)try{s(!0),o("");const d=await BC.getCapillarySalesLineById(t);if(!d||!d.id)throw new Error("Invalid sales line data received");a(d)}catch(d){console.error("Error fetching sales line details:",d),o(d?.message||"     "),a(null)}finally{s(!1)}};return I.useEffect(()=>{t&&u()},[t]),t?n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-purple-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l&&!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l}),i.jsx("button",{onClick:u,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors mr-2",children:" "}),i.jsx("button",{onClick:()=>r("/manage/capillary-sales-lines"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"  "})]}):e?i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/capillary-sales-lines"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e?.title||" "}),i.jsx("p",{className:"text-gray-500",children:"  "})]}),i.jsxs("button",{onClick:u,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm",children:[i.jsx(Ca,{className:"w-4 h-4"}),i.jsx("span",{children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(ln,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("p",{className:"text-xl font-bold text-purple-600",children:[" ",e?.line_number??"N/A"]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(ln,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:c(e?.branch?.name||"")||" "})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(ln,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e?.created_at?_e(e.created_at):"N/A"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(ln,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-green-600",children:""})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(ln,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("div",{children:i.jsx("p",{className:"text-sm text-gray-900 leading-relaxed",children:e?.description||"   "})})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:"   "}),i.jsx("button",{onClick:()=>r("/manage/capillary-sales-lines"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"  "})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:"    "}),i.jsx("button",{onClick:()=>r("/manage/capillary-sales-lines"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"  "})]})}function $t({currentPage:r,totalPages:t,totalItems:e,itemsPerPage:a,onPageChange:n}){const s=(r-1)*a+1,l=Math.min(r*a,e),o=()=>{const u=[],d=[];for(let h=Math.max(2,r-2);h<=Math.min(t-1,r+2);h++)u.push(h);return r-2>2?d.push(1,"..."):d.push(1),d.push(...u),r+2<t-1?d.push("...",t):d.push(t),d};return t<=1?null:i.jsx("div",{className:"mt-6 bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between px-6 py-5 gap-4",children:[i.jsxs("div",{className:"text-base text-gray-700 font-medium",children:[" ",i.jsx("span",{className:"font-bold text-indigo-600",children:s})," "," ",i.jsx("span",{className:"font-bold text-indigo-600",children:l})," "," ",i.jsx("span",{className:"font-bold text-indigo-600",children:e})," "]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsxs("button",{onClick:()=>n(r-1),disabled:r===1,className:`
							flex items-center justify-center px-6 py-3 text-base font-bold rounded-xl transition-all duration-200 shadow-sm
							${r===1?"text-gray-400 bg-gray-100 cursor-not-allowed opacity-50":"text-white bg-gradient-to-l from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 hover:shadow-lg active:scale-95 transform"}
						`,children:[i.jsx(y8,{className:"w-5 h-5 ml-2"}),i.jsx("span",{children:" "})]}),i.jsx("div",{className:"flex items-center space-x-reverse space-x-1 bg-gray-50 p-1 rounded-xl",children:o().map((c,u)=>i.jsx("button",{onClick:()=>typeof c=="number"&&n(c),disabled:c==="...",className:`
									min-w-12 h-12 px-4 text-base font-bold rounded-lg transition-all duration-200
									${c===r?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg scale-105":c==="..."?"text-gray-400 cursor-default bg-transparent":"text-gray-700 bg-white hover:bg-indigo-50 hover:text-indigo-700 hover:shadow-md active:scale-95 transform"}
								`,children:c},u))}),i.jsxs("button",{onClick:()=>n(r+1),disabled:r===t,className:`
							flex items-center justify-center px-6 py-3 text-base font-bold rounded-xl transition-all duration-200 shadow-sm
							${r===t?"text-gray-400 bg-gray-100 cursor-not-allowed opacity-50":"text-white bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 hover:shadow-lg active:scale-95 transform"}
						`,children:[i.jsx("span",{children:" "}),i.jsx(x8,{className:"w-5 h-5 mr-2"})]})]})]})})}function Oq(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20);I.useEffect(()=>{p()},[u]);const p=async()=>{try{n(!0),l("");const v={page:u,"page-size":h},y=await BC.getCapillarySalesLines(v);e(y.data||[]),c(y.count||0)}catch(v){console.error("Error fetching sales lines:",v),l(v.response?.data?.message||"     ")}finally{n(!1)}},g=v=>{d(v)};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(ln,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o,"    "]})]})]})})}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-purple-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(v=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/capillary-sales-lines/${v.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:v.title}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800",children:[" ",v.line_number]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 max-w-xs truncate",children:v.description||"-"}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:y=>{y.stopPropagation(),r(`/manage/capillary-sales-lines/${v.id}`)},className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm font-semibold",children:""})})]},v.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(ln,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"   "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:g})]})}const Pq=r=>({STATUS_CHANGED:" ",DRIVER_CHANGED:" ",TRUCK_CHANGED:" ",WAREHOUSE_CHANGED:" ",DELIVERY_DATE_CHANGED:"  ",CREATED:" ",UPDATED:"",DELETED:" ",RESTORED:" "})[r||""]||" ",zq=r=>({STATUS_CHANGED:"bg-blue-100 text-blue-800",DRIVER_CHANGED:"bg-orange-100 text-orange-800",TRUCK_CHANGED:"bg-purple-100 text-purple-800",WAREHOUSE_CHANGED:"bg-teal-100 text-teal-800",DELIVERY_DATE_CHANGED:"bg-cyan-100 text-cyan-800",CREATED:"bg-green-100 text-green-800",UPDATED:"bg-gray-100 text-gray-800",DELETED:"bg-red-100 text-red-800",RESTORED:"bg-green-100 text-green-800"})[r||""]||"bg-gray-100 text-gray-800";function Bq(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState({page:1,"page-size":20});I.useEffect(()=>{g()},[h]);const g=async()=>{try{n(!0),l("");const b={page:h.page||o,"page-size":h["page-size"]||20,...h},N=await Gs.getCargoHistory(b);e(N.data||[]),d(N.count||0)}catch(b){console.error("Error fetching cargo history:",b),l(b.response?.data?.message||"    ")}finally{n(!1)}},v=b=>{p(N=>({...N,page:b})),c(b)},y=(b,N)=>{p(w=>({...w,[b]:N||void 0,page:1})),c(1)},x=()=>{let b=0;return h.cargo_id&&b++,h.employee_id&&b++,h.change_type&&b++,h.deleted_changed===!0&&b++,h.by_system!==void 0&&b++,h.created_at_min&&b++,h.created_at_max&&b++,b};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(nt,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"text",value:h.cargo_id||"",onChange:b=>y("cargo_id",b.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.change_type||"",onChange:b=>y("change_type",b.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"CREATED",children:" "}),i.jsx("option",{value:"STATUS_CHANGED",children:" "}),i.jsx("option",{value:"DRIVER_CHANGED",children:" "}),i.jsx("option",{value:"TRUCK_CHANGED",children:" "}),i.jsx("option",{value:"WAREHOUSE_CHANGED",children:" "}),i.jsx("option",{value:"DELIVERY_DATE_CHANGED",children:"  "}),i.jsx("option",{value:"UPDATED",children:""}),i.jsx("option",{value:"DELETED",children:" "}),i.jsx("option",{value:"RESTORED",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.by_system===void 0?"":h.by_system?"true":"false",onChange:b=>{b.target.value===""?y("by_system",void 0):y("by_system",b.target.value==="true")},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"true",children:""}),i.jsx("option",{value:"false",children:""})]})]})]}),x()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[x(),"  "]}),i.jsx("button",{onClick:()=>{p({page:1,"page-size":20}),c(1)},className:"text-sm text-blue-600 hover:text-blue-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(b=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/cargo-history/${b.id}`),children:[i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${zq(b.change_type)}`,children:Pq(b.change_type)})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:b.cargo_id?`#${b.new_cargo?.code||b.cargo?.code||b.cargo_id}`:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:b.date_after?_e(b.date_after):b.date_before?_e(b.date_before):"-"}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${b.by_system?"bg-blue-100 text-blue-800":"bg-indigo-100 text-indigo-800"}`,children:b.by_system?"":""})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(b.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:N=>{N.stopPropagation(),r(`/manage/cargo-history/${b.id}`)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-semibold",children:""})})]},b.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:x()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:h["page-size"]||20,totalPages:Math.ceil(u/(h["page-size"]||20)),onPageChange:v})]})}const fr={HOT:"HOT",COLD:"COLD"},wt={Seller:"SELLER",SalesManager:"SALES_MANAGER",Processing:"PROCESSING",Inventory:"INVENTORY",Accounting:"ACCOUNTING",Cargo:"CARGO",PartiallyDelivered:"PARTIALLY_DELIVERED",Delivered:"DELIVERED",PartiallyReturned:"PARTIALLY_RETURNED",Returned:"RETURNED"},Vq=r=>r?r===fr.HOT?"":"":"-",Hq=r=>r?r===fr.HOT?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800";function Gq(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState([]),[s,l]=I.useState(""),[o,c]=I.useState(!1),[u,d]=I.useState(""),[h,p]=I.useState(1),[g,v]=I.useState(0),[y]=I.useState(20),[x,b]=I.useState(""),[N,w]=I.useState("");I.useEffect(()=>{S()},[]),I.useEffect(()=>{s?T():(e([]),v(0))},[s]),I.useEffect(()=>{p(1)},[x,N]);const S=async()=>{try{c(!0),d("");const L=await Us.getWarehouses();if(Array.isArray(L)){n(L);const O=L.find(z=>z.name.toLowerCase().includes("")||z.name.toLowerCase().includes(""));O&&l(O.id)}else d("    ")}catch{d("   ")}finally{c(!1)}},T=async()=>{if(!s){e([]),v(0);return}try{c(!0),d("");const L=await _x.getCategoriesByWarehouse(s);let O=[];if(Array.isArray(L))O=L;else{d("    "),e([]),v(0);return}e(O),v(O.length)}catch(L){console.error("Error fetching categories:",L),d(L?.message||"    "),e([]),v(0)}finally{c(!1)}},A=L=>{p(L)},C=()=>{let L=0;return x&&L++,N&&L++,L},M=t.filter(L=>{if(x){const O=x.toLowerCase();if(!(L.title?.toLowerCase().includes(O)||L.code?.toString().includes(x)))return!1}return!(N&&L.temperature_type!==N)}),R=M.length,k=M.slice((h-1)*y,h*y);return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(As,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[R," ",C()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:s,onChange:L=>{l(L.target.value),p(1)},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[i.jsx("option",{value:"",children:" "}),a.map(L=>i.jsxs("option",{value:L.id,children:[L.name," (: ",L.code,")"]},L.id))]})]}),s&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:x,onChange:L=>b(L.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:N,onChange:L=>w(L.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:fr.HOT,children:""}),i.jsx("option",{value:fr.COLD,children:""})]})]})]}),C()>0&&s&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[C(),"  "]}),i.jsx("button",{onClick:()=>{b(""),w(""),p(1)},className:"text-sm text-pink-600 hover:text-pink-700 font-semibold",children:"  "})]})]}),u&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:u})}),o&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-pink-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!o&&s&&R>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:k.filter(L=>L&&L.id).map(L=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/categories/${L.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:L.title||" "}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:L.code??"N/A"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:L.priority??0}),i.jsx("td",{className:"px-4 py-4",children:L.temperature_type?i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Hq(L.temperature_type)}`,children:Vq(L.temperature_type)}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:L.parent?.title||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:L.children&&L.children.length>0?`${L.children.length} `:"-"}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:O=>{O.stopPropagation(),r(`/manage/categories/${L.id}`)},className:"px-3 py-1 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors text-sm font-semibold",children:""})})]},L.id))})]})})}),!o&&s&&R===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(As,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:C()>0?"      ":"  "})]}),!o&&!s&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(As,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"    "})]}),!o&&s&&R>0&&i.jsx($t,{currentPage:h,totalItems:R,itemsPerPage:y,totalPages:Math.ceil(R/y),onPageChange:A})]})}function Uq(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(null),[p,g]=I.useState(null),[v,y]=I.useState(null),[x,b]=I.useState(!1),N=async()=>{if(t)try{s(!0),o("");const C=await _x.getCategoryById(t);if(!C||!C.id)throw new Error("Invalid category data received");a(C);const M=C.temperature_type;M===fr.HOT||M==="HOT"?y(fr.HOT):M===fr.COLD||M==="COLD"?y(fr.COLD):y(null)}catch(C){console.error("Error fetching category details:",C),o(C?.message||"    "),a(null),y(null)}finally{s(!1)}};I.useEffect(()=>{t&&N()},[t]);const w=C=>{const M=C.target.files?.[0];M&&(h(M),g(null))},S=async()=>{if(d)try{u(!0);const C=await ku.uploadFiles([d]);C.length>0&&g(C[0])}catch{o("   ")}finally{u(!1)}},T=async()=>{if(!(!p||!t))try{u(!0),await _x.uploadCategoryImage(t,p.id),await N(),h(null),g(null)}catch{o("    ")}finally{u(!1)}},A=async()=>{if(!(!e||!t))try{b(!0),await _x.updateCategory(t,{temperature_type:v||null}),await N()}catch{o("    ")}finally{b(!1)}};return t?n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l&&!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l}),i.jsx("button",{onClick:N,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors mr-2",children:" "}),i.jsx("button",{onClick:()=>r("/manage/categories"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"  "})]}):e?i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/categories"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e?.title||" "}),i.jsx("p",{className:"text-gray-500",children:"   "})]}),i.jsxs("button",{onClick:N,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm",children:[i.jsx(Ca,{className:"w-4 h-4"}),i.jsx("span",{children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(As,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:e?.code??"N/A"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(As,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-xl font-bold text-purple-600",children:e?.priority??0})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(As,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e?.warehouse_id??"N/A"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(As,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-green-600",children:""})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.parent&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(As,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.parent?.title||" "})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.parent?.code??"N/A"})]}),i.jsx("button",{onClick:()=>r(`/manage/categories/${e.parent?.id}`),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold",children:"  "})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:i.jsx(I4,{className:"w-4 h-4 text-red-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-center space-x-reverse space-x-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"temperature_type",value:"HOT",checked:v===fr.HOT,onChange:()=>y(fr.HOT),className:"w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:" (HOT)"})]}),i.jsxs("label",{className:"flex items-center space-x-reverse space-x-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"temperature_type",value:"COLD",checked:v===fr.COLD,onChange:()=>y(fr.COLD),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:" /  (COLD)"})]}),i.jsxs("label",{className:"flex items-center space-x-reverse space-x-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"temperature_type",value:"",checked:v===null,onChange:()=>y(null),className:"w-4 h-4 text-gray-600 border-gray-300 focus:ring-gray-500"}),i.jsx("span",{className:"text-sm font-semibold text-gray-600",children:" "})]})]}),i.jsx("p",{className:"text-xs text-gray-500",children:'      " "  " "  '}),(()=>{if(!e)return!1;const C=e.temperature_type===fr.HOT?fr.HOT:e.temperature_type===fr.COLD?fr.COLD:null;return v!==C})()&&i.jsx("button",{onClick:A,disabled:x,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center space-x-reverse space-x-2 text-sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx(Ca,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(I4,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]})})]})]})]}),Array.isArray(e.children)&&e.children.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(As,{className:"w-4 h-4 text-green-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:[" (",e.children.length,")"]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.children.map(C=>!C||!C.id?null:i.jsx("div",{onClick:()=>r(`/manage/categories/${C.id}`),className:"bg-gray-50 rounded-lg p-4 border border-gray-200 cursor-pointer hover:bg-gray-100 hover:border-gray-300 hover:shadow-md transition-all",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:i.jsx(As,{className:"w-4 h-4 text-green-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:C.title||" "}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 text-xs text-gray-600",children:[i.jsxs("span",{children:[": ",C.code??"N/A"]}),i.jsx("span",{children:""}),i.jsxs("span",{children:[": ",C.priority??0]}),C.temperature_type&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx("span",{className:`font-semibold ${C.temperature_type===fr.HOT?"text-red-600":"text-blue-600"}`,children:C.temperature_type===fr.HOT?"":""})]})]})]})]})},C.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-cyan-50 flex items-center justify-center",children:i.jsx(Wx,{className:"w-4 h-4 text-cyan-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("input",{type:"file",id:"category-image",accept:"image/*",onChange:w,className:"hidden"}),i.jsx("label",{htmlFor:"category-image",className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-gray-400 transition-colors bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Rs,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:d?d.name:" "})]})})]}),d&&!p&&i.jsx("button",{onClick:S,disabled:c,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center space-x-reverse space-x-2 text-sm",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ca,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Rs,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})}),p&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-md flex items-center justify-center",children:i.jsx(Rs,{className:"w-3 h-3 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-xs text-gray-600",children:[p.name," (",p.size," )"]})]})]})}),i.jsx("button",{onClick:T,disabled:c,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center space-x-reverse space-x-2 text-sm",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ca,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Wx,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]})})]})]})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:"  "}),i.jsx("button",{onClick:()=>r("/manage/categories"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"  "})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:"   "}),i.jsx("button",{onClick:()=>r("/manage/categories"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"  "})]})}const Fq=[{value:"RECEIVED_BY_ACCOUNTING",label:"   "},{value:"DELIVERED_TO_PROCUREMENT",label:"  "},{value:"DELIVERED_TO_BANK",label:"  "},{value:"CLEARED",label:" "},{value:"RETURNED",label:" "}];function Yq({isOpen:r,onClose:t,onSuccess:e,checkId:a,currentStatus:n}){const[s,l]=I.useState(n),[o,c]=I.useState(!1),[u,d]=I.useState(""),h=async p=>{if(p.preventDefault(),d(""),s===n){t();return}try{c(!0),await kg.changeCheckStatus(a,s),e()}catch(g){console.error("Error changing check status:",g),d(g.response?.data?.message||"    .    .")}finally{c(!1)}};return r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:p=>{p.target===p.currentTarget&&t()},children:i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-6 h-6 text-gray-600"})})]}),u&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:u})}),i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsx("select",{value:s,onChange:p=>l(p.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:Fq.map(p=>i.jsx("option",{value:p.value,children:p.label},p.value))})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,disabled:o,className:"px-6 py-3 border-2 border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 font-semibold",children:""}),i.jsx("button",{type:"submit",disabled:o,className:"px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 disabled:opacity-50 transition-all font-semibold flex items-center space-x-reverse space-x-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsx("span",{children:""})})]})]})]})}):null}const Q4=r=>({SEPAH:" ",MELLI:" ",TEJARAT:" ",REFAH:" ",MASKAN:" ",KESHAVARZI:" ",SANAT_VA_MADAN:"   ",POST_BANK:" ",MELLAT:" ",SADERAT:" ",PARSIAN:" ",PASARGAD:" ",SAMAN:" ",EGHTESAD_NOVIN:"  ",DEY:" ",KARAFARIN:" ",SINA:" ",SARMAYEH:" ",SHAHR:" ",AYANDEH:" ",ANSAR:" ",GARDESHGARI:" ",HEKMAT_IRANIAN:"  ",MEHREGAN:" ",RESALAT:" ",KOSAR:" ",MIDDLE_EAST:" ",IRAN_ZAMIN:"  ",MEHR_EGHTESAD:"   ",TOSEE_TAAVON:"   ",NOOR:"  ",OTHER:""})[r]||r,Wq=r=>({RECEIVED_BY_ACCOUNTING:"   ",DELIVERED_TO_PROCUREMENT:"  ",DELIVERED_TO_BANK:"  ",CLEARED:" ",RETURNED:" "})[r]||r,$q=r=>({RECEIVED_BY_ACCOUNTING:"bg-blue-100 text-blue-800",DELIVERED_TO_PROCUREMENT:"bg-yellow-100 text-yellow-800",DELIVERED_TO_BANK:"bg-purple-100 text-purple-800",CLEARED:"bg-green-100 text-green-800",RETURNED:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800";function qq(){const{id:r}=sr(),t=Je(),[e,a]=I.useState(null),[n,s]=I.useState(!1),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(!1);I.useEffect(()=>{r&&p()},[r]);const p=async()=>{if(r)try{s(!0),o("");const y=await kg.getCheckById(r);a(y)}catch(y){console.error("Error fetching check details:",y),o(y.response?.data?.message||"    ")}finally{s(!1)}},g=async()=>{if(r&&confirm("         "))try{h(!0),o(""),await kg.deleteCheck(r),alert("    "),t("/manage/checks")}catch(y){console.error("Error deleting check:",y),o(y.response?.data?.message||"   ")}finally{h(!1)}},v=()=>{u(!1),p()};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l&&!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l}),i.jsx("button",{onClick:()=>t("/manage/checks"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]}):e?i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>t("/manage/checks"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" "}),i.jsxs("p",{className:"text-gray-500",children:[" : ",e.check_number]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-reverse space-x-2",children:[i.jsx(bu,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]}),i.jsxs("button",{onClick:g,disabled:d,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-reverse space-x-2 disabled:opacity-50",children:[i.jsx(xh,{className:"w-4 h-4"}),i.jsx("span",{children:d?"  ...":""})]})]})]})]}),l&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:l})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:ue(e.amount)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:e.check_number})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-sm font-semibold ${$q(e.status)}`,children:Wq(e.status)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.check_date)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.account_number})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Q4(e.issuer_bank)})]}),e.destination_bank&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Q4(e.destination_bank)})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[e.customer&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.updated_at)})]})]})]})]}),e.description&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.description})]}),e.image&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("img",{src:lr(e.image.thumbnail)||lr(e.image.url)||"",alt:"Check image",className:"max-w-full h-auto rounded-lg border border-gray-300 shadow-sm"})})]}),c&&e&&i.jsx(Yq,{isOpen:c,onClose:()=>u(!1),onSuccess:v,checkId:e.id,currentStatus:e.status})]}):null}var pN,J4;function Xq(){if(J4)return pN;J4=1,pN={toJalaali:t,toGregorian:e,isValidJalaaliDate:a,isLeapJalaaliYear:n,jalaaliMonthLength:s,jalCal:o,j2d:c,d2j:u,g2d:d,d2g:h,jalaaliToDateObject:g,jalaaliWeek:p};var r=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function t(x,b,N){return Object.prototype.toString.call(x)==="[object Date]"&&(N=x.getDate(),b=x.getMonth()+1,x=x.getFullYear()),u(d(x,b,N))}function e(x,b,N){return h(c(x,b,N))}function a(x,b,N){return x>=-61&&x<=3177&&b>=1&&b<=12&&N>=1&&N<=s(x,b)}function n(x){return l(x)===0}function s(x,b){return b<=6?31:b<=11||n(x)?30:29}function l(x){var b=r.length,N=r[0],w,S,T,A,C;if(x<N||x>=r[b-1])throw new Error("Invalid Jalaali year "+x);for(C=1;C<b&&(w=r[C],S=w-N,!(x<w));C+=1)N=w;return A=x-N,S-A<6&&(A=A-S+v(S+4,33)*33),T=y(y(A+1,33)-1,4),T===-1&&(T=4),T}function o(x,b){var N=r.length,w=x+621,S=-14,T=r[0],A,C,M,R,k,L,O;if(x<T||x>=r[N-1])throw new Error("Invalid Jalaali year "+x);for(O=1;O<N&&(A=r[O],C=A-T,!(x<A));O+=1)S=S+v(C,33)*8+v(y(C,33),4),T=A;return L=x-T,S=S+v(L,33)*8+v(y(L,33)+3,4),y(C,33)===4&&C-L===4&&(S+=1),R=v(w,4)-v((v(w,100)+1)*3,4)-150,k=20+S-R,b?{gy:w,march:k}:(C-L<6&&(L=L-C+v(C+4,33)*33),M=y(y(L+1,33)-1,4),M===-1&&(M=4),{leap:M,gy:w,march:k})}function c(x,b,N){var w=o(x,!0);return d(w.gy,3,w.march)+(b-1)*31-v(b,7)*(b-7)+N-1}function u(x){var b=h(x).gy,N=b-621,w=o(N,!1),S=d(b,3,w.march),T,A,C;if(C=x-S,C>=0){if(C<=185)return A=1+v(C,31),T=y(C,31)+1,{jy:N,jm:A,jd:T};C-=186}else N-=1,C+=179,w.leap===1&&(C+=1);return A=7+v(C,30),T=y(C,30)+1,{jy:N,jm:A,jd:T}}function d(x,b,N){var w=v((x+v(b-8,6)+100100)*1461,4)+v(153*y(b+9,12)+2,5)+N-34840408;return w=w-v(v(x+100100+v(b-8,6),100)*3,4)+752,w}function h(x){var b,N,w,S,T;return b=4*x+139361631,b=b+v(v(4*x+183187720,146097)*3,4)*4-3908,N=v(y(b,1461),4)*5+308,w=v(y(N,153),5)+1,S=y(v(N,153),12)+1,T=v(b,1461)-100100+v(8-S,6),{gy:T,gm:S,gd:w}}function p(x,b,N){var w=g(x,b,N).getDay(),S=w==6?0:-(w+1),T=6+S;return{saturday:u(c(x,b,N+S)),friday:u(c(x,b,N+T))}}function g(x,b,N,w,S,T,A){var C=e(x,b,N);return new Date(C.gy,C.gm-1,C.gd,w||0,S||0,T||0,A||0)}function v(x,b){return~~(x/b)}function y(x,b){return x-~~(x/b)*b}return pN}var ra=Xq();const eR=["","","","","","","","","","","",""],Zq=["","","","","","",""];function Ls({value:r,onChange:t,placeholder:e=" ",className:a=""}){const s=(()=>{const A=new Date;return ra.toJalaali(A)})(),[l,o]=I.useState(!1),[c,u]=I.useState(s.jy),[d,h]=I.useState(s.jm),[p,g]=I.useState(null);I.useEffect(()=>{if(r)try{const A=/^(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})$/,C=r.match(A);if(C){const M=parseInt(C[1]),R=parseInt(C[2]),k=parseInt(C[3]);if(M>=1300&&M<=1500&&R>=1&&R<=12&&k>=1&&k<=31){g({year:M,month:R,day:k}),u(M),h(R);return}}if(!r.includes("/")&&!r.includes("-")){const M=new Date(r);if(!isNaN(M.getTime())){const R=ra.toJalaali(M);g({year:R.jy,month:R.jm,day:R.jd}),u(R.jy),h(R.jm)}}}catch(A){console.error("Error parsing date:",A)}else{const A=new Date,C=ra.toJalaali(A);u(C.jy),h(C.jm)}},[r]);const v=(A,C)=>{const M=[31,31,31,31,31,31,30,30,30,30,30,29];return C===12&&y(A)?30:M[C-1]},y=A=>(A+2346)*683%2820<683,x=(A,C)=>ra.jalaaliToDateObject(A,C,1).getDay(),b=A=>{const C={year:c,month:d,day:A};g(C);const M=`${C.year}/${String(C.month).padStart(2,"0")}/${String(C.day).padStart(2,"0")}`;t(M),o(!1)},N=()=>{d===1?(h(12),u(c-1)):h(d-1)},w=()=>{d===12?(h(1),u(c+1)):h(d+1)},S=()=>p?`${p.day} ${eR[p.month-1]} ${p.year}`:"",T=()=>{const A=v(c,d),C=x(c,d),M=[];for(let R=0;R<C;R++)M.push(i.jsx("div",{className:"h-8"},`empty-${R}`));for(let R=1;R<=A;R++){const k=p&&p.year===c&&p.month===d&&p.day===R,L=(()=>{const O=new Date,z=ra.toJalaali(O);return z.jy===c&&z.jm===d&&z.jd===R})();M.push(i.jsx("button",{onClick:()=>b(R),className:`
						h-8 w-8 rounded-md text-xs font-medium transition-all duration-150
						hover:bg-gray-100
						${k?"bg-blue-600 text-white shadow-md hover:bg-blue-700":L?"bg-blue-100 text-blue-700 hover:bg-blue-200 font-bold":"text-gray-700 hover:bg-gray-100"}
					`,children:R},R))}return M};return i.jsxs("div",{className:`relative ${a}`,children:[i.jsxs("button",{type:"button",onClick:()=>o(!l),className:`
					w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent 
					transition-all duration-300 ease-in-out bg-gradient-to-r from-gray-50 to-white hover:from-gray-100 hover:to-gray-50 
					shadow-sm hover:shadow-md text-right flex items-center justify-between
					${l?"ring-2 ring-blue-500 border-transparent":""}
				`,children:[i.jsx("span",{className:p?"text-gray-900":"text-gray-500",children:S()||e}),i.jsx(Wr,{className:"w-5 h-5 text-gray-400"})]}),l&&i.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 z-50 overflow-hidden w-max min-w-[280px]",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-3 py-2 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:N,className:"w-7 h-7 bg-white/20 rounded-md flex items-center justify-center hover:bg-white/30 transition-colors",children:i.jsx(y8,{className:"w-3 h-3"})}),i.jsx("div",{className:"text-center",children:i.jsxs("h3",{className:"text-sm font-bold",children:[eR[d-1]," ",c]})}),i.jsx("button",{onClick:w,className:"w-7 h-7 bg-white/20 rounded-md flex items-center justify-center hover:bg-white/30 transition-colors",children:i.jsx(x8,{className:"w-3 h-3"})})]})}),i.jsxs("div",{className:"p-2",children:[i.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:Zq.map(A=>i.jsx("div",{className:"h-7 flex items-center justify-center text-xs font-semibold text-gray-500",children:A},A))}),i.jsx("div",{className:"grid grid-cols-7 gap-1",children:T()})]}),i.jsx("div",{className:"bg-gray-50 px-3 py-2 border-t border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>{const A=new Date,C=ra.toJalaali(A);u(C.jy),h(C.jm),b(C.jd)},className:"text-xs text-blue-600 hover:text-blue-800 transition-colors font-medium",children:""}),i.jsx("button",{onClick:()=>o(!1),className:"text-xs text-gray-600 hover:text-gray-800 transition-colors font-medium",children:""})]})})]}),l&&i.jsx("div",{className:"fixed inset-0 z-40 bg-black/10",onClick:()=>o(!1)})]})}const tR=()=>[{value:"SEPAH",label:" "},{value:"MELLI",label:" "},{value:"TEJARAT",label:" "},{value:"REFAH",label:" "},{value:"MASKAN",label:" "},{value:"KESHAVARZI",label:" "},{value:"SANAT_VA_MADAN",label:"   "},{value:"POST_BANK",label:" "},{value:"MELLAT",label:" "},{value:"SADERAT",label:" "},{value:"PARSIAN",label:" "},{value:"PASARGAD",label:" "},{value:"SAMAN",label:" "},{value:"EGHTESAD_NOVIN",label:"  "},{value:"DEY",label:" "},{value:"KARAFARIN",label:" "},{value:"SINA",label:" "},{value:"SARMAYEH",label:" "},{value:"SHAHR",label:" "},{value:"AYANDEH",label:" "},{value:"ANSAR",label:" "},{value:"GARDESHGARI",label:" "},{value:"HEKMAT_IRANIAN",label:"  "},{value:"MEHREGAN",label:" "},{value:"RESALAT",label:" "},{value:"KOSAR",label:" "},{value:"MIDDLE_EAST",label:" "},{value:"IRAN_ZAMIN",label:"  "},{value:"MEHR_EGHTESAD",label:"   "},{value:"TOSEE_TAAVON",label:"   "},{value:"NOOR",label:"  "},{value:"OTHER",label:""}];function Kq({isOpen:r,onClose:t,onSuccess:e}){const a=()=>{const A=new Date,C=ra.toJalaali(A);return`${C.jy}/${String(C.jm).padStart(2,"0")}/${String(C.jd).padStart(2,"0")}`},[n,s]=I.useState({check_date:a(),check_number:"",account_number:"",issuer_bank:"",amount:0,destination_bank:void 0,customer_id:void 0,description:void 0,image_id:void 0}),[l,o]=I.useState([]),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[p,g]=I.useState(""),[v,y]=I.useState(null);I.useEffect(()=>{r&&x()},[r]);const x=async()=>{try{const A=await gr.getAllCustomers();o(A.data||[])}catch(A){console.error("Error fetching customers:",A)}},b=A=>{if(!A||A.trim()==="")throw new Error("  ");const C=A.split("/");if(C.length!==3)throw new Error("   ");const M=parseInt(C[0]),R=parseInt(C[1]),k=parseInt(C[2]);if(isNaN(M)||isNaN(R)||isNaN(k)||M<1300||M>1500||R<1||R>12||k<1||k>31)throw new Error("    ");try{const L=ra.jalaaliToDateObject(M,R,k);if(!L||isNaN(L.getTime()))throw new Error("    ");const O=new Date;return L.setHours(O.getHours()),L.setMinutes(O.getMinutes()),L.setSeconds(O.getSeconds()),L.setMilliseconds(O.getMilliseconds()),L.toISOString()}catch(L){throw new Error("   : "+(L.message||"  "))}},N=async A=>{if(!(!A||A.length===0))try{h(!0);const C=A[0];let M;C.type.startsWith("image/")&&(M=URL.createObjectURL(C)),y({id:`${Date.now()}-${Math.random()}`,file:C,preview:M})}catch(C){console.error("Error processing file:",C)}finally{h(!1)}},w=async()=>{if(v)try{return(await ku.uploadFiles([v.file]))[0]?.id}catch(A){throw console.error("Error uploading file:",A),new Error("   ")}},S=()=>{v?.preview&&URL.revokeObjectURL(v.preview),y(null),s(A=>({...A,image_id:void 0}))},T=async A=>{if(A.preventDefault(),g(""),!n.check_number.trim()){g("     ");return}if(!n.account_number.trim()){g("     ");return}if(!n.issuer_bank){g("     ");return}if(n.amount<=0){g("     ");return}try{u(!0);let C;try{C=b(n.check_date)}catch(R){g(R.message||"   "),u(!1);return}let M=n.image_id;v&&!M&&(M=await w()),await kg.createCheck({...n,check_date:C,image_id:M}),e(),t(),s({check_date:a(),check_number:"",account_number:"",issuer_bank:"",amount:0,destination_bank:void 0,customer_id:void 0,description:void 0,image_id:void 0}),v?.preview&&URL.revokeObjectURL(v.preview),y(null)}catch(C){console.error("Error creating check:",C),g(C.response?.data?.message||"   .    .")}finally{u(!1)}};return r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-6 h-6 text-gray-600"})})]}),p&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:p})}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsx("input",{type:"text",value:n.check_number,onChange:A=>s(C=>({...C,check_number:A.target.value})),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsx("input",{type:"text",value:n.account_number,onChange:A=>s(C=>({...C,account_number:A.target.value})),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsxs("select",{value:n.issuer_bank,onChange:A=>s(C=>({...C,issuer_bank:A.target.value})),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:" "}),tR().map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:n.destination_bank||"",onChange:A=>s(C=>({...C,destination_bank:A.target.value||void 0})),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:" "}),tR().map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" () *"}),i.jsx("input",{type:"number",min:"0",step:"1",value:n.amount||"",onChange:A=>s(C=>({...C,amount:parseFloat(A.target.value)||0})),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsx(Ls,{value:n.check_date,onChange:A=>s(C=>({...C,check_date:A})),placeholder:" ",className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:n.customer_id||"",onChange:A=>s(C=>({...C,customer_id:A.target.value||void 0})),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:" "}),l.map(A=>i.jsxs("option",{value:A.id,children:[A.title," (: ",A.code,")"]},A.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("textarea",{value:n.description||"",onChange:A=>s(C=>({...C,description:A.target.value||void 0})),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),v?i.jsxs("div",{className:"relative",children:[v.preview?i.jsx("img",{src:v.preview,alt:"Check preview",className:"w-full h-48 object-contain rounded-lg border-2 border-gray-300"}):i.jsx("div",{className:"w-full h-48 bg-gray-100 rounded-lg border-2 border-gray-300 flex items-center justify-center",children:i.jsx("span",{className:"text-gray-600",children:"  "})}),i.jsx("button",{type:"button",onClick:S,className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:i.jsx(St,{className:"w-4 h-4"})})]}):i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:A=>N(A.target.files),className:"hidden",id:"check-image-upload"}),i.jsxs("label",{htmlFor:"check-image-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[i.jsx(Rs,{className:"w-8 h-8 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-600 font-semibold",children:"     "})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,disabled:c,className:"px-6 py-3 border-2 border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 font-semibold",children:""}),i.jsx("button",{type:"submit",disabled:c||d,className:"px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 disabled:opacity-50 transition-all font-semibold flex items-center space-x-reverse space-x-2",children:c||d?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsx("span",{children:" "})})]})]})]})}):null}const rR=r=>({SEPAH:" ",MELLI:" ",TEJARAT:" ",REFAH:" ",MASKAN:" ",KESHAVARZI:" ",SANAT_VA_MADAN:"   ",POST_BANK:" ",MELLAT:" ",SADERAT:" ",PARSIAN:" ",PASARGAD:" ",SAMAN:" ",EGHTESAD_NOVIN:"  ",DEY:" ",KARAFARIN:" ",SINA:" ",SARMAYEH:" ",SHAHR:" ",AYANDEH:" ",ANSAR:" ",GARDESHGARI:" ",HEKMAT_IRANIAN:"  ",MEHREGAN:" ",RESALAT:" ",KOSAR:" ",MIDDLE_EAST:" ",IRAN_ZAMIN:"  ",MEHR_EGHTESAD:"   ",TOSEE_TAAVON:"   ",NOOR:"  ",OTHER:""})[r]||r,Qq=r=>({RECEIVED_BY_ACCOUNTING:"   ",DELIVERED_TO_PROCUREMENT:"  ",DELIVERED_TO_BANK:"  ",CLEARED:" ",RETURNED:" "})[r]||r,Jq=r=>({RECEIVED_BY_ACCOUNTING:"bg-blue-100 text-blue-800",DELIVERED_TO_PROCUREMENT:"bg-yellow-100 text-yellow-800",DELIVERED_TO_BANK:"bg-purple-100 text-purple-800",CLEARED:"bg-green-100 text-green-800",RETURNED:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800";function eX(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState(!1),[g,v]=I.useState({page:1,"page-size":20}),[y,x]=I.useState([]);I.useEffect(()=>{b(),N()},[g]);const b=async()=>{try{n(!0),l("");const C=await kg.getChecks(g);e(C.data||[]),d(C.count||0)}catch(C){console.error("Error fetching checks:",C),l(C.response?.data?.message||"    ")}finally{n(!1)}},N=async()=>{try{const C=await gr.getAllCustomers();x(C.data||[])}catch(C){console.error("Error fetching customers:",C)}},w=C=>{v(M=>({...M,page:C})),c(C)},S=(C,M)=>{v(R=>({...R,[C]:M||void 0,page:1})),c(1)},T=()=>{p(!1),b()},A=()=>{let C=0;return g.check_number&&C++,g.account_number&&C++,g.issuer_bank&&C++,g.destination_bank&&C++,g.customer_id&&C++,g.check_date_min&&C++,g.check_date_max&&C++,g.amount_min&&C++,g.amount_max&&C++,C};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ot,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]}),i.jsxs("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 transition-all font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(Nl,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"text",value:g.check_number||"",onChange:C=>S("check_number",C.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"text",value:g.account_number||"",onChange:C=>S("account_number",C.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:g.issuer_bank||"",onChange:C=>S("issuer_bank",C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"SEPAH",children:" "}),i.jsx("option",{value:"MELLI",children:" "}),i.jsx("option",{value:"TEJARAT",children:" "}),i.jsx("option",{value:"MELLAT",children:" "}),i.jsx("option",{value:"SADERAT",children:" "}),i.jsx("option",{value:"PARSIAN",children:" "}),i.jsx("option",{value:"PASARGAD",children:" "}),i.jsx("option",{value:"SAMAN",children:" "}),i.jsx("option",{value:"OTHER",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:g.customer_id||"",onChange:C=>S("customer_id",C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:""}),y.map(C=>i.jsxs("option",{value:C.id,children:[C.title," (: ",C.code,")"]},C.id))]})]})]}),A()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[A(),"  "]}),i.jsx("button",{onClick:()=>{v({page:1,"page-size":20}),c(1)},className:"text-sm text-teal-600 hover:text-teal-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-teal-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/checks/${C.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:C.check_number}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.account_number}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:rR(C.issuer_bank)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.destination_bank?rR(C.destination_bank):"-"}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-emerald-600",children:ue(C.amount)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(C.check_date)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Jq(C.status)}`,children:Qq(C.status)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.customer_id?"":"-"}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:M=>{M.stopPropagation(),r(`/manage/checks/${C.id}`)},className:"px-3 py-1 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 transition-colors text-sm font-semibold",children:""})})]},C.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Ot,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:g["page-size"]||20,totalPages:Math.ceil(u/(g["page-size"]||20)),onPageChange:w}),h&&i.jsx(Kq,{isOpen:h,onClose:()=>p(!1),onSuccess:T})]})}function tX({isOpen:r,onClose:t,customerId:e,currentSellerId:a,onSuccess:n}){const[s,l]=I.useState([]),[o,c]=I.useState(a||""),[u,d]=I.useState(!1),[h,p]=I.useState(!1),[g,v]=I.useState("");I.useEffect(()=>{r&&(y(),c(a||""))},[r,a]);const y=async()=>{try{p(!0),v("");const b=await _m.getSellers();l(b||[])}catch(b){console.error("Error fetching sellers:",b),v(b.response?.data?.message||"    ")}finally{p(!1)}},x=async b=>{if(b.preventDefault(),v(""),!o){v("    ");return}try{d(!0),await gr.updateSeller(e,o),n(),t()}catch(N){console.error("Error updating seller:",N),v(N.response?.data?.message||"   .    .")}finally{d(!1)}};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-500"})})]}),i.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[g&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["  ",i.jsx("span",{className:"text-red-500",children:"*"})]}),h?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx(Ae,{className:"w-6 h-6 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600",children:"  ..."})]}):i.jsxs("select",{value:o,onChange:b=>c(b.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:" "}),s.map(b=>i.jsxs("option",{value:b.id,children:[b.profile.first_name," ",b.profile.last_name,b.capillary_sales_lines.length>0&&` -  ${b.capillary_sales_lines.map(N=>N.line_number).join(", ")}`]},b.id))]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:""}),i.jsx("button",{type:"submit",disabled:u||h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"  ...":""})]})]})]})}):null}function rX({isOpen:r,onClose:t,customerId:e,currentCapillarySalesLineId:a,onSuccess:n}){const[s,l]=I.useState([]),[o,c]=I.useState(a||""),[u,d]=I.useState(!1),[h,p]=I.useState(!1),[g,v]=I.useState("");I.useEffect(()=>{r&&(y(),c(a||""))},[r,a]);const y=async()=>{try{p(!0),v("");const b=await BC.getCapillarySalesLines({page:1,"page-size":1e3});l(b.data||[])}catch(b){console.error("Error fetching sales lines:",b),v(b.response?.data?.message||"     ")}finally{p(!1)}},x=async b=>{if(b.preventDefault(),v(""),!o){v("     ");return}try{d(!0),await gr.updateCapillarySalesLine(e,o),n(),t()}catch(N){console.error("Error updating capillary sales line:",N),v(N.response?.data?.message||"    .    .")}finally{d(!1)}};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"   "}),i.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-500"})})]}),i.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[g&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:g}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["   ",i.jsx("span",{className:"text-red-500",children:"*"})]}),h?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx(Ae,{className:"w-6 h-6 text-purple-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600",children:"  ..."})]}):i.jsxs("select",{value:o,onChange:b=>c(b.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"  "}),s.map(b=>i.jsxs("option",{value:b.id,children:[b.title," -  ",b.line_number]},b.id))]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:""}),i.jsx("button",{type:"submit",disabled:u||h,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"  ...":""})]})]})]})}):null}function aX(){const r=Je(),{id:t}=sr(),[e,a]=MC(),n=e.get("tab"),[s,l]=I.useState(n&&["details","orders","invoices","payments","wallet"].includes(n)?n:"details"),[o,c]=I.useState(null),[u,d]=I.useState(null),[h,p]=I.useState(null),[g,v]=I.useState(!0),[y,x]=I.useState(""),[b,N]=I.useState([]),[w,S]=I.useState(!1),[T,A]=I.useState(1),[C,M]=I.useState(0),[R,k]=I.useState([]),[L,O]=I.useState(!1),[z,U]=I.useState(1),[H,P]=I.useState(0),[F,Y]=I.useState([]),[X,q]=I.useState(!1),[G,$]=I.useState(""),[Z,te]=I.useState(1),[me,Ce]=I.useState(0),[Ve,Ee]=I.useState([]),[be,He]=I.useState(!1),[Se,Ie]=I.useState("simple"),[ft,le]=I.useState(!1),[ze,$e]=I.useState(!1),[ot,Rt]=I.useState(!1),[or,Qr]=I.useState(null),[Vr,gn]=I.useState(!1);I.useEffect(()=>{t&&(Il(),oa())},[t]),I.useEffect(()=>{t&&s==="orders"&&Ws()},[t,s,T]),I.useEffect(()=>{t&&s==="invoices"&&Zo()},[t,s,z]),I.useEffect(()=>{t&&s==="payments"&&kl()},[t,s,Z]),I.useEffect(()=>{t&&s==="wallet"&&Mi()},[t,s,Se]);const Il=async()=>{if(t)try{v(!0),x("");const oe=await gr.getCustomerById(t);c(oe)}catch(oe){console.error("Error fetching customer details:",oe),x("    ")}finally{v(!1)}},oa=async()=>{if(t)try{const oe=await Iu.getWalletByCustomerId(t);d(oe),p(oe?.id||null)}catch(oe){console.error("Error fetching wallet:",oe)}},Ws=async()=>{if(t)try{S(!0);const oe={page:T,"page-size":10,customer_id:t},Et=await ls.getOrders(oe);N(Et.data||[]),M(Et.count||0)}catch(oe){console.error("Error fetching orders:",oe)}finally{S(!1)}},Zo=async()=>{if(t)try{O(!0);const oe={page:z,"page-size":10,customer_id:t},Et=await Ig.getInvoices(oe);k(Et.data||[]),P(Et.count||0)}catch(oe){console.error("Error fetching invoices:",oe)}finally{O(!1)}},kl=async()=>{if(t)try{q(!0),$("");const oe={page:Z,"page-size":10,customer_id:t},Et=await un.getPayments(oe);Y(Et?.data||[]),Ce(Et?.count||0)}catch(oe){console.error("Error fetching payments:",oe),$(oe?.message||"   "),Y([]),Ce(0)}finally{q(!1)}},Mi=async()=>{if(t)try{He(!0);const oe=Se==="detailed"?{view:"detailed"}:void 0,Et=await gr.getCustomerTransactions(t,oe);Ee(Et.transactions||[])}catch(oe){console.error("Error fetching transactions:",oe),Ee([])}finally{He(!1)}},Ko=oe=>({PERSONAL:"",CORPORATE:""})[oe]||oe,Qo=oe=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[oe]||oe,Yu=async()=>{if(or)try{gn(!0),await un.deletePayment(or),await kl(),h&&await oa(),Rt(!1),Qr(null)}catch(oe){console.error("Error deleting payment:",oe),alert(oe.response?.data?.message||"   ")}finally{gn(!1)}},vf=oe=>{Qr(oe),Rt(!0)},$s=()=>{Rt(!1),Qr(null)},xa=oe=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[oe]||oe,Pn=oe=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[oe]||oe,ca=oe=>({CASH:"bg-green-100 text-green-800",DEPOSIT_TO_ACCOUNT:"bg-blue-100 text-blue-800",CHEQUE:"bg-yellow-100 text-yellow-800",CREDIT:"bg-purple-100 text-purple-800",WALLET:"bg-indigo-100 text-indigo-800",ONLINE:"bg-cyan-100 text-cyan-800"})[oe]||"bg-gray-100 text-gray-800",xf=oe=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:" ",INVENTORY:"",ACCOUNTING:"",CARGO:"",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",PARTIALLY_RETURNED:" ",RETURNED:" "})[oe]||oe,yf=oe=>({SELLER:"bg-blue-100 text-blue-800",SALES_MANAGER:"bg-purple-100 text-purple-800",PROCESSING:"bg-yellow-100 text-yellow-800",INVENTORY:"bg-indigo-100 text-indigo-800",ACCOUNTING:"bg-green-100 text-green-800",CARGO:"bg-teal-100 text-teal-800",PARTIALLY_DELIVERED:"bg-orange-100 text-orange-800",DELIVERED:"bg-emerald-100 text-emerald-800",PARTIALLY_RETURNED:"bg-red-100 text-red-800",RETURNED:"bg-gray-100 text-gray-800"})[oe]||"bg-gray-100 text-gray-800";I.useEffect(()=>{const oe=e.get("tab");oe&&["details","orders","invoices","payments","wallet"].includes(oe)&&oe!==s&&l(oe)},[e,s]);const Wu=oe=>{l(oe),a({tab:oe})},Ol=[{id:"details",label:"",icon:_t},{id:"orders",label:"",icon:nt},{id:"invoices",label:"",icon:Ba},{id:"payments",label:"",icon:Ot},{id:"wallet",label:" ",icon:wr}];return g?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):y||!o?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:y||"  "}),i.jsx("button",{onClick:()=>r("/manage/customers"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/customers"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.title}),i.jsxs("p",{className:"text-gray-500",children:[": ",o.code,"  ",Ko(o.type)]})]}),i.jsx("div",{className:"flex items-center space-x-reverse space-x-2",children:o.deleted?i.jsxs("span",{className:"inline-flex items-center rounded-lg px-3 py-1.5 text-sm font-semibold bg-red-100 text-red-800",children:[i.jsx(xi,{className:"w-4 h-4 ml-1.5"})," "]}):o.locked?i.jsxs("span",{className:"inline-flex items-center rounded-lg px-3 py-1.5 text-sm font-semibold bg-orange-100 text-orange-800",children:[i.jsx(iS,{className:"w-4 h-4 ml-1.5"})," "]}):i.jsxs("span",{className:"inline-flex items-center rounded-lg px-3 py-1.5 text-sm font-semibold bg-green-100 text-green-800",children:[i.jsx(us,{className:"w-4 h-4 ml-1.5"}),""]})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 mb-6 overflow-hidden",children:[i.jsx("div",{className:"border-b border-gray-200",children:i.jsx("div",{className:"flex space-x-reverse space-x-1 p-2",children:Ol.map(oe=>{const Et=oe.icon;return i.jsxs("button",{onClick:()=>Wu(oe.id),className:`flex items-center space-x-reverse space-x-2 px-4 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 ${s===oe.id?"bg-emerald-600 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[i.jsx(Et,{className:"w-4 h-4"}),i.jsx("span",{children:oe.label})]},oe.id)})})}),i.jsxs("div",{className:"p-6",children:[s==="details"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:o.code})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Ko(o.type)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Qo(o.category)})]}),u&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:`text-xl font-bold ${(u.actual_balance??u.balance)>=0?"text-green-600":"text-red-600"}`,children:ue(u.actual_balance??u.balance)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.phone||" "})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.address||" "})]})]})]}),u&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:`text-xl font-bold ${u.balance>=0?"text-green-600":"text-red-600"}`,children:ue(u.balance)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:`text-xl font-bold ${(u.actual_balance??u.balance)>=0?"text-green-600":"text-red-600"}`,children:ue(u.actual_balance??u.balance)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:ue(u.credit_cap)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"  "}),i.jsx("p",{className:`text-xl font-bold ${(u.actual_credit??u.balance-u.credit_cap)>=0?"text-green-600":"text-red-600"}`,children:ue(u.actual_credit??u.balance-u.credit_cap)})]})]}),(u.pending_cheques_count??0)>0&&i.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-3",children:[i.jsx(Ot,{className:"w-4 h-4 text-orange-600"}),i.jsx("h4",{className:"font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[u.pending_cheques_count," "]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"  "}),i.jsx("p",{className:"text-sm font-bold text-orange-600",children:ue(u.pending_cheques_total??0)})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("button",{onClick:()=>le(!0),className:"px-3 py-1.5 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(bu,{className:"w-4 h-4"}),i.jsx("span",{children:""})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"   "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.seller?`${o.seller.profile.first_name} ${o.seller.profile.last_name}`:" "})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("button",{onClick:()=>$e(!0),className:"px-3 py-1.5 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors text-sm font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(bu,{className:"w-4 h-4"}),i.jsx("span",{children:""})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o.capillary_sales_line?o.capillary_sales_line.title:" "})]})]}),o.people&&o.people.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(cn,{className:"w-4 h-4 text-indigo-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:[" (",o.people.length,")"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.people.map(oe=>i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:[oe.profile.first_name," ",oe.profile.last_name]}),i.jsxs("p",{className:"text-xs text-gray-600",children:[oe.profile.mobile,"  ",oe.title]})]},oe.id))})]})]}),s==="orders"&&i.jsx("div",{className:"space-y-4",children:w?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"})}):b.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"  "})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3",children:b.map(oe=>i.jsx("div",{onClick:()=>r(`/manage/orders/${oe.id}`),className:"bg-white border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[" #",oe.code]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_e(oe.created_at)})]}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold ${yf(oe.step)}`,children:xf(oe.step)})]})},oe.id))}),C>10&&i.jsx($t,{currentPage:T,totalPages:Math.ceil(C/10),totalItems:C,itemsPerPage:10,onPageChange:A})]})}),s==="invoices"&&i.jsx("div",{className:"space-y-4",children:L?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"})}):R.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ba,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"  "})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3",children:R.map(oe=>i.jsx("div",{onClick:()=>r(`/manage/invoices/${oe.id}`),className:"bg-white border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[" #",oe.code]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[_e(oe.date)," "," ",ue(oe.amount)]})]}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold ${oe.payment_status==="PAID"?"bg-green-100 text-green-800":oe.payment_status==="PARTIALLY_PAID"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:xa(oe.payment_status)})]})},oe.id))}),H>10&&i.jsx($t,{currentPage:z,totalPages:Math.ceil(H/10),totalItems:H,itemsPerPage:10,onPageChange:U})]})}),s==="payments"&&i.jsx("div",{className:"space-y-4",children:X?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"})}):G?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ot,{className:"w-16 h-16 text-red-300 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600 font-semibold",children:G}),i.jsx("button",{onClick:kl,className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:" "})]}):F.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ot,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"  "})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-3",children:F.map(oe=>i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{onClick:()=>r(`/manage/payments/${oe.id}`),className:"flex-1 cursor-pointer",children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[" #",oe.code]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_e(oe.date)})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold ${ca(oe.method)}`,children:Pn(oe.method)}),i.jsx("button",{onClick:Et=>{Et.stopPropagation(),vf(oe.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:" ",children:i.jsx(xh,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:ue(oe.amount)})]}),oe.cheque_due_date&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"  "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(oe.cheque_due_date)})]})]}),oe.description&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500",children:""}),i.jsx("p",{className:"text-sm text-gray-900 mt-1",children:oe.description})]})]},oe.id))}),me>10&&i.jsx($t,{currentPage:Z,totalPages:Math.ceil(me/10),totalItems:me,itemsPerPage:10,onPageChange:te})]})}),s==="wallet"&&i.jsxs("div",{className:"space-y-6",children:[u&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"   "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:`text-xl font-bold ${u.balance>=0?"text-green-600":"text-red-600"}`,children:ue(u.balance)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:`text-xl font-bold ${(u.actual_balance??u.balance)>=0?"text-green-600":"text-red-600"}`,children:ue(u.actual_balance??u.balance)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:ue(u.credit_cap)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"  "}),i.jsx("p",{className:`text-xl font-bold ${(u.actual_credit??u.balance-u.credit_cap)>=0?"text-green-600":"text-red-600"}`,children:ue(u.actual_credit??u.balance-u.credit_cap)})]})]}),(u.pending_cheques_count??0)>0&&i.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-3",children:[i.jsx(Ot,{className:"w-4 h-4 text-orange-600"}),i.jsx("h4",{className:"font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[u.pending_cheques_count," "]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"  "}),i.jsx("p",{className:"text-sm font-bold text-orange-600",children:ue(u.pending_cheques_total??0)})]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 bg-white rounded-xl border border-gray-200 p-3",children:[i.jsxs("button",{onClick:()=>Ie("simple"),className:`flex-1 px-4 py-2.5 rounded-lg font-semibold text-sm transition-all ${Se==="simple"?"bg-emerald-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(wr,{className:"w-4 h-4 inline ml-2"})," "]}),i.jsxs("button",{onClick:()=>Ie("detailed"),className:`flex-1 px-4 py-2.5 rounded-lg font-semibold text-sm transition-all ${Se==="detailed"?"bg-emerald-600 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(Pr,{className:"w-4 h-4 inline ml-2"}),"  "]})]}),Se==="simple"&&i.jsx(i.Fragment,{children:be?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"})}):Ve.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"   "})]}):i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right font-bold text-gray-900 text-sm",children:"#"}),i.jsx("th",{className:"px-4 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"px-4 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"px-4 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"px-4 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"px-4 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"px-4 py-3 text-right font-bold text-gray-900 text-sm",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:Ve.map((oe,Et)=>{const Jr=oe.type==="PAYMENT",xs=oe.type==="RETURN_FROM_PURCHASE",Ga=!Jr&&oe.amount?Math.abs(oe.amount):null,ys=Jr&&oe.amount?Math.abs(oe.amount):null,Ri=mr=>mr==="PAYMENT"?"":mr==="INVOICE"||mr==="PURCHASE"?"":mr==="RETURN_FROM_PURCHASE"?"":mr==="SELL"?"":mr||"";return i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 font-semibold text-right",children:Et+1}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ${Jr?"bg-green-100 text-green-800":xs?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:Ri(oe.type)})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-semibold text-right",children:oe.code||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 text-right font-medium whitespace-nowrap",children:_e(oe.date)}),i.jsx("td",{className:"px-4 py-3 text-sm text-red-600 font-semibold text-right",children:Ga?ue(Ga):"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-green-700 font-semibold text-right",children:ys?ue(ys):"-"}),i.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right",children:oe.remaining!==void 0?i.jsx("span",{className:oe.remaining<0?"text-red-600":oe.remaining>0?"text-blue-600":"text-gray-900",children:ue(oe.remaining)}):"-"})]},oe.id||Et)})})]})})})}),Se==="detailed"&&i.jsx(i.Fragment,{children:be?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"})}):Ve.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Pr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"  "})]}):i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full table-fixed",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-12 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:"#"}),i.jsx("th",{className:"w-24 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"w-20 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"w-40 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"px-3 py-3 text-right font-bold text-gray-900 text-sm",children:" /  "}),i.jsx("th",{className:"w-28 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"w-36 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"w-40 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"w-40 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:""}),i.jsx("th",{className:"w-40 px-3 py-3 text-right font-bold text-gray-900 text-sm",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:Ve.map((oe,Et)=>{const Jr=oe.type==="PAYMENT",xs=oe.type==="RETURN_FROM_PURCHASE",Ga=!Jr&&oe.amount?Math.abs(oe.amount):null,ys=Jr&&oe.amount?Math.abs(oe.amount):null,Ri=Dr=>Dr==="PAYMENT"?"":Dr==="INVOICE"||Dr==="PURCHASE"?"":Dr==="RETURN_FROM_PURCHASE"?"":Dr==="SELL"?"":Dr||"",mr=oe.products;return mr&&mr.length>0?mr.map((Dr,$u)=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[$u===0&&i.jsxs(i.Fragment,{children:[i.jsx("td",{rowSpan:mr.length,className:"px-3 py-3 text-sm text-gray-700 font-semibold text-right",children:Et+1}),i.jsx("td",{rowSpan:mr.length,className:"px-3 py-3 text-right",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-semibold ${Jr?"bg-green-100 text-green-800":xs?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:Ri(oe.type)})}),i.jsx("td",{rowSpan:mr.length,className:"px-3 py-3 text-sm text-gray-900 font-semibold text-right",children:oe.code||"-"}),i.jsx("td",{rowSpan:mr.length,className:"px-3 py-3 text-sm text-gray-700 text-right font-medium whitespace-nowrap",children:_e(oe.date)}),i.jsx("td",{rowSpan:mr.length,className:"px-3 py-3 text-sm text-red-600 font-semibold text-right tabular-nums",children:Ga?ue(Ga):"-"}),i.jsx("td",{rowSpan:mr.length,className:"px-3 py-3 text-sm text-green-700 font-semibold text-right tabular-nums",children:ys?ue(ys):"-"}),i.jsx("td",{rowSpan:mr.length,className:"px-3 py-3 text-sm font-bold text-right tabular-nums",children:oe.remaining!==void 0?i.jsx("span",{className:oe.remaining<0?"text-red-600":oe.remaining>0?"text-blue-600":"text-gray-900",children:ue(oe.remaining)}):"-"})]}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 text-right",children:Dr.product_title||"-"}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 text-right tabular-nums",children:Dr.net_weight?`${Dr.net_weight} `:"-"}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 font-semibold text-right tabular-nums",children:Dr.price?ue(Dr.price):"-"})]},`${oe.id||Et}-${$u}`)):i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 font-semibold text-right",children:Et+1}),i.jsx("td",{className:"px-3 py-3 text-right",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-semibold ${Jr?"bg-green-100 text-green-800":xs?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:Ri(oe.type)})}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 font-semibold text-right",children:oe.code||"-"}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 text-right font-medium whitespace-nowrap",children:_e(oe.date)}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 text-right",children:Jr?oe.description||"-":oe.product_title||oe.title||oe.description||"-"}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 text-right tabular-nums",children:oe.net_weight?`${oe.net_weight} `:"-"}),i.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 font-semibold text-right tabular-nums",children:oe.price?ue(oe.price):"-"}),i.jsx("td",{className:"px-3 py-3 text-sm text-red-600 font-semibold text-right tabular-nums",children:Ga?ue(Ga):"-"}),i.jsx("td",{className:"px-3 py-3 text-sm text-green-700 font-semibold text-right tabular-nums",children:ys?ue(ys):"-"}),i.jsx("td",{className:"px-3 py-3 text-sm font-bold text-right tabular-nums",children:oe.remaining!==void 0?i.jsx("span",{className:oe.remaining<0?"text-red-600":oe.remaining>0?"text-blue-600":"text-gray-900",children:ue(oe.remaining)}):"-"})]},oe.id||Et)})})]})})})})]})]})]}),t&&i.jsxs(i.Fragment,{children:[i.jsx(tX,{isOpen:ft,onClose:()=>le(!1),customerId:t,currentSellerId:o.seller?.id,onSuccess:()=>{Il(),le(!1)}}),i.jsx(rX,{isOpen:ze,onClose:()=>$e(!1),customerId:t,currentCapillarySalesLineId:o.capillary_sales_line?.id,onSuccess:()=>{Il(),$e(!1)}})]}),ot&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:$s,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:Vr,children:i.jsx(St,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mx-auto mb-4",children:i.jsx(xh,{className:"w-8 h-8 text-red-600"})}),i.jsx("p",{className:"text-gray-700 text-center mb-2",children:"         "}),i.jsx("p",{className:"text-sm text-gray-500 text-center",children:"            ."})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("button",{onClick:$s,disabled:Vr,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-semibold disabled:opacity-50",children:""}),i.jsx("button",{onClick:Yu,disabled:Vr,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold disabled:opacity-50 flex items-center justify-center space-x-reverse space-x-2",children:Vr?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(xh,{className:"w-5 h-5"}),i.jsx("span",{children:""})]})})]})]})})]})}function nX({request:r,isOpen:t,onClose:e,onSuccess:a}){const[n,s]=I.useState(null),[l,o]=I.useState([]),[c,u]=I.useState(""),[d,h]=I.useState(!0),[p,g]=I.useState(new Map),[v,y]=I.useState(""),[x,b]=I.useState(!1),[N,w]=I.useState(!1),[S,T]=I.useState("");I.useEffect(()=>{t&&r&&(A(),C(),M())},[t,r]);const A=async()=>{if(r.customer.id)try{const O=await gr.getCustomerById(r.customer.id);s(O),O.people&&O.people.length>0&&u(O.people[0].id)}catch(O){console.error("Error fetching customer details:",O),T("    ")}},C=async()=>{try{const O=r.request_items.map(U=>U.product_id),z=[];for(const U of O)try{const H=await Oo.getProductById(U);z.push(H)}catch(H){console.error(`Error fetching product ${U}:`,H)}o(z)}catch(O){console.error("Error fetching products:",O)}},M=()=>{const O=new Map;r.request_items.forEach(z=>{O.set(z.product_id,{selected:!0,isOrdered:!0})}),g(O)},R=(O,z)=>{g(U=>{const H=new Map(U),P=H.get(O)||{selected:!1};return H.set(O,{selected:!P.selected,isOrdered:z}),H})},k=(O,z)=>{g(U=>{const H=new Map(U),P=H.get(O)||{selected:!0};return H.set(O,{selected:P.selected,isOrdered:z}),H})},L=async()=>{if(!c){T("     ");return}if(!n){T("   ");return}try{w(!0),T("");const O=[],z=[];r.request_items.forEach(F=>{const Y=p.get(F.product_id);if(!Y||!Y.selected)return;const X=l.find(q=>q.id===F.product_id);X&&(Y.isOrdered?O.push({id:F.product_id,price:F.online_price||X.online_price||0,weight:F.weight,sec_unit_amount:F.weight,retail_price:X.retail_price||0,wholesale_price:X.wholesale_price||0,online_price:F.online_price||X.online_price||0,inventory_net_weight:X.net_weight||0}):z.push({id:F.product_id,price:F.online_price||X.online_price||0,weight:F.weight,locked:X.locked||!1,not_purchased_reason:v||"OTHER",retail_price:X.retail_price||0,wholesale_price:X.wholesale_price||0,online_price:F.online_price||X.online_price||0}))});const U=O.length>0;if(U&&O.length===0){T("          ");return}if(!U&&z.length===0){T("         ");return}const H={customer_request_id:r.id,customer_id:r.customer.id,person_id:c,bought:U,not_purchased_reason:U?void 0:v||"OTHER",ordered_basket:U&&O.length>0?O:void 0,failed_basket:!U||z.length>0?z:void 0,address:r.address||void 0},P=await ls.createOrderFromRequest(H);a(P.id),e()}catch(O){console.error("Error creating order:",O),T(O.response?.data?.message||"   ")}finally{w(!1)}};return t?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx(Ir,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"   "})]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[S&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-600",children:S})}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-3",children:[i.jsx(_t,{className:"w-5 h-5 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-gray-900",children:" "})]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[r.customer.title||""," - : ",r.customer.code]})]}),n&&n.people&&n.people.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsx("select",{value:c,onChange:O=>u(O.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:n.people.map(O=>i.jsxs("option",{value:O.id,children:[O.profile.first_name," ",O.profile.last_name," -"," ",O.profile.mobile]},O.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"  *"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsxs("label",{className:"flex items-center space-x-reverse space-x-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"bought",checked:d===!0,onChange:()=>h(!0),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-sm text-gray-700",children:" "})]}),i.jsxs("label",{className:"flex items-center space-x-reverse space-x-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"bought",checked:d===!1,onChange:()=>h(!1),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-sm text-gray-700",children:" "})]})]})]}),!d&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),i.jsxs("select",{value:v,onChange:O=>y(O.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:" "}),i.jsx("option",{value:"PRICE_TOO_HIGH",children:" "}),i.jsx("option",{value:"NOT_AVAILABLE",children:" "}),i.jsx("option",{value:"OLD_PRICE",children:" "}),i.jsx("option",{value:"MARKET_LOCKED",children:" "}),i.jsx("option",{value:"OTHER",children:""})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[i.jsx(nt,{className:"w-5 h-5 ml-2 text-orange-600"})," (",r.request_items.length,")"]}),i.jsx("div",{className:"space-y-3",children:r.request_items.map((O,z)=>{l.find(F=>F.id===O.product_id);const U=p.get(O.product_id),H=U?.selected??!0,P=U?.isOrdered??!0;return i.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-all",children:i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 flex-1",children:[i.jsx("input",{type:"checkbox",checked:H,onChange:()=>R(O.product_id,P),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-semibold text-gray-900",children:[O.product_title," (: ",O.product_code,")"]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[": ",O.weight.toLocaleString("fa-IR"),"  - :"," ",O.online_price?.toLocaleString("fa-IR")||""," ",""]})]})]}),d&&H&&i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsxs("button",{onClick:()=>k(O.product_id,!0),className:`px-3 py-1 rounded-lg text-sm font-semibold transition-colors ${P?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[i.jsx(ci,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsxs("button",{onClick:()=>k(O.product_id,!1),className:`px-3 py-1 rounded-lg text-sm font-semibold transition-colors ${P?"bg-gray-100 text-gray-600":"bg-red-100 text-red-800"}`,children:[i.jsx(xi,{className:"w-4 h-4 inline ml-1"}),""]})]})]})},O.product_id)})})]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 p-6 border-t border-gray-200 sticky bottom-0 bg-white",children:[i.jsx("button",{onClick:e,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:""}),i.jsx("button",{onClick:L,disabled:N,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center space-x-reverse space-x-2",children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})})]})]})}):null}function sX(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(!1);I.useEffect(()=>{t&&d()},[t]);const d=async()=>{if(t)try{s(!0),o("");const A=await Gs.getCustomerRequestById(t);a(A)}catch(A){console.error("Error fetching customer request details:",A),o("    ")}finally{s(!1)}},h=A=>({PENDING:" ",APPROVED:" ",REJECTED:" ",CONVERTED_TO_ORDER:"  "})[A]||A,p=A=>{switch(A){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"CONVERTED_TO_ORDER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},g=A=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[A]||A,v=A=>({PENDING:" ",CONFIRMED:" ",PREPARING:"  ",READY:"",DELIVERED:"  ",CANCELLED:" "})[A]||A,y=A=>({PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PREPARING:"bg-purple-100 text-purple-800",READY:"bg-green-100 text-green-800",DELIVERED:"bg-emerald-100 text-emerald-800",CANCELLED:"bg-red-100 text-red-800"})[A]||"bg-gray-100 text-gray-800",x=A=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[A]||A,b=A=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[A]||"bg-gray-100 text-gray-800",N=A=>({AT_INVENTORY:" ",FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   "})[A]||A;if(n)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]});if(l||!e)return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/customer-requests"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]});const w=e.total_price||0,S=e.freight_cost||0,T=w+S;return i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/customer-requests"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"  "}),i.jsxs("p",{className:"text-gray-500",children:[" :"," ",i.jsx("span",{className:"font-semibold text-gray-700",children:e.code})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${p(e.status)}`,children:h(e.status)}),e.status==="PENDING"&&i.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm",children:[i.jsx(Ir,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-yellow-50 flex items-center justify-center",children:i.jsx(Ch,{className:"w-4 h-4 text-yellow-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:h(e.status)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:ue(w)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(kr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ue(S)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-2xl font-bold text-orange-600",children:ue(T)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.title||""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.code})]}),e.customer.phone&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.phone})]}),e.customer.address&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.address})]}),e.representative_name&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.representative_name})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(Wr,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.code})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:g(e.payment_method)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.request_items.length," "]})]}),e.address&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.address})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-orange-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:["  (",e.request_items.length,")"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:" ()"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:e.request_items.map((A,C)=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:A.product_code}),i.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:A.product_title}),i.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[A.weight.toLocaleString("fa-IR")," "]}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:ue(A.online_price)}),i.jsx("td",{className:"px-4 py-3 text-sm font-bold text-green-700 text-center",children:ue(A.total_price)})]},A.product_id))}),i.jsx("tfoot",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("td",{colSpan:4,className:"px-4 py-3 text-right text-sm font-bold",children:" :"}),i.jsx("td",{className:"px-4 py-3 text-sm font-bold text-green-700 text-center",children:ue(w)})]})})]})})]}),e.orders&&e.orders.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Ir,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:["  (",e.orders.length,")"]})]}),i.jsx("div",{className:"space-y-4",children:e.orders.map((A,C)=>{const M=A.ordered_basket.reduce((L,O)=>L+O.price*(O.fulfilled_weight||O.weight),0),R=A.ordered_basket.reduce((L,O)=>L+(O.fulfilled_weight||0),0),k=A.ordered_basket.reduce((L,O)=>L+O.weight,0);return i.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-600 flex items-center justify-center",children:i.jsx(Ir,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-base font-bold text-gray-900",children:[" #",C+1]}),i.jsxs("p",{className:"text-xs text-gray-600",children:["ID: ",A.id.slice(0,8),"..."]})]})]}),i.jsx("button",{onClick:()=>r(`/manage/orders/${A.id}`),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs font-semibold",children:""})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-xs font-semibold ${y(A.step)}`,children:v(A.step)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-xs font-semibold ${b(A.payment_status)}`,children:x(A.payment_status)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:N(A.delivery_method)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(A.created_at)})]}),A.delivery_date&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(A.delivery_date)})]}),A.address&&i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:A.address})]})]}),i.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[i.jsxs("p",{className:"text-xs font-semibold text-gray-700 mb-3",children:["  (",A.ordered_basket.length," )"]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[k.toLocaleString("fa-IR")," "]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"  "}),i.jsxs("p",{className:"text-sm font-bold text-green-700",children:[R.toLocaleString("fa-IR")," "]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"text-sm font-bold text-blue-700",children:ue(M)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsxs("p",{className:"text-sm font-bold text-purple-700",children:[k>0?Math.round(R/k*100):0,"%"]})]})]})]}),i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"  "}),i.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:A.ordered_basket.map((L,O)=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-3 py-2 text-xs font-medium text-gray-900",children:L.product_title}),i.jsxs("td",{className:"px-3 py-2 text-xs text-gray-700",children:[L.weight.toLocaleString("fa-IR")," "]}),i.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:L.fulfilled_weight?`${L.fulfilled_weight.toLocaleString("fa-IR")} `:"-"}),i.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:ue(L.online_price)}),i.jsx("td",{className:"px-3 py-2 text-xs font-bold text-green-700",children:ue(L.price*(L.fulfilled_weight||L.weight))}),i.jsx("td",{className:"px-3 py-2",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-lg text-xs font-semibold ${L.fulfilled?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:L.fulfilled?" ":" "})})]},L.product_id))})]})})]},A.id)})})]}),e&&i.jsx(nX,{request:e,isOpen:c,onClose:()=>u(!1),onSuccess:A=>{r(`/manage/orders/${A}`)}})]})}const iX=r=>({PENDING:" ",APPROVED:" ",REJECTED:" ",CONVERTED_TO_ORDER:"  "})[r]||r,lX=r=>({PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",CONVERTED_TO_ORDER:"bg-blue-100 text-blue-800"})[r]||"bg-gray-100 text-gray-800",oX=r=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[r]||r,cX=r=>({CASH:"bg-green-100 text-green-800",DEPOSIT_TO_ACCOUNT:"bg-blue-100 text-blue-800",CHEQUE:"bg-yellow-100 text-yellow-800",CREDIT:"bg-purple-100 text-purple-800",WALLET:"bg-indigo-100 text-indigo-800",ONLINE:"bg-cyan-100 text-cyan-800"})[r]||"bg-gray-100 text-gray-800";function uX(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState(""),[x,b]=I.useState(""),[N,w]=I.useState([]);I.useEffect(()=>{S(),T()},[o]),I.useEffect(()=>{c(1),S()},[p,v,x]);const S=async()=>{try{n(!0),l("");const M=await Gs.getCustomerRequests(o,h);if(M&&M.data&&Array.isArray(M.data)){let R=M.data;if(p){const k=p.toLowerCase();R=R.filter(L=>L.customer?.title?.toLowerCase().includes(k)||L.customer?.code?.toString().includes(p)||L.code?.toString().includes(p)||L.representative_name?.toLowerCase().includes(k))}v&&(R=R.filter(k=>k.status===v)),x&&(R=R.filter(k=>k.customer?.id===x)),e(R),d(M.count)}else console.error("Invalid response structure:",M),l("   ")}catch(M){console.error("Error fetching customer requests:",M),l(M.response?.data?.message||"     ")}finally{n(!1)}},T=async()=>{try{const M=await gr.getAllCustomers();w(M.data||[])}catch(M){console.error("Error fetching customers:",M)}},A=M=>{c(M)},C=()=>{let M=0;return p&&M++,v&&M++,x&&M++,M};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(nt,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:M=>g(M.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:M=>y(M.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"PENDING",children:" "}),i.jsx("option",{value:"APPROVED",children:" "}),i.jsx("option",{value:"REJECTED",children:" "}),i.jsx("option",{value:"CONVERTED_TO_ORDER",children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:x,onChange:M=>b(M.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:[i.jsx("option",{value:"",children:""}),N.map(M=>i.jsxs("option",{value:M.id,children:[M.title," (: ",M.code,")"]},M.id))]})]})]}),C()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[C(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),b(""),c(1)},className:"text-sm text-amber-600 hover:text-amber-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-amber-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(M=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/customer-requests/${M.id}`),children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:["#",M.code]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:M.customer?.title||` ${M.customer?.code}`}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:M.representative_name||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-emerald-600",children:ue(M.total_price)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${cX(M.payment_method)}`,children:oX(M.payment_method)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${lX(M.status)}`,children:iX(M.status)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(M.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:R=>{R.stopPropagation(),r(`/manage/customer-requests/${M.id}`)},className:"px-3 py-1 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 transition-colors text-sm font-semibold",children:""})})]},M.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:C()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:h,totalPages:Math.ceil(u/h),onPageChange:A})]})}const dX=r=>({INDIVIDUAL:"",COMPANY:"",PERSONAL:"",CORPORATE:""})[r]||r,hX=r=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[r]||r;function fX(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState(""),[x,b]=I.useState(""),[N,w]=I.useState("");I.useEffect(()=>{S()},[u]),I.useEffect(()=>{d(1),S()},[p,v,x,N]);const S=async()=>{try{n(!0),l("");const C={page:u,"page-size":h};p&&(C.title=p),v&&(C.type=v),x&&(C.category=x),N!==""&&(C.deleted=N==="true");const M=await gr.getAllCustomers(C);e(M.data||[]),c(M.count||0)}catch(C){console.error("Error fetching customers:",C),l(C.response?.data?.message||"    ")}finally{n(!1)}},T=C=>{d(C)},A=()=>{let C=0;return p&&C++,v&&C++,x&&C++,N!==""&&C++,C};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(cn,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o,"   ",A()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:C=>g(C.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:C=>y(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"INDIVIDUAL",children:""}),i.jsx("option",{value:"COMPANY",children:""}),i.jsx("option",{value:"PERSONAL",children:""}),i.jsx("option",{value:"CORPORATE",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:x,onChange:C=>b(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"RESTAURANT",children:""}),i.jsx("option",{value:"HOTEL",children:""}),i.jsx("option",{value:"CHAIN_STORE",children:" "}),i.jsx("option",{value:"GOVERNMENTAL",children:""}),i.jsx("option",{value:"FAST_FOOD",children:" "}),i.jsx("option",{value:"CHARITY",children:""}),i.jsx("option",{value:"BUTCHER",children:""}),i.jsx("option",{value:"WHOLESALER",children:""}),i.jsx("option",{value:"FELLOW",children:""}),i.jsx("option",{value:"CATERING",children:""}),i.jsx("option",{value:"KEBAB",children:""}),i.jsx("option",{value:"DISTRIBUTOR",children:""}),i.jsx("option",{value:"HOSPITAL",children:""}),i.jsx("option",{value:"FACTORY",children:""}),i.jsx("option",{value:"OTHER",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:N,onChange:C=>w(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"false",children:""}),i.jsx("option",{value:"true",children:" "})]})]})]}),A()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[A(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),b(""),w(""),d(1)},className:"text-sm text-blue-600 hover:text-blue-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/customers/${C.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:C.title}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.code}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:dX(C.type)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:hX(C.category)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.phone||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 max-w-xs truncate",children:C.address||"-"}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[C.deleted?i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:" "}):i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:""}),C.locked&&i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:" "})]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(C.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:M=>{M.stopPropagation(),r(`/manage/customers/${C.id}`)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-semibold",children:""})})]},C.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(cn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:A()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:T})]})}const pX=r=>({INDIVIDUAL:"",COMPANY:"",PERSONAL:"",CORPORATE:""})[r]||r,gX=r=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[r]||r;function mX(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(0),[h,p]=I.useState(1),[g]=I.useState(20),[v,y]=I.useState(""),[x,b]=I.useState(""),[N,w]=I.useState("");I.useEffect(()=>{S()},[h]),I.useEffect(()=>{p(1),S()},[v,x,N]);const S=async()=>{try{n(!0),l("");const C={page:h,"page-size":g};v&&(C.title=v),x&&(C.type=x),N&&(C.category=N);const M=await gr.getCustomersByDebt(C);d(M.metadata?.total_debt||0),e(M.data||[]),c(M.count||0)}catch(C){console.error("Error fetching customers by debt:",C),l(C.response?.data?.message||"     ")}finally{n(!1)}},T=C=>{p(C)},A=()=>{let C=0;return v&&C++,x&&C++,N&&C++,C};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(gl,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o,"  ",A()>0&&" ( )"]})]})]})}),u>0&&i.jsx("div",{className:"mb-6 bg-gradient-to-r from-red-50 to-orange-50 rounded-lg border-2 border-red-200 p-4",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center",children:i.jsx(gl,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-1",children:"  "}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:ue(u)})]})]})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:v,onChange:C=>y(C.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:x,onChange:C=>b(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"INDIVIDUAL",children:""}),i.jsx("option",{value:"COMPANY",children:""}),i.jsx("option",{value:"PERSONAL",children:""}),i.jsx("option",{value:"CORPORATE",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:N,onChange:C=>w(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"RESTAURANT",children:""}),i.jsx("option",{value:"HOTEL",children:""}),i.jsx("option",{value:"CHAIN_STORE",children:" "}),i.jsx("option",{value:"GOVERNMENTAL",children:""}),i.jsx("option",{value:"FAST_FOOD",children:" "}),i.jsx("option",{value:"CHARITY",children:""}),i.jsx("option",{value:"BUTCHER",children:""}),i.jsx("option",{value:"WHOLESALER",children:""}),i.jsx("option",{value:"FELLOW",children:""}),i.jsx("option",{value:"CATERING",children:""}),i.jsx("option",{value:"KEBAB",children:""}),i.jsx("option",{value:"DISTRIBUTOR",children:""}),i.jsx("option",{value:"HOSPITAL",children:""}),i.jsx("option",{value:"FACTORY",children:""}),i.jsx("option",{value:"OTHER",children:""})]})]})]}),A()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[A(),"  "]}),i.jsx("button",{onClick:()=>{y(""),b(""),w(""),p(1)},className:"text-sm text-red-600 hover:text-red-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-red-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(C=>i.jsxs("tr",{className:"hover:bg-red-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/customers/${C.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:C.title}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.code}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:pX(C.type)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:gX(C.category)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"text-sm font-bold text-red-600",children:C.wallet?ue(C.wallet.balance||0):"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.phone||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 max-w-xs truncate",children:C.address||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(C.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:M=>{M.stopPropagation(),r(`/manage/customers/${C.id}`)},className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-semibold",children:""})})]},C.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(gl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:A()>0?"      ":"   "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:h,totalItems:o,itemsPerPage:g,totalPages:Math.ceil(o/g),onPageChange:T})]})}const vX=r=>({PERSONAL:"",CORPORATE:""})[r]||r,xX=r=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[r]||r,yX=r=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:"  ",INVENTORY:"",ACCOUNTING:"",CARGO:"  ",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",PARTIALLY_RETURNED:" ",RETURNED:" "})[r]||r,bX=r=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[r]||r;function _X(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState(""),[x,b]=I.useState("");I.useEffect(()=>{N()},[u]),I.useEffect(()=>{d(1),N()},[p,v,x]);const N=async()=>{try{n(!0),l("");const T={page:u,"page-size":h};p&&(T.title=p),v&&(T.type=v),x&&(T.category=x);const A=await gr.getCustomersByLastOrder(T);e(A.data||[]),c(A.count||0)}catch(T){console.error("Error fetching customers by last order:",T),l(T.response?.data?.message||"    ")}finally{n(!1)}},w=T=>{d(T)},S=()=>{let T=0;return p&&T++,v&&T++,x&&T++,T};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(sS,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o," ",S()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:T=>g(T.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:T=>y(T.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"INDIVIDUAL",children:""}),i.jsx("option",{value:"COMPANY",children:""}),i.jsx("option",{value:"PERSONAL",children:""}),i.jsx("option",{value:"CORPORATE",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:x,onChange:T=>b(T.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"RESTAURANT",children:""}),i.jsx("option",{value:"HOTEL",children:""}),i.jsx("option",{value:"CHAIN_STORE",children:" "}),i.jsx("option",{value:"GOVERNMENTAL",children:""}),i.jsx("option",{value:"FAST_FOOD",children:" "}),i.jsx("option",{value:"CHARITY",children:""}),i.jsx("option",{value:"BUTCHER",children:""}),i.jsx("option",{value:"WHOLESALER",children:""}),i.jsx("option",{value:"FELLOW",children:""}),i.jsx("option",{value:"CATERING",children:""}),i.jsx("option",{value:"KEBAB",children:""}),i.jsx("option",{value:"DISTRIBUTOR",children:""}),i.jsx("option",{value:"HOSPITAL",children:""}),i.jsx("option",{value:"FACTORY",children:""}),i.jsx("option",{value:"OTHER",children:""})]})]})]}),S()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[S(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),b(""),d(1)},className:"text-sm text-green-600 hover:text-green-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-green-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/customers/${T.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:T.title}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.code}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:vX(T.type)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:xX(T.category)})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-700",children:T.wallet?i.jsxs("div",{children:[i.jsx("div",{className:T.wallet.balance&&T.wallet.balance<0?"text-red-600":"text-gray-700",children:ue(T.wallet.balance||0)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[":"," ",ue(T.wallet.credit_cap||0)]})]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.last_order?i.jsxs("span",{className:"font-semibold text-green-600",children:["#",T.last_order.code]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-emerald-600",children:T.last_order?ue(T.last_order.total_amount||0):"-"}),i.jsx("td",{className:"px-4 py-4",children:T.last_order?i.jsxs("div",{className:"space-y-1",children:[i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:yX(T.last_order.step)}),i.jsx("br",{}),i.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 mt-1",children:bX(T.last_order.payment_status)})]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.last_order?_e(T.last_order.created_date):"-"}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsxs("div",{className:"flex items-center justify-center space-x-reverse space-x-2",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),r(`/manage/customers/${T.id}`)},className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm font-semibold",children:""}),T.last_order&&i.jsxs("button",{onClick:A=>{A.stopPropagation(),r(`/manage/orders/${T.last_order.id}`)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-semibold flex items-center",children:[i.jsx(Ir,{className:"w-3 h-3 ml-1"}),""]})]})})]},T.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(sS,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:S()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:w})]})}var pS=function(r,t){return pS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])},pS(r,t)};function rz(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pS(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var gS=function(){return gS=Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++){e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},gS.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mS=function(r,t){return mS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])},mS(r,t)};function re(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");mS(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var NX=(function(){function r(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return r})(),jX=(function(){function r(){this.browser=new NX,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return r})(),pt=new jX;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(pt.wxa=!0,pt.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?pt.worker=!0:!pt.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(pt.node=!0,pt.svgSupported=!0):wX(navigator.userAgent,pt);function wX(r,t){var e=t.browser,a=r.match(/Firefox\/([\d.]+)/),n=r.match(/MSIE\s([\d.]+)/)||r.match(/Trident\/.+?rv:(([\d.]+))/),s=r.match(/Edge?\/([\d.]+)/),l=/micromessenger/i.test(r);a&&(e.firefox=!0,e.version=a[1]),n&&(e.ie=!0,e.version=n[1]),s&&(e.edge=!0,e.version=s[1],e.newEdge=+s[1].split(".")[0]>18),l&&(e.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!e.ie&&!e.edge,t.pointerEventsSupported="onpointerdown"in window&&(e.edge||e.ie&&+e.version>=11);var o=t.domSupported=typeof document<"u";if(o){var c=document.documentElement.style;t.transform3dSupported=(e.ie&&"transition"in c||e.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in c)&&!("OTransition"in c),t.transformSupported=t.transform3dSupported||e.ie&&+e.version>=9}}var HC=12,az="sans-serif",jl=HC+"px "+az,SX=20,CX=100,TX="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function AX(r){var t={};if(typeof JSON>"u")return t;for(var e=0;e<r.length;e++){var a=String.fromCharCode(e+32),n=(r.charCodeAt(e)-SX)/CX;t[a]=n}return t}var EX=AX(TX),pn={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:(function(){var r,t;return function(e,a){if(!r){var n=pn.createCanvas();r=n&&n.getContext("2d")}if(r)return t!==a&&(t=r.font=a||jl),r.measureText(e);e=e||"",a=a||jl;var s=/((?:\d+)?\.?\d*)px/.exec(a),l=s&&+s[1]||HC,o=0;if(a.indexOf("mono")>=0)o=l*e.length;else for(var c=0;c<e.length;c++){var u=EX[e[c]];o+=u==null?l:u*l}return{width:o}}})(),loadImage:function(r,t,e){var a=new Image;return a.onload=t,a.onerror=e,a.src=r,a}};function nz(r){for(var t in pn)r[t]&&(pn[t]=r[t])}var sz=ds(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(r,t){return r["[object "+t+"]"]=!0,r},{}),iz=ds(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(r,t){return r["[object "+t+"Array]"]=!0,r},{}),Xh=Object.prototype.toString,db=Array.prototype,DX=db.forEach,MX=db.filter,GC=db.slice,RX=db.map,aR=(function(){}).constructor,a0=aR?aR.prototype:null,UC="__proto__",LX=2311;function FC(){return LX++}function hb(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];typeof console<"u"&&console.error.apply(console,r)}function Oe(r){if(r==null||typeof r!="object")return r;var t=r,e=Xh.call(r);if(e==="[object Array]"){if(!bh(r)){t=[];for(var a=0,n=r.length;a<n;a++)t[a]=Oe(r[a])}}else if(iz[e]){if(!bh(r)){var s=r.constructor;if(s.from)t=s.from(r);else{t=new s(r.length);for(var a=0,n=r.length;a<n;a++)t[a]=r[a]}}}else if(!sz[e]&&!bh(r)&&!ju(r)){t={};for(var l in r)r.hasOwnProperty(l)&&l!==UC&&(t[l]=Oe(r[l]))}return t}function rt(r,t,e){if(!Ue(t)||!Ue(r))return e?Oe(t):r;for(var a in t)if(t.hasOwnProperty(a)&&a!==UC){var n=r[a],s=t[a];Ue(s)&&Ue(n)&&!de(s)&&!de(n)&&!ju(s)&&!ju(n)&&!vS(s)&&!vS(n)&&!bh(s)&&!bh(n)?rt(n,s,e):(e||!(a in r))&&(r[a]=Oe(t[a]))}return r}function fb(r,t){for(var e=r[0],a=1,n=r.length;a<n;a++)e=rt(e,r[a],t);return e}function ie(r,t){if(Object.assign)Object.assign(r,t);else for(var e in t)t.hasOwnProperty(e)&&e!==UC&&(r[e]=t[e]);return r}function Ge(r,t,e){for(var a=gt(t),n=0,s=a.length;n<s;n++){var l=a[n];(e?t[l]!=null:r[l]==null)&&(r[l]=t[l])}return r}var IX=pn.createCanvas;function tt(r,t){if(r){if(r.indexOf)return r.indexOf(t);for(var e=0,a=r.length;e<a;e++)if(r[e]===t)return e}return-1}function YC(r,t){var e=r.prototype;function a(){}a.prototype=t.prototype,r.prototype=new a;for(var n in e)e.hasOwnProperty(n)&&(r.prototype[n]=e[n]);r.prototype.constructor=r,r.superClass=t}function yr(r,t,e){if(r="prototype"in r?r.prototype:r,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var a=Object.getOwnPropertyNames(t),n=0;n<a.length;n++){var s=a[n];s!=="constructor"&&(e?t[s]!=null:r[s]==null)&&(r[s]=t[s])}else Ge(r,t,e)}function Aa(r){return!r||typeof r=="string"?!1:typeof r.length=="number"}function B(r,t,e){if(r&&t)if(r.forEach&&r.forEach===DX)r.forEach(t,e);else if(r.length===+r.length)for(var a=0,n=r.length;a<n;a++)t.call(e,r[a],a,r);else for(var s in r)r.hasOwnProperty(s)&&t.call(e,r[s],s,r)}function pe(r,t,e){if(!r)return[];if(!t)return pb(r);if(r.map&&r.map===RX)return r.map(t,e);for(var a=[],n=0,s=r.length;n<s;n++)a.push(t.call(e,r[n],n,r));return a}function ds(r,t,e,a){if(r&&t){for(var n=0,s=r.length;n<s;n++)e=t.call(a,e,r[n],n,r);return e}}function Ct(r,t,e){if(!r)return[];if(!t)return pb(r);if(r.filter&&r.filter===MX)return r.filter(t,e);for(var a=[],n=0,s=r.length;n<s;n++)t.call(e,r[n],n,r)&&a.push(r[n]);return a}function Fo(r,t,e){if(r&&t){for(var a=0,n=r.length;a<n;a++)if(t.call(e,r[a],a,r))return r[a]}}function gt(r){if(!r)return[];if(Object.keys)return Object.keys(r);var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(e);return t}function kX(r,t){for(var e=[],a=2;a<arguments.length;a++)e[a-2]=arguments[a];return function(){return r.apply(t,e.concat(GC.call(arguments)))}}var we=a0&&Le(a0.bind)?a0.call.bind(a0.bind):kX;function et(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){return r.apply(this,t.concat(GC.call(arguments)))}}function de(r){return Array.isArray?Array.isArray(r):Xh.call(r)==="[object Array]"}function Le(r){return typeof r=="function"}function je(r){return typeof r=="string"}function qx(r){return Xh.call(r)==="[object String]"}function xt(r){return typeof r=="number"}function Ue(r){var t=typeof r;return t==="function"||!!r&&t==="object"}function vS(r){return!!sz[Xh.call(r)]}function Xa(r){return!!iz[Xh.call(r)]}function ju(r){return typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.ownerDocument=="object"}function Nm(r){return r.colorStops!=null}function lz(r){return r.image!=null}function oz(r){return Xh.call(r)==="[object RegExp]"}function Ta(r){return r!==r}function ga(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0,a=r.length;e<a;e++)if(r[e]!=null)return r[e]}function Me(r,t){return r??t}function fn(r,t,e){return r??t??e}function pb(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return GC.apply(r,t)}function jm(r){if(typeof r=="number")return[r,r,r,r];var t=r.length;return t===2?[r[0],r[1],r[0],r[1]]:t===3?[r[0],r[1],r[2],r[1]]:r}function Ea(r,t){if(!r)throw new Error(t)}function Dn(r){return r==null?null:typeof r.trim=="function"?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var cz="__ec_primitive__";function Og(r){r[cz]=!0}function bh(r){return r[cz]}var OX=(function(){function r(){this.data={}}return r.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},r.prototype.has=function(t){return this.data.hasOwnProperty(t)},r.prototype.get=function(t){return this.data[t]},r.prototype.set=function(t,e){return this.data[t]=e,this},r.prototype.keys=function(){return gt(this.data)},r.prototype.forEach=function(t){var e=this.data;for(var a in e)e.hasOwnProperty(a)&&t(e[a],a)},r})(),uz=typeof Map=="function";function PX(){return uz?new Map:new OX}var dz=(function(){function r(t){var e=de(t);this.data=PX();var a=this;t instanceof r?t.each(n):t&&B(t,n);function n(s,l){e?a.set(s,l):a.set(l,s)}}return r.prototype.hasKey=function(t){return this.data.has(t)},r.prototype.get=function(t){return this.data.get(t)},r.prototype.set=function(t,e){return this.data.set(t,e),e},r.prototype.each=function(t,e){this.data.forEach(function(a,n){t.call(e,a,n)})},r.prototype.keys=function(){var t=this.data.keys();return uz?Array.from(t):t},r.prototype.removeKey=function(t){this.data.delete(t)},r})();function De(r){return new dz(r)}function Ah(r,t){for(var e=new r.constructor(r.length+t.length),a=0;a<r.length;a++)e[a]=r[a];for(var n=r.length,a=0;a<t.length;a++)e[a+n]=t[a];return e}function wm(r,t){var e;if(Object.create)e=Object.create(r);else{var a=function(){};a.prototype=r,e=new a}return t&&ie(e,t),e}function WC(r){var t=r.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function Te(r,t){return r.hasOwnProperty(t)}function vr(){}var mg=180/Math.PI,zX=Number.EPSILON||Math.pow(2,-52);const BX=Object.freeze(Object.defineProperty({__proto__:null,EPSILON:zX,HashMap:dz,RADIAN_TO_DEGREE:mg,assert:Ea,bind:we,clone:Oe,concatArray:Ah,createCanvas:IX,createHashMap:De,createObject:wm,curry:et,defaults:Ge,disableUserSelect:WC,each:B,eqNaN:Ta,extend:ie,filter:Ct,find:Fo,guid:FC,hasOwn:Te,indexOf:tt,inherits:YC,isArray:de,isArrayLike:Aa,isBuiltInObject:vS,isDom:ju,isFunction:Le,isGradientObject:Nm,isImagePatternObject:lz,isNumber:xt,isObject:Ue,isPrimitive:bh,isRegExp:oz,isString:je,isStringSafe:qx,isTypedArray:Xa,keys:gt,logError:hb,map:pe,merge:rt,mergeAll:fb,mixin:yr,noop:vr,normalizeCssArray:jm,reduce:ds,retrieve:ga,retrieve2:Me,retrieve3:fn,setAsPrimitive:Og,slice:pb,trim:Dn},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xS=function(r,t){return xS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])},xS(r,t)};function tr(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");xS(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Yo(r,t){return r==null&&(r=0),t==null&&(t=0),[r,t]}function Ia(r,t){return r[0]=t[0],r[1]=t[1],r}function yi(r){return[r[0],r[1]]}function gb(r,t,e){return r[0]=t,r[1]=e,r}function yS(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function Xx(r,t,e,a){return r[0]=t[0]+e[0]*a,r[1]=t[1]+e[1]*a,r}function _o(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function Pg(r){return Math.sqrt($C(r))}var VX=Pg;function $C(r){return r[0]*r[0]+r[1]*r[1]}var HX=$C;function GX(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}function UX(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}function FX(r,t){return r[0]*t[0]+r[1]*t[1]}function vg(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function Ou(r,t){var e=Pg(t);return e===0?(r[0]=0,r[1]=0):(r[0]=t[0]/e,r[1]=t[1]/e),r}function Zx(r,t){return Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1]))}var ul=Zx;function hz(r,t){return(r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1])}var Ao=hz;function YX(r,t){return r[0]=-t[0],r[1]=-t[1],r}function xg(r,t,e,a){return r[0]=t[0]+a*(e[0]-t[0]),r[1]=t[1]+a*(e[1]-t[1]),r}function xr(r,t,e){var a=t[0],n=t[1];return r[0]=e[0]*a+e[2]*n+e[4],r[1]=e[1]*a+e[3]*n+e[5],r}function dl(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function hl(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}const WX=Object.freeze(Object.defineProperty({__proto__:null,add:yS,applyTransform:xr,clone:yi,copy:Ia,create:Yo,dist:ul,distSquare:Ao,distance:Zx,distanceSquare:hz,div:UX,dot:FX,len:Pg,lenSquare:$C,length:VX,lengthSquare:HX,lerp:xg,max:hl,min:dl,mul:GX,negate:YX,normalize:Ou,scale:vg,scaleAndAdd:Xx,set:gb,sub:_o},Symbol.toStringTag,{value:"Module"}));var Ld=(function(){function r(t,e){this.target=t,this.topTarget=e&&e.topTarget}return r})(),$X=(function(){function r(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return r.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Ld(e,t),"dragstart",t.event))},r.prototype._drag=function(t){var e=this._draggingTarget;if(e){var a=t.offsetX,n=t.offsetY,s=a-this._x,l=n-this._y;this._x=a,this._y=n,e.drift(s,l,t),this.handler.dispatchToElement(new Ld(e,t),"drag",t.event);var o=this.handler.findHover(a,n,e).target,c=this._dropTarget;this._dropTarget=o,e!==o&&(c&&o!==c&&this.handler.dispatchToElement(new Ld(c,t),"dragleave",t.event),o&&o!==c&&this.handler.dispatchToElement(new Ld(o,t),"dragenter",t.event))}},r.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new Ld(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Ld(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},r})(),gs=(function(){function r(t){t&&(this._$eventProcessor=t)}return r.prototype.on=function(t,e,a,n){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof e=="function"&&(n=a,a=e,e=null),!a||!t)return this;var l=this._$eventProcessor;e!=null&&l&&l.normalizeQuery&&(e=l.normalizeQuery(e)),s[t]||(s[t]=[]);for(var o=0;o<s[t].length;o++)if(s[t][o].h===a)return this;var c={h:a,query:e,ctx:n||this,callAtLast:a.zrEventfulCallAtLast},u=s[t].length-1,d=s[t][u];return d&&d.callAtLast?s[t].splice(u,0,c):s[t].push(c),this},r.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},r.prototype.off=function(t,e){var a=this._$handlers;if(!a)return this;if(!t)return this._$handlers={},this;if(e){if(a[t]){for(var n=[],s=0,l=a[t].length;s<l;s++)a[t][s].h!==e&&n.push(a[t][s]);a[t]=n}a[t]&&a[t].length===0&&delete a[t]}else delete a[t];return this},r.prototype.trigger=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(!this._$handlers)return this;var n=this._$handlers[t],s=this._$eventProcessor;if(n)for(var l=e.length,o=n.length,c=0;c<o;c++){var u=n[c];if(!(s&&s.filter&&u.query!=null&&!s.filter(t,u.query)))switch(l){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,e[0]);break;case 2:u.h.call(u.ctx,e[0],e[1]);break;default:u.h.apply(u.ctx,e);break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},r.prototype.triggerWithContext=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(!this._$handlers)return this;var n=this._$handlers[t],s=this._$eventProcessor;if(n)for(var l=e.length,o=e[l-1],c=n.length,u=0;u<c;u++){var d=n[u];if(!(s&&s.filter&&d.query!=null&&!s.filter(t,d.query)))switch(l){case 0:d.h.call(o);break;case 1:d.h.call(o,e[0]);break;case 2:d.h.call(o,e[0],e[1]);break;default:d.h.apply(o,e.slice(1,l-1));break}}return s&&s.afterTrigger&&s.afterTrigger(t),this},r})(),qX=Math.log(2);function bS(r,t,e,a,n,s){var l=a+"-"+n,o=r.length;if(s.hasOwnProperty(l))return s[l];if(t===1){var c=Math.round(Math.log((1<<o)-1&~n)/qX);return r[e][c]}for(var u=a|1<<e,d=e+1;a&1<<d;)d++;for(var h=0,p=0,g=0;p<o;p++){var v=1<<p;v&n||(h+=(g%2?-1:1)*r[e][p]*bS(r,t-1,d,u,n|v,s),g++)}return s[l]=h,h}function nR(r,t){var e=[[r[0],r[1],1,0,0,0,-t[0]*r[0],-t[0]*r[1]],[0,0,0,r[0],r[1],1,-t[1]*r[0],-t[1]*r[1]],[r[2],r[3],1,0,0,0,-t[2]*r[2],-t[2]*r[3]],[0,0,0,r[2],r[3],1,-t[3]*r[2],-t[3]*r[3]],[r[4],r[5],1,0,0,0,-t[4]*r[4],-t[4]*r[5]],[0,0,0,r[4],r[5],1,-t[5]*r[4],-t[5]*r[5]],[r[6],r[7],1,0,0,0,-t[6]*r[6],-t[6]*r[7]],[0,0,0,r[6],r[7],1,-t[7]*r[6],-t[7]*r[7]]],a={},n=bS(e,8,0,0,0,a);if(n!==0){for(var s=[],l=0;l<8;l++)for(var o=0;o<8;o++)s[o]==null&&(s[o]=0),s[o]+=((l+o)%2?-1:1)*bS(e,7,l===0?1:0,1<<l,1<<o,a)/n*t[l];return function(c,u,d){var h=u*s[6]+d*s[7]+1;c[0]=(u*s[0]+d*s[1]+s[2])/h,c[1]=(u*s[3]+d*s[4]+s[5])/h}}}var Kx="___zrEVENTSAVED",gN=[];function XX(r,t,e,a,n){return _S(gN,t,a,n,!0)&&_S(r,e,gN[0],gN[1])}function ZX(r,t){r&&e(r),t&&e(t);function e(a){var n=a[Kx];n&&(n.clearMarkers&&n.clearMarkers(),delete a[Kx])}}function _S(r,t,e,a,n){if(t.getBoundingClientRect&&pt.domSupported&&!fz(t)){var s=t[Kx]||(t[Kx]={}),l=KX(t,s),o=QX(l,s,n);if(o)return o(r,e,a),!0}return!1}function KX(r,t){var e=t.markers;if(e)return e;e=t.markers=[];for(var a=["left","right"],n=["top","bottom"],s=0;s<4;s++){var l=document.createElement("div"),o=l.style,c=s%2,u=(s>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",a[c]+":0",n[u]+":0",a[1-c]+":auto",n[1-u]+":auto",""].join("!important;"),r.appendChild(l),e.push(l)}return t.clearMarkers=function(){B(e,function(d){d.parentNode&&d.parentNode.removeChild(d)})},e}function QX(r,t,e){for(var a=e?"invTrans":"trans",n=t[a],s=t.srcCoords,l=[],o=[],c=!0,u=0;u<4;u++){var d=r[u].getBoundingClientRect(),h=2*u,p=d.left,g=d.top;l.push(p,g),c=c&&s&&p===s[h]&&g===s[h+1],o.push(r[u].offsetLeft,r[u].offsetTop)}return c&&n?n:(t.srcCoords=l,t[a]=e?nR(o,l):nR(l,o))}function fz(r){return r.nodeName.toUpperCase()==="CANVAS"}var JX=/([&<>"'])/g,eZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Oa(r){return r==null?"":(r+"").replace(JX,function(t,e){return eZ[e]})}var tZ=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,mN=[],rZ=pt.browser.firefox&&+pt.browser.version.split(".")[0]<39;function NS(r,t,e,a){return e=e||{},a?sR(r,t,e):rZ&&t.layerX!=null&&t.layerX!==t.offsetX?(e.zrX=t.layerX,e.zrY=t.layerY):t.offsetX!=null?(e.zrX=t.offsetX,e.zrY=t.offsetY):sR(r,t,e),e}function sR(r,t,e){if(pt.domSupported&&r.getBoundingClientRect){var a=t.clientX,n=t.clientY;if(fz(r)){var s=r.getBoundingClientRect();e.zrX=a-s.left,e.zrY=n-s.top;return}else if(_S(mN,r,a,n)){e.zrX=mN[0],e.zrY=mN[1];return}}e.zrX=e.zrY=0}function qC(r){return r||window.event}function Qn(r,t,e){if(t=qC(t),t.zrX!=null)return t;var a=t.type,n=a&&a.indexOf("touch")>=0;if(n){var l=a!=="touchend"?t.targetTouches[0]:t.changedTouches[0];l&&NS(r,l,t,e)}else{NS(r,t,t,e);var s=aZ(t);t.zrDelta=s?s/120:-(t.detail||0)/3}var o=t.button;return t.which==null&&o!==void 0&&tZ.test(t.type)&&(t.which=o&1?1:o&2?3:o&4?2:0),t}function aZ(r){var t=r.wheelDelta;if(t)return t;var e=r.deltaX,a=r.deltaY;if(e==null||a==null)return t;var n=Math.abs(a!==0?a:e),s=a>0?-1:a<0?1:e>0?-1:1;return 3*n*s}function jS(r,t,e,a){r.addEventListener(t,e,a)}function nZ(r,t,e,a){r.removeEventListener(t,e,a)}var wl=function(r){r.preventDefault(),r.stopPropagation(),r.cancelBubble=!0};function iR(r){return r.which===2||r.which===3}var sZ=(function(){function r(){this._track=[]}return r.prototype.recognize=function(t,e,a){return this._doTrack(t,e,a),this._recognize(t)},r.prototype.clear=function(){return this._track.length=0,this},r.prototype._doTrack=function(t,e,a){var n=t.touches;if(n){for(var s={points:[],touches:[],target:e,event:t},l=0,o=n.length;l<o;l++){var c=n[l],u=NS(a,c,{});s.points.push([u.zrX,u.zrY]),s.touches.push(c)}this._track.push(s)}},r.prototype._recognize=function(t){for(var e in vN)if(vN.hasOwnProperty(e)){var a=vN[e](this._track,t);if(a)return a}},r})();function lR(r){var t=r[1][0]-r[0][0],e=r[1][1]-r[0][1];return Math.sqrt(t*t+e*e)}function iZ(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}var vN={pinch:function(r,t){var e=r.length;if(e){var a=(r[e-1]||{}).points,n=(r[e-2]||{}).points||a;if(n&&n.length>1&&a&&a.length>1){var s=lR(a)/lR(n);!isFinite(s)&&(s=1),t.pinchScale=s;var l=iZ(a);return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:r[0].target,event:t}}}}};function na(){return[1,0,0,1,0,0]}function Sm(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function Cm(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function Is(r,t,e){var a=t[0]*e[0]+t[2]*e[1],n=t[1]*e[0]+t[3]*e[1],s=t[0]*e[2]+t[2]*e[3],l=t[1]*e[2]+t[3]*e[3],o=t[0]*e[4]+t[2]*e[5]+t[4],c=t[1]*e[4]+t[3]*e[5]+t[5];return r[0]=a,r[1]=n,r[2]=s,r[3]=l,r[4]=o,r[5]=c,r}function zs(r,t,e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4]+e[0],r[5]=t[5]+e[1],r}function Ml(r,t,e,a){a===void 0&&(a=[0,0]);var n=t[0],s=t[2],l=t[4],o=t[1],c=t[3],u=t[5],d=Math.sin(e),h=Math.cos(e);return r[0]=n*h+o*d,r[1]=-n*d+o*h,r[2]=s*h+c*d,r[3]=-s*d+h*c,r[4]=h*(l-a[0])+d*(u-a[1])+a[0],r[5]=h*(u-a[1])-d*(l-a[0])+a[1],r}function mb(r,t,e){var a=e[0],n=e[1];return r[0]=t[0]*a,r[1]=t[1]*n,r[2]=t[2]*a,r[3]=t[3]*n,r[4]=t[4]*a,r[5]=t[5]*n,r}function hs(r,t){var e=t[0],a=t[2],n=t[4],s=t[1],l=t[3],o=t[5],c=e*l-s*a;return c?(c=1/c,r[0]=l*c,r[1]=-s*c,r[2]=-a*c,r[3]=e*c,r[4]=(a*o-l*n)*c,r[5]=(s*n-e*o)*c,r):null}function pz(r){var t=na();return Cm(t,r),t}const lZ=Object.freeze(Object.defineProperty({__proto__:null,clone:pz,copy:Cm,create:na,identity:Sm,invert:hs,mul:Is,rotate:Ml,scale:mb,translate:zs},Symbol.toStringTag,{value:"Module"}));var Ye=(function(){function r(t,e){this.x=t||0,this.y=e||0}return r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(t,e){return this.x=t,this.y=e,this},r.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.scale=function(t){this.x*=t,this.y*=t},r.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y},r.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},r.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},r.prototype.distance=function(t){var e=this.x-t.x,a=this.y-t.y;return Math.sqrt(e*e+a*a)},r.prototype.distanceSquare=function(t){var e=this.x-t.x,a=this.y-t.y;return e*e+a*a},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.transform=function(t){if(t){var e=this.x,a=this.y;return this.x=t[0]*e+t[2]*a+t[4],this.y=t[1]*e+t[3]*a+t[5],this}},r.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},r.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},r.set=function(t,e,a){t.x=e,t.y=a},r.copy=function(t,e){t.x=e.x,t.y=e.y},r.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r.lenSquare=function(t){return t.x*t.x+t.y*t.y},r.dot=function(t,e){return t.x*e.x+t.y*e.y},r.add=function(t,e,a){t.x=e.x+a.x,t.y=e.y+a.y},r.sub=function(t,e,a){t.x=e.x-a.x,t.y=e.y-a.y},r.scale=function(t,e,a){t.x=e.x*a,t.y=e.y*a},r.scaleAndAdd=function(t,e,a,n){t.x=e.x+a.x*n,t.y=e.y+a.y*n},r.lerp=function(t,e,a,n){var s=1-n;t.x=s*e.x+n*a.x,t.y=s*e.y+n*a.y},r})(),eu=Math.min,dh=Math.max,wS=Math.abs,oR=["x","y"],oZ=["width","height"],mc=new Ye,vc=new Ye,xc=new Ye,yc=new Ye,Cn=gz(),tg=Cn.minTv,SS=Cn.maxTv,yg=[0,0],We=(function(){function r(t,e,a,n){r.set(this,t,e,a,n)}return r.set=function(t,e,a,n,s){return n<0&&(e=e+n,n=-n),s<0&&(a=a+s,s=-s),t.x=e,t.y=a,t.width=n,t.height=s,t},r.prototype.union=function(t){var e=eu(t.x,this.x),a=eu(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=dh(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=dh(t.y+t.height,this.y+this.height)-a:this.height=t.height,this.x=e,this.y=a},r.prototype.applyTransform=function(t){r.applyTransform(this,this,t)},r.prototype.calculateTransform=function(t){var e=this,a=t.width/e.width,n=t.height/e.height,s=na();return zs(s,s,[-e.x,-e.y]),mb(s,s,[a,n]),zs(s,s,[t.x,t.y]),s},r.prototype.intersect=function(t,e,a){return r.intersect(this,t,e,a)},r.intersect=function(t,e,a,n){a&&Ye.set(a,0,0);var s=n&&n.outIntersectRect||null,l=n&&n.clamp;if(s&&(s.x=s.y=s.width=s.height=NaN),!t||!e)return!1;t instanceof r||(t=r.set(cZ,t.x,t.y,t.width,t.height)),e instanceof r||(e=r.set(uZ,e.x,e.y,e.width,e.height));var o=!!a;Cn.reset(n,o);var c=Cn.touchThreshold,u=t.x+c,d=t.x+t.width-c,h=t.y+c,p=t.y+t.height-c,g=e.x+c,v=e.x+e.width-c,y=e.y+c,x=e.y+e.height-c;if(u>d||h>p||g>v||y>x)return!1;var b=!(d<g||v<u||p<y||x<h);return(o||s)&&(yg[0]=1/0,yg[1]=0,cR(u,d,g,v,0,o,s,l),cR(h,p,y,x,1,o,s,l),o&&Ye.copy(a,b?Cn.useDir?Cn.dirMinTv:tg:SS)),b},r.contain=function(t,e,a){return e>=t.x&&e<=t.x+t.width&&a>=t.y&&a<=t.y+t.height},r.prototype.contain=function(t,e){return r.contain(this,t,e)},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copy=function(t){r.copy(this,t)},r.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},r.prototype.isZero=function(){return this.width===0||this.height===0},r.create=function(t){return new r(t.x,t.y,t.width,t.height)},r.copy=function(t,e){return t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t},r.applyTransform=function(t,e,a){if(!a){t!==e&&r.copy(t,e);return}if(a[1]<1e-5&&a[1]>-1e-5&&a[2]<1e-5&&a[2]>-1e-5){var n=a[0],s=a[3],l=a[4],o=a[5];t.x=e.x*n+l,t.y=e.y*s+o,t.width=e.width*n,t.height=e.height*s,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}mc.x=xc.x=e.x,mc.y=yc.y=e.y,vc.x=yc.x=e.x+e.width,vc.y=xc.y=e.y+e.height,mc.transform(a),yc.transform(a),vc.transform(a),xc.transform(a),t.x=eu(mc.x,vc.x,xc.x,yc.x),t.y=eu(mc.y,vc.y,xc.y,yc.y);var c=dh(mc.x,vc.x,xc.x,yc.x),u=dh(mc.y,vc.y,xc.y,yc.y);t.width=c-t.x,t.height=u-t.y},r})(),cZ=new We(0,0,0,0),uZ=new We(0,0,0,0);function cR(r,t,e,a,n,s,l,o){var c=wS(t-e),u=wS(a-r),d=eu(c,u),h=oR[n],p=oR[1-n],g=oZ[n];t<e||a<r?c<u?(s&&(SS[h]=-c),o&&(l[h]=t,l[g]=0)):(s&&(SS[h]=u),o&&(l[h]=r,l[g]=0)):(l&&(l[h]=dh(r,e),l[g]=eu(t,a)-l[h]),s&&(d<yg[0]||Cn.useDir)&&(yg[0]=eu(d,yg[0]),(c<u||!Cn.bidirectional)&&(tg[h]=c,tg[p]=0,Cn.useDir&&Cn.calcDirMTV()),(c>=u||!Cn.bidirectional)&&(tg[h]=-u,tg[p]=0,Cn.useDir&&Cn.calcDirMTV())))}function gz(){var r=0,t=new Ye,e=new Ye,a={minTv:new Ye,maxTv:new Ye,useDir:!1,dirMinTv:new Ye,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(s,l){a.touchThreshold=0,s&&s.touchThreshold!=null&&(a.touchThreshold=dh(0,s.touchThreshold)),a.negativeSize=!1,l&&(a.minTv.set(1/0,1/0),a.maxTv.set(0,0),a.useDir=!1,s&&s.direction!=null&&(a.useDir=!0,a.dirMinTv.copy(a.minTv),e.copy(a.minTv),r=s.direction,a.bidirectional=s.bidirectional==null||!!s.bidirectional,a.bidirectional||t.set(Math.cos(r),Math.sin(r))))},calcDirMTV:function(){var s=a.minTv,l=a.dirMinTv,o=s.y*s.y+s.x*s.x,c=Math.sin(r),u=Math.cos(r),d=c*s.y+u*s.x;if(n(d)){n(s.x)&&n(s.y)&&l.set(0,0);return}if(e.x=o*u/d,e.y=o*c/d,n(e.x)&&n(e.y)){l.set(0,0);return}(a.bidirectional||t.dot(e)>0)&&e.len()<l.len()&&l.copy(e)}};function n(s){return wS(s)<1e-10}return a}var mz="silent";function dZ(r,t,e){return{type:r,event:e,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:e.zrX,offsetY:e.zrY,gestureEvent:e.gestureEvent,pinchX:e.pinchX,pinchY:e.pinchY,pinchScale:e.pinchScale,wheelDelta:e.zrDelta,zrByTouch:e.zrByTouch,which:e.which,stop:hZ}}function hZ(){wl(this.event)}var fZ=(function(r){tr(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.handler=null,e}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t})(gs),bp=(function(){function r(t,e){this.x=t,this.y=e}return r})(),pZ=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],xN=new We(0,0,0,0),vz=(function(r){tr(t,r);function t(e,a,n,s,l){var o=r.call(this)||this;return o._hovered=new bp(0,0),o.storage=e,o.painter=a,o.painterRoot=s,o._pointerSize=l,n=n||new fZ,o.proxy=null,o.setHandlerProxy(n),o._draggingMgr=new $X(o),o}return t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(B(pZ,function(a){e.on&&e.on(a,this[a],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var a=e.zrX,n=e.zrY,s=xz(this,a,n),l=this._hovered,o=l.target;o&&!o.__zr&&(l=this.findHover(l.x,l.y),o=l.target);var c=this._hovered=s?new bp(a,n):this.findHover(a,n),u=c.target,d=this.proxy;d.setCursor&&d.setCursor(u?u.cursor:"default"),o&&u!==o&&this.dispatchToElement(l,"mouseout",e),this.dispatchToElement(c,"mousemove",e),u&&u!==o&&this.dispatchToElement(c,"mouseover",e)},t.prototype.mouseout=function(e){var a=e.zrEventControl;a!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",e),a!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new bp(0,0)},t.prototype.dispatch=function(e,a){var n=this[e];n&&n.call(this,a)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var a=this.proxy;a.setCursor&&a.setCursor(e)},t.prototype.dispatchToElement=function(e,a,n){e=e||{};var s=e.target;if(!(s&&s.silent)){for(var l="on"+a,o=dZ(a,e,n);s&&(s[l]&&(o.cancelBubble=!!s[l].call(s,o)),s.trigger(a,o),s=s.__hostTarget?s.__hostTarget:s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(a,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){typeof c[l]=="function"&&c[l].call(c,o),c.trigger&&c.trigger(a,o)}))}},t.prototype.findHover=function(e,a,n){var s=this.storage.getDisplayList(),l=new bp(e,a);if(uR(s,l,e,a,n),this._pointerSize&&!l.target){for(var o=[],c=this._pointerSize,u=c/2,d=new We(e-u,a-u,c,c),h=s.length-1;h>=0;h--){var p=s[h];p!==n&&!p.ignore&&!p.ignoreCoarsePointer&&(!p.parent||!p.parent.ignoreCoarsePointer)&&(xN.copy(p.getBoundingRect()),p.transform&&xN.applyTransform(p.transform),xN.intersect(d)&&o.push(p))}if(o.length)for(var g=4,v=Math.PI/12,y=Math.PI*2,x=0;x<u;x+=g)for(var b=0;b<y;b+=v){var N=e+x*Math.cos(b),w=a+x*Math.sin(b);if(uR(o,l,N,w,n),l.target)return l}}return l},t.prototype.processGesture=function(e,a){this._gestureMgr||(this._gestureMgr=new sZ);var n=this._gestureMgr;a==="start"&&n.clear();var s=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if(a==="end"&&n.clear(),s){var l=s.type;e.gestureEvent=l;var o=new bp;o.target=s.target,this.dispatchToElement(o,l,s.event)}},t})(gs);B(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(r){vz.prototype[r]=function(t){var e=t.zrX,a=t.zrY,n=xz(this,e,a),s,l;if((r!=="mouseup"||!n)&&(s=this.findHover(e,a),l=s.target),r==="mousedown")this._downEl=l,this._downPoint=[t.zrX,t.zrY],this._upEl=l;else if(r==="mouseup")this._upEl=l;else if(r==="click"){if(this._downEl!==this._upEl||!this._downPoint||ul(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,r,t)}});function gZ(r,t,e){if(r[r.rectHover?"rectContain":"contain"](t,e)){for(var a=r,n=void 0,s=!1;a;){if(a.ignoreClip&&(s=!0),!s){var l=a.getClipPath();if(l&&!l.contain(t,e))return!1}a.silent&&(n=!0);var o=a.__hostTarget;a=o?a.ignoreHostSilent?null:o:a.parent}return n?mz:!0}return!1}function uR(r,t,e,a,n){for(var s=r.length-1;s>=0;s--){var l=r[s],o=void 0;if(l!==n&&!l.ignore&&(o=gZ(l,e,a))&&(!t.topTarget&&(t.topTarget=l),o!==mz)){t.target=l;break}}}function xz(r,t,e){var a=r.painter;return t<0||t>a.getWidth()||e<0||e>a.getHeight()}var yz=32,_p=7;function mZ(r){for(var t=0;r>=yz;)t|=r&1,r>>=1;return r+t}function dR(r,t,e,a){var n=t+1;if(n===e)return 1;if(a(r[n++],r[t])<0){for(;n<e&&a(r[n],r[n-1])<0;)n++;vZ(r,t,n)}else for(;n<e&&a(r[n],r[n-1])>=0;)n++;return n-t}function vZ(r,t,e){for(e--;t<e;){var a=r[t];r[t++]=r[e],r[e--]=a}}function hR(r,t,e,a,n){for(a===t&&a++;a<e;a++){for(var s=r[a],l=t,o=a,c;l<o;)c=l+o>>>1,n(s,r[c])<0?o=c:l=c+1;var u=a-l;switch(u){case 3:r[l+3]=r[l+2];case 2:r[l+2]=r[l+1];case 1:r[l+1]=r[l];break;default:for(;u>0;)r[l+u]=r[l+u-1],u--}r[l]=s}}function yN(r,t,e,a,n,s){var l=0,o=0,c=1;if(s(r,t[e+n])>0){for(o=a-n;c<o&&s(r,t[e+n+c])>0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o),l+=n,c+=n}else{for(o=n+1;c<o&&s(r,t[e+n-c])<=0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o);var u=l;l=n-c,c=n-u}for(l++;l<c;){var d=l+(c-l>>>1);s(r,t[e+d])>0?l=d+1:c=d}return c}function bN(r,t,e,a,n,s){var l=0,o=0,c=1;if(s(r,t[e+n])<0){for(o=n+1;c<o&&s(r,t[e+n-c])<0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o);var u=l;l=n-c,c=n-u}else{for(o=a-n;c<o&&s(r,t[e+n+c])>=0;)l=c,c=(c<<1)+1,c<=0&&(c=o);c>o&&(c=o),l+=n,c+=n}for(l++;l<c;){var d=l+(c-l>>>1);s(r,t[e+d])<0?c=d:l=d+1}return c}function xZ(r,t){var e=_p,a,n,s=0,l=[];a=[],n=[];function o(g,v){a[s]=g,n[s]=v,s+=1}function c(){for(;s>1;){var g=s-2;if(g>=1&&n[g-1]<=n[g]+n[g+1]||g>=2&&n[g-2]<=n[g]+n[g-1])n[g-1]<n[g+1]&&g--;else if(n[g]>n[g+1])break;d(g)}}function u(){for(;s>1;){var g=s-2;g>0&&n[g-1]<n[g+1]&&g--,d(g)}}function d(g){var v=a[g],y=n[g],x=a[g+1],b=n[g+1];n[g]=y+b,g===s-3&&(a[g+1]=a[g+2],n[g+1]=n[g+2]),s--;var N=bN(r[x],r,v,y,0,t);v+=N,y-=N,y!==0&&(b=yN(r[v+y-1],r,x,b,b-1,t),b!==0&&(y<=b?h(v,y,x,b):p(v,y,x,b)))}function h(g,v,y,x){var b=0;for(b=0;b<v;b++)l[b]=r[g+b];var N=0,w=y,S=g;if(r[S++]=r[w++],--x===0){for(b=0;b<v;b++)r[S+b]=l[N+b];return}if(v===1){for(b=0;b<x;b++)r[S+b]=r[w+b];r[S+x]=l[N];return}for(var T=e,A,C,M;;){A=0,C=0,M=!1;do if(t(r[w],l[N])<0){if(r[S++]=r[w++],C++,A=0,--x===0){M=!0;break}}else if(r[S++]=l[N++],A++,C=0,--v===1){M=!0;break}while((A|C)<T);if(M)break;do{if(A=bN(r[w],l,N,v,0,t),A!==0){for(b=0;b<A;b++)r[S+b]=l[N+b];if(S+=A,N+=A,v-=A,v<=1){M=!0;break}}if(r[S++]=r[w++],--x===0){M=!0;break}if(C=yN(l[N],r,w,x,0,t),C!==0){for(b=0;b<C;b++)r[S+b]=r[w+b];if(S+=C,w+=C,x-=C,x===0){M=!0;break}}if(r[S++]=l[N++],--v===1){M=!0;break}T--}while(A>=_p||C>=_p);if(M)break;T<0&&(T=0),T+=2}if(e=T,e<1&&(e=1),v===1){for(b=0;b<x;b++)r[S+b]=r[w+b];r[S+x]=l[N]}else{if(v===0)throw new Error;for(b=0;b<v;b++)r[S+b]=l[N+b]}}function p(g,v,y,x){var b=0;for(b=0;b<x;b++)l[b]=r[y+b];var N=g+v-1,w=x-1,S=y+x-1,T=0,A=0;if(r[S--]=r[N--],--v===0){for(T=S-(x-1),b=0;b<x;b++)r[T+b]=l[b];return}if(x===1){for(S-=v,N-=v,A=S+1,T=N+1,b=v-1;b>=0;b--)r[A+b]=r[T+b];r[S]=l[w];return}for(var C=e;;){var M=0,R=0,k=!1;do if(t(l[w],r[N])<0){if(r[S--]=r[N--],M++,R=0,--v===0){k=!0;break}}else if(r[S--]=l[w--],R++,M=0,--x===1){k=!0;break}while((M|R)<C);if(k)break;do{if(M=v-bN(l[w],r,g,v,v-1,t),M!==0){for(S-=M,N-=M,v-=M,A=S+1,T=N+1,b=M-1;b>=0;b--)r[A+b]=r[T+b];if(v===0){k=!0;break}}if(r[S--]=l[w--],--x===1){k=!0;break}if(R=x-yN(r[N],l,0,x,x-1,t),R!==0){for(S-=R,w-=R,x-=R,A=S+1,T=w+1,b=0;b<R;b++)r[A+b]=l[T+b];if(x<=1){k=!0;break}}if(r[S--]=r[N--],--v===0){k=!0;break}C--}while(M>=_p||R>=_p);if(k)break;C<0&&(C=0),C+=2}if(e=C,e<1&&(e=1),x===1){for(S-=v,N-=v,A=S+1,T=N+1,b=v-1;b>=0;b--)r[A+b]=r[T+b];r[S]=l[w]}else{if(x===0)throw new Error;for(T=S-(x-1),b=0;b<x;b++)r[T+b]=l[b]}}return{mergeRuns:c,forceMergeRuns:u,pushRun:o}}function Nx(r,t,e,a){e||(e=0),a||(a=r.length);var n=a-e;if(!(n<2)){var s=0;if(n<yz){s=dR(r,e,a,t),hR(r,e,a,e+s,t);return}var l=xZ(r,t),o=mZ(n);do{if(s=dR(r,e,a,t),s<o){var c=n;c>o&&(c=o),hR(r,e,e+c,e+s,t),s=c}l.pushRun(e,s),l.mergeRuns(),n-=s,e+=s}while(n!==0);l.forceMergeRuns()}}var Tn=1,rg=2,lh=4,fR=!1;function _N(){fR||(fR=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function pR(r,t){return r.zlevel===t.zlevel?r.z===t.z?r.z2-t.z2:r.z-t.z:r.zlevel-t.zlevel}var yZ=(function(){function r(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=pR}return r.prototype.traverse=function(t,e){for(var a=0;a<this._roots.length;a++)this._roots[a].traverse(t,e)},r.prototype.getDisplayList=function(t,e){e=e||!1;var a=this._displayList;return(t||!a.length)&&this.updateDisplayList(e),a},r.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,a=this._displayList,n=0,s=e.length;n<s;n++)this._updateAndAddDisplayable(e[n],null,t);a.length=this._displayListLen,Nx(a,pR)},r.prototype._updateAndAddDisplayable=function(t,e,a){if(!(t.ignore&&!a)){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.getClipPath(),s=e&&e.length,l=0,o=t.__clipPaths;if(!t.ignoreClip&&(s||n)){if(o||(o=t.__clipPaths=[]),s)for(var c=0;c<e.length;c++)o[l++]=e[c];for(var u=n,d=t;u;)u.parent=d,u.updateTransform(),o[l++]=u,d=u,u=u.getClipPath()}if(o&&(o.length=l),t.childrenRef){for(var h=t.childrenRef(),p=0;p<h.length;p++){var g=h[p];t.__dirty&&(g.__dirty|=Tn),this._updateAndAddDisplayable(g,o,a)}t.__dirty=0}else{var v=t;isNaN(v.z)&&(_N(),v.z=0),isNaN(v.z2)&&(_N(),v.z2=0),isNaN(v.zlevel)&&(_N(),v.zlevel=0),this._displayList[this._displayListLen++]=v}var y=t.getDecalElement&&t.getDecalElement();y&&this._updateAndAddDisplayable(y,o,a);var x=t.getTextGuideLine();x&&this._updateAndAddDisplayable(x,o,a);var b=t.getTextContent();b&&this._updateAndAddDisplayable(b,o,a)}},r.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},r.prototype.delRoot=function(t){if(t instanceof Array){for(var e=0,a=t.length;e<a;e++)this.delRoot(t[e]);return}var n=tt(this._roots,t);n>=0&&this._roots.splice(n,1)},r.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},r.prototype.getRoots=function(){return this._roots},r.prototype.dispose=function(){this._displayList=null,this._roots=null},r})(),Qx;Qx=pt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(r){return setTimeout(r,16)};var bg={linear:function(r){return r},quadraticIn:function(r){return r*r},quadraticOut:function(r){return r*(2-r)},quadraticInOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},cubicIn:function(r){return r*r*r},cubicOut:function(r){return--r*r*r+1},cubicInOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},quarticIn:function(r){return r*r*r*r},quarticOut:function(r){return 1- --r*r*r*r},quarticInOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)},quinticIn:function(r){return r*r*r*r*r},quinticOut:function(r){return--r*r*r*r*r+1},quinticInOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)},sinusoidalIn:function(r){return 1-Math.cos(r*Math.PI/2)},sinusoidalOut:function(r){return Math.sin(r*Math.PI/2)},sinusoidalInOut:function(r){return .5*(1-Math.cos(Math.PI*r))},exponentialIn:function(r){return r===0?0:Math.pow(1024,r-1)},exponentialOut:function(r){return r===1?1:1-Math.pow(2,-10*r)},exponentialInOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)},circularIn:function(r){return 1-Math.sqrt(1-r*r)},circularOut:function(r){return Math.sqrt(1- --r*r)},circularInOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)},elasticIn:function(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)))},elasticOut:function(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*r)*Math.sin((r-t)*(2*Math.PI)/a)+1)},elasticInOut:function(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a*Math.asin(1/e)/(2*Math.PI),(r*=2)<1?-.5*(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)):e*Math.pow(2,-10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)*.5+1)},backIn:function(r){var t=1.70158;return r*r*((t+1)*r-t)},backOut:function(r){var t=1.70158;return--r*r*((t+1)*r+t)+1},backInOut:function(r){var t=2.5949095;return(r*=2)<1?.5*(r*r*((t+1)*r-t)):.5*((r-=2)*r*((t+1)*r+t)+2)},bounceIn:function(r){return 1-bg.bounceOut(1-r)},bounceOut:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},bounceInOut:function(r){return r<.5?bg.bounceIn(r*2)*.5:bg.bounceOut(r*2-1)*.5+.5}},n0=Math.pow,Eo=Math.sqrt,Jx=1e-8,bz=1e-4,gR=Eo(3),s0=1/3,ui=Yo(),rs=Yo(),_h=Yo();function No(r){return r>-Jx&&r<Jx}function _z(r){return r>Jx||r<-Jx}function ta(r,t,e,a,n){var s=1-n;return s*s*(s*r+3*n*t)+n*n*(n*a+3*s*e)}function mR(r,t,e,a,n){var s=1-n;return 3*(((t-r)*s+2*(e-t)*n)*s+(a-e)*n*n)}function ey(r,t,e,a,n,s){var l=a+3*(t-e)-r,o=3*(e-t*2+r),c=3*(t-r),u=r-n,d=o*o-3*l*c,h=o*c-9*l*u,p=c*c-3*o*u,g=0;if(No(d)&&No(h))if(No(o))s[0]=0;else{var v=-c/o;v>=0&&v<=1&&(s[g++]=v)}else{var y=h*h-4*d*p;if(No(y)){var x=h/d,v=-o/l+x,b=-x/2;v>=0&&v<=1&&(s[g++]=v),b>=0&&b<=1&&(s[g++]=b)}else if(y>0){var N=Eo(y),w=d*o+1.5*l*(-h+N),S=d*o+1.5*l*(-h-N);w<0?w=-n0(-w,s0):w=n0(w,s0),S<0?S=-n0(-S,s0):S=n0(S,s0);var v=(-o-(w+S))/(3*l);v>=0&&v<=1&&(s[g++]=v)}else{var T=(2*d*o-3*l*h)/(2*Eo(d*d*d)),A=Math.acos(T)/3,C=Eo(d),M=Math.cos(A),v=(-o-2*C*M)/(3*l),b=(-o+C*(M+gR*Math.sin(A)))/(3*l),R=(-o+C*(M-gR*Math.sin(A)))/(3*l);v>=0&&v<=1&&(s[g++]=v),b>=0&&b<=1&&(s[g++]=b),R>=0&&R<=1&&(s[g++]=R)}}return g}function Nz(r,t,e,a,n){var s=6*e-12*t+6*r,l=9*t+3*a-3*r-9*e,o=3*t-3*r,c=0;if(No(l)){if(_z(s)){var u=-o/s;u>=0&&u<=1&&(n[c++]=u)}}else{var d=s*s-4*l*o;if(No(d))n[0]=-s/(2*l);else if(d>0){var h=Eo(d),u=(-s+h)/(2*l),p=(-s-h)/(2*l);u>=0&&u<=1&&(n[c++]=u),p>=0&&p<=1&&(n[c++]=p)}}return c}function Po(r,t,e,a,n,s){var l=(t-r)*n+r,o=(e-t)*n+t,c=(a-e)*n+e,u=(o-l)*n+l,d=(c-o)*n+o,h=(d-u)*n+u;s[0]=r,s[1]=l,s[2]=u,s[3]=h,s[4]=h,s[5]=d,s[6]=c,s[7]=a}function jz(r,t,e,a,n,s,l,o,c,u,d){var h,p=.005,g=1/0,v,y,x,b;ui[0]=c,ui[1]=u;for(var N=0;N<1;N+=.05)rs[0]=ta(r,e,n,l,N),rs[1]=ta(t,a,s,o,N),x=Ao(ui,rs),x<g&&(h=N,g=x);g=1/0;for(var w=0;w<32&&!(p<bz);w++)v=h-p,y=h+p,rs[0]=ta(r,e,n,l,v),rs[1]=ta(t,a,s,o,v),x=Ao(rs,ui),v>=0&&x<g?(h=v,g=x):(_h[0]=ta(r,e,n,l,y),_h[1]=ta(t,a,s,o,y),b=Ao(_h,ui),y<=1&&b<g?(h=y,g=b):p*=.5);return d&&(d[0]=ta(r,e,n,l,h),d[1]=ta(t,a,s,o,h)),Eo(g)}function bZ(r,t,e,a,n,s,l,o,c){for(var u=r,d=t,h=0,p=1/c,g=1;g<=c;g++){var v=g*p,y=ta(r,e,n,l,v),x=ta(t,a,s,o,v),b=y-u,N=x-d;h+=Math.sqrt(b*b+N*N),u=y,d=x}return h}function pa(r,t,e,a){var n=1-a;return n*(n*r+2*a*t)+a*a*e}function CS(r,t,e,a){return 2*((1-a)*(t-r)+a*(e-t))}function _Z(r,t,e,a,n){var s=r-2*t+e,l=2*(t-r),o=r-a,c=0;if(No(s)){if(_z(l)){var u=-o/l;u>=0&&u<=1&&(n[c++]=u)}}else{var d=l*l-4*s*o;if(No(d)){var u=-l/(2*s);u>=0&&u<=1&&(n[c++]=u)}else if(d>0){var h=Eo(d),u=(-l+h)/(2*s),p=(-l-h)/(2*s);u>=0&&u<=1&&(n[c++]=u),p>=0&&p<=1&&(n[c++]=p)}}return c}function wz(r,t,e){var a=r+e-2*t;return a===0?.5:(r-t)/a}function zg(r,t,e,a,n){var s=(t-r)*a+r,l=(e-t)*a+t,o=(l-s)*a+s;n[0]=r,n[1]=s,n[2]=o,n[3]=o,n[4]=l,n[5]=e}function Sz(r,t,e,a,n,s,l,o,c){var u,d=.005,h=1/0;ui[0]=l,ui[1]=o;for(var p=0;p<1;p+=.05){rs[0]=pa(r,e,n,p),rs[1]=pa(t,a,s,p);var g=Ao(ui,rs);g<h&&(u=p,h=g)}h=1/0;for(var v=0;v<32&&!(d<bz);v++){var y=u-d,x=u+d;rs[0]=pa(r,e,n,y),rs[1]=pa(t,a,s,y);var g=Ao(rs,ui);if(y>=0&&g<h)u=y,h=g;else{_h[0]=pa(r,e,n,x),_h[1]=pa(t,a,s,x);var b=Ao(_h,ui);x<=1&&b<h?(u=x,h=b):d*=.5}}return c&&(c[0]=pa(r,e,n,u),c[1]=pa(t,a,s,u)),Eo(h)}function NZ(r,t,e,a,n,s,l){for(var o=r,c=t,u=0,d=1/l,h=1;h<=l;h++){var p=h*d,g=pa(r,e,n,p),v=pa(t,a,s,p),y=g-o,x=v-c;u+=Math.sqrt(y*y+x*x),o=g,c=v}return u}var jZ=/cubic-bezier\(([0-9,\.e ]+)\)/;function XC(r){var t=r&&jZ.exec(r);if(t){var e=t[1].split(","),a=+Dn(e[0]),n=+Dn(e[1]),s=+Dn(e[2]),l=+Dn(e[3]);if(isNaN(a+n+s+l))return;var o=[];return function(c){return c<=0?0:c>=1?1:ey(0,a,s,1,c,o)&&ta(0,n,l,1,o[0])}}}var wZ=(function(){function r(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||vr,this.ondestroy=t.ondestroy||vr,this.onrestart=t.onrestart||vr,t.easing&&this.setEasing(t.easing)}return r.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=e;return}var a=this._life,n=t-this._startTime-this._pausedTime,s=n/a;s<0&&(s=0),s=Math.min(s,1);var l=this.easingFunc,o=l?l(s):s;if(this.onframe(o),s===1)if(this.loop){var c=n%a;this._startTime=t-c,this._pausedTime=0,this.onrestart()}else return!0;return!1},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Le(t)?t:bg[t]||XC(t)},r})(),Cz=(function(){function r(t){this.value=t}return r})(),SZ=(function(){function r(){this._len=0}return r.prototype.insert=function(t){var e=new Cz(t);return this.insertEntry(e),e},r.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},r.prototype.remove=function(t){var e=t.prev,a=t.next;e?e.next=a:this.head=a,a?a.prev=e:this.tail=e,t.next=t.prev=null,this._len--},r.prototype.len=function(){return this._len},r.prototype.clear=function(){this.head=this.tail=null,this._len=0},r})(),Eh=(function(){function r(t){this._list=new SZ,this._maxSize=10,this._map={},this._maxSize=t}return r.prototype.put=function(t,e){var a=this._list,n=this._map,s=null;if(n[t]==null){var l=a.len(),o=this._lastRemovedEntry;if(l>=this._maxSize&&l>0){var c=a.head;a.remove(c),delete n[c.key],s=c.value,this._lastRemovedEntry=c}o?o.value=e:o=new Cz(e),o.key=t,a.insertEntry(o),n[t]=o}return s},r.prototype.get=function(t){var e=this._map[t],a=this._list;if(e!=null)return e!==a.tail&&(a.remove(e),a.insertEntry(e)),e.value},r.prototype.clear=function(){this._list.clear(),this._map={}},r.prototype.len=function(){return this._list.len()},r})(),vR={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ks(r){return r=Math.round(r),r<0?0:r>255?255:r}function CZ(r){return r=Math.round(r),r<0?0:r>360?360:r}function Bg(r){return r<0?0:r>1?1:r}function jx(r){var t=r;return t.length&&t.charAt(t.length-1)==="%"?ks(parseFloat(t)/100*255):ks(parseInt(t,10))}function ml(r){var t=r;return t.length&&t.charAt(t.length-1)==="%"?Bg(parseFloat(t)/100):Bg(parseFloat(t))}function NN(r,t,e){return e<0?e+=1:e>1&&(e-=1),e*6<1?r+(t-r)*e*6:e*2<1?t:e*3<2?r+(t-r)*(2/3-e)*6:r}function jo(r,t,e){return r+(t-r)*e}function Kn(r,t,e,a,n){return r[0]=t,r[1]=e,r[2]=a,r[3]=n,r}function TS(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}var Tz=new Eh(20),i0=null;function Id(r,t){i0&&TS(i0,t),i0=Tz.put(r,i0||t.slice())}function Va(r,t){if(r){t=t||[];var e=Tz.get(r);if(e)return TS(t,e);r=r+"";var a=r.replace(/ /g,"").toLowerCase();if(a in vR)return TS(t,vR[a]),Id(r,t),t;var n=a.length;if(a.charAt(0)==="#"){if(n===4||n===5){var s=parseInt(a.slice(1,4),16);if(!(s>=0&&s<=4095)){Kn(t,0,0,0,1);return}return Kn(t,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,n===5?parseInt(a.slice(4),16)/15:1),Id(r,t),t}else if(n===7||n===9){var s=parseInt(a.slice(1,7),16);if(!(s>=0&&s<=16777215)){Kn(t,0,0,0,1);return}return Kn(t,(s&16711680)>>16,(s&65280)>>8,s&255,n===9?parseInt(a.slice(7),16)/255:1),Id(r,t),t}return}var l=a.indexOf("("),o=a.indexOf(")");if(l!==-1&&o+1===n){var c=a.substr(0,l),u=a.substr(l+1,o-(l+1)).split(","),d=1;switch(c){case"rgba":if(u.length!==4)return u.length===3?Kn(t,+u[0],+u[1],+u[2],1):Kn(t,0,0,0,1);d=ml(u.pop());case"rgb":if(u.length>=3)return Kn(t,jx(u[0]),jx(u[1]),jx(u[2]),u.length===3?d:ml(u[3])),Id(r,t),t;Kn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Kn(t,0,0,0,1);return}return u[3]=ml(u[3]),AS(u,t),Id(r,t),t;case"hsl":if(u.length!==3){Kn(t,0,0,0,1);return}return AS(u,t),Id(r,t),t;default:return}}Kn(t,0,0,0,1)}}function AS(r,t){var e=(parseFloat(r[0])%360+360)%360/360,a=ml(r[1]),n=ml(r[2]),s=n<=.5?n*(a+1):n+a-n*a,l=n*2-s;return t=t||[],Kn(t,ks(NN(l,s,e+1/3)*255),ks(NN(l,s,e)*255),ks(NN(l,s,e-1/3)*255),1),r.length===4&&(t[3]=r[3]),t}function TZ(r){if(r){var t=r[0]/255,e=r[1]/255,a=r[2]/255,n=Math.min(t,e,a),s=Math.max(t,e,a),l=s-n,o=(s+n)/2,c,u;if(l===0)c=0,u=0;else{o<.5?u=l/(s+n):u=l/(2-s-n);var d=((s-t)/6+l/2)/l,h=((s-e)/6+l/2)/l,p=((s-a)/6+l/2)/l;t===s?c=p-h:e===s?c=1/3+d-p:a===s&&(c=2/3+h-d),c<0&&(c+=1),c>1&&(c-=1)}var g=[c*360,u,o];return r[3]!=null&&g.push(r[3]),g}}function ty(r,t){var e=Va(r);if(e){for(var a=0;a<3;a++)t<0?e[a]=e[a]*(1-t)|0:e[a]=(255-e[a])*t+e[a]|0,e[a]>255?e[a]=255:e[a]<0&&(e[a]=0);return os(e,e.length===4?"rgba":"rgb")}}function AZ(r){var t=Va(r);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function _g(r,t,e){if(!(!(t&&t.length)||!(r>=0&&r<=1))){e=e||[];var a=r*(t.length-1),n=Math.floor(a),s=Math.ceil(a),l=t[n],o=t[s],c=a-n;return e[0]=ks(jo(l[0],o[0],c)),e[1]=ks(jo(l[1],o[1],c)),e[2]=ks(jo(l[2],o[2],c)),e[3]=Bg(jo(l[3],o[3],c)),e}}var EZ=_g;function ZC(r,t,e){if(!(!(t&&t.length)||!(r>=0&&r<=1))){var a=r*(t.length-1),n=Math.floor(a),s=Math.ceil(a),l=Va(t[n]),o=Va(t[s]),c=a-n,u=os([ks(jo(l[0],o[0],c)),ks(jo(l[1],o[1],c)),ks(jo(l[2],o[2],c)),Bg(jo(l[3],o[3],c))],"rgba");return e?{color:u,leftIndex:n,rightIndex:s,value:a}:u}}var DZ=ZC;function vl(r,t,e,a){var n=Va(r);if(r)return n=TZ(n),t!=null&&(n[0]=CZ(Le(t)?t(n[0]):t)),e!=null&&(n[1]=ml(Le(e)?e(n[1]):e)),a!=null&&(n[2]=ml(Le(a)?a(n[2]):a)),os(AS(n),"rgba")}function Vg(r,t){var e=Va(r);if(e&&t!=null)return e[3]=Bg(t),os(e,"rgba")}function os(r,t){if(!(!r||!r.length)){var e=r[0]+","+r[1]+","+r[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(e+=","+r[3]),t+"("+e+")"}}function Hg(r,t){var e=Va(r);return e?(.299*e[0]+.587*e[1]+.114*e[2])*e[3]/255+(1-e[3])*t:0}function MZ(){return os([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var xR=new Eh(100);function ry(r){if(je(r)){var t=xR.get(r);return t||(t=ty(r,-.1),xR.put(r,t)),t}else if(Nm(r)){var e=ie({},r);return e.colorStops=pe(r.colorStops,function(a){return{offset:a.offset,color:ty(a.color,-.1)}}),e}return r}const RZ=Object.freeze(Object.defineProperty({__proto__:null,fastLerp:_g,fastMapToColor:EZ,lerp:ZC,lift:ty,liftColor:ry,lum:Hg,mapToColor:DZ,modifyAlpha:Vg,modifyHSL:vl,parse:Va,parseCssFloat:ml,parseCssInt:jx,random:MZ,stringify:os,toHex:AZ},Symbol.toStringTag,{value:"Module"}));var ay=Math.round;function Gg(r){var t;if(!r||r==="transparent")r="none";else if(typeof r=="string"&&r.indexOf("rgba")>-1){var e=Va(r);e&&(r="rgb("+e[0]+","+e[1]+","+e[2]+")",t=e[3])}return{color:r,opacity:t??1}}var yR=1e-4;function wo(r){return r<yR&&r>-yR}function l0(r){return ay(r*1e3)/1e3}function ES(r){return ay(r*1e4)/1e4}function LZ(r){return"matrix("+l0(r[0])+","+l0(r[1])+","+l0(r[2])+","+l0(r[3])+","+ES(r[4])+","+ES(r[5])+")"}var IZ={left:"start",right:"end",center:"middle",middle:"middle"};function kZ(r,t,e){return e==="top"?r+=t/2:e==="bottom"&&(r-=t/2),r}function OZ(r){return r&&(r.shadowBlur||r.shadowOffsetX||r.shadowOffsetY)}function PZ(r){var t=r.style,e=r.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),e[0],e[1]].join(",")}function Az(r){return r&&!!r.image}function zZ(r){return r&&!!r.svgElement}function KC(r){return Az(r)||zZ(r)}function Ez(r){return r.type==="linear"}function Dz(r){return r.type==="radial"}function Mz(r){return r&&(r.type==="linear"||r.type==="radial")}function vb(r){return"url(#"+r+")"}function Rz(r){var t=r.getGlobalScale(),e=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(e)/Math.log(10)),1)}function Lz(r){var t=r.x||0,e=r.y||0,a=(r.rotation||0)*mg,n=Me(r.scaleX,1),s=Me(r.scaleY,1),l=r.skewX||0,o=r.skewY||0,c=[];return(t||e)&&c.push("translate("+t+"px,"+e+"px)"),a&&c.push("rotate("+a+")"),(n!==1||s!==1)&&c.push("scale("+n+","+s+")"),(l||o)&&c.push("skew("+ay(l*mg)+"deg, "+ay(o*mg)+"deg)"),c.join(" ")}var BZ=(function(){return pt.hasGlobalWindow&&Le(window.btoa)?function(r){return window.btoa(unescape(encodeURIComponent(r)))}:typeof Buffer<"u"?function(r){return Buffer.from(r).toString("base64")}:function(r){return null}})(),DS=Array.prototype.slice;function sl(r,t,e){return(t-r)*e+r}function jN(r,t,e,a){for(var n=t.length,s=0;s<n;s++)r[s]=sl(t[s],e[s],a);return r}function VZ(r,t,e,a){for(var n=t.length,s=n&&t[0].length,l=0;l<n;l++){r[l]||(r[l]=[]);for(var o=0;o<s;o++)r[l][o]=sl(t[l][o],e[l][o],a)}return r}function o0(r,t,e,a){for(var n=t.length,s=0;s<n;s++)r[s]=t[s]+e[s]*a;return r}function bR(r,t,e,a){for(var n=t.length,s=n&&t[0].length,l=0;l<n;l++){r[l]||(r[l]=[]);for(var o=0;o<s;o++)r[l][o]=t[l][o]+e[l][o]*a}return r}function HZ(r,t){for(var e=r.length,a=t.length,n=e>a?t:r,s=Math.min(e,a),l=n[s-1]||{color:[0,0,0,0],offset:0},o=s;o<Math.max(e,a);o++)n.push({offset:l.offset,color:l.color.slice()})}function GZ(r,t,e){var a=r,n=t;if(!(!a.push||!n.push)){var s=a.length,l=n.length;if(s!==l){var o=s>l;if(o)a.length=l;else for(var c=s;c<l;c++)a.push(e===1?n[c]:DS.call(n[c]))}for(var u=a[0]&&a[0].length,c=0;c<a.length;c++)if(e===1)isNaN(a[c])&&(a[c]=n[c]);else for(var d=0;d<u;d++)isNaN(a[c][d])&&(a[c][d]=n[c][d])}}function Ng(r){if(Aa(r)){var t=r.length;if(Aa(r[0])){for(var e=[],a=0;a<t;a++)e.push(DS.call(r[a]));return e}return DS.call(r)}return r}function Sx(r){return r[0]=Math.floor(r[0])||0,r[1]=Math.floor(r[1])||0,r[2]=Math.floor(r[2])||0,r[3]=r[3]==null?1:r[3],"rgba("+r.join(",")+")"}function UZ(r){return Aa(r&&r[0])?2:1}var c0=0,Cx=1,Iz=2,ag=3,MS=4,RS=5,_R=6;function NR(r){return r===MS||r===RS}function u0(r){return r===Cx||r===Iz}var Np=[0,0,0,0],FZ=(function(){function r(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return r.prototype.isFinished=function(){return this._finished},r.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},r.prototype.needsAnimate=function(){return this.keyframes.length>=1},r.prototype.getAdditiveTrack=function(){return this._additiveTrack},r.prototype.addKeyframe=function(t,e,a){this._needsSort=!0;var n=this.keyframes,s=n.length,l=!1,o=_R,c=e;if(Aa(e)){var u=UZ(e);o=u,(u===1&&!xt(e[0])||u===2&&!xt(e[0][0]))&&(l=!0)}else if(xt(e)&&!Ta(e))o=c0;else if(je(e))if(!isNaN(+e))o=c0;else{var d=Va(e);d&&(c=d,o=ag)}else if(Nm(e)){var h=ie({},c);h.colorStops=pe(e.colorStops,function(g){return{offset:g.offset,color:Va(g.color)}}),Ez(e)?o=MS:Dz(e)&&(o=RS),c=h}s===0?this.valType=o:(o!==this.valType||o===_R)&&(l=!0),this.discrete=this.discrete||l;var p={time:t,value:c,rawValue:e,percent:0};return a&&(p.easing=a,p.easingFunc=Le(a)?a:bg[a]||XC(a)),n.push(p),p},r.prototype.prepare=function(t,e){var a=this.keyframes;this._needsSort&&a.sort(function(y,x){return y.time-x.time});for(var n=this.valType,s=a.length,l=a[s-1],o=this.discrete,c=u0(n),u=NR(n),d=0;d<s;d++){var h=a[d],p=h.value,g=l.value;h.percent=h.time/t,o||(c&&d!==s-1?GZ(p,g,n):u&&HZ(p.colorStops,g.colorStops))}if(!o&&n!==RS&&e&&this.needsAnimate()&&e.needsAnimate()&&n===e.valType&&!e._finished){this._additiveTrack=e;for(var v=a[0].value,d=0;d<s;d++)n===c0?a[d].additiveValue=a[d].value-v:n===ag?a[d].additiveValue=o0([],a[d].value,v,-1):u0(n)&&(a[d].additiveValue=n===Cx?o0([],a[d].value,v,-1):bR([],a[d].value,v,-1))}},r.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var a=this._additiveTrack!=null,n=a?"additiveValue":"value",s=this.valType,l=this.keyframes,o=l.length,c=this.propName,u=s===ag,d,h=this._lastFr,p=Math.min,g,v;if(o===1)g=v=l[0];else{if(e<0)d=0;else if(e<this._lastFrP){var y=p(h+1,o-1);for(d=y;d>=0&&!(l[d].percent<=e);d--);d=p(d,o-2)}else{for(d=h;d<o&&!(l[d].percent>e);d++);d=p(d-1,o-2)}v=l[d+1],g=l[d]}if(g&&v){this._lastFr=d,this._lastFrP=e;var x=v.percent-g.percent,b=x===0?1:p((e-g.percent)/x,1);v.easingFunc&&(b=v.easingFunc(b));var N=a?this._additiveValue:u?Np:t[c];if((u0(s)||u)&&!N&&(N=this._additiveValue=[]),this.discrete)t[c]=b<1?g.rawValue:v.rawValue;else if(u0(s))s===Cx?jN(N,g[n],v[n],b):VZ(N,g[n],v[n],b);else if(NR(s)){var w=g[n],S=v[n],T=s===MS;t[c]={type:T?"linear":"radial",x:sl(w.x,S.x,b),y:sl(w.y,S.y,b),colorStops:pe(w.colorStops,function(C,M){var R=S.colorStops[M];return{offset:sl(C.offset,R.offset,b),color:Sx(jN([],C.color,R.color,b))}}),global:S.global},T?(t[c].x2=sl(w.x2,S.x2,b),t[c].y2=sl(w.y2,S.y2,b)):t[c].r=sl(w.r,S.r,b)}else if(u)jN(N,g[n],v[n],b),a||(t[c]=Sx(N));else{var A=sl(g[n],v[n],b);a?this._additiveValue=A:t[c]=A}a&&this._addToTarget(t)}}},r.prototype._addToTarget=function(t){var e=this.valType,a=this.propName,n=this._additiveValue;e===c0?t[a]=t[a]+n:e===ag?(Va(t[a],Np),o0(Np,Np,n,1),t[a]=Sx(Np)):e===Cx?o0(t[a],t[a],n,1):e===Iz&&bR(t[a],t[a],n,1)},r})(),QC=(function(){function r(t,e,a,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&n){hb("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=a}return r.prototype.getMaxTime=function(){return this._maxTime},r.prototype.getDelay=function(){return this._delay},r.prototype.getLoop=function(){return this._loop},r.prototype.getTarget=function(){return this._target},r.prototype.changeTarget=function(t){this._target=t},r.prototype.when=function(t,e,a){return this.whenWithKeys(t,e,gt(e),a)},r.prototype.whenWithKeys=function(t,e,a,n){for(var s=this._tracks,l=0;l<a.length;l++){var o=a[l],c=s[o];if(!c){c=s[o]=new FZ(o);var u=void 0,d=this._getAdditiveTrack(o);if(d){var h=d.keyframes,p=h[h.length-1];u=p&&p.value,d.valType===ag&&u&&(u=Sx(u))}else u=this._target[o];if(u==null)continue;t>0&&c.addKeyframe(0,Ng(u),n),this._trackKeys.push(o)}c.addKeyframe(t,Ng(e[o]),n)}return this._maxTime=Math.max(this._maxTime,t),this},r.prototype.pause=function(){this._clip.pause(),this._paused=!0},r.prototype.resume=function(){this._clip.resume(),this._paused=!1},r.prototype.isPaused=function(){return!!this._paused},r.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},r.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,a=0;a<e;a++)t[a].call(this)},r.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var a=0;a<e.length;a++)e[a].call(this)},r.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,a=0;a<e.length;a++)t[e[a]].setFinished()},r.prototype._getAdditiveTrack=function(t){var e,a=this._additiveAnimators;if(a)for(var n=0;n<a.length;n++){var s=a[n].getTrack(t);s&&(e=s)}return e},r.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,a=[],n=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var l=this._trackKeys[s],o=this._tracks[l],c=this._getAdditiveTrack(l),u=o.keyframes,d=u.length;if(o.prepare(n,c),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var h=u[d-1];h&&(e._target[o.propName]=h.rawValue),o.setFinished()}else a.push(o)}if(a.length||this._force){var p=new wZ({life:n,loop:this._loop,delay:this._delay||0,onframe:function(g){e._started=2;var v=e._additiveAnimators;if(v){for(var y=!1,x=0;x<v.length;x++)if(v[x]._clip){y=!0;break}y||(e._additiveAnimators=null)}for(var x=0;x<a.length;x++)a[x].step(e._target,g);var b=e._onframeCbs;if(b)for(var x=0;x<b.length;x++)b[x](e._target,g)},ondestroy:function(){e._doneCallback()}});this._clip=p,this.animation&&this.animation.addClip(p),t&&p.setEasing(t)}else this._doneCallback();return this}},r.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},r.prototype.delay=function(t){return this._delay=t,this},r.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},r.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},r.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},r.prototype.getClip=function(){return this._clip},r.prototype.getTrack=function(t){return this._tracks[t]},r.prototype.getTracks=function(){var t=this;return pe(this._trackKeys,function(e){return t._tracks[e]})},r.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var a=this._tracks,n=this._trackKeys,s=0;s<t.length;s++){var l=a[t[s]];l&&!l.isFinished()&&(e?l.step(this._target,1):this._started===1&&l.step(this._target,0),l.setFinished())}for(var o=!0,s=0;s<n.length;s++)if(!a[n[s]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},r.prototype.saveTo=function(t,e,a){if(t){e=e||this._trackKeys;for(var n=0;n<e.length;n++){var s=e[n],l=this._tracks[s];if(!(!l||l.isFinished())){var o=l.keyframes,c=o[a?0:o.length-1];c&&(t[s]=Ng(c.rawValue))}}}},r.prototype.__changeFinalValue=function(t,e){e=e||gt(t);for(var a=0;a<e.length;a++){var n=e[a],s=this._tracks[n];if(s){var l=s.keyframes;if(l.length>1){var o=l.pop();s.addKeyframe(o.time,t[n]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},r})();function hh(){return new Date().getTime()}var YZ=(function(r){tr(t,r);function t(e){var a=r.call(this)||this;return a._running=!1,a._time=0,a._pausedTime=0,a._pauseStart=0,a._paused=!1,e=e||{},a.stage=e.stage||{},a}return t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var a=e.getClip();a&&this.addClip(a)},t.prototype.removeClip=function(e){if(e.animation){var a=e.prev,n=e.next;a?a.next=n:this._head=n,n?n.prev=a:this._tail=a,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var a=e.getClip();a&&this.removeClip(a),e.animation=null},t.prototype.update=function(e){for(var a=hh()-this._pausedTime,n=a-this._time,s=this._head;s;){var l=s.next,o=s.step(a,n);o&&(s.ondestroy(),this.removeClip(s)),s=l}this._time=a,e||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0;function a(){e._running&&(Qx(a),!e._paused&&e.update())}Qx(a)},t.prototype.start=function(){this._running||(this._time=hh(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=hh(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=hh()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var a=e.next;e.prev=e.next=e.animation=null,e=a}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(e,a){a=a||{},this.start();var n=new QC(e,a.loop);return this.addAnimator(n),n},t})(gs),WZ=300,wN=pt.domSupported,SN=(function(){var r=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},a=pe(r,function(n){var s=n.replace("mouse","pointer");return e.hasOwnProperty(s)?s:n});return{mouse:r,touch:t,pointer:a}})(),jR={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wR=!1;function LS(r){var t=r.pointerType;return t==="pen"||t==="touch"}function $Z(r){r.touching=!0,r.touchTimer!=null&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.touchTimer=setTimeout(function(){r.touching=!1,r.touchTimer=null},700)}function CN(r){r&&(r.zrByTouch=!0)}function qZ(r,t){return Qn(r.dom,new XZ(r,t),!0)}function kz(r,t){for(var e=t,a=!1;e&&e.nodeType!==9&&!(a=e.domBelongToZr||e!==t&&e===r.painterRoot);)e=e.parentNode;return a}var XZ=(function(){function r(t,e){this.stopPropagation=vr,this.stopImmediatePropagation=vr,this.preventDefault=vr,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}return r})(),Ss={mousedown:function(r){r=Qn(this.dom,r),this.__mayPointerCapture=[r.zrX,r.zrY],this.trigger("mousedown",r)},mousemove:function(r){r=Qn(this.dom,r);var t=this.__mayPointerCapture;t&&(r.zrX!==t[0]||r.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",r)},mouseup:function(r){r=Qn(this.dom,r),this.__togglePointerCapture(!1),this.trigger("mouseup",r)},mouseout:function(r){r=Qn(this.dom,r);var t=r.toElement||r.relatedTarget;kz(this,t)||(this.__pointerCapturing&&(r.zrEventControl="no_globalout"),this.trigger("mouseout",r))},wheel:function(r){wR=!0,r=Qn(this.dom,r),this.trigger("mousewheel",r)},mousewheel:function(r){wR||(r=Qn(this.dom,r),this.trigger("mousewheel",r))},touchstart:function(r){r=Qn(this.dom,r),CN(r),this.__lastTouchMoment=new Date,this.handler.processGesture(r,"start"),Ss.mousemove.call(this,r),Ss.mousedown.call(this,r)},touchmove:function(r){r=Qn(this.dom,r),CN(r),this.handler.processGesture(r,"change"),Ss.mousemove.call(this,r)},touchend:function(r){r=Qn(this.dom,r),CN(r),this.handler.processGesture(r,"end"),Ss.mouseup.call(this,r),+new Date-+this.__lastTouchMoment<WZ&&Ss.click.call(this,r)},pointerdown:function(r){Ss.mousedown.call(this,r)},pointermove:function(r){LS(r)||Ss.mousemove.call(this,r)},pointerup:function(r){Ss.mouseup.call(this,r)},pointerout:function(r){LS(r)||Ss.mouseout.call(this,r)}};B(["click","dblclick","contextmenu"],function(r){Ss[r]=function(t){t=Qn(this.dom,t),this.trigger(r,t)}});var IS={pointermove:function(r){LS(r)||IS.mousemove.call(this,r)},pointerup:function(r){IS.mouseup.call(this,r)},mousemove:function(r){this.trigger("mousemove",r)},mouseup:function(r){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",r),t&&(r.zrEventControl="only_globalout",this.trigger("mouseout",r))}};function ZZ(r,t){var e=t.domHandlers;pt.pointerEventsSupported?B(SN.pointer,function(a){Tx(t,a,function(n){e[a].call(r,n)})}):(pt.touchEventsSupported&&B(SN.touch,function(a){Tx(t,a,function(n){e[a].call(r,n),$Z(t)})}),B(SN.mouse,function(a){Tx(t,a,function(n){n=qC(n),t.touching||e[a].call(r,n)})}))}function KZ(r,t){pt.pointerEventsSupported?B(jR.pointer,e):pt.touchEventsSupported||B(jR.mouse,e);function e(a){function n(s){s=qC(s),kz(r,s.target)||(s=qZ(r,s),t.domHandlers[a].call(r,s))}Tx(t,a,n,{capture:!0})}}function Tx(r,t,e,a){r.mounted[t]=e,r.listenerOpts[t]=a,jS(r.domTarget,t,e,a)}function TN(r){var t=r.mounted;for(var e in t)t.hasOwnProperty(e)&&nZ(r.domTarget,e,t[e],r.listenerOpts[e]);r.mounted={}}var SR=(function(){function r(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e}return r})(),QZ=(function(r){tr(t,r);function t(e,a){var n=r.call(this)||this;return n.__pointerCapturing=!1,n.dom=e,n.painterRoot=a,n._localHandlerScope=new SR(e,Ss),wN&&(n._globalHandlerScope=new SR(document,IS)),ZZ(n,n._localHandlerScope),n}return t.prototype.dispose=function(){TN(this._localHandlerScope),wN&&TN(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,wN&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var a=this._globalHandlerScope;e?KZ(this,a):TN(a)}},t})(gs),Oz=1;pt.hasGlobalWindow&&(Oz=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var ny=Oz,kS=.4,OS="#333",PS="#ccc",JZ="#eee",CR=Sm,TR=5e-5;function bc(r){return r>TR||r<-TR}var _c=[],kd=[],AN=na(),EN=Math.abs,fl=(function(){function r(){}return r.prototype.getLocalTransform=function(t){return r.getLocalTransform(this,t)},r.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},r.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},r.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},r.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},r.prototype.needLocalTransform=function(){return bc(this.rotation)||bc(this.x)||bc(this.y)||bc(this.scaleX-1)||bc(this.scaleY-1)||bc(this.skewX)||bc(this.skewY)},r.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),a=this.transform;if(!(e||t)){a&&(CR(a),this.invTransform=null);return}a=a||na(),e?this.getLocalTransform(a):CR(a),t&&(e?Is(a,t,a):Cm(a,t)),this.transform=a,this._resolveGlobalScaleRatio(a)},r.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(e!=null&&e!==1){this.getGlobalScale(_c);var a=_c[0]<0?-1:1,n=_c[1]<0?-1:1,s=((_c[0]-a)*e+a)/_c[0]||0,l=((_c[1]-n)*e+n)/_c[1]||0;t[0]*=s,t[1]*=s,t[2]*=l,t[3]*=l}this.invTransform=this.invTransform||na(),hs(this.invTransform,t)},r.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},r.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],a=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),s=Math.PI/2+n-Math.atan2(t[3],t[2]);a=Math.sqrt(a)*Math.cos(s),e=Math.sqrt(e),this.skewX=s,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=a,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||na(),Is(kd,t.invTransform,e),e=kd);var a=this.originX,n=this.originY;(a||n)&&(AN[4]=a,AN[5]=n,Is(kd,e,AN),kd[4]-=a,kd[5]-=n,e=kd),this.setLocalTransform(e)}},r.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},r.prototype.transformCoordToLocal=function(t,e){var a=[t,e],n=this.invTransform;return n&&xr(a,a,n),a},r.prototype.transformCoordToGlobal=function(t,e){var a=[t,e],n=this.transform;return n&&xr(a,a,n),a},r.prototype.getLineScale=function(){var t=this.transform;return t&&EN(t[0]-1)>1e-10&&EN(t[3]-1)>1e-10?Math.sqrt(EN(t[0]*t[3]-t[2]*t[1])):1},r.prototype.copyTransform=function(t){sy(this,t)},r.getLocalTransform=function(t,e){e=e||[];var a=t.originX||0,n=t.originY||0,s=t.scaleX,l=t.scaleY,o=t.anchorX,c=t.anchorY,u=t.rotation||0,d=t.x,h=t.y,p=t.skewX?Math.tan(t.skewX):0,g=t.skewY?Math.tan(-t.skewY):0;if(a||n||o||c){var v=a+o,y=n+c;e[4]=-v*s-p*y*l,e[5]=-y*l-g*v*s}else e[4]=e[5]=0;return e[0]=s,e[3]=l,e[1]=g*s,e[2]=p*l,u&&Ml(e,e,u),e[4]+=a+d,e[5]+=n+h,e},r.initDefaultProps=(function(){var t=r.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0})(),r})(),Ni=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function sy(r,t){for(var e=0;e<Ni.length;e++){var a=Ni[e];r[a]=t[a]}}function bi(r){d0||(d0=new Eh(100)),r=r||jl;var t=d0.get(r);return t||(t={font:r,strWidthCache:new Eh(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:pn.measureText("",r).width,asciiCharWidth:pn.measureText("a",r).width},d0.put(r,t)),t}var d0;function eK(r){if(!(DN>=AR)){r=r||jl;for(var t=[],e=+new Date,a=0;a<=127;a++)t[a]=pn.measureText(String.fromCharCode(a),r).width;var n=+new Date-e;return n>16?DN=AR:n>2&&DN++,t}}var DN=0,AR=5;function Pz(r,t){return r.asciiWidthMapTried||(r.asciiWidthMap=eK(r.font),r.asciiWidthMapTried=!0),0<=t&&t<=127?r.asciiWidthMap!=null?r.asciiWidthMap[t]:r.asciiCharWidth:r.stWideCharWidth}function _i(r,t){var e=r.strWidthCache,a=e.get(t);return a==null&&(a=pn.measureText(t,r.font).width,e.put(t,a)),a}function ER(r,t,e,a){var n=_i(bi(t),r),s=Tm(t),l=Dh(0,n,e),o=hu(0,s,a),c=new We(l,o,n,s);return c}function xb(r,t,e,a){var n=((r||"")+"").split(`
`),s=n.length;if(s===1)return ER(n[0],t,e,a);for(var l=new We(0,0,0,0),o=0;o<n.length;o++){var c=ER(n[o],t,e,a);o===0?l.copy(c):l.union(c)}return l}function Dh(r,t,e,a){return e==="right"?a?r+=t:r-=t:e==="center"&&(a?r+=t/2:r-=t/2),r}function hu(r,t,e,a){return e==="middle"?a?r+=t/2:r-=t/2:e==="bottom"&&(a?r+=t:r-=t),r}function Tm(r){return bi(r).stWideCharWidth}function Bs(r,t){return typeof r=="string"?r.lastIndexOf("%")>=0?parseFloat(r)/100*t:parseFloat(r):r}function iy(r,t,e){var a=t.position||"inside",n=t.distance!=null?t.distance:5,s=e.height,l=e.width,o=s/2,c=e.x,u=e.y,d="left",h="top";if(a instanceof Array)c+=Bs(a[0],e.width),u+=Bs(a[1],e.height),d=null,h=null;else switch(a){case"left":c-=n,u+=o,d="right",h="middle";break;case"right":c+=n+l,u+=o,h="middle";break;case"top":c+=l/2,u-=n,d="center",h="bottom";break;case"bottom":c+=l/2,u+=s+n,d="center";break;case"inside":c+=l/2,u+=o,d="center",h="middle";break;case"insideLeft":c+=n,u+=o,h="middle";break;case"insideRight":c+=l-n,u+=o,d="right",h="middle";break;case"insideTop":c+=l/2,u+=n,d="center";break;case"insideBottom":c+=l/2,u+=s-n,d="center",h="bottom";break;case"insideTopLeft":c+=n,u+=n;break;case"insideTopRight":c+=l-n,u+=n,d="right";break;case"insideBottomLeft":c+=n,u+=s-n,h="bottom";break;case"insideBottomRight":c+=l-n,u+=s-n,d="right",h="bottom";break}return r=r||{},r.x=c,r.y=u,r.align=d,r.verticalAlign=h,r}var MN="__zr_normal__",RN=Ni.concat(["ignore"]),tK=ds(Ni,function(r,t){return r[t]=!0,r},{ignore:!1}),Od={},rK=new We(0,0,0,0),h0=[],yb=(function(){function r(t){this.id=FC(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return r.prototype._init=function(t){this.attr(t)},r.prototype.drift=function(t,e,a){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.markRedraw()},r.prototype.beforeUpdate=function(){},r.prototype.afterUpdate=function(){},r.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},r.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var a=this.textConfig,n=a.local,s=e.innerTransformable,l=void 0,o=void 0,c=!1;s.parent=n?this:null;var u=!1;s.copyTransform(e);var d=a.position!=null,h=a.autoOverflowArea,p=void 0;if((h||d)&&(p=rK,a.layoutRect?p.copy(a.layoutRect):p.copy(this.getBoundingRect()),n||p.applyTransform(this.transform)),d){this.calculateTextPosition?this.calculateTextPosition(Od,a,p):iy(Od,a,p),s.x=Od.x,s.y=Od.y,l=Od.align,o=Od.verticalAlign;var g=a.origin;if(g&&a.rotation!=null){var v=void 0,y=void 0;g==="center"?(v=p.width*.5,y=p.height*.5):(v=Bs(g[0],p.width),y=Bs(g[1],p.height)),u=!0,s.originX=-s.x+v+(n?0:p.x),s.originY=-s.y+y+(n?0:p.y)}}a.rotation!=null&&(s.rotation=a.rotation);var x=a.offset;x&&(s.x+=x[0],s.y+=x[1],u||(s.originX=-x[0],s.originY=-x[1]));var b=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(h){var N=b.overflowRect=b.overflowRect||new We(0,0,0,0);s.getLocalTransform(h0),hs(h0,h0),We.copy(N,p),N.applyTransform(h0)}else b.overflowRect=null;var w=a.inside==null?typeof a.position=="string"&&a.position.indexOf("inside")>=0:a.inside,S=void 0,T=void 0,A=void 0;w&&this.canBeInsideText()?(S=a.insideFill,T=a.insideStroke,(S==null||S==="auto")&&(S=this.getInsideTextFill()),(T==null||T==="auto")&&(T=this.getInsideTextStroke(S),A=!0)):(S=a.outsideFill,T=a.outsideStroke,(S==null||S==="auto")&&(S=this.getOutsideFill()),(T==null||T==="auto")&&(T=this.getOutsideStroke(S),A=!0)),S=S||"#000",(S!==b.fill||T!==b.stroke||A!==b.autoStroke||l!==b.align||o!==b.verticalAlign)&&(c=!0,b.fill=S,b.stroke=T,b.autoStroke=A,b.align=l,b.verticalAlign=o,e.setDefaultTextStyle(b)),e.__dirty|=Tn,c&&e.dirtyStyle(!0)}},r.prototype.canBeInsideText=function(){return!0},r.prototype.getInsideTextFill=function(){return"#fff"},r.prototype.getInsideTextStroke=function(t){return"#000"},r.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?PS:OS},r.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),a=typeof e=="string"&&Va(e);a||(a=[255,255,255,1]);for(var n=a[3],s=this.__zr.isDarkMode(),l=0;l<3;l++)a[l]=a[l]*n+(s?0:255)*(1-n);return a[3]=1,os(a,"rgba")},r.prototype.traverse=function(t,e){},r.prototype.attrKV=function(t,e){t==="textConfig"?this.setTextConfig(e):t==="textContent"?this.setTextContent(e):t==="clipPath"?this.setClipPath(e):t==="extra"?(this.extra=this.extra||{},ie(this.extra,e)):this[t]=e},r.prototype.hide=function(){this.ignore=!0,this.markRedraw()},r.prototype.show=function(){this.ignore=!1,this.markRedraw()},r.prototype.attr=function(t,e){if(typeof t=="string")this.attrKV(t,e);else if(Ue(t))for(var a=t,n=gt(a),s=0;s<n.length;s++){var l=n[s];this.attrKV(l,t[l])}return this.markRedraw(),this},r.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,a=0;a<this.animators.length;a++){var n=this.animators[a],s=n.__fromStateTransition;if(!(n.getLoop()||s&&s!==MN)){var l=n.targetName,o=l?e[l]:e;n.saveTo(o)}}},r.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,RN)},r.prototype._savePrimaryToNormal=function(t,e,a){for(var n=0;n<a.length;n++){var s=a[n];t[s]!=null&&!(s in e)&&(e[s]=this[s])}},r.prototype.hasState=function(){return this.currentStates.length>0},r.prototype.getState=function(t){return this.states[t]},r.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},r.prototype.clearStates=function(t){this.useState(MN,!1,t)},r.prototype.useState=function(t,e,a,n){var s=t===MN,l=this.hasState();if(!(!l&&s)){var o=this.currentStates,c=this.stateTransition;if(!(tt(o,t)>=0&&(e||o.length===1))){var u;if(this.stateProxy&&!s&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!s){hb("State "+t+" not exists.");return}s||this.saveCurrentToNormalState(u);var d=!!(u&&u.hoverLayer||n);d&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,e,!a&&!this.__inHover&&c&&c.duration>0,c);var h=this._textContent,p=this._textGuide;return h&&h.useState(t,e,a,d),p&&p.useState(t,e,a,d),s?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Tn),u}}},r.prototype.useStates=function(t,e,a){if(!t.length)this.clearStates();else{var n=[],s=this.currentStates,l=t.length,o=l===s.length;if(o){for(var c=0;c<l;c++)if(t[c]!==s[c]){o=!1;break}}if(o)return;for(var c=0;c<l;c++){var u=t[c],d=void 0;this.stateProxy&&(d=this.stateProxy(u,t)),d||(d=this.states[u]),d&&n.push(d)}var h=n[l-1],p=!!(h&&h.hoverLayer||a);p&&this._toggleHoverLayerFlag(!0);var g=this._mergeStates(n),v=this.stateTransition;this.saveCurrentToNormalState(g),this._applyStateObj(t.join(","),g,this._normalState,!1,!e&&!this.__inHover&&v&&v.duration>0,v);var y=this._textContent,x=this._textGuide;y&&y.useStates(t,e,p),x&&x.useStates(t,e,p),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!p&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Tn)}},r.prototype.isSilent=function(){for(var t=this;t;){if(t.silent)return!0;var e=t.__hostTarget;t=e?t.ignoreHostSilent?null:e:t.parent}return!1},r.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},r.prototype.removeState=function(t){var e=tt(this.currentStates,t);if(e>=0){var a=this.currentStates.slice();a.splice(e,1),this.useStates(a)}},r.prototype.replaceState=function(t,e,a){var n=this.currentStates.slice(),s=tt(n,t),l=tt(n,e)>=0;s>=0?l?n.splice(s,1):n[s]=e:a&&!l&&n.push(e),this.useStates(n)},r.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},r.prototype._mergeStates=function(t){for(var e={},a,n=0;n<t.length;n++){var s=t[n];ie(e,s),s.textConfig&&(a=a||{},ie(a,s.textConfig))}return a&&(e.textConfig=a),e},r.prototype._applyStateObj=function(t,e,a,n,s,l){var o=!(e&&n);e&&e.textConfig?(this.textConfig=ie({},n?this.textConfig:a.textConfig),ie(this.textConfig,e.textConfig)):o&&a.textConfig&&(this.textConfig=a.textConfig);for(var c={},u=!1,d=0;d<RN.length;d++){var h=RN[d],p=s&&tK[h];e&&e[h]!=null?p?(u=!0,c[h]=e[h]):this[h]=e[h]:o&&a[h]!=null&&(p?(u=!0,c[h]=a[h]):this[h]=a[h])}if(!s)for(var d=0;d<this.animators.length;d++){var g=this.animators[d],v=g.targetName;g.getLoop()||g.__changeFinalValue(v?(e||a)[v]:e||a)}u&&this._transitionState(t,c,l)},r.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},r.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},r.prototype.getClipPath=function(){return this._clipPath},r.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},r.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},r.prototype.getTextContent=function(){return this._textContent},r.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new fl,this._attachComponent(t),this._textContent=t,this.markRedraw())},r.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ie(this.textConfig,t),this.markRedraw()},r.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},r.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},r.prototype.getTextGuideLine=function(){return this._textGuide},r.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},r.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},r.prototype.markRedraw=function(){this.__dirty|=Tn;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},r.prototype.dirty=function(){this.markRedraw()},r.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,a=this._textGuide;e&&(e.__inHover=t),a&&(a.__inHover=t)},r.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var a=0;a<e.length;a++)t.animation.addAnimator(e[a]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},r.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var a=0;a<e.length;a++)t.animation.removeAnimator(e[a]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},r.prototype.animate=function(t,e,a){var n=t?this[t]:this,s=new QC(n,e,a);return t&&(s.targetName=t),this.addAnimator(s,t),s},r.prototype.addAnimator=function(t,e){var a=this.__zr,n=this;t.during(function(){n.updateDuringAnimation(e)}).done(function(){var s=n.animators,l=tt(s,t);l>=0&&s.splice(l,1)}),this.animators.push(t),a&&a.animation.addAnimator(t),a&&a.wakeUp()},r.prototype.updateDuringAnimation=function(t){this.markRedraw()},r.prototype.stopAnimation=function(t,e){for(var a=this.animators,n=a.length,s=[],l=0;l<n;l++){var o=a[l];!t||t===o.scope?o.stop(e):s.push(o)}return this.animators=s,this},r.prototype.animateTo=function(t,e,a){LN(this,t,e,a)},r.prototype.animateFrom=function(t,e,a){LN(this,t,e,a,!0)},r.prototype._transitionState=function(t,e,a,n){for(var s=LN(this,e,a,n),l=0;l<s.length;l++)s[l].__fromStateTransition=t},r.prototype.getBoundingRect=function(){return null},r.prototype.getPaintRect=function(){return null},r.initDefaultProps=(function(){var t=r.prototype;t.type="element",t.name="",t.ignore=t.silent=t.ignoreHostSilent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Tn;function e(a,n,s,l){Object.defineProperty(t,a,{get:function(){if(!this[n]){var c=this[n]=[];o(this,c)}return this[n]},set:function(c){this[s]=c[0],this[l]=c[1],this[n]=c,o(this,c)}});function o(c,u){Object.defineProperty(u,0,{get:function(){return c[s]},set:function(d){c[s]=d}}),Object.defineProperty(u,1,{get:function(){return c[l]},set:function(d){c[l]=d}})}}Object.defineProperty&&(e("position","_legacyPos","x","y"),e("scale","_legacyScale","scaleX","scaleY"),e("origin","_legacyOrigin","originX","originY"))})(),r})();yr(yb,gs);yr(yb,fl);function LN(r,t,e,a,n){e=e||{};var s=[];zz(r,"",r,t,e,a,s,n);var l=s.length,o=!1,c=e.done,u=e.aborted,d=function(){o=!0,l--,l<=0&&(o?c&&c():u&&u())},h=function(){l--,l<=0&&(o?c&&c():u&&u())};l||c&&c(),s.length>0&&e.during&&s[0].during(function(v,y){e.during(y)});for(var p=0;p<s.length;p++){var g=s[p];d&&g.done(d),h&&g.aborted(h),e.force&&g.duration(e.duration),g.start(e.easing)}return s}function IN(r,t,e){for(var a=0;a<e;a++)r[a]=t[a]}function aK(r){return Aa(r[0])}function nK(r,t,e){if(Aa(t[e]))if(Aa(r[e])||(r[e]=[]),Xa(t[e])){var a=t[e].length;r[e].length!==a&&(r[e]=new t[e].constructor(a),IN(r[e],t[e],a))}else{var n=t[e],s=r[e],l=n.length;if(aK(n))for(var o=n[0].length,c=0;c<l;c++)s[c]?IN(s[c],n[c],o):s[c]=Array.prototype.slice.call(n[c]);else IN(s,n,l);s.length=n.length}else r[e]=t[e]}function sK(r,t){return r===t||Aa(r)&&Aa(t)&&iK(r,t)}function iK(r,t){var e=r.length;if(e!==t.length)return!1;for(var a=0;a<e;a++)if(r[a]!==t[a])return!1;return!0}function zz(r,t,e,a,n,s,l,o){for(var c=gt(a),u=n.duration,d=n.delay,h=n.additive,p=n.setToFinal,g=!Ue(s),v=r.animators,y=[],x=0;x<c.length;x++){var b=c[x],N=a[b];if(N!=null&&e[b]!=null&&(g||s[b]))if(Ue(N)&&!Aa(N)&&!Nm(N)){if(t){o||(e[b]=N,r.updateDuringAnimation(t));continue}zz(r,b,e[b],N,n,s&&s[b],l,o)}else y.push(b);else o||(e[b]=N,r.updateDuringAnimation(t),y.push(b))}var w=y.length;if(!h&&w)for(var S=0;S<v.length;S++){var T=v[S];if(T.targetName===t){var A=T.stopTracks(y);if(A){var C=tt(v,T);v.splice(C,1)}}}if(n.force||(y=Ct(y,function(L){return!sK(a[L],e[L])}),w=y.length),w>0||n.force&&!l.length){var M=void 0,R=void 0,k=void 0;if(o){R={},p&&(M={});for(var S=0;S<w;S++){var b=y[S];R[b]=e[b],p?M[b]=a[b]:e[b]=a[b]}}else if(p){k={};for(var S=0;S<w;S++){var b=y[S];k[b]=Ng(e[b]),nK(e,a,b)}}var T=new QC(e,!1,!1,h?Ct(v,function(O){return O.targetName===t}):null);T.targetName=t,n.scope&&(T.scope=n.scope),p&&M&&T.whenWithKeys(0,M,y),k&&T.whenWithKeys(0,k,y),T.whenWithKeys(u??500,o?R:a,y).delay(d||0),r.addAnimator(T,t),l.push(T)}}var Pe=(function(r){tr(t,r);function t(e){var a=r.call(this)||this;return a.isGroup=!0,a._children=[],a.attr(e),a}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var a=this._children,n=0;n<a.length;n++)if(a[n].name===e)return a[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,a){if(e&&e!==this&&e.parent!==this&&a&&a.parent===this){var n=this._children,s=n.indexOf(a);s>=0&&(n.splice(s,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,a){var n=tt(this._children,e);return n>=0&&this.replaceAt(a,n),this},t.prototype.replaceAt=function(e,a){var n=this._children,s=n[a];if(e&&e!==this&&e.parent!==this&&e!==s){n[a]=e,s.parent=null;var l=this.__zr;l&&s.removeSelfFromZr(l),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var a=this.__zr;a&&a!==e.__zr&&e.addSelfToZr(a),a&&a.refresh()},t.prototype.remove=function(e){var a=this.__zr,n=this._children,s=tt(n,e);return s<0?this:(n.splice(s,1),e.parent=null,a&&e.removeSelfFromZr(a),a&&a.refresh(),this)},t.prototype.removeAll=function(){for(var e=this._children,a=this.__zr,n=0;n<e.length;n++){var s=e[n];a&&s.removeSelfFromZr(a),s.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,a){for(var n=this._children,s=0;s<n.length;s++){var l=n[s];e.call(a,l,s)}return this},t.prototype.traverse=function(e,a){for(var n=0;n<this._children.length;n++){var s=this._children[n],l=e.call(a,s);s.isGroup&&!l&&s.traverse(e,a)}return this},t.prototype.addSelfToZr=function(e){r.prototype.addSelfToZr.call(this,e);for(var a=0;a<this._children.length;a++){var n=this._children[a];n.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){r.prototype.removeSelfFromZr.call(this,e);for(var a=0;a<this._children.length;a++){var n=this._children[a];n.removeSelfFromZr(e)}},t.prototype.getBoundingRect=function(e){for(var a=new We(0,0,0,0),n=e||this._children,s=[],l=null,o=0;o<n.length;o++){var c=n[o];if(!(c.ignore||c.invisible)){var u=c.getBoundingRect(),d=c.getLocalTransform(s);d?(We.applyTransform(a,u,d),l=l||a.clone(),l.union(a)):(l=l||u.clone(),l.union(u))}}return l||a},t})(yb);Pe.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Ax={},tu={};function lK(r){delete tu[r]}function oK(r){if(!r)return!1;if(typeof r=="string")return Hg(r,1)<kS;if(r.colorStops){for(var t=r.colorStops,e=0,a=t.length,n=0;n<a;n++)e+=Hg(t[n].color,1);return e/=a,e<kS}return!1}var cK=(function(){function r(t,e,a){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,a=a||{},this.dom=e,this.id=t;var s=new yZ,l=a.renderer||"canvas";Ax[l]||(l=gt(Ax)[0]),a.useDirtyRect=a.useDirtyRect==null?!1:a.useDirtyRect;var o=new Ax[l](e,s,a,t),c=a.ssr||o.ssrOnly;this.storage=s,this.painter=o;var u=!pt.node&&!pt.worker&&!c?new QZ(o.getViewportRoot(),o.root):null,d=a.useCoarsePointer,h=d==null||d==="auto"?pt.touchEventsSupported:!!d,p=44,g;h&&(g=Me(a.pointerSize,p)),this.handler=new vz(s,o,u,o.root,g),this.animation=new YZ({stage:{update:c?null:function(){return n._flush(!0)}}}),c||this.animation.start()}return r.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},r.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},r.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},r.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=oK(t))},r.prototype.getBackgroundColor=function(){return this._backgroundColor},r.prototype.setDarkMode=function(t){this._darkMode=t},r.prototype.isDarkMode=function(){return this._darkMode},r.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},r.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},r.prototype.flush=function(){this._disposed||this._flush(!1)},r.prototype._flush=function(t){var e,a=hh();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var n=hh();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-a})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},r.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},r.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},r.prototype.refreshHover=function(){this._needsRefreshHover=!0},r.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},r.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},r.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},r.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},r.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},r.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},r.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},r.prototype.on=function(t,e,a){return this._disposed||this.handler.on(t,e,a),this},r.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},r.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},r.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof Pe&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},r.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,lK(this.id))},r})();function zS(r,t){var e=new cK(FC(),r,t);return tu[e.id]=e,e}function uK(r){r.dispose()}function dK(){for(var r in tu)tu.hasOwnProperty(r)&&tu[r].dispose();tu={}}function hK(r){return tu[r]}function Bz(r,t){Ax[r]=t}var BS;function Vz(r){if(typeof BS=="function")return BS(r)}function Hz(r){BS=r}var fK="6.0.0";const pK=Object.freeze(Object.defineProperty({__proto__:null,dispose:uK,disposeAll:dK,getElementSSRData:Vz,getInstance:hK,init:zS,registerPainter:Bz,registerSSRDataGetter:Hz,version:fK},Symbol.toStringTag,{value:"Module"}));var DR=1e-4,Gz=20;function gK(r){return r.replace(/^\s+|\s+$/g,"")}var In=Math.min,Sr=Math.max,fi=Math.abs;function Tt(r,t,e,a){var n=t[0],s=t[1],l=e[0],o=e[1],c=s-n,u=o-l;if(c===0)return u===0?l:(l+o)/2;if(a)if(c>0){if(r<=n)return l;if(r>=s)return o}else{if(r>=n)return l;if(r<=s)return o}else{if(r===n)return l;if(r===s)return o}return(r-n)/c*u+l}var Ne=mK;function mK(r,t,e){switch(r){case"center":case"middle":r="50%";break;case"left":case"top":r="0%";break;case"right":case"bottom":r="100%";break}return ly(r,t,e)}function ly(r,t,e){return je(r)?gK(r).match(/%$/)?parseFloat(r)/100*t+(e||0):parseFloat(r):r==null?NaN:+r}function Cr(r,t,e){return t==null&&(t=10),t=Math.min(Math.max(0,t),Gz),r=(+r).toFixed(t),e?r:+r}function Mn(r){return r.sort(function(t,e){return t-e}),r}function Ds(r){if(r=+r,isNaN(r))return 0;if(r>1e-14){for(var t=1,e=0;e<15;e++,t*=10)if(Math.round(r*t)/t===r)return e}return Uz(r)}function Uz(r){var t=r.toString().toLowerCase(),e=t.indexOf("e"),a=e>0?+t.slice(e+1):0,n=e>0?e:t.length,s=t.indexOf("."),l=s<0?0:n-1-s;return Math.max(0,l-a)}function JC(r,t){var e=Math.log,a=Math.LN10,n=Math.floor(e(r[1]-r[0])/a),s=Math.round(e(fi(t[1]-t[0]))/a),l=Math.min(Math.max(-n+s,0),20);return isFinite(l)?l:20}function vK(r,t,e){if(!r[t])return 0;var a=Fz(r,e);return a[t]||0}function Fz(r,t){var e=ds(r,function(g,v){return g+(isNaN(v)?0:v)},0);if(e===0)return[];for(var a=Math.pow(10,t),n=pe(r,function(g){return(isNaN(g)?0:g)/e*a*100}),s=a*100,l=pe(n,function(g){return Math.floor(g)}),o=ds(l,function(g,v){return g+v},0),c=pe(n,function(g,v){return g-l[v]});o<s;){for(var u=Number.NEGATIVE_INFINITY,d=null,h=0,p=c.length;h<p;++h)c[h]>u&&(u=c[h],d=h);++l[d],c[d]=0,++o}return pe(l,function(g){return g/a})}function xK(r,t){var e=Math.max(Ds(r),Ds(t)),a=r+t;return e>Gz?a:Cr(a,e)}var VS=9007199254740991;function eT(r){var t=Math.PI*2;return(r%t+t)%t}function Mh(r){return r>-DR&&r<DR}var yK=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Ai(r){if(r instanceof Date)return r;if(je(r)){var t=yK.exec(r);if(!t)return new Date(NaN);if(t[8]){var e=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(e-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,e,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(r==null)return new Date(NaN);return new Date(Math.round(r))}function Yz(r){return Math.pow(10,bb(r))}function bb(r){if(r===0)return 0;var t=Math.floor(Math.log(r)/Math.LN10);return r/Math.pow(10,t)>=10&&t++,t}function tT(r,t){var e=bb(r),a=Math.pow(10,e),n=r/a,s;return t?n<1.5?s=1:n<2.5?s=2:n<4?s=3:n<7?s=5:s=10:n<1?s=1:n<2?s=2:n<3?s=3:n<5?s=5:s=10,r=s*a,e>=-20?+r.toFixed(e<0?-e:0):r}function Ex(r,t){var e=(r.length-1)*t+1,a=Math.floor(e),n=+r[a-1],s=e-a;return s?n+s*(r[a]-n):n}function HS(r){r.sort(function(c,u){return o(c,u,0)?-1:1});for(var t=-1/0,e=1,a=0;a<r.length;){for(var n=r[a].interval,s=r[a].close,l=0;l<2;l++)n[l]<=t&&(n[l]=t,s[l]=l?1:1-e),t=n[l],e=s[l];n[0]===n[1]&&s[0]*s[1]!==1?r.splice(a,1):a++}return r;function o(c,u,d){return c.interval[d]<u.interval[d]||c.interval[d]===u.interval[d]&&(c.close[d]-u.close[d]===(d?-1:1)||!d&&o(c,u,1))}}function ji(r){var t=parseFloat(r);return t==r&&(t!==0||!je(r)||r.indexOf("x")<=0)?t:NaN}function rT(r){return!isNaN(ji(r))}function Wz(){return Math.round(Math.random()*9)}function $z(r,t){return t===0?r:$z(t,r%t)}function MR(r,t){return r==null?t:t==null?r:r*t/$z(r,t)}var bK="[ECharts] ",_K=typeof console<"u"&&console.warn&&console.log;function NK(r,t,e){_K&&console[r](bK+t)}function qz(r,t){NK("error",r)}function At(r){throw new Error(r)}function RR(r,t,e){return(t-r)*e+r}var Xz="series\0",Zz="\0_ec_\0";function Ft(r){return r instanceof Array?r:r==null?[]:[r]}function wu(r,t,e){if(r){r[t]=r[t]||{},r.emphasis=r.emphasis||{},r.emphasis[t]=r.emphasis[t]||{};for(var a=0,n=e.length;a<n;a++){var s=e[a];!r.emphasis[t].hasOwnProperty(s)&&r[t].hasOwnProperty(s)&&(r.emphasis[t][s]=r[t][s])}}}var LR=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Zh(r){return Ue(r)&&!de(r)&&!(r instanceof Date)?r.value:r}function jK(r){return Ue(r)&&!(r instanceof Array)}function Kz(r,t,e){var a=e==="normalMerge",n=e==="replaceMerge",s=e==="replaceAll";r=r||[],t=(t||[]).slice();var l=De();B(t,function(c,u){if(!Ue(c)){t[u]=null;return}});var o=wK(r,l,e);return(a||n)&&SK(o,r,l,t),a&&CK(o,t),a||n?TK(o,t,n):s&&AK(o,t),EK(o),o}function wK(r,t,e){var a=[];if(e==="replaceAll")return a;for(var n=0;n<r.length;n++){var s=r[n];s&&s.id!=null&&t.set(s.id,n),a.push({existing:e==="replaceMerge"||Ug(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return a}function SK(r,t,e,a){B(a,function(n,s){if(!(!n||n.id==null)){var l=jg(n.id),o=e.get(l);if(o!=null){var c=r[o];Ea(!c.newOption,'Duplicated option on id "'+l+'".'),c.newOption=n,c.existing=t[o],a[s]=null}}})}function CK(r,t){B(t,function(e,a){if(!(!e||e.name==null))for(var n=0;n<r.length;n++){var s=r[n].existing;if(!r[n].newOption&&s&&(s.id==null||e.id==null)&&!Ug(e)&&!Ug(s)&&Qz("name",s,e)){r[n].newOption=e,t[a]=null;return}}})}function TK(r,t,e){B(t,function(a){if(a){for(var n,s=0;(n=r[s])&&(n.newOption||Ug(n.existing)||n.existing&&a.id!=null&&!Qz("id",a,n.existing));)s++;n?(n.newOption=a,n.brandNew=e):r.push({newOption:a,brandNew:e,existing:null,keyInfo:null}),s++}})}function AK(r,t){B(t,function(e){r.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})})}function EK(r){var t=De();B(r,function(e){var a=e.existing;a&&t.set(a.id,e)}),B(r,function(e){var a=e.newOption;Ea(!a||a.id==null||!t.get(a.id)||t.get(a.id)===e,"id duplicates: "+(a&&a.id)),a&&a.id!=null&&t.set(a.id,e),!e.keyInfo&&(e.keyInfo={})}),B(r,function(e,a){var n=e.existing,s=e.newOption,l=e.keyInfo;if(Ue(s)){if(l.name=s.name!=null?jg(s.name):n?n.name:Xz+a,n)l.id=jg(n.id);else if(s.id!=null)l.id=jg(s.id);else{var o=0;do l.id="\0"+l.name+"\0"+o++;while(t.get(l.id))}t.set(l.id,e)}})}function Qz(r,t,e){var a=$r(t[r],null),n=$r(e[r],null);return a!=null&&n!=null&&a===n}function jg(r){return $r(r,"")}function $r(r,t){return r==null?t:je(r)?r:xt(r)||qx(r)?r+"":t}function aT(r){var t=r.name;return!!(t&&t.indexOf(Xz))}function Ug(r){return r&&r.id!=null&&jg(r.id).indexOf(Zz)===0}function DK(r){return Zz+r}function MK(r,t,e){B(r,function(a){var n=a.newOption;Ue(n)&&(a.keyInfo.mainType=t,a.keyInfo.subType=RK(t,n,a.existing,e))})}function RK(r,t,e,a){var n=t.type?t.type:e?e.subType:a.determineSubType(r,t);return n}function LK(r,t){var e={},a={};return n(r||[],e),n(t||[],a,e),[s(e),s(a)];function n(l,o,c){for(var u=0,d=l.length;u<d;u++){var h=$r(l[u].seriesId,null);if(h==null)return;for(var p=Ft(l[u].dataIndex),g=c&&c[h],v=0,y=p.length;v<y;v++){var x=p[v];g&&g[x]?g[x]=null:(o[h]||(o[h]={}))[x]=1}}}function s(l,o){var c=[];for(var u in l)if(l.hasOwnProperty(u)&&l[u]!=null)if(o)c.push(+u);else{var d=s(l[u],!0);d.length&&c.push({seriesId:u,dataIndex:d})}return c}}function Su(r,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return de(t.dataIndex)?pe(t.dataIndex,function(e){return r.indexOfRawIndex(e)}):r.indexOfRawIndex(t.dataIndex);if(t.name!=null)return de(t.name)?pe(t.name,function(e){return r.indexOfName(e)}):r.indexOfName(t.name)}function ut(){var r="__ec_inner_"+IK++;return function(t){return t[r]||(t[r]={})}}var IK=Wz();function Nh(r,t,e){var a=nT(t,e),n=a.mainTypeSpecified,s=a.queryOptionMap,l=a.others,o=l,c=e?e.defaultMainType:null;return!n&&c&&s.set(c,{}),s.each(function(u,d){var h=Kh(r,d,u,{useDefault:c===d,enableAll:e&&e.enableAll!=null?e.enableAll:!0,enableNone:e&&e.enableNone!=null?e.enableNone:!0});o[d+"Models"]=h.models,o[d+"Model"]=h.models[0]}),o}function nT(r,t){var e;if(je(r)){var a={};a[r+"Index"]=0,e=a}else e=r;var n=De(),s={},l=!1;return B(e,function(o,c){if(c==="dataIndex"||c==="dataIndexInside"){s[c]=o;return}var u=c.match(/^(\w+)(Index|Id|Name)$/)||[],d=u[1],h=(u[2]||"").toLowerCase();if(!(!d||!h||t&&t.includeMainTypes&&tt(t.includeMainTypes,d)<0)){l=l||!!d;var p=n.get(d)||n.set(d,{});p[h]=o}}),{mainTypeSpecified:l,queryOptionMap:n,others:s}}var pr={useDefault:!0,enableAll:!1,enableNone:!1},kK={useDefault:!1,enableAll:!0,enableNone:!0};function Kh(r,t,e,a){a=a||pr;var n=e.index,s=e.id,l=e.name,o={models:null,specified:n!=null||s!=null||l!=null};if(!o.specified){var c=void 0;return o.models=a.useDefault&&(c=r.getComponent(t))?[c]:[],o}if(n==="none"||n===!1){if(a.enableNone)return o.models=[],o;n=-1}return n==="all"&&(a.enableAll?n=s=l=null:n=-1),o.models=r.queryComponents({mainType:t,index:n,id:s,name:l}),o}function Jz(r,t,e){r.setAttribute?r.setAttribute(t,e):r[t]=e}function OK(r,t){return r.getAttribute?r.getAttribute(t):r[t]}function PK(r){return r==="auto"?pt.domSupported?"html":"richText":r||"html"}function GS(r,t){var e=De(),a=[];return B(r,function(n){var s=t(n);(e.get(s)||(a.push(s),e.set(s,[]))).push(n)}),{keys:a,buckets:e}}function e7(r,t,e,a,n){var s=t==null||t==="auto";if(a==null)return a;if(xt(a)){var l=RR(e||0,a,n);return Cr(l,s?Math.max(Ds(e||0),Ds(a)):t)}else{if(je(a))return n<1?e:a;for(var o=[],c=e,u=a,d=Math.max(c?c.length:0,u.length),h=0;h<d;++h){var p=r.getDimensionInfo(h);if(p&&p.type==="ordinal")o[h]=(n<1&&c?c:u)[h];else{var g=c&&c[h]?c[h]:0,v=u[h],l=RR(g,v,n);o[h]=Cr(l,s?Math.max(Ds(g),Ds(v)):t)}}return o}}var Do=(function(){function r(){}return r.prototype.reset=function(t,e,a,n){return this._list=t,this._step=n=n||1,this._idx=e,this._end=a??(n>0?t.length:0),this.item=null,this.key=NaN,this},r.prototype.next=function(){return(this._step>0?this._idx<this._end:this._idx>=this._end)?(this.item=this._list[this._idx],this.key=this._idx=this._idx+this._step,!0):!1},r})();function kN(r){r.option=r.parentModel=r.ecModel=null}var zK=".",Nc="___EC__COMPONENT__CONTAINER___",t7="___EC__EXTENDED_CLASS___";function pi(r){var t={main:"",sub:""};if(r){var e=r.split(zK);t.main=e[0]||"",t.sub=e[1]||""}return t}function BK(r){Ea(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')}function VK(r){return!!(r&&r[t7])}function sT(r,t){r.$constructor=r,r.extend=function(e){var a=this,n;return HK(a)?n=(function(s){re(l,s);function l(){return s.apply(this,arguments)||this}return l})(a):(n=function(){(e.$constructor||a).apply(this,arguments)},YC(n,this)),ie(n.prototype,e),n[t7]=!0,n.extend=this.extend,n.superCall=FK,n.superApply=YK,n.superClass=a,n}}function HK(r){return Le(r)&&/^class\s/.test(Function.prototype.toString.call(r))}function r7(r,t){r.extend=t.extend}var GK=Math.round(Math.random()*10);function UK(r){var t=["__\0is_clz",GK++].join("_");r.prototype[t]=!0,r.isInstance=function(e){return!!(e&&e[t])}}function FK(r,t){for(var e=[],a=2;a<arguments.length;a++)e[a-2]=arguments[a];return this.superClass.prototype[t].apply(r,e)}function YK(r,t,e){return this.superClass.prototype[t].apply(r,e)}function _b(r){var t={};r.registerClass=function(a){var n=a.type||a.prototype.type;if(n){BK(n),a.prototype.type=n;var s=pi(n);if(!s.sub)t[s.main]=a;else if(s.sub!==Nc){var l=e(s);l[s.sub]=a}}return a},r.getClass=function(a,n,s){var l=t[a];if(l&&l[Nc]&&(l=n?l[n]:null),s&&!l)throw new Error(n?"Component "+a+"."+(n||"")+" is used but not imported.":a+".type should be specified.");return l},r.getClassesByMainType=function(a){var n=pi(a),s=[],l=t[n.main];return l&&l[Nc]?B(l,function(o,c){c!==Nc&&s.push(o)}):s.push(l),s},r.hasClass=function(a){var n=pi(a);return!!t[n.main]},r.getAllClassMainTypes=function(){var a=[];return B(t,function(n,s){a.push(s)}),a},r.hasSubTypes=function(a){var n=pi(a),s=t[n.main];return s&&s[Nc]};function e(a){var n=t[a.main];return(!n||!n[Nc])&&(n=t[a.main]={},n[Nc]=!0),n}}function Cu(r,t){for(var e=0;e<r.length;e++)r[e][1]||(r[e][1]=r[e][0]);return t=t||!1,function(a,n,s){for(var l={},o=0;o<r.length;o++){var c=r[o][1];if(!(n&&tt(n,c)>=0||s&&tt(s,c)<0)){var u=a.getShallow(c,t);u!=null&&(l[r[o][0]]=u)}}return l}}var WK=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],$K=Cu(WK),qK=(function(){function r(){}return r.prototype.getAreaStyle=function(t,e){return $K(this,t,e)},r})(),US=new Eh(50);function XK(r){if(typeof r=="string"){var t=US.get(r);return t&&t.image}else return r}function iT(r,t,e,a,n){if(r)if(typeof r=="string"){if(t&&t.__zrImageSrc===r||!e)return t;var s=US.get(r),l={hostEl:e,cb:a,cbPayload:n};return s?(t=s.image,!Nb(t)&&s.pending.push(l)):(t=pn.loadImage(r,IR,IR),t.__zrImageSrc=r,US.put(r,t.__cachedImgObj={image:t,pending:[l]})),t}else return r;else return t}function IR(){var r=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<r.pending.length;t++){var e=r.pending[t],a=e.cb;a&&a(this,e.cbPayload),e.hostEl.dirty()}r.pending.length=0}function Nb(r){return r&&r.width&&r.height}var ON=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ZK(r,t,e,a,n){var s={};return a7(s,r,t,e,a,n),s.text}function a7(r,t,e,a,n,s){if(!e){r.text="",r.isTruncated=!1;return}var l=(t+"").split(`
`);s=n7(e,a,n,s);for(var o=!1,c={},u=0,d=l.length;u<d;u++)s7(c,l[u],s),l[u]=c.textLine,o=o||c.isTruncated;r.text=l.join(`
`),r.isTruncated=o}function n7(r,t,e,a){a=a||{};var n=ie({},a);e=Me(e,"..."),n.maxIterations=Me(a.maxIterations,2);var s=n.minChar=Me(a.minChar,0),l=n.fontMeasureInfo=bi(t),o=l.asciiCharWidth;n.placeholder=Me(a.placeholder,"");for(var c=r=Math.max(0,r-1),u=0;u<s&&c>=o;u++)c-=o;var d=_i(l,e);return d>c&&(e="",d=0),c=r-d,n.ellipsis=e,n.ellipsisWidth=d,n.contentWidth=c,n.containerWidth=r,n}function s7(r,t,e){var a=e.containerWidth,n=e.contentWidth,s=e.fontMeasureInfo;if(!a){r.textLine="",r.isTruncated=!1;return}var l=_i(s,t);if(l<=a){r.textLine=t,r.isTruncated=!1;return}for(var o=0;;o++){if(l<=n||o>=e.maxIterations){t+=e.ellipsis;break}var c=o===0?KK(t,n,s):l>0?Math.floor(t.length*n/l):0;t=t.substr(0,c),l=_i(s,t)}t===""&&(t=e.placeholder),r.textLine=t,r.isTruncated=!0}function KK(r,t,e){for(var a=0,n=0,s=r.length;n<s&&a<t;n++)a+=Pz(e,r.charCodeAt(n));return n}function QK(r,t,e,a){var n=lT(r),s=t.overflow,l=t.padding,o=l?l[1]+l[3]:0,c=l?l[0]+l[2]:0,u=t.font,d=s==="truncate",h=Tm(u),p=Me(t.lineHeight,h),g=t.lineOverflow==="truncate",v=!1,y=t.width;y==null&&e!=null&&(y=e-o);var x=t.height;x==null&&a!=null&&(x=a-c);var b;y!=null&&(s==="break"||s==="breakAll")?b=n?i7(n,t.font,y,s==="breakAll",0).lines:[]:b=n?n.split(`
`):[];var N=b.length*p;if(x==null&&(x=N),N>x&&g){var w=Math.floor(x/p);v=v||b.length>w,b=b.slice(0,w),N=b.length*p}if(n&&d&&y!=null)for(var S=n7(y,u,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),T={},A=0;A<b.length;A++)s7(T,b[A],S),b[A]=T.textLine,v=v||T.isTruncated;for(var C=x,M=0,R=bi(u),A=0;A<b.length;A++)M=Math.max(_i(R,b[A]),M);y==null&&(y=M);var k=y;return C+=c,k+=o,{lines:b,height:x,outerWidth:k,outerHeight:C,lineHeight:p,calculatedLineHeight:h,contentWidth:M,contentHeight:N,width:y,isTruncated:v}}var JK=(function(){function r(){}return r})(),kR=(function(){function r(t){this.tokens=[],t&&(this.tokens=t)}return r})(),eQ=(function(){function r(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return r})();function tQ(r,t,e,a,n){var s=new eQ,l=lT(r);if(!l)return s;var o=t.padding,c=o?o[1]+o[3]:0,u=o?o[0]+o[2]:0,d=t.width;d==null&&e!=null&&(d=e-c);var h=t.height;h==null&&a!=null&&(h=a-u);for(var p=t.overflow,g=(p==="break"||p==="breakAll")&&d!=null?{width:d,accumWidth:0,breakAll:p==="breakAll"}:null,v=ON.lastIndex=0,y;(y=ON.exec(l))!=null;){var x=y.index;x>v&&PN(s,l.substring(v,x),t,g),PN(s,y[2],t,g,y[1]),v=ON.lastIndex}v<l.length&&PN(s,l.substring(v,l.length),t,g);var b=[],N=0,w=0,S=p==="truncate",T=t.lineOverflow==="truncate",A={};function C(Ce,Ve,Ee){Ce.width=Ve,Ce.lineHeight=Ee,N+=Ee,w=Math.max(w,Ve)}e:for(var M=0;M<s.lines.length;M++){for(var R=s.lines[M],k=0,L=0,O=0;O<R.tokens.length;O++){var z=R.tokens[O],U=z.styleName&&t.rich[z.styleName]||{},H=z.textPadding=U.padding,P=H?H[1]+H[3]:0,F=z.font=U.font||t.font;z.contentHeight=Tm(F);var Y=Me(U.height,z.contentHeight);if(z.innerHeight=Y,H&&(Y+=H[0]+H[2]),z.height=Y,z.lineHeight=fn(U.lineHeight,t.lineHeight,Y),z.align=U&&U.align||n,z.verticalAlign=U&&U.verticalAlign||"middle",T&&h!=null&&N+z.lineHeight>h){var X=s.lines.length;O>0?(R.tokens=R.tokens.slice(0,O),C(R,L,k),s.lines=s.lines.slice(0,M+1)):s.lines=s.lines.slice(0,M),s.isTruncated=s.isTruncated||s.lines.length<X;break e}var q=U.width,G=q==null||q==="auto";if(typeof q=="string"&&q.charAt(q.length-1)==="%")z.percentWidth=q,b.push(z),z.contentWidth=_i(bi(F),z.text);else{if(G){var $=U.backgroundColor,Z=$&&$.image;Z&&(Z=XK(Z),Nb(Z)&&(z.width=Math.max(z.width,Z.width*Y/Z.height)))}var te=S&&d!=null?d-L:null;te!=null&&te<z.width?!G||te<P?(z.text="",z.width=z.contentWidth=0):(a7(A,z.text,te-P,F,t.ellipsis,{minChar:t.truncateMinChar}),z.text=A.text,s.isTruncated=s.isTruncated||A.isTruncated,z.width=z.contentWidth=_i(bi(F),z.text)):z.contentWidth=_i(bi(F),z.text)}z.width+=P,L+=z.width,U&&(k=Math.max(k,z.lineHeight))}C(R,L,k)}s.outerWidth=s.width=Me(d,w),s.outerHeight=s.height=Me(h,N),s.contentHeight=N,s.contentWidth=w,s.outerWidth+=c,s.outerHeight+=u;for(var M=0;M<b.length;M++){var z=b[M],me=z.percentWidth;z.width=parseInt(me,10)/100*s.width}return s}function PN(r,t,e,a,n){var s=t==="",l=n&&e.rich[n]||{},o=r.lines,c=l.font||e.font,u=!1,d,h;if(a){var p=l.padding,g=p?p[1]+p[3]:0;if(l.width!=null&&l.width!=="auto"){var v=Bs(l.width,a.width)+g;o.length>0&&v+a.accumWidth>a.width&&(d=t.split(`
`),u=!0),a.accumWidth=v}else{var y=i7(t,c,a.width,a.breakAll,a.accumWidth);a.accumWidth=y.accumWidth+g,h=y.linesWidths,d=y.lines}}d||(d=t.split(`
`));for(var x=bi(c),b=0;b<d.length;b++){var N=d[b],w=new JK;if(w.styleName=n,w.text=N,w.isLineHolder=!N&&!s,typeof l.width=="number"?w.width=l.width:w.width=h?h[b]:_i(x,N),!b&&!u){var S=(o[o.length-1]||(o[0]=new kR)).tokens,T=S.length;T===1&&S[0].isLineHolder?S[0]=w:(N||!T||s)&&S.push(w)}else o.push(new kR([w]))}}function rQ(r){var t=r.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var aQ=ds(",&?/;] ".split(""),function(r,t){return r[t]=!0,r},{});function nQ(r){return rQ(r)?!!aQ[r]:!0}function i7(r,t,e,a,n){for(var s=[],l=[],o="",c="",u=0,d=0,h=bi(t),p=0;p<r.length;p++){var g=r.charAt(p);if(g===`
`){c&&(o+=c,d+=u),s.push(o),l.push(d),o="",c="",u=0,d=0;continue}var v=Pz(h,g.charCodeAt(0)),y=a?!1:!nQ(g);if(s.length?d+v>e:n+d+v>e){d?(o||c)&&(y?(o||(o=c,c="",u=0,d=u),s.push(o),l.push(d-u),c+=g,u+=v,o="",d=u):(c&&(o+=c,c="",u=0),s.push(o),l.push(d),o=g,d=v)):y?(s.push(c),l.push(u),c=g,u=v):(s.push(g),l.push(v));continue}d+=v,y?(c+=g,u+=v):(c&&(o+=c,c="",u=0),o+=g)}return c&&(o+=c),o&&(s.push(o),l.push(d)),s.length===1&&(d+=n),{accumWidth:d,lines:s,linesWidths:l}}function OR(r,t,e,a,n,s){if(r.baseX=e,r.baseY=a,r.outerWidth=r.outerHeight=null,!!t){var l=t.width*2,o=t.height*2;We.set(PR,Dh(e,l,n),hu(a,o,s),l,o),We.intersect(t,PR,null,zR);var c=zR.outIntersectRect;r.outerWidth=c.width,r.outerHeight=c.height,r.baseX=Dh(c.x,c.width,n,!0),r.baseY=hu(c.y,c.height,s,!0)}}var PR=new We(0,0,0,0),zR={outIntersectRect:{},clamp:!0};function lT(r){return r!=null?r+="":r=""}function sQ(r){var t=lT(r.text),e=r.font,a=_i(bi(e),t),n=Tm(e);return FS(r,a,n,null)}function FS(r,t,e,a){var n=new We(Dh(r.x||0,t,r.textAlign),hu(r.y||0,e,r.textBaseline),t,e),s=a??(l7(r)?r.lineWidth:0);return s>0&&(n.x-=s/2,n.y-=s/2,n.width+=s,n.height+=s),n}function l7(r){var t=r.stroke;return t!=null&&t!=="none"&&r.lineWidth>0}var YS="__zr_style_"+Math.round(Math.random()*10),fu={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},jb={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};fu[YS]=!0;var BR=["z","z2","invisible"],iQ=["invisible"],fs=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype._init=function(e){for(var a=gt(e),n=0;n<a.length;n++){var s=a[n];s==="style"?this.useStyle(e[s]):r.prototype.attrKV.call(this,s,e[s])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,a,n,s){var l=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&lQ(this,e,a)||l&&!l[0]&&!l[3])return!1;if(n&&this.__clipPaths&&this.__clipPaths.length){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(s&&this.parent)for(var c=this.parent;c;){if(c.ignore)return!1;c=c.parent}return!0},t.prototype.contain=function(e,a){return this.rectContain(e,a)},t.prototype.traverse=function(e,a){e.call(a,this)},t.prototype.rectContain=function(e,a){var n=this.transformCoordToLocal(e,a),s=this.getBoundingRect();return s.contain(n[0],n[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var a=this.transform,n=this.getBoundingRect(),s=this.style,l=s.shadowBlur||0,o=s.shadowOffsetX||0,c=s.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new We(0,0,0,0)),a?We.applyTransform(e,n,a):e.copy(n),(l||o||c)&&(e.width+=l*2+Math.abs(o),e.height+=l*2+Math.abs(c),e.x=Math.min(e.x,e.x+o-l),e.y=Math.min(e.y,e.y+c-l));var u=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-u),e.y=Math.floor(e.y-u),e.width=Math.ceil(e.width+1+u*2),e.height=Math.ceil(e.height+1+u*2))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new We(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(e,a){e!=="style"?r.prototype.attrKV.call(this,e,a):this.style?this.setStyle(a):this.useStyle(a)},t.prototype.setStyle=function(e,a){return typeof e=="string"?this.style[e]=a:ie(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=rg,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&rg)},t.prototype.styleUpdated=function(){this.__dirty&=~rg},t.prototype.createStyle=function(e){return wm(fu,e)},t.prototype.useStyle=function(e){e[YS]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[YS]},t.prototype._innerSaveToNormal=function(e){r.prototype._innerSaveToNormal.call(this,e);var a=this._normalState;e.style&&!a.style&&(a.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,a,BR)},t.prototype._applyStateObj=function(e,a,n,s,l,o){r.prototype._applyStateObj.call(this,e,a,n,s,l,o);var c=!(a&&s),u;if(a&&a.style?l?s?u=a.style:(u=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(u,a.style)):(u=this._mergeStyle(this.createStyle(),s?this.style:n.style),this._mergeStyle(u,a.style)):c&&(u=n.style),u)if(l){var d=this.style;if(this.style=this.createStyle(c?{}:d),c)for(var h=gt(d),p=0;p<h.length;p++){var g=h[p];g in u&&(u[g]=u[g],this.style[g]=d[g])}for(var v=gt(u),p=0;p<v.length;p++){var g=v[p];this.style[g]=this.style[g]}this._transitionState(e,{style:u},o,this.getAnimationStyleProps())}else this.useStyle(u);for(var y=this.__inHover?iQ:BR,p=0;p<y.length;p++){var g=y[p];a&&a[g]!=null?this[g]=a[g]:c&&n[g]!=null&&(this[g]=n[g])}},t.prototype._mergeStates=function(e){for(var a=r.prototype._mergeStates.call(this,e),n,s=0;s<e.length;s++){var l=e[s];l.style&&(n=n||{},this._mergeStyle(n,l.style))}return n&&(a.style=n),a},t.prototype._mergeStyle=function(e,a){return ie(e,a),e},t.prototype.getAnimationStyleProps=function(){return jb},t.initDefaultProps=(function(){var e=t.prototype;e.type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,e.__dirty=Tn|rg})(),t})(yb),zN=new We(0,0,0,0),BN=new We(0,0,0,0);function lQ(r,t,e){return zN.copy(r.getBoundingRect()),r.transform&&zN.applyTransform(r.transform),BN.width=t,BN.height=e,!zN.intersect(BN)}var nn=Math.min,sn=Math.max,VN=Math.sin,HN=Math.cos,jc=Math.PI*2,f0=Yo(),p0=Yo(),g0=Yo();function wb(r,t,e){if(r.length!==0){for(var a=r[0],n=a[0],s=a[0],l=a[1],o=a[1],c=1;c<r.length;c++)a=r[c],n=nn(n,a[0]),s=sn(s,a[0]),l=nn(l,a[1]),o=sn(o,a[1]);t[0]=n,t[1]=l,e[0]=s,e[1]=o}}function VR(r,t,e,a,n,s){n[0]=nn(r,e),n[1]=nn(t,a),s[0]=sn(r,e),s[1]=sn(t,a)}var HR=[],GR=[];function oQ(r,t,e,a,n,s,l,o,c,u){var d=Nz,h=ta,p=d(r,e,n,l,HR);c[0]=1/0,c[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var g=0;g<p;g++){var v=h(r,e,n,l,HR[g]);c[0]=nn(v,c[0]),u[0]=sn(v,u[0])}p=d(t,a,s,o,GR);for(var g=0;g<p;g++){var y=h(t,a,s,o,GR[g]);c[1]=nn(y,c[1]),u[1]=sn(y,u[1])}c[0]=nn(r,c[0]),u[0]=sn(r,u[0]),c[0]=nn(l,c[0]),u[0]=sn(l,u[0]),c[1]=nn(t,c[1]),u[1]=sn(t,u[1]),c[1]=nn(o,c[1]),u[1]=sn(o,u[1])}function cQ(r,t,e,a,n,s,l,o){var c=wz,u=pa,d=sn(nn(c(r,e,n),1),0),h=sn(nn(c(t,a,s),1),0),p=u(r,e,n,d),g=u(t,a,s,h);l[0]=nn(r,n,p),l[1]=nn(t,s,g),o[0]=sn(r,n,p),o[1]=sn(t,s,g)}function uQ(r,t,e,a,n,s,l,o,c){var u=dl,d=hl,h=Math.abs(n-s);if(h%jc<1e-4&&h>1e-4){o[0]=r-e,o[1]=t-a,c[0]=r+e,c[1]=t+a;return}if(f0[0]=HN(n)*e+r,f0[1]=VN(n)*a+t,p0[0]=HN(s)*e+r,p0[1]=VN(s)*a+t,u(o,f0,p0),d(c,f0,p0),n=n%jc,n<0&&(n=n+jc),s=s%jc,s<0&&(s=s+jc),n>s&&!l?s+=jc:n<s&&l&&(n+=jc),l){var p=s;s=n,n=p}for(var g=0;g<s;g+=Math.PI/2)g>n&&(g0[0]=HN(g)*e+r,g0[1]=VN(g)*a+t,u(o,g0,o),d(c,g0,c))}var Wt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},wc=[],Sc=[],Js=[],io=[],ei=[],ti=[],GN=Math.min,UN=Math.max,Cc=Math.cos,Tc=Math.sin,Ki=Math.abs,WS=Math.PI,go=WS*2,FN=typeof Float32Array<"u",jp=[];function YN(r){var t=Math.round(r/WS*1e8)/1e8;return t%2*WS}function Sb(r,t){var e=YN(r[0]);e<0&&(e+=go);var a=e-r[0],n=r[1];n+=a,!t&&n-e>=go?n=e+go:t&&e-n>=go?n=e-go:!t&&e>n?n=e+(go-YN(e-n)):t&&e<n&&(n=e-(go-YN(n-e))),r[0]=e,r[1]=n}var wi=(function(){function r(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return r.prototype.increaseVersion=function(){this._version++},r.prototype.getVersion=function(){return this._version},r.prototype.setScale=function(t,e,a){a=a||0,a>0&&(this._ux=Ki(a/ny/t)||0,this._uy=Ki(a/ny/e)||0)},r.prototype.setDPR=function(t){this.dpr=t},r.prototype.setContext=function(t){this._ctx=t},r.prototype.getContext=function(){return this._ctx},r.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},r.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},r.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(Wt.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},r.prototype.lineTo=function(t,e){var a=Ki(t-this._xi),n=Ki(e-this._yi),s=a>this._ux||n>this._uy;if(this.addData(Wt.L,t,e),this._ctx&&s&&this._ctx.lineTo(t,e),s)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var l=a*a+n*n;l>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=l)}return this},r.prototype.bezierCurveTo=function(t,e,a,n,s,l){return this._drawPendingPt(),this.addData(Wt.C,t,e,a,n,s,l),this._ctx&&this._ctx.bezierCurveTo(t,e,a,n,s,l),this._xi=s,this._yi=l,this},r.prototype.quadraticCurveTo=function(t,e,a,n){return this._drawPendingPt(),this.addData(Wt.Q,t,e,a,n),this._ctx&&this._ctx.quadraticCurveTo(t,e,a,n),this._xi=a,this._yi=n,this},r.prototype.arc=function(t,e,a,n,s,l){this._drawPendingPt(),jp[0]=n,jp[1]=s,Sb(jp,l),n=jp[0],s=jp[1];var o=s-n;return this.addData(Wt.A,t,e,a,a,n,o,0,l?0:1),this._ctx&&this._ctx.arc(t,e,a,n,s,l),this._xi=Cc(s)*a+t,this._yi=Tc(s)*a+e,this},r.prototype.arcTo=function(t,e,a,n,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,a,n,s),this},r.prototype.rect=function(t,e,a,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,a,n),this.addData(Wt.R,t,e,a,n),this},r.prototype.closePath=function(){this._drawPendingPt(),this.addData(Wt.Z);var t=this._ctx,e=this._x0,a=this._y0;return t&&t.closePath(),this._xi=e,this._yi=a,this},r.prototype.fill=function(t){t&&t.fill(),this.toStatic()},r.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},r.prototype.len=function(){return this._len},r.prototype.setData=function(t){if(this._saveData){var e=t.length;!(this.data&&this.data.length===e)&&FN&&(this.data=new Float32Array(e));for(var a=0;a<e;a++)this.data[a]=t[a];this._len=e}},r.prototype.appendPath=function(t){if(this._saveData){t instanceof Array||(t=[t]);for(var e=t.length,a=0,n=this._len,s=0;s<e;s++)a+=t[s].len();var l=this.data;if(FN&&(l instanceof Float32Array||!l)&&(this.data=new Float32Array(n+a),n>0&&l))for(var o=0;o<n;o++)this.data[o]=l[o];for(var s=0;s<e;s++)for(var c=t[s].data,o=0;o<c.length;o++)this.data[n++]=c[o];this._len=n}},r.prototype.addData=function(t,e,a,n,s,l,o,c,u){if(this._saveData){var d=this.data;this._len+arguments.length>d.length&&(this._expandData(),d=this.data);for(var h=0;h<arguments.length;h++)d[this._len++]=arguments[h]}},r.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},r.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},r.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,FN&&this._len>11&&(this.data=new Float32Array(t)))}},r.prototype.getBoundingRect=function(){Js[0]=Js[1]=ei[0]=ei[1]=Number.MAX_VALUE,io[0]=io[1]=ti[0]=ti[1]=-Number.MAX_VALUE;var t=this.data,e=0,a=0,n=0,s=0,l;for(l=0;l<this._len;){var o=t[l++],c=l===1;switch(c&&(e=t[l],a=t[l+1],n=e,s=a),o){case Wt.M:e=n=t[l++],a=s=t[l++],ei[0]=n,ei[1]=s,ti[0]=n,ti[1]=s;break;case Wt.L:VR(e,a,t[l],t[l+1],ei,ti),e=t[l++],a=t[l++];break;case Wt.C:oQ(e,a,t[l++],t[l++],t[l++],t[l++],t[l],t[l+1],ei,ti),e=t[l++],a=t[l++];break;case Wt.Q:cQ(e,a,t[l++],t[l++],t[l],t[l+1],ei,ti),e=t[l++],a=t[l++];break;case Wt.A:var u=t[l++],d=t[l++],h=t[l++],p=t[l++],g=t[l++],v=t[l++]+g;l+=1;var y=!t[l++];c&&(n=Cc(g)*h+u,s=Tc(g)*p+d),uQ(u,d,h,p,g,v,y,ei,ti),e=Cc(v)*h+u,a=Tc(v)*p+d;break;case Wt.R:n=e=t[l++],s=a=t[l++];var x=t[l++],b=t[l++];VR(n,s,n+x,s+b,ei,ti);break;case Wt.Z:e=n,a=s;break}dl(Js,Js,ei),hl(io,io,ti)}return l===0&&(Js[0]=Js[1]=io[0]=io[1]=0),new We(Js[0],Js[1],io[0]-Js[0],io[1]-Js[1])},r.prototype._calculateLength=function(){var t=this.data,e=this._len,a=this._ux,n=this._uy,s=0,l=0,o=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,d=0,h=0,p=0;p<e;){var g=t[p++],v=p===1;v&&(s=t[p],l=t[p+1],o=s,c=l);var y=-1;switch(g){case Wt.M:s=o=t[p++],l=c=t[p++];break;case Wt.L:{var x=t[p++],b=t[p++],N=x-s,w=b-l;(Ki(N)>a||Ki(w)>n||p===e-1)&&(y=Math.sqrt(N*N+w*w),s=x,l=b);break}case Wt.C:{var S=t[p++],T=t[p++],x=t[p++],b=t[p++],A=t[p++],C=t[p++];y=bZ(s,l,S,T,x,b,A,C,10),s=A,l=C;break}case Wt.Q:{var S=t[p++],T=t[p++],x=t[p++],b=t[p++];y=NZ(s,l,S,T,x,b,10),s=x,l=b;break}case Wt.A:var M=t[p++],R=t[p++],k=t[p++],L=t[p++],O=t[p++],z=t[p++],U=z+O;p+=1,v&&(o=Cc(O)*k+M,c=Tc(O)*L+R),y=UN(k,L)*GN(go,Math.abs(z)),s=Cc(U)*k+M,l=Tc(U)*L+R;break;case Wt.R:{o=s=t[p++],c=l=t[p++];var H=t[p++],P=t[p++];y=H*2+P*2;break}case Wt.Z:{var N=o-s,w=c-l;y=Math.sqrt(N*N+w*w),s=o,l=c;break}}y>=0&&(u[h++]=y,d+=y)}return this._pathLen=d,d},r.prototype.rebuildPath=function(t,e){var a=this.data,n=this._ux,s=this._uy,l=this._len,o,c,u,d,h,p,g=e<1,v,y,x=0,b=0,N,w=0,S,T;if(!(g&&(this._pathSegLen||this._calculateLength(),v=this._pathSegLen,y=this._pathLen,N=e*y,!N)))e:for(var A=0;A<l;){var C=a[A++],M=A===1;switch(M&&(u=a[A],d=a[A+1],o=u,c=d),C!==Wt.L&&w>0&&(t.lineTo(S,T),w=0),C){case Wt.M:o=u=a[A++],c=d=a[A++],t.moveTo(u,d);break;case Wt.L:{h=a[A++],p=a[A++];var R=Ki(h-u),k=Ki(p-d);if(R>n||k>s){if(g){var L=v[b++];if(x+L>N){var O=(N-x)/L;t.lineTo(u*(1-O)+h*O,d*(1-O)+p*O);break e}x+=L}t.lineTo(h,p),u=h,d=p,w=0}else{var z=R*R+k*k;z>w&&(S=h,T=p,w=z)}break}case Wt.C:{var U=a[A++],H=a[A++],P=a[A++],F=a[A++],Y=a[A++],X=a[A++];if(g){var L=v[b++];if(x+L>N){var O=(N-x)/L;Po(u,U,P,Y,O,wc),Po(d,H,F,X,O,Sc),t.bezierCurveTo(wc[1],Sc[1],wc[2],Sc[2],wc[3],Sc[3]);break e}x+=L}t.bezierCurveTo(U,H,P,F,Y,X),u=Y,d=X;break}case Wt.Q:{var U=a[A++],H=a[A++],P=a[A++],F=a[A++];if(g){var L=v[b++];if(x+L>N){var O=(N-x)/L;zg(u,U,P,O,wc),zg(d,H,F,O,Sc),t.quadraticCurveTo(wc[1],Sc[1],wc[2],Sc[2]);break e}x+=L}t.quadraticCurveTo(U,H,P,F),u=P,d=F;break}case Wt.A:var q=a[A++],G=a[A++],$=a[A++],Z=a[A++],te=a[A++],me=a[A++],Ce=a[A++],Ve=!a[A++],Ee=$>Z?$:Z,be=Ki($-Z)>.001,He=te+me,Se=!1;if(g){var L=v[b++];x+L>N&&(He=te+me*(N-x)/L,Se=!0),x+=L}if(be&&t.ellipse?t.ellipse(q,G,$,Z,Ce,te,He,Ve):t.arc(q,G,Ee,te,He,Ve),Se)break e;M&&(o=Cc(te)*$+q,c=Tc(te)*Z+G),u=Cc(He)*$+q,d=Tc(He)*Z+G;break;case Wt.R:o=u=a[A],c=d=a[A+1],h=a[A++],p=a[A++];var Ie=a[A++],ft=a[A++];if(g){var L=v[b++];if(x+L>N){var le=N-x;t.moveTo(h,p),t.lineTo(h+GN(le,Ie),p),le-=Ie,le>0&&t.lineTo(h+Ie,p+GN(le,ft)),le-=ft,le>0&&t.lineTo(h+UN(Ie-le,0),p+ft),le-=Ie,le>0&&t.lineTo(h,p+UN(ft-le,0));break e}x+=L}t.rect(h,p,Ie,ft);break;case Wt.Z:if(g){var L=v[b++];if(x+L>N){var O=(N-x)/L;t.lineTo(u*(1-O)+o*O,d*(1-O)+c*O);break e}x+=L}t.closePath(),u=o,d=c}}},r.prototype.clone=function(){var t=new r,e=this.data;return t.data=e.slice?e.slice():Array.prototype.slice.call(e),t._len=this._len,t},r.prototype.canSave=function(){return!!this._saveData},r.CMD=Wt,r.initDefaultProps=(function(){var t=r.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0})(),r})();function vo(r,t,e,a,n,s,l){if(n===0)return!1;var o=n,c=0,u=r;if(l>t+o&&l>a+o||l<t-o&&l<a-o||s>r+o&&s>e+o||s<r-o&&s<e-o)return!1;if(r!==e)c=(t-a)/(r-e),u=(r*a-e*t)/(r-e);else return Math.abs(s-r)<=o/2;var d=c*s-l+u,h=d*d/(c*c+1);return h<=o/2*o/2}function dQ(r,t,e,a,n,s,l,o,c,u,d){if(c===0)return!1;var h=c;if(d>t+h&&d>a+h&&d>s+h&&d>o+h||d<t-h&&d<a-h&&d<s-h&&d<o-h||u>r+h&&u>e+h&&u>n+h&&u>l+h||u<r-h&&u<e-h&&u<n-h&&u<l-h)return!1;var p=jz(r,t,e,a,n,s,l,o,u,d,null);return p<=h/2}function o7(r,t,e,a,n,s,l,o,c){if(l===0)return!1;var u=l;if(c>t+u&&c>a+u&&c>s+u||c<t-u&&c<a-u&&c<s-u||o>r+u&&o>e+u&&o>n+u||o<r-u&&o<e-u&&o<n-u)return!1;var d=Sz(r,t,e,a,n,s,o,c,null);return d<=u/2}var UR=Math.PI*2;function Rn(r){return r%=UR,r<0&&(r+=UR),r}var wp=Math.PI*2;function hQ(r,t,e,a,n,s,l,o,c){if(l===0)return!1;var u=l;o-=r,c-=t;var d=Math.sqrt(o*o+c*c);if(d-u>e||d+u<e)return!1;if(Math.abs(a-n)%wp<1e-4)return!0;if(s){var h=a;a=Rn(n),n=Rn(h)}else a=Rn(a),n=Rn(n);a>n&&(n+=wp);var p=Math.atan2(c,o);return p<0&&(p+=wp),p>=a&&p<=n||p+wp>=a&&p+wp<=n}function il(r,t,e,a,n,s){if(s>t&&s>a||s<t&&s<a||a===t)return 0;var l=(s-t)/(a-t),o=a<t?1:-1;(l===1||l===0)&&(o=a<t?.5:-.5);var c=l*(e-r)+r;return c===n?1/0:c>n?o:0}var lo=wi.CMD,Ac=Math.PI*2,fQ=1e-4;function pQ(r,t){return Math.abs(r-t)<fQ}var Ya=[-1,-1,-1],es=[-1,-1];function gQ(){var r=es[0];es[0]=es[1],es[1]=r}function mQ(r,t,e,a,n,s,l,o,c,u){if(u>t&&u>a&&u>s&&u>o||u<t&&u<a&&u<s&&u<o)return 0;var d=ey(t,a,s,o,u,Ya);if(d===0)return 0;for(var h=0,p=-1,g=void 0,v=void 0,y=0;y<d;y++){var x=Ya[y],b=x===0||x===1?.5:1,N=ta(r,e,n,l,x);N<c||(p<0&&(p=Nz(t,a,s,o,es),es[1]<es[0]&&p>1&&gQ(),g=ta(t,a,s,o,es[0]),p>1&&(v=ta(t,a,s,o,es[1]))),p===2?x<es[0]?h+=g<t?b:-b:x<es[1]?h+=v<g?b:-b:h+=o<v?b:-b:x<es[0]?h+=g<t?b:-b:h+=o<g?b:-b)}return h}function vQ(r,t,e,a,n,s,l,o){if(o>t&&o>a&&o>s||o<t&&o<a&&o<s)return 0;var c=_Z(t,a,s,o,Ya);if(c===0)return 0;var u=wz(t,a,s);if(u>=0&&u<=1){for(var d=0,h=pa(t,a,s,u),p=0;p<c;p++){var g=Ya[p]===0||Ya[p]===1?.5:1,v=pa(r,e,n,Ya[p]);v<l||(Ya[p]<u?d+=h<t?g:-g:d+=s<h?g:-g)}return d}else{var g=Ya[0]===0||Ya[0]===1?.5:1,v=pa(r,e,n,Ya[0]);return v<l?0:s<t?g:-g}}function xQ(r,t,e,a,n,s,l,o){if(o-=t,o>e||o<-e)return 0;var c=Math.sqrt(e*e-o*o);Ya[0]=-c,Ya[1]=c;var u=Math.abs(a-n);if(u<1e-4)return 0;if(u>=Ac-1e-4){a=0,n=Ac;var d=s?1:-1;return l>=Ya[0]+r&&l<=Ya[1]+r?d:0}if(a>n){var h=a;a=n,n=h}a<0&&(a+=Ac,n+=Ac);for(var p=0,g=0;g<2;g++){var v=Ya[g];if(v+r>l){var y=Math.atan2(o,v),d=s?1:-1;y<0&&(y=Ac+y),(y>=a&&y<=n||y+Ac>=a&&y+Ac<=n)&&(y>Math.PI/2&&y<Math.PI*1.5&&(d=-d),p+=d)}}return p}function c7(r,t,e,a,n){for(var s=r.data,l=r.len(),o=0,c=0,u=0,d=0,h=0,p,g,v=0;v<l;){var y=s[v++],x=v===1;switch(y===lo.M&&v>1&&(e||(o+=il(c,u,d,h,a,n))),x&&(c=s[v],u=s[v+1],d=c,h=u),y){case lo.M:d=s[v++],h=s[v++],c=d,u=h;break;case lo.L:if(e){if(vo(c,u,s[v],s[v+1],t,a,n))return!0}else o+=il(c,u,s[v],s[v+1],a,n)||0;c=s[v++],u=s[v++];break;case lo.C:if(e){if(dQ(c,u,s[v++],s[v++],s[v++],s[v++],s[v],s[v+1],t,a,n))return!0}else o+=mQ(c,u,s[v++],s[v++],s[v++],s[v++],s[v],s[v+1],a,n)||0;c=s[v++],u=s[v++];break;case lo.Q:if(e){if(o7(c,u,s[v++],s[v++],s[v],s[v+1],t,a,n))return!0}else o+=vQ(c,u,s[v++],s[v++],s[v],s[v+1],a,n)||0;c=s[v++],u=s[v++];break;case lo.A:var b=s[v++],N=s[v++],w=s[v++],S=s[v++],T=s[v++],A=s[v++];v+=1;var C=!!(1-s[v++]);p=Math.cos(T)*w+b,g=Math.sin(T)*S+N,x?(d=p,h=g):o+=il(c,u,p,g,a,n);var M=(a-b)*S/w+b;if(e){if(hQ(b,N,S,T,T+A,C,t,M,n))return!0}else o+=xQ(b,N,S,T,T+A,C,M,n);c=Math.cos(T+A)*w+b,u=Math.sin(T+A)*S+N;break;case lo.R:d=c=s[v++],h=u=s[v++];var R=s[v++],k=s[v++];if(p=d+R,g=h+k,e){if(vo(d,h,p,h,t,a,n)||vo(p,h,p,g,t,a,n)||vo(p,g,d,g,t,a,n)||vo(d,g,d,h,t,a,n))return!0}else o+=il(p,h,p,g,a,n),o+=il(d,g,d,h,a,n);break;case lo.Z:if(e){if(vo(c,u,d,h,t,a,n))return!0}else o+=il(c,u,d,h,a,n);c=d,u=h;break}}return!e&&!pQ(u,h)&&(o+=il(c,u,d,h,a,n)||0),o!==0}function yQ(r,t,e){return c7(r,0,!1,t,e)}function bQ(r,t,e,a){return c7(r,t,!0,e,a)}var oy=Ge({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},fu),_Q={style:Ge({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},jb.style)},WN=Ni.concat(["invisible","culling","z","z2","zlevel","parent"]),ht=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.update=function(){var e=this;r.prototype.update.call(this);var a=this.style;if(a.decal){var n=this._decalEl=this._decalEl||new t;n.buildPath===t.prototype.buildPath&&(n.buildPath=function(c){e.buildPath(c,e.shape)}),n.silent=!0;var s=n.style;for(var l in a)s[l]!==a[l]&&(s[l]=a[l]);s.fill=a.fill?a.decal:null,s.decal=null,s.shadowColor=null,a.strokeFirst&&(s.stroke=null);for(var o=0;o<WN.length;++o)n[WN[o]]=this[WN[o]];n.__dirty|=Tn}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(e){var a=gt(e);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var s=0;s<a.length;s++){var l=a[s],o=e[l];l==="style"?this.style?ie(this.style,o):this.useStyle(o):l==="shape"?ie(this.shape,o):r.prototype.attrKV.call(this,l,o)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if(e!=="none"){if(je(e)){var a=Hg(e,0);return a>.5?OS:a>.2?JZ:PS}else if(e)return PS}return OS},t.prototype.getInsideTextStroke=function(e){var a=this.style.fill;if(je(a)){var n=this.__zr,s=!!(n&&n.isDarkMode()),l=Hg(e,0)<kS;if(s===l)return a}},t.prototype.buildPath=function(e,a,n){},t.prototype.pathUpdated=function(){this.__dirty&=~lh},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new wi(!1)},t.prototype.hasStroke=function(){var e=this.style,a=e.stroke;return!(a==null||a==="none"||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style,a=e.fill;return a!=null&&a!=="none"},t.prototype.getBoundingRect=function(){var e=this._rect,a=this.style,n=!e;if(n){var s=!1;this.path||(s=!0,this.createPathProxy());var l=this.path;(s||this.__dirty&lh)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),e=l.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||n){o.copy(e);var c=a.strokeNoScale?this.getLineScale():1,u=a.lineWidth;if(!this.hasFill()){var d=this.strokeContainThreshold;u=Math.max(u,d??4)}c>1e-10&&(o.width+=u/c,o.height+=u/c,o.x-=u/c/2,o.y-=u/c/2)}return o}return e},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),s=this.getBoundingRect(),l=this.style;if(e=n[0],a=n[1],s.contain(e,a)){var o=this.path;if(this.hasStroke()){var c=l.lineWidth,u=l.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(c=Math.max(c,this.strokeContainThreshold)),bQ(o,c/u,e,a)))return!0}if(this.hasFill())return yQ(o,e,a)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=lh,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){e==="style"?this.dirtyStyle():e==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(e,a){e==="shape"?this.setShape(a):r.prototype.attrKV.call(this,e,a)},t.prototype.setShape=function(e,a){var n=this.shape;return n||(n=this.shape={}),typeof e=="string"?n[e]=a:ie(n,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&lh)},t.prototype.createStyle=function(e){return wm(oy,e)},t.prototype._innerSaveToNormal=function(e){r.prototype._innerSaveToNormal.call(this,e);var a=this._normalState;e.shape&&!a.shape&&(a.shape=ie({},this.shape))},t.prototype._applyStateObj=function(e,a,n,s,l,o){r.prototype._applyStateObj.call(this,e,a,n,s,l,o);var c=!(a&&s),u;if(a&&a.shape?l?s?u=a.shape:(u=ie({},n.shape),ie(u,a.shape)):(u=ie({},s?this.shape:n.shape),ie(u,a.shape)):c&&(u=n.shape),u)if(l){this.shape=ie({},this.shape);for(var d={},h=gt(u),p=0;p<h.length;p++){var g=h[p];typeof u[g]=="object"?this.shape[g]=u[g]:d[g]=u[g]}this._transitionState(e,{shape:d},o)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(e){for(var a=r.prototype._mergeStates.call(this,e),n,s=0;s<e.length;s++){var l=e[s];l.shape&&(n=n||{},this._mergeStyle(n,l.shape))}return n&&(a.shape=n),a},t.prototype.getAnimationStyleProps=function(){return _Q},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var a=(function(s){tr(l,s);function l(o){var c=s.call(this,o)||this;return e.init&&e.init.call(c,o),c}return l.prototype.getDefaultStyle=function(){return Oe(e.style)},l.prototype.getDefaultShape=function(){return Oe(e.shape)},l})(t);for(var n in e)typeof e[n]=="function"&&(a.prototype[n]=e[n]);return a},t.initDefaultProps=(function(){var e=t.prototype;e.type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,e.__dirty=Tn|rg|lh})(),t})(fs),NQ=Ge({strokeFirst:!0,font:jl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},oy),Rh=(function(r){tr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.hasStroke=function(){return l7(this.style)},t.prototype.hasFill=function(){var e=this.style,a=e.fill;return a!=null&&a!=="none"},t.prototype.createStyle=function(e){return wm(NQ,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){return this._rect||(this._rect=sQ(this.style)),this._rect},t.initDefaultProps=(function(){var e=t.prototype;e.dirtyRectTolerance=10})(),t})(fs);Rh.prototype.type="tspan";var jQ=Ge({x:0,y:0},fu),wQ={style:Ge({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},jb.style)};function SQ(r){return!!(r&&typeof r!="string"&&r.width&&r.height)}var la=(function(r){tr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.createStyle=function(e){return wm(jQ,e)},t.prototype._getSize=function(e){var a=this.style,n=a[e];if(n!=null)return n;var s=SQ(a.image)?a.image:this.__image;if(!s)return 0;var l=e==="width"?"height":"width",o=a[l];return o==null?s[e]:s[e]/s[l]*o},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return wQ},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new We(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t})(fs);la.prototype.type="image";function CQ(r,t){var e=t.x,a=t.y,n=t.width,s=t.height,l=t.r,o,c,u,d;n<0&&(e=e+n,n=-n),s<0&&(a=a+s,s=-s),typeof l=="number"?o=c=u=d=l:l instanceof Array?l.length===1?o=c=u=d=l[0]:l.length===2?(o=u=l[0],c=d=l[1]):l.length===3?(o=l[0],c=d=l[1],u=l[2]):(o=l[0],c=l[1],u=l[2],d=l[3]):o=c=u=d=0;var h;o+c>n&&(h=o+c,o*=n/h,c*=n/h),u+d>n&&(h=u+d,u*=n/h,d*=n/h),c+u>s&&(h=c+u,c*=s/h,u*=s/h),o+d>s&&(h=o+d,o*=s/h,d*=s/h),r.moveTo(e+o,a),r.lineTo(e+n-c,a),c!==0&&r.arc(e+n-c,a+c,c,-Math.PI/2,0),r.lineTo(e+n,a+s-u),u!==0&&r.arc(e+n-u,a+s-u,u,0,Math.PI/2),r.lineTo(e+d,a+s),d!==0&&r.arc(e+d,a+s-d,d,Math.PI/2,Math.PI),r.lineTo(e,a+o),o!==0&&r.arc(e+o,a+o,o,Math.PI,Math.PI*1.5)}var fh=Math.round;function Cb(r,t,e){if(t){var a=t.x1,n=t.x2,s=t.y1,l=t.y2;r.x1=a,r.x2=n,r.y1=s,r.y2=l;var o=e&&e.lineWidth;return o&&(fh(a*2)===fh(n*2)&&(r.x1=r.x2=Ln(a,o,!0)),fh(s*2)===fh(l*2)&&(r.y1=r.y2=Ln(s,o,!0))),r}}function u7(r,t,e){if(t){var a=t.x,n=t.y,s=t.width,l=t.height;r.x=a,r.y=n,r.width=s,r.height=l;var o=e&&e.lineWidth;return o&&(r.x=Ln(a,o,!0),r.y=Ln(n,o,!0),r.width=Math.max(Ln(a+s,o,!1)-r.x,s===0?0:1),r.height=Math.max(Ln(n+l,o,!1)-r.y,l===0?0:1)),r}}function Ln(r,t,e){if(!t)return r;var a=fh(r*2);return(a+fh(t))%2===0?a/2:(a+(e?1:-1))/2}var TQ=(function(){function r(){this.x=0,this.y=0,this.width=0,this.height=0}return r})(),AQ={},it=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new TQ},t.prototype.buildPath=function(e,a){var n,s,l,o;if(this.subPixelOptimize){var c=u7(AQ,a,this.style);n=c.x,s=c.y,l=c.width,o=c.height,c.r=a.r,a=c}else n=a.x,s=a.y,l=a.width,o=a.height;a.r?CQ(e,a):e.rect(n,s,l,o)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t})(ht);it.prototype.type="rect";var FR={fill:"#000"},YR=2,ri={},EQ={style:Ge({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},jb.style)},vt=(function(r){tr(t,r);function t(e){var a=r.call(this)||this;return a.type="text",a._children=[],a._defaultStyle=FR,a.attr(e),a}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){r.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var a=this._children[e];a.zlevel=this.zlevel,a.z=this.z,a.z2=this.z2,a.culling=this.culling,a.cursor=this.cursor,a.invisible=this.invisible}},t.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):r.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(e){var a=this.innerTransformable;return a?a.getLocalTransform(e):r.prototype.getLocalTransform.call(this,e)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),r.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,RQ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(e){r.prototype.addSelfToZr.call(this,e);for(var a=0;a<this._children.length;a++)this._children[a].__zr=e},t.prototype.removeSelfFromZr=function(e){r.prototype.removeSelfFromZr.call(this,e);for(var a=0;a<this._children.length;a++)this._children[a].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new We(0,0,0,0),a=this._children,n=[],s=null,l=0;l<a.length;l++){var o=a[l],c=o.getBoundingRect(),u=o.getLocalTransform(n);u?(e.copy(c),e.applyTransform(u),s=s||e.clone(),s.union(e)):(s=s||c.clone(),s.union(c))}this._rect=s||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||FR},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,a){if(!a)return e;var n=a.rich,s=e.rich||n&&{};return ie(e,a),n&&s?(this._mergeRich(s,n),e.rich=s):s&&(e.rich=s),e},t.prototype._mergeRich=function(e,a){for(var n=gt(a),s=0;s<n.length;s++){var l=n[s];e[l]=e[l]||{},ie(e[l],a[l])}},t.prototype.getAnimationStyleProps=function(){return EQ},t.prototype._getOrCreateChild=function(e){var a=this._children[this._childCursor];return(!a||!(a instanceof e))&&(a=new e),this._children[this._childCursor++]=a,a.__zr=this.__zr,a.parent=this,a},t.prototype._updatePlainTexts=function(){var e=this.style,a=e.font||jl,n=e.padding,s=this._defaultStyle,l=e.x||0,o=e.y||0,c=e.align||s.align||"left",u=e.verticalAlign||s.verticalAlign||"top";OR(ri,s.overflowRect,l,o,c,u),l=ri.baseX,o=ri.baseY;var d=QR(e),h=QK(d,e,ri.outerWidth,ri.outerHeight),p=$N(e),g=!!e.backgroundColor,v=h.outerHeight,y=h.outerWidth,x=h.lines,b=h.lineHeight;this.isTruncated=!!h.isTruncated;var N=l,w=hu(o,h.contentHeight,u);if(p||n){var S=Dh(l,y,c),T=hu(o,v,u);p&&this._renderBackground(e,e,S,T,y,v)}w+=b/2,n&&(N=KR(l,c,n),u==="top"?w+=n[0]:u==="bottom"&&(w-=n[2]));for(var A=0,C=!1,M=!1,R=ZR("fill"in e?e.fill:(M=!0,s.fill)),k=XR("stroke"in e?e.stroke:!g&&(!s.autoStroke||M)?(A=YR,C=!0,s.stroke):null),L=e.textShadowBlur>0,O=0;O<x.length;O++){var z=this._getOrCreateChild(Rh),U=z.createStyle();z.useStyle(U),U.text=x[O],U.x=N,U.y=w,U.textAlign=c,U.textBaseline="middle",U.opacity=e.opacity,U.strokeFirst=!0,L&&(U.shadowBlur=e.textShadowBlur||0,U.shadowColor=e.textShadowColor||"transparent",U.shadowOffsetX=e.textShadowOffsetX||0,U.shadowOffsetY=e.textShadowOffsetY||0),U.stroke=k,U.fill=R,k&&(U.lineWidth=e.lineWidth||A,U.lineDash=e.lineDash,U.lineDashOffset=e.lineDashOffset||0),U.font=a,$R(U,e),w+=b,z.setBoundingRect(FS(U,h.contentWidth,h.calculatedLineHeight,C?0:null))}},t.prototype._updateRichTexts=function(){var e=this.style,a=this._defaultStyle,n=e.align||a.align,s=e.verticalAlign||a.verticalAlign,l=e.x||0,o=e.y||0;OR(ri,a.overflowRect,l,o,n,s),l=ri.baseX,o=ri.baseY;var c=QR(e),u=tQ(c,e,ri.outerWidth,ri.outerHeight,n),d=u.width,h=u.outerWidth,p=u.outerHeight,g=e.padding;this.isTruncated=!!u.isTruncated;var v=Dh(l,h,n),y=hu(o,p,s),x=v,b=y;g&&(x+=g[3],b+=g[0]);var N=x+d;$N(e)&&this._renderBackground(e,e,v,y,h,p);for(var w=!!e.backgroundColor,S=0;S<u.lines.length;S++){for(var T=u.lines[S],A=T.tokens,C=A.length,M=T.lineHeight,R=T.width,k=0,L=x,O=N,z=C-1,U=void 0;k<C&&(U=A[k],!U.align||U.align==="left");)this._placeToken(U,e,M,b,L,"left",w),R-=U.width,L+=U.width,k++;for(;z>=0&&(U=A[z],U.align==="right");)this._placeToken(U,e,M,b,O,"right",w),R-=U.width,O-=U.width,z--;for(L+=(d-(L-x)-(N-O)-R)/2;k<=z;)U=A[k],this._placeToken(U,e,M,b,L+U.width/2,"center",w),L+=U.width,k++;b+=M}},t.prototype._placeToken=function(e,a,n,s,l,o,c){var u=a.rich[e.styleName]||{};u.text=e.text;var d=e.verticalAlign,h=s+n/2;d==="top"?h=s+e.height/2:d==="bottom"&&(h=s+n-e.height/2);var p=!e.isLineHolder&&$N(u);p&&this._renderBackground(u,a,o==="right"?l-e.width:o==="center"?l-e.width/2:l,h-e.height/2,e.width,e.height);var g=!!u.backgroundColor,v=e.textPadding;v&&(l=KR(l,o,v),h-=e.height/2-v[0]-e.innerHeight/2);var y=this._getOrCreateChild(Rh),x=y.createStyle();y.useStyle(x);var b=this._defaultStyle,N=!1,w=0,S=!1,T=ZR("fill"in u?u.fill:"fill"in a?a.fill:(N=!0,b.fill)),A=XR("stroke"in u?u.stroke:"stroke"in a?a.stroke:!g&&!c&&(!b.autoStroke||N)?(w=YR,S=!0,b.stroke):null),C=u.textShadowBlur>0||a.textShadowBlur>0;x.text=e.text,x.x=l,x.y=h,C&&(x.shadowBlur=u.textShadowBlur||a.textShadowBlur||0,x.shadowColor=u.textShadowColor||a.textShadowColor||"transparent",x.shadowOffsetX=u.textShadowOffsetX||a.textShadowOffsetX||0,x.shadowOffsetY=u.textShadowOffsetY||a.textShadowOffsetY||0),x.textAlign=o,x.textBaseline="middle",x.font=e.font||jl,x.opacity=fn(u.opacity,a.opacity,1),$R(x,u),A&&(x.lineWidth=fn(u.lineWidth,a.lineWidth,w),x.lineDash=Me(u.lineDash,a.lineDash),x.lineDashOffset=a.lineDashOffset||0,x.stroke=A),T&&(x.fill=T),y.setBoundingRect(FS(x,e.contentWidth,e.contentHeight,S?0:null))},t.prototype._renderBackground=function(e,a,n,s,l,o){var c=e.backgroundColor,u=e.borderWidth,d=e.borderColor,h=c&&c.image,p=c&&!h,g=e.borderRadius,v=this,y,x;if(p||e.lineHeight||u&&d){y=this._getOrCreateChild(it),y.useStyle(y.createStyle()),y.style.fill=null;var b=y.shape;b.x=n,b.y=s,b.width=l,b.height=o,b.r=g,y.dirtyShape()}if(p){var N=y.style;N.fill=c||null,N.fillOpacity=Me(e.fillOpacity,1)}else if(h){x=this._getOrCreateChild(la),x.onload=function(){v.dirtyStyle()};var w=x.style;w.image=c.image,w.x=n,w.y=s,w.width=l,w.height=o}if(u&&d){var N=y.style;N.lineWidth=u,N.stroke=d,N.strokeOpacity=Me(e.strokeOpacity,1),N.lineDash=e.borderDash,N.lineDashOffset=e.borderDashOffset||0,y.strokeContainThreshold=0,y.hasFill()&&y.hasStroke()&&(N.strokeFirst=!0,N.lineWidth*=2)}var S=(y||x).style;S.shadowBlur=e.shadowBlur||0,S.shadowColor=e.shadowColor||"transparent",S.shadowOffsetX=e.shadowOffsetX||0,S.shadowOffsetY=e.shadowOffsetY||0,S.opacity=fn(e.opacity,a.opacity,1)},t.makeFont=function(e){var a="";return h7(e)&&(a=[e.fontStyle,e.fontWeight,d7(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),a&&Dn(a)||e.textFont||e.font},t})(fs),DQ={left:!0,right:1,center:1},MQ={top:1,bottom:1,middle:1},WR=["fontStyle","fontWeight","fontSize","fontFamily"];function d7(r){return typeof r=="string"&&(r.indexOf("px")!==-1||r.indexOf("rem")!==-1||r.indexOf("em")!==-1)?r:isNaN(+r)?HC+"px":r+"px"}function $R(r,t){for(var e=0;e<WR.length;e++){var a=WR[e],n=t[a];n!=null&&(r[a]=n)}}function h7(r){return r.fontSize!=null||r.fontFamily||r.fontWeight}function RQ(r){return qR(r),B(r.rich,qR),r}function qR(r){if(r){r.font=vt.makeFont(r);var t=r.align;t==="middle"&&(t="center"),r.align=t==null||DQ[t]?t:"left";var e=r.verticalAlign;e==="center"&&(e="middle"),r.verticalAlign=e==null||MQ[e]?e:"top";var a=r.padding;a&&(r.padding=jm(r.padding))}}function XR(r,t){return r==null||t<=0||r==="transparent"||r==="none"?null:r.image||r.colorStops?"#000":r}function ZR(r){return r==null||r==="none"?null:r.image||r.colorStops?"#000":r}function KR(r,t,e){return t==="right"?r-e[1]:t==="center"?r+e[3]/2-e[1]/2:r+e[3]}function QR(r){var t=r.text;return t!=null&&(t+=""),t}function $N(r){return!!(r.backgroundColor||r.lineHeight||r.borderWidth&&r.borderColor)}var Xe=ut(),$S=function(r,t,e,a){if(a){var n=Xe(a);n.dataIndex=e,n.dataType=t,n.seriesIndex=r,n.ssrType="chart",a.type==="group"&&a.traverse(function(s){var l=Xe(s);l.seriesIndex=r,l.dataIndex=e,l.dataType=t,l.ssrType="chart"})}},JR=1,eL={},f7=ut(),oT=ut(),cT=0,Am=1,Tb=2,Za=["emphasis","blur","select"],Fg=["normal","emphasis","blur","select"],Qh=10,LQ=9,pu="highlight",Dx="downplay",cy="select",qS="unselect",uy="toggleSelect",uT="selectchanged";function Pd(r){return r!=null&&r!=="none"}function Ab(r,t,e){r.onHoverStateChange&&(r.hoverState||0)!==e&&r.onHoverStateChange(t),r.hoverState=e}function p7(r){Ab(r,"emphasis",Tb)}function g7(r){r.hoverState===Tb&&Ab(r,"normal",cT)}function dT(r){Ab(r,"blur",Am)}function m7(r){r.hoverState===Am&&Ab(r,"normal",cT)}function IQ(r){r.selected=!0}function kQ(r){r.selected=!1}function tL(r,t,e){t(r,e)}function Rl(r,t,e){tL(r,t,e),r.isGroup&&r.traverse(function(a){tL(a,t,e)})}function dy(r,t){switch(t){case"emphasis":r.hoverState=Tb;break;case"normal":r.hoverState=cT;break;case"blur":r.hoverState=Am;break;case"select":r.selected=!0}}function OQ(r,t,e,a){for(var n=r.style,s={},l=0;l<t.length;l++){var o=t[l],c=n[o];s[o]=c??(a&&a[o])}for(var l=0;l<r.animators.length;l++){var u=r.animators[l];u.__fromStateTransition&&u.__fromStateTransition.indexOf(e)<0&&u.targetName==="style"&&u.saveTo(s,t)}return s}function PQ(r,t,e,a){var n=e&&tt(e,"select")>=0,s=!1;if(r instanceof ht){var l=f7(r),o=n&&l.selectFill||l.normalFill,c=n&&l.selectStroke||l.normalStroke;if(Pd(o)||Pd(c)){a=a||{};var u=a.style||{};u.fill==="inherit"?(s=!0,a=ie({},a),u=ie({},u),u.fill=o):!Pd(u.fill)&&Pd(o)?(s=!0,a=ie({},a),u=ie({},u),u.fill=ry(o)):!Pd(u.stroke)&&Pd(c)&&(s||(a=ie({},a),u=ie({},u)),u.stroke=ry(c)),a.style=u}}if(a&&a.z2==null){s||(a=ie({},a));var d=r.z2EmphasisLift;a.z2=r.z2+(d??Qh)}return a}function zQ(r,t,e){if(e&&e.z2==null){e=ie({},e);var a=r.z2SelectLift;e.z2=r.z2+(a??LQ)}return e}function BQ(r,t,e){var a=tt(r.currentStates,t)>=0,n=r.style.opacity,s=a?null:OQ(r,["opacity"],t,{opacity:1});e=e||{};var l=e.style||{};return l.opacity==null&&(e=ie({},e),l=ie({opacity:a?n:s.opacity*.1},l),e.style=l),e}function qN(r,t){var e=this.states[r];if(this.style){if(r==="emphasis")return PQ(this,r,t,e);if(r==="blur")return BQ(this,r,e);if(r==="select")return zQ(this,r,e)}return e}function Tu(r){r.stateProxy=qN;var t=r.getTextContent(),e=r.getTextGuideLine();t&&(t.stateProxy=qN),e&&(e.stateProxy=qN)}function rL(r,t){!b7(r,t)&&!r.__highByOuter&&Rl(r,p7)}function aL(r,t){!b7(r,t)&&!r.__highByOuter&&Rl(r,g7)}function Sl(r,t){r.__highByOuter|=1<<(t||0),Rl(r,p7)}function Cl(r,t){!(r.__highByOuter&=~(1<<(t||0)))&&Rl(r,g7)}function v7(r){Rl(r,dT)}function hT(r){Rl(r,m7)}function x7(r){Rl(r,IQ)}function y7(r){Rl(r,kQ)}function b7(r,t){return r.__highDownSilentOnTouch&&t.zrByTouch}function _7(r){var t=r.getModel(),e=[],a=[];t.eachComponent(function(n,s){var l=oT(s),o=n==="series",c=o?r.getViewOfSeriesModel(s):r.getViewOfComponentModel(s);!o&&a.push(c),l.isBlured&&(c.group.traverse(function(u){m7(u)}),o&&e.push(s)),l.isBlured=!1}),B(a,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(e,!1,t)})}function XS(r,t,e,a){var n=a.getModel();e=e||"coordinateSystem";function s(u,d){for(var h=0;h<d.length;h++){var p=u.getItemGraphicEl(d[h]);p&&hT(p)}}if(r!=null&&!(!t||t==="none")){var l=n.getSeriesByIndex(r),o=l.coordinateSystem;o&&o.master&&(o=o.master);var c=[];n.eachSeries(function(u){var d=l===u,h=u.coordinateSystem;h&&h.master&&(h=h.master);var p=h&&o?h===o:d;if(!(e==="series"&&!d||e==="coordinateSystem"&&!p||t==="series"&&d)){var g=a.getViewOfSeriesModel(u);if(g.group.traverse(function(x){x.__highByOuter&&d&&t==="self"||dT(x)}),Aa(t))s(u.getData(),t);else if(Ue(t))for(var v=gt(t),y=0;y<v.length;y++)s(u.getData(v[y]),t[v[y]]);c.push(u),oT(u).isBlured=!0}}),n.eachComponent(function(u,d){if(u!=="series"){var h=a.getViewOfComponentModel(d);h&&h.toggleBlurSeries&&h.toggleBlurSeries(c,!0,n)}})}}function ZS(r,t,e){if(!(r==null||t==null)){var a=e.getModel().getComponent(r,t);if(a){oT(a).isBlured=!0;var n=e.getViewOfComponentModel(a);!n||!n.focusBlurEnabled||n.group.traverse(function(s){dT(s)})}}}function VQ(r,t,e){var a=r.seriesIndex,n=r.getData(t.dataType);if(n){var s=Su(n,t);s=(de(s)?s[0]:s)||0;var l=n.getItemGraphicEl(s);if(!l)for(var o=n.count(),c=0;!l&&c<o;)l=n.getItemGraphicEl(c++);if(l){var u=Xe(l);XS(a,u.focus,u.blurScope,e)}else{var d=r.get(["emphasis","focus"]),h=r.get(["emphasis","blurScope"]);d!=null&&XS(a,d,h,e)}}}function fT(r,t,e,a){var n={focusSelf:!1,dispatchers:null};if(r==null||r==="series"||t==null||e==null)return n;var s=a.getModel().getComponent(r,t);if(!s)return n;var l=a.getViewOfComponentModel(s);if(!l||!l.findHighDownDispatchers)return n;for(var o=l.findHighDownDispatchers(e),c,u=0;u<o.length;u++)if(Xe(o[u]).focus==="self"){c=!0;break}return{focusSelf:c,dispatchers:o}}function HQ(r,t,e){var a=Xe(r),n=fT(a.componentMainType,a.componentIndex,a.componentHighDownName,e),s=n.dispatchers,l=n.focusSelf;s?(l&&ZS(a.componentMainType,a.componentIndex,e),B(s,function(o){return rL(o,t)})):(XS(a.seriesIndex,a.focus,a.blurScope,e),a.focus==="self"&&ZS(a.componentMainType,a.componentIndex,e),rL(r,t))}function GQ(r,t,e){_7(e);var a=Xe(r),n=fT(a.componentMainType,a.componentIndex,a.componentHighDownName,e).dispatchers;n?B(n,function(s){return aL(s,t)}):aL(r,t)}function UQ(r,t,e){if(QS(t)){var a=t.dataType,n=r.getData(a),s=Su(n,t);de(s)||(s=[s]),r[t.type===uy?"toggleSelect":t.type===cy?"select":"unselect"](s,a)}}function nL(r){var t=r.getAllData();B(t,function(e){var a=e.data,n=e.type;a.eachItemGraphicEl(function(s,l){r.isSelected(l,n)?x7(s):y7(s)})})}function FQ(r){var t=[];return r.eachSeries(function(e){var a=e.getAllData();B(a,function(n){n.data;var s=n.type,l=e.getSelectedDataIndices();if(l.length>0){var o={dataIndex:l,seriesIndex:e.seriesIndex};s!=null&&(o.dataType=s),t.push(o)}})}),t}function Mo(r,t,e){ru(r,!0),Rl(r,Tu),KS(r,t,e)}function YQ(r){ru(r,!1)}function nr(r,t,e,a){a?YQ(r):Mo(r,t,e)}function KS(r,t,e){var a=Xe(r);t!=null?(a.focus=t,a.blurScope=e):a.focus&&(a.focus=null)}var sL=["emphasis","blur","select"],WQ={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Xr(r,t,e,a){e=e||"itemStyle";for(var n=0;n<sL.length;n++){var s=sL[n],l=t.getModel([s,e]),o=r.ensureState(s);o.style=a?a(l):l[WQ[e]]()}}function ru(r,t){var e=t===!1,a=r;r.highDownSilentOnTouch&&(a.__highDownSilentOnTouch=r.highDownSilentOnTouch),(!e||a.__highDownDispatcher)&&(a.__highByOuter=a.__highByOuter||0,a.__highDownDispatcher=!e)}function Yg(r){return!!(r&&r.__highDownDispatcher)}function $Q(r,t,e){var a=Xe(r);a.componentMainType=t.mainType,a.componentIndex=t.componentIndex,a.componentHighDownName=e}function qQ(r){var t=eL[r];return t==null&&JR<=32&&(t=eL[r]=JR++),t}function QS(r){var t=r.type;return t===cy||t===qS||t===uy}function iL(r){var t=r.type;return t===pu||t===Dx}function XQ(r){var t=f7(r);t.normalFill=r.style.fill,t.normalStroke=r.style.stroke;var e=r.states.select||{};t.selectFill=e.style&&e.style.fill||null,t.selectStroke=e.style&&e.style.stroke||null}var zd=wi.CMD,ZQ=[[],[],[]],lL=Math.sqrt,KQ=Math.atan2;function N7(r,t){if(t){var e=r.data,a=r.len(),n,s,l,o,c,u,d=zd.M,h=zd.C,p=zd.L,g=zd.R,v=zd.A,y=zd.Q;for(l=0,o=0;l<a;){switch(n=e[l++],o=l,s=0,n){case d:s=1;break;case p:s=1;break;case h:s=3;break;case y:s=2;break;case v:var x=t[4],b=t[5],N=lL(t[0]*t[0]+t[1]*t[1]),w=lL(t[2]*t[2]+t[3]*t[3]),S=KQ(-t[1]/w,t[0]/N);e[l]*=N,e[l++]+=x,e[l]*=w,e[l++]+=b,e[l++]*=N,e[l++]*=w,e[l++]+=S,e[l++]+=S,l+=2,o=l;break;case g:u[0]=e[l++],u[1]=e[l++],xr(u,u,t),e[o++]=u[0],e[o++]=u[1],u[0]+=e[l++],u[1]+=e[l++],xr(u,u,t),e[o++]=u[0],e[o++]=u[1]}for(c=0;c<s;c++){var T=ZQ[c];T[0]=e[l++],T[1]=e[l++],xr(T,T,t),e[o++]=T[0],e[o++]=T[1]}}r.increaseVersion()}}var XN=Math.sqrt,m0=Math.sin,v0=Math.cos,Sp=Math.PI;function oL(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function JS(r,t){return(r[0]*t[0]+r[1]*t[1])/(oL(r)*oL(t))}function cL(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(JS(r,t))}function uL(r,t,e,a,n,s,l,o,c,u,d){var h=c*(Sp/180),p=v0(h)*(r-e)/2+m0(h)*(t-a)/2,g=-1*m0(h)*(r-e)/2+v0(h)*(t-a)/2,v=p*p/(l*l)+g*g/(o*o);v>1&&(l*=XN(v),o*=XN(v));var y=(n===s?-1:1)*XN((l*l*(o*o)-l*l*(g*g)-o*o*(p*p))/(l*l*(g*g)+o*o*(p*p)))||0,x=y*l*g/o,b=y*-o*p/l,N=(r+e)/2+v0(h)*x-m0(h)*b,w=(t+a)/2+m0(h)*x+v0(h)*b,S=cL([1,0],[(p-x)/l,(g-b)/o]),T=[(p-x)/l,(g-b)/o],A=[(-1*p-x)/l,(-1*g-b)/o],C=cL(T,A);if(JS(T,A)<=-1&&(C=Sp),JS(T,A)>=1&&(C=0),C<0){var M=Math.round(C/Sp*1e6)/1e6;C=Sp*2+M%2*Sp}d.addData(u,N,w,l,o,S,C,h,s)}var QQ=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,JQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function eJ(r){var t=new wi;if(!r)return t;var e=0,a=0,n=e,s=a,l,o=wi.CMD,c=r.match(QQ);if(!c)return t;for(var u=0;u<c.length;u++){for(var d=c[u],h=d.charAt(0),p=void 0,g=d.match(JQ)||[],v=g.length,y=0;y<v;y++)g[y]=parseFloat(g[y]);for(var x=0;x<v;){var b=void 0,N=void 0,w=void 0,S=void 0,T=void 0,A=void 0,C=void 0,M=e,R=a,k=void 0,L=void 0;switch(h){case"l":e+=g[x++],a+=g[x++],p=o.L,t.addData(p,e,a);break;case"L":e=g[x++],a=g[x++],p=o.L,t.addData(p,e,a);break;case"m":e+=g[x++],a+=g[x++],p=o.M,t.addData(p,e,a),n=e,s=a,h="l";break;case"M":e=g[x++],a=g[x++],p=o.M,t.addData(p,e,a),n=e,s=a,h="L";break;case"h":e+=g[x++],p=o.L,t.addData(p,e,a);break;case"H":e=g[x++],p=o.L,t.addData(p,e,a);break;case"v":a+=g[x++],p=o.L,t.addData(p,e,a);break;case"V":a=g[x++],p=o.L,t.addData(p,e,a);break;case"C":p=o.C,t.addData(p,g[x++],g[x++],g[x++],g[x++],g[x++],g[x++]),e=g[x-2],a=g[x-1];break;case"c":p=o.C,t.addData(p,g[x++]+e,g[x++]+a,g[x++]+e,g[x++]+a,g[x++]+e,g[x++]+a),e+=g[x-2],a+=g[x-1];break;case"S":b=e,N=a,k=t.len(),L=t.data,l===o.C&&(b+=e-L[k-4],N+=a-L[k-3]),p=o.C,M=g[x++],R=g[x++],e=g[x++],a=g[x++],t.addData(p,b,N,M,R,e,a);break;case"s":b=e,N=a,k=t.len(),L=t.data,l===o.C&&(b+=e-L[k-4],N+=a-L[k-3]),p=o.C,M=e+g[x++],R=a+g[x++],e+=g[x++],a+=g[x++],t.addData(p,b,N,M,R,e,a);break;case"Q":M=g[x++],R=g[x++],e=g[x++],a=g[x++],p=o.Q,t.addData(p,M,R,e,a);break;case"q":M=g[x++]+e,R=g[x++]+a,e+=g[x++],a+=g[x++],p=o.Q,t.addData(p,M,R,e,a);break;case"T":b=e,N=a,k=t.len(),L=t.data,l===o.Q&&(b+=e-L[k-4],N+=a-L[k-3]),e=g[x++],a=g[x++],p=o.Q,t.addData(p,b,N,e,a);break;case"t":b=e,N=a,k=t.len(),L=t.data,l===o.Q&&(b+=e-L[k-4],N+=a-L[k-3]),e+=g[x++],a+=g[x++],p=o.Q,t.addData(p,b,N,e,a);break;case"A":w=g[x++],S=g[x++],T=g[x++],A=g[x++],C=g[x++],M=e,R=a,e=g[x++],a=g[x++],p=o.A,uL(M,R,e,a,A,C,w,S,T,p,t);break;case"a":w=g[x++],S=g[x++],T=g[x++],A=g[x++],C=g[x++],M=e,R=a,e+=g[x++],a+=g[x++],p=o.A,uL(M,R,e,a,A,C,w,S,T,p,t);break}}(h==="z"||h==="Z")&&(p=o.Z,t.addData(p),e=n,a=s),l=p}return t.toStatic(),t}var j7=(function(r){tr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.applyTransform=function(e){},t})(ht);function w7(r){return r.setData!=null}function S7(r,t){var e=eJ(r),a=ie({},t);return a.buildPath=function(n){var s=w7(n);if(s&&n.canSave()){n.appendPath(e);var l=n.getContext();l&&n.rebuildPath(l,1)}else{var l=s?n.getContext():n;l&&e.rebuildPath(l,1)}},a.applyTransform=function(n){N7(e,n),this.dirtyShape()},a}function C7(r,t){return new j7(S7(r,t))}function tJ(r,t){var e=S7(r,t),a=(function(n){tr(s,n);function s(l){var o=n.call(this,l)||this;return o.applyTransform=e.applyTransform,o.buildPath=e.buildPath,o}return s})(j7);return a}function rJ(r,t){for(var e=[],a=r.length,n=0;n<a;n++){var s=r[n];e.push(s.getUpdatedPathProxy(!0))}var l=new ht(t);return l.createPathProxy(),l.buildPath=function(o){if(w7(o)){o.appendPath(e);var c=o.getContext();c&&o.rebuildPath(c,1)}},l}function pT(r,t){t=t||{};var e=new ht;return r.shape&&e.setShape(r.shape),e.setStyle(r.style),t.bakeTransform?N7(e.path,r.getComputedTransform()):t.toLocal?e.setLocalTransform(r.getComputedTransform()):e.copyTransform(r),e.buildPath=r.buildPath,e.applyTransform=e.applyTransform,e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel,e}var aJ=(function(){function r(){this.cx=0,this.cy=0,this.r=0}return r})(),Ei=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new aJ},t.prototype.buildPath=function(e,a){e.moveTo(a.cx+a.r,a.cy),e.arc(a.cx,a.cy,a.r,0,Math.PI*2)},t})(ht);Ei.prototype.type="circle";var nJ=(function(){function r(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return r})(),Em=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new nJ},t.prototype.buildPath=function(e,a){var n=.5522848,s=a.cx,l=a.cy,o=a.rx,c=a.ry,u=o*n,d=c*n;e.moveTo(s-o,l),e.bezierCurveTo(s-o,l-d,s-u,l-c,s,l-c),e.bezierCurveTo(s+u,l-c,s+o,l-d,s+o,l),e.bezierCurveTo(s+o,l+d,s+u,l+c,s,l+c),e.bezierCurveTo(s-u,l+c,s-o,l+d,s-o,l),e.closePath()},t})(ht);Em.prototype.type="ellipse";var T7=Math.PI,ZN=T7*2,Ec=Math.sin,Bd=Math.cos,sJ=Math.acos,La=Math.atan2,dL=Math.abs,wg=Math.sqrt,ng=Math.max,ai=Math.min,ws=1e-4;function iJ(r,t,e,a,n,s,l,o){var c=e-r,u=a-t,d=l-n,h=o-s,p=h*c-d*u;if(!(p*p<ws))return p=(d*(t-s)-h*(r-n))/p,[r+p*c,t+p*u]}function x0(r,t,e,a,n,s,l){var o=r-e,c=t-a,u=(l?s:-s)/wg(o*o+c*c),d=u*c,h=-u*o,p=r+d,g=t+h,v=e+d,y=a+h,x=(p+v)/2,b=(g+y)/2,N=v-p,w=y-g,S=N*N+w*w,T=n-s,A=p*y-v*g,C=(w<0?-1:1)*wg(ng(0,T*T*S-A*A)),M=(A*w-N*C)/S,R=(-A*N-w*C)/S,k=(A*w+N*C)/S,L=(-A*N+w*C)/S,O=M-x,z=R-b,U=k-x,H=L-b;return O*O+z*z>U*U+H*H&&(M=k,R=L),{cx:M,cy:R,x0:-d,y0:-h,x1:M*(n/T-1),y1:R*(n/T-1)}}function lJ(r){var t;if(de(r)){var e=r.length;if(!e)return r;e===1?t=[r[0],r[0],0,0]:e===2?t=[r[0],r[0],r[1],r[1]]:e===3?t=r.concat(r[2]):t=r}else t=[r,r,r,r];return t}function oJ(r,t){var e,a=ng(t.r,0),n=ng(t.r0||0,0),s=a>0,l=n>0;if(!(!s&&!l)){if(s||(a=n,n=0),n>a){var o=a;a=n,n=o}var c=t.startAngle,u=t.endAngle;if(!(isNaN(c)||isNaN(u))){var d=t.cx,h=t.cy,p=!!t.clockwise,g=dL(u-c),v=g>ZN&&g%ZN;if(v>ws&&(g=v),!(a>ws))r.moveTo(d,h);else if(g>ZN-ws)r.moveTo(d+a*Bd(c),h+a*Ec(c)),r.arc(d,h,a,c,u,!p),n>ws&&(r.moveTo(d+n*Bd(u),h+n*Ec(u)),r.arc(d,h,n,u,c,p));else{var y=void 0,x=void 0,b=void 0,N=void 0,w=void 0,S=void 0,T=void 0,A=void 0,C=void 0,M=void 0,R=void 0,k=void 0,L=void 0,O=void 0,z=void 0,U=void 0,H=a*Bd(c),P=a*Ec(c),F=n*Bd(u),Y=n*Ec(u),X=g>ws;if(X){var q=t.cornerRadius;q&&(e=lJ(q),y=e[0],x=e[1],b=e[2],N=e[3]);var G=dL(a-n)/2;if(w=ai(G,b),S=ai(G,N),T=ai(G,y),A=ai(G,x),R=C=ng(w,S),k=M=ng(T,A),(C>ws||M>ws)&&(L=a*Bd(u),O=a*Ec(u),z=n*Bd(c),U=n*Ec(c),g<T7)){var $=iJ(H,P,z,U,L,O,F,Y);if($){var Z=H-$[0],te=P-$[1],me=L-$[0],Ce=O-$[1],Ve=1/Ec(sJ((Z*me+te*Ce)/(wg(Z*Z+te*te)*wg(me*me+Ce*Ce)))/2),Ee=wg($[0]*$[0]+$[1]*$[1]);R=ai(C,(a-Ee)/(Ve+1)),k=ai(M,(n-Ee)/(Ve-1))}}}if(!X)r.moveTo(d+H,h+P);else if(R>ws){var be=ai(b,R),He=ai(N,R),Se=x0(z,U,H,P,a,be,p),Ie=x0(L,O,F,Y,a,He,p);r.moveTo(d+Se.cx+Se.x0,h+Se.cy+Se.y0),R<C&&be===He?r.arc(d+Se.cx,h+Se.cy,R,La(Se.y0,Se.x0),La(Ie.y0,Ie.x0),!p):(be>0&&r.arc(d+Se.cx,h+Se.cy,be,La(Se.y0,Se.x0),La(Se.y1,Se.x1),!p),r.arc(d,h,a,La(Se.cy+Se.y1,Se.cx+Se.x1),La(Ie.cy+Ie.y1,Ie.cx+Ie.x1),!p),He>0&&r.arc(d+Ie.cx,h+Ie.cy,He,La(Ie.y1,Ie.x1),La(Ie.y0,Ie.x0),!p))}else r.moveTo(d+H,h+P),r.arc(d,h,a,c,u,!p);if(!(n>ws)||!X)r.lineTo(d+F,h+Y);else if(k>ws){var be=ai(y,k),He=ai(x,k),Se=x0(F,Y,L,O,n,-He,p),Ie=x0(H,P,z,U,n,-be,p);r.lineTo(d+Se.cx+Se.x0,h+Se.cy+Se.y0),k<M&&be===He?r.arc(d+Se.cx,h+Se.cy,k,La(Se.y0,Se.x0),La(Ie.y0,Ie.x0),!p):(He>0&&r.arc(d+Se.cx,h+Se.cy,He,La(Se.y0,Se.x0),La(Se.y1,Se.x1),!p),r.arc(d,h,n,La(Se.cy+Se.y1,Se.cx+Se.x1),La(Ie.cy+Ie.y1,Ie.cx+Ie.x1),p),be>0&&r.arc(d+Ie.cx,h+Ie.cy,be,La(Ie.y1,Ie.x1),La(Ie.y0,Ie.x0),!p))}else r.lineTo(d+F,h+Y),r.arc(d,h,n,u,c,p)}r.closePath()}}}var cJ=(function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return r})(),Da=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new cJ},t.prototype.buildPath=function(e,a){oJ(e,a)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t})(ht);Da.prototype.type="sector";var uJ=(function(){function r(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return r})(),Jh=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new uJ},t.prototype.buildPath=function(e,a){var n=a.cx,s=a.cy,l=Math.PI*2;e.moveTo(n+a.r,s),e.arc(n,s,a.r,0,l,!1),e.moveTo(n+a.r0,s),e.arc(n,s,a.r0,0,l,!0)},t})(ht);Jh.prototype.type="ring";function dJ(r,t,e,a){var n=[],s=[],l=[],o=[],c,u,d,h;if(a){d=[1/0,1/0],h=[-1/0,-1/0];for(var p=0,g=r.length;p<g;p++)dl(d,d,r[p]),hl(h,h,r[p]);dl(d,d,a[0]),hl(h,h,a[1])}for(var p=0,g=r.length;p<g;p++){var v=r[p];if(e)c=r[p?p-1:g-1],u=r[(p+1)%g];else if(p===0||p===g-1){n.push(yi(r[p]));continue}else c=r[p-1],u=r[p+1];_o(s,u,c),vg(s,s,t);var y=Zx(v,c),x=Zx(v,u),b=y+x;b!==0&&(y/=b,x/=b),vg(l,s,-y),vg(o,s,x);var N=yS([],v,l),w=yS([],v,o);a&&(hl(N,N,d),dl(N,N,h),hl(w,w,d),dl(w,w,h)),n.push(N),n.push(w)}return e&&n.push(n.shift()),n}function A7(r,t,e){var a=t.smooth,n=t.points;if(n&&n.length>=2){if(a){var s=dJ(n,a,e,t.smoothConstraint);r.moveTo(n[0][0],n[0][1]);for(var l=n.length,o=0;o<(e?l:l-1);o++){var c=s[o*2],u=s[o*2+1],d=n[(o+1)%l];r.bezierCurveTo(c[0],c[1],u[0],u[1],d[0],d[1])}}else{r.moveTo(n[0][0],n[0][1]);for(var o=1,h=n.length;o<h;o++)r.lineTo(n[o][0],n[o][1])}e&&r.closePath()}}var hJ=(function(){function r(){this.points=null,this.smooth=0,this.smoothConstraint=null}return r})(),Ma=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new hJ},t.prototype.buildPath=function(e,a){A7(e,a,!0)},t})(ht);Ma.prototype.type="polygon";var fJ=(function(){function r(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return r})(),ma=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new fJ},t.prototype.buildPath=function(e,a){A7(e,a,!1)},t})(ht);ma.prototype.type="polyline";var pJ={},gJ=(function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r})(),Tr=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new gJ},t.prototype.buildPath=function(e,a){var n,s,l,o;if(this.subPixelOptimize){var c=Cb(pJ,a,this.style);n=c.x1,s=c.y1,l=c.x2,o=c.y2}else n=a.x1,s=a.y1,l=a.x2,o=a.y2;var u=a.percent;u!==0&&(e.moveTo(n,s),u<1&&(l=n*(1-u)+l*u,o=s*(1-u)+o*u),e.lineTo(l,o))},t.prototype.pointAt=function(e){var a=this.shape;return[a.x1*(1-e)+a.x2*e,a.y1*(1-e)+a.y2*e]},t})(ht);Tr.prototype.type="line";var an=[],mJ=(function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return r})();function hL(r,t,e){var a=r.cpx2,n=r.cpy2;return a!=null||n!=null?[(e?mR:ta)(r.x1,r.cpx1,r.cpx2,r.x2,t),(e?mR:ta)(r.y1,r.cpy1,r.cpy2,r.y2,t)]:[(e?CS:pa)(r.x1,r.cpx1,r.x2,t),(e?CS:pa)(r.y1,r.cpy1,r.y2,t)]}var ef=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new mJ},t.prototype.buildPath=function(e,a){var n=a.x1,s=a.y1,l=a.x2,o=a.y2,c=a.cpx1,u=a.cpy1,d=a.cpx2,h=a.cpy2,p=a.percent;p!==0&&(e.moveTo(n,s),d==null||h==null?(p<1&&(zg(n,c,l,p,an),c=an[1],l=an[2],zg(s,u,o,p,an),u=an[1],o=an[2]),e.quadraticCurveTo(c,u,l,o)):(p<1&&(Po(n,c,d,l,p,an),c=an[1],d=an[2],l=an[3],Po(s,u,h,o,p,an),u=an[1],h=an[2],o=an[3]),e.bezierCurveTo(c,u,d,h,l,o)))},t.prototype.pointAt=function(e){return hL(this.shape,e,!1)},t.prototype.tangentAt=function(e){var a=hL(this.shape,e,!0);return Ou(a,a)},t})(ht);ef.prototype.type="bezier-curve";var vJ=(function(){function r(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r})(),Dm=(function(r){tr(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new vJ},t.prototype.buildPath=function(e,a){var n=a.cx,s=a.cy,l=Math.max(a.r,0),o=a.startAngle,c=a.endAngle,u=a.clockwise,d=Math.cos(o),h=Math.sin(o);e.moveTo(d*l+n,h*l+s),e.arc(n,s,l,o,c,!u)},t})(ht);Dm.prototype.type="arc";var Mm=(function(r){tr(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="compound",e}return t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,a=this.shapeChanged(),n=0;n<e.length;n++)a=a||e[n].shapeChanged();a&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],a=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(a[0],a[1],e[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,a){for(var n=a.paths||[],s=0;s<n.length;s++)n[s].buildPath(e,n[s].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],a=0;a<e.length;a++)e[a].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ht.prototype.getBoundingRect.call(this)},t})(ht),E7=(function(){function r(t){this.colorStops=t||[]}return r.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},r})(),Pu=(function(r){tr(t,r);function t(e,a,n,s,l,o){var c=r.call(this,l)||this;return c.x=e??0,c.y=a??0,c.x2=n??1,c.y2=s??0,c.type="linear",c.global=o||!1,c}return t})(E7),gT=(function(r){tr(t,r);function t(e,a,n,s,l){var o=r.call(this,s)||this;return o.x=e??.5,o.y=a??.5,o.r=n??.5,o.type="radial",o.global=l||!1,o}return t})(E7),KN=Math.min,xJ=Math.max,y0=Math.abs,Dc=[0,0],Mc=[0,0],fa=gz(),b0=fa.minTv,_0=fa.maxTv,D7=(function(){function r(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var a=0;a<4;a++)this._corners[a]=new Ye;for(var a=0;a<2;a++)this._axes[a]=new Ye;t&&this.fromBoundingRect(t,e)}return r.prototype.fromBoundingRect=function(t,e){var a=this._corners,n=this._axes,s=t.x,l=t.y,o=s+t.width,c=l+t.height;if(a[0].set(s,l),a[1].set(o,l),a[2].set(o,c),a[3].set(s,c),e)for(var u=0;u<4;u++)a[u].transform(e);Ye.sub(n[0],a[1],a[0]),Ye.sub(n[1],a[3],a[0]),n[0].normalize(),n[1].normalize();for(var u=0;u<2;u++)this._origin[u]=n[u].dot(a[0])},r.prototype.intersect=function(t,e,a){var n=!0,s=!e;return e&&Ye.set(e,0,0),fa.reset(a,!s),!this._intersectCheckOneSide(this,t,s,1)&&(n=!1,s)||!this._intersectCheckOneSide(t,this,s,-1)&&(n=!1,s)||!s&&!fa.negativeSize&&Ye.copy(e,n?fa.useDir?fa.dirMinTv:b0:_0),n},r.prototype._intersectCheckOneSide=function(t,e,a,n){for(var s=!0,l=0;l<2;l++){var o=t._axes[l];if(t._getProjMinMaxOnAxis(l,t._corners,Dc),t._getProjMinMaxOnAxis(l,e._corners,Mc),fa.negativeSize||Dc[1]<Mc[0]||Dc[0]>Mc[1]){if(s=!1,fa.negativeSize||a)return s;var c=y0(Mc[0]-Dc[1]),u=y0(Dc[0]-Mc[1]);KN(c,u)>_0.len()&&(c<u?Ye.scale(_0,o,-c*n):Ye.scale(_0,o,u*n))}else if(!a){var c=y0(Mc[0]-Dc[1]),u=y0(Dc[0]-Mc[1]);(fa.useDir||KN(c,u)<b0.len())&&((c<u||!fa.bidirectional)&&(Ye.scale(b0,o,c*n),fa.useDir&&fa.calcDirMTV()),(c>=u||!fa.bidirectional)&&(Ye.scale(b0,o,-u*n),fa.useDir&&fa.calcDirMTV()))}}return s},r.prototype._getProjMinMaxOnAxis=function(t,e,a){for(var n=this._axes[t],s=this._origin,l=e[0].dot(n)+s[t],o=l,c=l,u=1;u<e.length;u++){var d=e[u].dot(n)+s[t];o=KN(d,o),c=xJ(d,c)}a[0]=o+fa.touchThreshold,a[1]=c-fa.touchThreshold,fa.negativeSize=a[1]<a[0]},r})(),yJ=[],M7=(function(r){tr(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return t.prototype.traverse=function(e,a){e.call(a,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,a){a?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,a){a=a||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],a)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var a=this._cursor;a<this._displayables.length;a++)e&&e(this._displayables[a]);for(var a=0;a<this._temporaryDisplayables.length;a++)e&&e(this._temporaryDisplayables[a])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){var a=this._displayables[e];a.parent=this,a.update(),a.parent=null}for(var e=0;e<this._temporaryDisplayables.length;e++){var a=this._temporaryDisplayables[e];a.parent=this,a.update(),a.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new We(1/0,1/0,-1/0,-1/0),a=0;a<this._displayables.length;a++){var n=this._displayables[a],s=n.getBoundingRect().clone();n.needLocalTransform()&&s.applyTransform(n.getLocalTransform(yJ)),e.union(s)}this._rect=e}return this._rect},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),s=this.getBoundingRect();if(s.contain(n[0],n[1]))for(var l=0;l<this._displayables.length;l++){var o=this._displayables[l];if(o.contain(e,a))return!0}return!1},t})(fs),R7=ut();function tf(r,t,e,a,n){var s;if(t&&t.ecModel){var l=t.ecModel.getUpdatePayload();s=l&&l.animation}var o=t&&t.isAnimationEnabled(),c=r==="update";if(o){var u=void 0,d=void 0,h=void 0;a?(u=Me(a.duration,200),d=Me(a.easing,"cubicOut"),h=0):(u=t.getShallow(c?"animationDurationUpdate":"animationDuration"),d=t.getShallow(c?"animationEasingUpdate":"animationEasing"),h=t.getShallow(c?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(u=s.duration),s.easing!=null&&(d=s.easing),s.delay!=null&&(h=s.delay)),Le(h)&&(h=h(e,n)),Le(u)&&(u=u(e));var p={duration:u||0,delay:h,easing:d};return p}else return null}function mT(r,t,e,a,n,s,l){var o=!1,c;Le(n)?(l=s,s=n,n=null):Ue(n)&&(s=n.cb,l=n.during,o=n.isFrom,c=n.removeOpt,n=n.dataIndex);var u=r==="leave";u||t.stopAnimation("leave");var d=tf(r,a,n,u?c||{}:null,a&&a.getAnimationDelayParams?a.getAnimationDelayParams(t,n):null);if(d&&d.duration>0){var h=d.duration,p=d.delay,g=d.easing,v={duration:h,delay:p||0,easing:g,done:s,force:!!s||!!l,setToFinal:!u,scope:r,during:l};o?t.animateFrom(e,v):t.animateTo(e,v)}else t.stopAnimation(),!o&&t.attr(e),l&&l(1),s&&s()}function Nt(r,t,e,a,n,s){mT("update",r,t,e,a,n,s)}function Kt(r,t,e,a,n,s){mT("enter",r,t,e,a,n,s)}function jh(r){if(!r.__zr)return!0;for(var t=0;t<r.animators.length;t++){var e=r.animators[t];if(e.scope==="leave")return!0}return!1}function zo(r,t,e,a,n,s){jh(r)||mT("leave",r,t,e,a,n,s)}function fL(r,t,e,a){r.removeTextContent(),r.removeTextGuideLine(),zo(r,{style:{opacity:0}},t,e,a)}function xl(r,t,e){function a(){r.parent&&r.parent.remove(r)}r.isGroup?r.traverse(function(n){n.isGroup||fL(n,t,e,a)}):fL(r,t,e,a)}function ps(r){R7(r).oldStyle=r.style}function bJ(r){return R7(r).oldStyle}var e2={},Ke=["x","y"],zr=["width","height"];function L7(r){return ht.extend(r)}var _J=tJ;function I7(r,t){return _J(r,t)}function ms(r,t){e2[r]=t}function Wg(r){if(e2.hasOwnProperty(r))return e2[r]}function Lh(r,t,e,a){var n=C7(r,t);return e&&(a==="center"&&(e=k7(e,n.getBoundingRect())),xT(n,e)),n}function vT(r,t,e){var a=new la({style:{image:r,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(n){if(e==="center"){var s={width:n.width,height:n.height};a.setStyle(k7(t,s))}}});return a}function k7(r,t){var e=t.width/t.height,a=r.height*e,n;a<=r.width?n=r.height:(a=r.width,n=a/e);var s=r.x+r.width/2,l=r.y+r.height/2;return{x:s-a/2,y:l-n/2,width:a,height:n}}var An=rJ;function xT(r,t){if(r.applyTransform){var e=r.getBoundingRect(),a=e.calculateTransform(t);r.applyTransform(a)}}function Ih(r,t){return Cb(r,r,{lineWidth:t}),r}function NJ(r,t){return u7(r,r,t),r}var Mx=Ln;function Ro(r,t){for(var e=Sm([]);r&&r!==t;)Is(e,r.getLocalTransform(),e),r=r.parent;return e}function Os(r,t,e){return t&&!Aa(t)&&(t=fl.getLocalTransform(t)),e&&(t=hs([],t)),xr([],r,t)}function Eb(r,t,e){var a=t[4]===0||t[5]===0||t[0]===0?1:fi(2*t[4]/t[0]),n=t[4]===0||t[5]===0||t[2]===0?1:fi(2*t[4]/t[2]),s=[r==="left"?-a:r==="right"?a:0,r==="top"?-n:r==="bottom"?n:0];return s=Os(s,t,e),fi(s[0])>fi(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function pL(r){return!r.isGroup}function jJ(r){return r.shape!=null}function Rm(r,t,e){if(!r||!t)return;function a(l){var o={};return l.traverse(function(c){pL(c)&&c.anid&&(o[c.anid]=c)}),o}function n(l){var o={x:l.x,y:l.y,rotation:l.rotation};return jJ(l)&&(o.shape=Oe(l.shape)),o}var s=a(r);t.traverse(function(l){if(pL(l)&&l.anid){var o=s[l.anid];if(o){var c=n(l);l.attr(n(o)),Nt(l,c,e,Xe(l).dataIndex)}}})}function yT(r,t){return pe(r,function(e){var a=e[0];a=Sr(a,t.x),a=In(a,t.x+t.width);var n=e[1];return n=Sr(n,t.y),n=In(n,t.y+t.height),[a,n]})}function O7(r,t){var e=Sr(r.x,t.x),a=In(r.x+r.width,t.x+t.width),n=Sr(r.y,t.y),s=In(r.y+r.height,t.y+t.height);if(a>=e&&s>=n)return{x:e,y:n,width:a-e,height:s-n}}function rf(r,t,e){var a=ie({rectHover:!0},t),n=a.style={strokeNoScale:!0};if(e=e||{x:-1,y:-1,width:2,height:2},r)return r.indexOf("image://")===0?(n.image=r.slice(8),Ge(n,e),new la(a)):Lh(r.replace("path://",""),a,e,"center")}function sg(r,t,e,a,n){for(var s=0,l=n[n.length-1];s<n.length;s++){var o=n[s];if(P7(r,t,e,a,o[0],o[1],l[0],l[1]))return!0;l=o}}function P7(r,t,e,a,n,s,l,o){var c=e-r,u=a-t,d=l-n,h=o-s,p=QN(d,h,c,u);if(wJ(p))return!1;var g=r-n,v=t-s,y=QN(g,v,c,u)/p;if(y<0||y>1)return!1;var x=QN(g,v,d,h)/p;return!(x<0||x>1)}function QN(r,t,e,a){return r*a-e*t}function wJ(r){return r<=1e-6&&r>=-1e-6}function Au(r,t,e,a,n){return t==null||(xt(t)?ir[0]=ir[1]=ir[2]=ir[3]=t:(ir[0]=t[0],ir[1]=t[1],ir[2]=t[2],ir[3]=t[3]),a&&(ir[0]=Sr(0,ir[0]),ir[1]=Sr(0,ir[1]),ir[2]=Sr(0,ir[2]),ir[3]=Sr(0,ir[3])),e&&(ir[0]=-ir[0],ir[1]=-ir[1],ir[2]=-ir[2],ir[3]=-ir[3]),gL(r,ir,"x","width",3,1,n&&n[0]||0),gL(r,ir,"y","height",0,2,n&&n[1]||0)),r}var ir=[0,0,0,0];function gL(r,t,e,a,n,s,l){var o=t[s]+t[n],c=r[a];r[a]+=o,l=Sr(0,In(l,c)),r[a]<l?(r[a]=l,r[e]+=t[n]>=0?-t[n]:t[s]>=0?c+t[s]:fi(o)>1e-8?(c-l)*t[n]/o:0):r[e]-=t[n]}function Ll(r){var t=r.itemTooltipOption,e=r.componentModel,a=r.itemName,n=je(t)?{formatter:t}:t,s=e.mainType,l=e.componentIndex,o={componentType:s,name:a,$vars:["name"]};o[s+"Index"]=l;var c=r.formatterParamsExtra;c&&B(gt(c),function(d){Te(o,d)||(o[d]=c[d],o.$vars.push(d))});var u=Xe(r.el);u.componentMainType=s,u.componentIndex=l,u.tooltipConfig={name:a,option:Ge({content:a,encodeHTMLContent:!0,formatterParams:o},n)}}function t2(r,t){var e;r.isGroup&&(e=t(r)),e||r.traverse(t)}function Wo(r,t){if(r)if(de(r))for(var e=0;e<r.length;e++)t2(r[e],t);else t2(r,t)}function bT(r){return!r||fi(r[1])<N0&&fi(r[2])<N0||fi(r[0])<N0&&fi(r[3])<N0}var N0=1e-5;function $g(r,t){return r?We.copy(r,t):t.clone()}function _T(r,t){return t?Cm(r||na(),t):void 0}function Eu(r){return{z:r.get("z")||0,zlevel:r.get("zlevel")||0}}function z7(r){var t=-1/0,e=1/0;t2(r,function(s){a(s),a(s.getTextContent()),a(s.getTextGuideLine())});function a(s){if(!(!s||s.isGroup)){var l=s.currentStates;if(l.length)for(var o=0;o<l.length;o++)n(s.states[l[o]]);n(s)}}function n(s){if(s){var l=s.z2;l>t&&(t=l),l<e&&(e=l)}}return e>t&&(e=t=0),{min:e,max:t}}function Db(r,t,e){B7(r,t,e,-1/0)}function B7(r,t,e,a){if(r.ignoreModelZ)return a;var n=r.getTextContent(),s=r.getTextGuideLine(),l=r.isGroup;if(l)for(var o=r.childrenRef(),c=0;c<o.length;c++)a=Sr(B7(o[c],t,e,a),a);else r.z=t,r.zlevel=e,a=Sr(r.z2||0,a);if(n&&(n.z=t,n.zlevel=e,isFinite(a)&&(n.z2=a+2)),s){var u=r.textGuideLineConfig;s.z=t,s.zlevel=e,isFinite(a)&&(s.z2=a+(u&&u.showAbove?1:-1))}return a}ms("circle",Ei);ms("ellipse",Em);ms("sector",Da);ms("ring",Jh);ms("polygon",Ma);ms("polyline",ma);ms("rect",it);ms("line",Tr);ms("bezierCurve",ef);ms("arc",Dm);const zu=Object.freeze(Object.defineProperty({__proto__:null,Arc:Dm,BezierCurve:ef,BoundingRect:We,Circle:Ei,CompoundPath:Mm,Ellipse:Em,Group:Pe,Image:la,IncrementalDisplayable:M7,Line:Tr,LinearGradient:Pu,OrientedBoundingRect:D7,Path:ht,Point:Ye,Polygon:Ma,Polyline:ma,RadialGradient:gT,Rect:it,Ring:Jh,Sector:Da,Text:vt,WH:zr,XY:Ke,applyTransform:Os,calcZ2Range:z7,clipPointsByRect:yT,clipRectByRect:O7,createIcon:rf,ensureCopyRect:$g,ensureCopyTransform:_T,expandOrShrinkRect:Au,extendPath:I7,extendShape:L7,getShapeClass:Wg,getTransform:Ro,groupTransition:Rm,initProps:Kt,isBoundingRectAxisAligned:bT,isElementRemoved:jh,lineLineIntersect:P7,linePolygonIntersect:sg,makeImage:vT,makePath:Lh,mergePath:An,registerShape:ms,removeElement:zo,removeElementWithFadeOut:xl,resizePath:xT,retrieveZInfo:Eu,setTooltipConfig:Ll,subPixelOptimize:Mx,subPixelOptimizeLine:Ih,subPixelOptimizeRect:NJ,transformDirection:Eb,traverseElements:Wo,traverseUpdateZ:Db,updateProps:Nt},Symbol.toStringTag,{value:"Module"}));var Mb={};function V7(r,t){for(var e=0;e<Za.length;e++){var a=Za[e],n=t[a],s=r.ensureState(a);s.style=s.style||{},s.style.text=n}var l=r.currentStates.slice();r.clearStates(!0),r.setStyle({text:t.normal}),r.useStates(l,!0)}function r2(r,t,e){var a=r.labelFetcher,n=r.labelDataIndex,s=r.labelDimIndex,l=t.normal,o;a&&(o=a.getFormattedLabel(n,"normal",null,s,l&&l.get("formatter"),e!=null?{interpolatedValue:e}:null)),o==null&&(o=Le(r.defaultText)?r.defaultText(n,r,e):r.defaultText);for(var c={normal:o},u=0;u<Za.length;u++){var d=Za[u],h=t[d];c[d]=Me(a?a.getFormattedLabel(n,d,null,s,h&&h.get("formatter")):null,o)}return c}function ia(r,t,e,a){e=e||Mb;for(var n=r instanceof vt,s=!1,l=0;l<Fg.length;l++){var o=t[Fg[l]];if(o&&o.getShallow("show")){s=!0;break}}var c=n?r:r.getTextContent();if(s){n||(c||(c=new vt,r.setTextContent(c)),r.stateProxy&&(c.stateProxy=r.stateProxy));var u=r2(e,t),d=t.normal,h=!!d.getShallow("show"),p=Gt(d,a&&a.normal,e,!1,!n);p.text=u.normal,n||r.setTextConfig(hy(d,e,!1));for(var l=0;l<Za.length;l++){var g=Za[l],o=t[g];if(o){var v=c.ensureState(g),y=!!Me(o.getShallow("show"),h);if(y!==h&&(v.ignore=!y),v.style=Gt(o,a&&a[g],e,!0,!n),v.style.text=u[g],!n){var x=r.ensureState(g);x.textConfig=hy(o,e,!0)}}}c.silent=!!d.getShallow("silent"),c.style.x!=null&&(p.x=c.style.x),c.style.y!=null&&(p.y=c.style.y),c.ignore=!h,c.useStyle(p),c.dirty(),e.enableTextSetter&&(af(c).setLabelText=function(b){var N=r2(e,t,b);V7(c,N)})}else c&&(c.ignore=!0);r.dirty()}function Zr(r,t){t=t||"label";for(var e={normal:r.getModel(t)},a=0;a<Za.length;a++){var n=Za[a];e[n]=r.getModel([n,t])}return e}function Gt(r,t,e,a,n){var s={};return SJ(s,r,e,a,n),t&&ie(s,t),s}function hy(r,t,e){t=t||{};var a={},n,s=r.getShallow("rotate"),l=Me(r.getShallow("distance"),e?null:5),o=r.getShallow("offset");return n=r.getShallow("position")||(e?null:"inside"),n==="outside"&&(n=t.defaultOutsidePosition||"top"),n!=null&&(a.position=n),o!=null&&(a.offset=o),s!=null&&(s*=Math.PI/180,a.rotation=s),l!=null&&(a.distance=l),a.outsideFill=r.get("color")==="inherit"?t.inheritColor||null:"auto",t.autoOverflowArea!=null&&(a.autoOverflowArea=t.autoOverflowArea),t.layoutRect!=null&&(a.layoutRect=t.layoutRect),a}function SJ(r,t,e,a,n){e=e||Mb;var s=t.ecModel,l=s&&s.option.textStyle,o=CJ(t),c;if(o){c={};var u="richInheritPlainLabel",d=Me(t.get(u),s?s.get(u):void 0);for(var h in o)if(o.hasOwnProperty(h)){var p=t.getModel(["rich",h]);yL(c[h]={},p,l,t,d,e,a,n,!1,!0)}}c&&(r.rich=c);var g=t.get("overflow");g&&(r.overflow=g);var v=t.get("lineOverflow");v&&(r.lineOverflow=v);var y=r,x=t.get("minMargin");if(x!=null)x=xt(x)?x/2:0,y.margin=[x,x,x,x],y.__marginType=ph.minMargin;else{var b=t.get("textMargin");b!=null&&(y.margin=jm(b),y.__marginType=ph.textMargin)}yL(r,t,l,null,null,e,a,n,!0,!1)}function CJ(r){for(var t;r&&r!==r.ecModel;){var e=(r.option||Mb).rich;if(e){t=t||{};for(var a=gt(e),n=0;n<a.length;n++){var s=a[n];t[s]=1}}r=r.parentModel}return t}var mL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],vL=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],xL=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function yL(r,t,e,a,n,s,l,o,c,u){e=!l&&e||Mb;var d=s&&s.inheritColor,h=t.getShallow("color"),p=t.getShallow("textBorderColor"),g=Me(t.getShallow("opacity"),e.opacity);(h==="inherit"||h==="auto")&&(d?h=d:h=null),(p==="inherit"||p==="auto")&&(d?p=d:p=null),o||(h=h||e.color,p=p||e.textBorderColor),h!=null&&(r.fill=h),p!=null&&(r.stroke=p);var v=Me(t.getShallow("textBorderWidth"),e.textBorderWidth);v!=null&&(r.lineWidth=v);var y=Me(t.getShallow("textBorderType"),e.textBorderType);y!=null&&(r.lineDash=y);var x=Me(t.getShallow("textBorderDashOffset"),e.textBorderDashOffset);x!=null&&(r.lineDashOffset=x),!l&&g==null&&!u&&(g=s&&s.defaultOpacity),g!=null&&(r.opacity=g),!l&&!o&&r.fill==null&&s.inheritColor&&(r.fill=s.inheritColor);for(var b=0;b<mL.length;b++){var N=mL[b],w=n!==!1&&a?fn(t.getShallow(N),a.getShallow(N),e[N]):Me(t.getShallow(N),e[N]);w!=null&&(r[N]=w)}for(var b=0;b<vL.length;b++){var N=vL[b],w=t.getShallow(N);w!=null&&(r[N]=w)}if(r.verticalAlign==null){var S=t.getShallow("baseline");S!=null&&(r.verticalAlign=S)}if(!c||!s.disableBox){for(var b=0;b<xL.length;b++){var N=xL[b],w=t.getShallow(N);w!=null&&(r[N]=w)}var T=t.getShallow("borderType");T!=null&&(r.borderDash=T),(r.backgroundColor==="auto"||r.backgroundColor==="inherit")&&d&&(r.backgroundColor=d),(r.borderColor==="auto"||r.borderColor==="inherit")&&d&&(r.borderColor=d)}}function NT(r,t){var e=t&&t.getModel("textStyle");return Dn([r.fontStyle||e&&e.getShallow("fontStyle")||"",r.fontWeight||e&&e.getShallow("fontWeight")||"",(r.fontSize||e&&e.getShallow("fontSize")||12)+"px",r.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}var af=ut();function H7(r,t,e,a){if(r){var n=af(r);n.prevValue=n.value,n.value=e;var s=t.normal;n.valueAnimation=s.get("valueAnimation"),n.valueAnimation&&(n.precision=s.get("precision"),n.defaultInterpolatedText=a,n.statesModels=t)}}function G7(r,t,e,a,n){var s=af(r);if(!s.valueAnimation||s.prevValue===s.value)return;var l=s.defaultInterpolatedText,o=Me(s.interpolatedValue,s.prevValue),c=s.value;function u(d){var h=e7(e,s.precision,o,c,d);s.interpolatedValue=d===1?null:h;var p=r2({labelDataIndex:t,labelFetcher:n,defaultText:l?l(h):h+""},s.statesModels,h);V7(r,p)}r.percent=0,(s.prevValue==null?Kt:Nt)(r,{percent:1},a,t,null,u)}var ph={minMargin:1,textMargin:2},TJ=["textStyle","color"],JN=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],ej=new vt,AJ=(function(){function r(){}return r.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(TJ):null)},r.prototype.getFont=function(){return NT({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},r.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},a=0;a<JN.length;a++)e[JN[a]]=this.getShallow(JN[a]);return ej.useStyle(e),ej.update(),ej.getBoundingRect()},r})(),U7=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],EJ=Cu(U7),DJ=(function(){function r(){}return r.prototype.getLineStyle=function(t){return EJ(this,t)},r})(),F7=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],MJ=Cu(F7),RJ=(function(){function r(){}return r.prototype.getItemStyle=function(t,e){return MJ(this,t,e)},r})(),dt=(function(){function r(t,e,a){this.parentModel=e,this.ecModel=a,this.option=t}return r.prototype.init=function(t,e,a){},r.prototype.mergeOption=function(t,e){rt(this.option,t,!0)},r.prototype.get=function(t,e){return t==null?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},r.prototype.getShallow=function(t,e){var a=this.option,n=a==null?a:a[t];if(n==null&&!e){var s=this.parentModel;s&&(n=s.getShallow(t))}return n},r.prototype.getModel=function(t,e){var a=t!=null,n=a?this.parsePath(t):null,s=a?this._doGet(n):this.option;return e=e||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new r(s,e,this.ecModel)},r.prototype.isEmpty=function(){return this.option==null},r.prototype.restoreData=function(){},r.prototype.clone=function(){var t=this.constructor;return new t(Oe(this.option))},r.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},r.prototype.resolveParentPath=function(t){return t},r.prototype.isAnimationEnabled=function(){if(!pt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},r.prototype._doGet=function(t,e){var a=this.option;if(!t)return a;for(var n=0;n<t.length&&!(t[n]&&(a=a&&typeof a=="object"?a[t[n]]:null,a==null));n++);return a==null&&e&&(a=e._doGet(this.resolveParentPath(t),e.parentModel)),a},r})();sT(dt);UK(dt);yr(dt,DJ);yr(dt,RJ);yr(dt,qK);yr(dt,AJ);var LJ=Math.round(Math.random()*10);function nf(r){return[r||"",LJ++].join("_")}function IJ(r){var t={};r.registerSubTypeDefaulter=function(e,a){var n=pi(e);t[n.main]=a},r.determineSubType=function(e,a){var n=a.type;if(!n){var s=pi(e).main;r.hasSubTypes(e)&&t[s]&&(n=t[s](a))}return n}}function kJ(r,t){r.topologicalTravel=function(s,l,o,c){if(!s.length)return;var u=e(l),d=u.graph,h=u.noEntryList,p={};for(B(s,function(N){p[N]=!0});h.length;){var g=h.pop(),v=d[g],y=!!p[g];y&&(o.call(c,g,v.originalDeps.slice()),delete p[g]),B(v.successor,y?b:x)}B(p,function(){var N="";throw new Error(N)});function x(N){d[N].entryCount--,d[N].entryCount===0&&h.push(N)}function b(N){p[N]=!0,x(N)}};function e(s){var l={},o=[];return B(s,function(c){var u=a(l,c),d=u.originalDeps=t(c),h=n(d,s);u.entryCount=h.length,u.entryCount===0&&o.push(c),B(h,function(p){tt(u.predecessor,p)<0&&u.predecessor.push(p);var g=a(l,p);tt(g.successor,p)<0&&g.successor.push(c)})}),{graph:l,noEntryList:o}}function a(s,l){return s[l]||(s[l]={predecessor:[],successor:[]}),s[l]}function n(s,l){var o=[];return B(s,function(c){tt(l,c)>=0&&o.push(c)}),o}}function $o(r,t){return rt(rt({},r,!0),t,!0)}const OJ={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},PJ={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var fy="ZH",jT="EN",wh=jT,Rx={},wT={},Y7=pt.domSupported?(function(){var r=(document.documentElement.lang||navigator.language||navigator.browserLanguage||wh).toUpperCase();return r.indexOf(fy)>-1?fy:wh})():wh;function ST(r,t){r=r.toUpperCase(),wT[r]=new dt(t),Rx[r]=t}function zJ(r){if(je(r)){var t=Rx[r.toUpperCase()]||{};return r===fy||r===jT?Oe(t):rt(Oe(t),Oe(Rx[wh]),!1)}else return rt(Oe(r),Oe(Rx[wh]),!1)}function a2(r){return wT[r]}function BJ(){return wT[wh]}ST(jT,OJ);ST(fy,PJ);var n2=null;function VJ(r){n2||(n2=r)}function Or(){return n2}var CT=1e3,TT=CT*60,Sg=TT*60,ns=Sg*24,bL=ns*365,HJ={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},Lx={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},GJ="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}",j0="{yyyy}-{MM}-{dd}",_L={year:"{yyyy}",month:"{yyyy}-{MM}",day:j0,hour:j0+" "+Lx.hour,minute:j0+" "+Lx.minute,second:j0+" "+Lx.second,millisecond:GJ},Sn=["year","month","day","hour","minute","second","millisecond"],UJ=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function FJ(r){return!je(r)&&!Le(r)?YJ(r):r}function YJ(r){r=r||{};var t={},e=!0;return B(Sn,function(a){e&&(e=r[a]==null)}),B(Sn,function(a,n){var s=r[a];t[a]={};for(var l=null,o=n;o>=0;o--){var c=Sn[o],u=Ue(s)&&!de(s)?s[c]:s,d=void 0;de(u)?(d=u.slice(),l=d[0]||""):je(u)?(l=u,d=[l]):(l==null?l=Lx[a]:HJ[c].test(l)||(l=t[c][c][0]+" "+l),d=[l],e&&(d[1]="{primary|"+l+"}")),t[a][c]=d}}),t}function Wa(r,t){return r+="","0000".substr(0,t-r.length)+r}function Cg(r){switch(r){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return r}}function WJ(r){return r===Cg(r)}function $J(r){switch(r){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Lm(r,t,e,a){var n=Ai(r),s=n[W7(e)](),l=n[AT(e)]()+1,o=Math.floor((l-1)/3)+1,c=n[ET(e)](),u=n["get"+(e?"UTC":"")+"Day"](),d=n[DT(e)](),h=(d-1)%12+1,p=n[MT(e)](),g=n[RT(e)](),v=n[LT(e)](),y=d>=12?"pm":"am",x=y.toUpperCase(),b=a instanceof dt?a:a2(a||Y7)||BJ(),N=b.getModel("time"),w=N.get("month"),S=N.get("monthAbbr"),T=N.get("dayOfWeek"),A=N.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,y+"").replace(/{A}/g,x+"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,Wa(s%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,w[l-1]).replace(/{MMM}/g,S[l-1]).replace(/{MM}/g,Wa(l,2)).replace(/{M}/g,l+"").replace(/{dd}/g,Wa(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,T[u]).replace(/{ee}/g,A[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Wa(d,2)).replace(/{H}/g,d+"").replace(/{hh}/g,Wa(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,Wa(p,2)).replace(/{m}/g,p+"").replace(/{ss}/g,Wa(g,2)).replace(/{s}/g,g+"").replace(/{SSS}/g,Wa(v,3)).replace(/{S}/g,v+"")}function qJ(r,t,e,a,n){var s=null;if(je(e))s=e;else if(Le(e)){var l={time:r.time,level:r.time.level},o=Or();o&&o.makeAxisLabelFormatterParamBreak(l,r.break),s=e(r.value,t,l)}else{var c=r.time;if(c){var u=e[c.lowerTimeUnit][c.upperTimeUnit];s=u[Math.min(c.level,u.length-1)]||""}else{var d=gh(r.value,n);s=e[d][d][0]}}return Lm(new Date(r.value),s,n,a)}function gh(r,t){var e=Ai(r),a=e[AT(t)]()+1,n=e[ET(t)](),s=e[DT(t)](),l=e[MT(t)](),o=e[RT(t)](),c=e[LT(t)](),u=c===0,d=u&&o===0,h=d&&l===0,p=h&&s===0,g=p&&n===1,v=g&&a===1;return v?"year":g?"month":p?"day":h?"hour":d?"minute":u?"second":"millisecond"}function py(r,t,e){switch(t){case"year":r[$7(e)](0);case"month":r[q7(e)](1);case"day":r[X7(e)](0);case"hour":r[Z7(e)](0);case"minute":r[K7(e)](0);case"second":r[Q7(e)](0)}return r}function W7(r){return r?"getUTCFullYear":"getFullYear"}function AT(r){return r?"getUTCMonth":"getMonth"}function ET(r){return r?"getUTCDate":"getDate"}function DT(r){return r?"getUTCHours":"getHours"}function MT(r){return r?"getUTCMinutes":"getMinutes"}function RT(r){return r?"getUTCSeconds":"getSeconds"}function LT(r){return r?"getUTCMilliseconds":"getMilliseconds"}function XJ(r){return r?"setUTCFullYear":"setFullYear"}function $7(r){return r?"setUTCMonth":"setMonth"}function q7(r){return r?"setUTCDate":"setDate"}function X7(r){return r?"setUTCHours":"setHours"}function Z7(r){return r?"setUTCMinutes":"setMinutes"}function K7(r){return r?"setUTCSeconds":"setSeconds"}function Q7(r){return r?"setUTCMilliseconds":"setMilliseconds"}function ZJ(r,t,e,a,n,s,l,o){var c=new vt({style:{text:r,font:t,align:e,verticalAlign:a,padding:n,rich:s,overflow:l?"truncate":null,lineHeight:o}});return c.getBoundingRect()}function IT(r){if(!rT(r))return je(r)?r:"-";var t=(r+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function kT(r,t){return r=(r||"").toLowerCase().replace(/-(.)/g,function(e,a){return a.toUpperCase()}),t&&r&&(r=r.charAt(0).toUpperCase()+r.slice(1)),r}var sf=jm;function s2(r,t,e){var a="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(d){return d&&Dn(d)?d:"-"}function s(d){return!!(d!=null&&!isNaN(d)&&isFinite(d))}var l=t==="time",o=r instanceof Date;if(l||o){var c=l?Ai(r):r;if(isNaN(+c)){if(o)return"-"}else return Lm(c,a,e)}if(t==="ordinal")return qx(r)?n(r):xt(r)&&s(r)?r+"":"-";var u=ji(r);return s(u)?IT(u):qx(r)?n(r):typeof r=="boolean"?r+"":"-"}var NL=["a","b","c","d","e","f","g"],tj=function(r,t){return"{"+r+(t??"")+"}"};function OT(r,t,e){de(t)||(t=[t]);var a=t.length;if(!a)return"";for(var n=t[0].$vars||[],s=0;s<n.length;s++){var l=NL[s];r=r.replace(tj(l),tj(l,0))}for(var o=0;o<a;o++)for(var c=0;c<n.length;c++){var u=t[o][n[c]];r=r.replace(tj(NL[c],o),e?Oa(u):u)}return r}function KJ(r,t,e){return B(t,function(a,n){r=r.replace("{"+n+"}",a)}),r}function J7(r,t){var e=je(r)?{color:r,extraCssText:t}:r||{},a=e.color,n=e.type;t=e.extraCssText;var s=e.renderMode||"html";if(!a)return"";if(s==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Oa(a)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Oa(a)+";"+(t||"")+'"></span>';var l=e.markerId||"markerX";return{renderMode:s,content:"{"+l+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:a}:{width:10,height:10,borderRadius:5,backgroundColor:a}}}function QJ(r,t,e){(r==="week"||r==="month"||r==="quarter"||r==="half-year"||r==="year")&&(r=`MM-dd
yyyy`);var a=Ai(t),n=e?"getUTC":"get",s=a[n+"FullYear"](),l=a[n+"Month"]()+1,o=a[n+"Date"](),c=a[n+"Hours"](),u=a[n+"Minutes"](),d=a[n+"Seconds"](),h=a[n+"Milliseconds"]();return r=r.replace("MM",Wa(l,2)).replace("M",l).replace("yyyy",s).replace("yy",Wa(s%100+"",2)).replace("dd",Wa(o,2)).replace("d",o).replace("hh",Wa(c,2)).replace("h",c).replace("mm",Wa(u,2)).replace("m",u).replace("ss",Wa(d,2)).replace("s",d).replace("SSS",Wa(h,3)),r}function JJ(r){return r&&r.charAt(0).toUpperCase()+r.substr(1)}function Du(r,t){return t=t||"transparent",je(r)?r:Ue(r)&&r.colorStops&&(r.colorStops[0]||{}).color||t}function gy(r,t){if(t==="_blank"||t==="blank"){var e=window.open();e.opener=null,e.location.href=r}else window.open(r,t)}var Ix={},rj={},lf=(function(){function r(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return r.prototype.create=function(t,e){this._nonSeriesBoxMasterList=a(Ix),this._normalMasterList=a(rj);function a(n,s){var l=[];return B(n,function(o,c){var u=o.create(t,e);l=l.concat(u||[])}),l}},r.prototype.update=function(t,e){B(this._normalMasterList,function(a){a.update&&a.update(t,e)})},r.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},r.register=function(t,e){if(t==="matrix"||t==="calendar"){Ix[t]=e;return}rj[t]=e},r.get=function(t){return rj[t]||Ix[t]},r})();function eee(r){return!!Ix[r]}var i2={coord:1,coord2:2};function tee(r){eB.set(r.fullType,{getCoord2:void 0}).getCoord2=r.getCoord2}var eB=De();function ree(r){var t=r.getShallow("coord",!0),e=i2.coord;if(t==null){var a=eB.get(r.type);a&&a.getCoord2&&(e=i2.coord2,t=a.getCoord2(r))}return{coord:t,from:e}}var di={none:0,dataCoordSys:1,boxCoordSys:2};function tB(r,t){var e=r.getShallow("coordinateSystem"),a=r.getShallow("coordinateSystemUsage",!0),n=di.none;if(e){var s=r.mainType==="series";a==null&&(a=s?"data":"box"),a==="data"?(n=di.dataCoordSys,s||(n=di.none)):a==="box"&&(n=di.boxCoordSys,!s&&!eee(e)&&(n=di.none))}return{coordSysType:e,kind:n}}function Im(r){var t=r.targetModel,e=r.coordSysType,a=r.coordSysProvider,n=r.isDefaultDataCoordSys;r.allowNotFound;var s=tB(t),l=s.kind,o=s.coordSysType;if(n&&l!==di.dataCoordSys&&(l=di.dataCoordSys,o=e),l===di.none||o!==e)return!1;var c=a(e,t);return c?(l===di.dataCoordSys?t.coordinateSystem=c:t.boxCoordinateSystem=c,!0):!1}var rB=function(r,t){var e=t.getReferringComponents(r,pr).models[0];return e&&e.coordinateSystem},kx=B,aB=["left","right","top","bottom","width","height"],au=[["width","left","right"],["height","top","bottom"]];function PT(r,t,e,a,n){var s=0,l=0;a==null&&(a=1/0),n==null&&(n=1/0);var o=0;t.eachChild(function(c,u){var d=c.getBoundingRect(),h=t.childAt(u+1),p=h&&h.getBoundingRect(),g,v;if(r==="horizontal"){var y=d.width+(p?-p.x+d.x:0);g=s+y,g>a||c.newline?(s=0,g=y,l+=o+e,o=d.height):o=Math.max(o,d.height)}else{var x=d.height+(p?-p.y+d.y:0);v=l+x,v>n||c.newline?(s+=o+e,l=0,v=x,o=d.width):o=Math.max(o,d.width)}c.newline||(c.x=s,c.y=l,c.markRedraw(),r==="horizontal"?s=g+e:l=v+e)})}var gu=PT;et(PT,"vertical");et(PT,"horizontal");function nB(r,t){return{left:r.getShallow("left",t),top:r.getShallow("top",t),right:r.getShallow("right",t),bottom:r.getShallow("bottom",t),width:r.getShallow("width",t),height:r.getShallow("height",t)}}function aee(r,t){var e=Kr(r,t,{enableLayoutOnlyByCenter:!0}),a=r.getBoxLayoutParams(),n,s;if(e.type===ig.point)s=e.refPoint,n=rr(a,{width:t.getWidth(),height:t.getHeight()});else{var l=r.get("center"),o=de(l)?l:[l,l];n=rr(a,e.refContainer),s=e.boxCoordFrom===i2.coord2?e.refPoint:[Ne(o[0],n.width)+n.x,Ne(o[1],n.height)+n.y]}return{viewRect:n,center:s}}function sB(r,t){var e=aee(r,t),a=e.viewRect,n=e.center,s=r.get("radius");de(s)||(s=[0,s]);var l=Ne(a.width,t.getWidth()),o=Ne(a.height,t.getHeight()),c=Math.min(l,o),u=Ne(s[0],c/2),d=Ne(s[1],c/2);return{cx:n[0],cy:n[1],r0:u,r:d,viewRect:a}}function rr(r,t,e){e=sf(e||0);var a=t.width,n=t.height,s=Ne(r.left,a),l=Ne(r.top,n),o=Ne(r.right,a),c=Ne(r.bottom,n),u=Ne(r.width,a),d=Ne(r.height,n),h=e[2]+e[0],p=e[1]+e[3],g=r.aspect;switch(isNaN(u)&&(u=a-o-p-s),isNaN(d)&&(d=n-c-h-l),g!=null&&(isNaN(u)&&isNaN(d)&&(g>a/n?u=a*.8:d=n*.8),isNaN(u)&&(u=g*d),isNaN(d)&&(d=u/g)),isNaN(s)&&(s=a-o-u-p),isNaN(l)&&(l=n-c-d-h),r.left||r.right){case"center":s=a/2-u/2-e[3];break;case"right":s=a-u-p;break}switch(r.top||r.bottom){case"middle":case"center":l=n/2-d/2-e[0];break;case"bottom":l=n-d-h;break}s=s||0,l=l||0,isNaN(u)&&(u=a-p-s-(o||0)),isNaN(d)&&(d=n-h-l-(c||0));var v=new We((t.x||0)+s+e[3],(t.y||0)+l+e[0],u,d);return v.margin=e,v}function iB(r,t,e){var a=r.getShallow("preserveAspect",!0);if(!a)return t;var n=t.width/t.height;if(Math.abs(Math.atan(e)-Math.atan(n))<1e-9)return t;var s=r.getShallow("preserveAspectAlign",!0),l=r.getShallow("preserveAspectVerticalAlign",!0),o={width:t.width,height:t.height},c=a==="cover";return n>e&&!c||n<e&&c?(o.width=t.height*e,s==="left"?o.left=0:s==="right"?o.right=0:o.left="center"):(o.height=t.width/e,l==="top"?o.top=0:l==="bottom"?o.bottom=0:o.top="middle"),rr(o,t)}var ig={rect:1,point:2};function Kr(r,t,e){var a,n,s,l=r.boxCoordinateSystem,o;if(l){var c=ree(r),u=c.coord,d=c.from;if(l.dataToLayout){s=ig.rect,o=d;var h=l.dataToLayout(u);a=h.contentRect||h.rect}else e&&e.enableLayoutOnlyByCenter&&l.dataToPoint&&(s=ig.point,o=d,n=l.dataToPoint(u))}return s==null&&(s=ig.rect),s===ig.rect&&(a||(a={x:0,y:0,width:t.getWidth(),height:t.getHeight()}),n=[a.x+a.width/2,a.y+a.height/2]),{type:s,refContainer:a,refPoint:n,boxCoordFrom:o}}function Rb(r,t,e,a,n,s){var l=!n||!n.hv||n.hv[0],o=!n||!n.hv||n.hv[1],c=n&&n.boundingMode||"all";if(s=s||r,s.x=r.x,s.y=r.y,!l&&!o)return!1;var u;if(c==="raw")u=r.type==="group"?new We(0,0,+t.width||0,+t.height||0):r.getBoundingRect();else if(u=r.getBoundingRect(),r.needLocalTransform()){var d=r.getLocalTransform();u=u.clone(),u.applyTransform(d)}var h=rr(Ge({width:u.width,height:u.height},t),e,a),p=l?h.x-u.x:0,g=o?h.y-u.y:0;return c==="raw"?(s.x=p,s.y=g):(s.x+=p,s.y+=g),s===r&&r.markRedraw(),!0}function nee(r,t){return r[au[t][0]]!=null||r[au[t][1]]!=null&&r[au[t][2]]!=null}function qg(r){var t=r.layoutMode||r.constructor.layoutMode;return Ue(t)?t:t?{type:t}:null}function Si(r,t,e){var a=e&&e.ignoreSize;!de(a)&&(a=[a,a]);var n=l(au[0],0),s=l(au[1],1);c(au[0],r,n),c(au[1],r,s);function l(u,d){var h={},p=0,g={},v=0,y=2;if(kx(u,function(N){g[N]=r[N]}),kx(u,function(N){Te(t,N)&&(h[N]=g[N]=t[N]),o(h,N)&&p++,o(g,N)&&v++}),a[d])return o(t,u[1])?g[u[2]]=null:o(t,u[2])&&(g[u[1]]=null),g;if(v===y||!p)return g;if(p>=y)return h;for(var x=0;x<u.length;x++){var b=u[x];if(!Te(h,b)&&Te(r,b)){h[b]=r[b];break}}return h}function o(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,h){kx(u,function(p){d[p]=h[p]})}}function Bu(r){return lB({},r)}function lB(r,t){return t&&r&&kx(aB,function(e){Te(t,e)&&(r[e]=t[e])}),r}var see=ut(),ct=(function(r){re(t,r);function t(e,a,n){var s=r.call(this,e,a,n)||this;return s.uid=nf("ec_cpt_model"),s}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n)},t.prototype.mergeDefaultAndTheme=function(e,a){var n=qg(this),s=n?Bu(e):{},l=a.getTheme();rt(e,l.get(this.mainType)),rt(e,this.getDefaultOption()),n&&Si(e,s,n)},t.prototype.mergeOption=function(e,a){rt(this.option,e,!0);var n=qg(this);n&&Si(this.option,e,n)},t.prototype.optionUpdated=function(e,a){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!VK(e))return e.defaultOption;var a=see(this);if(!a.defaultOption){for(var n=[],s=e;s;){var l=s.prototype.defaultOption;l&&n.push(l),s=s.superClass}for(var o={},c=n.length-1;c>=0;c--)o=rt(o,n[c],!0);a.defaultOption=o}return a.defaultOption},t.prototype.getReferringComponents=function(e,a){var n=e+"Index",s=e+"Id";return Kh(this.ecModel,e,{index:this.get(n,!0),id:this.get(s,!0)},a)},t.prototype.getBoxLayoutParams=function(){return nB(this,!1)},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=(function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0})(),t})(dt);r7(ct,dt);_b(ct);IJ(ct);kJ(ct,iee);function iee(r){var t=[];return B(ct.getClassesByMainType(r),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=pe(t,function(e){return pi(e).main}),r!=="dataset"&&tt(t,"dataset")<=0&&t.unshift("dataset"),t}var ee={color:{},darkColor:{},size:{}},Nr=ee.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};ie(Nr,{primary:Nr.neutral80,secondary:Nr.neutral70,tertiary:Nr.neutral60,quaternary:Nr.neutral50,disabled:Nr.neutral20,border:Nr.neutral30,borderTint:Nr.neutral20,borderShade:Nr.neutral40,background:Nr.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:Nr.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:Nr.neutral70,axisLineTint:Nr.neutral40,axisTick:Nr.neutral70,axisTickMinor:Nr.neutral60,axisLabel:Nr.neutral70,axisSplitLine:Nr.neutral15,axisMinorSplitLine:Nr.neutral05});for(var Rc in Nr)if(Nr.hasOwnProperty(Rc)){var jL=Nr[Rc];Rc==="theme"?ee.darkColor.theme=Nr.theme.slice():Rc==="highlight"?ee.darkColor.highlight="rgba(255,231,130,0.4)":Rc.indexOf("accent")===0?ee.darkColor[Rc]=vl(jL,null,function(r){return r*.5},function(r){return Math.min(1,1.3-r)}):ee.darkColor[Rc]=vl(jL,null,function(r){return r*.9},function(r){return 1-Math.pow(r,1.5)})}ee.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var oB="";typeof navigator<"u"&&(oB=navigator.platform||"");var Vd="rgba(0, 0, 0, 0.2)",cB=ee.color.theme[0],lee=vl(cB,null,null,.9);const oee={darkMode:"auto",colorBy:"series",color:ee.color.theme,gradientColor:[lee,cB],aria:{decal:{decals:[{color:Vd,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Vd,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Vd,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Vd,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Vd,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Vd,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:oB.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var uB=De(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),kn="original",va="arrayRows",On="objectRows",Fs="keyedColumns",Lo="typedArray",dB="unknown",Ps="column",Vu="row",wa={Must:1,Might:2,Not:3},hB=ut();function cee(r){hB(r).datasetMap=De()}function fB(r,t,e){var a={},n=BT(t);if(!n||!r)return a;var s=[],l=[],o=t.ecModel,c=hB(o).datasetMap,u=n.uid+"_"+e.seriesLayoutBy,d,h;r=r.slice(),B(r,function(y,x){var b=Ue(y)?y:r[x]={name:y};b.type==="ordinal"&&d==null&&(d=x,h=v(b)),a[b.name]=[]});var p=c.get(u)||c.set(u,{categoryWayDim:h,valueWayDim:0});B(r,function(y,x){var b=y.name,N=v(y);if(d==null){var w=p.valueWayDim;g(a[b],w,N),g(l,w,N),p.valueWayDim+=N}else if(d===x)g(a[b],0,N),g(s,0,N);else{var w=p.categoryWayDim;g(a[b],w,N),g(l,w,N),p.categoryWayDim+=N}});function g(y,x,b){for(var N=0;N<b;N++)y.push(x+N)}function v(y){var x=y.dimsDef;return x?x.length:1}return s.length&&(a.itemName=s),l.length&&(a.seriesName=l),a}function zT(r,t,e){var a={},n=BT(r);if(!n)return a;var s=t.sourceFormat,l=t.dimensionsDefine,o;(s===On||s===Fs)&&B(l,function(d,h){(Ue(d)?d.name:d)==="name"&&(o=h)});var c=(function(){for(var d={},h={},p=[],g=0,v=Math.min(5,e);g<v;g++){var y=gB(t.data,s,t.seriesLayoutBy,l,t.startIndex,g);p.push(y);var x=y===wa.Not;if(x&&d.v==null&&g!==o&&(d.v=g),(d.n==null||d.n===d.v||!x&&p[d.n]===wa.Not)&&(d.n=g),b(d)&&p[d.n]!==wa.Not)return d;x||(y===wa.Might&&h.v==null&&g!==o&&(h.v=g),(h.n==null||h.n===h.v)&&(h.n=g))}function b(N){return N.v!=null&&N.n!=null}return b(d)?d:b(h)?h:null})();if(c){a.value=[c.v];var u=o??c.n;a.itemName=[u],a.seriesName=[u]}return a}function BT(r){var t=r.get("data",!0);if(!t)return Kh(r.ecModel,"dataset",{index:r.get("datasetIndex",!0),id:r.get("datasetId",!0)},pr).models[0]}function uee(r){return!r.get("transform",!0)&&!r.get("fromTransformResult",!0)?[]:Kh(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},pr).models}function pB(r,t){return gB(r.data,r.sourceFormat,r.seriesLayoutBy,r.dimensionsDefine,r.startIndex,t)}function gB(r,t,e,a,n,s){var l,o=5;if(Xa(r))return wa.Not;var c,u;if(a){var d=a[s];Ue(d)?(c=d.name,u=d.type):je(d)&&(c=d)}if(u!=null)return u==="ordinal"?wa.Must:wa.Not;if(t===va){var h=r;if(e===Vu){for(var p=h[s],g=0;g<(p||[]).length&&g<o;g++)if((l=S(p[n+g]))!=null)return l}else for(var g=0;g<h.length&&g<o;g++){var v=h[n+g];if(v&&(l=S(v[s]))!=null)return l}}else if(t===On){var y=r;if(!c)return wa.Not;for(var g=0;g<y.length&&g<o;g++){var x=y[g];if(x&&(l=S(x[c]))!=null)return l}}else if(t===Fs){var b=r;if(!c)return wa.Not;var p=b[c];if(!p||Xa(p))return wa.Not;for(var g=0;g<p.length&&g<o;g++)if((l=S(p[g]))!=null)return l}else if(t===kn)for(var N=r,g=0;g<N.length&&g<o;g++){var x=N[g],w=Zh(x);if(!de(w))return wa.Not;if((l=S(w[s]))!=null)return l}function S(T){var A=je(T);if(T!=null&&Number.isFinite(Number(T))&&T!=="")return A?wa.Might:wa.Not;if(A&&T!=="-")return wa.Must}return wa.Not}var l2=De();function dee(r,t){Ea(l2.get(r)==null&&t),l2.set(r,t)}function hee(r,t,e){var a=l2.get(t);if(!a)return e;var n=a(r);return n?e.concat(n):e}var wL=ut(),fee=ut(),VT=(function(){function r(){}return r.prototype.getColorFromPalette=function(t,e,a){var n=Ft(this.get("color",!0)),s=this.get("colorLayer",!0);return mB(this,wL,n,s,t,e,a)},r.prototype.clearColorPalette=function(){gee(this,wL)},r})();function o2(r,t,e,a){var n=Ft(r.get(["aria","decal","decals"]));return mB(r,fee,n,null,t,e,a)}function pee(r,t){for(var e=r.length,a=0;a<e;a++)if(r[a].length>t)return r[a];return r[e-1]}function mB(r,t,e,a,n,s,l){s=s||r;var o=t(s),c=o.paletteIdx||0,u=o.paletteNameMap=o.paletteNameMap||{};if(u.hasOwnProperty(n))return u[n];var d=l==null||!a?e:pee(a,l);if(d=d||e,!(!d||!d.length)){var h=d[c];return n&&(u[n]=h),o.paletteIdx=(c+1)%d.length,h}}function gee(r,t){t(r).paletteIdx=0,t(r).paletteNameMap={}}var w0,Cp,SL,CL="\0_ec_inner",mee=1,HT=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e,a,n,s,l,o){s=s||{},this.option=null,this._theme=new dt(s),this._locale=new dt(l),this._optionManager=o},t.prototype.setOption=function(e,a,n){var s=EL(a);this._optionManager.setOption(e,n,s),this._resetOption(null,s)},t.prototype.resetOption=function(e,a){return this._resetOption(e,EL(a))},t.prototype._resetOption=function(e,a){var n=!1,s=this._optionManager;if(!e||e==="recreate"){var l=s.mountOption(e==="recreate");!this.option||e==="recreate"?SL(this,l):(this.restoreData(),this._mergeOption(l,a)),n=!0}if((e==="timeline"||e==="media")&&this.restoreData(),!e||e==="recreate"||e==="timeline"){var o=s.getTimelineOption(this);o&&(n=!0,this._mergeOption(o,a))}if(!e||e==="recreate"||e==="media"){var c=s.getMediaOption(this);c.length&&B(c,function(u){n=!0,this._mergeOption(u,a)},this)}return n},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,a){var n=this.option,s=this._componentsMap,l=this._componentsCount,o=[],c=De(),u=a&&a.replaceMergeMainTypeMap;cee(this),B(e,function(h,p){h!=null&&(ct.hasClass(p)?p&&(o.push(p),c.set(p,!0)):n[p]=n[p]==null?Oe(h):rt(n[p],h,!0))}),u&&u.each(function(h,p){ct.hasClass(p)&&!c.get(p)&&(o.push(p),c.set(p,!0))}),ct.topologicalTravel(o,ct.getAllClassMainTypes(),d,this);function d(h){var p=hee(this,h,Ft(e[h])),g=s.get(h),v=g?u&&u.get(h)?"replaceMerge":"normalMerge":"replaceAll",y=Kz(g,p,v);MK(y,h,ct),n[h]=null,s.set(h,null),l.set(h,0);var x=[],b=[],N=0,w;B(y,function(S,T){var A=S.existing,C=S.newOption;if(!C)A&&(A.mergeOption({},this),A.optionUpdated({},!1));else{var M=h==="series",R=ct.getClass(h,S.keyInfo.subType,!M);if(!R)return;if(h==="tooltip"){if(w)return;w=!0}if(A&&A.constructor===R)A.name=S.keyInfo.name,A.mergeOption(C,this),A.optionUpdated(C,!1);else{var k=ie({componentIndex:T},S.keyInfo);A=new R(C,this,this,k),ie(A,k),S.brandNew&&(A.__requireNewView=!0),A.init(C,this,this),A.optionUpdated(null,!0)}}A?(x.push(A.option),b.push(A),N++):(x.push(void 0),b.push(void 0))},this),n[h]=x,s.set(h,b),l.set(h,N),h==="series"&&w0(this)}this._seriesIndices||w0(this)},t.prototype.getOption=function(){var e=Oe(this.option);return B(e,function(a,n){if(ct.hasClass(n)){for(var s=Ft(a),l=s.length,o=!1,c=l-1;c>=0;c--)s[c]&&!Ug(s[c])?o=!0:(s[c]=null,!o&&l--);s.length=l,e[n]=s}}),delete e[CL],e},t.prototype.setTheme=function(e){this._theme=new dt(e),this._resetOption("recreate",null)},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,a){var n=this._componentsMap.get(e);if(n){var s=n[a||0];if(s)return s;if(a==null){for(var l=0;l<n.length;l++)if(n[l])return n[l]}}},t.prototype.queryComponents=function(e){var a=e.mainType;if(!a)return[];var n=e.index,s=e.id,l=e.name,o=this._componentsMap.get(a);if(!o||!o.length)return[];var c;return n!=null?(c=[],B(Ft(n),function(u){o[u]&&c.push(o[u])})):s!=null?c=TL("id",s,o):l!=null?c=TL("name",l,o):c=Ct(o,function(u){return!!u}),AL(c,e)},t.prototype.findComponents=function(e){var a=e.query,n=e.mainType,s=o(a),l=s?this.queryComponents(s):Ct(this._componentsMap.get(n),function(u){return!!u});return c(AL(l,e));function o(u){var d=n+"Index",h=n+"Id",p=n+"Name";return u&&(u[d]!=null||u[h]!=null||u[p]!=null)?{mainType:n,index:u[d],id:u[h],name:u[p]}:null}function c(u){return e.filter?Ct(u,e.filter):u}},t.prototype.eachComponent=function(e,a,n){var s=this._componentsMap;if(Le(e)){var l=a,o=e;s.each(function(h,p){for(var g=0;h&&g<h.length;g++){var v=h[g];v&&o.call(l,p,v,v.componentIndex)}})}else for(var c=je(e)?s.get(e):Ue(e)?this.findComponents(e):null,u=0;c&&u<c.length;u++){var d=c[u];d&&a.call(n,d,d.componentIndex)}},t.prototype.getSeriesByName=function(e){var a=$r(e,null);return Ct(this._componentsMap.get("series"),function(n){return!!n&&a!=null&&n.name===a})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return Ct(this._componentsMap.get("series"),function(a){return!!a&&a.subType===e})},t.prototype.getSeries=function(){return Ct(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,a){Cp(this),B(this._seriesIndices,function(n){var s=this._componentsMap.get("series")[n];e.call(a,s,n)},this)},t.prototype.eachRawSeries=function(e,a){B(this._componentsMap.get("series"),function(n){n&&e.call(a,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(e,a,n){Cp(this),B(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];l.subType===e&&a.call(n,l,s)},this)},t.prototype.eachRawSeriesByType=function(e,a,n){return B(this.getSeriesByType(e),a,n)},t.prototype.isSeriesFiltered=function(e){return Cp(this),this._seriesIndicesMap.get(e.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,a){Cp(this);var n=[];B(this._seriesIndices,function(s){var l=this._componentsMap.get("series")[s];e.call(a,l,s)&&n.push(s)},this),this._seriesIndices=n,this._seriesIndicesMap=De(n)},t.prototype.restoreData=function(e){w0(this);var a=this._componentsMap,n=[];a.each(function(s,l){ct.hasClass(l)&&n.push(l)}),ct.topologicalTravel(n,ct.getAllClassMainTypes(),function(s){B(a.get(s),function(l){l&&(s!=="series"||!vee(l,e))&&l.restoreData()})})},t.internalField=(function(){w0=function(e){var a=e._seriesIndices=[];B(e._componentsMap.get("series"),function(n){n&&a.push(n.componentIndex)}),e._seriesIndicesMap=De(a)},Cp=function(e){},SL=function(e,a){e.option={},e.option[CL]=mee,e._componentsMap=De({series:[]}),e._componentsCount=De();var n=a.aria;Ue(n)&&n.enabled==null&&(n.enabled=!0),xee(a,e._theme.option),rt(a,oee,!1),e._mergeOption(a,null)}})(),t})(dt);function vee(r,t){if(t){var e=t.seriesIndex,a=t.seriesId,n=t.seriesName;return e!=null&&r.componentIndex!==e||a!=null&&r.id!==a||n!=null&&r.name!==n}}function xee(r,t){var e=r.color&&!r.colorLayer;B(t,function(a,n){n==="colorLayer"&&e||n==="color"&&r.color||ct.hasClass(n)||(typeof a=="object"?r[n]=r[n]?rt(r[n],a,!1):Oe(a):r[n]==null&&(r[n]=a))})}function TL(r,t,e){if(de(t)){var a=De();return B(t,function(s){if(s!=null){var l=$r(s,null);l!=null&&a.set(s,!0)}}),Ct(e,function(s){return s&&a.get(s[r])})}else{var n=$r(t,null);return Ct(e,function(s){return s&&n!=null&&s[r]===n})}}function AL(r,t){return t.hasOwnProperty("subType")?Ct(r,function(e){return e&&e.subType===t.subType}):r}function EL(r){var t=De();return r&&B(Ft(r.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}yr(HT,VT);var yee=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],vB=(function(){function r(t){B(yee,function(e){this[e]=we(t[e],t)},this)}return r})(),bee=/^(min|max)?(.+)$/,_ee=(function(){function r(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return r.prototype.setOption=function(t,e,a){t&&(B(Ft(t.series),function(l){l&&l.data&&Xa(l.data)&&Og(l.data)}),B(Ft(t.dataset),function(l){l&&l.source&&Xa(l.source)&&Og(l.source)})),t=Oe(t);var n=this._optionBackup,s=Nee(t,e,!n);this._newBaseOption=s.baseOption,n?(s.timelineOptions.length&&(n.timelineOptions=s.timelineOptions),s.mediaList.length&&(n.mediaList=s.mediaList),s.mediaDefault&&(n.mediaDefault=s.mediaDefault)):this._optionBackup=s},r.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],Oe(t?e.baseOption:this._newBaseOption)},r.prototype.getTimelineOption=function(t){var e,a=this._timelineOptions;if(a.length){var n=t.getComponent("timeline");n&&(e=Oe(a[n.getCurrentIndex()]))}return e},r.prototype.getMediaOption=function(t){var e=this._api.getWidth(),a=this._api.getHeight(),n=this._mediaList,s=this._mediaDefault,l=[],o=[];if(!n.length&&!s)return o;for(var c=0,u=n.length;c<u;c++)jee(n[c].query,e,a)&&l.push(c);return!l.length&&s&&(l=[-1]),l.length&&!See(l,this._currentMediaIndices)&&(o=pe(l,function(d){return Oe(d===-1?s.option:n[d].option)})),this._currentMediaIndices=l,o},r})();function Nee(r,t,e){var a=[],n,s,l=r.baseOption,o=r.timeline,c=r.options,u=r.media,d=!!r.media,h=!!(c||o||l&&l.timeline);l?(s=l,s.timeline||(s.timeline=o)):((h||d)&&(r.options=r.media=null),s=r),d&&de(u)&&B(u,function(g){g&&g.option&&(g.query?a.push(g):n||(n=g))}),p(s),B(c,function(g){return p(g)}),B(a,function(g){return p(g.option)});function p(g){B(t,function(v){v(g,e)})}return{baseOption:s,timelineOptions:c||[],mediaDefault:n,mediaList:a}}function jee(r,t,e){var a={width:t,height:e,aspectratio:t/e},n=!0;return B(r,function(s,l){var o=l.match(bee);if(!(!o||!o[1]||!o[2])){var c=o[1],u=o[2].toLowerCase();wee(a[u],s,c)||(n=!1)}}),n}function wee(r,t,e){return e==="min"?r>=t:e==="max"?r<=t:r===t}function See(r,t){return r.join(",")===t.join(",")}var js=B,Xg=Ue,DL=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function aj(r){var t=r&&r.itemStyle;if(t)for(var e=0,a=DL.length;e<a;e++){var n=DL[e],s=t.normal,l=t.emphasis;s&&s[n]&&(r[n]=r[n]||{},r[n].normal?rt(r[n].normal,s[n]):r[n].normal=s[n],s[n]=null),l&&l[n]&&(r[n]=r[n]||{},r[n].emphasis?rt(r[n].emphasis,l[n]):r[n].emphasis=l[n],l[n]=null)}}function ka(r,t,e){if(r&&r[t]&&(r[t].normal||r[t].emphasis)){var a=r[t].normal,n=r[t].emphasis;a&&(e?(r[t].normal=r[t].emphasis=null,Ge(r[t],a)):r[t]=a),n&&(r.emphasis=r.emphasis||{},r.emphasis[t]=n,n.focus&&(r.emphasis.focus=n.focus),n.blurScope&&(r.emphasis.blurScope=n.blurScope))}}function lg(r){ka(r,"itemStyle"),ka(r,"lineStyle"),ka(r,"areaStyle"),ka(r,"label"),ka(r,"labelLine"),ka(r,"upperLabel"),ka(r,"edgeLabel")}function Lr(r,t){var e=Xg(r)&&r[t],a=Xg(e)&&e.textStyle;if(a)for(var n=0,s=LR.length;n<s;n++){var l=LR[n];a.hasOwnProperty(l)&&(e[l]=a[l])}}function Jn(r){r&&(lg(r),Lr(r,"label"),r.emphasis&&Lr(r.emphasis,"label"))}function Cee(r){if(Xg(r)){aj(r),lg(r),Lr(r,"label"),Lr(r,"upperLabel"),Lr(r,"edgeLabel"),r.emphasis&&(Lr(r.emphasis,"label"),Lr(r.emphasis,"upperLabel"),Lr(r.emphasis,"edgeLabel"));var t=r.markPoint;t&&(aj(t),Jn(t));var e=r.markLine;e&&(aj(e),Jn(e));var a=r.markArea;a&&Jn(a);var n=r.data;if(r.type==="graph"){n=n||r.nodes;var s=r.links||r.edges;if(s&&!Xa(s))for(var l=0;l<s.length;l++)Jn(s[l]);B(r.categories,function(u){lg(u)})}if(n&&!Xa(n))for(var l=0;l<n.length;l++)Jn(n[l]);if(t=r.markPoint,t&&t.data)for(var o=t.data,l=0;l<o.length;l++)Jn(o[l]);if(e=r.markLine,e&&e.data)for(var c=e.data,l=0;l<c.length;l++)de(c[l])?(Jn(c[l][0]),Jn(c[l][1])):Jn(c[l]);r.type==="gauge"?(Lr(r,"axisLabel"),Lr(r,"title"),Lr(r,"detail")):r.type==="treemap"?(ka(r.breadcrumb,"itemStyle"),B(r.levels,function(u){lg(u)})):r.type==="tree"&&lg(r.leaves)}}function Qi(r){return de(r)?r:r?[r]:[]}function ML(r){return(de(r)?r[0]:r)||{}}function Tee(r,t){js(Qi(r.series),function(a){Xg(a)&&Cee(a)});var e=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&e.push("valueAxis","categoryAxis","logAxis","timeAxis"),js(e,function(a){js(Qi(r[a]),function(n){n&&(Lr(n,"axisLabel"),Lr(n.axisPointer,"label"))})}),js(Qi(r.parallel),function(a){var n=a&&a.parallelAxisDefault;Lr(n,"axisLabel"),Lr(n&&n.axisPointer,"label")}),js(Qi(r.calendar),function(a){ka(a,"itemStyle"),Lr(a,"dayLabel"),Lr(a,"monthLabel"),Lr(a,"yearLabel")}),js(Qi(r.radar),function(a){Lr(a,"name"),a.name&&a.axisName==null&&(a.axisName=a.name,delete a.name),a.nameGap!=null&&a.axisNameGap==null&&(a.axisNameGap=a.nameGap,delete a.nameGap)}),js(Qi(r.geo),function(a){Xg(a)&&(Jn(a),js(Qi(a.regions),function(n){Jn(n)}))}),js(Qi(r.timeline),function(a){Jn(a),ka(a,"label"),ka(a,"itemStyle"),ka(a,"controlStyle",!0);var n=a.data;de(n)&&B(n,function(s){Ue(s)&&(ka(s,"label"),ka(s,"itemStyle"))})}),js(Qi(r.toolbox),function(a){ka(a,"iconStyle"),js(a.feature,function(n){ka(n,"iconStyle")})}),Lr(ML(r.axisPointer),"label"),Lr(ML(r.tooltip).axisPointer,"label")}function Aee(r,t){for(var e=t.split(","),a=r,n=0;n<e.length&&(a=a&&a[e[n]],a!=null);n++);return a}function Eee(r,t,e,a){for(var n=t.split(","),s=r,l,o=0;o<n.length-1;o++)l=n[o],s[l]==null&&(s[l]={}),s=s[l];s[n[o]]==null&&(s[n[o]]=e)}function RL(r){r&&B(Dee,function(t){t[0]in r&&!(t[1]in r)&&(r[t[1]]=r[t[0]])})}var Dee=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Mee=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],nj=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Tp(r){var t=r&&r.itemStyle;if(t)for(var e=0;e<nj.length;e++){var a=nj[e][1],n=nj[e][0];t[a]!=null&&(t[n]=t[a])}}function LL(r){r&&r.alignTo==="edge"&&r.margin!=null&&r.edgeDistance==null&&(r.edgeDistance=r.margin)}function IL(r){r&&r.downplay&&!r.blur&&(r.blur=r.downplay)}function Ree(r){r&&r.focusNodeAdjacency!=null&&(r.emphasis=r.emphasis||{},r.emphasis.focus==null&&(r.emphasis.focus="adjacency"))}function xB(r,t){if(r)for(var e=0;e<r.length;e++)t(r[e]),r[e]&&xB(r[e].children,t)}function yB(r,t){Tee(r,t),r.series=Ft(r.series),B(r.series,function(e){if(Ue(e)){var a=e.type;if(a==="line")e.clipOverflow!=null&&(e.clip=e.clipOverflow);else if(a==="pie"||a==="gauge"){e.clockWise!=null&&(e.clockwise=e.clockWise),LL(e.label);var n=e.data;if(n&&!Xa(n))for(var s=0;s<n.length;s++)LL(n[s]);e.hoverOffset!=null&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if(a==="gauge"){var l=Aee(e,"pointer.color");l!=null&&Eee(e,"itemStyle.color",l)}else if(a==="bar"){Tp(e),Tp(e.backgroundStyle),Tp(e.emphasis);var n=e.data;if(n&&!Xa(n))for(var s=0;s<n.length;s++)typeof n[s]=="object"&&(Tp(n[s]),Tp(n[s]&&n[s].emphasis))}else if(a==="sunburst"){var o=e.highlightPolicy;o&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=o)),IL(e),xB(e.data,IL)}else a==="graph"||a==="sankey"?Ree(e):a==="map"&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&Ge(e,e.mapLocation));e.hoverAnimation!=null&&(e.emphasis=e.emphasis||{},e.emphasis&&e.emphasis.scale==null&&(e.emphasis.scale=e.hoverAnimation)),RL(e)}}),r.dataRange&&(r.visualMap=r.dataRange),B(Mee,function(e){var a=r[e];a&&(de(a)||(a=[a]),B(a,function(n){RL(n)}))})}function Lee(r){var t=De();r.eachSeries(function(e){var a=e.get("stack");if(a){var n=t.get(a)||t.set(a,[]),s=e.getData(),l={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:e};if(!l.stackedDimension||!(l.isStackedByIndex||l.stackedByDimension))return;n.push(l)}}),t.each(function(e){if(e.length!==0){var a=e[0].seriesModel,n=a.get("stackOrder")||"seriesAsc";n==="seriesDesc"&&e.reverse(),B(e,function(s,l){s.data.setCalculationInfo("stackedOnSeries",l>0?e[l-1].seriesModel:null)}),Iee(e)}})}function Iee(r){B(r,function(t,e){var a=[],n=[NaN,NaN],s=[t.stackResultDimension,t.stackedOverDimension],l=t.data,o=t.isStackedByIndex,c=t.seriesModel.get("stackStrategy")||"samesign";l.modify(s,function(u,d,h){var p=l.get(t.stackedDimension,h);if(isNaN(p))return n;var g,v;o?v=l.getRawIndex(h):g=l.get(t.stackedByDimension,h);for(var y=NaN,x=e-1;x>=0;x--){var b=r[x];if(o||(v=b.data.rawIndexOf(b.stackedByDimension,g)),v>=0){var N=b.data.getByRawIndex(b.stackResultDimension,v);if(c==="all"||c==="positive"&&N>0||c==="negative"&&N<0||c==="samesign"&&p>=0&&N>0||c==="samesign"&&p<=0&&N<0){p=xK(p,N),y=N;break}}}return a[0]=p,a[1]=y,a})})}var Lb=(function(){function r(t){this.data=t.data||(t.sourceFormat===Fs?{}:[]),this.sourceFormat=t.sourceFormat||dB,this.seriesLayoutBy=t.seriesLayoutBy||Ps,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var a=0;a<e.length;a++){var n=e[a];n.type==null&&pB(this,a)===wa.Must&&(n.type="ordinal")}}return r})();function GT(r){return r instanceof Lb}function c2(r,t,e){e=e||bB(r);var a=t.seriesLayoutBy,n=Oee(r,e,a,t.sourceHeader,t.dimensions),s=new Lb({data:r,sourceFormat:e,seriesLayoutBy:a,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:Oe(t)});return s}function UT(r){return new Lb({data:r,sourceFormat:Xa(r)?Lo:kn})}function kee(r){return new Lb({data:r.data,sourceFormat:r.sourceFormat,seriesLayoutBy:r.seriesLayoutBy,dimensionsDefine:Oe(r.dimensionsDefine),startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount})}function bB(r){var t=dB;if(Xa(r))t=Lo;else if(de(r)){r.length===0&&(t=va);for(var e=0,a=r.length;e<a;e++){var n=r[e];if(n!=null){if(de(n)||Xa(n)){t=va;break}else if(Ue(n)){t=On;break}}}}else if(Ue(r)){for(var s in r)if(Te(r,s)&&Aa(r[s])){t=Fs;break}}return t}function Oee(r,t,e,a,n){var s,l;if(!r)return{dimensionsDefine:kL(n),startIndex:l,dimensionsDetectedCount:s};if(t===va){var o=r;a==="auto"||a==null?OL(function(u){u!=null&&u!=="-"&&(je(u)?l==null&&(l=1):l=0)},e,o,10):l=xt(a)?a:a?1:0,!n&&l===1&&(n=[],OL(function(u,d){n[d]=u!=null?u+"":""},e,o,1/0)),s=n?n.length:e===Vu?o.length:o[0]?o[0].length:null}else if(t===On)n||(n=Pee(r));else if(t===Fs)n||(n=[],B(r,function(u,d){n.push(d)}));else if(t===kn){var c=Zh(r[0]);s=de(c)&&c.length||1}return{startIndex:l,dimensionsDefine:kL(n),dimensionsDetectedCount:s}}function Pee(r){for(var t=0,e;t<r.length&&!(e=r[t++]););if(e)return gt(e)}function kL(r){if(r){var t=De();return pe(r,function(e,a){e=Ue(e)?e:{name:e};var n={name:e.name,displayName:e.displayName,type:e.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var s=t.get(n.name);return s?n.name+="-"+s.count++:t.set(n.name,{count:1}),n})}}function OL(r,t,e,a){if(t===Vu)for(var n=0;n<e.length&&n<a;n++)r(e[n]?e[n][0]:null,n);else for(var s=e[0]||[],n=0;n<s.length&&n<a;n++)r(s[n],n)}function _B(r){var t=r.sourceFormat;return t===On||t===Fs}var Lc,Ic,kc,Oc,PL,zL,NB=(function(){function r(t,e){var a=GT(t)?t:UT(t);this._source=a;var n=this._data=a.data,s=a.sourceFormat;a.seriesLayoutBy,s===Lo&&(this._offset=0,this._dimSize=e,this._data=n),zL(this,n,a)}return r.prototype.getSource=function(){return this._source},r.prototype.count=function(){return 0},r.prototype.getItem=function(t,e){},r.prototype.appendData=function(t){},r.prototype.clean=function(){},r.protoInitialize=(function(){var t=r.prototype;t.pure=!1,t.persistent=!0})(),r.internalField=(function(){var t;zL=function(l,o,c){var u=c.sourceFormat,d=c.seriesLayoutBy,h=c.startIndex,p=c.dimensionsDefine,g=PL[FT(u,d)];if(ie(l,g),u===Lo)l.getItem=e,l.count=n,l.fillStorage=a;else{var v=jB(u,d);l.getItem=we(v,null,o,h,p);var y=wB(u,d);l.count=we(y,null,o,h,p)}};var e=function(l,o){l=l-this._offset,o=o||[];for(var c=this._data,u=this._dimSize,d=u*l,h=0;h<u;h++)o[h]=c[d+h];return o},a=function(l,o,c,u){for(var d=this._data,h=this._dimSize,p=0;p<h;p++){for(var g=u[p],v=g[0]==null?1/0:g[0],y=g[1]==null?-1/0:g[1],x=o-l,b=c[p],N=0;N<x;N++){var w=d[N*h+p];b[l+N]=w,w<v&&(v=w),w>y&&(y=w)}g[0]=v,g[1]=y}},n=function(){return this._data?this._data.length/this._dimSize:0};PL=(t={},t[va+"_"+Ps]={pure:!0,appendData:s},t[va+"_"+Vu]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[On]={pure:!0,appendData:s},t[Fs]={pure:!0,appendData:function(l){var o=this._data;B(l,function(c,u){for(var d=o[u]||(o[u]=[]),h=0;h<(c||[]).length;h++)d.push(c[h])})}},t[kn]={appendData:s},t[Lo]={persistent:!1,pure:!0,appendData:function(l){this._data=l},clean:function(){this._offset+=this.count(),this._data=null}},t);function s(l){for(var o=0;o<l.length;o++)this._data.push(l[o])}})(),r})(),S0=function(r){de(r)||qz("series.data or dataset.source must be an array.")};Lc={},Lc[va+"_"+Ps]=S0,Lc[va+"_"+Vu]=S0,Lc[On]=S0,Lc[Fs]=function(r,t){for(var e=0;e<t.length;e++){var a=t[e].name;a==null&&qz("dimension name must not be null/undefined.")}},Lc[kn]=S0;var BL=function(r,t,e,a){return r[a]},zee=(Ic={},Ic[va+"_"+Ps]=function(r,t,e,a){return r[a+t]},Ic[va+"_"+Vu]=function(r,t,e,a,n){a+=t;for(var s=n||[],l=r,o=0;o<l.length;o++){var c=l[o];s[o]=c?c[a]:null}return s},Ic[On]=BL,Ic[Fs]=function(r,t,e,a,n){for(var s=n||[],l=0;l<e.length;l++){var o=e[l].name,c=o!=null?r[o]:null;s[l]=c?c[a]:null}return s},Ic[kn]=BL,Ic);function jB(r,t){var e=zee[FT(r,t)];return e}var VL=function(r,t,e){return r.length},Bee=(kc={},kc[va+"_"+Ps]=function(r,t,e){return Math.max(0,r.length-t)},kc[va+"_"+Vu]=function(r,t,e){var a=r[0];return a?Math.max(0,a.length-t):0},kc[On]=VL,kc[Fs]=function(r,t,e){var a=e[0].name,n=a!=null?r[a]:null;return n?n.length:0},kc[kn]=VL,kc);function wB(r,t){var e=Bee[FT(r,t)];return e}var sj=function(r,t,e){return r[t]},Vee=(Oc={},Oc[va]=sj,Oc[On]=function(r,t,e){return r[e]},Oc[Fs]=sj,Oc[kn]=function(r,t,e){var a=Zh(r);return a instanceof Array?a[t]:a},Oc[Lo]=sj,Oc);function SB(r){var t=Vee[r];return t}function FT(r,t){return r===va?r+"_"+t:r}function kh(r,t,e){if(r){var a=r.getRawDataItem(t);if(a!=null){var n=r.getStore(),s=n.getSource().sourceFormat;if(e!=null){var l=r.getDimensionIndex(e),o=n.getDimensionProperty(l);return SB(s)(a,l,o)}else{var c=a;return s===kn&&(c=Zh(a)),c}}}}var Hee=/\{@(.+?)\}/g,Ib=(function(){function r(){}return r.prototype.getDataParams=function(t,e){var a=this.getData(e),n=this.getRawValue(t,e),s=a.getRawIndex(t),l=a.getName(t),o=a.getRawDataItem(t),c=a.getItemVisual(t,"style"),u=c&&c[a.getItemVisual(t,"drawType")||"fill"],d=c&&c.stroke,h=this.mainType,p=h==="series",g=a.userOutput&&a.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:p?this.subType:null,seriesIndex:this.seriesIndex,seriesId:p?this.id:null,seriesName:p?this.name:null,name:l,dataIndex:s,data:o,dataType:e,value:n,color:u,borderColor:d,dimensionNames:g?g.fullDimensions:null,encode:g?g.encode:null,$vars:["seriesName","name","value"]}},r.prototype.getFormattedLabel=function(t,e,a,n,s,l){e=e||"normal";var o=this.getData(a),c=this.getDataParams(t,a);if(l&&(c.value=l.interpolatedValue),n!=null&&de(c.value)&&(c.value=c.value[n]),!s){var u=o.getItemModel(t);s=u.get(e==="normal"?["label","formatter"]:[e,"label","formatter"])}if(Le(s))return c.status=e,c.dimensionIndex=n,s(c);if(je(s)){var d=OT(s,c);return d.replace(Hee,function(h,p){var g=p.length,v=p;v.charAt(0)==="["&&v.charAt(g-1)==="]"&&(v=+v.slice(1,g-1));var y=kh(o,t,v);if(l&&de(l.interpolatedValue)){var x=o.getDimensionIndex(v);x>=0&&(y=l.interpolatedValue[x])}return y!=null?y+"":""})}},r.prototype.getRawValue=function(t,e){return kh(this.getData(e),t)},r.prototype.formatTooltip=function(t,e,a){},r})();function HL(r){var t,e;return Ue(r)?r.type&&(e=r):t=r,{text:t,frag:e}}function Tg(r){return new Gee(r)}var Gee=(function(){function r(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return r.prototype.perform=function(t){var e=this._upstream,a=t&&t.skip;if(this._dirty&&e){var n=this.context;n.data=n.outputData=e.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!a&&(s=this._plan(this.context));var l=d(this._modBy),o=this._modDataCount||0,c=d(t&&t.modBy),u=t&&t.modDataCount||0;(l!==c||o!==u)&&(s="reset");function d(N){return!(N>=1)&&(N=1),N}var h;(this._dirty||s==="reset")&&(this._dirty=!1,h=this._doReset(a)),this._modBy=c,this._modDataCount=u;var p=t&&t.step;if(e?this._dueEnd=e._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var g=this._dueIndex,v=Math.min(p!=null?this._dueIndex+p:1/0,this._dueEnd);if(!a&&(h||g<v)){var y=this._progress;if(de(y))for(var x=0;x<y.length;x++)this._doProgress(y[x],g,v,c,u);else this._doProgress(y,g,v,c,u)}this._dueIndex=v;var b=this._settedOutputEnd!=null?this._settedOutputEnd:v;this._outputDueEnd=b}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},r.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},r.prototype._doProgress=function(t,e,a,n,s){GL.reset(e,a,n,s),this._callingProgress=t,this._callingProgress({start:e,end:a,count:a-e,next:GL.next},this.context)},r.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var e,a;!t&&this._reset&&(e=this._reset(this.context),e&&e.progress&&(a=e.forceFirstProgress,e=e.progress),de(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),a},r.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},r.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},r.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},r.prototype.getUpstream=function(){return this._upstream},r.prototype.getDownstream=function(){return this._downstream},r.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},r})(),GL=(function(){var r,t,e,a,n,s={reset:function(c,u,d,h){t=c,r=u,e=d,a=h,n=Math.ceil(a/e),s.next=e>1&&a>0?o:l}};return s;function l(){return t<r?t++:null}function o(){var c=t%n*e+Math.ceil(t/n),u=t>=r?null:c<a?c:t;return t++,u}})();function Io(r,t){var e=t&&t.type;return e==="ordinal"?r:(e==="time"&&!xt(r)&&r!=null&&r!=="-"&&(r=+Ai(r)),r==null||r===""?NaN:Number(r))}var Uee=De({number:function(r){return parseFloat(r)},time:function(r){return+Ai(r)},trim:function(r){return je(r)?Dn(r):r}});function CB(r){return Uee.get(r)}var TB={lt:function(r,t){return r<t},lte:function(r,t){return r<=t},gt:function(r,t){return r>t},gte:function(r,t){return r>=t}},Fee=(function(){function r(t,e){if(!xt(e)){var a="";At(a)}this._opFn=TB[t],this._rvalFloat=ji(e)}return r.prototype.evaluate=function(t){return xt(t)?this._opFn(t,this._rvalFloat):this._opFn(ji(t),this._rvalFloat)},r})(),AB=(function(){function r(t,e){var a=t==="desc";this._resultLT=a?1:-1,e==null&&(e=a?"min":"max"),this._incomparable=e==="min"?-1/0:1/0}return r.prototype.evaluate=function(t,e){var a=xt(t)?t:ji(t),n=xt(e)?e:ji(e),s=isNaN(a),l=isNaN(n);if(s&&(a=this._incomparable),l&&(n=this._incomparable),s&&l){var o=je(t),c=je(e);o&&(a=c?t:0),c&&(n=o?e:0)}return a<n?this._resultLT:a>n?-this._resultLT:0},r})(),Yee=(function(){function r(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=ji(e)}return r.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var a=typeof t;a!==this._rvalTypeof&&(a==="number"||this._rvalTypeof==="number")&&(e=ji(t)===this._rvalFloat)}return this._isEQ?e:!e},r})();function Wee(r,t){return r==="eq"||r==="ne"?new Yee(r==="eq",t):Te(TB,r)?new Fee(r,t):null}var $ee=(function(){function r(){}return r.prototype.getRawData=function(){throw new Error("not supported")},r.prototype.getRawDataItem=function(t){throw new Error("not supported")},r.prototype.cloneRawData=function(){},r.prototype.getDimensionInfo=function(t){},r.prototype.cloneAllDimensionInfo=function(){},r.prototype.count=function(){},r.prototype.retrieveValue=function(t,e){},r.prototype.retrieveValueFromItem=function(t,e){},r.prototype.convertValue=function(t,e){return Io(t,e)},r})();function qee(r,t){var e=new $ee,a=r.data,n=e.sourceFormat=r.sourceFormat,s=r.startIndex,l="";r.seriesLayoutBy!==Ps&&At(l);var o=[],c={},u=r.dimensionsDefine;if(u)B(u,function(y,x){var b=y.name,N={index:x,name:b,displayName:y.displayName};if(o.push(N),b!=null){var w="";Te(c,b)&&At(w),c[b]=N}});else for(var d=0;d<r.dimensionsDetectedCount;d++)o.push({index:d});var h=jB(n,Ps);t.__isBuiltIn&&(e.getRawDataItem=function(y){return h(a,s,o,y)},e.getRawData=we(Xee,null,r)),e.cloneRawData=we(Zee,null,r);var p=wB(n,Ps);e.count=we(p,null,a,s,o);var g=SB(n);e.retrieveValue=function(y,x){var b=h(a,s,o,y);return v(b,x)};var v=e.retrieveValueFromItem=function(y,x){if(y!=null){var b=o[x];if(b)return g(y,x,b.name)}};return e.getDimensionInfo=we(Kee,null,o,c),e.cloneAllDimensionInfo=we(Qee,null,o),e}function Xee(r){var t=r.sourceFormat;if(!YT(t)){var e="";At(e)}return r.data}function Zee(r){var t=r.sourceFormat,e=r.data;if(!YT(t)){var a="";At(a)}if(t===va){for(var n=[],s=0,l=e.length;s<l;s++)n.push(e[s].slice());return n}else if(t===On){for(var n=[],s=0,l=e.length;s<l;s++)n.push(ie({},e[s]));return n}}function Kee(r,t,e){if(e!=null){if(xt(e)||!isNaN(e)&&!Te(t,e))return r[e];if(Te(t,e))return t[e]}}function Qee(r){return Oe(r)}var EB=De();function Jee(r){r=Oe(r);var t=r.type,e="";t||At(e);var a=t.split(":");a.length!==2&&At(e);var n=!1;a[0]==="echarts"&&(t=a[1],n=!0),r.__isBuiltIn=n,EB.set(t,r)}function ete(r,t,e){var a=Ft(r),n=a.length,s="";n||At(s);for(var l=0,o=n;l<o;l++){var c=a[l];t=tte(c,t),l!==o-1&&(t.length=Math.max(t.length,1))}return t}function tte(r,t,e,a){var n="";t.length||At(n),Ue(r)||At(n);var s=r.type,l=EB.get(s);l||At(n);var o=pe(t,function(u){return qee(u,l)}),c=Ft(l.transform({upstream:o[0],upstreamList:o,config:Oe(r.config)}));return pe(c,function(u,d){var h="";Ue(u)||At(h),u.data||At(h);var p=bB(u.data);YT(p)||At(h);var g,v=t[0];if(v&&d===0&&!u.dimensions){var y=v.startIndex;y&&(u.data=v.data.slice(0,y).concat(u.data)),g={seriesLayoutBy:Ps,sourceHeader:y,dimensions:v.metaRawOption.dimensions}}else g={seriesLayoutBy:Ps,sourceHeader:0,dimensions:u.dimensions};return c2(u.data,g,null)})}function YT(r){return r===va||r===On}var kb="undefined",rte=typeof Uint32Array===kb?Array:Uint32Array,ate=typeof Uint16Array===kb?Array:Uint16Array,DB=typeof Int32Array===kb?Array:Int32Array,UL=typeof Float64Array===kb?Array:Float64Array,MB={float:UL,int:DB,ordinal:Array,number:Array,time:UL},ij;function Hd(r){return r>65535?rte:ate}function Gd(){return[1/0,-1/0]}function nte(r){var t=r.constructor;return t===Array?r.slice():new t(r)}function FL(r,t,e,a,n){var s=MB[e||"float"];if(n){var l=r[t],o=l&&l.length;if(o!==a){for(var c=new s(a),u=0;u<o;u++)c[u]=l[u];r[t]=c}}else r[t]=new s(a)}var u2=(function(){function r(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=De()}return r.prototype.initData=function(t,e,a){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=t.getSource(),s=this.defaultDimValueGetter=ij[n.sourceFormat];this._dimValueGetter=a||s,this._rawExtent=[],_B(n),this._dimensions=pe(e,function(l){return{type:l.type,property:l.property}}),this._initDataFromProvider(0,t.count())},r.prototype.getProvider=function(){return this._provider},r.prototype.getSource=function(){return this._provider.getSource()},r.prototype.ensureCalculationDimension=function(t,e){var a=this._calcDimNameToIdx,n=this._dimensions,s=a.get(t);if(s!=null){if(n[s].type===e)return s}else s=n.length;return n[s]={type:e},a.set(t,s),this._chunks[s]=new MB[e||"float"](this._rawCount),this._rawExtent[s]=Gd(),s},r.prototype.collectOrdinalMeta=function(t,e){var a=this._chunks[t],n=this._dimensions[t],s=this._rawExtent,l=n.ordinalOffset||0,o=a.length;l===0&&(s[t]=Gd());for(var c=s[t],u=l;u<o;u++){var d=a[u]=e.parseAndCollect(a[u]);isNaN(d)||(c[0]=Math.min(d,c[0]),c[1]=Math.max(d,c[1]))}n.ordinalMeta=e,n.ordinalOffset=o,n.type="ordinal"},r.prototype.getOrdinalMeta=function(t){var e=this._dimensions[t],a=e.ordinalMeta;return a},r.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},r.prototype.appendData=function(t){var e=this._provider,a=this.count();e.appendData(t);var n=e.count();return e.persistent||(n+=a),a<n&&this._initDataFromProvider(a,n,!0),[a,n]},r.prototype.appendValues=function(t,e){for(var a=this._chunks,n=this._dimensions,s=n.length,l=this._rawExtent,o=this.count(),c=o+Math.max(t.length,e||0),u=0;u<s;u++){var d=n[u];FL(a,u,d.type,c,!0)}for(var h=[],p=o;p<c;p++)for(var g=p-o,v=0;v<s;v++){var d=n[v],y=ij.arrayRows.call(this,t[g]||h,d.property,g,v);a[v][p]=y;var x=l[v];y<x[0]&&(x[0]=y),y>x[1]&&(x[1]=y)}return this._rawCount=this._count=c,{start:o,end:c}},r.prototype._initDataFromProvider=function(t,e,a){for(var n=this._provider,s=this._chunks,l=this._dimensions,o=l.length,c=this._rawExtent,u=pe(l,function(N){return N.property}),d=0;d<o;d++){var h=l[d];c[d]||(c[d]=Gd()),FL(s,d,h.type,e,a)}if(n.fillStorage)n.fillStorage(t,e,s,c);else for(var p=[],g=t;g<e;g++){p=n.getItem(g,p);for(var v=0;v<o;v++){var y=s[v],x=this._dimValueGetter(p,u[v],g,v);y[g]=x;var b=c[v];x<b[0]&&(b[0]=x),x>b[1]&&(b[1]=x)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=e,this._extent=[]},r.prototype.count=function(){return this._count},r.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var a=this._chunks[t];return a?a[this.getRawIndex(e)]:NaN},r.prototype.getValues=function(t,e){var a=[],n=[];if(e==null){e=t,t=[];for(var s=0;s<this._dimensions.length;s++)n.push(s)}else n=t;for(var s=0,l=n.length;s<l;s++)a.push(this.get(n[s],e));return a},r.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var a=this._chunks[t];return a?a[e]:NaN},r.prototype.getSum=function(t){var e=this._chunks[t],a=0;if(e)for(var n=0,s=this.count();n<s;n++){var l=this.get(t,n);isNaN(l)||(a+=l)}return a},r.prototype.getMedian=function(t){var e=[];this.each([t],function(s){isNaN(s)||e.push(s)});var a=e.sort(function(s,l){return s-l}),n=this.count();return n===0?0:n%2===1?a[(n-1)/2]:(a[n/2]+a[n/2-1])/2},r.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,a=e[t];if(a!=null&&a<this._count&&a===t)return t;for(var n=0,s=this._count-1;n<=s;){var l=(n+s)/2|0;if(e[l]<t)n=l+1;else if(e[l]>t)s=l-1;else return l}return-1},r.prototype.getIndices=function(){var t,e=this._indices;if(e){var a=e.constructor,n=this._count;if(a===Array){t=new a(n);for(var s=0;s<n;s++)t[s]=e[s]}else t=new a(e.buffer,0,n)}else{var a=Hd(this._rawCount);t=new a(this.count());for(var s=0;s<t.length;s++)t[s]=s}return t},r.prototype.filter=function(t,e){if(!this._count)return this;for(var a=this.clone(),n=a.count(),s=Hd(a._rawCount),l=new s(n),o=[],c=t.length,u=0,d=t[0],h=a._chunks,p=0;p<n;p++){var g=void 0,v=a.getRawIndex(p);if(c===0)g=e(p);else if(c===1){var y=h[d][v];g=e(y,p)}else{for(var x=0;x<c;x++)o[x]=h[t[x]][v];o[x]=p,g=e.apply(null,o)}g&&(l[u++]=v)}return u<n&&(a._indices=l),a._count=u,a._extent=[],a._updateGetRawIdx(),a},r.prototype.selectRange=function(t){var e=this.clone(),a=e._count;if(!a)return this;var n=gt(t),s=n.length;if(!s)return this;var l=e.count(),o=Hd(e._rawCount),c=new o(l),u=0,d=n[0],h=t[d][0],p=t[d][1],g=e._chunks,v=!1;if(!e._indices){var y=0;if(s===1){for(var x=g[n[0]],b=0;b<a;b++){var N=x[b];(N>=h&&N<=p||isNaN(N))&&(c[u++]=y),y++}v=!0}else if(s===2){for(var x=g[n[0]],w=g[n[1]],S=t[n[1]][0],T=t[n[1]][1],b=0;b<a;b++){var N=x[b],A=w[b];(N>=h&&N<=p||isNaN(N))&&(A>=S&&A<=T||isNaN(A))&&(c[u++]=y),y++}v=!0}}if(!v)if(s===1)for(var b=0;b<l;b++){var C=e.getRawIndex(b),N=g[n[0]][C];(N>=h&&N<=p||isNaN(N))&&(c[u++]=C)}else for(var b=0;b<l;b++){for(var M=!0,C=e.getRawIndex(b),R=0;R<s;R++){var k=n[R],N=g[k][C];(N<t[k][0]||N>t[k][1])&&(M=!1)}M&&(c[u++]=e.getRawIndex(b))}return u<l&&(e._indices=c),e._count=u,e._extent=[],e._updateGetRawIdx(),e},r.prototype.map=function(t,e){var a=this.clone(t);return this._updateDims(a,t,e),a},r.prototype.modify=function(t,e){this._updateDims(this,t,e)},r.prototype._updateDims=function(t,e,a){for(var n=t._chunks,s=[],l=e.length,o=t.count(),c=[],u=t._rawExtent,d=0;d<e.length;d++)u[e[d]]=Gd();for(var h=0;h<o;h++){for(var p=t.getRawIndex(h),g=0;g<l;g++)c[g]=n[e[g]][p];c[l]=h;var v=a&&a.apply(null,c);if(v!=null){typeof v!="object"&&(s[0]=v,v=s);for(var d=0;d<v.length;d++){var y=e[d],x=v[d],b=u[y],N=n[y];N&&(N[p]=x),x<b[0]&&(b[0]=x),x>b[1]&&(b[1]=x)}}}},r.prototype.lttbDownSample=function(t,e){var a=this.clone([t],!0),n=a._chunks,s=n[t],l=this.count(),o=0,c=Math.floor(1/e),u=this.getRawIndex(0),d,h,p,g=new(Hd(this._rawCount))(Math.min((Math.ceil(l/c)+2)*2,l));g[o++]=u;for(var v=1;v<l-1;v+=c){for(var y=Math.min(v+c,l-1),x=Math.min(v+c*2,l),b=(x+y)/2,N=0,w=y;w<x;w++){var S=this.getRawIndex(w),T=s[S];isNaN(T)||(N+=T)}N/=x-y;var A=v,C=Math.min(v+c,l),M=v-1,R=s[u];d=-1,p=A;for(var k=-1,L=0,w=A;w<C;w++){var S=this.getRawIndex(w),T=s[S];if(isNaN(T)){L++,k<0&&(k=S);continue}h=Math.abs((M-b)*(T-R)-(M-w)*(N-R)),h>d&&(d=h,p=S)}L>0&&L<C-A&&(g[o++]=Math.min(k,p),p=Math.max(k,p)),g[o++]=p,u=p}return g[o++]=this.getRawIndex(l-1),a._count=o,a._indices=g,a.getRawIndex=this._getRawIdx,a},r.prototype.minmaxDownSample=function(t,e){for(var a=this.clone([t],!0),n=a._chunks,s=Math.floor(1/e),l=n[t],o=this.count(),c=new(Hd(this._rawCount))(Math.ceil(o/s)*2),u=0,d=0;d<o;d+=s){var h=d,p=l[this.getRawIndex(h)],g=d,v=l[this.getRawIndex(g)],y=s;d+s>o&&(y=o-d);for(var x=0;x<y;x++){var b=this.getRawIndex(d+x),N=l[b];N<p&&(p=N,h=d+x),N>v&&(v=N,g=d+x)}var w=this.getRawIndex(h),S=this.getRawIndex(g);h<g?(c[u++]=w,c[u++]=S):(c[u++]=S,c[u++]=w)}return a._count=u,a._indices=c,a._updateGetRawIdx(),a},r.prototype.downSample=function(t,e,a,n){for(var s=this.clone([t],!0),l=s._chunks,o=[],c=Math.floor(1/e),u=l[t],d=this.count(),h=s._rawExtent[t]=Gd(),p=new(Hd(this._rawCount))(Math.ceil(d/c)),g=0,v=0;v<d;v+=c){c>d-v&&(c=d-v,o.length=c);for(var y=0;y<c;y++){var x=this.getRawIndex(v+y);o[y]=u[x]}var b=a(o),N=this.getRawIndex(Math.min(v+n(o,b)||0,d-1));u[N]=b,b<h[0]&&(h[0]=b),b>h[1]&&(h[1]=b),p[g++]=N}return s._count=g,s._indices=p,s._updateGetRawIdx(),s},r.prototype.each=function(t,e){if(this._count)for(var a=t.length,n=this._chunks,s=0,l=this.count();s<l;s++){var o=this.getRawIndex(s);switch(a){case 0:e(s);break;case 1:e(n[t[0]][o],s);break;case 2:e(n[t[0]][o],n[t[1]][o],s);break;default:for(var c=0,u=[];c<a;c++)u[c]=n[t[c]][o];u[c]=s,e.apply(null,u)}}},r.prototype.getDataExtent=function(t){var e=this._chunks[t],a=Gd();if(!e)return a;var n=this.count(),s=!this._indices,l;if(s)return this._rawExtent[t].slice();if(l=this._extent[t],l)return l.slice();l=a;for(var o=l[0],c=l[1],u=0;u<n;u++){var d=this.getRawIndex(u),h=e[d];h<o&&(o=h),h>c&&(c=h)}return l=[o,c],this._extent[t]=l,l},r.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var a=[],n=this._chunks,s=0;s<n.length;s++)a.push(n[s][e]);return a},r.prototype.clone=function(t,e){var a=new r,n=this._chunks,s=t&&ds(t,function(o,c){return o[c]=!0,o},{});if(s)for(var l=0;l<n.length;l++)a._chunks[l]=s[l]?nte(n[l]):n[l];else a._chunks=n;return this._copyCommonProps(a),e||(a._indices=this._cloneIndices()),a._updateGetRawIdx(),a},r.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Oe(this._extent),t._rawExtent=Oe(this._rawExtent)},r.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var a=this._indices.length;e=new t(a);for(var n=0;n<a;n++)e[n]=this._indices[n]}else e=new t(this._indices);return e}return null},r.prototype._getRawIdxIdentity=function(t){return t},r.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},r.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},r.internalField=(function(){function t(e,a,n,s){return Io(e[s],this._dimensions[s])}ij={arrayRows:t,objectRows:function(e,a,n,s){return Io(e[a],this._dimensions[s])},keyedColumns:t,original:function(e,a,n,s){var l=e&&(e.value==null?e:e.value);return Io(l instanceof Array?l[s]:l,this._dimensions[s])},typedArray:function(e,a,n,s){return e[s]}}})(),r})(),RB=(function(){function r(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return r.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},r.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},r.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},r.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},r.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,e=this._getUpstreamSourceManagers(),a=!!e.length,n,s;if(C0(t)){var l=t,o=void 0,c=void 0,u=void 0;if(a){var d=e[0];d.prepareSource(),u=d.getSource(),o=u.data,c=u.sourceFormat,s=[d._getVersionSign()]}else o=l.get("data",!0),c=Xa(o)?Lo:kn,s=[];var h=this._getSourceMetaRawOption()||{},p=u&&u.metaRawOption||{},g=Me(h.seriesLayoutBy,p.seriesLayoutBy)||null,v=Me(h.sourceHeader,p.sourceHeader),y=Me(h.dimensions,p.dimensions),x=g!==p.seriesLayoutBy||!!v!=!!p.sourceHeader||y;n=x?[c2(o,{seriesLayoutBy:g,sourceHeader:v,dimensions:y},c)]:[]}else{var b=t;if(a){var N=this._applyTransform(e);n=N.sourceList,s=N.upstreamSignList}else{var w=b.get("source",!0);n=[c2(w,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(n,s)},r.prototype._applyTransform=function(t){var e=this._sourceHost,a=e.get("transform",!0),n=e.get("fromTransformResult",!0);if(n!=null){var s="";t.length!==1&&WL(s)}var l,o=[],c=[];return B(t,function(u){u.prepareSource();var d=u.getSource(n||0),h="";n!=null&&!d&&WL(h),o.push(d),c.push(u._getVersionSign())}),a?l=ete(a,o,{datasetIndex:e.componentIndex}):n!=null&&(l=[kee(o[0])]),{sourceList:l,upstreamSignList:c}},r.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var a=t[e];if(a._isDirty()||this._upstreamSignList[e]!==a._getVersionSign())return!0}},r.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var a=this._getUpstreamSourceManagers();return a[0]&&a[0].getSource(t)}return e},r.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},r.prototype._innerGetDataStore=function(t,e,a){var n=0,s=this._storeList,l=s[n];l||(l=s[n]={});var o=l[a];if(!o){var c=this._getUpstreamSourceManagers()[0];C0(this._sourceHost)&&c?o=c._innerGetDataStore(t,e,a):(o=new u2,o.initData(new NB(e,t.length),t)),l[a]=o}return o},r.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(C0(t)){var e=BT(t);return e?[e.getSourceManager()]:[]}else return pe(uee(t),function(a){return a.getSourceManager()})},r.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,e,a,n;if(C0(t))e=t.get("seriesLayoutBy",!0),a=t.get("sourceHeader",!0),n=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=t;e=s.get("seriesLayoutBy",!0),a=s.get("sourceHeader",!0),n=s.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:a,dimensions:n}},r})();function YL(r){var t=r.option.transform;t&&Og(r.option.transform)}function C0(r){return r.mainType==="series"}function WL(r){throw new Error(r)}var ste="line-height:1";function LB(r){var t=r.lineHeight;return t==null?ste:"line-height:"+Oa(t+"")+"px"}function IB(r,t){var e=r.color||ee.color.tertiary,a=r.fontSize||12,n=r.fontWeight||"400",s=r.color||ee.color.secondary,l=r.fontSize||14,o=r.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Oa(a+"")+"px;color:"+Oa(e)+";font-weight:"+Oa(n+""),valueStyle:"font-size:"+Oa(l+"")+"px;color:"+Oa(s)+";font-weight:"+Oa(o+"")}:{nameStyle:{fontSize:a,fill:e,fontWeight:n},valueStyle:{fontSize:l,fill:s,fontWeight:o}}}var ite=[0,10,20,30],lte=["",`
`,`

`,`


`];function Br(r,t){return t.type=r,t}function d2(r){return r.type==="section"}function kB(r){return d2(r)?ote:cte}function OB(r){if(d2(r)){var t=0,e=r.blocks.length,a=e>1||e>0&&!r.noHeader;return B(r.blocks,function(n){var s=OB(n);s>=t&&(t=s+ +(a&&(!s||d2(n)&&!n.noHeader)))}),t}return 0}function ote(r,t,e,a){var n=t.noHeader,s=ute(OB(t)),l=[],o=t.blocks||[];Ea(!o||de(o)),o=o||[];var c=r.orderMode;if(t.sortBlocks&&c){o=o.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(Te(u,c)){var d=new AB(u[c],null);o.sort(function(y,x){return d.evaluate(y.sortParam,x.sortParam)})}else c==="seriesDesc"&&o.reverse()}B(o,function(y,x){var b=t.valueFormatter,N=kB(y)(b?ie(ie({},r),{valueFormatter:b}):r,y,x>0?s.html:0,a);N!=null&&l.push(N)});var h=r.renderMode==="richText"?l.join(s.richText):h2(a,l.join(""),n?e:s.html);if(n)return h;var p=s2(t.header,"ordinal",r.useUTC),g=IB(a,r.renderMode).nameStyle,v=LB(a);return r.renderMode==="richText"?PB(r,p,g)+s.richText+h:h2(a,'<div style="'+g+";"+v+';">'+Oa(p)+"</div>"+h,e)}function cte(r,t,e,a){var n=r.renderMode,s=t.noName,l=t.noValue,o=!t.markerType,c=t.name,u=r.useUTC,d=t.valueFormatter||r.valueFormatter||function(S){return S=de(S)?S:[S],pe(S,function(T,A){return s2(T,de(g)?g[A]:g,u)})};if(!(s&&l)){var h=o?"":r.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||ee.color.secondary,n),p=s?"":s2(c,"ordinal",u),g=t.valueType,v=l?[]:d(t.value,t.dataIndex),y=!o||!s,x=!o&&s,b=IB(a,n),N=b.nameStyle,w=b.valueStyle;return n==="richText"?(o?"":h)+(s?"":PB(r,p,N))+(l?"":fte(r,v,y,x,w)):h2(a,(o?"":h)+(s?"":dte(p,!o,N))+(l?"":hte(v,y,x,w)),e)}}function $L(r,t,e,a,n,s){if(r){var l=kB(r),o={useUTC:n,renderMode:e,orderMode:a,markupStyleCreator:t,valueFormatter:r.valueFormatter};return l(o,r,0,s)}}function ute(r){return{html:ite[r],richText:lte[r]}}function h2(r,t,e){var a='<div style="clear:both"></div>',n="margin: "+e+"px 0 0",s=LB(r);return'<div style="'+n+";"+s+';">'+t+a+"</div>"}function dte(r,t,e){var a=t?"margin-left:2px":"";return'<span style="'+e+";"+a+'">'+Oa(r)+"</span>"}function hte(r,t,e,a){var n=e?"10px":"20px",s=t?"float:right;margin-left:"+n:"";return r=de(r)?r:[r],'<span style="'+s+";"+a+'">'+pe(r,function(l){return Oa(l)}).join("&nbsp;&nbsp;")+"</span>"}function PB(r,t,e){return r.markupStyleCreator.wrapRichTextStyle(t,e)}function fte(r,t,e,a,n){var s=[n],l=a?10:20;return e&&s.push({padding:[0,0,0,l],align:"right"}),r.markupStyleCreator.wrapRichTextStyle(de(t)?t.join("  "):t,s)}function zB(r,t){var e=r.getData().getItemVisual(t,"style"),a=e[r.visualDrawType];return Du(a)}function BB(r,t){var e=r.get("padding");return e??(t==="richText"?[8,10]:10)}var lj=(function(){function r(){this.richTextStyles={},this._nextStyleNameId=Wz()}return r.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},r.prototype.makeTooltipMarker=function(t,e,a){var n=a==="richText"?this._generateStyleName():null,s=J7({color:e,type:t,renderMode:a,markerId:n});return je(s)?s:(this.richTextStyles[n]=s.style,s.content)},r.prototype.wrapRichTextStyle=function(t,e){var a={};de(e)?B(e,function(s){return ie(a,s)}):ie(a,e);var n=this._generateStyleName();return this.richTextStyles[n]=a,"{"+n+"|"+t+"}"},r})();function VB(r){var t=r.series,e=r.dataIndex,a=r.multipleSeries,n=t.getData(),s=n.mapDimensionsAll("defaultedTooltip"),l=s.length,o=t.getRawValue(e),c=de(o),u=zB(t,e),d,h,p,g;if(l>1||c&&!l){var v=pte(o,t,e,s,u);d=v.inlineValues,h=v.inlineValueTypes,p=v.blocks,g=v.inlineValues[0]}else if(l){var y=n.getDimensionInfo(s[0]);g=d=kh(n,e,s[0]),h=y.type}else g=d=c?o[0]:o;var x=aT(t),b=x&&t.name||"",N=n.getName(e),w=a?b:N;return Br("section",{header:b,noHeader:a||!x,sortParam:g,blocks:[Br("nameValue",{markerType:"item",markerColor:u,name:w,noName:!Dn(w),value:d,valueType:h,dataIndex:e})].concat(p||[])})}function pte(r,t,e,a,n){var s=t.getData(),l=ds(r,function(h,p,g){var v=s.getDimensionInfo(g);return h=h||v&&v.tooltip!==!1&&v.displayName!=null},!1),o=[],c=[],u=[];a.length?B(a,function(h){d(kh(s,e,h),h)}):B(r,d);function d(h,p){var g=s.getDimensionInfo(p);!g||g.otherDims.tooltip===!1||(l?u.push(Br("nameValue",{markerType:"subItem",markerColor:n,name:g.displayName,value:h,valueType:g.type})):(o.push(h),c.push(g.type)))}return{inlineValues:o,inlineValueTypes:c,blocks:u}}var oo=ut();function T0(r,t){return r.getName(t)||r.getId(t)}var Ox="__universalTransitionEnabled",zt=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return t.prototype.init=function(e,a,n){this.seriesIndex=this.componentIndex,this.dataTask=Tg({count:mte,reset:vte}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n);var s=oo(this).sourceManager=new RB(this);s.prepareSource();var l=this.getInitialData(e,n);XL(l,this),this.dataTask.context.data=l,oo(this).dataBeforeProcessed=l,qL(this),this._initSelectedMapFromData(l)},t.prototype.mergeDefaultAndTheme=function(e,a){var n=qg(this),s=n?Bu(e):{},l=this.subType;ct.hasClass(l)&&(l+="Series"),rt(e,a.getTheme().get(this.subType)),rt(e,this.getDefaultOption()),wu(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&Si(e,s,n)},t.prototype.mergeOption=function(e,a){e=rt(this.option,e,!0),this.fillDataTextStyle(e.data);var n=qg(this);n&&Si(this.option,e,n);var s=oo(this).sourceManager;s.dirty(),s.prepareSource();var l=this.getInitialData(e,a);XL(l,this),this.dataTask.dirty(),this.dataTask.context.data=l,oo(this).dataBeforeProcessed=l,qL(this),this._initSelectedMapFromData(l)},t.prototype.fillDataTextStyle=function(e){if(e&&!Xa(e))for(var a=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&wu(e[n],"label",a)},t.prototype.getInitialData=function(e,a){},t.prototype.appendData=function(e){var a=this.getRawData();a.appendData(e.data)},t.prototype.getData=function(e){var a=f2(this);if(a){var n=a.context.data;return e==null||!n.getLinkedData?n:n.getLinkedData(e)}else return oo(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var a=f2(this);if(a){var n=a.context;n.outputData=e,a!==this.dataTask&&(n.data=e)}oo(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return De(e)},t.prototype.getSourceManager=function(){return oo(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return oo(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var e=this.get("colorBy");return e||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.indicesOfNearest=function(e,a,n,s){var l=this.getData(),o=this.coordinateSystem,c=o&&o.getAxis(e);if(!o||!c)return[];var u=c.dataToCoord(n);s==null&&(s=1/0);var d=[],h=1/0,p=-1,g=0;return l.each(a,function(v,y){var x=c.dataToCoord(v),b=u-x,N=Math.abs(b);N<=s&&((N<h||N===h&&b>=0&&p<0)&&(h=N,p=b,g=0),b===p&&(d[g++]=y))}),d.length=g,d},t.prototype.formatTooltip=function(e,a,n){return VB({series:this,dataIndex:e,multipleSeries:a})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(pt.node&&!(e&&e.ssr))return!1;var a=this.getShallow("animation");return a&&this.getData().count()>this.getShallow("animationThreshold")&&(a=!1),!!a},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,a,n){var s=this.ecModel,l=VT.prototype.getColorFromPalette.call(this,e,a,n);return l||(l=s.getColorFromPalette(e,a,n)),l},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,a){this._innerSelect(this.getData(a),e)},t.prototype.unselect=function(e,a){var n=this.option.selectedMap;if(n){var s=this.option.selectedMode,l=this.getData(a);if(s==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<e.length;o++){var c=e[o],u=T0(l,c);n[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(e,a){for(var n=[],s=0;s<e.length;s++)n[0]=e[s],this.isSelected(e[s],a)?this.unselect(n,a):this.select(n,a)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,a=gt(e),n=[],s=0;s<a.length;s++){var l=e[a[s]];l>=0&&n.push(l)}return n},t.prototype.isSelected=function(e,a){var n=this.option.selectedMap;if(!n)return!1;var s=this.getData(a);return(n==="all"||n[T0(s,e)])&&!s.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Ox])return!0;var e=this.option.universalTransition;return e?e===!0?!0:e&&e.enabled:!1},t.prototype._innerSelect=function(e,a){var n,s,l=this.option,o=l.selectedMode,c=a.length;if(!(!o||!c)){if(o==="series")l.selectedMap="all";else if(o==="multiple"){Ue(l.selectedMap)||(l.selectedMap={});for(var u=l.selectedMap,d=0;d<c;d++){var h=a[d],p=T0(e,h);u[p]=!0,this._selectedDataIndicesMap[p]=e.getRawIndex(h)}}else if(o==="single"||o===!0){var g=a[c-1],p=T0(e,g);l.selectedMap=(n={},n[p]=!0,n),this._selectedDataIndicesMap=(s={},s[p]=e.getRawIndex(g),s)}}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var a=[];e.hasItemOption&&e.each(function(n){var s=e.getRawDataItem(n);s&&s.selected&&a.push(n)}),a.length>0&&this._innerSelect(e,a)}},t.registerClass=function(e){return ct.registerClass(e)},t.protoInitialize=(function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"})(),t})(ct);yr(zt,Ib);yr(zt,VT);r7(zt,ct);function qL(r){var t=r.name;aT(r)||(r.name=gte(r)||t)}function gte(r){var t=r.getRawData(),e=t.mapDimensionsAll("seriesName"),a=[];return B(e,function(n){var s=t.getDimensionInfo(n);s.displayName&&a.push(s.displayName)}),a.join(" ")}function mte(r){return r.model.getRawData().count()}function vte(r){var t=r.model;return t.setData(t.getRawData().cloneShallow()),xte}function xte(r,t){t.outputData&&r.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function XL(r,t){B(Ah(r.CHANGABLE_METHODS,r.DOWNSAMPLE_METHODS),function(e){r.wrapMethod(e,et(yte,t))})}function yte(r,t){var e=f2(r);return e&&e.setOutputEnd((t||this).count()),t}function f2(r){var t=(r.ecModel||{}).scheduler,e=t&&t.getPipeline(r.uid);if(e){var a=e.currentTask;if(a){var n=a.agentStubMap;n&&(a=n.get(r.uid))}return a}}var Yt=(function(){function r(){this.group=new Pe,this.uid=nf("viewComponent")}return r.prototype.init=function(t,e){},r.prototype.render=function(t,e,a,n){},r.prototype.dispose=function(t,e){},r.prototype.updateView=function(t,e,a,n){},r.prototype.updateLayout=function(t,e,a,n){},r.prototype.updateVisual=function(t,e,a,n){},r.prototype.toggleBlurSeries=function(t,e,a){},r.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},r})();sT(Yt);_b(Yt);function of(){var r=ut();return function(t){var e=r(t),a=t.pipelineContext,n=!!e.large,s=!!e.progressiveRender,l=e.large=!!(a&&a.large),o=e.progressiveRender=!!(a&&a.progressiveRender);return(n!==l||s!==o)&&"reset"}}var HB=ut(),bte=of(),Pt=(function(){function r(){this.group=new Pe,this.uid=nf("viewChart"),this.renderTask=Tg({plan:_te,reset:Nte}),this.renderTask.context={view:this}}return r.prototype.init=function(t,e){},r.prototype.render=function(t,e,a,n){},r.prototype.highlight=function(t,e,a,n){var s=t.getData(n&&n.dataType);s&&KL(s,n,"emphasis")},r.prototype.downplay=function(t,e,a,n){var s=t.getData(n&&n.dataType);s&&KL(s,n,"normal")},r.prototype.remove=function(t,e){this.group.removeAll()},r.prototype.dispose=function(t,e){},r.prototype.updateView=function(t,e,a,n){this.render(t,e,a,n)},r.prototype.updateLayout=function(t,e,a,n){this.render(t,e,a,n)},r.prototype.updateVisual=function(t,e,a,n){this.render(t,e,a,n)},r.prototype.eachRendered=function(t){Wo(this.group,t)},r.markUpdateMethod=function(t,e){HB(t).updateMethod=e},r.protoInitialize=(function(){var t=r.prototype;t.type="chart"})(),r})();function ZL(r,t,e){r&&Yg(r)&&(t==="emphasis"?Sl:Cl)(r,e)}function KL(r,t,e){var a=Su(r,t),n=t&&t.highlightKey!=null?qQ(t.highlightKey):null;a!=null?B(Ft(a),function(s){ZL(r.getItemGraphicEl(s),e,n)}):r.eachItemGraphicEl(function(s){ZL(s,e,n)})}sT(Pt);_b(Pt);function _te(r){return bte(r.model)}function Nte(r){var t=r.model,e=r.ecModel,a=r.api,n=r.payload,s=t.pipelineContext.progressiveRender,l=r.view,o=n&&HB(n).updateMethod,c=s?"incrementalPrepareRender":o&&l[o]?o:"render";return c!=="render"&&l[c](t,e,a,n),jte[c]}var jte={incrementalPrepareRender:{progress:function(r,t){t.view.incrementalRender(r,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(r,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},my="\0__throttleOriginMethod",QL="\0__throttleRate",JL="\0__throttleType";function Ob(r,t,e){var a,n=0,s=0,l=null,o,c,u,d;t=t||0;function h(){s=new Date().getTime(),l=null,r.apply(c,u||[])}var p=function(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];a=new Date().getTime(),c=this,u=g;var y=d||t,x=d||e;d=null,o=a-(x?n:s)-y,clearTimeout(l),x?l=setTimeout(h,y):o>=0?h():l=setTimeout(h,-o),n=a};return p.clear=function(){l&&(clearTimeout(l),l=null)},p.debounceNextCall=function(g){d=g},p}function cf(r,t,e,a){var n=r[t];if(n){var s=n[my]||n,l=n[JL],o=n[QL];if(o!==e||l!==a){if(e==null||!a)return r[t]=s;n=r[t]=Ob(s,e,a==="debounce"),n[my]=s,n[JL]=a,n[QL]=e}return n}}function Zg(r,t){var e=r[t];e&&e[my]&&(e.clear&&e.clear(),r[t]=e[my])}var e3=ut(),t3={itemStyle:Cu(F7,!0),lineStyle:Cu(U7,!0)},wte={lineStyle:"stroke",itemStyle:"fill"};function GB(r,t){var e=r.visualStyleMapper||t3[t];return e||(console.warn("Unknown style type '"+t+"'."),t3.itemStyle)}function UB(r,t){var e=r.visualDrawType||wte[t];return e||(console.warn("Unknown style type '"+t+"'."),"fill")}var Ste={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){var e=r.getData(),a=r.visualStyleAccessPath||"itemStyle",n=r.getModel(a),s=GB(r,a),l=s(n),o=n.getShallow("decal");o&&(e.setVisual("decal",o),o.dirty=!0);var c=UB(r,a),u=l[c],d=Le(u)?u:null,h=l.fill==="auto"||l.stroke==="auto";if(!l[c]||d||h){var p=r.getColorFromPalette(r.name,null,t.getSeriesCount());l[c]||(l[c]=p,e.setVisual("colorFromPalette",!0)),l.fill=l.fill==="auto"||Le(l.fill)?p:l.fill,l.stroke=l.stroke==="auto"||Le(l.stroke)?p:l.stroke}if(e.setVisual("style",l),e.setVisual("drawType",c),!t.isSeriesFiltered(r)&&d)return e.setVisual("colorFromPalette",!1),{dataEach:function(g,v){var y=r.getDataParams(v),x=ie({},l);x[c]=d(y),g.setItemVisual(v,"style",x)}}}},Ap=new dt,Cte={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){if(!(r.ignoreStyleOnData||t.isSeriesFiltered(r))){var e=r.getData(),a=r.visualStyleAccessPath||"itemStyle",n=GB(r,a),s=e.getVisual("drawType");return{dataEach:e.hasItemOption?function(l,o){var c=l.getRawDataItem(o);if(c&&c[a]){Ap.option=c[a];var u=n(Ap),d=l.ensureUniqueItemVisual(o,"style");ie(d,u),Ap.option.decal&&(l.setItemVisual(o,"decal",Ap.option.decal),Ap.option.decal.dirty=!0),s in u&&l.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},Tte={performRawSeries:!0,overallReset:function(r){var t=De();r.eachSeries(function(e){var a=e.getColorBy();if(!e.isColorBySeries()){var n=e.type+"-"+a,s=t.get(n);s||(s={},t.set(n,s)),e3(e).scope=s}}),r.eachSeries(function(e){if(!(e.isColorBySeries()||r.isSeriesFiltered(e))){var a=e.getRawData(),n={},s=e.getData(),l=e3(e).scope,o=e.visualStyleAccessPath||"itemStyle",c=UB(e,o);s.each(function(u){var d=s.getRawIndex(u);n[d]=u}),a.each(function(u){var d=n[u],h=s.getItemVisual(d,"colorFromPalette");if(h){var p=s.ensureUniqueItemVisual(d,"style"),g=a.getName(u)||u+"",v=a.count();p[c]=e.getColorFromPalette(g,l,v)}})}})}},A0=Math.PI;function Ate(r,t){t=t||{},Ge(t,{text:"loading",textColor:ee.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:ee.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var e=new Pe,a=new it({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});e.add(a);var n=new vt({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new it({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});e.add(s);var l;return t.showSpinner&&(l=new Dm({shape:{startAngle:-A0/2,endAngle:-A0/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),l.animateShape(!0).when(1e3,{endAngle:A0*3/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:A0*3/2}).delay(300).start("circularInOut"),e.add(l)),e.resize=function(){var o=n.getBoundingRect().width,c=t.showSpinner?t.spinnerRadius:0,u=(r.getWidth()-c*2-(t.showSpinner&&o?10:0)-o)/2-(t.showSpinner&&o?0:5+o/2)+(t.showSpinner?0:o/2)+(o?0:c),d=r.getHeight()/2;t.showSpinner&&l.setShape({cx:u,cy:d}),s.setShape({x:u-c,y:d-c,width:c*2,height:c*2}),a.setShape({x:0,y:0,width:r.getWidth(),height:r.getHeight()})},e.resize(),e}var FB=(function(){function r(t,e,a,n){this._stageTaskMap=De(),this.ecInstance=t,this.api=e,a=this._dataProcessorHandlers=a.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=a.concat(n)}return r.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(a){var n=a.overallTask;n&&n.dirty()})},r.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var a=this._pipelineMap.get(t.__pipeline.id),n=a.context,s=!e&&a.progressiveEnabled&&(!n||n.progressiveRender)&&t.__idxInPipeline>a.blockIndex,l=s?a.step:null,o=n&&n.modDataCount,c=o!=null?Math.ceil(o/l):null;return{step:l,modBy:c,modDataCount:o}}},r.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},r.prototype.updateStreamModes=function(t,e){var a=this._pipelineMap.get(t.uid),n=t.getData(),s=n.count(),l=a.progressiveEnabled&&e.incrementalPrepareRender&&s>=a.threshold,o=t.get("large")&&s>=t.get("largeThreshold"),c=t.get("progressiveChunkMode")==="mod"?s:null;t.pipelineContext=a.context={progressiveRender:l,modDataCount:c,large:o}},r.prototype.restorePipelines=function(t){var e=this,a=e._pipelineMap=De();t.eachSeries(function(n){var s=n.getProgressive(),l=n.uid;a.set(l,{id:l,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:s&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),e._pipe(n,n.dataTask)})},r.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),a=this.api;B(this._allHandlers,function(n){var s=t.get(n.uid)||t.set(n.uid,{}),l="";Ea(!(n.reset&&n.overallReset),l),n.reset&&this._createSeriesStageTask(n,s,e,a),n.overallReset&&this._createOverallStageTask(n,s,e,a)},this)},r.prototype.prepareView=function(t,e,a,n){var s=t.renderTask,l=s.context;l.model=e,l.ecModel=a,l.api=n,s.__block=!t.incrementalPrepareRender,this._pipe(e,s)},r.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},r.prototype.performVisualTasks=function(t,e,a){this._performStageTasks(this._visualHandlers,t,e,a)},r.prototype._performStageTasks=function(t,e,a,n){n=n||{};var s=!1,l=this;B(t,function(c,u){if(!(n.visualType&&n.visualType!==c.visualType)){var d=l._stageTaskMap.get(c.uid),h=d.seriesTaskMap,p=d.overallTask;if(p){var g,v=p.agentStubMap;v.each(function(x){o(n,x)&&(x.dirty(),g=!0)}),g&&p.dirty(),l.updatePayload(p,a);var y=l.getPerformArgs(p,n.block);v.each(function(x){x.perform(y)}),p.perform(y)&&(s=!0)}else h&&h.each(function(x,b){o(n,x)&&x.dirty();var N=l.getPerformArgs(x,n.block);N.skip=!c.performRawSeries&&e.isSeriesFiltered(x.context.model),l.updatePayload(x,a),x.perform(N)&&(s=!0)})}});function o(c,u){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(u.__pipeline.id))}this.unfinished=s||this.unfinished},r.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(a){e=a.dataTask.perform()||e}),this.unfinished=e||this.unfinished},r.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},r.prototype.updatePayload=function(t,e){e!=="remain"&&(t.context.payload=e)},r.prototype._createSeriesStageTask=function(t,e,a,n){var s=this,l=e.seriesTaskMap,o=e.seriesTaskMap=De(),c=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?a.eachRawSeries(d):c?a.eachRawSeriesByType(c,d):u&&u(a,n).each(d);function d(h){var p=h.uid,g=o.set(p,l&&l.get(p)||Tg({plan:Lte,reset:Ite,count:Ote}));g.context={model:h,ecModel:a,api:n,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:s},s._pipe(h,g)}},r.prototype._createOverallStageTask=function(t,e,a,n){var s=this,l=e.overallTask=e.overallTask||Tg({reset:Ete});l.context={ecModel:a,api:n,overallReset:t.overallReset,scheduler:s};var o=l.agentStubMap,c=l.agentStubMap=De(),u=t.seriesType,d=t.getTargetSeries,h=!0,p=!1,g="";Ea(!t.createOnAllSeries,g),u?a.eachRawSeriesByType(u,v):d?d(a,n).each(v):(h=!1,B(a.getSeries(),v));function v(y){var x=y.uid,b=c.set(x,o&&o.get(x)||(p=!0,Tg({reset:Dte,onDirty:Rte})));b.context={model:y,overallProgress:h},b.agent=l,b.__block=h,s._pipe(y,b)}p&&l.dirty()},r.prototype._pipe=function(t,e){var a=t.uid,n=this._pipelineMap.get(a);!n.head&&(n.head=e),n.tail&&n.tail.pipe(e),n.tail=e,e.__idxInPipeline=n.count++,e.__pipeline=n},r.wrapStageHandler=function(t,e){return Le(t)&&(t={overallReset:t,seriesType:Pte(t)}),t.uid=nf("stageHandler"),e&&(t.visualType=e),t},r})();function Ete(r){r.overallReset(r.ecModel,r.api,r.payload)}function Dte(r){return r.overallProgress&&Mte}function Mte(){this.agent.dirty(),this.getDownstream().dirty()}function Rte(){this.agent&&this.agent.dirty()}function Lte(r){return r.plan?r.plan(r.model,r.ecModel,r.api,r.payload):null}function Ite(r){r.useClearVisual&&r.data.clearAllVisual();var t=r.resetDefines=Ft(r.reset(r.model,r.ecModel,r.api,r.payload));return t.length>1?pe(t,function(e,a){return YB(a)}):kte}var kte=YB(0);function YB(r){return function(t,e){var a=e.data,n=e.resetDefines[r];if(n&&n.dataEach)for(var s=t.start;s<t.end;s++)n.dataEach(a,s);else n&&n.progress&&n.progress(t,a)}}function Ote(r){return r.data.count()}function Pte(r){vy=null;try{r(Kg,WB)}catch{}return vy}var Kg={},WB={},vy;$B(Kg,HT);$B(WB,vB);Kg.eachSeriesByType=Kg.eachRawSeriesByType=function(r){vy=r};Kg.eachComponent=function(r){r.mainType==="series"&&r.subType&&(vy=r.subType)};function $B(r,t){for(var e in t.prototype)r[e]=vr}var Fe=ee.darkColor,zte=Fe.background,Ep=function(){return{axisLine:{lineStyle:{color:Fe.axisLine}},splitLine:{lineStyle:{color:Fe.axisSplitLine}},splitArea:{areaStyle:{color:[Fe.backgroundTint,Fe.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:Fe.axisMinorSplitLine}},axisLabel:{color:Fe.axisLabel},axisName:{}}},r3={label:{color:Fe.secondary},itemStyle:{borderColor:Fe.borderTint},dividerLineStyle:{color:Fe.border}},qB={darkMode:!0,color:Fe.theme,backgroundColor:zte,axisPointer:{lineStyle:{color:Fe.border},crossStyle:{color:Fe.borderShade},label:{color:Fe.tertiary}},legend:{textStyle:{color:Fe.secondary},pageTextStyle:{color:Fe.tertiary}},textStyle:{color:Fe.secondary},title:{textStyle:{color:Fe.primary},subtextStyle:{color:Fe.quaternary}},toolbox:{iconStyle:{borderColor:Fe.accent50}},tooltip:{backgroundColor:Fe.neutral20,defaultBorderColor:Fe.border,textStyle:{color:Fe.tertiary}},dataZoom:{borderColor:Fe.accent10,textStyle:{color:Fe.tertiary},brushStyle:{color:Fe.backgroundTint},handleStyle:{color:Fe.neutral00,borderColor:Fe.accent20},moveHandleStyle:{color:Fe.accent40},emphasis:{handleStyle:{borderColor:Fe.accent50}},dataBackground:{lineStyle:{color:Fe.accent30},areaStyle:{color:Fe.accent20}},selectedDataBackground:{lineStyle:{color:Fe.accent50},areaStyle:{color:Fe.accent30}}},visualMap:{textStyle:{color:Fe.secondary},handleStyle:{borderColor:Fe.neutral30}},timeline:{lineStyle:{color:Fe.accent10},label:{color:Fe.tertiary},controlStyle:{color:Fe.accent30,borderColor:Fe.accent30}},calendar:{itemStyle:{color:Fe.neutral00,borderColor:Fe.neutral20},dayLabel:{color:Fe.tertiary},monthLabel:{color:Fe.secondary},yearLabel:{color:Fe.secondary}},matrix:{x:r3,y:r3,backgroundColor:{borderColor:Fe.axisLine},body:{itemStyle:{borderColor:Fe.borderTint}}},timeAxis:Ep(),logAxis:Ep(),valueAxis:Ep(),categoryAxis:Ep(),line:{symbol:"circle"},graph:{color:Fe.theme},gauge:{title:{color:Fe.secondary},axisLine:{lineStyle:{color:[[1,Fe.neutral05]]}},axisLabel:{color:Fe.axisLabel},detail:{color:Fe.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:Fe.background}},radar:(function(){var r=Ep();return r.axisName={color:Fe.axisLabel},r.axisLine.lineStyle.color=Fe.neutral20,r})(),treemap:{breadcrumb:{itemStyle:{color:Fe.neutral20,textStyle:{color:Fe.secondary}},emphasis:{itemStyle:{color:Fe.neutral30}}}},sunburst:{itemStyle:{borderColor:Fe.background}},map:{itemStyle:{borderColor:Fe.border,areaColor:Fe.neutral10},label:{color:Fe.tertiary},emphasis:{label:{color:Fe.primary},itemStyle:{areaColor:Fe.highlight}},select:{label:{color:Fe.primary},itemStyle:{areaColor:Fe.highlight}}},geo:{itemStyle:{borderColor:Fe.border,areaColor:Fe.neutral10},emphasis:{label:{color:Fe.primary},itemStyle:{areaColor:Fe.highlight}},select:{label:{color:Fe.primary},itemStyle:{color:Fe.highlight}}}};qB.categoryAxis.splitLine.show=!1;var Bte=(function(){function r(){}return r.prototype.normalizeQuery=function(t){var e={},a={},n={};if(je(t)){var s=pi(t);e.mainType=s.main||null,e.subType=s.sub||null}else{var l=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};B(t,function(c,u){for(var d=!1,h=0;h<l.length;h++){var p=l[h],g=u.lastIndexOf(p);if(g>0&&g===u.length-p.length){var v=u.slice(0,g);v!=="data"&&(e.mainType=v,e[p.toLowerCase()]=c,d=!0)}}o.hasOwnProperty(u)&&(a[u]=c,d=!0),d||(n[u]=c)})}return{cptQuery:e,dataQuery:a,otherQuery:n}},r.prototype.filter=function(t,e){var a=this.eventInfo;if(!a)return!0;var n=a.targetEl,s=a.packedEvent,l=a.model,o=a.view;if(!l||!o)return!0;var c=e.cptQuery,u=e.dataQuery;return d(c,l,"mainType")&&d(c,l,"subType")&&d(c,l,"index","componentIndex")&&d(c,l,"name")&&d(c,l,"id")&&d(u,s,"name")&&d(u,s,"dataIndex")&&d(u,s,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(t,e.otherQuery,n,s));function d(h,p,g,v){return h[g]==null||p[v||g]===h[g]}},r.prototype.afterTrigger=function(){this.eventInfo=null},r})(),p2=["symbol","symbolSize","symbolRotate","symbolOffset"],a3=p2.concat(["symbolKeepAspect"]),Vte={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){var e=r.getData();if(r.legendIcon&&e.setVisual("legendIcon",r.legendIcon),!r.hasSymbolVisual)return;for(var a={},n={},s=!1,l=0;l<p2.length;l++){var o=p2[l],c=r.get(o);Le(c)?(s=!0,n[o]=c):a[o]=c}if(a.symbol=a.symbol||r.defaultSymbol,e.setVisual(ie({legendIcon:r.legendIcon||a.symbol,symbolKeepAspect:r.get("symbolKeepAspect")},a)),t.isSeriesFiltered(r))return;var u=gt(n);function d(h,p){for(var g=r.getRawValue(p),v=r.getDataParams(p),y=0;y<u.length;y++){var x=u[y];h.setItemVisual(p,x,n[x](g,v))}}return{dataEach:s?d:null}}},Hte={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,t){if(!r.hasSymbolVisual||t.isSeriesFiltered(r))return;var e=r.getData();function a(n,s){for(var l=n.getItemModel(s),o=0;o<a3.length;o++){var c=a3[o],u=l.getShallow(c,!0);u!=null&&n.setItemVisual(s,c,u)}}return{dataEach:e.hasItemOption?a:null}}};function WT(r,t,e){switch(e){case"color":var a=r.getItemVisual(t,"style");return a[r.getVisual("drawType")];case"opacity":return r.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getItemVisual(t,e)}}function km(r,t){switch(t){case"color":var e=r.getVisual("style");return e[r.getVisual("drawType")];case"opacity":return r.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getVisual(t)}}function XB(r,t,e,a){switch(e){case"color":var n=r.ensureUniqueItemVisual(t,"style");n[r.getVisual("drawType")]=a,r.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":r.ensureUniqueItemVisual(t,"style").opacity=a;break;case"symbol":case"symbolSize":case"liftZ":r.setItemVisual(t,e,a);break}}function ZB(r,t){function e(a,n){var s=[];return a.eachComponent({mainType:"series",subType:r,query:n},function(l){s.push(l.seriesIndex)}),s}B([[r+"ToggleSelect","toggleSelect"],[r+"Select","select"],[r+"UnSelect","unselect"]],function(a){t(a[0],function(n,s,l){n=ie({},n),l.dispatchAction(ie(n,{type:a[1],seriesIndex:e(s,n)}))})})}function Ud(r,t,e,a,n){var s=r+t;e.isSilent(s)||a.eachComponent({mainType:"series",subType:"pie"},function(l){for(var o=l.seriesIndex,c=l.option.selectedMap,u=n.selected,d=0;d<u.length;d++)if(u[d].seriesIndex===o){var h=l.getData(),p=Su(h,n.fromActionPayload);e.trigger(s,{type:s,seriesId:l.id,name:de(p)?h.getName(p[0]):h.getName(p),selected:je(c)?c:ie({},c)})}})}function Gte(r,t,e){r.on("selectchanged",function(a){var n=e.getModel();a.isFromClick?(Ud("map","selectchanged",t,n,a),Ud("pie","selectchanged",t,n,a)):a.fromAction==="select"?(Ud("map","selected",t,n,a),Ud("pie","selected",t,n,a)):a.fromAction==="unselect"&&(Ud("map","unselected",t,n,a),Ud("pie","unselected",t,n,a))})}function nu(r,t,e){for(var a;r&&!(t(r)&&(a=r,e));)r=r.__hostTarget||r.parent;return a}var Ute=Math.round(Math.random()*9),Fte=typeof Object.defineProperty=="function",Yte=(function(){function r(){this._id="__ec_inner_"+Ute++}return r.prototype.get=function(t){return this._guard(t)[this._id]},r.prototype.set=function(t,e){var a=this._guard(t);return Fte?Object.defineProperty(a,this._id,{value:e,enumerable:!1,configurable:!0}):a[this._id]=e,this},r.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},r.prototype.has=function(t){return!!this._guard(t)[this._id]},r.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},r})(),Wte=ht.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,t){var e=t.cx,a=t.cy,n=t.width/2,s=t.height/2;r.moveTo(e,a-s),r.lineTo(e+n,a+s),r.lineTo(e-n,a+s),r.closePath()}}),$te=ht.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,t){var e=t.cx,a=t.cy,n=t.width/2,s=t.height/2;r.moveTo(e,a-s),r.lineTo(e+n,a),r.lineTo(e,a+s),r.lineTo(e-n,a),r.closePath()}}),qte=ht.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,t){var e=t.x,a=t.y,n=t.width/5*3,s=Math.max(n,t.height),l=n/2,o=l*l/(s-l),c=a-s+l+o,u=Math.asin(o/l),d=Math.cos(u)*l,h=Math.sin(u),p=Math.cos(u),g=l*.6,v=l*.7;r.moveTo(e-d,c+o),r.arc(e,c,l,Math.PI-u,Math.PI*2+u),r.bezierCurveTo(e+d-h*g,c+o+p*g,e,a-v,e,a),r.bezierCurveTo(e,a-v,e-d+h*g,c+o+p*g,e-d,c+o),r.closePath()}}),Xte=ht.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,t){var e=t.height,a=t.width,n=t.x,s=t.y,l=a/3*2;r.moveTo(n,s),r.lineTo(n+l,s+e),r.lineTo(n,s+e/4*3),r.lineTo(n-l,s+e),r.lineTo(n,s),r.closePath()}}),Zte={line:Tr,rect:it,roundRect:it,square:it,circle:Ei,diamond:$te,pin:qte,arrow:Xte,triangle:Wte},Kte={line:function(r,t,e,a,n){n.x1=r,n.y1=t+a/2,n.x2=r+e,n.y2=t+a/2},rect:function(r,t,e,a,n){n.x=r,n.y=t,n.width=e,n.height=a},roundRect:function(r,t,e,a,n){n.x=r,n.y=t,n.width=e,n.height=a,n.r=Math.min(e,a)/4},square:function(r,t,e,a,n){var s=Math.min(e,a);n.x=r,n.y=t,n.width=s,n.height=s},circle:function(r,t,e,a,n){n.cx=r+e/2,n.cy=t+a/2,n.r=Math.min(e,a)/2},diamond:function(r,t,e,a,n){n.cx=r+e/2,n.cy=t+a/2,n.width=e,n.height=a},pin:function(r,t,e,a,n){n.x=r+e/2,n.y=t+a/2,n.width=e,n.height=a},arrow:function(r,t,e,a,n){n.x=r+e/2,n.y=t+a/2,n.width=e,n.height=a},triangle:function(r,t,e,a,n){n.cx=r+e/2,n.cy=t+a/2,n.width=e,n.height=a}},xy={};B(Zte,function(r,t){xy[t]=new r});var Qte=ht.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(r,t,e){var a=iy(r,t,e),n=this.shape;return n&&n.symbolType==="pin"&&t.position==="inside"&&(a.y=e.y+e.height*.4),a},buildPath:function(r,t,e){var a=t.symbolType;if(a!=="none"){var n=xy[a];n||(a="rect",n=xy[a]),Kte[a](t.x,t.y,t.width,t.height,n.shape),n.buildPath(r,n.shape,e)}}});function Jte(r,t){if(this.type!=="image"){var e=this.style;this.__isEmptyBrush?(e.stroke=r,e.fill=t||ee.color.neutral00,e.lineWidth=2):this.shape.symbolType==="line"?e.stroke=r:e.fill=r,this.markRedraw()}}function Er(r,t,e,a,n,s,l){var o=r.indexOf("empty")===0;o&&(r=r.substr(5,1).toLowerCase()+r.substr(6));var c;return r.indexOf("image://")===0?c=vT(r.slice(8),new We(t,e,a,n),l?"center":"cover"):r.indexOf("path://")===0?c=Lh(r.slice(7),{},new We(t,e,a,n),l?"center":"cover"):c=new Qte({shape:{symbolType:r,x:t,y:e,width:a,height:n}}),c.__isEmptyBrush=o,c.setColor=Jte,s&&c.setColor(s),c}function uf(r){return de(r)||(r=[+r,+r]),[r[0]||0,r[1]||0]}function Hu(r,t){if(r!=null)return de(r)||(r=[r,r]),[Ne(r[0],t[0])||0,Ne(Me(r[1],r[0]),t[1])||0]}function su(r){return isFinite(r)}function ere(r,t,e){var a=t.x==null?0:t.x,n=t.x2==null?1:t.x2,s=t.y==null?0:t.y,l=t.y2==null?0:t.y2;t.global||(a=a*e.width+e.x,n=n*e.width+e.x,s=s*e.height+e.y,l=l*e.height+e.y),a=su(a)?a:0,n=su(n)?n:1,s=su(s)?s:0,l=su(l)?l:0;var o=r.createLinearGradient(a,s,n,l);return o}function tre(r,t,e){var a=e.width,n=e.height,s=Math.min(a,n),l=t.x==null?.5:t.x,o=t.y==null?.5:t.y,c=t.r==null?.5:t.r;t.global||(l=l*a+e.x,o=o*n+e.y,c=c*s),l=su(l)?l:.5,o=su(o)?o:.5,c=c>=0&&su(c)?c:.5;var u=r.createRadialGradient(l,o,0,l,o,c);return u}function g2(r,t,e){for(var a=t.type==="radial"?tre(r,t,e):ere(r,t,e),n=t.colorStops,s=0;s<n.length;s++)a.addColorStop(n[s].offset,n[s].color);return a}function rre(r,t){if(r===t||!r&&!t)return!1;if(!r||!t||r.length!==t.length)return!0;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!0;return!1}function E0(r){return parseInt(r,10)}function mh(r,t,e){var a=["width","height"][t],n=["clientWidth","clientHeight"][t],s=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(e[a]!=null&&e[a]!=="auto")return parseFloat(e[a]);var o=document.defaultView.getComputedStyle(r);return(r[n]||E0(o[a])||E0(r.style[a]))-(E0(o[s])||0)-(E0(o[l])||0)|0}function are(r,t){return!r||r==="solid"||!(t>0)?null:r==="dashed"?[4*t,2*t]:r==="dotted"?[t]:xt(r)?[r]:de(r)?r:null}function $T(r){var t=r.style,e=t.lineDash&&t.lineWidth>0&&are(t.lineDash,t.lineWidth),a=t.lineDashOffset;if(e){var n=t.strokeNoScale&&r.getLineScale?r.getLineScale():1;n&&n!==1&&(e=pe(e,function(s){return s/n}),a/=n)}return[e,a]}var nre=new wi(!0);function yy(r){var t=r.stroke;return!(t==null||t==="none"||!(r.lineWidth>0))}function n3(r){return typeof r=="string"&&r!=="none"}function by(r){var t=r.fill;return t!=null&&t!=="none"}function s3(r,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var e=r.globalAlpha;r.globalAlpha=t.fillOpacity*t.opacity,r.fill(),r.globalAlpha=e}else r.fill()}function i3(r,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var e=r.globalAlpha;r.globalAlpha=t.strokeOpacity*t.opacity,r.stroke(),r.globalAlpha=e}else r.stroke()}function m2(r,t,e){var a=iT(t.image,t.__image,e);if(Nb(a)){var n=r.createPattern(a,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var s=new DOMMatrix;s.translateSelf(t.x||0,t.y||0),s.rotateSelf(0,0,(t.rotation||0)*mg),s.scaleSelf(t.scaleX||1,t.scaleY||1),n.setTransform(s)}return n}}function sre(r,t,e,a){var n,s=yy(e),l=by(e),o=e.strokePercent,c=o<1,u=!t.path;(!t.silent||c)&&u&&t.createPathProxy();var d=t.path||nre,h=t.__dirty;if(!a){var p=e.fill,g=e.stroke,v=l&&!!p.colorStops,y=s&&!!g.colorStops,x=l&&!!p.image,b=s&&!!g.image,N=void 0,w=void 0,S=void 0,T=void 0,A=void 0;(v||y)&&(A=t.getBoundingRect()),v&&(N=h?g2(r,p,A):t.__canvasFillGradient,t.__canvasFillGradient=N),y&&(w=h?g2(r,g,A):t.__canvasStrokeGradient,t.__canvasStrokeGradient=w),x&&(S=h||!t.__canvasFillPattern?m2(r,p,t):t.__canvasFillPattern,t.__canvasFillPattern=S),b&&(T=h||!t.__canvasStrokePattern?m2(r,g,t):t.__canvasStrokePattern,t.__canvasStrokePattern=T),v?r.fillStyle=N:x&&(S?r.fillStyle=S:l=!1),y?r.strokeStyle=w:b&&(T?r.strokeStyle=T:s=!1)}var C=t.getGlobalScale();d.setScale(C[0],C[1],t.segmentIgnoreThreshold);var M,R;r.setLineDash&&e.lineDash&&(n=$T(t),M=n[0],R=n[1]);var k=!0;(u||h&lh)&&(d.setDPR(r.dpr),c?d.setContext(null):(d.setContext(r),k=!1),d.reset(),t.buildPath(d,t.shape,a),d.toStatic(),t.pathUpdated()),k&&d.rebuildPath(r,c?o:1),M&&(r.setLineDash(M),r.lineDashOffset=R),a||(e.strokeFirst?(s&&i3(r,e),l&&s3(r,e)):(l&&s3(r,e),s&&i3(r,e))),M&&r.setLineDash([])}function ire(r,t,e){var a=t.__image=iT(e.image,t.__image,t,t.onload);if(!(!a||!Nb(a))){var n=e.x||0,s=e.y||0,l=t.getWidth(),o=t.getHeight(),c=a.width/a.height;if(l==null&&o!=null?l=o*c:o==null&&l!=null?o=l/c:l==null&&o==null&&(l=a.width,o=a.height),e.sWidth&&e.sHeight){var u=e.sx||0,d=e.sy||0;r.drawImage(a,u,d,e.sWidth,e.sHeight,n,s,l,o)}else if(e.sx&&e.sy){var u=e.sx,d=e.sy,h=l-u,p=o-d;r.drawImage(a,u,d,h,p,n,s,l,o)}else r.drawImage(a,n,s,l,o)}}function lre(r,t,e){var a,n=e.text;if(n!=null&&(n+=""),n){r.font=e.font||jl,r.textAlign=e.textAlign,r.textBaseline=e.textBaseline;var s=void 0,l=void 0;r.setLineDash&&e.lineDash&&(a=$T(t),s=a[0],l=a[1]),s&&(r.setLineDash(s),r.lineDashOffset=l),e.strokeFirst?(yy(e)&&r.strokeText(n,e.x,e.y),by(e)&&r.fillText(n,e.x,e.y)):(by(e)&&r.fillText(n,e.x,e.y),yy(e)&&r.strokeText(n,e.x,e.y)),s&&r.setLineDash([])}}var l3=["shadowBlur","shadowOffsetX","shadowOffsetY"],o3=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function KB(r,t,e,a,n){var s=!1;if(!a&&(e=e||{},t===e))return!1;if(a||t.opacity!==e.opacity){on(r,n),s=!0;var l=Math.max(Math.min(t.opacity,1),0);r.globalAlpha=isNaN(l)?fu.opacity:l}(a||t.blend!==e.blend)&&(s||(on(r,n),s=!0),r.globalCompositeOperation=t.blend||fu.blend);for(var o=0;o<l3.length;o++){var c=l3[o];(a||t[c]!==e[c])&&(s||(on(r,n),s=!0),r[c]=r.dpr*(t[c]||0))}return(a||t.shadowColor!==e.shadowColor)&&(s||(on(r,n),s=!0),r.shadowColor=t.shadowColor||fu.shadowColor),s}function c3(r,t,e,a,n){var s=Qg(t,n.inHover),l=a?null:e&&Qg(e,n.inHover)||{};if(s===l)return!1;var o=KB(r,s,l,a,n);if((a||s.fill!==l.fill)&&(o||(on(r,n),o=!0),n3(s.fill)&&(r.fillStyle=s.fill)),(a||s.stroke!==l.stroke)&&(o||(on(r,n),o=!0),n3(s.stroke)&&(r.strokeStyle=s.stroke)),(a||s.opacity!==l.opacity)&&(o||(on(r,n),o=!0),r.globalAlpha=s.opacity==null?1:s.opacity),t.hasStroke()){var c=s.lineWidth,u=c/(s.strokeNoScale&&t.getLineScale?t.getLineScale():1);r.lineWidth!==u&&(o||(on(r,n),o=!0),r.lineWidth=u)}for(var d=0;d<o3.length;d++){var h=o3[d],p=h[0];(a||s[p]!==l[p])&&(o||(on(r,n),o=!0),r[p]=s[p]||h[1])}return o}function ore(r,t,e,a,n){return KB(r,Qg(t,n.inHover),e&&Qg(e,n.inHover),a,n)}function QB(r,t){var e=t.transform,a=r.dpr||1;e?r.setTransform(a*e[0],a*e[1],a*e[2],a*e[3],a*e[4],a*e[5]):r.setTransform(a,0,0,a,0,0)}function cre(r,t,e){for(var a=!1,n=0;n<r.length;n++){var s=r[n];a=a||s.isZeroArea(),QB(t,s),t.beginPath(),s.buildPath(t,s.shape),t.clip()}e.allClipped=a}function ure(r,t){return r&&t?r[0]!==t[0]||r[1]!==t[1]||r[2]!==t[2]||r[3]!==t[3]||r[4]!==t[4]||r[5]!==t[5]:!(!r&&!t)}var u3=1,d3=2,h3=3,f3=4;function dre(r){var t=by(r),e=yy(r);return!(r.lineDash||!(+t^+e)||t&&typeof r.fill!="string"||e&&typeof r.stroke!="string"||r.strokePercent<1||r.strokeOpacity<1||r.fillOpacity<1)}function on(r,t){t.batchFill&&r.fill(),t.batchStroke&&r.stroke(),t.batchFill="",t.batchStroke=""}function Qg(r,t){return t&&r.__hoverStyle||r.style}function qT(r,t){iu(r,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function iu(r,t,e,a){var n=t.transform;if(!t.shouldBePainted(e.viewWidth,e.viewHeight,!1,!1)){t.__dirty&=~Tn,t.__isRendered=!1;return}var s=t.__clipPaths,l=e.prevElClipPaths,o=!1,c=!1;if((!l||rre(s,l))&&(l&&l.length&&(on(r,e),r.restore(),c=o=!0,e.prevElClipPaths=null,e.allClipped=!1,e.prevEl=null),s&&s.length&&(on(r,e),r.save(),cre(s,r,e),o=!0),e.prevElClipPaths=s),e.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=e.prevEl;u||(c=o=!0);var d=t instanceof ht&&t.autoBatch&&dre(t.style);o||ure(n,u.transform)?(on(r,e),QB(r,t)):d||on(r,e);var h=Qg(t,e.inHover);t instanceof ht?(e.lastDrawType!==u3&&(c=!0,e.lastDrawType=u3),c3(r,t,u,c,e),(!d||!e.batchFill&&!e.batchStroke)&&r.beginPath(),sre(r,t,h,d),d&&(e.batchFill=h.fill||"",e.batchStroke=h.stroke||"")):t instanceof Rh?(e.lastDrawType!==h3&&(c=!0,e.lastDrawType=h3),c3(r,t,u,c,e),lre(r,t,h)):t instanceof la?(e.lastDrawType!==d3&&(c=!0,e.lastDrawType=d3),ore(r,t,u,c,e),ire(r,t,h)):t.getTemporalDisplayables&&(e.lastDrawType!==f3&&(c=!0,e.lastDrawType=f3),hre(r,t,e)),d&&a&&on(r,e),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),e.prevEl=t,t.__dirty=0,t.__isRendered=!0}function hre(r,t,e){var a=t.getDisplayables(),n=t.getTemporalDisplayables();r.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:e.viewWidth,viewHeight:e.viewHeight,inHover:e.inHover},l,o;for(l=t.getCursor(),o=a.length;l<o;l++){var c=a[l];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),iu(r,c,s,l===o-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}for(var u=0,d=n.length;u<d;u++){var c=n[u];c.beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),iu(r,c,s,u===d-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}t.clearTemporalDisplayables(),t.notClear=!0,r.restore()}var oj=new Yte,p3=new Eh(100),g3=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Oh(r,t){if(r==="none")return null;var e=t.getDevicePixelRatio(),a=t.getZr(),n=a.painter.type==="svg";r.dirty&&oj.delete(r);var s=oj.get(r);if(s)return s;var l=Ge(r,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});l.backgroundColor==="none"&&(l.backgroundColor=null);var o={repeat:"repeat"};return c(o),o.rotation=l.rotation,o.scaleX=o.scaleY=n?1:1/e,oj.set(r,o),r.dirty=!1,o;function c(u){for(var d=[e],h=!0,p=0;p<g3.length;++p){var g=l[g3[p]];if(g!=null&&!de(g)&&!je(g)&&!xt(g)&&typeof g!="boolean"){h=!1;break}d.push(g)}var v;if(h){v=d.join(",")+(n?"-svg":"");var y=p3.get(v);y&&(n?u.svgElement=y:u.image=y)}var x=e9(l.dashArrayX),b=fre(l.dashArrayY),N=JB(l.symbol),w=pre(x),S=t9(b),T=!n&&pn.createCanvas(),A=n&&{tag:"g",attrs:{},key:"dcl",children:[]},C=R(),M;T&&(T.width=C.width*e,T.height=C.height*e,M=T.getContext("2d")),k(),h&&p3.put(v,T||A),u.image=T,u.svgElement=A,u.svgWidth=C.width,u.svgHeight=C.height;function R(){for(var L=1,O=0,z=w.length;O<z;++O)L=MR(L,w[O]);for(var U=1,O=0,z=N.length;O<z;++O)U=MR(U,N[O].length);L*=U;var H=S*w.length*N.length;return{width:Math.max(1,Math.min(L,l.maxTileWidth)),height:Math.max(1,Math.min(H,l.maxTileHeight))}}function k(){M&&(M.clearRect(0,0,T.width,T.height),l.backgroundColor&&(M.fillStyle=l.backgroundColor,M.fillRect(0,0,T.width,T.height)));for(var L=0,O=0;O<b.length;++O)L+=b[O];if(L<=0)return;for(var z=-S,U=0,H=0,P=0;z<C.height;){if(U%2===0){for(var F=H/2%N.length,Y=0,X=0,q=0;Y<C.width*2;){for(var G=0,O=0;O<x[P].length;++O)G+=x[P][O];if(G<=0)break;if(X%2===0){var $=(1-l.symbolSize)*.5,Z=Y+x[P][X]*$,te=z+b[U]*$,me=x[P][X]*l.symbolSize,Ce=b[U]*l.symbolSize,Ve=q/2%N[F].length;Ee(Z,te,me,Ce,N[F][Ve])}Y+=x[P][X],++q,++X,X===x[P].length&&(X=0)}++P,P===x.length&&(P=0)}z+=b[U],++H,++U,U===b.length&&(U=0)}function Ee(be,He,Se,Ie,ft){var le=n?1:e,ze=Er(ft,be*le,He*le,Se*le,Ie*le,l.color,l.symbolKeepAspect);if(n){var $e=a.painter.renderOneToVNode(ze);$e&&A.children.push($e)}else qT(M,ze)}}}}function JB(r){if(!r||r.length===0)return[["rect"]];if(je(r))return[[r]];for(var t=!0,e=0;e<r.length;++e)if(!je(r[e])){t=!1;break}if(t)return JB([r]);for(var a=[],e=0;e<r.length;++e)je(r[e])?a.push([r[e]]):a.push(r[e]);return a}function e9(r){if(!r||r.length===0)return[[0,0]];if(xt(r)){var t=Math.ceil(r);return[[t,t]]}for(var e=!0,a=0;a<r.length;++a)if(!xt(r[a])){e=!1;break}if(e)return e9([r]);for(var n=[],a=0;a<r.length;++a)if(xt(r[a])){var t=Math.ceil(r[a]);n.push([t,t])}else{var t=pe(r[a],function(o){return Math.ceil(o)});t.length%2===1?n.push(t.concat(t)):n.push(t)}return n}function fre(r){if(!r||typeof r=="object"&&r.length===0)return[0,0];if(xt(r)){var t=Math.ceil(r);return[t,t]}var e=pe(r,function(a){return Math.ceil(a)});return r.length%2?e.concat(e):e}function pre(r){return pe(r,function(t){return t9(t)})}function t9(r){for(var t=0,e=0;e<r.length;++e)t+=r[e];return r.length%2===1?t*2:t}function gre(r,t){r.eachRawSeries(function(e){if(!r.isSeriesFiltered(e)){var a=e.getData();a.hasItemVisual()&&a.each(function(l){var o=a.getItemVisual(l,"decal");if(o){var c=a.ensureUniqueItemVisual(l,"style");c.decal=Oh(o,t)}});var n=a.getVisual("decal");if(n){var s=a.getVisual("style");s.decal=Oh(n,t)}}})}var Cs=new gs,r9={};function mre(r,t){r9[r]=t}function a9(r){return r9[r]}var n9={};function s9(r,t){n9[r]=t}function vre(r){return n9[r]}var xre="6.0.0",yre={zrender:"6.0.0"},bre=1,_re=800,Nre=900,jre=1e3,wre=2e3,Sre=5e3,i9=1e3,Cre=1100,XT=2e3,l9=3e3,Tre=4e3,Pb=4500,Are=4600,Ere=5e3,Dre=6e3,o9=7e3,c9={PROCESSOR:{FILTER:jre,SERIES_FILTER:_re,STATISTIC:Sre},VISUAL:{LAYOUT:i9,PROGRESSIVE_LAYOUT:Cre,GLOBAL:XT,CHART:l9,POST_CHART_LAYOUT:Are,COMPONENT:Tre,BRUSH:Ere,CHART_ITEM:Pb,ARIA:Dre,DECAL:o9}},Yr="__flagInMainProcess",D0="__mainProcessVersion",ha="__pendingUpdate",cj="__needsUpdateStatus",m3=/^[a-zA-Z0-9_]+$/,uj="__connectUpdateStatus",v3=0,Mre=1,Rre=2;function u9(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.isDisposed()){this.id;return}return h9(this,r,t)}}function d9(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h9(this,r,t)}}function h9(r,t,e){return e[0]=e[0]&&e[0].toLowerCase(),gs.prototype[t].apply(r,e)}var f9=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(gs),p9=f9.prototype;p9.on=d9("on");p9.off=d9("off");var Pc,dj,M0,Ji,R0,hj,fj,Fd,Yd,x3,y3,pj,b3,L0,_3,g9,qn,N3,Wd,_y=(function(r){re(t,r);function t(e,a,n){var s=r.call(this,new Bte)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],n=n||{},s._dom=e;var l="canvas",o="auto",c=!1;s[D0]=1,n.ssr&&Hz(function(p){var g=Xe(p),v=g.dataIndex;if(v!=null){var y=De();return y.set("series_index",g.seriesIndex),y.set("data_index",v),g.ssrType&&y.set("ssr_type",g.ssrType),y}});var u=s._zr=zS(e,{renderer:n.renderer||l,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:Me(n.useDirtyRect,c),useCoarsePointer:Me(n.useCoarsePointer,o),pointerSize:n.pointerSize});s._ssr=n.ssr,s._throttledZrFlush=Ob(we(u.flush,u),17),s._updateTheme(a),s._locale=zJ(n.locale||Y7),s._coordSysMgr=new lf;var d=s._api=_3(s);function h(p,g){return p.__prio-g.__prio}return Nx(jy,h),Nx(y2,h),s._scheduler=new FB(s,d,y2,jy),s._messageCenter=new f9,s._initEvents(),s.resize=we(s.resize,s),u.animation.on("frame",s._onframe,s),x3(u,s),y3(u,s),Og(s),s}return t.prototype._onframe=function(){if(!this._disposed){N3(this);var e=this._scheduler;if(this[ha]){var a=this[ha].silent;this[Yr]=!0,Wd(this);try{Pc(this),Ji.update.call(this,null,this[ha].updateParams)}catch(c){throw this[Yr]=!1,this[ha]=null,c}this._zr.flush(),this[Yr]=!1,this[ha]=null,Fd.call(this,a),Yd.call(this,a)}else if(e.unfinished){var n=bre,s=this._model,l=this._api;e.unfinished=!1;do{var o=+new Date;e.performSeriesTasks(s),e.performDataProcessorTasks(s),hj(this,s),e.performVisualTasks(s),L0(this,this._model,l,"remain",{}),n-=+new Date-o}while(n>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,a,n){if(!this[Yr]){if(this._disposed){this.id;return}var s,l,o;if(Ue(a)&&(n=a.lazyUpdate,s=a.silent,l=a.replaceMerge,o=a.transition,a=a.notMerge),this[Yr]=!0,Wd(this),!this._model||a){var c=new _ee(this._api),u=this._theme,d=this._model=new HT;d.scheduler=this._scheduler,d.ssr=this._ssr,d.init(null,null,null,u,this._locale,c)}this._model.setOption(e,{replaceMerge:l},b2);var h={seriesTransition:o,optionChanged:!0};if(n)this[ha]={silent:s,updateParams:h},this[Yr]=!1,this.getZr().wakeUp();else{try{Pc(this),Ji.update.call(this,null,h)}catch(p){throw this[ha]=null,this[Yr]=!1,p}this._ssr||this._zr.flush(),this[ha]=null,this[Yr]=!1,Fd.call(this,s),Yd.call(this,s)}}},t.prototype.setTheme=function(e,a){if(!this[Yr]){if(this._disposed){this.id;return}var n=this._model;if(n){var s=a&&a.silent,l=null;this[ha]&&(s==null&&(s=this[ha].silent),l=this[ha].updateParams,this[ha]=null),this[Yr]=!0,Wd(this);try{this._updateTheme(e),n.setTheme(this._theme),Pc(this),Ji.update.call(this,{type:"setTheme"},l)}catch(o){throw this[Yr]=!1,o}this[Yr]=!1,Fd.call(this,s),Yd.call(this,s)}}},t.prototype._updateTheme=function(e){je(e)&&(e=m9[e]),e&&(e=Oe(e),e&&yB(e,!0),this._theme=e)},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||pt.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){e=e||{};var a=this._zr.painter;return a.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){e=e||{};var a=this._zr.painter;return a.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){var e=this._zr,a=e.storage.getDisplayList();return B(a,function(n){n.stopAnimation(null,!0)}),e.painter.toDataURL()},t.prototype.getDataURL=function(e){if(this._disposed){this.id;return}e=e||{};var a=e.excludeComponents,n=this._model,s=[],l=this;B(a,function(c){n.eachComponent({mainType:c},function(u){var d=l._componentsMap[u.__viewId];d.group.ignore||(s.push(d),d.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return B(s,function(c){c.group.ignore=!1}),o},t.prototype.getConnectedDataURL=function(e){if(this._disposed){this.id;return}var a=e.type==="svg",n=this.group,s=Math.min,l=Math.max,o=1/0;if(wy[n]){var c=o,u=o,d=-o,h=-o,p=[],g=e&&e.pixelRatio||this.getDevicePixelRatio();B(mu,function(w,S){if(w.group===n){var T=a?w.getZr().painter.getSvgDom().innerHTML:w.renderToCanvas(Oe(e)),A=w.getDom().getBoundingClientRect();c=s(A.left,c),u=s(A.top,u),d=l(A.right,d),h=l(A.bottom,h),p.push({dom:T,left:A.left,top:A.top})}}),c*=g,u*=g,d*=g,h*=g;var v=d-c,y=h-u,x=pn.createCanvas(),b=zS(x,{renderer:a?"svg":"canvas"});if(b.resize({width:v,height:y}),a){var N="";return B(p,function(w){var S=w.left-c,T=w.top-u;N+='<g transform="translate('+S+","+T+')">'+w.dom+"</g>"}),b.painter.getSvgRoot().innerHTML=N,e.connectedBackgroundColor&&b.painter.setBackgroundColor(e.connectedBackgroundColor),b.refreshImmediately(),b.painter.toDataURL()}else return e.connectedBackgroundColor&&b.add(new it({shape:{x:0,y:0,width:v,height:y},style:{fill:e.connectedBackgroundColor}})),B(p,function(w){var S=new la({style:{x:w.left*g-c,y:w.top*g-u,image:w.dom}});b.add(S)}),b.refreshImmediately(),x.toDataURL("image/"+(e&&e.type||"png"))}else return this.getDataURL(e)},t.prototype.convertToPixel=function(e,a,n){return R0(this,"convertToPixel",e,a,n)},t.prototype.convertToLayout=function(e,a,n){return R0(this,"convertToLayout",e,a,n)},t.prototype.convertFromPixel=function(e,a,n){return R0(this,"convertFromPixel",e,a,n)},t.prototype.containPixel=function(e,a){if(this._disposed){this.id;return}var n=this._model,s,l=Nh(n,e);return B(l,function(o,c){c.indexOf("Models")>=0&&B(o,function(u){var d=u.coordinateSystem;if(d&&d.containPoint)s=s||!!d.containPoint(a);else if(c==="seriesModels"){var h=this._chartsMap[u.__viewId];h&&h.containPoint&&(s=s||h.containPoint(a,u))}},this)},this),!!s},t.prototype.getVisual=function(e,a){var n=this._model,s=Nh(n,e,{defaultMainType:"series"}),l=s.seriesModel,o=l.getData(),c=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?o.indexOfRawIndex(s.dataIndex):null;return c!=null?WT(o,c,a):km(o,a)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e=this;B(Lre,function(n){var s=function(l){var o=e.getModel(),c=l.target,u,d=n==="globalout";if(d?u={}:c&&nu(c,function(y){var x=Xe(y);if(x&&x.dataIndex!=null){var b=x.dataModel||o.getSeriesByIndex(x.seriesIndex);return u=b&&b.getDataParams(x.dataIndex,x.dataType,c)||{},!0}else if(x.eventData)return u=ie({},x.eventData),!0},!0),u){var h=u.componentType,p=u.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",p=u.seriesIndex);var g=h&&p!=null&&o.getComponent(h,p),v=g&&e[g.mainType==="series"?"_chartsMap":"_componentsMap"][g.__viewId];u.event=l,u.type=n,e._$eventProcessor.eventInfo={targetEl:c,packedEvent:u,model:g,view:v},e.trigger(n,u)}};s.zrEventfulCallAtLast=!0,e._zr.on(n,s,e)});var a=this._messageCenter;B(x2,function(n,s){a.on(s,function(l){e.trigger(s,l)})}),Gte(a,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var e=this.getDom();e&&Jz(this.getDom(),KT,"");var a=this,n=a._api,s=a._model;B(a._componentsViews,function(l){l.dispose(s,n)}),B(a._chartsViews,function(l){l.dispose(s,n)}),a._zr.dispose(),a._dom=a._model=a._chartsMap=a._componentsMap=a._chartsViews=a._componentsViews=a._scheduler=a._api=a._zr=a._throttledZrFlush=a._theme=a._coordSysMgr=a._messageCenter=null,delete mu[a.id]},t.prototype.resize=function(e){if(!this[Yr]){if(this._disposed){this.id;return}this._zr.resize(e);var a=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!a){var n=a.resetOption("media"),s=e&&e.silent;this[ha]&&(s==null&&(s=this[ha].silent),n=!0,this[ha]=null),this[Yr]=!0,Wd(this);try{n&&Pc(this),Ji.update.call(this,{type:"resize",animation:ie({duration:0},e&&e.animation)})}catch(l){throw this[Yr]=!1,l}this[Yr]=!1,Fd.call(this,s),Yd.call(this,s)}}},t.prototype.showLoading=function(e,a){if(this._disposed){this.id;return}if(Ue(e)&&(a=e,e=""),e=e||"default",this.hideLoading(),!!_2[e]){var n=_2[e](this._api,a),s=this._zr;this._loadingFX=n,s.add(n)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(e){var a=ie({},e);return a.type=v2[e.type],a},t.prototype.dispatchAction=function(e,a){if(this._disposed){this.id;return}if(Ue(a)||(a={silent:!!a}),!!Ny[e.type]&&this._model){if(this[Yr]){this._pendingActions.push(e);return}var n=a.silent;fj.call(this,e,n);var s=a.flush;s?this._zr.flush():s!==!1&&pt.browser.weChat&&this._throttledZrFlush(),Fd.call(this,n),Yd.call(this,n)}},t.prototype.updateLabelLayout=function(){Cs.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed){this.id;return}var a=e.seriesIndex,n=this.getModel(),s=n.getSeriesByIndex(a);s.appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=(function(){Pc=function(h){var p=h._scheduler;p.restorePipelines(h._model),p.prepareStageTasks(),dj(h,!0),dj(h,!1),p.plan()},dj=function(h,p){for(var g=h._model,v=h._scheduler,y=p?h._componentsViews:h._chartsViews,x=p?h._componentsMap:h._chartsMap,b=h._zr,N=h._api,w=0;w<y.length;w++)y[w].__alive=!1;p?g.eachComponent(function(A,C){A!=="series"&&S(C)}):g.eachSeries(S);function S(A){var C=A.__requireNewView;A.__requireNewView=!1;var M="_ec_"+A.id+"_"+A.type,R=!C&&x[M];if(!R){var k=pi(A.type),L=p?Yt.getClass(k.main,k.sub):Pt.getClass(k.sub);R=new L,R.init(g,N),x[M]=R,y.push(R),b.add(R.group)}A.__viewId=R.__id=M,R.__alive=!0,R.__model=A,R.group.__ecComponentInfo={mainType:A.mainType,index:A.componentIndex},!p&&v.prepareView(R,A,g,N)}for(var w=0;w<y.length;){var T=y[w];T.__alive?w++:(!p&&T.renderTask.dispose(),b.remove(T.group),T.dispose(g,N),y.splice(w,1),x[T.__id]===T&&delete x[T.__id],T.__id=T.group.__ecComponentInfo=null)}},M0=function(h,p,g,v,y){var x=h._model;if(x.setUpdatePayload(g),!v){B([].concat(h._componentsViews).concat(h._chartsViews),T);return}var b={};b[v+"Id"]=g[v+"Id"],b[v+"Index"]=g[v+"Index"],b[v+"Name"]=g[v+"Name"];var N={mainType:v,query:b};y&&(N.subType=y);var w=g.excludeSeriesId,S;w!=null&&(S=De(),B(Ft(w),function(A){var C=$r(A,null);C!=null&&S.set(C,!0)})),x&&x.eachComponent(N,function(A){var C=S&&S.get(A.id)!=null;if(!C)if(iL(g))if(A instanceof zt)g.type===pu&&!g.notBlur&&!A.get(["emphasis","disabled"])&&VQ(A,g,h._api);else{var M=fT(A.mainType,A.componentIndex,g.name,h._api),R=M.focusSelf,k=M.dispatchers;g.type===pu&&R&&!g.notBlur&&ZS(A.mainType,A.componentIndex,h._api),k&&B(k,function(L){g.type===pu?Sl(L):Cl(L)})}else QS(g)&&A instanceof zt&&(UQ(A,g,h._api),nL(A),qn(h))},h),x&&x.eachComponent(N,function(A){var C=S&&S.get(A.id)!=null;C||T(h[v==="series"?"_chartsMap":"_componentsMap"][A.__viewId])},h);function T(A){A&&A.__alive&&A[p]&&A[p](A.__model,x,h._api,g)}},Ji={prepareAndUpdate:function(h){Pc(this),Ji.update.call(this,h,h&&{optionChanged:h.newOption!=null})},update:function(h,p){var g=this._model,v=this._api,y=this._zr,x=this._coordSysMgr,b=this._scheduler;if(g){g.setUpdatePayload(h),b.restoreData(g,h),b.performSeriesTasks(g),x.create(g,v),b.performDataProcessorTasks(g,h),hj(this,g),x.update(g,v),a(g),b.performVisualTasks(g,h);var N=g.get("backgroundColor")||"transparent";y.setBackgroundColor(N);var w=g.get("darkMode");w!=null&&w!=="auto"&&y.setDarkMode(w),pj(this,g,v,h,p),Cs.trigger("afterupdate",g,v)}},updateTransform:function(h){var p=this,g=this._model,v=this._api;if(g){g.setUpdatePayload(h);var y=[];g.eachComponent(function(b,N){if(b!=="series"){var w=p.getViewOfComponentModel(N);if(w&&w.__alive)if(w.updateTransform){var S=w.updateTransform(N,g,v,h);S&&S.update&&y.push(w)}else y.push(w)}});var x=De();g.eachSeries(function(b){var N=p._chartsMap[b.__viewId];if(N.updateTransform){var w=N.updateTransform(b,g,v,h);w&&w.update&&x.set(b.uid,1)}else x.set(b.uid,1)}),a(g),this._scheduler.performVisualTasks(g,h,{setDirty:!0,dirtyMap:x}),L0(this,g,v,h,{},x),Cs.trigger("afterupdate",g,v)}},updateView:function(h){var p=this._model;p&&(p.setUpdatePayload(h),Pt.markUpdateMethod(h,"updateView"),a(p),this._scheduler.performVisualTasks(p,h,{setDirty:!0}),pj(this,p,this._api,h,{}),Cs.trigger("afterupdate",p,this._api))},updateVisual:function(h){var p=this,g=this._model;g&&(g.setUpdatePayload(h),g.eachSeries(function(v){v.getData().clearAllVisual()}),Pt.markUpdateMethod(h,"updateVisual"),a(g),this._scheduler.performVisualTasks(g,h,{visualType:"visual",setDirty:!0}),g.eachComponent(function(v,y){if(v!=="series"){var x=p.getViewOfComponentModel(y);x&&x.__alive&&x.updateVisual(y,g,p._api,h)}}),g.eachSeries(function(v){var y=p._chartsMap[v.__viewId];y.updateVisual(v,g,p._api,h)}),Cs.trigger("afterupdate",g,this._api))},updateLayout:function(h){Ji.update.call(this,h)}};function e(h,p,g,v,y){if(h._disposed){h.id;return}for(var x=h._model,b=h._coordSysMgr.getCoordinateSystems(),N,w=Nh(x,g),S=0;S<b.length;S++){var T=b[S];if(T[p]&&(N=T[p](x,w,v,y))!=null)return N}}R0=e,hj=function(h,p){var g=h._chartsMap,v=h._scheduler;p.eachSeries(function(y){v.updateStreamModes(y,g[y.__viewId])})},fj=function(h,p){var g=this,v=this.getModel(),y=h.type,x=h.escapeConnect,b=Ny[y],N=(b.update||"update").split(":"),w=N.pop(),S=N[0]!=null&&pi(N[0]);this[Yr]=!0,Wd(this);var T=[h],A=!1;h.batch&&(A=!0,T=pe(h.batch,function(P){return P=Ge(ie({},P),h),P.batch=null,P}));var C=[],M,R=[],k=b.nonRefinedEventType,L=QS(h),O=iL(h);if(O&&_7(this._api),B(T,function(P){var F=b.action(P,v,g._api);if(b.refineEvent?R.push(F):M=F,M=M||ie({},P),M.type=k,C.push(M),O){var Y=nT(h),X=Y.queryOptionMap,q=Y.mainTypeSpecified,G=q?X.keys()[0]:"series";M0(g,w,P,G),qn(g)}else L?(M0(g,w,P,"series"),qn(g)):S&&M0(g,w,P,S.main,S.sub)}),w!=="none"&&!O&&!L&&!S)try{this[ha]?(Pc(this),Ji.update.call(this,h),this[ha]=null):Ji[w].call(this,h)}catch(P){throw this[Yr]=!1,P}if(A?M={type:k,escapeConnect:x,batch:C}:M=C[0],this[Yr]=!1,!p){var z=void 0;if(b.refineEvent){var U=b.refineEvent(R,h,v,this._api).eventContent;Ea(Ue(U)),z=Ge({type:b.refinedEventType},U),z.fromAction=h.type,z.fromActionPayload=h,z.escapeConnect=!0}var H=this._messageCenter;H.trigger(M.type,M),z&&H.trigger(z.type,z)}},Fd=function(h){for(var p=this._pendingActions;p.length;){var g=p.shift();fj.call(this,g,h)}},Yd=function(h){!h&&this.trigger("updated")},x3=function(h,p){h.on("rendered",function(g){p.trigger("rendered",g),h.animation.isFinished()&&!p[ha]&&!p._scheduler.unfinished&&!p._pendingActions.length&&p.trigger("finished")})},y3=function(h,p){h.on("mouseover",function(g){var v=g.target,y=nu(v,Yg);y&&(HQ(y,g,p._api),qn(p))}).on("mouseout",function(g){var v=g.target,y=nu(v,Yg);y&&(GQ(y,g,p._api),qn(p))}).on("click",function(g){var v=g.target,y=nu(v,function(N){return Xe(N).dataIndex!=null},!0);if(y){var x=y.selected?"unselect":"select",b=Xe(y);p._api.dispatchAction({type:x,dataType:b.dataType,dataIndexInside:b.dataIndex,seriesIndex:b.seriesIndex,isFromClick:!0})}})};function a(h){h.clearColorPalette(),h.eachSeries(function(p){p.clearColorPalette()})}function n(h){var p=[],g=[],v=!1;if(h.eachComponent(function(N,w){var S=w.get("zlevel")||0,T=w.get("z")||0,A=w.getZLevelKey();v=v||!!A,(N==="series"?g:p).push({zlevel:S,z:T,idx:w.componentIndex,type:N,key:A})}),v){var y=p.concat(g),x,b;Nx(y,function(N,w){return N.zlevel===w.zlevel?N.z-w.z:N.zlevel-w.zlevel}),B(y,function(N){var w=h.getComponent(N.type,N.idx),S=N.zlevel,T=N.key;x!=null&&(S=Math.max(x,S)),T?(S===x&&T!==b&&S++,b=T):b&&(S===x&&S++,b=""),x=S,w.setZLevel(S)})}}pj=function(h,p,g,v,y){n(p),b3(h,p,g,v,y),B(h._chartsViews,function(x){x.__alive=!1}),L0(h,p,g,v,y),B(h._chartsViews,function(x){x.__alive||x.remove(p,g)})},b3=function(h,p,g,v,y,x){B(x||h._componentsViews,function(b){var N=b.__model;u(N,b),b.render(N,p,g,v),c(N,b),d(N,b)})},L0=function(h,p,g,v,y,x){var b=h._scheduler;y=ie(y||{},{updatedSeries:p.getSeries()}),Cs.trigger("series:beforeupdate",p,g,y);var N=!1;p.eachSeries(function(w){var S=h._chartsMap[w.__viewId];S.__alive=!0;var T=S.renderTask;b.updatePayload(T,v),u(w,S),x&&x.get(w.uid)&&T.dirty(),T.perform(b.getPerformArgs(T))&&(N=!0),S.group.silent=!!w.get("silent"),o(w,S),nL(w)}),b.unfinished=N||b.unfinished,Cs.trigger("series:layoutlabels",p,g,y),Cs.trigger("series:transition",p,g,y),p.eachSeries(function(w){var S=h._chartsMap[w.__viewId];c(w,S),d(w,S)}),l(h,p),Cs.trigger("series:afterupdate",p,g,y)},qn=function(h){h[cj]=!0,h.getZr().wakeUp()},Wd=function(h){h[D0]=(h[D0]+1)%1e3},N3=function(h){h[cj]&&(h.getZr().storage.traverse(function(p){jh(p)||s(p)}),h[cj]=!1)};function s(h){for(var p=[],g=h.currentStates,v=0;v<g.length;v++){var y=g[v];y==="emphasis"||y==="blur"||y==="select"||p.push(y)}h.selected&&h.states.select&&p.push("select"),h.hoverState===Tb&&h.states.emphasis?p.push("emphasis"):h.hoverState===Am&&h.states.blur&&p.push("blur"),h.useStates(p)}function l(h,p){var g=h._zr,v=g.storage,y=0;v.traverse(function(x){x.isGroup||y++}),y>p.get("hoverLayerThreshold")&&!pt.node&&!pt.worker&&p.eachSeries(function(x){if(!x.preventUsingHoverLayer){var b=h._chartsMap[x.__viewId];b.__alive&&b.eachRendered(function(N){N.states.emphasis&&(N.states.emphasis.hoverLayer=!0)})}})}function o(h,p){var g=h.get("blendMode")||null;p.eachRendered(function(v){v.isGroup||(v.style.blend=g)})}function c(h,p){if(!h.preventAutoZ){var g=Eu(h);p.eachRendered(function(v){return Db(v,g.z,g.zlevel),!0})}}function u(h,p){p.eachRendered(function(g){if(!jh(g)){var v=g.getTextContent(),y=g.getTextGuideLine();g.stateTransition&&(g.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),g.hasState()?(g.prevStates=g.currentStates,g.clearStates()):g.prevStates&&(g.prevStates=null)}})}function d(h,p){var g=h.getModel("stateAnimation"),v=h.isAnimationEnabled(),y=g.get("duration"),x=y>0?{duration:y,delay:g.get("delay"),easing:g.get("easing")}:null;p.eachRendered(function(b){if(b.states&&b.states.emphasis){if(jh(b))return;if(b instanceof ht&&XQ(b),b.__dirty){var N=b.prevStates;N&&b.useStates(N)}if(v){b.stateTransition=x;var w=b.getTextContent(),S=b.getTextGuideLine();w&&(w.stateTransition=x),S&&(S.stateTransition=x)}b.__dirty&&s(b)}})}_3=function(h){return new((function(p){re(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},g.prototype.getComponentByElement=function(v){for(;v;){var y=v.__ecComponentInfo;if(y!=null)return h._model.getComponent(y.mainType,y.index);v=v.parent}},g.prototype.enterEmphasis=function(v,y){Sl(v,y),qn(h)},g.prototype.leaveEmphasis=function(v,y){Cl(v,y),qn(h)},g.prototype.enterBlur=function(v){v7(v),qn(h)},g.prototype.leaveBlur=function(v){hT(v),qn(h)},g.prototype.enterSelect=function(v){x7(v),qn(h)},g.prototype.leaveSelect=function(v){y7(v),qn(h)},g.prototype.getModel=function(){return h.getModel()},g.prototype.getViewOfComponentModel=function(v){return h.getViewOfComponentModel(v)},g.prototype.getViewOfSeriesModel=function(v){return h.getViewOfSeriesModel(v)},g.prototype.getMainProcessVersion=function(){return h[D0]},g})(vB))(h)},g9=function(h){function p(g,v){for(var y=0;y<g.length;y++){var x=g[y];x[uj]=v}}B(v2,function(g,v){h._messageCenter.on(v,function(y){if(wy[h.group]&&h[uj]!==v3){if(y&&y.escapeConnect)return;var x=h.makeActionFromEvent(y),b=[];B(mu,function(N){N!==h&&N.group===h.group&&b.push(N)}),p(b,v3),B(b,function(N){N[uj]!==Mre&&N.dispatchAction(x)}),p(b,Rre)}})})}})(),t})(gs),ZT=_y.prototype;ZT.on=u9("on");ZT.off=u9("off");ZT.one=function(r,t,e){var a=this;function n(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];t&&t.apply&&t.apply(this,s),a.off(r,n)}this.on.call(this,r,n,e)};var Lre=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Ny={},v2={},x2={},y2=[],b2=[],jy=[],m9={},_2={},mu={},wy={},Ire=+new Date-0,kre=+new Date-0,KT="_echarts_instance_";function Ore(r,t,e){var a=!(e&&e.ssr);if(a){var n=QT(r);if(n)return n}var s=new _y(r,t,e);return s.id="ec_"+Ire++,mu[s.id]=s,a&&Jz(r,KT,s.id),g9(s),Cs.trigger("afterinit",s),s}function Pre(r){if(de(r)){var t=r;r=null,B(t,function(e){e.group!=null&&(r=e.group)}),r=r||"g_"+kre++,B(t,function(e){e.group=r})}return wy[r]=!0,r}function v9(r){wy[r]=!1}var zre=v9;function Bre(r){je(r)?r=mu[r]:r instanceof _y||(r=QT(r)),r instanceof _y&&!r.isDisposed()&&r.dispose()}function QT(r){return mu[OK(r,KT)]}function Vre(r){return mu[r]}function JT(r,t){m9[r]=t}function eA(r){tt(b2,r)<0&&b2.push(r)}function tA(r,t){rA(y2,r,t,wre)}function x9(r){zb("afterinit",r)}function y9(r){zb("afterupdate",r)}function zb(r,t){Cs.on(r,t)}function Ys(r,t,e){var a,n,s,l,o;Le(t)&&(e=t,t=""),Ue(r)?(a=r.type,n=r.event,l=r.update,o=r.publishNonRefinedEvent,e||(e=r.action),s=r.refineEvent):(a=r,n=t);function c(d){return d.toLowerCase()}n=c(n||a);var u=s?c(a):n;Ny[a]||(Ea(m3.test(a)&&m3.test(n)),s&&Ea(n!==a),Ny[a]={actionType:a,refinedEventType:n,nonRefinedEventType:u,update:l,action:e,refineEvent:s},x2[n]=1,s&&o&&(x2[u]=1),v2[u]=a)}function b9(r,t){lf.register(r,t)}function Hre(r){var t=lf.get(r);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()}function Gre(r,t){s9(r,t)}function _9(r,t){rA(jy,r,t,i9,"layout")}function qo(r,t){rA(jy,r,t,l9,"visual")}var j3=[];function rA(r,t,e,a,n){if((Le(t)||Ue(t))&&(e=t,t=a),!(tt(j3,e)>=0)){j3.push(e);var s=FB.wrapStageHandler(e,n);s.__prio=t,s.__raw=e,r.push(s)}}function aA(r,t){_2[r]=t}function Ure(r){nz({createCanvas:r})}function N9(r,t,e){var a=a9("registerMap");a&&a(r,t,e)}function Fre(r){var t=a9("getMap");return t&&t(r)}var j9=Jee;qo(XT,Ste);qo(Pb,Cte);qo(Pb,Tte);qo(XT,Vte);qo(Pb,Hte);qo(o9,gre);eA(yB);tA(Nre,Lee);aA("default",Ate);Ys({type:pu,event:pu,update:pu},vr);Ys({type:Dx,event:Dx,update:Dx},vr);Ys({type:cy,event:uT,update:cy,action:vr,refineEvent:nA,publishNonRefinedEvent:!0});Ys({type:qS,event:uT,update:qS,action:vr,refineEvent:nA,publishNonRefinedEvent:!0});Ys({type:uy,event:uT,update:uy,action:vr,refineEvent:nA,publishNonRefinedEvent:!0});function nA(r,t,e,a){return{eventContent:{selected:FQ(e),isFromClick:t.isFromClick||!1}}}JT("default",{});JT("dark",qB);var Yre={},w3=[],Wre={registerPreprocessor:eA,registerProcessor:tA,registerPostInit:x9,registerPostUpdate:y9,registerUpdateLifecycle:zb,registerAction:Ys,registerCoordinateSystem:b9,registerLayout:_9,registerVisual:qo,registerTransform:j9,registerLoading:aA,registerMap:N9,registerImpl:mre,PRIORITY:c9,ComponentModel:ct,ComponentView:Yt,SeriesModel:zt,ChartView:Pt,registerComponentModel:function(r){ct.registerClass(r)},registerComponentView:function(r){Yt.registerClass(r)},registerSeriesModel:function(r){zt.registerClass(r)},registerChartView:function(r){Pt.registerClass(r)},registerCustomSeries:function(r,t){s9(r,t)},registerSubTypeDefaulter:function(r,t){ct.registerSubTypeDefaulter(r,t)},registerPainter:function(r,t){Bz(r,t)}};function st(r){if(de(r)){B(r,function(t){st(t)});return}tt(w3,r)>=0||(w3.push(r),Le(r)&&(r={install:r}),r.install(Wre))}function Dp(r){return r==null?0:r.length||1}function S3(r){return r}var Tl=(function(){function r(t,e,a,n,s,l){this._old=t,this._new=e,this._oldKeyGetter=a||S3,this._newKeyGetter=n||S3,this.context=s,this._diffModeMultiple=l==="multiple"}return r.prototype.add=function(t){return this._add=t,this},r.prototype.update=function(t){return this._update=t,this},r.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},r.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},r.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},r.prototype.remove=function(t){return this._remove=t,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var t=this._old,e=this._new,a={},n=new Array(t.length),s=new Array(e.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(e,a,s,"_newKeyGetter");for(var l=0;l<t.length;l++){var o=n[l],c=a[o],u=Dp(c);if(u>1){var d=c.shift();c.length===1&&(a[o]=c[0]),this._update&&this._update(d,l)}else u===1?(a[o]=null,this._update&&this._update(c,l)):this._remove&&this._remove(l)}this._performRestAdd(s,a)},r.prototype._executeMultiple=function(){var t=this._old,e=this._new,a={},n={},s=[],l=[];this._initIndexMap(t,a,s,"_oldKeyGetter"),this._initIndexMap(e,n,l,"_newKeyGetter");for(var o=0;o<s.length;o++){var c=s[o],u=a[c],d=n[c],h=Dp(u),p=Dp(d);if(h>1&&p===1)this._updateManyToOne&&this._updateManyToOne(d,u),n[c]=null;else if(h===1&&p>1)this._updateOneToMany&&this._updateOneToMany(d,u),n[c]=null;else if(h===1&&p===1)this._update&&this._update(d,u),n[c]=null;else if(h>1&&p>1)this._updateManyToMany&&this._updateManyToMany(d,u),n[c]=null;else if(h>1)for(var g=0;g<h;g++)this._remove&&this._remove(u[g]);else this._remove&&this._remove(u)}this._performRestAdd(l,n)},r.prototype._performRestAdd=function(t,e){for(var a=0;a<t.length;a++){var n=t[a],s=e[n],l=Dp(s);if(l>1)for(var o=0;o<l;o++)this._add&&this._add(s[o]);else l===1&&this._add&&this._add(s);e[n]=null}},r.prototype._initIndexMap=function(t,e,a,n){for(var s=this._diffModeMultiple,l=0;l<t.length;l++){var o="_ec_"+this[n](t[l],l);if(s||(a[l]=o),!!e){var c=e[o],u=Dp(c);u===0?(e[o]=l,s&&a.push(o)):u===1?e[o]=[c,l]:c.push(l)}}},r})(),$re=(function(){function r(t,e){this._encode=t,this._schema=e}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r})();function qre(r,t){var e={},a=e.encode={},n=De(),s=[],l=[],o={};B(r.dimensions,function(p){var g=r.getDimensionInfo(p),v=g.coordDim;if(v){var y=g.coordDimIndex;gj(a,v)[y]=p,g.isExtraCoord||(n.set(v,1),Xre(g.type)&&(s[0]=p),gj(o,v)[y]=r.getDimensionIndex(g.name)),g.defaultTooltip&&l.push(p)}uB.each(function(x,b){var N=gj(a,b),w=g.otherDims[b];w!=null&&w!==!1&&(N[w]=g.name)})});var c=[],u={};n.each(function(p,g){var v=a[g];u[g]=v[0],c=c.concat(v)}),e.dataDimsOnCoord=c,e.dataDimIndicesOnCoord=pe(c,function(p){return r.getDimensionInfo(p).storeDimIndex}),e.encodeFirstDimNotExtra=u;var d=a.label;d&&d.length&&(s=d.slice());var h=a.tooltip;return h&&h.length?l=h.slice():l.length||(l=s.slice()),a.defaultedLabel=s,a.defaultedTooltip=l,e.userOutput=new $re(o,t),e}function gj(r,t){return r.hasOwnProperty(t)||(r[t]=[]),r[t]}function Sy(r){return r==="category"?"ordinal":r==="time"?"time":"float"}function Xre(r){return!(r==="ordinal"||r==="time")}var Px=(function(){function r(t){this.otherDims={},t!=null&&ie(this,t)}return r})(),Zre=ut(),Kre={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},w9=(function(){function r(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=T9(this.source)))},r.prototype.getSourceDimensionIndex=function(t){return Me(this._dimNameMap.get(t),-1)},r.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},r.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=_B(this.source),a=!A9(t),n="",s=[],l=0,o=0;l<t;l++){var c=void 0,u=void 0,d=void 0,h=this.dimensions[o];if(h&&h.storeDimIndex===l)c=e?h.name:null,u=h.type,d=h.ordinalMeta,o++;else{var p=this.getSourceDimension(l);p&&(c=e?p.name:null,u=p.type)}s.push({property:c,type:u,ordinalMeta:d}),e&&c!=null&&(!h||!h.isCalculationCoord)&&(n+=a?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),n+="$",n+=Kre[u]||"f",d&&(n+=d.uid),n+="$"}var g=this.source,v=[g.seriesLayoutBy,g.startIndex,n].join("$$");return{dimensions:s,hash:v}},r.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,a=0;e<this._fullDimCount;e++){var n=void 0,s=this.dimensions[a];if(s&&s.storeDimIndex===e)s.isCalculationCoord||(n=s.name),a++;else{var l=this.getSourceDimension(e);l&&(n=l.name)}t.push(n)}return t},r.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r})();function S9(r){return r instanceof w9}function C9(r){for(var t=De(),e=0;e<(r||[]).length;e++){var a=r[e],n=Ue(a)?a.name:a;n!=null&&t.get(n)==null&&t.set(n,e)}return t}function T9(r){var t=Zre(r);return t.dimNameMap||(t.dimNameMap=C9(r.dimensionsDefine))}function A9(r){return r>30}var Mp=Ue,co=pe,Qre=typeof Int32Array>"u"?Array:Int32Array,Jre="e\0\0",C3=-1,eae=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],tae=["_approximateExtent"],T3,I0,Rp,Lp,mj,Ip,vj,Ha=(function(){function r(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var a,n=!1;S9(t)?(a=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,a=t),a=a||["x","y"];for(var s={},l=[],o={},c=!1,u={},d=0;d<a.length;d++){var h=a[d],p=je(h)?new Px({name:h}):h instanceof Px?h:new Px(h),g=p.name;p.type=p.type||"float",p.coordDim||(p.coordDim=g,p.coordDimIndex=0);var v=p.otherDims=p.otherDims||{};l.push(g),s[g]=p,u[g]!=null&&(c=!0),p.createInvertedIndices&&(o[g]=[]);var y=d;xt(p.storeDimIndex)&&(y=p.storeDimIndex),v.itemName===0&&(this._nameDimIdx=y),v.itemId===0&&(this._idDimIdx=y),n&&(p.storeDimIndex=d)}if(this.dimensions=l,this._dimInfos=s,this._initGetDimensionInfo(c),this.hostModel=e,this._invertedIndicesMap=o,this._dimOmitted){var x=this._dimIdxToName=De();B(l,function(b){x.set(s[b].storeDimIndex,b)})}}return r.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var a=this._dimIdxToName.get(e);if(a!=null)return a;var n=this._schema.getSourceDimension(e);if(n)return n.name},r.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var a=this._getDimInfo(t);return a?a.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},r.prototype._recognizeDimIndex=function(t){if(xt(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},r.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},r.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},r.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(a){return e.hasOwnProperty(a)?e[a]:void 0}:function(a){return e[a]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(t,e){var a=this._dimSummary;if(e==null)return a.encodeFirstDimNotExtra[t];var n=a.encode[t];return n?n[e]:null},r.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,a=e.encode[t];return(a||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(t,e,a){var n=this,s;if(t instanceof u2&&(s=t),!s){var l=this.dimensions,o=GT(t)||Aa(t)?new NB(t,l.length):t;s=new u2;var c=co(l,function(u){return{type:n._dimInfos[u].type,property:u}});s.initData(o,c,a)}this._store=s,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=qre(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},r.prototype.appendValues=function(t,e){var a=this._store.appendValues(t,e&&e.length),n=a.start,s=a.end,l=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var o=n;o<s;o++){var c=o-n;this._nameList[o]=e[c],l&&vj(this,o)}},r.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,a=0;a<e.length;a++){var n=this._dimInfos[e[a]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Lo&&!t.fillStorage},r.prototype._doInit=function(t,e){if(!(t>=e)){var a=this._store,n=a.getProvider();this._updateOrdinalMeta();var s=this._nameList,l=this._idList,o=n.getSource().sourceFormat,c=o===kn;if(c&&!n.pure)for(var u=[],d=t;d<e;d++){var h=n.getItem(d,u);if(!this.hasItemOption&&jK(h)&&(this.hasItemOption=!0),h){var p=h.name;s[d]==null&&p!=null&&(s[d]=$r(p,null));var g=h.id;l[d]==null&&g!=null&&(l[d]=$r(g,null))}}if(this._shouldMakeIdFromName())for(var d=t;d<e;d++)vj(this,d);T3(this)}},r.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},r.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},r.prototype.setCalculationInfo=function(t,e){Mp(t)?ie(this._calculationInfo,t):this._calculationInfo[t]=e},r.prototype.getName=function(t){var e=this.getRawIndex(t),a=this._nameList[e];return a==null&&this._nameDimIdx!=null&&(a=Rp(this,this._nameDimIdx,e)),a==null&&(a=""),a},r.prototype._getCategory=function(t,e){var a=this._store.get(t,e),n=this._store.getOrdinalMeta(t);return n?n.categories[a]:a},r.prototype.getId=function(t){return I0(this,this.getRawIndex(t))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(t,e){var a=this._store,n=this._dimInfos[t];if(n)return a.get(n.storeDimIndex,e)},r.prototype.getByRawIndex=function(t,e){var a=this._store,n=this._dimInfos[t];if(n)return a.getByRawIndex(n.storeDimIndex,e)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},r.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},r.prototype.getValues=function(t,e){var a=this,n=this._store;return de(t)?n.getValues(co(t,function(s){return a._getStoreDimIndex(s)}),e):n.getValues(t)},r.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,a=0,n=e.length;a<n;a++)if(isNaN(this._store.get(e[a],t)))return!1;return!0},r.prototype.indexOfName=function(t){for(var e=0,a=this._store.count();e<a;e++)if(this.getName(e)===t)return e;return-1},r.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},r.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},r.prototype.rawIndexOf=function(t,e){var a=t&&this._invertedIndicesMap[t],n=a&&a[e];return n==null||isNaN(n)?C3:n},r.prototype.each=function(t,e,a){Le(t)&&(a=e,e=t,t=[]);var n=a||this,s=co(Lp(t),this._getStoreDimIndex,this);this._store.each(s,n?we(e,n):e)},r.prototype.filterSelf=function(t,e,a){Le(t)&&(a=e,e=t,t=[]);var n=a||this,s=co(Lp(t),this._getStoreDimIndex,this);return this._store=this._store.filter(s,n?we(e,n):e),this},r.prototype.selectRange=function(t){var e=this,a={},n=gt(t);return B(n,function(s){var l=e._getStoreDimIndex(s);a[l]=t[s]}),this._store=this._store.selectRange(a),this},r.prototype.mapArray=function(t,e,a){Le(t)&&(a=e,e=t,t=[]),a=a||this;var n=[];return this.each(t,function(){n.push(e&&e.apply(this,arguments))},a),n},r.prototype.map=function(t,e,a,n){var s=a||n||this,l=co(Lp(t),this._getStoreDimIndex,this),o=Ip(this);return o._store=this._store.map(l,s?we(e,s):e),o},r.prototype.modify=function(t,e,a,n){var s=a||n||this,l=co(Lp(t),this._getStoreDimIndex,this);this._store.modify(l,s?we(e,s):e)},r.prototype.downSample=function(t,e,a,n){var s=Ip(this);return s._store=this._store.downSample(this._getStoreDimIndex(t),e,a,n),s},r.prototype.minmaxDownSample=function(t,e){var a=Ip(this);return a._store=this._store.minmaxDownSample(this._getStoreDimIndex(t),e),a},r.prototype.lttbDownSample=function(t,e){var a=Ip(this);return a._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),a},r.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},r.prototype.getItemModel=function(t){var e=this.hostModel,a=this.getRawDataItem(t);return new dt(a,e,e&&e.ecModel)},r.prototype.diff=function(t){var e=this;return new Tl(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(a){return I0(t,a)},function(a){return I0(e,a)})},r.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},r.prototype.setVisual=function(t,e){this._visual=this._visual||{},Mp(t)?ie(this._visual,t):this._visual[t]=e},r.prototype.getItemVisual=function(t,e){var a=this._itemVisuals[t],n=a&&a[e];return n??this.getVisual(e)},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(t,e){var a=this._itemVisuals,n=a[t];n||(n=a[t]={});var s=n[e];return s==null&&(s=this.getVisual(e),de(s)?s=s.slice():Mp(s)&&(s=ie({},s)),n[e]=s),s},r.prototype.setItemVisual=function(t,e,a){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,Mp(e)?ie(n,e):n[e]=a},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(t,e){Mp(t)?ie(this._layout,t):this._layout[t]=e},r.prototype.getLayout=function(t){return this._layout[t]},r.prototype.getItemLayout=function(t){return this._itemLayouts[t]},r.prototype.setItemLayout=function(t,e,a){this._itemLayouts[t]=a?ie(this._itemLayouts[t]||{},e):e},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(t,e){var a=this.hostModel&&this.hostModel.seriesIndex;$S(a,this.dataType,t,e),this._graphicEls[t]=e},r.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},r.prototype.eachItemGraphicEl=function(t,e){B(this._graphicEls,function(a,n){a&&t&&t.call(e,a,n)})},r.prototype.cloneShallow=function(t){return t||(t=new r(this._schema?this._schema:co(this.dimensions,this._getDimInfo,this),this.hostModel)),mj(t,this),t._store=this._store,t},r.prototype.wrapMethod=function(t,e){var a=this[t];Le(a)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=a.apply(this,arguments);return e.apply(this,[n].concat(pb(arguments)))})},r.internalField=(function(){T3=function(t){var e=t._invertedIndicesMap;B(e,function(a,n){var s=t._dimInfos[n],l=s.ordinalMeta,o=t._store;if(l){a=e[n]=new Qre(l.categories.length);for(var c=0;c<a.length;c++)a[c]=C3;for(var c=0;c<o.count();c++)a[o.get(s.storeDimIndex,c)]=c}})},Rp=function(t,e,a){return $r(t._getCategory(e,a),null)},I0=function(t,e){var a=t._idList[e];return a==null&&t._idDimIdx!=null&&(a=Rp(t,t._idDimIdx,e)),a==null&&(a=Jre+e),a},Lp=function(t){return de(t)||(t=t!=null?[t]:[]),t},Ip=function(t){var e=new r(t._schema?t._schema:co(t.dimensions,t._getDimInfo,t),t.hostModel);return mj(e,t),e},mj=function(t,e){B(eae.concat(e.__wrappedMethods||[]),function(a){e.hasOwnProperty(a)&&(t[a]=e[a])}),t.__wrappedMethods=e.__wrappedMethods,B(tae,function(a){t[a]=Oe(e[a])}),t._calculationInfo=ie({},e._calculationInfo)},vj=function(t,e){var a=t._nameList,n=t._idList,s=t._nameDimIdx,l=t._idDimIdx,o=a[e],c=n[e];if(o==null&&s!=null&&(a[e]=o=Rp(t,s,e)),c==null&&l!=null&&(n[e]=c=Rp(t,l,e)),c==null&&o!=null){var u=t._nameRepeatCount,d=u[o]=(u[o]||0)+1;c=o,d>1&&(c+="__ec__"+d),n[e]=c}}})(),r})();function rae(r,t){return df(r,t).dimensions}function df(r,t){GT(r)||(r=UT(r)),t=t||{};var e=t.coordDimensions||[],a=t.dimensionsDefine||r.dimensionsDefine||[],n=De(),s=[],l=nae(r,e,a,t.dimensionsCount),o=t.canOmitUnusedDimensions&&A9(l),c=a===r.dimensionsDefine,u=c?T9(r):C9(a),d=t.encodeDefine;!d&&t.encodeDefaulter&&(d=t.encodeDefaulter(r,l));for(var h=De(d),p=new DB(l),g=0;g<p.length;g++)p[g]=-1;function v(R){var k=p[R];if(k<0){var L=a[R],O=Ue(L)?L:{name:L},z=new Px,U=O.name;U!=null&&u.get(U)!=null&&(z.name=z.displayName=U),O.type!=null&&(z.type=O.type),O.displayName!=null&&(z.displayName=O.displayName);var H=s.length;return p[R]=H,z.storeDimIndex=R,s.push(z),z}return s[k]}if(!o)for(var g=0;g<l;g++)v(g);h.each(function(R,k){var L=Ft(R).slice();if(L.length===1&&!je(L[0])&&L[0]<0){h.set(k,!1);return}var O=h.set(k,[]);B(L,function(z,U){var H=je(z)?u.get(z):z;H!=null&&H<l&&(O[U]=H,x(v(H),k,U))})});var y=0;B(e,function(R){var k,L,O,z;if(je(R))k=R,z={};else{z=R,k=z.name;var U=z.ordinalMeta;z.ordinalMeta=null,z=ie({},z),z.ordinalMeta=U,L=z.dimsDef,O=z.otherDims,z.name=z.coordDim=z.coordDimIndex=z.dimsDef=z.otherDims=null}var H=h.get(k);if(H!==!1){if(H=Ft(H),!H.length)for(var P=0;P<(L&&L.length||1);P++){for(;y<l&&v(y).coordDim!=null;)y++;y<l&&H.push(y++)}B(H,function(F,Y){var X=v(F);if(c&&z.type!=null&&(X.type=z.type),x(Ge(X,z),k,Y),X.name==null&&L){var q=L[Y];!Ue(q)&&(q={name:q}),X.name=X.displayName=q.name,X.defaultTooltip=q.defaultTooltip}O&&Ge(X.otherDims,O)})}});function x(R,k,L){uB.get(k)!=null?R.otherDims[k]=L:(R.coordDim=k,R.coordDimIndex=L,n.set(k,!0))}var b=t.generateCoord,N=t.generateCoordCount,w=N!=null;N=b?N||1:0;var S=b||"value";function T(R){R.name==null&&(R.name=R.coordDim)}if(o)B(s,function(R){T(R)}),s.sort(function(R,k){return R.storeDimIndex-k.storeDimIndex});else for(var A=0;A<l;A++){var C=v(A),M=C.coordDim;M==null&&(C.coordDim=sae(S,n,w),C.coordDimIndex=0,(!b||N<=0)&&(C.isExtraCoord=!0),N--),T(C),C.type==null&&(pB(r,A)===wa.Must||C.isExtraCoord&&(C.otherDims.itemName!=null||C.otherDims.seriesName!=null))&&(C.type="ordinal")}return aae(s),new w9({source:r,dimensions:s,fullDimensionCount:l,dimensionOmitted:o})}function aae(r){for(var t=De(),e=0;e<r.length;e++){var a=r[e],n=a.name,s=t.get(n)||0;s>0&&(a.name=n+(s-1)),s++,t.set(n,s)}}function nae(r,t,e,a){var n=Math.max(r.dimensionsDetectedCount||1,t.length,e.length,a||0);return B(t,function(s){var l;Ue(s)&&(l=s.dimsDef)&&(n=Math.max(n,l.length))}),n}function sae(r,t,e){if(e||t.hasKey(r)){for(var a=0;t.hasKey(r+a);)a++;r+=a}return t.set(r,!0),r}var iae=(function(){function r(t){this.coordSysDims=[],this.axisMap=De(),this.categoryAxisMap=De(),this.coordSysName=t}return r})();function lae(r){var t=r.get("coordinateSystem"),e=new iae(t),a=oae[t];if(a)return a(r,e,e.axisMap,e.categoryAxisMap),e}var oae={cartesian2d:function(r,t,e,a){var n=r.getReferringComponents("xAxis",pr).models[0],s=r.getReferringComponents("yAxis",pr).models[0];t.coordSysDims=["x","y"],e.set("x",n),e.set("y",s),$d(n)&&(a.set("x",n),t.firstCategoryDimIndex=0),$d(s)&&(a.set("y",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(r,t,e,a){var n=r.getReferringComponents("singleAxis",pr).models[0];t.coordSysDims=["single"],e.set("single",n),$d(n)&&(a.set("single",n),t.firstCategoryDimIndex=0)},polar:function(r,t,e,a){var n=r.getReferringComponents("polar",pr).models[0],s=n.findAxisModel("radiusAxis"),l=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",s),e.set("angle",l),$d(s)&&(a.set("radius",s),t.firstCategoryDimIndex=0),$d(l)&&(a.set("angle",l),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(r,t,e,a){t.coordSysDims=["lng","lat"]},parallel:function(r,t,e,a){var n=r.ecModel,s=n.getComponent("parallel",r.get("parallelIndex")),l=t.coordSysDims=s.dimensions.slice();B(s.parallelAxisIndex,function(o,c){var u=n.getComponent("parallelAxis",o),d=l[c];e.set(d,u),$d(u)&&(a.set(d,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=c))})},matrix:function(r,t,e,a){var n=r.getReferringComponents("matrix",pr).models[0];t.coordSysDims=["x","y"];var s=n.getDimensionModel("x"),l=n.getDimensionModel("y");e.set("x",s),e.set("y",l),a.set("x",s),a.set("y",l)}};function $d(r){return r.get("type")==="category"}function E9(r,t,e){e=e||{};var a=e.byIndex,n=e.stackedCoordDimension,s,l,o;cae(t)?s=t:(l=t.schema,s=l.dimensions,o=t.store);var c=!!(r&&r.get("stack")),u,d,h,p;if(B(s,function(N,w){je(N)&&(s[w]=N={name:N}),c&&!N.isExtraCoord&&(!a&&!u&&N.ordinalMeta&&(u=N),!d&&N.type!=="ordinal"&&N.type!=="time"&&(!n||n===N.coordDim)&&(d=N))}),d&&!a&&!u&&(a=!0),d){h="__\0ecstackresult_"+r.id,p="__\0ecstackedover_"+r.id,u&&(u.createInvertedIndices=!0);var g=d.coordDim,v=d.type,y=0;B(s,function(N){N.coordDim===g&&y++});var x={name:h,coordDim:g,coordDimIndex:y,type:v,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},b={name:p,coordDim:p,coordDimIndex:y+1,type:v,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};l?(o&&(x.storeDimIndex=o.ensureCalculationDimension(p,v),b.storeDimIndex=o.ensureCalculationDimension(h,v)),l.appendCalculationDimension(x),l.appendCalculationDimension(b)):(s.push(x),s.push(b))}return{stackedDimension:d&&d.name,stackedByDimension:u&&u.name,isStackedByIndex:a,stackedOverDimension:p,stackResultDimension:h}}function cae(r){return!S9(r.schema)}function Al(r,t){return!!t&&t===r.getCalculationInfo("stackedDimension")}function sA(r,t){return Al(r,t)?r.getCalculationInfo("stackResultDimension"):t}function uae(r,t){var e=r.get("coordinateSystem"),a=lf.get(e),n;return t&&t.coordSysDims&&(n=pe(t.coordSysDims,function(s){var l={name:s},o=t.axisMap.get(s);if(o){var c=o.get("type");l.type=Sy(c)}return l})),n||(n=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),n}function dae(r,t,e){var a,n;return e&&B(r,function(s,l){var o=s.coordDim,c=e.categoryAxisMap.get(o);c&&(a==null&&(a=l),s.ordinalMeta=c.getOrdinalMeta(),t&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(n=!0)}),!n&&a!=null&&(r[a].otherDims.itemName=0),a}function Di(r,t,e){e=e||{};var a=t.getSourceManager(),n,s=!1;r?(s=!0,n=UT(r)):(n=a.getSource(),s=n.sourceFormat===kn);var l=lae(t),o=uae(t,l),c=e.useEncodeDefaulter,u=Le(c)?c:c?et(fB,o,t):null,d={coordDimensions:o,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!s},h=df(n,d),p=dae(h.dimensions,e.createInvertedIndices,l),g=s?null:a.getSharedDataStore(h),v=E9(t,{schema:h,store:g}),y=new Ha(h,t);y.setCalculationInfo(v);var x=p!=null&&hae(n)?function(b,N,w,S){return S===p?w:this.defaultDimValueGetter(b,N,w,S)}:null;return y.hasItemOption=!1,y.initData(s?n:g,null,x),y}function hae(r){if(r.sourceFormat===kn){var t=fae(r.data||[]);return!de(Zh(t))}}function fae(r){for(var t=0;t<r.length&&r[t]==null;)t++;return r[t]}function N2(r){return r.type==="interval"||r.type==="log"}function pae(r,t,e,a,n){var s={},l=s.interval=tT(t/e,!0);a!=null&&l<a&&(l=s.interval=a),n!=null&&l>n&&(l=s.interval=n);var o=s.intervalPrecision=Jg(l),c=s.niceTickExtent=[Cr(Math.ceil(r[0]/l)*l,o),Cr(Math.floor(r[1]/l)*l,o)];return gae(c,r),s}function xj(r){var t=Math.pow(10,bb(r)),e=r/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,Cr(e*t)}function Jg(r){return Ds(r)+2}function A3(r,t,e){r[t]=Math.max(Math.min(r[t],e[1]),e[0])}function gae(r,t){!isFinite(r[0])&&(r[0]=t[0]),!isFinite(r[1])&&(r[1]=t[1]),A3(r,0,t),A3(r,1,t),r[0]>r[1]&&(r[0]=r[1])}function iA(r,t){return r>=t[0]&&r<=t[1]}var mae=(function(){function r(){this.normalize=E3,this.scale=D3}return r.prototype.updateMethods=function(t){t.hasBreaks()?(this.normalize=we(t.normalize,t),this.scale=we(t.scale,t)):(this.normalize=E3,this.scale=D3)},r})();function E3(r,t){return t[1]===t[0]?.5:(r-t[0])/(t[1]-t[0])}function D3(r,t){return r*(t[1]-t[0])+t[0]}function j2(r,t,e){var a=Math.log(r);return[Math.log(e?t[0]:Math.max(0,t[0]))/a,Math.log(e?t[1]:Math.max(0,t[1]))/a]}var Xo=(function(){function r(t){this._calculator=new mae,this._setting=t||{},this._extent=[1/0,-1/0];var e=Or();e&&(this._brkCtx=e.createScaleBreakContext(),this._brkCtx.update(this._extent))}return r.prototype.getSetting=function(t){return this._setting[t]},r.prototype._innerUnionExtent=function(t){var e=this._extent;this._innerSetExtent(t[0]<e[0]?t[0]:e[0],t[1]>e[1]?t[1]:e[1])},r.prototype.unionExtentFromData=function(t,e){this._innerUnionExtent(t.getApproximateExtent(e))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(t,e){this._innerSetExtent(t,e)},r.prototype._innerSetExtent=function(t,e){var a=this._extent;isNaN(t)||(a[0]=t),isNaN(e)||(a[1]=e),this._brkCtx&&this._brkCtx.update(a)},r.prototype.setBreaksFromOption=function(t){var e=Or();e&&this._innerSetBreak(e.parseAxisBreakOption(t,we(this.parse,this)))},r.prototype._innerSetBreak=function(t){this._brkCtx&&(this._brkCtx.setBreaks(t),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},r.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},r.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},r.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},r.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(t){this._isBlank=t},r})();_b(Xo);var vae=0,em=(function(){function r(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++vae,this._onCollect=t.onCollect}return r.createByAxisModel=function(t){var e=t.option,a=e.data,n=a&&pe(a,xae);return new r({categories:n,needCollect:!n,deduplication:e.dedplication!==!1})},r.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},r.prototype.parseAndCollect=function(t){var e,a=this._needCollect;if(!je(t)&&!a)return t;if(a&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,this._onCollect&&this._onCollect(t,e),e;var n=this._getOrCreateMap();return e=n.get(t),e==null&&(a?(e=this.categories.length,this.categories[e]=t,n.set(t,e),this._onCollect&&this._onCollect(t,e)):e=NaN),e},r.prototype._getOrCreateMap=function(){return this._map||(this._map=De(this.categories))},r})();function xae(r){return Ue(r)&&r.value!=null?r.value:r+""}var Ph=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;a.type="ordinal";var n=a.getSetting("ordinalMeta");return n||(n=new em({})),de(n)&&(n=new em({categories:pe(n,function(s){return Ue(s)?s.value:s})})),a._ordinalMeta=n,a._extent=a.getSetting("extent")||[0,n.categories.length-1],a}return t.prototype.parse=function(e){return e==null?NaN:je(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return iA(e,this._extent)&&e>=0&&e<this._ordinalMeta.categories.length},t.prototype.normalize=function(e){return e=this._getTickNumber(e),this._calculator.normalize(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(this._calculator.scale(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],a=this._extent,n=a[0];n<=a[1];)e.push({value:n}),n++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=e.ordinalNumbers,n=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],l=0,o=this._ordinalMeta.categories.length,c=Math.min(o,a.length);l<c;++l){var u=a[l];n[l]=u,s[u]=l}for(var d=0;l<o;++l){for(;s[d]!=null;)d++;n.push(d),s[d]=l}},t.prototype._getTickNumber=function(e){var a=this._ticksByOrdinalNumber;return a&&e>=0&&e<a.length?a[e]:e},t.prototype.getRawOrdinalNumber=function(e){var a=this._ordinalNumbersByTick;return a&&e>=0&&e<a.length?a[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var a=this.getRawOrdinalNumber(e.value),n=this._ordinalMeta.categories[a];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t})(Xo);Xo.registerClass(Ph);var uo=Cr,El=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e==null||e===""?NaN:Number(e)},t.prototype.contain=function(e){return iA(e,this._extent)},t.prototype.normalize=function(e){return this._calculator.normalize(e,this._extent)},t.prototype.scale=function(e){return this._calculator.scale(e,this._extent)},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=Jg(e)},t.prototype.getTicks=function(e){e=e||{};var a=this._interval,n=this._extent,s=this._niceExtent,l=this._intervalPrecision,o=Or(),c=[];if(!a)return c;if(e.breakTicks==="only_break"&&o)return o.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c;var u=1e4;n[0]<s[0]&&(e.expandToNicedExtent?c.push({value:uo(s[0]-a,l)}):c.push({value:n[0]}));for(var d=function(v,y){return Math.round((y-v)/a)},h=s[0];h<=s[1];){if(c.push({value:h}),h=uo(h+a,l),this._brkCtx){var p=this._brkCtx.calcNiceTickMultiple(h,d);p>=0&&(h=uo(h+p*a,l))}if(c.length>0&&h===c[c.length-1].value)break;if(c.length>u)return[]}var g=c.length?c[c.length-1].value:s[1];return n[1]>g&&(e.expandToNicedExtent?c.push({value:uo(g+a,l)}):c.push({value:n[1]})),o&&o.pruneTicksByBreak(e.pruneByBreak,c,this._brkCtx.breaks,function(v){return v.value},this._interval,this._extent),e.breakTicks!=="none"&&o&&o.addBreaksToTicks(c,this._brkCtx.breaks,this._extent),c},t.prototype.getMinorTicks=function(e){for(var a=this.getTicks({expandToNicedExtent:!0}),n=[],s=this.getExtent(),l=1;l<a.length;l++){var o=a[l],c=a[l-1];if(!(c.break||o.break)){for(var u=0,d=[],h=o.value-c.value,p=h/e,g=Jg(p);u<e-1;){var v=uo(c.value+(u+1)*p,g);v>s[0]&&v<s[1]&&d.push(v),u++}var y=Or();y&&y.pruneTicksByBreak("auto",d,this._getNonTransBreaks(),function(x){return x},this._interval,s),n.push(d)}}return n},t.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},t.prototype.getLabel=function(e,a){if(e==null)return"";var n=a&&a.precision;n==null?n=Ds(e.value)||0:n==="auto"&&(n=this._intervalPrecision);var s=uo(e.value,n,!0);return IT(s)},t.prototype.calcNiceTicks=function(e,a,n){e=e||5;var s=this._extent.slice(),l=this._getExtentSpanWithBreaks();if(isFinite(l)){l<0&&(l=-l,s.reverse(),this._innerSetExtent(s[0],s[1]),s=this._extent.slice());var o=pae(s,l,e,a,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var a=this._extent.slice();if(a[0]===a[1])if(a[0]!==0){var n=Math.abs(a[0]);e.fixMax||(a[1]+=n/2),a[0]-=n/2}else a[1]=1;var s=a[1]-a[0];isFinite(s)||(a[0]=0,a[1]=1),this._innerSetExtent(a[0],a[1]),a=this._extent.slice(),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var l=this._interval,o=this._intervalPrecision;e.fixMin||(a[0]=uo(Math.floor(a[0]/l)*l,o)),e.fixMax||(a[1]=uo(Math.ceil(a[1]/l)*l,o)),this._innerSetExtent(a[0],a[1])},t.prototype.setNiceExtent=function(e,a){this._niceExtent=[e,a]},t.type="interval",t})(Xo);Xo.registerClass(El);var D9=typeof Float32Array<"u",yae=D9?Float32Array:Array;function gi(r){return de(r)?D9?new Float32Array(r):r:new yae(r)}var w2="__ec_stack_";function M9(r){return r.get("stack")||w2+r.seriesIndex}function lA(r){return r.dim+r.index}function bae(r){var t=[],e=r.axis,a="axis0";if(e.type==="category"){for(var n=e.getBandWidth(),s=0;s<r.count;s++)t.push(Ge({bandWidth:n,axisKey:a,stackId:w2+s},r));for(var l=I9(t),o=[],s=0;s<r.count;s++){var c=l[a][w2+s];c.offsetCenter=c.offset+c.width/2,o.push(c)}return o}}function R9(r,t){var e=[];return t.eachSeriesByType(r,function(a){P9(a)&&e.push(a)}),e}function _ae(r){var t={};B(r,function(c){var u=c.coordinateSystem,d=u.getBaseAxis();if(!(d.type!=="time"&&d.type!=="value"))for(var h=c.getData(),p=d.dim+"_"+d.index,g=h.getDimensionIndex(h.mapDimension(d.dim)),v=h.getStore(),y=0,x=v.count();y<x;++y){var b=v.get(g,y);t[p]?t[p].push(b):t[p]=[b]}});var e={};for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];if(n){n.sort(function(c,u){return c-u});for(var s=null,l=1;l<n.length;++l){var o=n[l]-n[l-1];o>0&&(s=s===null?o:Math.min(s,o))}e[a]=s}}return e}function L9(r){var t=_ae(r),e=[];return B(r,function(a){var n=a.coordinateSystem,s=n.getBaseAxis(),l=s.getExtent(),o;if(s.type==="category")o=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var c=s.dim+"_"+s.index,u=t[c],d=Math.abs(l[1]-l[0]),h=s.scale.getExtent(),p=Math.abs(h[1]-h[0]);o=u?d/p*u:d}else{var g=a.getData();o=Math.abs(l[1]-l[0])/g.count()}var v=Ne(a.get("barWidth"),o),y=Ne(a.get("barMaxWidth"),o),x=Ne(a.get("barMinWidth")||(z9(a)?.5:1),o),b=a.get("barGap"),N=a.get("barCategoryGap"),w=a.get("defaultBarGap");e.push({bandWidth:o,barWidth:v,barMaxWidth:y,barMinWidth:x,barGap:b,barCategoryGap:N,defaultBarGap:w,axisKey:lA(s),stackId:M9(a)})}),I9(e)}function I9(r){var t={};B(r,function(a,n){var s=a.axisKey,l=a.bandWidth,o=t[s]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:null,gap:a.defaultBarGap||0,stacks:{}},c=o.stacks;t[s]=o;var u=a.stackId;c[u]||o.autoWidthCount++,c[u]=c[u]||{width:0,maxWidth:0};var d=a.barWidth;d&&!c[u].width&&(c[u].width=d,d=Math.min(o.remainedWidth,d),o.remainedWidth-=d);var h=a.barMaxWidth;h&&(c[u].maxWidth=h);var p=a.barMinWidth;p&&(c[u].minWidth=p);var g=a.barGap;g!=null&&(o.gap=g);var v=a.barCategoryGap;v!=null&&(o.categoryGap=v)});var e={};return B(t,function(a,n){e[n]={};var s=a.stacks,l=a.bandWidth,o=a.categoryGap;if(o==null){var c=gt(s).length;o=Math.max(35-c*4,15)+"%"}var u=Ne(o,l),d=Ne(a.gap,1),h=a.remainedWidth,p=a.autoWidthCount,g=(h-u)/(p+(p-1)*d);g=Math.max(g,0),B(s,function(b){var N=b.maxWidth,w=b.minWidth;if(b.width){var S=b.width;N&&(S=Math.min(S,N)),w&&(S=Math.max(S,w)),b.width=S,h-=S+d*S,p--}else{var S=g;N&&N<S&&(S=Math.min(N,h)),w&&w>S&&(S=w),S!==g&&(b.width=S,h-=S+d*S,p--)}}),g=(h-u)/(p+(p-1)*d),g=Math.max(g,0);var v=0,y;B(s,function(b,N){b.width||(b.width=g),y=b,v+=b.width*(1+d)}),y&&(v-=y.width*d);var x=-v/2;B(s,function(b,N){e[n][N]=e[n][N]||{bandWidth:l,offset:x,width:b.width},x+=b.width*(1+d)})}),e}function Nae(r,t,e){if(r&&t){var a=r[lA(t)];return a}}function k9(r,t){var e=R9(r,t),a=L9(e);B(e,function(n){var s=n.getData(),l=n.coordinateSystem,o=l.getBaseAxis(),c=M9(n),u=a[lA(o)][c],d=u.offset,h=u.width;s.setLayout({bandWidth:u.bandWidth,offset:d,size:h})})}function O9(r){return{seriesType:r,plan:of(),reset:function(t){if(P9(t)){var e=t.getData(),a=t.coordinateSystem,n=a.getBaseAxis(),s=a.getOtherAxis(n),l=e.getDimensionIndex(e.mapDimension(s.dim)),o=e.getDimensionIndex(e.mapDimension(n.dim)),c=t.get("showBackground",!0),u=e.mapDimension(s.dim),d=e.getCalculationInfo("stackResultDimension"),h=Al(e,u)&&!!e.getCalculationInfo("stackedOnSeries"),p=s.isHorizontal(),g=jae(n,s),v=z9(t),y=t.get("barMinHeight")||0,x=d&&e.getDimensionIndex(d),b=e.getLayout("size"),N=e.getLayout("offset");return{progress:function(w,S){for(var T=w.count,A=v&&gi(T*3),C=v&&c&&gi(T*3),M=v&&gi(T),R=a.master.getRect(),k=p?R.width:R.height,L,O=S.getStore(),z=0;(L=w.next())!=null;){var U=O.get(h?x:l,L),H=O.get(o,L),P=g,F=void 0;h&&(F=+U-O.get(l,L));var Y=void 0,X=void 0,q=void 0,G=void 0;if(p){var $=a.dataToPoint([U,H]);if(h){var Z=a.dataToPoint([F,H]);P=Z[0]}Y=P,X=$[1]+N,q=$[0]-P,G=b,Math.abs(q)<y&&(q=(q<0?-1:1)*y)}else{var $=a.dataToPoint([H,U]);if(h){var Z=a.dataToPoint([H,F]);P=Z[1]}Y=$[0]+N,X=P,q=b,G=$[1]-P,Math.abs(G)<y&&(G=(G<=0?-1:1)*y)}v?(A[z]=Y,A[z+1]=X,A[z+2]=p?q:G,C&&(C[z]=p?R.x:Y,C[z+1]=p?X:R.y,C[z+2]=k),M[L]=L):S.setItemLayout(L,{x:Y,y:X,width:q,height:G}),z+=3}v&&S.setLayout({largePoints:A,largeDataIndices:M,largeBackgroundPoints:C,valueAxisHorizontal:p})}}}}}}function P9(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function z9(r){return r.pipelineContext&&r.pipelineContext.large}function jae(r,t){var e=t.model.get("startValue");return e||(e=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?e>0?e:1:e))}var wae=function(r,t,e,a){for(;e<a;){var n=e+a>>>1;r[n][1]<t?e=n+1:a=n}return e},oA=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="time",a}return t.prototype.getLabel=function(e){var a=this.getSetting("useUTC");return Lm(e.value,_L[$J(Cg(this._minLevelUnit))]||_L.second,a,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,a,n){var s=this.getSetting("useUTC"),l=this.getSetting("locale");return qJ(e,a,n,l,s)},t.prototype.getTicks=function(e){e=e||{};var a=this._interval,n=this._extent,s=Or(),l=[];if(!a)return l;var o=this.getSetting("useUTC");if(s&&e.breakTicks==="only_break")return Or().addBreaksToTicks(l,this._brkCtx.breaks,this._extent),l;var c=gh(n[1],o);l.push({value:n[0],time:{level:0,upperTimeUnit:c,lowerTimeUnit:c}});var u=Mae(this._minLevelUnit,this._approxInterval,o,n,this._getExtentSpanWithBreaks(),this._brkCtx);l=l.concat(u);var d=gh(n[1],o);l.push({value:n[1],time:{level:0,upperTimeUnit:d,lowerTimeUnit:d}});var h=this.getSetting("useUTC"),p=Sn.length-1,g=0;return B(l,function(v){p=Math.min(p,tt(Sn,v.time.upperTimeUnit)),g=Math.max(g,v.time.level)}),s&&Or().pruneTicksByBreak(e.pruneByBreak,l,this._brkCtx.breaks,function(v){return v.value},this._approxInterval,this._extent),s&&e.breakTicks!=="none"&&Or().addBreaksToTicks(l,this._brkCtx.breaks,this._extent,function(v){for(var y=Math.max(tt(Sn,gh(v.vmin,h)),tt(Sn,gh(v.vmax,h))),x=0,b=0;b<Sn.length;b++)if(!B9(Sn[b],v.vmin,v.vmax,h)){x=b;break}var N=Math.min(x,p),w=Math.max(N,y);return{level:g,lowerTimeUnit:Sn[w],upperTimeUnit:Sn[N]}}),l},t.prototype.calcNiceExtent=function(e){var a=this.getExtent();if(a[0]===a[1]&&(a[0]-=ns,a[1]+=ns),a[1]===-1/0&&a[0]===1/0){var n=new Date;a[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),a[0]=a[1]-ns}this._innerSetExtent(a[0],a[1]),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,a,n){e=e||10;var s=this._getExtentSpanWithBreaks();this._approxInterval=s/e,a!=null&&this._approxInterval<a&&(this._approxInterval=a),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var l=k0.length,o=Math.min(wae(k0,this._approxInterval,0,l),l-1);this._interval=k0[o][1],this._intervalPrecision=Jg(this._interval),this._minLevelUnit=k0[Math.max(o-1,0)][0]},t.prototype.parse=function(e){return xt(e)?e:+Ai(e)},t.prototype.contain=function(e){return iA(e,this._extent)},t.prototype.normalize=function(e){return this._calculator.normalize(e,this._extent)},t.prototype.scale=function(e){return this._calculator.scale(e,this._extent)},t.type="time",t})(El),k0=[["second",CT],["minute",TT],["hour",Sg],["quarter-day",Sg*6],["half-day",Sg*12],["day",ns*1.2],["half-week",ns*3.5],["week",ns*7],["month",ns*31],["quarter",ns*95],["half-year",bL/2],["year",bL]];function B9(r,t,e,a){return py(new Date(t),r,a).getTime()===py(new Date(e),r,a).getTime()}function Sae(r,t){return r/=ns,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function Cae(r){var t=30*ns;return r/=t,r>6?6:r>3?3:r>2?2:1}function Tae(r){return r/=Sg,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function M3(r,t){return r/=t?TT:CT,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function Aae(r){return tT(r,!0)}function Eae(r,t,e){var a=Math.max(0,tt(Sn,t)-1);return py(new Date(r),Sn[a],e).getTime()}function Dae(r,t){var e=new Date(0);e[r](1);var a=e.getTime();e[r](1+t);var n=e.getTime()-a;return function(s,l){return Math.max(0,Math.round((l-s)/n))}}function Mae(r,t,e,a,n,s){var l=1e4,o=UJ,c=0;function u(z,U,H,P,F,Y,X){for(var q=Dae(F,z),G=U,$=new Date(G);G<H&&G<=a[1]&&(X.push({value:G}),!(c++>l));)if($[F]($[P]()+z),G=$.getTime(),s){var Z=s.calcNiceTickMultiple(G,q);Z>0&&($[F]($[P]()+Z*z),G=$.getTime())}X.push({value:G,notAdd:!0})}function d(z,U,H){var P=[],F=!U.length;if(!B9(Cg(z),a[0],a[1],e)){F&&(U=[{value:Eae(a[0],z,e)},{value:a[1]}]);for(var Y=0;Y<U.length-1;Y++){var X=U[Y].value,q=U[Y+1].value;if(X!==q){var G=void 0,$=void 0,Z=void 0,te=!1;switch(z){case"year":G=Math.max(1,Math.round(t/ns/365)),$=W7(e),Z=XJ(e);break;case"half-year":case"quarter":case"month":G=Cae(t),$=AT(e),Z=$7(e);break;case"week":case"half-week":case"day":G=Sae(t),$=ET(e),Z=q7(e),te=!0;break;case"half-day":case"quarter-day":case"hour":G=Tae(t),$=DT(e),Z=X7(e);break;case"minute":G=M3(t,!0),$=MT(e),Z=Z7(e);break;case"second":G=M3(t,!1),$=RT(e),Z=K7(e);break;case"millisecond":G=Aae(t),$=LT(e),Z=Q7(e);break}q>=a[0]&&X<=a[1]&&u(G,X,q,$,Z,te,P),z==="year"&&H.length>1&&Y===0&&H.unshift({value:H[0].value-G})}}for(var Y=0;Y<P.length;Y++)H.push(P[Y])}}for(var h=[],p=[],g=0,v=0,y=0;y<o.length;++y){var x=Cg(o[y]);if(WJ(o[y])){d(o[y],h[h.length-1]||[],p);var b=o[y+1]?Cg(o[y+1]):null;if(x!==b){if(p.length){v=g,p.sort(function(z,U){return z.value-U.value});for(var N=[],w=0;w<p.length;++w){var S=p[w].value;(w===0||p[w-1].value!==S)&&(N.push(p[w]),S>=a[0]&&S<=a[1]&&g++)}var T=n/t;if(g>T*1.5&&v>T/1.5||(h.push(N),g>T||r===o[y]))break}p=[]}}}for(var A=Ct(pe(h,function(z){return Ct(z,function(U){return U.value>=a[0]&&U.value<=a[1]&&!U.notAdd})}),function(z){return z.length>0}),C=[],M=A.length-1,y=0;y<A.length;++y)for(var R=A[y],k=0;k<R.length;++k){var L=gh(R[k].value,e);C.push({value:R[k].value,time:{level:M-y,upperTimeUnit:L,lowerTimeUnit:L}})}C.sort(function(z,U){return z.value-U.value});for(var O=[],y=0;y<C.length;++y)(y===0||C[y].value!==C[y-1].value)&&O.push(C[y]);return O}Xo.registerClass(oA);var S2=Cr,Rae=Math.floor,Lae=Math.ceil,O0=Math.pow,P0=Math.log,V9=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new El,e}return t.prototype.getTicks=function(e){e=e||{};var a=this._extent.slice(),n=this._originalScale.getExtent(),s=r.prototype.getTicks.call(this,e),l=this.base,o=this._originalScale._innerGetBreaks(),c=Or();return pe(s,function(u){var d=u.value,h=null,p=O0(l,d);d===a[0]&&this._fixMin?h=n[0]:d===a[1]&&this._fixMax&&(h=n[1]);var g;if(c){var v=c.getTicksLogTransformBreak(u,l,o,z0);g=v.vBreak,h==null&&(h=v.brkRoundingCriterion)}return h!=null&&(p=z0(p,h)),{value:p,break:g}},this)},t.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},t.prototype.setExtent=function(e,a){this._originalScale.setExtent(e,a);var n=j2(this.base,[e,a]);r.prototype.setExtent.call(this,n[0],n[1])},t.prototype.getExtent=function(){var e=this.base,a=r.prototype.getExtent.call(this);a[0]=O0(e,a[0]),a[1]=O0(e,a[1]);var n=this._originalScale.getExtent();return this._fixMin&&(a[0]=z0(a[0],n[0])),this._fixMax&&(a[1]=z0(a[1],n[1])),a},t.prototype.unionExtentFromData=function(e,a){this._originalScale.unionExtentFromData(e,a);var n=j2(this.base,e.getApproximateExtent(a),!0);this._innerUnionExtent(n)},t.prototype.calcNiceTicks=function(e){e=e||10;var a=this._extent.slice(),n=this._getExtentSpanWithBreaks();if(!(!isFinite(n)||n<=0)){var s=Yz(n),l=e/n*s;for(l<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var o=[S2(Lae(a[0]/s)*s),S2(Rae(a[1]/s)*s)];this._interval=s,this._intervalPrecision=Jg(s),this._niceExtent=o}},t.prototype.calcNiceExtent=function(e){r.prototype.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.contain=function(e){return e=P0(e)/P0(this.base),r.prototype.contain.call(this,e)},t.prototype.normalize=function(e){return e=P0(e)/P0(this.base),r.prototype.normalize.call(this,e)},t.prototype.scale=function(e){return e=r.prototype.scale.call(this,e),O0(this.base,e)},t.prototype.setBreaksFromOption=function(e){var a=Or();if(a){var n=a.logarithmicParseBreaksFromOption(e,this.base,we(this.parse,this)),s=n.parsedOriginal,l=n.parsedLogged;this._originalScale._innerSetBreak(s),this._innerSetBreak(l)}},t.type="log",t})(El);function z0(r,t){return S2(r,Ds(t))}Xo.registerClass(V9);var Iae=(function(){function r(t,e,a){this._prepareParams(t,e,a)}return r.prototype._prepareParams=function(t,e,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var s=e.get("min",!0);s==null&&(s=e.get("startValue",!0));var l=this._modelMinRaw=s;Le(l)?this._modelMinNum=B0(t,l({min:a[0],max:a[1]})):l!=="dataMin"&&(this._modelMinNum=B0(t,l));var o=this._modelMaxRaw=e.get("max",!0);if(Le(o)?this._modelMaxNum=B0(t,o({min:a[0],max:a[1]})):o!=="dataMax"&&(this._modelMaxNum=B0(t,o)),n)this._axisDataLen=e.getCategories().length;else{var c=e.get("boundaryGap"),u=de(c)?c:[c||0,c||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Bs(u[0],1),Bs(u[1],1)]}},r.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,a=this._dataMax,n=this._axisDataLen,s=this._boundaryGapInner,l=t?null:a-e||Math.abs(e),o=this._modelMinRaw==="dataMin"?e:this._modelMinNum,c=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,u=o!=null,d=c!=null;o==null&&(o=t?n?0:NaN:e-s[0]*l),c==null&&(c=t?n?n-1:NaN:a+s[1]*l),(o==null||!isFinite(o))&&(o=NaN),(c==null||!isFinite(c))&&(c=NaN);var h=Ta(o)||Ta(c)||t&&!n;this._needCrossZero&&(o>0&&c>0&&!u&&(o=0),o<0&&c<0&&!d&&(c=0));var p=this._determinedMin,g=this._determinedMax;return p!=null&&(o=p,u=!0),g!=null&&(c=g,d=!0),{min:o,max:c,minFixed:u,maxFixed:d,isBlank:h}},r.prototype.modifyDataMinMax=function(t,e){this[Oae[t]]=e},r.prototype.setDeterminedMinMax=function(t,e){var a=kae[t];this[a]=e},r.prototype.freeze=function(){this.frozen=!0},r})(),kae={min:"_determinedMin",max:"_determinedMax"},Oae={min:"_dataMin",max:"_dataMax"};function H9(r,t,e){var a=r.rawExtentInfo;return a||(a=new Iae(r,t,e),r.rawExtentInfo=a,a)}function B0(r,t){return t==null?null:Ta(t)?NaN:r.parse(t)}function G9(r,t){var e=r.type,a=H9(r,t,r.getExtent()).calculate();r.setBlank(a.isBlank);var n=a.min,s=a.max,l=t.ecModel;if(l&&e==="time"){var o=R9("bar",l),c=!1;if(B(o,function(h){c=c||h.getBaseAxis()===t.axis}),c){var u=L9(o),d=Pae(n,s,t,u);n=d.min,s=d.max}}return{extent:[n,s],fixMin:a.minFixed,fixMax:a.maxFixed}}function Pae(r,t,e,a){var n=e.axis.getExtent(),s=Math.abs(n[1]-n[0]),l=Nae(a,e.axis);if(l===void 0)return{min:r,max:t};var o=1/0;B(l,function(g){o=Math.min(g.offset,o)});var c=-1/0;B(l,function(g){c=Math.max(g.offset+g.width,c)}),o=Math.abs(o),c=Math.abs(c);var u=o+c,d=t-r,h=1-(o+c)/s,p=d/h-d;return t+=p*(c/u),r-=p*(o/u),{min:r,max:t}}function Mu(r,t){var e=t,a=G9(r,e),n=a.extent,s=e.get("splitNumber");r instanceof V9&&(r.base=e.get("logBase"));var l=r.type,o=e.get("interval"),c=l==="interval"||l==="time";r.setBreaksFromOption(F9(e)),r.setExtent(n[0],n[1]),r.calcNiceExtent({splitNumber:s,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:c?e.get("minInterval"):null,maxInterval:c?e.get("maxInterval"):null}),o!=null&&r.setInterval&&r.setInterval(o)}function Om(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new Ph({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new oA({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(Xo.getClass(t)||El)}}function zae(r){var t=r.scale.getExtent(),e=t[0],a=t[1];return!(e>0&&a>0||e<0&&a<0)}function hf(r){var t=r.getLabelModel().get("formatter");if(r.type==="time"){var e=FJ(t);return function(n,s){return r.scale.getFormattedLabel(n,s,e)}}else{if(je(t))return function(n){var s=r.scale.getLabel(n),l=t.replace("{value}",s??"");return l};if(Le(t)){if(r.type==="category")return function(n,s){return t(Cy(r,n),n.value-r.scale.getExtent()[0],null)};var a=Or();return function(n,s){var l=null;return a&&(l=a.makeAxisLabelFormatterParamBreak(l,n.break)),t(Cy(r,n),s,l)}}else return function(n){return r.scale.getLabel(n)}}}function Cy(r,t){return r.type==="category"?r.scale.getLabel(t):t.value}function cA(r){var t=r.get("interval");return t??"auto"}function U9(r){return r.type==="category"&&cA(r.getLabelModel())===0}function Ty(r,t){var e={};return B(r.mapDimensionsAll(t),function(a){e[sA(r,a)]=!0}),gt(e)}function Bae(r,t,e){t&&B(Ty(t,e),function(a){var n=t.getApproximateExtent(a);n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1])})}function zh(r){return r==="middle"||r==="center"}function tm(r){return r.getShallow("show")}function F9(r){var t=r.get("breaks",!0);if(t!=null)return!Or()||!Vae(r.axis)?void 0:t}function Vae(r){return(r.dim==="x"||r.dim==="y"||r.dim==="z"||r.dim==="single")&&r.type!=="category"}var ff=(function(){function r(){}return r.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},r.prototype.getCoordSysModel=function(){},r})();function Hae(r){return Di(null,r)}var Gae={isDimensionStacked:Al,enableDataStack:E9,getStackedDimension:sA};function Uae(r,t){var e=t;t instanceof dt||(e=new dt(t));var a=Om(e);return a.setExtent(r[0],r[1]),Mu(a,e),a}function Fae(r){yr(r,ff)}function Yae(r,t){return t=t||{},Gt(r,null,null,t.state!=="normal")}const Wae=Object.freeze(Object.defineProperty({__proto__:null,createDimensions:rae,createList:Hae,createScale:Uae,createSymbol:Er,createTextStyle:Yae,dataStack:Gae,enableHoverEmphasis:Mo,getECData:Xe,getLayoutRect:rr,mixinAxisModelCommonMethods:Fae},Symbol.toStringTag,{value:"Module"}));var $ae=1e-8;function R3(r,t){return Math.abs(r-t)<$ae}function Xc(r,t,e){var a=0,n=r[0];if(!n)return!1;for(var s=1;s<r.length;s++){var l=r[s];a+=il(n[0],n[1],l[0],l[1],t,e),n=l}var o=r[0];return(!R3(n[0],o[0])||!R3(n[1],o[1]))&&(a+=il(n[0],n[1],o[0],o[1],t,e)),a!==0}var qae=[];function yj(r,t){for(var e=0;e<r.length;e++)xr(r[e],r[e],t)}function L3(r,t,e,a){for(var n=0;n<r.length;n++){var s=r[n];a&&(s=a.project(s)),s&&isFinite(s[0])&&isFinite(s[1])&&(dl(t,t,s),hl(e,e,s))}}function Xae(r){for(var t=0,e=0,a=0,n=r.length,s=r[n-1][0],l=r[n-1][1],o=0;o<n;o++){var c=r[o][0],u=r[o][1],d=s*u-c*l;t+=d,e+=(s+c)*d,a+=(l+u)*d,s=c,l=u}return t?[e/t/3,a/t/3,t]:[r[0][0]||0,r[0][1]||0]}var Y9=(function(){function r(t){this.name=t}return r.prototype.setCenter=function(t){this._center=t},r.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},r})(),I3=(function(){function r(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return r})(),k3=(function(){function r(t){this.type="linestring",this.points=t}return r})(),W9=(function(r){re(t,r);function t(e,a,n){var s=r.call(this,e)||this;return s.type="geoJSON",s.geometries=a,s._center=n&&[n[0],n[1]],s}return t.prototype.calcCenter=function(){for(var e=this.geometries,a,n=0,s=0;s<e.length;s++){var l=e[s],o=l.exterior,c=o&&o.length;c>n&&(a=l,n=c)}if(a)return Xae(a.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(e){var a=this._rect;if(a&&!e)return a;var n=[1/0,1/0],s=[-1/0,-1/0],l=this.geometries;return B(l,function(o){o.type==="polygon"?L3(o.exterior,n,s,e):B(o.points,function(c){L3(c,n,s,e)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(s[0])&&isFinite(s[1])||(n[0]=n[1]=s[0]=s[1]=0),a=new We(n[0],n[1],s[0]-n[0],s[1]-n[1]),e||(this._rect=a),a},t.prototype.contain=function(e){var a=this.getBoundingRect(),n=this.geometries;if(!a.contain(e[0],e[1]))return!1;e:for(var s=0,l=n.length;s<l;s++){var o=n[s];if(o.type==="polygon"){var c=o.exterior,u=o.interiors;if(Xc(c,e[0],e[1])){for(var d=0;d<(u?u.length:0);d++)if(Xc(u[d],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,a,n,s){var l=this.getBoundingRect(),o=l.width/l.height;n?s||(s=n/o):n=o*s;for(var c=new We(e,a,n,s),u=l.calculateTransform(c),d=this.geometries,h=0;h<d.length;h++){var p=d[h];p.type==="polygon"?(yj(p.exterior,u),B(p.interiors,function(g){yj(g,u)})):B(p.points,function(g){yj(g,u)})}l=this._rect,l.copy(c),this._center=[l.x+l.width/2,l.y+l.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var a=new t(e,this.geometries,this._center);return a._rect=this._rect,a.transformTo=null,a},t})(Y9),Zae=(function(r){re(t,r);function t(e,a){var n=r.call(this,e)||this;return n.type="geoSVG",n._elOnlyForCalculate=a,n}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,a=e.getBoundingRect(),n=[a.x+a.width/2,a.y+a.height/2],s=Sm(qae),l=e;l&&!l.isGeoSVGGraphicRoot;)Is(s,l.getLocalTransform(),s),l=l.parent;return hs(s,s),xr(n,n,s),n},t})(Y9);function Kae(r){if(!r.UTF8Encoding)return r;var t=r,e=t.UTF8Scale;e==null&&(e=1024);var a=t.features;return B(a,function(n){var s=n.geometry,l=s.encodeOffsets,o=s.coordinates;if(l)switch(s.type){case"LineString":s.coordinates=$9(o,l,e);break;case"Polygon":bj(o,l,e);break;case"MultiLineString":bj(o,l,e);break;case"MultiPolygon":B(o,function(c,u){return bj(c,l[u],e)})}}),t.UTF8Encoding=!1,t}function bj(r,t,e){for(var a=0;a<r.length;a++)r[a]=$9(r[a],t[a],e)}function $9(r,t,e){for(var a=[],n=t[0],s=t[1],l=0;l<r.length;l+=2){var o=r.charCodeAt(l)-64,c=r.charCodeAt(l+1)-64;o=o>>1^-(o&1),c=c>>1^-(c&1),o+=n,c+=s,n=o,s=c,a.push([o/e,c/e])}return a}function C2(r,t){return r=Kae(r),pe(Ct(r.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var a=e.properties,n=e.geometry,s=[];switch(n.type){case"Polygon":var l=n.coordinates;s.push(new I3(l[0],l.slice(1)));break;case"MultiPolygon":B(n.coordinates,function(c){c[0]&&s.push(new I3(c[0],c.slice(1)))});break;case"LineString":s.push(new k3([n.coordinates]));break;case"MultiLineString":s.push(new k3(n.coordinates))}var o=new W9(a[t||"name"],s,a.cp);return o.properties=a,o})}const Qae=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER:VS,asc:Mn,getPercentWithPrecision:vK,getPixelPrecision:JC,getPrecision:Ds,getPrecisionSafe:Uz,isNumeric:rT,isRadianAroundZero:Mh,linearMap:Tt,nice:tT,numericToNumber:ji,parseDate:Ai,parsePercent:Ne,quantile:Ex,quantity:Yz,quantityExponent:bb,reformIntervals:HS,remRadian:eT,round:Cr},Symbol.toStringTag,{value:"Module"})),Jae=Object.freeze(Object.defineProperty({__proto__:null,format:Lm,parse:Ai,roundTime:py},Symbol.toStringTag,{value:"Module"})),ene=Object.freeze(Object.defineProperty({__proto__:null,Arc:Dm,BezierCurve:ef,BoundingRect:We,Circle:Ei,CompoundPath:Mm,Ellipse:Em,Group:Pe,Image:la,IncrementalDisplayable:M7,Line:Tr,LinearGradient:Pu,Polygon:Ma,Polyline:ma,RadialGradient:gT,Rect:it,Ring:Jh,Sector:Da,Text:vt,clipPointsByRect:yT,clipRectByRect:O7,createIcon:rf,extendPath:I7,extendShape:L7,getShapeClass:Wg,getTransform:Ro,initProps:Kt,makeImage:vT,makePath:Lh,mergePath:An,registerShape:ms,resizePath:xT,updateProps:Nt},Symbol.toStringTag,{value:"Module"})),tne=Object.freeze(Object.defineProperty({__proto__:null,addCommas:IT,capitalFirst:JJ,encodeHTML:Oa,formatTime:QJ,formatTpl:OT,getTextRect:ZJ,getTooltipMarker:J7,normalizeCssArray:sf,toCamelCase:kT,truncateText:ZK},Symbol.toStringTag,{value:"Module"})),rne=Object.freeze(Object.defineProperty({__proto__:null,bind:we,clone:Oe,curry:et,defaults:Ge,each:B,extend:ie,filter:Ct,indexOf:tt,inherits:YC,isArray:de,isFunction:Le,isObject:Ue,isString:je,map:pe,merge:rt,reduce:ds},Symbol.toStringTag,{value:"Module"}));var ane=ut(),Ag=ut(),Vs={estimate:1,determine:2};function Ay(r){return{out:{noPxChangeTryDetermine:[]},kind:r}}function q9(r,t){var e=pe(t,function(a){return r.scale.parse(a)});return r.type==="time"&&e.length>0&&(e.sort(),e.unshift(e[0]),e.push(e[e.length-1])),e}function nne(r,t){var e=r.getLabelModel().get("customValues");if(e){var a=hf(r),n=r.scale.getExtent(),s=q9(r,e),l=Ct(s,function(o){return o>=n[0]&&o<=n[1]});return{labels:pe(l,function(o){var c={value:o};return{formattedLabel:a(c),rawLabel:r.scale.getLabel(c),tickValue:o,time:void 0,break:void 0}})}}return r.type==="category"?ine(r,t):one(r)}function sne(r,t,e){var a=r.getTickModel().get("customValues");if(a){var n=r.scale.getExtent(),s=q9(r,a);return{ticks:Ct(s,function(l){return l>=n[0]&&l<=n[1]})}}return r.type==="category"?lne(r,t):{ticks:pe(r.scale.getTicks(e),function(l){return l.value})}}function ine(r,t){var e=r.getLabelModel(),a=X9(r,e,t);return!e.get("show")||r.scale.isBlank()?{labels:[]}:a}function X9(r,t,e){var a=une(r),n=cA(t),s=e.kind===Vs.estimate;if(!s){var l=K9(a,n);if(l)return l}var o,c;Le(n)?o=eV(r,n):(c=n==="auto"?dne(r,e):n,o=J9(r,c));var u={labels:o,labelCategoryInterval:c};return s?e.out.noPxChangeTryDetermine.push(function(){return T2(a,n,u),!0}):T2(a,n,u),u}function lne(r,t){var e=cne(r),a=cA(t),n=K9(e,a);if(n)return n;var s,l;if((!t.get("show")||r.scale.isBlank())&&(s=[]),Le(a))s=eV(r,a,!0);else if(a==="auto"){var o=X9(r,r.getLabelModel(),Ay(Vs.determine));l=o.labelCategoryInterval,s=pe(o.labels,function(c){return c.tickValue})}else l=a,s=J9(r,l,!0);return T2(e,a,{ticks:s,tickCategoryInterval:l})}function one(r){var t=r.scale.getTicks(),e=hf(r);return{labels:pe(t,function(a,n){return{formattedLabel:e(a,n),rawLabel:r.scale.getLabel(a),tickValue:a.value,time:a.time,break:a.break}})}}var cne=Z9("axisTick"),une=Z9("axisLabel");function Z9(r){return function(e){return Ag(e)[r]||(Ag(e)[r]={list:[]})}}function K9(r,t){for(var e=0;e<r.list.length;e++)if(r.list[e].key===t)return r.list[e].value}function T2(r,t,e){return r.list.push({key:t,value:e}),e}function dne(r,t){if(t.kind===Vs.estimate){var e=r.calculateCategoryInterval(t);return t.out.noPxChangeTryDetermine.push(function(){return Ag(r).autoInterval=e,!0}),e}var a=Ag(r).autoInterval;return a??(Ag(r).autoInterval=r.calculateCategoryInterval(t))}function hne(r,t){var e=t.kind,a=pne(r),n=hf(r),s=(a.axisRotate-a.labelRotate)/180*Math.PI,l=r.scale,o=l.getExtent(),c=l.count();if(o[1]-o[0]<1)return 0;var u=1,d=40;c>d&&(u=Math.max(1,Math.floor(c/d)));for(var h=o[0],p=r.dataToCoord(h+1)-r.dataToCoord(h),g=Math.abs(p*Math.cos(s)),v=Math.abs(p*Math.sin(s)),y=0,x=0;h<=o[1];h+=u){var b=0,N=0,w=xb(n({value:h}),a.font,"center","top");b=w.width*1.3,N=w.height*1.3,y=Math.max(y,b,7),x=Math.max(x,N,7)}var S=y/g,T=x/v;isNaN(S)&&(S=1/0),isNaN(T)&&(T=1/0);var A=Math.max(0,Math.floor(Math.min(S,T)));if(e===Vs.estimate)return t.out.noPxChangeTryDetermine.push(we(fne,null,r,A,c)),A;var C=Q9(r,A,c);return C??A}function fne(r,t,e){return Q9(r,t,e)==null}function Q9(r,t,e){var a=ane(r.model),n=r.getExtent(),s=a.lastAutoInterval,l=a.lastTickCount;if(s!=null&&l!=null&&Math.abs(s-t)<=1&&Math.abs(l-e)<=1&&s>t&&a.axisExtent0===n[0]&&a.axisExtent1===n[1])return s;a.lastTickCount=e,a.lastAutoInterval=t,a.axisExtent0=n[0],a.axisExtent1=n[1]}function pne(r){var t=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function J9(r,t,e){var a=hf(r),n=r.scale,s=n.getExtent(),l=r.getLabelModel(),o=[],c=Math.max((t||0)+1,1),u=s[0],d=n.count();u!==0&&c>1&&d/c>2&&(u=Math.round(Math.ceil(u/c)*c));var h=U9(r),p=l.get("showMinLabel")||h,g=l.get("showMaxLabel")||h;p&&u!==s[0]&&y(s[0]);for(var v=u;v<=s[1];v+=c)y(v);g&&v-c!==s[1]&&y(s[1]);function y(x){var b={value:x};o.push(e?x:{formattedLabel:a(b),rawLabel:n.getLabel(b),tickValue:x,time:void 0,break:void 0})}return o}function eV(r,t,e){var a=r.scale,n=hf(r),s=[];return B(a.getTicks(),function(l){var o=a.getLabel(l),c=l.value;t(l.value,o)&&s.push(e?c:{formattedLabel:n(l),rawLabel:o,tickValue:c,time:void 0,break:void 0})}),s}var O3=[0,1],vs=(function(){function r(t,e,a){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=a||[0,0]}return r.prototype.contain=function(t){var e=this._extent,a=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return t>=a&&t<=n},r.prototype.containData=function(t){return this.scale.contain(this.scale.parse(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(t){return JC(t||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(t,e){var a=this._extent;a[0]=t,a[1]=e},r.prototype.dataToCoord=function(t,e){var a=this._extent,n=this.scale;return t=n.normalize(n.parse(t)),this.onBand&&n.type==="ordinal"&&(a=a.slice(),P3(a,n.count())),Tt(t,O3,a,e)},r.prototype.coordToData=function(t,e){var a=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(a=a.slice(),P3(a,n.count()));var s=Tt(t,a,O3,e);return this.scale.scale(s)},r.prototype.pointToData=function(t,e){},r.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),a=sne(this,e,{breakTicks:t.breakTicks,pruneByBreak:t.pruneByBreak}),n=a.ticks,s=pe(n,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),l=e.get("alignWithLabel");return gne(this,s,l,t.clamp),s},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var a=this.scale.getMinorTicks(e),n=pe(a,function(s){return pe(s,function(l){return{coord:this.dataToCoord(l),tickValue:l}},this)},this);return n},r.prototype.getViewLabels=function(t){return t=t||Ay(Vs.determine),nne(this,t).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),a=e[1]-e[0]+(this.onBand?1:0);a===0&&(a=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/a},r.prototype.calculateCategoryInterval=function(t){return t=t||Ay(Vs.determine),hne(this,t)},r})();function P3(r,t){var e=r[1]-r[0],a=t,n=e/a/2;r[0]+=n,r[1]-=n}function gne(r,t,e,a){var n=t.length;if(!r.onBand||e||!n)return;var s=r.getExtent(),l,o;if(n===1)t[0].coord=s[0],t[0].onBand=!0,l=t[1]={coord:s[1],tickValue:t[0].tickValue,onBand:!0};else{var c=t[n-1].tickValue-t[0].tickValue,u=(t[n-1].coord-t[0].coord)/c;B(t,function(g){g.coord-=u/2,g.onBand=!0});var d=r.scale.getExtent();o=1+d[1]-t[n-1].tickValue,l={coord:t[n-1].coord+u*o,tickValue:d[1]+1,onBand:!0},t.push(l)}var h=s[0]>s[1];p(t[0].coord,s[0])&&(a?t[0].coord=s[0]:t.shift()),a&&p(s[0],t[0].coord)&&t.unshift({coord:s[0],onBand:!0}),p(s[1],l.coord)&&(a?l.coord=s[1]:t.pop()),a&&p(l.coord,s[1])&&t.push({coord:s[1],onBand:!0});function p(g,v){return g=Cr(g),v=Cr(v),h?g>v:g<v}}function mne(r){var t=ct.extend(r);return ct.registerClass(t),t}function vne(r){var t=Yt.extend(r);return Yt.registerClass(t),t}function xne(r){var t=zt.extend(r);return zt.registerClass(t),t}function yne(r){var t=Pt.extend(r);return Pt.registerClass(t),t}var kp=Math.PI*2,zc=wi.CMD,bne=["top","right","bottom","left"];function _ne(r,t,e,a,n){var s=e.width,l=e.height;switch(r){case"top":a.set(e.x+s/2,e.y-t),n.set(0,-1);break;case"bottom":a.set(e.x+s/2,e.y+l+t),n.set(0,1);break;case"left":a.set(e.x-t,e.y+l/2),n.set(-1,0);break;case"right":a.set(e.x+s+t,e.y+l/2),n.set(1,0);break}}function Nne(r,t,e,a,n,s,l,o,c){l-=r,o-=t;var u=Math.sqrt(l*l+o*o);l/=u,o/=u;var d=l*e+r,h=o*e+t;if(Math.abs(a-n)%kp<1e-4)return c[0]=d,c[1]=h,u-e;if(s){var p=a;a=Rn(n),n=Rn(p)}else a=Rn(a),n=Rn(n);a>n&&(n+=kp);var g=Math.atan2(o,l);if(g<0&&(g+=kp),g>=a&&g<=n||g+kp>=a&&g+kp<=n)return c[0]=d,c[1]=h,u-e;var v=e*Math.cos(a)+r,y=e*Math.sin(a)+t,x=e*Math.cos(n)+r,b=e*Math.sin(n)+t,N=(v-l)*(v-l)+(y-o)*(y-o),w=(x-l)*(x-l)+(b-o)*(b-o);return N<w?(c[0]=v,c[1]=y,Math.sqrt(N)):(c[0]=x,c[1]=b,Math.sqrt(w))}function Ey(r,t,e,a,n,s,l,o){var c=n-r,u=s-t,d=e-r,h=a-t,p=Math.sqrt(d*d+h*h);d/=p,h/=p;var g=c*d+u*h,v=g/p;o&&(v=Math.min(Math.max(v,0),1)),v*=p;var y=l[0]=r+v*d,x=l[1]=t+v*h;return Math.sqrt((y-n)*(y-n)+(x-s)*(x-s))}function tV(r,t,e,a,n,s,l){e<0&&(r=r+e,e=-e),a<0&&(t=t+a,a=-a);var o=r+e,c=t+a,u=l[0]=Math.min(Math.max(n,r),o),d=l[1]=Math.min(Math.max(s,t),c);return Math.sqrt((u-n)*(u-n)+(d-s)*(d-s))}var Ts=[];function jne(r,t,e){var a=tV(t.x,t.y,t.width,t.height,r.x,r.y,Ts);return e.set(Ts[0],Ts[1]),a}function wne(r,t,e){for(var a=0,n=0,s=0,l=0,o,c,u=1/0,d=t.data,h=r.x,p=r.y,g=0;g<d.length;){var v=d[g++];g===1&&(a=d[g],n=d[g+1],s=a,l=n);var y=u;switch(v){case zc.M:s=d[g++],l=d[g++],a=s,n=l;break;case zc.L:y=Ey(a,n,d[g],d[g+1],h,p,Ts,!0),a=d[g++],n=d[g++];break;case zc.C:y=jz(a,n,d[g++],d[g++],d[g++],d[g++],d[g],d[g+1],h,p,Ts),a=d[g++],n=d[g++];break;case zc.Q:y=Sz(a,n,d[g++],d[g++],d[g],d[g+1],h,p,Ts),a=d[g++],n=d[g++];break;case zc.A:var x=d[g++],b=d[g++],N=d[g++],w=d[g++],S=d[g++],T=d[g++];g+=1;var A=!!(1-d[g++]);o=Math.cos(S)*N+x,c=Math.sin(S)*w+b,g<=1&&(s=o,l=c);var C=(h-x)*w/N+x;y=Nne(x,b,w,S,S+T,A,C,p,Ts),a=Math.cos(S+T)*N+x,n=Math.sin(S+T)*w+b;break;case zc.R:s=a=d[g++],l=n=d[g++];var M=d[g++],R=d[g++];y=tV(s,l,M,R,h,p,Ts);break;case zc.Z:y=Ey(a,n,s,l,h,p,Ts,!0),a=s,n=l;break}y<u&&(u=y,e.set(Ts[0],Ts[1]))}return u}var Ms=new Ye,Zt=new Ye,jr=new Ye,mi=new Ye,hi=new Ye;function z3(r,t){if(r){var e=r.getTextGuideLine(),a=r.getTextContent();if(a&&e){var n=r.textGuideLineConfig||{},s=[[0,0],[0,0],[0,0]],l=n.candidates||bne,o=a.getBoundingRect().clone();o.applyTransform(a.getComputedTransform());var c=1/0,u=n.anchor,d=r.getComputedTransform(),h=d&&hs([],d),p=t.get("length2")||0;u&&jr.copy(u);for(var g=0;g<l.length;g++){var v=l[g];_ne(v,0,o,Ms,mi),Ye.scaleAndAdd(Zt,Ms,mi,p),Zt.transform(h);var y=r.getBoundingRect(),x=u?u.distance(Zt):r instanceof ht?wne(Zt,r.path,jr):jne(Zt,y,jr);x<c&&(c=x,Zt.transform(d),jr.transform(d),jr.toArray(s[0]),Zt.toArray(s[1]),Ms.toArray(s[2]))}rV(s,t.get("minTurnAngle")),e.setShape({points:s})}}}var Dy=[],$a=new Ye;function rV(r,t){if(t<=180&&t>0){t=t/180*Math.PI,Ms.fromArray(r[0]),Zt.fromArray(r[1]),jr.fromArray(r[2]),Ye.sub(mi,Ms,Zt),Ye.sub(hi,jr,Zt);var e=mi.len(),a=hi.len();if(!(e<.001||a<.001)){mi.scale(1/e),hi.scale(1/a);var n=mi.dot(hi),s=Math.cos(t);if(s<n){var l=Ey(Zt.x,Zt.y,jr.x,jr.y,Ms.x,Ms.y,Dy,!1);$a.fromArray(Dy),$a.scaleAndAdd(hi,l/Math.tan(Math.PI-t));var o=jr.x!==Zt.x?($a.x-Zt.x)/(jr.x-Zt.x):($a.y-Zt.y)/(jr.y-Zt.y);if(isNaN(o))return;o<0?Ye.copy($a,Zt):o>1&&Ye.copy($a,jr),$a.toArray(r[1])}}}}function Sne(r,t,e){if(e<=180&&e>0){e=e/180*Math.PI,Ms.fromArray(r[0]),Zt.fromArray(r[1]),jr.fromArray(r[2]),Ye.sub(mi,Zt,Ms),Ye.sub(hi,jr,Zt);var a=mi.len(),n=hi.len();if(!(a<.001||n<.001)){mi.scale(1/a),hi.scale(1/n);var s=mi.dot(t),l=Math.cos(e);if(s<l){var o=Ey(Zt.x,Zt.y,jr.x,jr.y,Ms.x,Ms.y,Dy,!1);$a.fromArray(Dy);var c=Math.PI/2,u=Math.acos(hi.dot(t)),d=c+u-e;if(d>=c)Ye.copy($a,jr);else{$a.scaleAndAdd(hi,o/Math.tan(Math.PI/2-d));var h=jr.x!==Zt.x?($a.x-Zt.x)/(jr.x-Zt.x):($a.y-Zt.y)/(jr.y-Zt.y);if(isNaN(h))return;h<0?Ye.copy($a,Zt):h>1&&Ye.copy($a,jr)}$a.toArray(r[1])}}}}function _j(r,t,e,a){var n=e==="normal",s=n?r:r.ensureState(e);s.ignore=t;var l=a.get("smooth");l&&l===!0&&(l=.3),s.shape=s.shape||{},l>0&&(s.shape.smooth=l);var o=a.getModel("lineStyle").getLineStyle();n?r.useStyle(o):s.style=o}function Cne(r,t){var e=t.smooth,a=t.points;if(a)if(r.moveTo(a[0][0],a[0][1]),e>0&&a.length>=3){var n=ul(a[0],a[1]),s=ul(a[1],a[2]);if(!n||!s){r.lineTo(a[1][0],a[1][1]),r.lineTo(a[2][0],a[2][1]);return}var l=Math.min(n,s)*e,o=xg([],a[1],a[0],l/n),c=xg([],a[1],a[2],l/s),u=xg([],o,c,.5);r.bezierCurveTo(o[0],o[1],o[0],o[1],u[0],u[1]),r.bezierCurveTo(c[0],c[1],c[0],c[1],a[2][0],a[2][1])}else for(var d=1;d<a.length;d++)r.lineTo(a[d][0],a[d][1])}function uA(r,t,e){var a=r.getTextGuideLine(),n=r.getTextContent();if(!n){a&&r.removeTextGuideLine();return}for(var s=t.normal,l=s.get("show"),o=n.ignore,c=0;c<Fg.length;c++){var u=Fg[c],d=t[u],h=u==="normal";if(d){var p=d.get("show"),g=h?o:Me(n.states[u]&&n.states[u].ignore,o);if(g||!Me(p,l)){var v=h?a:a&&a.states[u];v&&(v.ignore=!0),a&&_j(a,!0,u,d);continue}a||(a=new ma,r.setTextGuideLine(a),!h&&(o||!l)&&_j(a,!0,"normal",t.normal),r.stateProxy&&(a.stateProxy=r.stateProxy)),_j(a,!1,u,d)}}if(a){Ge(a.style,e),a.style.fill=null;var y=s.get("showAbove"),x=r.textGuideLineConfig=r.textGuideLineConfig||{};x.showAbove=y||!1,a.buildPath=Cne}}function dA(r,t){t=t||"labelLine";for(var e={normal:r.getModel(t)},a=0;a<Za.length;a++){var n=Za[a];e[n]=r.getModel([n,t])}return e}var B3=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],Tne=1,My=2,aV=Tne|My;function Ry(r,t,e){e=e||aV,t?r.dirty|=e:r.dirty&=~e}function nV(r,t){return t=t||aV,r.dirty==null||!!(r.dirty&t)}function Ci(r){if(r)return nV(r)&&sV(r,r.label,r),r}function sV(r,t,e){var a=t.getComputedTransform();r.transform=_T(r.transform,a);var n=r.localRect=$g(r.localRect,t.getBoundingRect()),s=t.style,l=s.margin,o=e&&e.marginForce,c=e&&e.minMarginForce,u=e&&e.marginDefault,d=s.__marginType;d==null&&u&&(l=u,d=ph.textMargin);for(var h=0;h<4;h++)Nj[h]=d===ph.minMargin&&c&&c[h]!=null?c[h]:o&&o[h]!=null?o[h]:l?l[h]:0;d===ph.textMargin&&Au(n,Nj,!1,!1);var p=r.rect=$g(r.rect,n);return a&&p.applyTransform(a),d===ph.minMargin&&Au(p,Nj,!1,!1),r.axisAligned=bT(a),(r.label=r.label||{}).ignore=t.ignore,Ry(r,!1),Ry(r,!0,My),r}var Nj=[0,0,0,0];function Ane(r,t,e){return r.transform=_T(r.transform,e),r.localRect=$g(r.localRect,t),r.rect=$g(r.rect,t),e&&r.rect.applyTransform(e),r.axisAligned=bT(e),r.obb=void 0,(r.label=r.label||{}).ignore=!1,r}function A2(r,t){if(r){r.label.x+=t.x,r.label.y+=t.y,r.label.markRedraw();var e=r.transform;e&&(e[4]+=t.x,e[5]+=t.y);var a=r.rect;a&&(a.x+=t.x,a.y+=t.y);var n=r.obb;n&&n.fromBoundingRect(r.localRect,e)}}function E2(r,t){for(var e=0;e<B3.length;e++){var a=B3[e];r[a]==null&&(r[a]=t[a])}return Ci(r)}function V3(r){var t=r.obb;return(!t||nV(r,My))&&(r.obb=t=t||new D7,t.fromBoundingRect(r.localRect,r.transform),Ry(r,!1,My)),t}function D2(r,t,e,a,n){var s=r.length,l=Ke[t],o=zr[t];if(s<2)return!1;r.sort(function(C,M){return C.rect[l]-M.rect[l]});for(var c=0,u,d=!1,h=0;h<s;h++){var p=r[h],g=p.rect;u=g[l]-c,u<0&&(g[l]-=u,p.label[l]-=u,d=!0),c=g[l]+g[o]}var v=r[0],y=r[s-1],x,b;N(),x<0&&T(-x,.8),b<0&&T(b,.8),N(),w(x,b,1),w(b,x,-1),N(),x<0&&A(-x),b<0&&A(b);function N(){x=v.rect[l]-e,b=a-y.rect[l]-y.rect[o]}function w(C,M,R){if(C<0){var k=Math.min(M,-C);if(k>0){S(k*R,0,s);var L=k+C;L<0&&T(-L*R,1)}else T(-C*R,1)}}function S(C,M,R){C!==0&&(d=!0);for(var k=M;k<R;k++){var L=r[k],O=L.rect;O[l]+=C,L.label[l]+=C}}function T(C,M){for(var R=[],k=0,L=1;L<s;L++){var O=r[L-1].rect,z=Math.max(r[L].rect[l]-O[l]-O[o],0);R.push(z),k+=z}if(k){var U=Math.min(Math.abs(C)/k,M);if(C>0)for(var L=0;L<s-1;L++){var H=R[L]*U;S(H,0,L+1)}else for(var L=s-1;L>0;L--){var H=R[L-1]*U;S(-H,L,s)}}}function A(C){var M=C<0?-1:1;C=Math.abs(C);for(var R=Math.ceil(C/(s-1)),k=0;k<s-1;k++)if(M>0?S(R,0,k+1):S(-R,s-k-1,s),C-=R,C<=0)return}return d}function Ene(r){for(var t=0;t<r.length;t++){var e=r[t],a=e.defaultAttr,n=e.labelLine;e.label.attr("ignore",a.ignore),n&&n.attr("ignore",a.labelGuideIgnore)}}function iV(r){var t=[];r.sort(function(u,d){return(d.suggestIgnore?1:0)-(u.suggestIgnore?1:0)||d.priority-u.priority});function e(u){if(!u.ignore){var d=u.ensureState("emphasis");d.ignore==null&&(d.ignore=!1)}u.ignore=!0}for(var a=0;a<r.length;a++){var n=Ci(r[a]);if(!n.label.ignore){for(var s=n.label,l=n.labelLine,o=!1,c=0;c<t.length;c++)if(Bb(n,t[c],null,{touchThreshold:.05})){o=!0;break}o?(e(s),l&&e(l)):t.push(n)}}}function Bb(r,t,e,a){return!r||!t||r.label&&r.label.ignore||t.label&&t.label.ignore||!r.rect.intersect(t.rect,e,a)?!1:r.axisAligned&&t.axisAligned?!0:V3(r).intersect(V3(t),e,a)}function Dne(r){if(r){for(var t=[],e=0;e<r.length;e++)t.push(r[e].slice());return t}}function Mne(r,t){var e=r.label,a=t&&t.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:Dne(a&&a.shape.points)}}var H3=["align","verticalAlign","width","height","fontSize"],Fa=new fl,jj=ut(),Rne=ut();function V0(r,t,e){for(var a=0;a<e.length;a++){var n=e[a];t[n]!=null&&(r[n]=t[n])}}var H0=["x","y","rotation"],Lne=(function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(t,e,a,n,s){var l=n.style,o=n.__hostTarget,c=o.textConfig||{},u=n.getComputedTransform(),d=n.getBoundingRect().plain();We.applyTransform(d,d,u),u?Fa.setLocalTransform(u):(Fa.x=Fa.y=Fa.rotation=Fa.originX=Fa.originY=0,Fa.scaleX=Fa.scaleY=1),Fa.rotation=Rn(Fa.rotation);var h=n.__hostTarget,p;if(h){p=h.getBoundingRect().plain();var g=h.getComputedTransform();We.applyTransform(p,p,g)}var v=p&&h.getTextGuideLine();this._labelList.push({label:n,labelLine:v,seriesModel:a,dataIndex:t,dataType:e,layoutOptionOrCb:s,layoutOption:null,rect:d,hostRect:p,priority:p?p.width*p.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:v&&v.ignore,x:Fa.x,y:Fa.y,scaleX:Fa.scaleX,scaleY:Fa.scaleY,rotation:Fa.rotation,style:{x:l.x,y:l.y,align:l.align,verticalAlign:l.verticalAlign,width:l.width,height:l.height,fontSize:l.fontSize},cursor:n.cursor,attachedPos:c.position,attachedRot:c.rotation}})},r.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var a=t.__model,n=a.get("labelLayout");(Le(n)||gt(n).length)&&t.group.traverse(function(s){if(s.ignore)return!0;var l=s.getTextContent(),o=Xe(s);l&&!l.disableLabelLayout&&e._addLabel(o.dataIndex,o.dataType,a,l,n)})},r.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),a=t.getHeight();function n(w,S){return function(){z3(w,S)}}for(var s=0;s<this._labelList.length;s++){var l=this._labelList[s],o=l.label,c=o.__hostTarget,u=l.defaultAttr,d=void 0;Le(l.layoutOptionOrCb)?d=l.layoutOptionOrCb(Mne(l,c)):d=l.layoutOptionOrCb,d=d||{},l.layoutOption=d;var h=Math.PI/180;c&&c.setTextConfig({local:!1,position:d.x!=null||d.y!=null?null:u.attachedPos,rotation:d.rotate!=null?d.rotate*h:u.attachedRot,offset:[d.dx||0,d.dy||0]});var p=!1;if(d.x!=null?(o.x=Ne(d.x,e),o.setStyle("x",0),p=!0):(o.x=u.x,o.setStyle("x",u.style.x)),d.y!=null?(o.y=Ne(d.y,a),o.setStyle("y",0),p=!0):(o.y=u.y,o.setStyle("y",u.style.y)),d.labelLinePoints){var g=c.getTextGuideLine();g&&(g.setShape({points:d.labelLinePoints}),p=!1)}var v=jj(o);v.needsUpdateLabelLine=p,o.rotation=d.rotate!=null?d.rotate*h:u.rotation,o.scaleX=u.scaleX,o.scaleY=u.scaleY;for(var y=0;y<H3.length;y++){var x=H3[y];o.setStyle(x,d[x]!=null?d[x]:u.style[x])}if(d.draggable){if(o.draggable=!0,o.cursor="move",c){var b=l.seriesModel;if(l.dataIndex!=null){var N=l.seriesModel.getData(l.dataType);b=N.getItemModel(l.dataIndex)}o.on("drag",n(c,b.getModel("labelLine")))}}else o.off("drag"),o.cursor=u.cursor}},r.prototype.layout=function(t){var e=t.getWidth(),a=t.getHeight(),n=[];B(this._labelList,function(c){c.defaultAttr.ignore||n.push(E2({},c))});var s=Ct(n,function(c){return c.layoutOption.moveOverlap==="shiftX"}),l=Ct(n,function(c){return c.layoutOption.moveOverlap==="shiftY"});D2(s,0,0,e),D2(l,1,0,a);var o=Ct(n,function(c){return c.layoutOption.hideOverlap});Ene(o),iV(o)},r.prototype.processLabelsOverall=function(){var t=this;B(this._chartViewList,function(e){var a=e.__model,n=e.ignoreLabelLineUpdate,s=a.isAnimationEnabled();e.group.traverse(function(l){if(l.ignore&&!l.forceLabelAnimation)return!0;var o=!n,c=l.getTextContent();!o&&c&&(o=jj(c).needsUpdateLabelLine),o&&t._updateLabelLine(l,a),s&&t._animateLabels(l,a)})})},r.prototype._updateLabelLine=function(t,e){var a=t.getTextContent(),n=Xe(t),s=n.dataIndex;if(a&&s!=null){var l=e.getData(n.dataType),o=l.getItemModel(s),c={},u=l.getItemVisual(s,"style");if(u){var d=l.getVisual("drawType");c.stroke=u[d]}var h=o.getModel("labelLine");uA(t,dA(o),c),z3(t,h)}},r.prototype._animateLabels=function(t,e){var a=t.getTextContent(),n=t.getTextGuideLine();if(a&&(t.forceLabelAnimation||!a.ignore&&!a.invisible&&!t.disableLabelAnimation&&!jh(t))){var s=jj(a),l=s.oldLayout,o=Xe(t),c=o.dataIndex,u={x:a.x,y:a.y,rotation:a.rotation},d=e.getData(o.dataType);if(l){a.attr(l);var p=t.prevStates;p&&(tt(p,"select")>=0&&a.attr(s.oldLayoutSelect),tt(p,"emphasis")>=0&&a.attr(s.oldLayoutEmphasis)),Nt(a,u,e,c)}else if(a.attr(u),!af(a).valueAnimation){var h=Me(a.style.opacity,1);a.style.opacity=0,Kt(a,{style:{opacity:h}},e,c)}if(s.oldLayout=u,a.states.select){var g=s.oldLayoutSelect={};V0(g,u,H0),V0(g,a.states.select,H0)}if(a.states.emphasis){var v=s.oldLayoutEmphasis={};V0(v,u,H0),V0(v,a.states.emphasis,H0)}G7(a,c,d,e,e)}if(n&&!n.ignore&&!n.invisible){var s=Rne(n),l=s.oldLayout,y={points:n.shape.points};l?(n.attr({shape:l}),Nt(n,{shape:y},e)):(n.setShape(y),n.style.strokePercent=0,Kt(n,{style:{strokePercent:1}},e)),s.oldLayout=y}},r})(),wj=ut();function Ine(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,e,a){var n=wj(e).labelManager;n||(n=wj(e).labelManager=new Lne),n.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(t,e,a){var n=wj(e).labelManager;a.updatedSeries.forEach(function(s){n.addLabelsOfSeries(e.getViewOfSeriesModel(s))}),n.updateLayoutConfig(e),n.layout(e),n.processLabelsOverall()})}var Sj=Math.sin,Cj=Math.cos,lV=Math.PI,Bc=Math.PI*2,kne=180/lV,oV=(function(){function r(){}return r.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},r.prototype.moveTo=function(t,e){this._add("M",t,e)},r.prototype.lineTo=function(t,e){this._add("L",t,e)},r.prototype.bezierCurveTo=function(t,e,a,n,s,l){this._add("C",t,e,a,n,s,l)},r.prototype.quadraticCurveTo=function(t,e,a,n){this._add("Q",t,e,a,n)},r.prototype.arc=function(t,e,a,n,s,l){this.ellipse(t,e,a,a,0,n,s,l)},r.prototype.ellipse=function(t,e,a,n,s,l,o,c){var u=o-l,d=!c,h=Math.abs(u),p=wo(h-Bc)||(d?u>=Bc:-u>=Bc),g=u>0?u%Bc:u%Bc+Bc,v=!1;p?v=!0:wo(h)?v=!1:v=g>=lV==!!d;var y=t+a*Cj(l),x=e+n*Sj(l);this._start&&this._add("M",y,x);var b=Math.round(s*kne);if(p){var N=1/this._p,w=(d?1:-1)*(Bc-N);this._add("A",a,n,b,1,+d,t+a*Cj(l+w),e+n*Sj(l+w)),N>.01&&this._add("A",a,n,b,0,+d,y,x)}else{var S=t+a*Cj(o),T=e+n*Sj(o);this._add("A",a,n,b,+v,+d,S,T)}},r.prototype.rect=function(t,e,a,n){this._add("M",t,e),this._add("l",a,0),this._add("l",0,n),this._add("l",-a,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(t,e,a,n,s,l,o,c,u){for(var d=[],h=this._p,p=1;p<arguments.length;p++){var g=arguments[p];if(isNaN(g)){this._invalid=!0;return}d.push(Math.round(g*h)/h)}this._d.push(t+d.join(" ")),this._start=t==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r})(),hA="none",One=Math.round;function Pne(r){var t=r.fill;return t!=null&&t!==hA}function zne(r){var t=r.stroke;return t!=null&&t!==hA}var M2=["lineCap","miterLimit","lineJoin"],Bne=pe(M2,function(r){return"stroke-"+r.toLowerCase()});function Vne(r,t,e,a){var n=t.opacity==null?1:t.opacity;if(e instanceof la){r("opacity",n);return}if(Pne(t)){var s=Gg(t.fill);r("fill",s.color);var l=t.fillOpacity!=null?t.fillOpacity*s.opacity*n:s.opacity*n;l<1&&r("fill-opacity",l)}else r("fill",hA);if(zne(t)){var o=Gg(t.stroke);r("stroke",o.color);var c=t.strokeNoScale?e.getLineScale():1,u=c?(t.lineWidth||0)/c:0,d=t.strokeOpacity!=null?t.strokeOpacity*o.opacity*n:o.opacity*n,h=t.strokeFirst;if(u!==1&&r("stroke-width",u),h&&r("paint-order",h?"stroke":"fill"),d<1&&r("stroke-opacity",d),t.lineDash){var p=$T(e),g=p[0],v=p[1];g&&(v=One(v||0),r("stroke-dasharray",g.join(",")),(v||a)&&r("stroke-dashoffset",v))}for(var y=0;y<M2.length;y++){var x=M2[y];if(t[x]!==oy[x]){var b=t[x]||oy[x];b&&r(Bne[y],b)}}}}var cV="http://www.w3.org/2000/svg",uV="http://www.w3.org/1999/xlink",Hne="http://www.w3.org/2000/xmlns/",Gne="http://www.w3.org/XML/1998/namespace",G3="ecmeta_";function dV(r){return document.createElementNS(cV,r)}function aa(r,t,e,a,n){return{tag:r,attrs:e||{},children:a,text:n,key:t}}function Une(r,t){var e=[];if(t)for(var a in t){var n=t[a],s=a;n!==!1&&(n!==!0&&n!=null&&(s+='="'+n+'"'),e.push(s))}return"<"+r+" "+e.join(" ")+">"}function Fne(r){return"</"+r+">"}function fA(r,t){t=t||{};var e=t.newline?`
`:"";function a(n){var s=n.children,l=n.tag,o=n.attrs,c=n.text;return Une(l,o)+(l!=="style"?Oa(c):c||"")+(s?""+e+pe(s,function(u){return a(u)}).join(e)+e:"")+Fne(l)}return a(r)}function Yne(r,t,e){e=e||{};var a=e.newline?`
`:"",n=" {"+a,s=a+"}",l=pe(gt(r),function(c){return c+n+pe(gt(r[c]),function(u){return u+":"+r[c][u]+";"}).join(a)+s}).join(a),o=pe(gt(t),function(c){return"@keyframes "+c+n+pe(gt(t[c]),function(u){return u+n+pe(gt(t[c][u]),function(d){var h=t[c][u][d];return d==="d"&&(h='path("'+h+'")'),d+":"+h+";"}).join(a)+s}).join(a)+s}).join(a);return!l&&!o?"":["<![CDATA[",l,o,"]]>"].join(a)}function R2(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function U3(r,t,e,a){return aa("svg","root",{width:r,height:t,xmlns:cV,"xmlns:xlink":uV,version:"1.1",baseProfile:"full",viewBox:a?"0 0 "+r+" "+t:!1},e)}var Wne=0;function hV(){return Wne++}var F3={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Gc="transform-origin";function $ne(r,t,e){var a=ie({},r.shape);ie(a,t),r.buildPath(e,a);var n=new oV;return n.reset(Rz(r)),e.rebuildPath(n,1),n.generateStr(),n.getStr()}function qne(r,t){var e=t.originX,a=t.originY;(e||a)&&(r[Gc]=e+"px "+a+"px")}var Xne={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function fV(r,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=r,e}function Zne(r,t,e){var a=r.shape.paths,n={},s,l;if(B(a,function(c){var u=R2(e.zrId);u.animation=!0,Vb(c,{},u,!0);var d=u.cssAnims,h=u.cssNodes,p=gt(d),g=p.length;if(g){l=p[g-1];var v=d[l];for(var y in v){var x=v[y];n[y]=n[y]||{d:""},n[y].d+=x.d||""}for(var b in h){var N=h[b].animation;N.indexOf(l)>=0&&(s=N)}}}),!!s){t.d=!1;var o=fV(n,e);return s.replace(l,o)}}function Y3(r){return je(r)?F3[r]?"cubic-bezier("+F3[r]+")":XC(r)?r:"":""}function Vb(r,t,e,a){var n=r.animators,s=n.length,l=[];if(r instanceof Mm){var o=Zne(r,t,e);if(o)l.push(o);else if(!s)return}else if(!s)return;for(var c={},u=0;u<s;u++){var d=n[u],h=[d.getMaxTime()/1e3+"s"],p=Y3(d.getClip().easing),g=d.getDelay();p?h.push(p):h.push("linear"),g&&h.push(g/1e3+"s"),d.getLoop()&&h.push("infinite");var v=h.join(" ");c[v]=c[v]||[v,[]],c[v][1].push(d)}function y(N){var w=N[1],S=w.length,T={},A={},C={},M="animation-timing-function";function R(Ee,be,He){for(var Se=Ee.getTracks(),Ie=Ee.getMaxTime(),ft=0;ft<Se.length;ft++){var le=Se[ft];if(le.needsAnimate()){var ze=le.keyframes,$e=le.propName;if(He&&($e=He($e)),$e)for(var ot=0;ot<ze.length;ot++){var Rt=ze[ot],or=Math.round(Rt.time/Ie*100)+"%",Qr=Y3(Rt.easing),Vr=Rt.rawValue;(je(Vr)||xt(Vr))&&(be[or]=be[or]||{},be[or][$e]=Rt.rawValue,Qr&&(be[or][M]=Qr))}}}}for(var k=0;k<S;k++){var L=w[k],O=L.targetName;O?O==="shape"&&R(L,A):!a&&R(L,T)}for(var z in T){var U={};sy(U,r),ie(U,T[z]);var H=Lz(U),P=T[z][M];C[z]=H?{transform:H}:{},qne(C[z],U),P&&(C[z][M]=P)}var F,Y=!0;for(var z in A){C[z]=C[z]||{};var X=!F,P=A[z][M];X&&(F=new wi);var q=F.len();F.reset(),C[z].d=$ne(r,A[z],F);var G=F.len();if(!X&&q!==G){Y=!1;break}P&&(C[z][M]=P)}if(!Y)for(var z in C)delete C[z].d;if(!a)for(var k=0;k<S;k++){var L=w[k],O=L.targetName;O==="style"&&R(L,C,function(Se){return Xne[Se]})}for(var $=gt(C),Z=!0,te,k=1;k<$.length;k++){var me=$[k-1],Ce=$[k];if(C[me][Gc]!==C[Ce][Gc]){Z=!1;break}te=C[me][Gc]}if(Z&&te){for(var z in C)C[z][Gc]&&delete C[z][Gc];t[Gc]=te}if(Ct($,function(Ee){return gt(C[Ee]).length>0}).length){var Ve=fV(C,e);return Ve+" "+N[0]+" both"}}for(var x in c){var o=y(c[x]);o&&l.push(o)}if(l.length){var b=e.zrId+"-cls-"+hV();e.cssNodes["."+b]={animation:l.join(",")},t.class=b}}function Kne(r,t,e){if(!r.ignore)if(r.isSilent()){var a={"pointer-events":"none"};W3(a,t,e)}else{var n=r.states.emphasis&&r.states.emphasis.style?r.states.emphasis.style:{},s=n.fill;if(!s){var l=r.style&&r.style.fill,o=r.states.select&&r.states.select.style&&r.states.select.style.fill,c=r.currentStates.indexOf("select")>=0&&o||l;c&&(s=ry(c))}var u=n.lineWidth;if(u){var d=!n.strokeNoScale&&r.transform?r.transform[0]:1;u=u/d}var a={cursor:"pointer"};s&&(a.fill=s),n.stroke&&(a.stroke=n.stroke),u&&(a["stroke-width"]=u),W3(a,t,e)}}function W3(r,t,e,a){var n=JSON.stringify(r),s=e.cssStyleCache[n];s||(s=e.zrId+"-cls-"+hV(),e.cssStyleCache[n]=s,e.cssNodes["."+s+":hover"]=r),t.class=t.class?t.class+" "+s:s}var rm=Math.round;function pV(r){return r&&je(r.src)}function gV(r){return r&&Le(r.toDataURL)}function pA(r,t,e,a){Vne(function(n,s){var l=n==="fill"||n==="stroke";l&&Mz(s)?vV(t,r,n,a):l&&KC(s)?xV(e,r,n,a):r[n]=s,l&&a.ssr&&s==="none"&&(r["pointer-events"]="visible")},t,e,!1),nse(e,r,a)}function gA(r,t){var e=Vz(t);e&&(e.each(function(a,n){a!=null&&(r[(G3+n).toLowerCase()]=a+"")}),t.isSilent()&&(r[G3+"silent"]="true"))}function $3(r){return wo(r[0]-1)&&wo(r[1])&&wo(r[2])&&wo(r[3]-1)}function Qne(r){return wo(r[4])&&wo(r[5])}function mA(r,t,e){if(t&&!(Qne(t)&&$3(t))){var a=1e4;r.transform=$3(t)?"translate("+rm(t[4]*a)/a+" "+rm(t[5]*a)/a+")":LZ(t)}}function q3(r,t,e){for(var a=r.points,n=[],s=0;s<a.length;s++)n.push(rm(a[s][0]*e)/e),n.push(rm(a[s][1]*e)/e);t.points=n.join(" ")}function X3(r){return!r.smooth}function Jne(r){var t=pe(r,function(e){return typeof e=="string"?[e,e]:e});return function(e,a,n){for(var s=0;s<t.length;s++){var l=t[s],o=e[l[0]];o!=null&&(a[l[1]]=rm(o*n)/n)}}}var ese={circle:[Jne(["cx","cy","r"])],polyline:[q3,X3],polygon:[q3,X3]};function tse(r){for(var t=r.animators,e=0;e<t.length;e++)if(t[e].targetName==="shape")return!0;return!1}function mV(r,t){var e=r.style,a=r.shape,n=ese[r.type],s={},l=t.animation,o="path",c=r.style.strokePercent,u=t.compress&&Rz(r)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](a))&&!(l&&tse(r))&&!(c<1)){o=r.type;var d=Math.pow(10,u);n[0](a,s,d)}else{var h=!r.path||r.shapeChanged();r.path||r.createPathProxy();var p=r.path;h&&(p.beginPath(),r.buildPath(p,r.shape),r.pathUpdated());var g=p.getVersion(),v=r,y=v.__svgPathBuilder;(v.__svgPathVersion!==g||!y||c!==v.__svgPathStrokePercent)&&(y||(y=v.__svgPathBuilder=new oV),y.reset(u),p.rebuildPath(y,c),y.generateStr(),v.__svgPathVersion=g,v.__svgPathStrokePercent=c),s.d=y.getStr()}return mA(s,r.transform),pA(s,e,r,t),gA(s,r),t.animation&&Vb(r,s,t),t.emphasis&&Kne(r,s,t),aa(o,r.id+"",s)}function rse(r,t){var e=r.style,a=e.image;if(a&&!je(a)&&(pV(a)?a=a.src:gV(a)&&(a=a.toDataURL())),!!a){var n=e.x||0,s=e.y||0,l=e.width,o=e.height,c={href:a,width:l,height:o};return n&&(c.x=n),s&&(c.y=s),mA(c,r.transform),pA(c,e,r,t),gA(c,r),t.animation&&Vb(r,c,t),aa("image",r.id+"",c)}}function ase(r,t){var e=r.style,a=e.text;if(a!=null&&(a+=""),!(!a||isNaN(e.x)||isNaN(e.y))){var n=e.font||jl,s=e.x||0,l=kZ(e.y||0,Tm(n),e.textBaseline),o=IZ[e.textAlign]||e.textAlign,c={"dominant-baseline":"central","text-anchor":o};if(h7(e)){var u="",d=e.fontStyle,h=d7(e.fontSize);if(!parseFloat(h))return;var p=e.fontFamily||az,g=e.fontWeight;u+="font-size:"+h+";font-family:"+p+";",d&&d!=="normal"&&(u+="font-style:"+d+";"),g&&g!=="normal"&&(u+="font-weight:"+g+";"),c.style=u}else c.style="font: "+n;return a.match(/\s/)&&(c["xml:space"]="preserve"),s&&(c.x=s),l&&(c.y=l),mA(c,r.transform),pA(c,e,r,t),gA(c,r),t.animation&&Vb(r,c,t),aa("text",r.id+"",c,void 0,a)}}function Z3(r,t){if(r instanceof ht)return mV(r,t);if(r instanceof la)return rse(r,t);if(r instanceof Rh)return ase(r,t)}function nse(r,t,e){var a=r.style;if(OZ(a)){var n=PZ(r),s=e.shadowCache,l=s[n];if(!l){var o=r.getGlobalScale(),c=o[0],u=o[1];if(!c||!u)return;var d=a.shadowOffsetX||0,h=a.shadowOffsetY||0,p=a.shadowBlur,g=Gg(a.shadowColor),v=g.opacity,y=g.color,x=p/2/c,b=p/2/u,N=x+" "+b;l=e.zrId+"-s"+e.shadowIdx++,e.defs[l]=aa("filter",l,{id:l,x:"-100%",y:"-100%",width:"300%",height:"300%"},[aa("feDropShadow","",{dx:d/c,dy:h/u,stdDeviation:N,"flood-color":y,"flood-opacity":v})]),s[n]=l}t.filter=vb(l)}}function vV(r,t,e,a){var n=r[e],s,l={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(Ez(n))s="linearGradient",l.x1=n.x,l.y1=n.y,l.x2=n.x2,l.y2=n.y2;else if(Dz(n))s="radialGradient",l.cx=Me(n.x,.5),l.cy=Me(n.y,.5),l.r=Me(n.r,.5);else return;for(var o=n.colorStops,c=[],u=0,d=o.length;u<d;++u){var h=ES(o[u].offset)*100+"%",p=o[u].color,g=Gg(p),v=g.color,y=g.opacity,x={offset:h};x["stop-color"]=v,y<1&&(x["stop-opacity"]=y),c.push(aa("stop",u+"",x))}var b=aa(s,"",l,c),N=fA(b),w=a.gradientCache,S=w[N];S||(S=a.zrId+"-g"+a.gradientIdx++,w[N]=S,l.id=S,a.defs[S]=aa(s,S,l,c)),t[e]=vb(S)}function xV(r,t,e,a){var n=r.style[e],s=r.getBoundingRect(),l={},o=n.repeat,c=o==="no-repeat",u=o==="repeat-x",d=o==="repeat-y",h;if(Az(n)){var p=n.imageWidth,g=n.imageHeight,v=void 0,y=n.image;if(je(y)?v=y:pV(y)?v=y.src:gV(y)&&(v=y.toDataURL()),typeof Image>"u"){var x="Image width/height must been given explictly in svg-ssr renderer.";Ea(p,x),Ea(g,x)}else if(p==null||g==null){var b=function(k,L){if(k){var O=k.elm,z=p||L.width,U=g||L.height;k.tag==="pattern"&&(u?(U=1,z/=s.width):d&&(z=1,U/=s.height)),k.attrs.width=z,k.attrs.height=U,O&&(O.setAttribute("width",z),O.setAttribute("height",U))}},N=iT(v,null,r,function(k){c||b(A,k),b(h,k)});N&&N.width&&N.height&&(p=p||N.width,g=g||N.height)}h=aa("image","img",{href:v,width:p,height:g}),l.width=p,l.height=g}else n.svgElement&&(h=Oe(n.svgElement),l.width=n.svgWidth,l.height=n.svgHeight);if(h){var w,S;c?w=S=1:u?(S=1,w=l.width/s.width):d?(w=1,S=l.height/s.height):l.patternUnits="userSpaceOnUse",w!=null&&!isNaN(w)&&(l.width=w),S!=null&&!isNaN(S)&&(l.height=S);var T=Lz(n);T&&(l.patternTransform=T);var A=aa("pattern","",l,[h]),C=fA(A),M=a.patternCache,R=M[C];R||(R=a.zrId+"-p"+a.patternIdx++,M[C]=R,l.id=R,A=a.defs[R]=aa("pattern",R,l,[h])),t[e]=vb(R)}}function sse(r,t,e){var a=e.clipPathCache,n=e.defs,s=a[r.id];if(!s){s=e.zrId+"-c"+e.clipPathIdx++;var l={id:s};a[r.id]=s,n[s]=aa("clipPath",s,l,[mV(r,e)])}t["clip-path"]=vb(s)}function K3(r){return document.createTextNode(r)}function Zc(r,t,e){r.insertBefore(t,e)}function Q3(r,t){r.removeChild(t)}function J3(r,t){r.appendChild(t)}function yV(r){return r.parentNode}function bV(r){return r.nextSibling}function Tj(r,t){r.textContent=t}var eI=58,ise=120,lse=aa("","");function L2(r){return r===void 0}function oi(r){return r!==void 0}function ose(r,t,e){for(var a={},n=t;n<=e;++n){var s=r[n].key;s!==void 0&&(a[s]=n)}return a}function og(r,t){var e=r.key===t.key,a=r.tag===t.tag;return a&&e}function am(r){var t,e=r.children,a=r.tag;if(oi(a)){var n=r.elm=dV(a);if(vA(lse,r),de(e))for(t=0;t<e.length;++t){var s=e[t];s!=null&&J3(n,am(s))}else oi(r.text)&&!Ue(r.text)&&J3(n,K3(r.text))}else r.elm=K3(r.text);return r.elm}function _V(r,t,e,a,n){for(;a<=n;++a){var s=e[a];s!=null&&Zc(r,am(s),t)}}function Ly(r,t,e,a){for(;e<=a;++e){var n=t[e];if(n!=null)if(oi(n.tag)){var s=yV(n.elm);Q3(s,n.elm)}else Q3(r,n.elm)}}function vA(r,t){var e,a=t.elm,n=r&&r.attrs||{},s=t.attrs||{};if(n!==s){for(e in s){var l=s[e],o=n[e];o!==l&&(l===!0?a.setAttribute(e,""):l===!1?a.removeAttribute(e):e==="style"?a.style.cssText=l:e.charCodeAt(0)!==ise?a.setAttribute(e,l):e==="xmlns:xlink"||e==="xmlns"?a.setAttributeNS(Hne,e,l):e.charCodeAt(3)===eI?a.setAttributeNS(Gne,e,l):e.charCodeAt(5)===eI?a.setAttributeNS(uV,e,l):a.setAttribute(e,l))}for(e in n)e in s||a.removeAttribute(e)}}function cse(r,t,e){for(var a=0,n=0,s=t.length-1,l=t[0],o=t[s],c=e.length-1,u=e[0],d=e[c],h,p,g,v;a<=s&&n<=c;)l==null?l=t[++a]:o==null?o=t[--s]:u==null?u=e[++n]:d==null?d=e[--c]:og(l,u)?(oh(l,u),l=t[++a],u=e[++n]):og(o,d)?(oh(o,d),o=t[--s],d=e[--c]):og(l,d)?(oh(l,d),Zc(r,l.elm,bV(o.elm)),l=t[++a],d=e[--c]):og(o,u)?(oh(o,u),Zc(r,o.elm,l.elm),o=t[--s],u=e[++n]):(L2(h)&&(h=ose(t,a,s)),p=h[u.key],L2(p)?Zc(r,am(u),l.elm):(g=t[p],g.tag!==u.tag?Zc(r,am(u),l.elm):(oh(g,u),t[p]=void 0,Zc(r,g.elm,l.elm))),u=e[++n]);(a<=s||n<=c)&&(a>s?(v=e[c+1]==null?null:e[c+1].elm,_V(r,v,e,n,c)):Ly(r,t,a,s))}function oh(r,t){var e=t.elm=r.elm,a=r.children,n=t.children;r!==t&&(vA(r,t),L2(t.text)?oi(a)&&oi(n)?a!==n&&cse(e,a,n):oi(n)?(oi(r.text)&&Tj(e,""),_V(e,null,n,0,n.length-1)):oi(a)?Ly(e,a,0,a.length-1):oi(r.text)&&Tj(e,""):r.text!==t.text&&(oi(a)&&Ly(e,a,0,a.length-1),Tj(e,t.text)))}function use(r,t){if(og(r,t))oh(r,t);else{var e=r.elm,a=yV(e);am(t),a!==null&&(Zc(a,t.elm,bV(e)),Ly(a,[r],0,0))}return t}var dse=0,hse=(function(){function r(t,e,a){if(this.type="svg",this.refreshHover=tI(),this.configLayer=tI(),this.storage=e,this._opts=a=ie({},a),this.root=t,this._id="zr"+dse++,this._oldVNode=U3(a.width,a.height),t&&!a.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var s=this._svgDom=this._oldVNode.elm=dV("svg");vA(null,this._oldVNode),n.appendChild(s),t.appendChild(n)}this.resize(a.width,a.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",use(this._oldVNode,t),this._oldVNode=t}},r.prototype.renderOneToVNode=function(t){return Z3(t,R2(this._id))},r.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),a=this._width,n=this._height,s=R2(this._id);s.animation=t.animation,s.willUpdate=t.willUpdate,s.compress=t.compress,s.emphasis=t.emphasis,s.ssr=this._opts.ssr;var l=[],o=this._bgVNode=fse(a,n,this._backgroundColor,s);o&&l.push(o);var c=t.compress?null:this._mainVNode=aa("g","main",{},[]);this._paintList(e,s,c?c.children:l),c&&l.push(c);var u=pe(gt(s.defs),function(p){return s.defs[p]});if(u.length&&l.push(aa("defs","defs",{},u)),t.animation){var d=Yne(s.cssNodes,s.cssAnims,{newline:!0});if(d){var h=aa("style","stl",{},[],d);l.push(h)}}return U3(a,n,l,t.useViewBox)},r.prototype.renderToString=function(t){return t=t||{},fA(this.renderToVNode({animation:Me(t.cssAnimation,!0),emphasis:Me(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Me(t.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(t,e,a){for(var n=t.length,s=[],l=0,o,c,u=0,d=0;d<n;d++){var h=t[d];if(!h.invisible){var p=h.__clipPaths,g=p&&p.length||0,v=c&&c.length||0,y=void 0;for(y=Math.max(g-1,v-1);y>=0&&!(p&&c&&p[y]===c[y]);y--);for(var x=v-1;x>y;x--)l--,o=s[l-1];for(var b=y+1;b<g;b++){var N={};sse(p[b],N,e);var w=aa("g","clip-g-"+u++,N,[]);(o?o.children:a).push(w),s[l++]=w,o=w}c=p;var S=Z3(h,e);S&&(o?o.children:a).push(S)}}},r.prototype.resize=function(t,e){var a=this._opts,n=this.root,s=this._viewport;if(t!=null&&(a.width=t),e!=null&&(a.height=e),n&&s&&(s.style.display="none",t=mh(n,0,a),e=mh(n,1,a),s.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,s){var l=s.style;l.width=t+"px",l.height=e+"px"}if(KC(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",t),o.setAttribute("height",e));var c=this._bgVNode&&this._bgVNode.elm;c&&(c.setAttribute("width",t),c.setAttribute("height",e))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(t){var e=this.renderToString(),a="data:image/svg+xml;";return t?(e=BZ(e),e&&a+"base64,"+e):a+"charset=UTF-8,"+encodeURIComponent(e)},r})();function tI(r){return function(){}}function fse(r,t,e,a){var n;if(e&&e!=="none")if(n=aa("rect","bg",{width:r,height:t,x:"0",y:"0"}),Mz(e))vV({fill:e},n.attrs,"fill",a);else if(KC(e))xV({style:{fill:e},dirty:vr,getBoundingRect:function(){return{width:r,height:t}}},n.attrs,"fill",a);else{var s=Gg(e),l=s.color,o=s.opacity;n.attrs.fill=l,o<1&&(n.attrs["fill-opacity"]=o)}return n}function pse(r){r.registerPainter("svg",hse)}function rI(r,t,e){var a=pn.createCanvas(),n=t.getWidth(),s=t.getHeight(),l=a.style;return l&&(l.position="absolute",l.left="0",l.top="0",l.width=n+"px",l.height=s+"px",a.setAttribute("data-zr-dom-id",r)),a.width=n*e,a.height=s*e,a}var Aj=(function(r){tr(t,r);function t(e,a,n){var s=r.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var l;n=n||ny,typeof e=="string"?l=rI(e,a,n):Ue(e)&&(l=e,e=l.id),s.id=e,s.dom=l;var o=l.style;return o&&(WC(l),l.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),s.painter=a,s.dpr=n,s}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=rI("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),e!==1&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,a,n,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var l=[],o=this.maxRepaintRectCount,c=!1,u=new We(0,0,0,0);function d(N){if(!(!N.isFinite()||N.isZero()))if(l.length===0){var w=new We(0,0,0,0);w.copy(N),l.push(w)}else{for(var S=!1,T=1/0,A=0,C=0;C<l.length;++C){var M=l[C];if(M.intersect(N)){var R=new We(0,0,0,0);R.copy(M),R.union(N),l[C]=R,S=!0;break}else if(c){u.copy(N),u.union(M);var k=N.width*N.height,L=M.width*M.height,O=u.width*u.height,z=O-k-L;z<T&&(T=z,A=C)}}if(c&&(l[A].union(N),S=!0),!S){var w=new We(0,0,0,0);w.copy(N),l.push(w)}c||(c=l.length>=o)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var p=e[h];if(p){var g=p.shouldBePainted(n,s,!0,!0),v=p.__isRendered&&(p.__dirty&Tn||!g)?p.getPrevPaintRect():null;v&&d(v);var y=g&&(p.__dirty&Tn||!p.__isRendered)?p.getPaintRect():null;y&&d(y)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var p=a[h],g=p&&p.shouldBePainted(n,s,!0,!0);if(p&&(!g||!p.__zr)&&p.__isRendered){var v=p.getPrevPaintRect();v&&d(v)}}var x;do{x=!1;for(var h=0;h<l.length;){if(l[h].isZero()){l.splice(h,1);continue}for(var b=h+1;b<l.length;)l[h].intersect(l[b])?(x=!0,l[h].union(l[b]),l.splice(b,1)):b++;h++}}while(x);return this._paintRects=l,l},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,a){var n=this.dpr,s=this.dom,l=s.style,o=this.domBack;l&&(l.width=e+"px",l.height=a+"px"),s.width=e*n,s.height=a*n,o&&(o.width=e*n,o.height=a*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(e,a,n){var s=this.dom,l=this.ctx,o=s.width,c=s.height;a=a||this.clearColor;var u=this.motionBlur&&!e,d=this.lastFrameAlpha,h=this.dpr,p=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,o/h,c/h));var g=this.domBack;function v(y,x,b,N){if(l.clearRect(y,x,b,N),a&&a!=="transparent"){var w=void 0;if(Nm(a)){var S=a.global||a.__width===b&&a.__height===N;w=S&&a.__canvasGradient||g2(l,a,{x:0,y:0,width:b,height:N}),a.__canvasGradient=w,a.__width=b,a.__height=N}else lz(a)&&(a.scaleX=a.scaleX||h,a.scaleY=a.scaleY||h,w=m2(l,a,{dirty:function(){p.setUnpainted(),p.painter.refresh()}}));l.save(),l.fillStyle=w||a,l.fillRect(y,x,b,N),l.restore()}u&&(l.save(),l.globalAlpha=d,l.drawImage(g,y,x,b,N),l.restore())}!n||u?v(0,0,o,c):n.length&&B(n,function(y){v(y.x*h,y.y*h,y.width*h,y.height*h)})},t})(gs),aI=1e5,Vc=314159,G0=.01,gse=.001;function mse(r){return r?r.__builtin__?!0:!(typeof r.resize!="function"||typeof r.refresh!="function"):!1}function vse(r,t){var e=document.createElement("div");return e.style.cssText=["position:relative","width:"+r+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",e}var xse=(function(){function r(t,e,a,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=a=ie({},a||{}),this.dpr=a.devicePixelRatio||ny,this._singleCanvas=s,this.root=t;var l=t.style;l&&(WC(t),t.innerHTML=""),this.storage=e;var o=this._zlevelList;this._prevDisplayList=[];var c=this._layers;if(s){var d=t,h=d.width,p=d.height;a.width!=null&&(h=a.width),a.height!=null&&(p=a.height),this.dpr=a.devicePixelRatio||1,d.width=h*this.dpr,d.height=p*this.dpr,this._width=h,this._height=p;var g=new Aj(d,this,this.dpr);g.__builtin__=!0,g.initContext(),c[Vc]=g,g.zlevel=Vc,o.push(Vc),this._domRoot=t}else{this._width=mh(t,0,a),this._height=mh(t,1,a);var u=this._domRoot=vse(this._width,this._height);t.appendChild(u)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},r.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),a=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,a,t,this._redrawId);for(var s=0;s<n.length;s++){var l=n[s],o=this._layers[l];if(!o.__builtin__&&o.refresh){var c=s===0?this._backgroundColor:null;o.refresh(c)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(t){var e=t.length,a=this._hoverlayer;if(a&&a.clear(),!!e){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,l=0;l<e;l++){var o=t[l];o.__inHover&&(a||(a=this._hoverlayer=this.getLayer(aI)),s||(s=a.ctx,s.save()),iu(s,o,n,l===e-1))}s&&s.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(aI)},r.prototype.paintOne=function(t,e){qT(t,e)},r.prototype._paintList=function(t,e,a,n){if(this._redrawId===n){a=a||!1,this._updateLayerStatus(t);var s=this._doPaintList(t,e,a),l=s.finished,o=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(t),l)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var c=this;Qx(function(){c._paintList(t,e,a,n)})}}},r.prototype._compositeManually=function(){var t=this.getLayer(Vc).ctx,e=this._domRoot.width,a=this._domRoot.height;t.clearRect(0,0,e,a),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,e,a)})},r.prototype._doPaintList=function(t,e,a){for(var n=this,s=[],l=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var c=this._zlevelList[o],u=this._layers[c];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||a)&&s.push(u)}for(var d=!0,h=!1,p=function(y){var x=s[y],b=x.ctx,N=l&&x.createRepaintRects(t,e,g._width,g._height),w=a?x.__startIndex:x.__drawIndex,S=!a&&x.incremental&&Date.now,T=S&&Date.now(),A=x.zlevel===g._zlevelList[0]?g._backgroundColor:null;if(x.__startIndex===x.__endIndex)x.clear(!1,A,N);else if(w===x.__startIndex){var C=t[w];(!C.incremental||!C.notClear||a)&&x.clear(!1,A,N)}w===-1&&(console.error("For some unknown reason. drawIndex is -1"),w=x.__startIndex);var M,R=function(z){var U={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(M=w;M<x.__endIndex;M++){var H=t[M];if(H.__inHover&&(h=!0),n._doPaintEl(H,x,l,z,U,M===x.__endIndex-1),S){var P=Date.now()-T;if(P>15)break}}U.prevElClipPaths&&b.restore()};if(N)if(N.length===0)M=x.__endIndex;else for(var k=g.dpr,L=0;L<N.length;++L){var O=N[L];b.save(),b.beginPath(),b.rect(O.x*k,O.y*k,O.width*k,O.height*k),b.clip(),R(O),b.restore()}else b.save(),R(),b.restore();x.__drawIndex=M,x.__drawIndex<x.__endIndex&&(d=!1)},g=this,v=0;v<s.length;v++)p(v);return pt.wxa&&B(this._layers,function(y){y&&y.ctx&&y.ctx.draw&&y.ctx.draw()}),{finished:d,needsRefreshHover:h}},r.prototype._doPaintEl=function(t,e,a,n,s,l){var o=e.ctx;if(a){var c=t.getPaintRect();(!n||c&&c.intersect(n))&&(iu(o,t,s,l),t.setPrevPaintRect(c))}else iu(o,t,s,l)},r.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Vc);var a=this._layers[t];return a||(a=new Aj("zr_"+t,this,this.dpr),a.zlevel=t,a.__builtin__=!0,this._layerConfig[t]?rt(a,this._layerConfig[t],!0):this._layerConfig[t-G0]&&rt(a,this._layerConfig[t-G0],!0),e&&(a.virtual=e),this.insertLayer(t,a),a.initContext()),a},r.prototype.insertLayer=function(t,e){var a=this._layers,n=this._zlevelList,s=n.length,l=this._domRoot,o=null,c=-1;if(!a[t]&&mse(e)){if(s>0&&t>n[0]){for(c=0;c<s-1&&!(n[c]<t&&n[c+1]>t);c++);o=a[n[c]]}if(n.splice(c+1,0,t),a[t]=e,!e.virtual)if(o){var u=o.dom;u.nextSibling?l.insertBefore(e.dom,u.nextSibling):l.appendChild(e.dom)}else l.firstChild?l.insertBefore(e.dom,l.firstChild):l.appendChild(e.dom);e.painter||(e.painter=this)}},r.prototype.eachLayer=function(t,e){for(var a=this._zlevelList,n=0;n<a.length;n++){var s=a[n];t.call(e,this._layers[s],s)}},r.prototype.eachBuiltinLayer=function(t,e){for(var a=this._zlevelList,n=0;n<a.length;n++){var s=a[n],l=this._layers[s];l.__builtin__&&t.call(e,l,s)}},r.prototype.eachOtherLayer=function(t,e){for(var a=this._zlevelList,n=0;n<a.length;n++){var s=a[n],l=this._layers[s];l.__builtin__||t.call(e,l,s)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(h,p){h.__dirty=h.__used=!1});function e(h){s&&(s.__endIndex!==h&&(s.__dirty=!0),s.__endIndex=h)}if(this._singleCanvas)for(var a=1;a<t.length;a++){var n=t[a];if(n.zlevel!==t[a-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var s=null,l=0,o,c;for(c=0;c<t.length;c++){var n=t[c],u=n.zlevel,d=void 0;o!==u&&(o=u,l=0),n.incremental?(d=this.getLayer(u+gse,this._needsManuallyCompositing),d.incremental=!0,l=1):d=this.getLayer(u+(l>0?G0:0),this._needsManuallyCompositing),d.__builtin__||hb("ZLevel "+u+" has been used by unkown layer "+d.id),d!==s&&(d.__used=!0,d.__startIndex!==c&&(d.__dirty=!0),d.__startIndex=c,d.incremental?d.__drawIndex=-1:d.__drawIndex=c,e(c),s=d),n.__dirty&Tn&&!n.__inHover&&(d.__dirty=!0,d.incremental&&d.__drawIndex<0&&(d.__drawIndex=c))}e(c),this.eachBuiltinLayer(function(h,p){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(t){t.clear()},r.prototype.setBackgroundColor=function(t){this._backgroundColor=t,B(this._layers,function(e){e.setUnpainted()})},r.prototype.configLayer=function(t,e){if(e){var a=this._layerConfig;a[t]?rt(a[t],e,!0):a[t]=e;for(var n=0;n<this._zlevelList.length;n++){var s=this._zlevelList[n];if(s===t||s===t+G0){var l=this._layers[s];rt(l,a[t],!0)}}}},r.prototype.delLayer=function(t){var e=this._layers,a=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],a.splice(tt(a,t),1))},r.prototype.resize=function(t,e){if(this._domRoot.style){var a=this._domRoot;a.style.display="none";var n=this._opts,s=this.root;if(t!=null&&(n.width=t),e!=null&&(n.height=e),t=mh(s,0,n),e=mh(s,1,n),a.style.display="",this._width!==t||e!==this._height){a.style.width=t+"px",a.style.height=e+"px";for(var l in this._layers)this._layers.hasOwnProperty(l)&&this._layers[l].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(t==null||e==null)return;this._width=t,this._height=e,this.getLayer(Vc).resize(t,e)}return this},r.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Vc].dom;var e=new Aj("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var a=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,s=e.dom.height;this.eachLayer(function(h){h.__builtin__?a.drawImage(h.dom,0,0,n,s):h.renderToCanvas&&(a.save(),h.renderToCanvas(a),a.restore())})}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),c=0,u=o.length;c<u;c++){var d=o[c];iu(a,d,l,c===u-1)}return e.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r})();function yse(r){r.registerPainter("canvas",xse)}var bse=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return Di(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var a=new Pe,n=Er("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);a.add(n),n.setStyle(e.lineStyle);var s=this.getData().getVisual("symbol"),l=this.getData().getVisual("symbolRotate"),o=s==="none"?"circle":s,c=e.itemHeight*.8,u=Er(o,(e.itemWidth-c)/2,(e.itemHeight-c)/2,c,c,e.itemStyle.fill);a.add(u),u.setStyle(e.itemStyle);var d=e.iconRotate==="inherit"?l:e.iconRotate||0;return u.rotation=d*Math.PI/180,u.setOrigin([e.itemWidth/2,e.itemHeight/2]),o.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill=ee.color.neutral00,u.style.lineWidth=2),a},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t})(zt);function Bh(r,t){var e=r.mapDimensionsAll("defaultedLabel"),a=e.length;if(a===1){var n=kh(r,t,e[0]);return n!=null?n+"":null}else if(a){for(var s=[],l=0;l<e.length;l++)s.push(kh(r,t,e[l]));return s.join(" ")}}function NV(r,t){var e=r.mapDimensionsAll("defaultedLabel");if(!de(t))return t+"";for(var a=[],n=0;n<e.length;n++){var s=r.getDimensionIndex(e[n]);s>=0&&a.push(t[s])}return a.join(" ")}var Pm=(function(r){re(t,r);function t(e,a,n,s){var l=r.call(this)||this;return l.updateData(e,a,n,s),l}return t.prototype._createSymbol=function(e,a,n,s,l,o){this.removeAll();var c=Er(e,-1,-1,2,2,null,o);c.attr({z2:Me(l,100),culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),c.drift=_se,this._symbolType=e,this.add(c)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Sl(this.childAt(0))},t.prototype.downplay=function(){Cl(this.childAt(0))},t.prototype.setZ=function(e,a){var n=this.childAt(0);n.zlevel=e,n.z=a},t.prototype.setDraggable=function(e,a){var n=this.childAt(0);n.draggable=e,n.cursor=!a&&e?"move":n.cursor},t.prototype.updateData=function(e,a,n,s){this.silent=!1;var l=e.getItemVisual(a,"symbol")||"circle",o=e.hostModel,c=t.getSymbolSize(e,a),u=t.getSymbolZ2(e,a),d=l!==this._symbolType,h=s&&s.disableAnimation;if(d){var p=e.getItemVisual(a,"symbolKeepAspect");this._createSymbol(l,e,a,c,u,p)}else{var g=this.childAt(0);g.silent=!1;var v={scaleX:c[0]/2,scaleY:c[1]/2};h?g.attr(v):Nt(g,v,o,a),ps(g)}if(this._updateCommon(e,a,c,n,s),d){var g=this.childAt(0);if(!h){var v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:g.style.opacity}};g.scaleX=g.scaleY=0,g.style.opacity=0,Kt(g,v,o,a)}}h&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,a,n,s,l){var o=this.childAt(0),c=e.hostModel,u,d,h,p,g,v,y,x,b;if(s&&(u=s.emphasisItemStyle,d=s.blurItemStyle,h=s.selectItemStyle,p=s.focus,g=s.blurScope,y=s.labelStatesModels,x=s.hoverScale,b=s.cursorStyle,v=s.emphasisDisabled),!s||e.hasItemOption){var N=s&&s.itemModel?s.itemModel:e.getItemModel(a),w=N.getModel("emphasis");u=w.getModel("itemStyle").getItemStyle(),h=N.getModel(["select","itemStyle"]).getItemStyle(),d=N.getModel(["blur","itemStyle"]).getItemStyle(),p=w.get("focus"),g=w.get("blurScope"),v=w.get("disabled"),y=Zr(N),x=w.getShallow("scale"),b=N.getShallow("cursor")}var S=e.getItemVisual(a,"symbolRotate");o.attr("rotation",(S||0)*Math.PI/180||0);var T=Hu(e.getItemVisual(a,"symbolOffset"),n);T&&(o.x=T[0],o.y=T[1]),b&&o.attr("cursor",b);var A=e.getItemVisual(a,"style"),C=A.fill;if(o instanceof la){var M=o.style;o.useStyle(ie({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},A))}else o.__isEmptyBrush?o.useStyle(ie({},A)):o.useStyle(A),o.style.decal=null,o.setColor(C,l&&l.symbolInnerColor),o.style.strokeNoScale=!0;var R=e.getItemVisual(a,"liftZ"),k=this._z2;R!=null?k==null&&(this._z2=o.z2,o.z2+=R):k!=null&&(o.z2=k,this._z2=null);var L=l&&l.useNameLabel;ia(o,y,{labelFetcher:c,labelDataIndex:a,defaultText:O,inheritColor:C,defaultOpacity:A.opacity});function O(H){return L?e.getName(H):Bh(e,H)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var z=o.ensureState("emphasis");z.style=u,o.ensureState("select").style=h,o.ensureState("blur").style=d;var U=x==null||x===!0?Math.max(1.1,3/this._sizeY):isFinite(x)&&x>0?+x:1;z.scaleX=this._sizeX*U,z.scaleY=this._sizeY*U,this.setSymbolScale(1),nr(this,p,g,v)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,a,n){var s=this.childAt(0),l=Xe(this).dataIndex,o=n&&n.animation;if(this.silent=s.silent=!0,n&&n.fadeLabel){var c=s.getTextContent();c&&zo(c,{style:{opacity:0}},a,{dataIndex:l,removeOpt:o,cb:function(){s.removeTextContent()}})}else s.removeTextContent();zo(s,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:l,cb:e,removeOpt:o})},t.getSymbolSize=function(e,a){return uf(e.getItemVisual(a,"symbolSize"))},t.getSymbolZ2=function(e,a){return e.getItemVisual(a,"z2")},t})(Pe);function _se(r,t){this.parent.drift(r,t)}function Ej(r,t,e,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(e))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&r.getItemVisual(e,"symbol")!=="none"}function nI(r){return r!=null&&!Ue(r)&&(r={isIgnore:r}),r||{}}function sI(r){var t=r.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:Zr(t),cursorStyle:t.get("cursor")}}var zm=(function(){function r(t){this.group=new Pe,this._SymbolCtor=t||Pm}return r.prototype.updateData=function(t,e){this._progressiveEls=null,e=nI(e);var a=this.group,n=t.hostModel,s=this._data,l=this._SymbolCtor,o=e.disableAnimation,c=sI(t),u={disableAnimation:o},d=e.getSymbolPoint||function(h){return t.getItemLayout(h)};s||a.removeAll(),t.diff(s).add(function(h){var p=d(h);if(Ej(t,p,h,e)){var g=new l(t,h,c,u);g.setPosition(p),t.setItemGraphicEl(h,g),a.add(g)}}).update(function(h,p){var g=s.getItemGraphicEl(p),v=d(h);if(!Ej(t,v,h,e)){a.remove(g);return}var y=t.getItemVisual(h,"symbol")||"circle",x=g&&g.getSymbolType&&g.getSymbolType();if(!g||x&&x!==y)a.remove(g),g=new l(t,h,c,u),g.setPosition(v);else{g.updateData(t,h,c,u);var b={x:v[0],y:v[1]};o?g.attr(b):Nt(g,b,n)}a.add(g),t.setItemGraphicEl(h,g)}).remove(function(h){var p=s.getItemGraphicEl(h);p&&p.fadeOut(function(){a.remove(p)},n)}).execute(),this._getSymbolPoint=d,this._data=t},r.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(a,n){var s=t._getSymbolPoint(n);a.setPosition(s),a.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=sI(t),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e,a){this._progressiveEls=[],a=nI(a);function n(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}for(var s=t.start;s<t.end;s++){var l=e.getItemLayout(s);if(Ej(e,l,s,a)){var o=new this._SymbolCtor(e,s,this._seriesScope);o.traverse(n),o.setPosition(l),this.group.add(o),e.setItemGraphicEl(s,o),this._progressiveEls.push(o)}}},r.prototype.eachRendered=function(t){Wo(this._progressiveEls||this.group,t)},r.prototype.remove=function(t){var e=this.group,a=this._data;a&&t?a.eachItemGraphicEl(function(n){n.fadeOut(function(){e.remove(n)},a.hostModel)}):e.removeAll()},r})();function jV(r,t,e){var a=r.getBaseAxis(),n=r.getOtherAxis(a),s=Nse(n,e),l=a.dim,o=n.dim,c=t.mapDimension(o),u=t.mapDimension(l),d=o==="x"||o==="radius"?1:0,h=pe(r.dimensions,function(v){return t.mapDimension(v)}),p=!1,g=t.getCalculationInfo("stackResultDimension");return Al(t,h[0])&&(p=!0,h[0]=g),Al(t,h[1])&&(p=!0,h[1]=g),{dataDimsForPoint:h,valueStart:s,valueAxisDim:o,baseAxisDim:l,stacked:!!p,valueDim:c,baseDim:u,baseDataOffset:d,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Nse(r,t){var e=0,a=r.scale.getExtent();return t==="start"?e=a[0]:t==="end"?e=a[1]:xt(t)&&!isNaN(t)?e=t:a[0]>0?e=a[0]:a[1]<0&&(e=a[1]),e}function wV(r,t,e,a){var n=NaN;r.stacked&&(n=e.get(e.getCalculationInfo("stackedOverDimension"),a)),isNaN(n)&&(n=r.valueStart);var s=r.baseDataOffset,l=[];return l[s]=e.get(r.baseDim,a),l[1-s]=n,t.dataToPoint(l)}function jse(r,t){var e=[];return t.diff(r).add(function(a){e.push({cmd:"+",idx:a})}).update(function(a,n){e.push({cmd:"=",idx:n,idx1:a})}).remove(function(a){e.push({cmd:"-",idx:a})}).execute(),e}function wse(r,t,e,a,n,s,l,o){for(var c=jse(r,t),u=[],d=[],h=[],p=[],g=[],v=[],y=[],x=jV(n,t,l),b=r.getLayout("points")||[],N=t.getLayout("points")||[],w=0;w<c.length;w++){var S=c[w],T=!0,A=void 0,C=void 0;switch(S.cmd){case"=":A=S.idx*2,C=S.idx1*2;var M=b[A],R=b[A+1],k=N[C],L=N[C+1];(isNaN(M)||isNaN(R))&&(M=k,R=L),u.push(M,R),d.push(k,L),h.push(e[A],e[A+1]),p.push(a[C],a[C+1]),y.push(t.getRawIndex(S.idx1));break;case"+":var O=S.idx,z=x.dataDimsForPoint,U=n.dataToPoint([t.get(z[0],O),t.get(z[1],O)]);C=O*2,u.push(U[0],U[1]),d.push(N[C],N[C+1]);var H=wV(x,n,t,O);h.push(H[0],H[1]),p.push(a[C],a[C+1]),y.push(t.getRawIndex(O));break;case"-":T=!1}T&&(g.push(S),v.push(v.length))}v.sort(function(me,Ce){return y[me]-y[Ce]});for(var P=u.length,F=gi(P),Y=gi(P),X=gi(P),q=gi(P),G=[],w=0;w<v.length;w++){var $=v[w],Z=w*2,te=$*2;F[Z]=u[te],F[Z+1]=u[te+1],Y[Z]=d[te],Y[Z+1]=d[te+1],X[Z]=h[te],X[Z+1]=h[te+1],q[Z]=p[te],q[Z+1]=p[te+1],G[w]=g[$]}return{current:F,next:Y,stackedOnCurrent:X,stackedOnNext:q,status:G}}var ho=Math.min,fo=Math.max;function vu(r,t){return isNaN(r)||isNaN(t)}function I2(r,t,e,a,n,s,l,o,c){for(var u,d,h,p,g,v,y=e,x=0;x<a;x++){var b=t[y*2],N=t[y*2+1];if(y>=n||y<0)break;if(vu(b,N)){if(c){y+=s;continue}break}if(y===e)r[s>0?"moveTo":"lineTo"](b,N),h=b,p=N;else{var w=b-u,S=N-d;if(w*w+S*S<.5){y+=s;continue}if(l>0){for(var T=y+s,A=t[T*2],C=t[T*2+1];A===b&&C===N&&x<a;)x++,T+=s,y+=s,A=t[T*2],C=t[T*2+1],b=t[y*2],N=t[y*2+1],w=b-u,S=N-d;var M=x+1;if(c)for(;vu(A,C)&&M<a;)M++,T+=s,A=t[T*2],C=t[T*2+1];var R=.5,k=0,L=0,O=void 0,z=void 0;if(M>=a||vu(A,C))g=b,v=N;else{k=A-u,L=C-d;var U=b-u,H=A-b,P=N-d,F=C-N,Y=void 0,X=void 0;if(o==="x"){Y=Math.abs(U),X=Math.abs(H);var q=k>0?1:-1;g=b-q*Y*l,v=N,O=b+q*X*l,z=N}else if(o==="y"){Y=Math.abs(P),X=Math.abs(F);var G=L>0?1:-1;g=b,v=N-G*Y*l,O=b,z=N+G*X*l}else Y=Math.sqrt(U*U+P*P),X=Math.sqrt(H*H+F*F),R=X/(X+Y),g=b-k*l*(1-R),v=N-L*l*(1-R),O=b+k*l*R,z=N+L*l*R,O=ho(O,fo(A,b)),z=ho(z,fo(C,N)),O=fo(O,ho(A,b)),z=fo(z,ho(C,N)),k=O-b,L=z-N,g=b-k*Y/X,v=N-L*Y/X,g=ho(g,fo(u,b)),v=ho(v,fo(d,N)),g=fo(g,ho(u,b)),v=fo(v,ho(d,N)),k=b-g,L=N-v,O=b+k*X/Y,z=N+L*X/Y}r.bezierCurveTo(h,p,g,v,b,N),h=O,p=z}else r.lineTo(b,N)}u=b,d=N,y+=s}return x}var SV=(function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r})(),Sse=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-polyline",a}return t.prototype.getDefaultStyle=function(){return{stroke:ee.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new SV},t.prototype.buildPath=function(e,a){var n=a.points,s=0,l=n.length/2;if(a.connectNulls){for(;l>0&&vu(n[l*2-2],n[l*2-1]);l--);for(;s<l&&vu(n[s*2],n[s*2+1]);s++);}for(;s<l;)s+=I2(e,n,s,l,l,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},t.prototype.getPointOn=function(e,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,s=n.data,l=wi.CMD,o,c,u=a==="x",d=[],h=0;h<s.length;){var p=s[h++],g=void 0,v=void 0,y=void 0,x=void 0,b=void 0,N=void 0,w=void 0;switch(p){case l.M:o=s[h++],c=s[h++];break;case l.L:if(g=s[h++],v=s[h++],w=u?(e-o)/(g-o):(e-c)/(v-c),w<=1&&w>=0){var S=u?(v-c)*w+c:(g-o)*w+o;return u?[e,S]:[S,e]}o=g,c=v;break;case l.C:g=s[h++],v=s[h++],y=s[h++],x=s[h++],b=s[h++],N=s[h++];var T=u?ey(o,g,y,b,e,d):ey(c,v,x,N,e,d);if(T>0)for(var A=0;A<T;A++){var C=d[A];if(C<=1&&C>=0){var S=u?ta(c,v,x,N,C):ta(o,g,y,b,C);return u?[e,S]:[S,e]}}o=b,c=N;break}}},t})(ht),Cse=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(SV),CV=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-polygon",a}return t.prototype.getDefaultShape=function(){return new Cse},t.prototype.buildPath=function(e,a){var n=a.points,s=a.stackedOnPoints,l=0,o=n.length/2,c=a.smoothMonotone;if(a.connectNulls){for(;o>0&&vu(n[o*2-2],n[o*2-1]);o--);for(;l<o&&vu(n[l*2],n[l*2+1]);l++);}for(;l<o;){var u=I2(e,n,l,o,o,1,a.smooth,c,a.connectNulls);I2(e,s,l+u-1,u,o,-1,a.stackedOnSmooth,c,a.connectNulls),l+=u+1,e.closePath()}},t})(ht);function TV(r,t,e,a,n){var s=r.getArea(),l=s.x,o=s.y,c=s.width,u=s.height,d=e.get(["lineStyle","width"])||0;l-=d/2,o-=d/2,c+=d,u+=d,c=Math.ceil(c),l!==Math.floor(l)&&(l=Math.floor(l),c++);var h=new it({shape:{x:l,y:o,width:c,height:u}});if(t){var p=r.getBaseAxis(),g=p.isHorizontal(),v=p.inverse;g?(v&&(h.shape.x+=c),h.shape.width=0):(v||(h.shape.y+=u),h.shape.height=0);var y=Le(n)?function(x){n(x,h)}:null;Kt(h,{shape:{width:c,height:u,x:l,y:o}},e,null,a,y)}return h}function AV(r,t,e){var a=r.getArea(),n=Cr(a.r0,1),s=Cr(a.r,1),l=new Da({shape:{cx:Cr(r.cx,1),cy:Cr(r.cy,1),r0:n,r:s,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(t){var o=r.getBaseAxis().dim==="angle";o?l.shape.endAngle=a.startAngle:l.shape.r=n,Kt(l,{shape:{endAngle:a.endAngle,r:s}},e)}return l}function Bm(r,t,e,a,n){if(r){if(r.type==="polar")return AV(r,t,e);if(r.type==="cartesian2d")return TV(r,t,e,a,n)}else return null;return null}function Bo(r,t){return r.type===t}function iI(r,t){if(r.length===t.length){for(var e=0;e<r.length;e++)if(r[e]!==t[e])return;return!0}}function lI(r){for(var t=1/0,e=1/0,a=-1/0,n=-1/0,s=0;s<r.length;){var l=r[s++],o=r[s++];isNaN(l)||(t=Math.min(l,t),a=Math.max(l,a)),isNaN(o)||(e=Math.min(o,e),n=Math.max(o,n))}return[[t,e],[a,n]]}function oI(r,t){var e=lI(r),a=e[0],n=e[1],s=lI(t),l=s[0],o=s[1];return Math.max(Math.abs(a[0]-l[0]),Math.abs(a[1]-l[1]),Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]))}function cI(r){return xt(r)?r:r?.5:0}function Tse(r,t,e){if(!e.valueDim)return[];for(var a=t.count(),n=gi(a*2),s=0;s<a;s++){var l=wV(e,r,t,s);n[s*2]=l[0],n[s*2+1]=l[1]}return n}function po(r,t,e,a,n){var s=e.getBaseAxis(),l=s.dim==="x"||s.dim==="radius"?0:1,o=[],c=0,u=[],d=[],h=[],p=[];if(n){for(c=0;c<r.length;c+=2){var g=t||r;!isNaN(g[c])&&!isNaN(g[c+1])&&p.push(r[c],r[c+1])}r=p}for(c=0;c<r.length-2;c+=2)switch(h[0]=r[c+2],h[1]=r[c+3],d[0]=r[c],d[1]=r[c+1],o.push(d[0],d[1]),a){case"end":u[l]=h[l],u[1-l]=d[1-l],o.push(u[0],u[1]);break;case"middle":var v=(d[l]+h[l])/2,y=[];u[l]=y[l]=v,u[1-l]=d[1-l],y[1-l]=h[1-l],o.push(u[0],u[1]),o.push(y[0],y[1]);break;default:u[l]=d[l],u[1-l]=h[1-l],o.push(u[0],u[1])}return o.push(r[c++],r[c++]),o}function Ase(r,t){var e=[],a=r.length,n,s;function l(d,h,p){var g=d.coord,v=(p-g)/(h.coord-g),y=ZC(v,[d.color,h.color]);return{coord:p,color:y}}for(var o=0;o<a;o++){var c=r[o],u=c.coord;if(u<0)n=c;else if(u>t){s?e.push(l(s,c,t)):n&&e.push(l(n,c,0),l(n,c,t));break}else n&&(e.push(l(n,c,0)),n=null),e.push(c),s=c}return e}function Ese(r,t,e){var a=r.getVisual("visualMeta");if(!(!a||!a.length||!r.count())&&t.type==="cartesian2d"){for(var n,s,l=a.length-1;l>=0;l--){var o=r.getDimensionInfo(a[l].dimension);if(n=o&&o.coordDim,n==="x"||n==="y"){s=a[l];break}}if(s){var c=t.getAxis(n),u=pe(s.stops,function(w){return{coord:c.toGlobalCoord(c.dataToCoord(w.value)),color:w.color}}),d=u.length,h=s.outerColors.slice();d&&u[0].coord>u[d-1].coord&&(u.reverse(),h.reverse());var p=Ase(u,n==="x"?e.getWidth():e.getHeight()),g=p.length;if(!g&&d)return u[0].coord<0?h[1]?h[1]:u[d-1].color:h[0]?h[0]:u[0].color;var v=10,y=p[0].coord-v,x=p[g-1].coord+v,b=x-y;if(b<.001)return"transparent";B(p,function(w){w.offset=(w.coord-y)/b}),p.push({offset:g?p[g-1].offset:.5,color:h[1]||"transparent"}),p.unshift({offset:g?p[0].offset:.5,color:h[0]||"transparent"});var N=new Pu(0,0,0,0,p,!0);return N[n]=y,N[n+"2"]=x,N}}}function Dse(r,t,e){var a=r.get("showAllSymbol"),n=a==="auto";if(!(a&&!n)){var s=e.getAxesByScale("ordinal")[0];if(s&&!(n&&Mse(s,t))){var l=t.mapDimension(s.dim),o={};return B(s.getViewLabels(),function(c){var u=s.scale.getRawOrdinalNumber(c.tickValue);o[u]=1}),function(c){return!o.hasOwnProperty(t.get(l,c))}}}}function Mse(r,t){var e=r.getExtent(),a=Math.abs(e[1]-e[0])/r.scale.count();isNaN(a)&&(a=0);for(var n=t.count(),s=Math.max(1,Math.round(n/5)),l=0;l<n;l+=s)if(Pm.getSymbolSize(t,l)[r.isHorizontal()?1:0]*1.5>a)return!1;return!0}function Rse(r,t){return isNaN(r)||isNaN(t)}function Lse(r){for(var t=r.length/2;t>0&&Rse(r[t*2-2],r[t*2-1]);t--);return t-1}function uI(r,t){return[r[t*2],r[t*2+1]]}function Ise(r,t,e){for(var a=r.length/2,n=e==="x"?0:1,s,l,o=0,c=-1,u=0;u<a;u++)if(l=r[u*2+n],!(isNaN(l)||isNaN(r[u*2+1-n]))){if(u===0){s=l;continue}if(s<=t&&l>=t||s>=t&&l<=t){c=u;break}o=u,s=l}return{range:[o,c],t:(t-s)/(l-s)}}function EV(r){if(r.get(["endLabel","show"]))return!0;for(var t=0;t<Za.length;t++)if(r.get([Za[t],"endLabel","show"]))return!0;return!1}function Dj(r,t,e,a){if(Bo(t,"cartesian2d")){var n=a.getModel("endLabel"),s=n.get("valueAnimation"),l=a.getData(),o={lastFrameIndex:0},c=EV(a)?function(g,v){r._endLabelOnDuring(g,v,l,o,s,n,t)}:null,u=t.getBaseAxis().isHorizontal(),d=TV(t,e,a,function(){var g=r._endLabel;g&&e&&o.originalX!=null&&g.attr({x:o.originalX,y:o.originalY})},c);if(!a.get("clip",!0)){var h=d.shape,p=Math.max(h.width,h.height);u?(h.y-=p,h.height+=p*2):(h.x-=p,h.width+=p*2)}return c&&c(1,d),d}else return AV(t,e,a)}function kse(r,t){var e=t.getBaseAxis(),a=e.isHorizontal(),n=e.inverse,s=a?n?"right":"left":"center",l=a?"middle":n?"top":"bottom";return{normal:{align:r.get("align")||s,verticalAlign:r.get("verticalAlign")||l}}}var Ose=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(){var e=new Pe,a=new zm;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=e,this._changePolyState=we(this._changePolyState,this)},t.prototype.render=function(e,a,n){var s=e.coordinateSystem,l=this.group,o=e.getData(),c=e.getModel("lineStyle"),u=e.getModel("areaStyle"),d=o.getLayout("points")||[],h=s.type==="polar",p=this._coordSys,g=this._symbolDraw,v=this._polyline,y=this._polygon,x=this._lineGroup,b=!a.ssr&&e.get("animation"),N=!u.isEmpty(),w=u.get("origin"),S=jV(s,o,w),T=N&&Tse(s,o,S),A=e.get("showSymbol"),C=e.get("connectNulls"),M=A&&!h&&Dse(e,o,s),R=this._data;R&&R.eachItemGraphicEl(function(me,Ce){me.__temp&&(l.remove(me),R.setItemGraphicEl(Ce,null))}),A||g.remove(),l.add(x);var k=h?!1:e.get("step"),L;s&&s.getArea&&e.get("clip",!0)&&(L=s.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var O=Ese(o,s,n)||o.getVisual("style")[o.getVisual("drawType")];if(!(v&&p.type===s.type&&k===this._step))A&&g.updateData(o,{isIgnore:M,clipShape:L,disableAnimation:!0,getSymbolPoint:function(me){return[d[me*2],d[me*2+1]]}}),b&&this._initSymbolLabelAnimation(o,s,L),k&&(T&&(T=po(T,d,s,k,C)),d=po(d,null,s,k,C)),v=this._newPolyline(d),N?y=this._newPolygon(d,T):y&&(x.remove(y),y=this._polygon=null),h||this._initOrUpdateEndLabel(e,s,Du(O)),x.setClipPath(Dj(this,s,!0,e));else{N&&!y?y=this._newPolygon(d,T):y&&!N&&(x.remove(y),y=this._polygon=null),h||this._initOrUpdateEndLabel(e,s,Du(O));var z=x.getClipPath();if(z){var U=Dj(this,s,!1,e);Kt(z,{shape:U.shape},e)}else x.setClipPath(Dj(this,s,!0,e));A&&g.updateData(o,{isIgnore:M,clipShape:L,disableAnimation:!0,getSymbolPoint:function(me){return[d[me*2],d[me*2+1]]}}),(!iI(this._stackedOnPoints,T)||!iI(this._points,d))&&(b?this._doUpdateAnimation(o,T,s,n,k,w,C):(k&&(T&&(T=po(T,d,s,k,C)),d=po(d,null,s,k,C)),v.setShape({points:d}),y&&y.setShape({points:d,stackedOnPoints:T})))}var H=e.getModel("emphasis"),P=H.get("focus"),F=H.get("blurScope"),Y=H.get("disabled");if(v.useStyle(Ge(c.getLineStyle(),{fill:"none",stroke:O,lineJoin:"bevel"})),Xr(v,e,"lineStyle"),v.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var X=v.getState("emphasis").style;X.lineWidth=+v.style.lineWidth+1}Xe(v).seriesIndex=e.seriesIndex,nr(v,P,F,Y);var q=cI(e.get("smooth")),G=e.get("smoothMonotone");if(v.setShape({smooth:q,smoothMonotone:G,connectNulls:C}),y){var $=o.getCalculationInfo("stackedOnSeries"),Z=0;y.useStyle(Ge(u.getAreaStyle(),{fill:O,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),$&&(Z=cI($.get("smooth"))),y.setShape({smooth:q,stackedOnSmooth:Z,smoothMonotone:G,connectNulls:C}),Xr(y,e,"areaStyle"),Xe(y).seriesIndex=e.seriesIndex,nr(y,P,F,Y)}var te=this._changePolyState;o.eachItemGraphicEl(function(me){me&&(me.onHoverStateChange=te)}),this._polyline.onHoverStateChange=te,this._data=o,this._coordSys=s,this._stackedOnPoints=T,this._points=d,this._step=k,this._valueOrigin=w,e.get("triggerLineEvent")&&(this.packEventData(e,v),y&&this.packEventData(e,y))},t.prototype.packEventData=function(e,a){Xe(a).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,a,n,s){var l=e.getData(),o=Su(l,s);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var c=l.getLayout("points"),u=l.getItemGraphicEl(o);if(!u){var d=c[o*2],h=c[o*2+1];if(isNaN(d)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(d,h))return;var p=e.get("zlevel")||0,g=e.get("z")||0;u=new Pm(l,o),u.x=d,u.y=h,u.setZ(p,g);var v=u.getSymbolPath().getTextContent();v&&(v.zlevel=p,v.z=g,v.z2=this._polyline.z2+1),u.__temp=!0,l.setItemGraphicEl(o,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Pt.prototype.highlight.call(this,e,a,n,s)},t.prototype.downplay=function(e,a,n,s){var l=e.getData(),o=Su(l,s);if(this._changePolyState("normal"),o!=null&&o>=0){var c=l.getItemGraphicEl(o);c&&(c.__temp?(l.setItemGraphicEl(o,null),this.group.remove(c)):c.downplay())}else Pt.prototype.downplay.call(this,e,a,n,s)},t.prototype._changePolyState=function(e){var a=this._polygon;dy(this._polyline,e),a&&dy(a,e)},t.prototype._newPolyline=function(e){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new Sse({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},t.prototype._newPolygon=function(e,a){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new CV({shape:{points:e,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,a,n){var s,l,o=a.getBaseAxis(),c=o.inverse;a.type==="cartesian2d"?(s=o.isHorizontal(),l=!1):a.type==="polar"&&(s=o.dim==="angle",l=!0);var u=e.hostModel,d=u.get("animationDuration");Le(d)&&(d=d(null));var h=u.get("animationDelay")||0,p=Le(h)?h(null):h;e.eachItemGraphicEl(function(g,v){var y=g;if(y){var x=[g.x,g.y],b=void 0,N=void 0,w=void 0;if(n)if(l){var S=n,T=a.pointToCoord(x);s?(b=S.startAngle,N=S.endAngle,w=-T[1]/180*Math.PI):(b=S.r0,N=S.r,w=T[0])}else{var A=n;s?(b=A.x,N=A.x+A.width,w=g.x):(b=A.y+A.height,N=A.y,w=g.y)}var C=N===b?0:(w-b)/(N-b);c&&(C=1-C);var M=Le(h)?h(v):d*C+p,R=y.getSymbolPath(),k=R.getTextContent();y.attr({scaleX:0,scaleY:0}),y.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:M}),k&&k.animateFrom({style:{opacity:0}},{duration:300,delay:M}),R.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,a,n){var s=e.getModel("endLabel");if(EV(e)){var l=e.getData(),o=this._polyline,c=l.getLayout("points");if(!c){o.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new vt({z2:200}),u.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var d=Lse(c);d>=0&&(ia(o,Zr(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:d,defaultText:function(h,p,g){return g!=null?NV(l,g):Bh(l,h)},enableTextSetter:!0},kse(s,a)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,a,n,s,l,o,c){var u=this._endLabel,d=this._polyline;if(u){e<1&&s.originalX==null&&(s.originalX=u.x,s.originalY=u.y);var h=n.getLayout("points"),p=n.hostModel,g=p.get("connectNulls"),v=o.get("precision"),y=o.get("distance")||0,x=c.getBaseAxis(),b=x.isHorizontal(),N=x.inverse,w=a.shape,S=N?b?w.x:w.y+w.height:b?w.x+w.width:w.y,T=(b?y:0)*(N?-1:1),A=(b?0:-y)*(N?-1:1),C=b?"x":"y",M=Ise(h,S,C),R=M.range,k=R[1]-R[0],L=void 0;if(k>=1){if(k>1&&!g){var O=uI(h,R[0]);u.attr({x:O[0]+T,y:O[1]+A}),l&&(L=p.getRawValue(R[0]))}else{var O=d.getPointOn(S,C);O&&u.attr({x:O[0]+T,y:O[1]+A});var z=p.getRawValue(R[0]),U=p.getRawValue(R[1]);l&&(L=e7(n,v,z,U,M.t))}s.lastFrameIndex=R[0]}else{var H=e===1||s.lastFrameIndex>0?R[0]:0,O=uI(h,H);l&&(L=p.getRawValue(H)),u.attr({x:O[0]+T,y:O[1]+A})}if(l){var P=af(u);typeof P.setLabelText=="function"&&P.setLabelText(L)}}},t.prototype._doUpdateAnimation=function(e,a,n,s,l,o,c){var u=this._polyline,d=this._polygon,h=e.hostModel,p=wse(this._data,e,this._stackedOnPoints,a,this._coordSys,n,this._valueOrigin),g=p.current,v=p.stackedOnCurrent,y=p.next,x=p.stackedOnNext;if(l&&(v=po(p.stackedOnCurrent,p.current,n,l,c),g=po(p.current,null,n,l,c),x=po(p.stackedOnNext,p.next,n,l,c),y=po(p.next,null,n,l,c)),oI(g,y)>3e3||d&&oI(v,x)>3e3){u.stopAnimation(),u.setShape({points:y}),d&&(d.stopAnimation(),d.setShape({points:y,stackedOnPoints:x}));return}u.shape.__points=p.current,u.shape.points=g;var b={shape:{points:y}};p.current!==g&&(b.shape.__points=p.next),u.stopAnimation(),Nt(u,b,h),d&&(d.setShape({points:g,stackedOnPoints:v}),d.stopAnimation(),Nt(d,{shape:{stackedOnPoints:x}},h),u.shape.points!==d.shape.points&&(d.shape.points=u.shape.points));for(var N=[],w=p.status,S=0;S<w.length;S++){var T=w[S].cmd;if(T==="="){var A=e.getItemGraphicEl(w[S].idx1);A&&N.push({el:A,ptIdx:S})}}u.animators&&u.animators.length&&u.animators[0].during(function(){d&&d.dirtyShape();for(var C=u.shape.__points,M=0;M<N.length;M++){var R=N[M].el,k=N[M].ptIdx*2;R.x=C[k],R.y=C[k+1],R.markRedraw()}})},t.prototype.remove=function(e){var a=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(s,l){s.__temp&&(a.remove(s),n.setItemGraphicEl(l,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t})(Pt);function Vm(r,t){return{seriesType:r,plan:of(),reset:function(e){var a=e.getData(),n=e.coordinateSystem,s=e.pipelineContext,l=t||s.large;if(n){var o=pe(n.dimensions,function(g){return a.mapDimension(g)}).slice(0,2),c=o.length,u=a.getCalculationInfo("stackResultDimension");Al(a,o[0])&&(o[0]=u),Al(a,o[1])&&(o[1]=u);var d=a.getStore(),h=a.getDimensionIndex(o[0]),p=a.getDimensionIndex(o[1]);return c&&{progress:function(g,v){for(var y=g.end-g.start,x=l&&gi(y*c),b=[],N=[],w=g.start,S=0;w<g.end;w++){var T=void 0;if(c===1){var A=d.get(h,w);T=n.dataToPoint(A,null,N)}else b[0]=d.get(h,w),b[1]=d.get(p,w),T=n.dataToPoint(b,null,N);l?(x[S++]=T[0],x[S++]=T[1]):v.setItemLayout(w,T.slice())}l&&v.setLayout("points",x)}}}}}}var Pse={average:function(r){for(var t=0,e=0,a=0;a<r.length;a++)isNaN(r[a])||(t+=r[a],e++);return e===0?NaN:t/e},sum:function(r){for(var t=0,e=0;e<r.length;e++)t+=r[e]||0;return t},max:function(r){for(var t=-1/0,e=0;e<r.length;e++)r[e]>t&&(t=r[e]);return isFinite(t)?t:NaN},min:function(r){for(var t=1/0,e=0;e<r.length;e++)r[e]<t&&(t=r[e]);return isFinite(t)?t:NaN},nearest:function(r){return r[0]}},zse=function(r){return Math.round(r.length/2)};function DV(r){return{seriesType:r,reset:function(t,e,a){var n=t.getData(),s=t.get("sampling"),l=t.coordinateSystem,o=n.count();if(o>10&&l.type==="cartesian2d"&&s){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=c.getExtent(),h=a.getDevicePixelRatio(),p=Math.abs(d[1]-d[0])*(h||1),g=Math.round(o/p);if(isFinite(g)&&g>1){s==="lttb"?t.setData(n.lttbDownSample(n.mapDimension(u.dim),1/g)):s==="minmax"&&t.setData(n.minmaxDownSample(n.mapDimension(u.dim),1/g));var v=void 0;je(s)?v=Pse[s]:Le(s)&&(v=s),v&&t.setData(n.downSample(n.mapDimension(u.dim),1/g,v,zse))}}}}}function Bse(r){r.registerChartView(Ose),r.registerSeriesModel(bse),r.registerLayout(Vm("line",!0)),r.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),a=t.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",a)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,DV("line"))}var nm=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return Di(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,a,n){var s=this.coordinateSystem;if(s&&s.clampData){var l=s.clampData(e),o=s.dataToPoint(l);if(n)B(s.getAxes(),function(p,g){if(p.type==="category"&&a!=null){var v=p.getTicksCoords(),y=p.getTickModel().get("alignWithLabel"),x=l[g],b=a[g]==="x1"||a[g]==="y1";if(b&&!y&&(x+=1),v.length<2)return;if(v.length===2){o[g]=p.toGlobalCoord(p.getExtent()[b?1:0]);return}for(var N=void 0,w=void 0,S=1,T=0;T<v.length;T++){var A=v[T].coord,C=T===v.length-1?v[T-1].tickValue+S:v[T].tickValue;if(C===x){w=A;break}else if(C<x)N=A;else if(N!=null&&C>x){w=(A+N)/2;break}T===1&&(S=C-v[0].tickValue)}w==null&&(N?N&&(w=v[v.length-1].coord):w=v[0].coord),o[g]=p.toGlobalCoord(w)}});else{var c=this.getData(),u=c.getLayout("offset"),d=c.getLayout("size"),h=s.getBaseAxis().isHorizontal()?0:1;o[h]+=u+d/2}return o}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},t})(zt);zt.registerClass(nm);var Vse=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return Di(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>e&&(e=a),e},t.prototype.brushSelector=function(e,a,n){return n.rect(a.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=$o(nm.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:ee.color.primary,borderWidth:2}},realtimeSort:!1}),t})(nm),Hse=(function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r})(),Iy=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="sausage",a}return t.prototype.getDefaultShape=function(){return new Hse},t.prototype.buildPath=function(e,a){var n=a.cx,s=a.cy,l=Math.max(a.r0||0,0),o=Math.max(a.r,0),c=(o-l)*.5,u=l+c,d=a.startAngle,h=a.endAngle,p=a.clockwise,g=Math.PI*2,v=p?h-d<g:d-h<g;v||(d=h-(p?g:-g));var y=Math.cos(d),x=Math.sin(d),b=Math.cos(h),N=Math.sin(h);v?(e.moveTo(y*l+n,x*l+s),e.arc(y*u+n,x*u+s,c,-Math.PI+d,d,!p)):e.moveTo(y*o+n,x*o+s),e.arc(n,s,o,d,h,!p),e.arc(b*u+n,N*u+s,c,h-Math.PI*2,h-Math.PI,!p),l!==0&&e.arc(n,s,l,h,d,p)},t})(ht);function Gse(r,t){t=t||{};var e=t.isRoundCap;return function(a,n,s){var l=n.position;if(!l||l instanceof Array)return iy(a,n,s);var o=r(l),c=n.distance!=null?n.distance:5,u=this.shape,d=u.cx,h=u.cy,p=u.r,g=u.r0,v=(p+g)/2,y=u.startAngle,x=u.endAngle,b=(y+x)/2,N=e?Math.abs(p-g)/2:0,w=Math.cos,S=Math.sin,T=d+p*w(y),A=h+p*S(y),C="left",M="top";switch(o){case"startArc":T=d+(g-c)*w(b),A=h+(g-c)*S(b),C="center",M="top";break;case"insideStartArc":T=d+(g+c)*w(b),A=h+(g+c)*S(b),C="center",M="bottom";break;case"startAngle":T=d+v*w(y)+U0(y,c+N,!1),A=h+v*S(y)+F0(y,c+N,!1),C="right",M="middle";break;case"insideStartAngle":T=d+v*w(y)+U0(y,-c+N,!1),A=h+v*S(y)+F0(y,-c+N,!1),C="left",M="middle";break;case"middle":T=d+v*w(b),A=h+v*S(b),C="center",M="middle";break;case"endArc":T=d+(p+c)*w(b),A=h+(p+c)*S(b),C="center",M="bottom";break;case"insideEndArc":T=d+(p-c)*w(b),A=h+(p-c)*S(b),C="center",M="top";break;case"endAngle":T=d+v*w(x)+U0(x,c+N,!0),A=h+v*S(x)+F0(x,c+N,!0),C="left",M="middle";break;case"insideEndAngle":T=d+v*w(x)+U0(x,-c+N,!0),A=h+v*S(x)+F0(x,-c+N,!0),C="right",M="middle";break;default:return iy(a,n,s)}return a=a||{},a.x=T,a.y=A,a.align=C,a.verticalAlign=M,a}}function Use(r,t,e,a){if(xt(a)){r.setTextConfig({rotation:a});return}else if(de(t)){r.setTextConfig({rotation:0});return}var n=r.shape,s=n.clockwise?n.startAngle:n.endAngle,l=n.clockwise?n.endAngle:n.startAngle,o=(s+l)/2,c,u=e(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=o;break;case"startAngle":case"insideStartAngle":c=s;break;case"endAngle":case"insideEndAngle":c=l;break;default:r.setTextConfig({rotation:0});return}var d=Math.PI*1.5-c;u==="middle"&&d>Math.PI/2&&d<Math.PI*1.5&&(d-=Math.PI),r.setTextConfig({rotation:d})}function U0(r,t,e){return t*Math.sin(r)*(e?-1:1)}function F0(r,t,e){return t*Math.cos(r)*(e?1:-1)}function vi(r,t,e){var a=r.get("borderRadius");if(a==null)return e?{cornerRadius:0}:null;de(a)||(a=[a,a,a,a]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:pe(a,function(s){return Bs(s,n)})}}var Mj=Math.max,Rj=Math.min;function Fse(r,t){var e=r.getArea&&r.getArea();if(Bo(r,"cartesian2d")){var a=r.getBaseAxis();if(a.type!=="category"||!a.onBand){var n=t.getLayout("bandWidth");a.isHorizontal()?(e.x-=n,e.width+=n*2):(e.y-=n,e.height+=n*2)}}return e}var Yse=(function(r){re(t,r);function t(){var e=r.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,a,n,s){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var l=e.get("coordinateSystem");(l==="cartesian2d"||l==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,a,n):this._renderNormal(e,a,n,s))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,a){this._progressiveEls=[],this._incrementalRenderLarge(e,a)},t.prototype.eachRendered=function(e){Wo(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var a=e.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(e,a,n,s){var l=this.group,o=e.getData(),c=this._data,u=e.coordinateSystem,d=u.getBaseAxis(),h;u.type==="cartesian2d"?h=d.isHorizontal():u.type==="polar"&&(h=d.dim==="angle");var p=e.isAnimationEnabled()?e:null,g=Wse(e,u);g&&this._enableRealtimeSort(g,o,n);var v=e.get("clip",!0)||g,y=Fse(u,o);l.removeClipPath();var x=e.get("roundCap",!0),b=e.get("showBackground",!0),N=e.getModel("backgroundStyle"),w=N.get("borderRadius")||0,S=[],T=this._backgroundEls,A=s&&s.isInitSort,C=s&&s.type==="changeAxisOrder";function M(L){var O=Y0[u.type](o,L);if(!O)return null;var z=Jse(u,h,O);return z.useStyle(N.getItemStyle()),u.type==="cartesian2d"?z.setShape("r",w):z.setShape("cornerRadius",w),S[L]=z,z}o.diff(c).add(function(L){var O=o.getItemModel(L),z=Y0[u.type](o,L,O);if(z&&(b&&M(L),!(!o.hasValue(L)||!gI[u.type](z)))){var U=!1;v&&(U=dI[u.type](y,z));var H=hI[u.type](e,o,L,z,h,p,d.model,!1,x);g&&(H.forceLabelAnimation=!0),mI(H,o,L,O,z,e,h,u.type==="polar"),A?H.attr({shape:z}):g?fI(g,p,H,z,L,h,!1,!1):Kt(H,{shape:z},e,L),o.setItemGraphicEl(L,H),l.add(H),H.ignore=U}}).update(function(L,O){var z=o.getItemModel(L),U=Y0[u.type](o,L,z);if(U){if(b){var H=void 0;T.length===0?H=M(O):(H=T[O],H.useStyle(N.getItemStyle()),u.type==="cartesian2d"?H.setShape("r",w):H.setShape("cornerRadius",w),S[L]=H);var P=Y0[u.type](o,L),F=RV(h,P,u);Nt(H,{shape:F},p,L)}var Y=c.getItemGraphicEl(O);if(!o.hasValue(L)||!gI[u.type](U)){l.remove(Y);return}var X=!1;v&&(X=dI[u.type](y,U),X&&l.remove(Y));var q=Y&&(Y.type==="sector"&&x||Y.type==="sausage"&&!x);if(q&&(Y&&xl(Y,e,O),Y=null),Y?ps(Y):Y=hI[u.type](e,o,L,U,h,p,d.model,!0,x),g&&(Y.forceLabelAnimation=!0),C){var G=Y.getTextContent();if(G){var $=af(G);$.prevValue!=null&&($.prevValue=$.value)}}else mI(Y,o,L,z,U,e,h,u.type==="polar");A?Y.attr({shape:U}):g?fI(g,p,Y,U,L,h,!0,C):Nt(Y,{shape:U},e,L,null),o.setItemGraphicEl(L,Y),Y.ignore=X,l.add(Y)}}).remove(function(L){var O=c.getItemGraphicEl(L);O&&xl(O,e,L)}).execute();var R=this._backgroundGroup||(this._backgroundGroup=new Pe);R.removeAll();for(var k=0;k<S.length;++k)R.add(S[k]);l.add(R),this._backgroundEls=S,this._data=o},t.prototype._renderLarge=function(e,a,n){this._clear(),xI(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,a){this._removeBackground(),xI(a,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var a=e.get("clip",!0)&&Bm(e.coordinateSystem,!1,e),n=this.group;a?n.setClipPath(a):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,a,n){var s=this;if(a.count()){var l=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,e,n),this._isFirstFrame=!1;else{var o=function(c){var u=a.getItemGraphicEl(c),d=u&&u.shape;return d&&Math.abs(l.isHorizontal()?d.height:d.width)||0};this._onRendered=function(){s._updateSortWithinSameData(a,o,l,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,a,n){var s=[];return e.each(e.mapDimension(a.dim),function(l,o){var c=n(o);c=c??NaN,s.push({dataIndex:o,mappedValue:c,ordinalNumber:l})}),s.sort(function(l,o){return o.mappedValue-l.mappedValue}),{ordinalNumbers:pe(s,function(l){return l.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,a,n){for(var s=n.scale,l=e.mapDimension(n.dim),o=Number.MAX_VALUE,c=0,u=s.getOrdinalMeta().categories.length;c<u;++c){var d=e.rawIndexOf(l,s.getRawOrdinalNumber(c)),h=d<0?Number.MIN_VALUE:a(e.indexOfRawIndex(d));if(h>o)return!0;o=h}return!1},t.prototype._isOrderDifferentInView=function(e,a){for(var n=a.scale,s=n.getExtent(),l=Math.max(0,s[0]),o=Math.min(s[1],n.getOrdinalMeta().categories.length-1);l<=o;++l)if(e.ordinalNumbers[l]!==n.getRawOrdinalNumber(l))return!0},t.prototype._updateSortWithinSameData=function(e,a,n,s){if(this._isOrderChangedWithinSameData(e,a,n)){var l=this._dataSort(e,n,a);this._isOrderDifferentInView(l,n)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:l}))}},t.prototype._dispatchInitSort=function(e,a,n){var s=a.baseAxis,l=this._dataSort(e,s,function(o){return e.get(e.mapDimension(a.otherAxis.dim),o)});n.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:l})},t.prototype.remove=function(e,a){this._clear(this._model),this._removeOnRenderedListener(a)},t.prototype.dispose=function(e,a){this._removeOnRenderedListener(a)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var a=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(s){xl(s,e,Xe(s).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t})(Pt),dI={cartesian2d:function(r,t){var e=t.width<0?-1:1,a=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var n=r.x+r.width,s=r.y+r.height,l=Mj(t.x,r.x),o=Rj(t.x+t.width,n),c=Mj(t.y,r.y),u=Rj(t.y+t.height,s),d=o<l,h=u<c;return t.x=d&&l>n?o:l,t.y=h&&c>s?u:c,t.width=d?0:o-l,t.height=h?0:u-c,e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),d||h},polar:function(r,t){var e=t.r0<=t.r?1:-1;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}var n=Rj(t.r,r.r),s=Mj(t.r0,r.r0);t.r=n,t.r0=s;var l=n-s<0;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}return l}},hI={cartesian2d:function(r,t,e,a,n,s,l,o,c){var u=new it({shape:ie({},a),z2:1});if(u.__dataIndex=e,u.name="item",s){var d=u.shape,h=n?"height":"width";d[h]=0}return u},polar:function(r,t,e,a,n,s,l,o,c){var u=!n&&c?Iy:Da,d=new u({shape:a,z2:1});d.name="item";var h=MV(n);if(d.calculateTextPosition=Gse(h,{isRoundCap:u===Iy}),s){var p=d.shape,g=n?"r":"endAngle",v={};p[g]=n?a.r0:a.startAngle,v[g]=a[g],(o?Nt:Kt)(d,{shape:v},s)}return d}};function Wse(r,t){var e=r.get("realtimeSort",!0),a=t.getBaseAxis();if(e&&a.type==="category"&&t.type==="cartesian2d")return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}function fI(r,t,e,a,n,s,l,o){var c,u;s?(u={x:a.x,width:a.width},c={y:a.y,height:a.height}):(u={y:a.y,height:a.height},c={x:a.x,width:a.width}),o||(l?Nt:Kt)(e,{shape:c},t,n,null);var d=t?r.baseAxis.model:null;(l?Nt:Kt)(e,{shape:u},d,n)}function pI(r,t){for(var e=0;e<t.length;e++)if(!isFinite(r[t[e]]))return!0;return!1}var $se=["x","y","width","height"],qse=["cx","cy","r","startAngle","endAngle"],gI={cartesian2d:function(r){return!pI(r,$se)},polar:function(r){return!pI(r,qse)}},Y0={cartesian2d:function(r,t,e){var a=r.getItemLayout(t);if(!a)return null;var n=e?Zse(e,a):0,s=a.width>0?1:-1,l=a.height>0?1:-1;return{x:a.x+s*n/2,y:a.y+l*n/2,width:a.width-s*n,height:a.height-l*n}},polar:function(r,t,e){var a=r.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function Xse(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function MV(r){return(function(t){var e=t?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+e;default:return a}}})(r)}function mI(r,t,e,a,n,s,l,o){var c=t.getItemVisual(e,"style");if(o){if(!s.get("roundCap")){var d=r.shape,h=vi(a.getModel("itemStyle"),d,!0);ie(d,h),r.setShape(d)}}else{var u=a.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(c);var p=a.getShallow("cursor");p&&r.attr("cursor",p);var g=o?l?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":l?n.height>=0?"bottom":"top":n.width>=0?"right":"left",v=Zr(a);ia(r,v,{labelFetcher:s,labelDataIndex:e,defaultText:Bh(s.getData(),e),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:g});var y=r.getTextContent();if(o&&y){var x=a.get(["label","position"]);r.textConfig.inside=x==="middle"?!0:null,Use(r,x==="outside"?g:x,MV(l),a.get(["label","rotate"]))}H7(y,v,s.getRawValue(e),function(N){return NV(t,N)});var b=a.getModel(["emphasis"]);nr(r,b.get("focus"),b.get("blurScope"),b.get("disabled")),Xr(r,a),Xse(n)&&(r.style.fill="none",r.style.stroke="none",B(r.states,function(N){N.style&&(N.style.fill=N.style.stroke="none")}))}function Zse(r,t){var e=r.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var a=r.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),s=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,n,s)}var Kse=(function(){function r(){}return r})(),vI=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="largeBar",a}return t.prototype.getDefaultShape=function(){return new Kse},t.prototype.buildPath=function(e,a){for(var n=a.points,s=this.baseDimIdx,l=1-this.baseDimIdx,o=[],c=[],u=this.barWidth,d=0;d<n.length;d+=3)c[s]=u,c[l]=n[d+2],o[s]=n[d+s],o[l]=n[d+l],e.rect(o[0],o[1],c[0],c[1])},t})(ht);function xI(r,t,e,a){var n=r.getData(),s=n.getLayout("valueAxisHorizontal")?1:0,l=n.getLayout("largeDataIndices"),o=n.getLayout("size"),c=r.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var d=new vI({shape:{points:u},incremental:!!a,silent:!0,z2:0});d.baseDimIdx=s,d.largeDataIndices=l,d.barWidth=o,d.useStyle(c.getItemStyle()),t.add(d),e&&e.push(d)}var h=new vI({shape:{points:n.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=s,h.largeDataIndices=l,h.barWidth=o,t.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,Xe(h).seriesIndex=r.seriesIndex,r.get("silent")||(h.on("mousedown",yI),h.on("mousemove",yI)),e&&e.push(h)}var yI=Ob(function(r){var t=this,e=Qse(t,r.offsetX,r.offsetY);Xe(t).dataIndex=e>=0?e:null},30,!1);function Qse(r,t,e){for(var a=r.baseDimIdx,n=1-a,s=r.shape.points,l=r.largeDataIndices,o=[],c=[],u=r.barWidth,d=0,h=s.length/3;d<h;d++){var p=d*3;if(c[a]=u,c[n]=s[p+2],o[a]=s[p+a],o[n]=s[p+n],c[n]<0&&(o[n]+=c[n],c[n]=-c[n]),t>=o[0]&&t<=o[0]+c[0]&&e>=o[1]&&e<=o[1]+c[1])return l[d]}return-1}function RV(r,t,e){if(Bo(e,"cartesian2d")){var a=t,n=e.getArea();return{x:r?a.x:n.x,y:r?n.y:a.y,width:r?a.width:n.width,height:r?n.height:a.height}}else{var n=e.getArea(),s=t;return{cx:n.cx,cy:n.cy,r0:r?n.r0:s.r0,r:r?n.r:s.r,startAngle:r?s.startAngle:0,endAngle:r?s.endAngle:Math.PI*2}}}function Jse(r,t,e){var a=r.type==="polar"?Da:it;return new a({shape:RV(t,e,r),silent:!0,z2:0})}function eie(r){r.registerChartView(Yse),r.registerSeriesModel(Vse),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,et(k9,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,O9("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,DV("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var a=t.componentType||"series";e.eachComponent({mainType:a,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var bI=Math.PI*2,W0=Math.PI/180;function tie(r,t,e){t.eachSeriesByType(r,function(a){var n=a.getData(),s=n.mapDimension("value"),l=sB(a,e),o=l.cx,c=l.cy,u=l.r,d=l.r0,h=l.viewRect,p=-a.get("startAngle")*W0,g=a.get("endAngle"),v=a.get("padAngle")*W0;g=g==="auto"?p-bI:-g*W0;var y=a.get("minAngle")*W0,x=y+v,b=0;n.each(s,function(F){!isNaN(F)&&b++});var N=n.getSum(s),w=Math.PI/(N||b)*2,S=a.get("clockwise"),T=a.get("roseType"),A=a.get("stillShowZeroSum"),C=n.getDataExtent(s);C[0]=0;var M=S?1:-1,R=[p,g],k=M*v/2;Sb(R,!S),p=R[0],g=R[1];var L=LV(a);L.startAngle=p,L.endAngle=g,L.clockwise=S,L.cx=o,L.cy=c,L.r=u,L.r0=d;var O=Math.abs(g-p),z=O,U=0,H=p;if(n.setLayout({viewRect:h,r:u}),n.each(s,function(F,Y){var X;if(isNaN(F)){n.setItemLayout(Y,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:S,cx:o,cy:c,r0:d,r:T?NaN:u});return}T!=="area"?X=N===0&&A?w:F*w:X=O/b,X<x?(X=x,z-=x):U+=F;var q=H+M*X,G=0,$=0;v>X?(G=H+M*X/2,$=G):(G=H+k,$=q-k),n.setItemLayout(Y,{angle:X,startAngle:G,endAngle:$,clockwise:S,cx:o,cy:c,r0:d,r:T?Tt(F,C,[d,u]):u}),H=q}),z<bI&&b)if(z<=.001){var P=O/b;n.each(s,function(F,Y){if(!isNaN(F)){var X=n.getItemLayout(Y);X.angle=P;var q=0,G=0;P<v?(q=p+M*(Y+1/2)*P,G=q):(q=p+M*Y*P+k,G=p+M*(Y+1)*P-k),X.startAngle=q,X.endAngle=G}})}else w=z/U,H=p,n.each(s,function(F,Y){if(!isNaN(F)){var X=n.getItemLayout(Y),q=X.angle===x?x:F*w,G=0,$=0;q<v?(G=H+M*q/2,$=G):(G=H+k,$=H+M*q-k),X.startAngle=G,X.endAngle=$,H+=M*q}})})}var LV=ut();function pf(r){return{seriesType:r,reset:function(t,e){var a=e.findComponents({mainType:"legend"});if(!(!a||!a.length)){var n=t.getData();n.filterSelf(function(s){for(var l=n.getName(s),o=0;o<a.length;o++)if(!a[o].isSelected(l))return!1;return!0})}}}}var rie=Math.PI/180;function _I(r,t,e,a,n,s,l,o,c,u){if(r.length<2)return;function d(y){for(var x=y.rB,b=x*x,N=0;N<y.list.length;N++){var w=y.list[N],S=Math.abs(w.label.y-e),T=a+w.len,A=T*T,C=Math.sqrt(Math.abs((1-S*S/b)*A)),M=t+(C+w.len2)*n,R=M-w.label.x,k=w.targetTextWidth-R*n;IV(w,k,!0),w.label.x=M}}function h(y){for(var x={list:[],maxY:0},b={list:[],maxY:0},N=0;N<y.length;N++)if(y[N].labelAlignTo==="none"){var w=y[N],S=w.label.y>e?b:x,T=Math.abs(w.label.y-e);if(T>=S.maxY){var A=w.label.x-t-w.len2*n,C=a+w.len,M=Math.abs(A)<C?Math.sqrt(T*T/(1-A*A/C/C)):C;S.rB=M,S.maxY=T}S.list.push(w)}d(x),d(b)}for(var p=r.length,g=0;g<p;g++)if(r[g].position==="outer"&&r[g].labelAlignTo==="labelLine"){var v=r[g].label.x-u;r[g].linePoints[1][0]+=v,r[g].label.x=u}D2(r,1,c,c+l)&&h(r)}function aie(r,t,e,a,n,s,l,o){for(var c=[],u=[],d=Number.MAX_VALUE,h=-Number.MAX_VALUE,p=0;p<r.length;p++){var g=r[p].label;Lj(r[p])||(g.x<t?(d=Math.min(d,g.x),c.push(r[p])):(h=Math.max(h,g.x),u.push(r[p])))}for(var p=0;p<r.length;p++){var v=r[p];if(!Lj(v)&&v.linePoints){if(v.labelStyleWidth!=null)continue;var g=v.label,y=v.linePoints,x=void 0;v.labelAlignTo==="edge"?g.x<t?x=y[2][0]-v.labelDistance-l-v.edgeDistance:x=l+n-v.edgeDistance-y[2][0]-v.labelDistance:v.labelAlignTo==="labelLine"?g.x<t?x=d-l-v.bleedMargin:x=l+n-h-v.bleedMargin:g.x<t?x=g.x-l-v.bleedMargin:x=l+n-g.x-v.bleedMargin,v.targetTextWidth=x,IV(v,x,!1)}}_I(u,t,e,a,1,n,s,l,o,h),_I(c,t,e,a,-1,n,s,l,o,d);for(var p=0;p<r.length;p++){var v=r[p];if(!Lj(v)&&v.linePoints){var g=v.label,y=v.linePoints,b=v.labelAlignTo==="edge",N=g.style.padding,w=N?N[1]+N[3]:0,S=g.style.backgroundColor?0:w,T=v.rect.width+S,A=y[1][0]-y[2][0];b?g.x<t?y[2][0]=l+v.edgeDistance+T+v.labelDistance:y[2][0]=l+n-v.edgeDistance-T-v.labelDistance:(g.x<t?y[2][0]=g.x+v.labelDistance:y[2][0]=g.x-v.labelDistance,y[1][0]=y[2][0]+A),y[1][1]=y[2][1]=g.y}}}function IV(r,t,e){if(r.labelStyleWidth==null){var a=r.label,n=a.style,s=r.rect,l=n.backgroundColor,o=n.padding,c=o?o[1]+o[3]:0,u=n.overflow,d=s.width+(l?0:c);if(t<d||e){if(u&&u.match("break")){a.setStyle("backgroundColor",null),a.setStyle("width",t-c);var h=a.getBoundingRect();a.setStyle("width",Math.ceil(h.width)),a.setStyle("backgroundColor",l)}else{var p=t-c,g=t<d?p:e?p>r.unconstrainedWidth?null:p:null;a.setStyle("width",g)}kV(s,a)}}}function kV(r,t){NI.rect=r,sV(NI,t,nie)}var nie={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},NI={};function Lj(r){return r.position==="center"}function sie(r){var t=r.getData(),e=[],a,n,s=!1,l=(r.get("minShowLabelAngle")||0)*rie,o=t.getLayout("viewRect"),c=t.getLayout("r"),u=o.width,d=o.x,h=o.y,p=o.height;function g(A){A.ignore=!0}function v(A){if(!A.ignore)return!0;for(var C in A.states)if(A.states[C].ignore===!1)return!0;return!1}t.each(function(A){var C=t.getItemGraphicEl(A),M=C.shape,R=C.getTextContent(),k=C.getTextGuideLine(),L=t.getItemModel(A),O=L.getModel("label"),z=O.get("position")||L.get(["emphasis","label","position"]),U=O.get("distanceToLabelLine"),H=O.get("alignTo"),P=Ne(O.get("edgeDistance"),u),F=O.get("bleedMargin");F==null&&(F=Math.min(u,p)>200?10:2);var Y=L.getModel("labelLine"),X=Y.get("length");X=Ne(X,u);var q=Y.get("length2");if(q=Ne(q,u),Math.abs(M.endAngle-M.startAngle)<l){B(R.states,g),R.ignore=!0,k&&(B(k.states,g),k.ignore=!0);return}if(v(R)){var G=(M.startAngle+M.endAngle)/2,$=Math.cos(G),Z=Math.sin(G),te,me,Ce,Ve;a=M.cx,n=M.cy;var Ee=z==="inside"||z==="inner";if(z==="center")te=M.cx,me=M.cy,Ve="center";else{var be=(Ee?(M.r+M.r0)/2*$:M.r*$)+a,He=(Ee?(M.r+M.r0)/2*Z:M.r*Z)+n;if(te=be+$*3,me=He+Z*3,!Ee){var Se=be+$*(X+c-M.r),Ie=He+Z*(X+c-M.r),ft=Se+($<0?-1:1)*q,le=Ie;H==="edge"?te=$<0?d+P:d+u-P:te=ft+($<0?-U:U),me=le,Ce=[[be,He],[Se,Ie],[ft,le]]}Ve=Ee?"center":H==="edge"?$>0?"right":"left":$>0?"left":"right"}var ze=Math.PI,$e=0,ot=O.get("rotate");if(xt(ot))$e=ot*(ze/180);else if(z==="center")$e=0;else if(ot==="radial"||ot===!0){var Rt=$<0?-G+ze:-G;$e=Rt}else if(ot==="tangential"&&z!=="outside"&&z!=="outer"){var or=Math.atan2($,Z);or<0&&(or=ze*2+or);var Qr=Z>0;Qr&&(or=ze+or),$e=or-ze}if(s=!!$e,R.x=te,R.y=me,R.rotation=$e,R.setStyle({verticalAlign:"middle"}),Ee){R.setStyle({align:Ve});var gn=R.states.select;gn&&(gn.x+=R.x,gn.y+=R.y)}else{var Vr=new We(0,0,0,0);kV(Vr,R),e.push({label:R,labelLine:k,position:z,len:X,len2:q,minTurnAngle:Y.get("minTurnAngle"),maxSurfaceAngle:Y.get("maxSurfaceAngle"),surfaceNormal:new Ye($,Z),linePoints:Ce,textAlign:Ve,labelDistance:U,labelAlignTo:H,edgeDistance:P,bleedMargin:F,rect:Vr,unconstrainedWidth:Vr.width,labelStyleWidth:R.style.width})}C.setTextConfig({inside:Ee})}}),!s&&r.get("avoidLabelOverlap")&&aie(e,a,n,c,u,p,d,h);for(var y=0;y<e.length;y++){var x=e[y],b=x.label,N=x.labelLine,w=isNaN(b.x)||isNaN(b.y);if(b){b.setStyle({align:x.textAlign}),w&&(B(b.states,g),b.ignore=!0);var S=b.states.select;S&&(S.x+=b.x,S.y+=b.y)}if(N){var T=x.linePoints;w||!T?(B(N.states,g),N.ignore=!0):(rV(T,x.minTurnAngle),Sne(T,x.surfaceNormal,x.maxSurfaceAngle),N.setShape({points:T}),b.__hostTarget.textGuideLineConfig={anchor:new Ye(T[0][0],T[0][1])})}}}var iie=(function(r){re(t,r);function t(e,a,n){var s=r.call(this)||this;s.z2=2;var l=new vt;return s.setTextContent(l),s.updateData(e,a,n,!0),s}return t.prototype.updateData=function(e,a,n,s){var l=this,o=e.hostModel,c=e.getItemModel(a),u=c.getModel("emphasis"),d=e.getItemLayout(a),h=ie(vi(c.getModel("itemStyle"),d,!0),d);if(isNaN(h.startAngle)){l.setShape(h);return}if(s){l.setShape(h);var p=o.getShallow("animationType");o.ecModel.ssr?(Kt(l,{scaleX:0,scaleY:0},o,{dataIndex:a,isFrom:!0}),l.originX=h.cx,l.originY=h.cy):p==="scale"?(l.shape.r=d.r0,Kt(l,{shape:{r:d.r}},o,a)):n!=null?(l.setShape({startAngle:n,endAngle:n}),Kt(l,{shape:{startAngle:d.startAngle,endAngle:d.endAngle}},o,a)):(l.shape.endAngle=d.startAngle,Nt(l,{shape:{endAngle:d.endAngle}},o,a))}else ps(l),Nt(l,{shape:h},o,a);l.useStyle(e.getItemVisual(a,"style")),Xr(l,c);var g=(d.startAngle+d.endAngle)/2,v=o.get("selectedOffset"),y=Math.cos(g)*v,x=Math.sin(g)*v,b=c.getShallow("cursor");b&&l.attr("cursor",b),this._updateLabel(o,e,a),l.ensureState("emphasis").shape=ie({r:d.r+(u.get("scale")&&u.get("scaleSize")||0)},vi(u.getModel("itemStyle"),d)),ie(l.ensureState("select"),{x:y,y:x,shape:vi(c.getModel(["select","itemStyle"]),d)}),ie(l.ensureState("blur"),{shape:vi(c.getModel(["blur","itemStyle"]),d)});var N=l.getTextGuideLine(),w=l.getTextContent();N&&ie(N.ensureState("select"),{x:y,y:x}),ie(w.ensureState("select"),{x:y,y:x}),nr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,a,n){var s=this,l=a.getItemModel(n),o=l.getModel("labelLine"),c=a.getItemVisual(n,"style"),u=c&&c.fill,d=c&&c.opacity;ia(s,Zr(l),{labelFetcher:a.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:d,defaultText:e.getFormattedLabel(n,"normal")||a.getName(n)});var h=s.getTextContent();s.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var p=l.get(["label","position"]);if(p!=="outside"&&p!=="outer")s.removeTextGuideLine();else{var g=this.getTextGuideLine();g||(g=new ma,this.setTextGuideLine(g)),uA(this,dA(l),{stroke:u,opacity:fn(o.get(["lineStyle","opacity"]),d,1)})}},t})(Da),lie=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,a,n,s){var l=e.getData(),o=this._data,c=this.group,u;if(!o&&l.count()>0){for(var d=l.getItemLayout(0),h=1;isNaN(d&&d.startAngle)&&h<l.count();++h)d=l.getItemLayout(h);d&&(u=d.startAngle)}if(this._emptyCircleSector&&c.remove(this._emptyCircleSector),l.count()===0&&e.get("showEmptyCircle")){var p=LV(e),g=new Da({shape:Oe(p)});g.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=g,c.add(g)}l.diff(o).add(function(v){var y=new iie(l,v,u);l.setItemGraphicEl(v,y),c.add(y)}).update(function(v,y){var x=o.getItemGraphicEl(y);x.updateData(l,v,u),x.off("click"),c.add(x),l.setItemGraphicEl(v,x)}).remove(function(v){var y=o.getItemGraphicEl(v);xl(y,e,v)}).execute(),sie(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=l)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,a){var n=a.getData(),s=n.getItemLayout(0);if(s){var l=e[0]-s.cx,o=e[1]-s.cy,c=Math.sqrt(l*l+o*o);return c<=s.r&&c>=s.r0}},t.type="pie",t})(Pt);function gf(r,t,e){t=de(t)&&{coordDimensions:t}||ie({encodeDefine:r.getEncode()},t);var a=r.getSource(),n=df(a,t).dimensions,s=new Ha(n,r);return s.initData(a,e),s}var mf=(function(){function r(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return r.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},r.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},r.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},r.prototype.getItemVisual=function(t,e){var a=this._getDataWithEncodedVisual();return a.getItemVisual(t,e)},r})(),oie=ut(),OV=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new mf(we(this.getData,this),we(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return gf(this,{coordDimensions:["value"],encodeDefaulter:et(zT,this)})},t.prototype.getDataParams=function(e){var a=this.getData(),n=oie(a),s=n.seats;if(!s){var l=[];a.each(a.mapDimension("value"),function(c){l.push(c)}),s=n.seats=Fz(l,a.hostModel.get("percentPrecision"))}var o=r.prototype.getDataParams.call(this,e);return o.percent=s[e]||0,o.$vars.push("percent"),o},t.prototype._defaultLabelLine=function(e){wu(e,"labelLine",["show"]);var a=e.labelLine,n=e.emphasis.labelLine;a.show=a.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t})(zt);tee({fullType:OV.type,getCoord2:function(r){return r.getShallow("center")}});function cie(r){return{seriesType:r,reset:function(t,e){var a=t.getData();a.filterSelf(function(n){var s=a.mapDimension("value"),l=a.get(s,n);return!(xt(l)&&!isNaN(l)&&l<0)})}}}function uie(r){r.registerChartView(lie),r.registerSeriesModel(OV),ZB("pie",r.registerAction),r.registerLayout(et(tie,"pie")),r.registerProcessor(pf("pie")),r.registerProcessor(cie("pie"))}var die=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return Di(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,a,n){return n.point(a.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:ee.color.primary}},universalTransition:{divideShape:"clone"}},t})(zt),PV=4,hie=(function(){function r(){}return r})(),fie=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.getDefaultShape=function(){return new hie},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,a){var n=a.points,s=a.size,l=this.symbolProxy,o=l.shape,c=e.getContext?e.getContext():e,u=c&&s[0]<PV,d=this.softClipShape,h;if(u){this._ctx=c;return}for(this._ctx=null,h=this._off;h<n.length;){var p=n[h++],g=n[h++];isNaN(p)||isNaN(g)||d&&!d.contain(p,g)||(o.x=p-s[0]/2,o.y=g-s[1]/2,o.width=s[0],o.height=s[1],l.buildPath(e,o,!0))}this.incremental&&(this._off=h,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,a=e.points,n=e.size,s=this._ctx,l=this.softClipShape,o;if(s){for(o=this._off;o<a.length;){var c=a[o++],u=a[o++];isNaN(c)||isNaN(u)||l&&!l.contain(c,u)||s.fillRect(c-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=o,this.notClear=!0)}},t.prototype.findDataIndex=function(e,a){for(var n=this.shape,s=n.points,l=n.size,o=Math.max(l[0],4),c=Math.max(l[1],4),u=s.length/2-1;u>=0;u--){var d=u*2,h=s[d]-o/2,p=s[d+1]-c/2;if(e>=h&&a>=p&&e<=h+o&&a<=p+c)return u}return-1},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),s=this.getBoundingRect();if(e=n[0],a=n[1],s.contain(e,a)){var l=this.hoverDataIdx=this.findDataIndex(e,a);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,n=a.points,s=a.size,l=s[0],o=s[1],c=1/0,u=1/0,d=-1/0,h=-1/0,p=0;p<n.length;){var g=n[p++],v=n[p++];c=Math.min(g,c),d=Math.max(g,d),u=Math.min(v,u),h=Math.max(v,h)}e=this._rect=new We(c-l/2,u-o/2,d-c+l,h-u+o)}return e},t})(ht),pie=(function(){function r(){this.group=new Pe}return r.prototype.updateData=function(t,e){this._clear();var a=this._create();a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,e)},r.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var n=(a.endIndex-a.startIndex)*2,s=a.startIndex*4*2;e=new Float32Array(e.buffer,s,n)}a.setShape("points",e),a.reset()})},r.prototype.incrementalPrepareUpdate=function(t){this._clear()},r.prototype.incrementalUpdate=function(t,e,a){var n=this._newAdded[0],s=e.getLayout("points"),l=n&&n.shape.points;if(l&&l.length<2e4){var o=l.length,c=new Float32Array(o+s.length);c.set(l),c.set(s,o),n.endIndex=t.end,n.setShape({points:c})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:s}),this._setCommon(u,e,a)}},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new fie({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},r.prototype._setCommon=function(t,e,a){var n=e.hostModel;a=a||{};var s=e.getVisual("symbolSize");t.setShape("size",s instanceof Array?s:[s,s]),t.softClipShape=a.clipShape||null,t.symbolProxy=Er(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var l=t.shape.size[0]<PV;t.useStyle(n.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var o=e.getVisual("style"),c=o&&o.fill;c&&t.setColor(c);var u=Xe(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(d){u.dataIndex=null;var h=t.hoverDataIdx;h>=0&&(u.dataIndex=h+(t.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r})(),gie=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=e.getData(),l=this._updateSymbolDraw(s,e);l.updateData(s,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,n){var s=e.getData(),l=this._updateSymbolDraw(s,e);l.incrementalPrepareUpdate(s),this._finished=!1},t.prototype.incrementalRender=function(e,a,n){this._symbolDraw.incrementalUpdate(e,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=e.end===a.getData().count()},t.prototype.updateTransform=function(e,a,n){var s=e.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var l=Vm("").reset(e,a,n);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var a=e.coordinateSystem;return a&&a.getArea&&a.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,a){var n=this._symbolDraw,s=a.pipelineContext,l=s.large;return(!n||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=l?new pie:new zm,this._isLargeDraw=l,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t})(Pt),zV={left:0,right:0,top:0,bottom:0},ky=["25%","25%"],mie=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.mergeDefaultAndTheme=function(e,a){var n=Bu(e.outerBounds);r.prototype.mergeDefaultAndTheme.apply(this,arguments),n&&e.outerBounds&&Si(e.outerBounds,n)},t.prototype.mergeOption=function(e,a){r.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&e.outerBounds&&Si(this.option.outerBounds,e.outerBounds)},t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:zV,outerBoundsContain:"all",outerBoundsClampWidth:ky[0],outerBoundsClampHeight:ky[1],backgroundColor:ee.color.transparent,borderWidth:1,borderColor:ee.color.neutral30},t})(ct),k2=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",pr).models[0]},t.type="cartesian2dAxis",t})(ct);yr(k2,ff);var BV={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:ee.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:ee.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:ee.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[ee.color.backgroundTint,ee.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:ee.color.neutral00,borderColor:ee.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},vie=rt({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},BV),xA=rt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:ee.color.axisMinorSplitLine,width:1}}},BV),xie=rt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},xA),yie=Ge({logBase:10},xA);const VV={category:vie,value:xA,time:xie,log:yie};var bie={value:1,category:1,time:1,log:1},O2=null;function _ie(r){O2||(O2=r)}function Hm(){return O2}function Vh(r,t,e,a){B(bie,function(n,s){var l=rt(rt({},VV[s],!0),a,!0),o=(function(c){re(u,c);function u(){var d=c!==null&&c.apply(this,arguments)||this;return d.type=t+"Axis."+s,d}return u.prototype.mergeDefaultAndTheme=function(d,h){var p=qg(this),g=p?Bu(d):{},v=h.getTheme();rt(d,v.get(s+"Axis")),rt(d,this.getDefaultOption()),d.type=jI(d),p&&Si(d,g,p)},u.prototype.optionUpdated=function(){var d=this.option;d.type==="category"&&(this.__ordinalMeta=em.createByAxisModel(this))},u.prototype.getCategories=function(d){var h=this.option;if(h.type==="category")return d?h.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.prototype.updateAxisBreaks=function(d){var h=Hm();return h?h.updateModelAxisBreak(this,d):{breaks:[]}},u.type=t+"Axis."+s,u.defaultOption=l,u})(e);r.registerComponentModel(o)}),r.registerSubTypeDefaulter(t+"Axis",jI)}function jI(r){return r.type||(r.data?"category":"value")}var Nie=(function(){function r(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return r.prototype.getAxis=function(t){return this._axes[t]},r.prototype.getAxes=function(){return pe(this._dimList,function(t){return this._axes[t]},this)},r.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Ct(this.getAxes(),function(e){return e.scale.type===t})},r.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},r})(),P2=["x","y"];function wI(r){return(r.type==="interval"||r.type==="time")&&!r.hasBreaks()}var jie=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=P2,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,a=this.getAxis("y").scale;if(!(!wI(e)||!wI(a))){var n=e.getExtent(),s=a.getExtent(),l=this.dataToPoint([n[0],s[0]]),o=this.dataToPoint([n[1],s[1]]),c=n[1]-n[0],u=s[1]-s[0];if(!(!c||!u)){var d=(o[0]-l[0])/c,h=(o[1]-l[1])/u,p=l[0]-n[0]*d,g=l[1]-s[0]*h,v=this._transform=[d,0,0,h,p,g];this._invTransform=hs([],v)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var a=this.getAxis("x"),n=this.getAxis("y");return a.contain(a.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,a){var n=this.dataToPoint(e),s=this.dataToPoint(a),l=this.getArea(),o=new We(n[0],n[1],s[0]-n[0],s[1]-n[1]);return l.intersect(o)},t.prototype.dataToPoint=function(e,a,n){n=n||[];var s=e[0],l=e[1];if(this._transform&&s!=null&&isFinite(s)&&l!=null&&isFinite(l))return xr(n,e,this._transform);var o=this.getAxis("x"),c=this.getAxis("y");return n[0]=o.toGlobalCoord(o.dataToCoord(s,a)),n[1]=c.toGlobalCoord(c.dataToCoord(l,a)),n},t.prototype.clampData=function(e,a){var n=this.getAxis("x").scale,s=this.getAxis("y").scale,l=n.getExtent(),o=s.getExtent(),c=n.parse(e[0]),u=s.parse(e[1]);return a=a||[],a[0]=Math.min(Math.max(Math.min(l[0],l[1]),c),Math.max(l[0],l[1])),a[1]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),a},t.prototype.pointToData=function(e,a,n){if(n=n||[],this._invTransform)return xr(n,e,this._invTransform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.coordToData(s.toLocalCoord(e[0]),a),n[1]=l.coordToData(l.toLocalCoord(e[1]),a),n},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(e){e=e||0;var a=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),s=Math.min(a[0],a[1])-e,l=Math.min(n[0],n[1])-e,o=Math.max(a[0],a[1])-s+e,c=Math.max(n[0],n[1])-l+e;return new We(s,l,o,c)},t})(Nie),HV=(function(r){re(t,r);function t(e,a,n,s,l){var o=r.call(this,e,a,n)||this;return o.index=0,o.type=s||"value",o.position=l||"bottom",o}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),e&&a[0]>a[1]&&a.reverse(),a},t.prototype.pointToData=function(e,a){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),a)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t})(vs),Hb="expandAxisBreak",GV="collapseAxisBreak",UV="toggleAxisBreak",yA="axisbreakchanged",wie={type:Hb,event:yA,update:"update",refineEvent:bA},Sie={type:GV,event:yA,update:"update",refineEvent:bA},Cie={type:UV,event:yA,update:"update",refineEvent:bA};function bA(r,t,e,a){var n=[];return B(r,function(s){n=n.concat(s.eventBreaks)}),{eventContent:{breaks:n}}}function Tie(r){r.registerAction(wie,t),r.registerAction(Sie,t),r.registerAction(Cie,t);function t(e,a){var n=[],s=Nh(a,e);function l(o,c){B(s[o],function(u){var d=u.updateAxisBreaks(e);B(d.breaks,function(h){var p;n.push(Ge((p={},p[c]=u.componentIndex,p),h))})})}return l("xAxisModels","xAxisIndex"),l("yAxisModels","yAxisIndex"),l("singleAxisModels","singleAxisIndex"),{eventBreaks:n}}}var So=Math.PI,Aie=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],Eie=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],Hh=ut(),FV=ut(),YV=(function(){function r(t){this.recordMap={},this.resolveAxisNameOverlap=t}return r.prototype.ensureRecord=function(t){var e=t.axis.dim,a=t.componentIndex,n=this.recordMap,s=n[e]||(n[e]=[]);return s[a]||(s[a]={ready:{}})},r})();function Die(r,t,e,a){var n=e.axis,s=t.ensureRecord(e),l=[],o,c=_A(r.axisName)&&zh(r.nameLocation);B(a,function(v){var y=Ci(v);if(!(!y||y.label.ignore)){l.push(y);var x=s.transGroup;c&&(x.transform?hs(Op,x.transform):Sm(Op),y.transform&&Is(Op,Op,y.transform),We.copy($0,y.localRect),$0.applyTransform(Op),o?o.union($0):We.copy(o=new We(0,0,0,0),$0))}});var u=Math.abs(s.dirVec.x)>.1?"x":"y",d=s.transGroup[u];if(l.sort(function(v,y){return Math.abs(v.label[u]-d)-Math.abs(y.label[u]-d)}),c&&o){var h=n.getExtent(),p=Math.min(h[0],h[1]),g=Math.max(h[0],h[1])-p;o.union(new We(p,0,g,1))}s.stOccupiedRect=o,s.labelInfoList=l}var Op=na(),$0=new We(0,0,0,0),WV=function(r,t,e,a,n,s){if(zh(r.nameLocation)){var l=s.stOccupiedRect;l&&$V(Ane({},l,s.transGroup.transform),a,n)}else qV(s.labelInfoList,s.dirVec,a,n)};function $V(r,t,e){var a=new Ye;Bb(r,t,a,{direction:Math.atan2(e.y,e.x),bidirectional:!1,touchThreshold:.05})&&A2(t,a)}function qV(r,t,e,a){for(var n=Ye.dot(a,t)>=0,s=0,l=r.length;s<l;s++){var o=r[n?s:l-1-s];o.label.ignore||$V(o,e,a)}}var qa=(function(){function r(t,e,a,n){this.group=new Pe,this._axisModel=t,this._api=e,this._local={},this._shared=n||new YV(WV),this._resetCfgDetermined(a)}return r.prototype.updateCfg=function(t){var e=this._cfg.raw;e.position=t.position,e.labelOffset=t.labelOffset,this._resetCfgDetermined(e)},r.prototype.__getRawCfg=function(){return this._cfg.raw},r.prototype._resetCfgDetermined=function(t){var e=this._axisModel,a=e.getDefaultOption?e.getDefaultOption():{},n=Me(t.axisName,e.get("name")),s=e.get("nameMoveOverlap");(s==null||s==="auto")&&(s=Me(t.defaultNameMoveOverlap,!0));var l={raw:t,position:t.position,rotation:t.rotation,nameDirection:Me(t.nameDirection,1),tickDirection:Me(t.tickDirection,1),labelDirection:Me(t.labelDirection,1),labelOffset:Me(t.labelOffset,0),silent:Me(t.silent,!0),axisName:n,nameLocation:fn(e.get("nameLocation"),a.nameLocation,"end"),shouldNameMoveOverlap:_A(n)&&s,optionHideOverlap:e.get(["axisLabel","hideOverlap"]),showMinorTicks:e.get(["minorTick","show"])};this._cfg=l;var o=new Pe({x:l.position[0],y:l.position[1],rotation:l.rotation});o.updateTransform(),this._transformGroup=o;var c=this._shared.ensureRecord(e);c.transGroup=this._transformGroup,c.dirVec=new Ye(Math.cos(-l.rotation),Math.sin(-l.rotation))},r.prototype.build=function(t,e){var a=this;return t||(t={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),B(Mie,function(n){t[n]&&Rie[n](a._cfg,a._local,a._shared,a._axisModel,a.group,a._transformGroup,a._api,e||{})}),this},r.innerTextLayout=function(t,e,a){var n=eT(e-t),s,l;return Mh(n)?(l=a>0?"top":"bottom",s="center"):Mh(n-So)?(l=a>0?"bottom":"top",s="center"):(l="middle",n>0&&n<So?s=a>0?"right":"left":s=a>0?"left":"right"),{rotation:n,textAlign:s,textVerticalAlign:l}},r.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},r.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},r})(),Mie=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],Rie={axisLine:function(r,t,e,a,n,s,l){var o=a.get(["axisLine","show"]);if(o==="auto"&&(o=!0,r.raw.axisLineAutoShow!=null&&(o=!!r.raw.axisLineAutoShow)),!!o){var c=a.axis.getExtent(),u=s.transform,d=[c[0],0],h=[c[1],0],p=d[0]>h[0];u&&(xr(d,d,u),xr(h,h,u));var g=ie({lineCap:"round"},a.getModel(["axisLine","lineStyle"]).getLineStyle()),v={strokeContainThreshold:r.raw.strokeContainThreshold||5,silent:!0,z2:1,style:g};if(a.get(["axisLine","breakLine"])&&a.axis.scale.hasBreaks())Hm().buildAxisBreakLine(a,n,s,v);else{var y=new Tr(ie({shape:{x1:d[0],y1:d[1],x2:h[0],y2:h[1]}},v));Ih(y.shape,y.style.lineWidth),y.anid="line",n.add(y)}var x=a.get(["axisLine","symbol"]);if(x!=null){var b=a.get(["axisLine","symbolSize"]);je(x)&&(x=[x,x]),(je(b)||xt(b))&&(b=[b,b]);var N=Hu(a.get(["axisLine","symbolOffset"])||0,b),w=b[0],S=b[1];B([{rotate:r.rotation+Math.PI/2,offset:N[0],r:0},{rotate:r.rotation-Math.PI/2,offset:N[1],r:Math.sqrt((d[0]-h[0])*(d[0]-h[0])+(d[1]-h[1])*(d[1]-h[1]))}],function(T,A){if(x[A]!=="none"&&x[A]!=null){var C=Er(x[A],-w/2,-S/2,w,S,g.stroke,!0),M=T.r+T.offset,R=p?h:d;C.attr({rotation:T.rotate,x:R[0]+M*Math.cos(r.rotation),y:R[1]-M*Math.sin(r.rotation),silent:!0,z2:11}),n.add(C)}})}}},axisTickLabelEstimate:function(r,t,e,a,n,s,l,o){var c=CI(t,n,o);c&&SI(r,t,e,a,n,s,l,Vs.estimate)},axisTickLabelDetermine:function(r,t,e,a,n,s,l,o){var c=CI(t,n,o);c&&SI(r,t,e,a,n,s,l,Vs.determine);var u=Oie(r,n,s,a);kie(r,t.labelLayoutList,u),Pie(r,n,s,a,r.tickDirection)},axisName:function(r,t,e,a,n,s,l,o){var c=e.ensureRecord(a);t.nameEl&&(n.remove(t.nameEl),t.nameEl=c.nameLayout=c.nameLocation=null);var u=r.axisName;if(_A(u)){var d=r.nameLocation,h=r.nameDirection,p=a.getModel("nameTextStyle"),g=a.get("nameGap")||0,v=a.axis.getExtent(),y=a.axis.inverse?-1:1,x=new Ye(0,0),b=new Ye(0,0);d==="start"?(x.x=v[0]-y*g,b.x=-y):d==="end"?(x.x=v[1]+y*g,b.x=y):(x.x=(v[0]+v[1])/2,x.y=r.labelOffset+h*g,b.y=h);var N=na();b.transform(Ml(N,N,r.rotation));var w=a.get("nameRotate");w!=null&&(w=w*So/180);var S,T;zh(d)?S=qa.innerTextLayout(r.rotation,w??r.rotation,h):(S=Lie(r.rotation,d,w||0,v),T=r.raw.axisNameAvailableWidth,T!=null&&(T=Math.abs(T/Math.sin(S.rotation)),!isFinite(T)&&(T=null)));var A=p.getFont(),C=a.get("nameTruncate",!0)||{},M=C.ellipsis,R=ga(r.raw.nameTruncateMaxWidth,C.maxWidth,T),k=o.nameMarginLevel||0,L=new vt({x:x.x,y:x.y,rotation:S.rotation,silent:qa.isLabelSilent(a),style:Gt(p,{text:u,font:A,overflow:"truncate",width:R,ellipsis:M,fill:p.getTextColor()||a.get(["axisLine","lineStyle","color"]),align:p.get("align")||S.textAlign,verticalAlign:p.get("verticalAlign")||S.textVerticalAlign}),z2:1});if(Ll({el:L,componentModel:a,itemName:u}),L.__fullText=u,L.anid="name",a.get("triggerEvent")){var O=qa.makeAxisEventDataBase(a);O.targetType="axisName",O.name=u,Xe(L).eventData=O}s.add(L),L.updateTransform(),t.nameEl=L;var z=c.nameLayout=Ci({label:L,priority:L.z2,defaultAttr:{ignore:L.ignore},marginDefault:zh(d)?Aie[k]:Eie[k]});if(c.nameLocation=d,n.add(L),L.decomposeTransform(),r.shouldNameMoveOverlap&&z){var U=e.ensureRecord(a);e.resolveAxisNameOverlap(r,e,a,z,b,U)}}}};function SI(r,t,e,a,n,s,l,o){ZV(t)||zie(r,t,n,o,a,l);var c=t.labelLayoutList;Bie(r,a,c,s),Gie(a,r.rotation,c);var u=r.optionHideOverlap;Iie(a,c,u),u&&iV(Ct(c,function(d){return d&&!d.label.ignore})),Die(r,e,a,c)}function Lie(r,t,e,a){var n=eT(e-r),s,l,o=a[0]>a[1],c=t==="start"&&!o||t!=="start"&&o;return Mh(n-So/2)?(l=c?"bottom":"top",s="center"):Mh(n-So*1.5)?(l=c?"top":"bottom",s="center"):(l="middle",n<So*1.5&&n>So/2?s=c?"left":"right":s=c?"right":"left"),{rotation:n,textAlign:s,textVerticalAlign:l}}function Iie(r,t,e){if(U9(r.axis))return;function a(o,c,u){var d=Ci(t[c]),h=Ci(t[u]);if(!(!d||!h)){if(o===!1||d.suggestIgnore){cg(d.label);return}if(h.suggestIgnore){cg(h.label);return}var p=.1;if(!e){var g=[0,0,0,0];d=E2({marginForce:g},d),h=E2({marginForce:g},h)}Bb(d,h,null,{touchThreshold:p})&&cg(o?h.label:d.label)}}var n=r.get(["axisLabel","showMinLabel"]),s=r.get(["axisLabel","showMaxLabel"]),l=t.length;a(n,0,1),a(s,l-1,l-2)}function kie(r,t,e){r.showMinorTicks||B(t,function(a){if(a&&a.label.ignore)for(var n=0;n<e.length;n++){var s=e[n],l=FV(s),o=Hh(a.label);if(l.tickValue!=null&&!l.onBand&&l.tickValue===o.tickValue){cg(s);return}}})}function cg(r){r&&(r.ignore=!0)}function XV(r,t,e,a,n){for(var s=[],l=[],o=[],c=0;c<r.length;c++){var u=r[c].coord;l[0]=u,l[1]=0,o[0]=u,o[1]=e,t&&(xr(l,l,t),xr(o,o,t));var d=new Tr({shape:{x1:l[0],y1:l[1],x2:o[0],y2:o[1]},style:a,z2:2,autoBatch:!0,silent:!0});Ih(d.shape,d.style.lineWidth),d.anid=n+"_"+r[c].tickValue,s.push(d);var h=FV(d);h.onBand=!!r[c].onBand,h.tickValue=r[c].tickValue}return s}function Oie(r,t,e,a){var n=a.axis,s=a.getModel("axisTick"),l=s.get("show");if(l==="auto"&&(l=!0,r.raw.axisTickAutoShow!=null&&(l=!!r.raw.axisTickAutoShow)),!l||n.scale.isBlank())return[];for(var o=s.getModel("lineStyle"),c=r.tickDirection*s.get("length"),u=n.getTicksCoords(),d=XV(u,e.transform,c,Ge(o.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<d.length;h++)t.add(d[h]);return d}function Pie(r,t,e,a,n){var s=a.axis,l=a.getModel("minorTick");if(!(!r.showMinorTicks||s.scale.isBlank())){var o=s.getMinorTicksCoords();if(o.length)for(var c=l.getModel("lineStyle"),u=n*l.get("length"),d=Ge(c.getLineStyle(),Ge(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var p=XV(o[h],e.transform,u,d,"minorticks_"+h),g=0;g<p.length;g++)t.add(p[g])}}function CI(r,t,e){if(ZV(r)){var a=r.axisLabelsCreationContext,n=a.out.noPxChangeTryDetermine;if(e.noPxChange){for(var s=!0,l=0;l<n.length;l++)s=s&&n[l]();if(s)return!1}n.length&&(t.remove(r.labelGroup),z2(r,null,null,null))}return!0}function zie(r,t,e,a,n,s){var l=n.axis,o=ga(r.raw.axisLabelShow,n.get(["axisLabel","show"])),c=new Pe;e.add(c);var u=Ay(a);if(!o||l.scale.isBlank()){z2(t,[],c,u);return}var d=n.getModel("axisLabel"),h=l.getViewLabels(u),p=(ga(r.raw.labelRotate,d.get("rotate"))||0)*So/180,g=qa.innerTextLayout(r.rotation,p,r.labelDirection),v=n.getCategories&&n.getCategories(!0),y=[],x=n.get("triggerEvent"),b=1/0,N=-1/0;B(h,function(S,T){var A,C=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(S.tickValue):S.tickValue,M=S.formattedLabel,R=S.rawLabel,k=d;if(v&&v[C]){var L=v[C];Ue(L)&&L.textStyle&&(k=new dt(L.textStyle,d,n.ecModel))}var O=k.getTextColor()||n.get(["axisLine","lineStyle","color"]),z=k.getShallow("align",!0)||g.textAlign,U=Me(k.getShallow("alignMinLabel",!0),z),H=Me(k.getShallow("alignMaxLabel",!0),z),P=k.getShallow("verticalAlign",!0)||k.getShallow("baseline",!0)||g.textVerticalAlign,F=Me(k.getShallow("verticalAlignMinLabel",!0),P),Y=Me(k.getShallow("verticalAlignMaxLabel",!0),P),X=10+(((A=S.time)===null||A===void 0?void 0:A.level)||0);b=Math.min(b,X),N=Math.max(N,X);var q=new vt({x:0,y:0,rotation:0,silent:qa.isLabelSilent(n),z2:X,style:Gt(k,{text:M,align:T===0?U:T===h.length-1?H:z,verticalAlign:T===0?F:T===h.length-1?Y:P,fill:Le(O)?O(l.type==="category"?R:l.type==="value"?C+"":C,T):O})});q.anid="label_"+C;var G=Hh(q);if(G.break=S.break,G.tickValue=C,G.layoutRotation=g.rotation,Ll({el:q,componentModel:n,itemName:M,formatterParamsExtra:{isTruncated:function(){return q.isTruncated},value:R,tickIndex:T}}),x){var $=qa.makeAxisEventDataBase(n);$.targetType="axisLabel",$.value=R,$.tickIndex=T,S.break&&($.break={start:S.break.parsedBreak.vmin,end:S.break.parsedBreak.vmax}),l.type==="category"&&($.dataIndex=C),Xe(q).eventData=$,S.break&&Hie(n,s,q,S.break)}y.push(q),c.add(q)});var w=pe(y,function(S){return{label:S,priority:Hh(S).break?S.z2+(N-b+1):S.z2,defaultAttr:{ignore:S.ignore}}});z2(t,w,c,u)}function ZV(r){return!!r.labelLayoutList}function z2(r,t,e,a){r.labelLayoutList=t,r.labelGroup=e,r.axisLabelsCreationContext=a}function Bie(r,t,e,a){var n=t.get(["axisLabel","margin"]);B(e,function(s,l){var o=Ci(s);if(o){var c=o.label,u=Hh(c);o.suggestIgnore=c.ignore,c.ignore=!1,sy(el,Vie),el.x=t.axis.dataToCoord(u.tickValue),el.y=r.labelOffset+r.labelDirection*n,el.rotation=u.layoutRotation,a.add(el),el.updateTransform(),a.remove(el),el.decomposeTransform(),sy(c,el),c.markRedraw(),Ry(o,!0),Ci(o)}})}var el=new it,Vie=new it;function _A(r){return!!r}function Hie(r,t,e,a){e.on("click",function(n){var s={type:Hb,breaks:[{start:a.parsedBreak.breakOption.start,end:a.parsedBreak.breakOption.end}]};s[r.axis.dim+"AxisIndex"]=r.componentIndex,t.dispatchAction(s)})}function Gie(r,t,e){var a=Or();if(a){var n=a.retrieveAxisBreakPairs(e,function(l){return l&&Hh(l.label).break},!0),s=r.get(["breakLabelLayout","moveOverlap"],!0);(s===!0||s==="auto")&&B(n,function(l){Hm().adjustBreakLabelPair(r.axis.inverse,t,[Ci(e[l[0]]),Ci(e[l[1]])])})}}function Oy(r,t,e){e=e||{};var a=t.axis,n={},s=a.getAxesOnZeroOf()[0],l=a.position,o=s?"onZero":l,c=a.dim,u=[r.x,r.x+r.width,r.y,r.y+r.height],d={left:0,right:1,top:0,bottom:1,onZero:2},h=t.get("offset")||0,p=c==="x"?[u[2]-h,u[3]+h]:[u[0]-h,u[1]+h];if(s){var g=s.toGlobalCoord(s.dataToCoord(0));p[d.onZero]=Math.max(Math.min(g,p[1]),p[0])}n.position=[c==="y"?p[d[o]]:u[0],c==="x"?p[d[o]]:u[3]],n.rotation=Math.PI/2*(c==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=v[l],n.labelOffset=s?p[d[l]]-p[d.onZero]:0,t.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),ga(e.labelInside,t.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var y=t.get(["axisLabel","rotate"]);return n.labelRotate=o==="top"?-y:y,n.z2=1,n}function Uie(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function TI(r){var t={xAxisModel:null,yAxisModel:null};return B(t,function(e,a){var n=a.replace(/Model$/,""),s=r.getReferringComponents(n,pr).models[0];t[a]=s}),t}function Fie(r,t,e,a,n,s){for(var l=Oy(r,e),o=!1,c=!1,u=0;u<t.length;u++)N2(t[u].getOtherAxis(e.axis).scale)&&(o=c=!0,e.axis.type==="category"&&e.axis.onBand&&(c=!1));return l.axisLineAutoShow=o,l.axisTickAutoShow=c,l.defaultNameMoveOverlap=s,new qa(e,a,l,n)}function Yie(r,t,e){var a=Oy(t,e);r.updateCfg(a)}function KV(r,t,e){var a=El.prototype,n=a.getTicks.call(e),s=a.getTicks.call(e,{expandToNicedExtent:!0}),l=n.length-1,o=a.getInterval.call(e),c=G9(r,t),u=c.extent,d=c.fixMin,h=c.fixMax;r.type==="log"&&(u=j2(r.base,u,!0)),r.setBreaksFromOption(F9(t)),r.setExtent(u[0],u[1]),r.calcNiceExtent({splitNumber:l,fixMin:d,fixMax:h});var p=a.getExtent.call(r);d&&(u[0]=p[0]),h&&(u[1]=p[1]);var g=a.getInterval.call(r),v=u[0],y=u[1];if(d&&h)g=(y-v)/l;else if(d)for(y=u[0]+g*l;y<u[1]&&isFinite(y)&&isFinite(u[1]);)g=xj(g),y=u[0]+g*l;else if(h)for(v=u[1]-g*l;v>u[0]&&isFinite(v)&&isFinite(u[0]);)g=xj(g),v=u[1]-g*l;else{var x=r.getTicks().length-1;x>l&&(g=xj(g));var b=g*l;y=Math.ceil(u[1]/g)*g,v=Cr(y-b),v<0&&u[0]>=0?(v=0,y=Cr(b)):y>0&&u[1]<=0&&(y=0,v=-Cr(b))}var N=(n[0].value-s[0].value)/o,w=(n[l].value-s[l].value)/o;a.setExtent.call(r,v+g*N,y+g*w),a.setInterval.call(r,g),(N||w)&&a.setNiceExtent.call(r,v+g,y-g)}var AI=[[3,1],[0,2]],Wie=(function(){function r(t,e,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=P2,this._initCartesian(t,e,a),this.model=t}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(t,e){var a=this._axesMap;this._updateScale(t,this.model);function n(l){var o,c=gt(l),u=c.length;if(u){for(var d=[],h=u-1;h>=0;h--){var p=+c[h],g=l[p],v=g.model,y=g.scale;N2(y)&&v.get("alignTicks")&&v.get("interval")==null?d.push(g):(Mu(y,v),N2(y)&&(o=g))}d.length&&(o||(o=d.pop(),Mu(o.scale,o.model)),B(d,function(x){KV(x.scale,x.model,o.scale)}))}}n(a.x),n(a.y);var s={};B(a.x,function(l){EI(a,"y",l,s)}),B(a.y,function(l){EI(a,"x",l,s)}),this.resize(this.model,e)},r.prototype.resize=function(t,e,a){var n=Kr(t,e),s=this._rect=rr(t.getBoxLayoutParams(),n.refContainer),l=this._axesMap,o=this._coordsList,c=t.get("containLabel");if(B2(l,s),!a){var u=Xie(s,o,l,c,e),d=void 0;if(c)V2?(V2(this._axesList,s),B2(l,s)):d=RI(s.clone(),"axisLabel",null,s,l,u,n);else{var h=Zie(t,s,n),p=h.outerBoundsRect,g=h.parsedOuterBoundsContain,v=h.outerBoundsClamp;p&&(d=RI(p,g,v,s,l,u,n))}QV(s,l,Vs.determine,null,d,n)}B(this._coordsList,function(y){y.calcAffineTransform()})},r.prototype.getAxis=function(t,e){var a=this._axesMap[t];if(a!=null)return a[e||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var a="x"+t+"y"+e;return this._coordsMap[a]}Ue(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,s=this._coordsList;n<s.length;n++)if(s[n].getAxis("x").index===t||s[n].getAxis("y").index===e)return s[n]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(t,e,a){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.dataToPoint(a):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(a)):null},r.prototype.convertFromPixel=function(t,e,a){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.pointToData(a):n.axis?n.axis.coordToData(n.axis.toLocalCoord(a)):null},r.prototype._findConvertTarget=function(t){var e=t.seriesModel,a=t.xAxisModel||e&&e.getReferringComponents("xAxis",pr).models[0],n=t.yAxisModel||e&&e.getReferringComponents("yAxis",pr).models[0],s=t.gridModel,l=this._coordsList,o,c;if(e)o=e.coordinateSystem,tt(l,o)<0&&(o=null);else if(a&&n)o=this.getCartesian(a.componentIndex,n.componentIndex);else if(a)c=this.getAxis("x",a.componentIndex);else if(n)c=this.getAxis("y",n.componentIndex);else if(s){var u=s.coordinateSystem;u===this&&(o=this._coordsList[0])}return{cartesian:o,axis:c}},r.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},r.prototype._initCartesian=function(t,e,a){var n=this,s=this,l={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},c={x:0,y:0};if(e.eachComponent("xAxis",u("x"),this),e.eachComponent("yAxis",u("y"),this),!c.x||!c.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,B(o.x,function(d,h){B(o.y,function(p,g){var v="x"+h+"y"+g,y=new jie(v);y.master=n,y.model=t,n._coordsMap[v]=y,n._coordsList.push(y),y.addAxis(d),y.addAxis(p)})});function u(d){return function(h,p){if(Ij(h,t)){var g=h.get("position");d==="x"?g!=="top"&&g!=="bottom"&&(g=l.bottom?"top":"bottom"):g!=="left"&&g!=="right"&&(g=l.left?"right":"left"),l[g]=!0;var v=new HV(d,Om(h),[0,0],h.get("type"),g),y=v.type==="category";v.onBand=y&&h.get("boundaryGap"),v.inverse=h.get("inverse"),h.axis=v,v.model=h,v.grid=s,v.index=p,s._axesList.push(v),o[d][p]=v,c[d]++}}}},r.prototype._updateScale=function(t,e){B(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var s=n.model.get("categorySortInfo");n.scale.setSortInfo(s)}}),t.eachSeries(function(n){if(Uie(n)){var s=TI(n),l=s.xAxisModel,o=s.yAxisModel;if(!Ij(l,e)||!Ij(o,e))return;var c=this.getCartesian(l.componentIndex,o.componentIndex),u=n.getData(),d=c.getAxis("x"),h=c.getAxis("y");a(u,d),a(u,h)}},this);function a(n,s){B(Ty(n,s.dim),function(l){s.scale.unionExtentFromData(n,l)})}},r.prototype.getTooltipAxes=function(t){var e=[],a=[];return B(this.getCartesians(),function(n){var s=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),l=n.getOtherAxis(s);tt(e,s)<0&&e.push(s),tt(a,l)<0&&a.push(l)}),{baseAxes:e,otherAxes:a}},r.create=function(t,e){var a=[];return t.eachComponent("grid",function(n,s){var l=new r(n,t,e);l.name="grid_"+s,l.resize(n,e,!0),n.coordinateSystem=l,a.push(l)}),t.eachSeries(function(n){Im({targetModel:n,coordSysType:"cartesian2d",coordSysProvider:s});function s(){var l=TI(n),o=l.xAxisModel,c=l.yAxisModel,u=o.getCoordSysModel(),d=u.coordinateSystem;return d.getCartesian(o.componentIndex,c.componentIndex)}}),a},r.dimensions=P2,r})();function Ij(r,t){return r.getCoordSysModel()===t}function EI(r,t,e,a){e.getAxesOnZeroOf=function(){return s?[s]:[]};var n=r[t],s,l=e.model,o=l.get(["axisLine","onZero"]),c=l.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(c!=null)DI(n[c])&&(s=n[c]);else for(var u in n)if(n.hasOwnProperty(u)&&DI(n[u])&&!a[d(n[u])]){s=n[u];break}s&&(a[d(s)]=!0);function d(h){return h.dim+"_"+h.index}}function DI(r){return r&&r.type!=="category"&&r.type!=="time"&&zae(r)}function $ie(r,t){var e=r.getExtent(),a=e[0]+e[1];r.toGlobalCoord=r.dim==="x"?function(n){return n+t}:function(n){return a-n+t},r.toLocalCoord=r.dim==="x"?function(n){return n-t}:function(n){return a-n+t}}function B2(r,t){B(r.x,function(e){return MI(e,t.x,t.width)}),B(r.y,function(e){return MI(e,t.y,t.height)})}function MI(r,t,e){var a=[0,e],n=r.inverse?1:0;r.setExtent(a[n],a[1-n]),$ie(r,t)}var V2;function qie(r){V2=r}function RI(r,t,e,a,n,s,l){QV(a,n,Vs.estimate,t,!1,l);var o=[0,0,0,0];u(0),u(1),d(a,0,NaN),d(a,1,NaN);var c=Fo(o,function(p){return p>0})==null;return Au(a,o,!0,!0,e),B2(n,a),c;function u(p){B(n[Ke[p]],function(g){if(tm(g.model)){var v=s.ensureRecord(g.model),y=v.labelInfoList;if(y)for(var x=0;x<y.length;x++){var b=y[x],N=g.scale.normalize(Hh(b.label).tickValue);N=p===1?1-N:N,d(b.rect,p,N),d(b.rect,1-p,NaN)}var w=v.nameLayout;if(w){var N=zh(v.nameLocation)?.5:NaN;d(w.rect,p,N),d(w.rect,1-p,NaN)}}})}function d(p,g,v){var y=r[Ke[g]]-p[Ke[g]],x=p[zr[g]]+p[Ke[g]]-(r[zr[g]]+r[Ke[g]]);y=h(y,1-v),x=h(x,v);var b=AI[g][0],N=AI[g][1];o[b]=Sr(o[b],y),o[N]=Sr(o[N],x)}function h(p,g){return p>0&&!Ta(g)&&g>1e-4&&(p/=g),p}}function Xie(r,t,e,a,n){var s=new YV(Kie);return B(e,function(l){return B(l,function(o){if(tm(o.model)){var c=!a;o.axisBuilder=Fie(r,t,o.model,n,s,c)}})}),s}function QV(r,t,e,a,n,s){var l=e===Vs.determine;B(t,function(u){return B(u,function(d){tm(d.model)&&(Yie(d.axisBuilder,r,d.model),d.axisBuilder.build(l?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:n}))})});var o={x:0,y:0};c(0),c(1);function c(u){o[Ke[1-u]]=r[zr[u]]<=s.refContainer[zr[u]]*.5?0:1-u===1?2:1}B(t,function(u,d){return B(u,function(h){tm(h.model)&&((a==="all"||l)&&h.axisBuilder.build({axisName:!0},{nameMarginLevel:o[d]}),l&&h.axisBuilder.build({axisLine:!0}))})})}function Zie(r,t,e){var a,n=r.get("outerBoundsMode",!0);n==="same"?a=t.clone():(n==null||n==="auto")&&(a=rr(r.get("outerBounds",!0)||zV,e.refContainer));var s=r.get("outerBoundsContain",!0),l;s==null||s==="auto"||tt(["all","axisLabel"],s)<0?l="all":l=s;var o=[ly(Me(r.get("outerBoundsClampWidth",!0),ky[0]),t.width),ly(Me(r.get("outerBoundsClampHeight",!0),ky[1]),t.height)];return{outerBoundsRect:a,parsedOuterBoundsContain:l,outerBoundsClamp:o}}var Kie=function(r,t,e,a,n,s){var l=e.axis.dim==="x"?"y":"x";WV(r,t,e,a,n,s),zh(r.nameLocation)||B(t.recordMap[l],function(o){o&&o.labelInfoList&&o.dirVec&&qV(o.labelInfoList,o.dirVec,a,n)})};function Qie(r,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Jie(e,r,t),e.seriesInvolved&&tle(e,r),e}function Jie(r,t,e){var a=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),s=n.get("link",!0)||[],l=[];B(e.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var c=sm(o.model),u=r.coordSysAxesInfo[c]={};r.coordSysMap[c]=o;var d=o.model,h=d.getModel("tooltip",a);if(B(o.getAxes(),et(y,!1,null)),o.getTooltipAxes&&a&&h.get("show")){var p=h.get("trigger")==="axis",g=h.get(["axisPointer","type"])==="cross",v=o.getTooltipAxes(h.get(["axisPointer","axis"]));(p||g)&&B(v.baseAxes,et(y,g?"cross":!0,p)),g&&B(v.otherAxes,et(y,"cross",!1))}function y(x,b,N){var w=N.model.getModel("axisPointer",n),S=w.get("show");if(!(!S||S==="auto"&&!x&&!H2(w))){b==null&&(b=w.get("triggerTooltip")),w=x?ele(N,h,n,t,x,b):w;var T=w.get("snap"),A=w.get("triggerEmphasis"),C=sm(N.model),M=b||T||N.type==="category",R=r.axesInfo[C]={key:C,axis:N,coordSys:o,axisPointerModel:w,triggerTooltip:b,triggerEmphasis:A,involveSeries:M,snap:T,useHandle:H2(w),seriesModels:[],linkGroup:null};u[C]=R,r.seriesInvolved=r.seriesInvolved||M;var k=rle(s,N);if(k!=null){var L=l[k]||(l[k]={axesInfo:{}});L.axesInfo[C]=R,L.mapper=s[k].mapper,R.linkGroup=L}}}})}function ele(r,t,e,a,n,s){var l=t.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],c={};B(o,function(p){c[p]=Oe(l.get(p))}),c.snap=r.type!=="category"&&!!s,l.get("type")==="cross"&&(c.type="line");var u=c.label||(c.label={});if(u.show==null&&(u.show=!1),n==="cross"){var d=l.get(["label","show"]);if(u.show=d??!0,!s){var h=c.lineStyle=l.get("crossStyle");h&&Ge(u,h.textStyle)}}return r.model.getModel("axisPointer",new dt(c,e,a))}function tle(r,t){t.eachSeries(function(e){var a=e.coordinateSystem,n=e.get(["tooltip","trigger"],!0),s=e.get(["tooltip","show"],!0);!a||!a.model||n==="none"||n===!1||n==="item"||s===!1||e.get(["axisPointer","show"],!0)===!1||B(r.coordSysAxesInfo[sm(a.model)],function(l){var o=l.axis;a.getAxis(o.dim)===o&&(l.seriesModels.push(e),l.seriesDataCount==null&&(l.seriesDataCount=0),l.seriesDataCount+=e.getData().count())})})}function rle(r,t){for(var e=t.model,a=t.dim,n=0;n<r.length;n++){var s=r[n]||{};if(kj(s[a+"AxisId"],e.id)||kj(s[a+"AxisIndex"],e.componentIndex)||kj(s[a+"AxisName"],e.name))return n}}function kj(r,t){return r==="all"||de(r)&&tt(r,t)>=0||r===t}function ale(r){var t=NA(r);if(t){var e=t.axisPointerModel,a=t.axis.scale,n=e.option,s=e.get("status"),l=e.get("value");l!=null&&(l=a.parse(l));var o=H2(e);s==null&&(n.status=o?"show":"hide");var c=a.getExtent().slice();c[0]>c[1]&&c.reverse(),(l==null||l>c[1])&&(l=c[1]),l<c[0]&&(l=c[0]),n.value=l,o&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function NA(r){var t=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[sm(r)]}function nle(r){var t=NA(r);return t&&t.axisPointerModel}function H2(r){return!!r.get(["handle","show"])}function sm(r){return r.type+"||"+r.id}var LI={},Gu=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,s){this.axisPointerClass&&ale(e),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,n,!0)},t.prototype.updateAxisPointer=function(e,a,n,s){this._doUpdateAxisPointerClass(e,n,!1)},t.prototype.remove=function(e,a){var n=this._axisPointer;n&&n.remove(a)},t.prototype.dispose=function(e,a){this._disposeAxisPointer(a),r.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,a,n){var s=t.getAxisPointerClass(this.axisPointerClass);if(s){var l=nle(e);l?(this._axisPointer||(this._axisPointer=new s)).render(e,l,a,n):this._disposeAxisPointer(a)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,a){LI[e]=a},t.getAxisPointerClass=function(e){return e&&LI[e]},t.type="axis",t})(Yt),G2=ut();function JV(r,t,e,a){var n=e.axis;if(!n.scale.isBlank()){var s=e.getModel("splitArea"),l=s.getModel("areaStyle"),o=l.get("color"),c=a.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:s,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(u.length){var d=o.length,h=G2(r).splitAreaColors,p=De(),g=0;if(h)for(var v=0;v<u.length;v++){var y=h.get(u[v].tickValue);if(y!=null){g=(y+(d-1)*v)%d;break}}var x=n.toGlobalCoord(u[0].coord),b=l.getAreaStyle();o=de(o)?o:[o];for(var v=1;v<u.length;v++){var N=n.toGlobalCoord(u[v].coord),w=void 0,S=void 0,T=void 0,A=void 0;n.isHorizontal()?(w=x,S=c.y,T=N-w,A=c.height,x=w+T):(w=c.x,S=x,T=c.width,A=N-S,x=S+A);var C=u[v-1].tickValue;C!=null&&p.set(C,g),t.add(new it({anid:C!=null?"area_"+C:null,shape:{x:w,y:S,width:T,height:A},style:Ge({fill:o[g]},b),autoBatch:!0,silent:!0})),g=(g+1)%d}G2(r).splitAreaColors=p}}}function eH(r){G2(r).splitAreaColors=null}var sle=["splitArea","splitLine","minorSplitLine","breakArea"],tH=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,a,n,s){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Pe,this.group.add(this._axisGroup),!!tm(e)){this._axisGroup.add(e.axis.axisBuilder.group),B(sle,function(c){e.get([c,"show"])&&ile[c](this,this._axisGroup,e,e.getCoordSysModel(),n)},this);var o=s&&s.type==="changeAxisOrder"&&s.isInitSort;o||Rm(l,this._axisGroup,e),r.prototype.render.call(this,e,a,n,s)}},t.prototype.remove=function(){eH(this)},t.type="cartesianAxis",t})(Gu),ile={splitLine:function(r,t,e,a,n){var s=e.axis;if(!s.scale.isBlank()){var l=e.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color"),u=l.get("showMinLine")!==!1,d=l.get("showMaxLine")!==!1;c=de(c)?c:[c];for(var h=a.coordinateSystem.getRect(),p=s.isHorizontal(),g=0,v=s.getTicksCoords({tickModel:l,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),y=[],x=[],b=o.getLineStyle(),N=0;N<v.length;N++){var w=s.toGlobalCoord(v[N].coord);if(!(N===0&&!u||N===v.length-1&&!d)){var S=v[N].tickValue;p?(y[0]=w,y[1]=h.y,x[0]=w,x[1]=h.y+h.height):(y[0]=h.x,y[1]=w,x[0]=h.x+h.width,x[1]=w);var T=g++%c.length,A=new Tr({anid:S!=null?"line_"+S:null,autoBatch:!0,shape:{x1:y[0],y1:y[1],x2:x[0],y2:x[1]},style:Ge({stroke:c[T]},b),silent:!0});Ih(A.shape,b.lineWidth),t.add(A)}}}},minorSplitLine:function(r,t,e,a,n){var s=e.axis,l=e.getModel("minorSplitLine"),o=l.getModel("lineStyle"),c=a.coordinateSystem.getRect(),u=s.isHorizontal(),d=s.getMinorTicksCoords();if(d.length)for(var h=[],p=[],g=o.getLineStyle(),v=0;v<d.length;v++)for(var y=0;y<d[v].length;y++){var x=s.toGlobalCoord(d[v][y].coord);u?(h[0]=x,h[1]=c.y,p[0]=x,p[1]=c.y+c.height):(h[0]=c.x,h[1]=x,p[0]=c.x+c.width,p[1]=x);var b=new Tr({anid:"minor_line_"+d[v][y].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:g,silent:!0});Ih(b.shape,g.lineWidth),t.add(b)}},splitArea:function(r,t,e,a,n){JV(r,t,e,a)},breakArea:function(r,t,e,a,n){var s=Hm(),l=e.axis.scale;s&&l.type!=="ordinal"&&s.rectCoordBuildBreakAxis(t,r,e,a.coordinateSystem.getRect(),n)}},rH=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t})(tH),lle=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=rH.type,e}return t.type="yAxis",t})(tH),ole=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,a){this.group.removeAll(),e.get("show")&&this.group.add(new it({shape:e.coordinateSystem.getRect(),style:Ge({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t})(Yt),II={offset:0};function aH(r){r.registerComponentView(ole),r.registerComponentModel(mie),r.registerCoordinateSystem("cartesian2d",Wie),Vh(r,"x",k2,II),Vh(r,"y",k2,II),r.registerComponentView(rH),r.registerComponentView(lle),r.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function cle(r,t){var e=r.coordinateSystem,a=e&&e.type,n=e&&e.getBaseAxis&&e.getBaseAxis(),s=n&&n.scale&&n.scale.type,l=a==="cartesian2d"&&s==="ordinal"||a==="single",o=t.model.get("jitter")>0;return l&&o}var ule=ut();function kI(r,t,e,a){if(r instanceof HV){var n=r.scale.type;if(n!=="category"&&n!=="ordinal")return e}var s=r.model,l=s.get("jitter"),o=s.get("jitterOverlap"),c=s.get("jitterMargin")||0,u=r.scale.type==="ordinal"?r.getBandWidth():null;return l>0?o?nH(e,l,u,a):dle(r,t,e,a,l,c):e}function nH(r,t,e,a){if(e===null)return r+(Math.random()-.5)*t;var n=e-a*2,s=Math.min(Math.max(0,t),n);return r+(Math.random()-.5)*s}function dle(r,t,e,a,n,s){var l=ule(r);l.items||(l.items=[]);var o=l.items,c=OI(o,t,e,a,n,s,1),u=OI(o,t,e,a,n,s,-1),d=Math.abs(c-e)<Math.abs(u-e)?c:u,h=r.scale.type==="ordinal"?r.getBandWidth():null,p=Math.abs(d-e);return p>n/2||h&&p>h/2-a?nH(e,n,h,a):(o.push({fixedCoord:t,floatCoord:d,r:a}),d)}function OI(r,t,e,a,n,s,l){for(var o=e,c=0;c<r.length;c++){var u=r[c],d=t-u.fixedCoord,h=o-u.floatCoord,p=d*d+h*h,g=a+u.r+s;if(p<g*g){var v=u.floatCoord+Math.sqrt(g*g-d*d)*l;if(Math.abs(v-e)>n/2)return Number.MAX_VALUE;if(l===1&&v>o||l===-1&&v<o){o=v,c=-1;continue}}}return o}function hle(r){r.eachSeriesByType("scatter",function(t){var e=t.coordinateSystem;if(e&&(e.type==="cartesian2d"||e.type==="single")){var a=e.getBaseAxis?e.getBaseAxis():null,n=a&&cle(t,a);if(n){var s=t.getData();s.each(function(l){var o=a.dim,c=a.orient,u=c==="horizontal"&&a.type!=="category"||c==="vertical"&&a.type==="category",d=s.getItemLayout(l),h=s.getItemVisual(l,"symbolSize"),p=h instanceof Array?(h[1]+h[0])/2:h;if(o==="y"||o==="single"&&u){var g=kI(a,d[0],d[1],p/2);s.setItemLayout(l,[d[0],g])}else if(o==="x"||o==="single"&&!u){var g=kI(a,d[1],d[0],p/2);s.setItemLayout(l,[g,d[1]])}})}}})}function fle(r){st(aH),r.registerSeriesModel(die),r.registerChartView(gie),r.registerLayout(Vm("scatter"))}function ple(r){r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,hle)}function gle(r){r.eachSeriesByType("radar",function(t){var e=t.getData(),a=[],n=t.coordinateSystem;if(n){var s=n.getIndicatorAxes();B(s,function(l,o){e.each(e.mapDimension(s[o].dim),function(c,u){a[u]=a[u]||[];var d=n.dataToPoint(c,o);a[u][o]=PI(d)?d:zI(n)})}),e.each(function(l){var o=Fo(a[l],function(c){return PI(c)})||zI(n);a[l].push(o.slice()),e.setItemLayout(l,a[l])})}})}function PI(r){return!isNaN(r[0])&&!isNaN(r[1])}function zI(r){return[r.cx,r.cy]}function mle(r){var t=r.polar;if(t){de(t)||(t=[t]);var e=[];B(t,function(a,n){a.indicator?(a.type&&!a.shape&&(a.shape=a.type),r.radar=r.radar||[],de(r.radar)||(r.radar=[r.radar]),r.radar.push(a)):e.push(a)}),r.polar=e}B(r.series,function(a){a&&a.type==="radar"&&a.polarIndex&&(a.radarIndex=a.polarIndex)})}var vle=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=e.coordinateSystem,l=this.group,o=e.getData(),c=this._data;function u(p,g){var v=p.getItemVisual(g,"symbol")||"circle";if(v!=="none"){var y=uf(p.getItemVisual(g,"symbolSize")),x=Er(v,-1,-1,2,2),b=p.getItemVisual(g,"symbolRotate")||0;return x.attr({style:{strokeNoScale:!0},z2:100,scaleX:y[0]/2,scaleY:y[1]/2,rotation:b*Math.PI/180||0}),x}}function d(p,g,v,y,x,b){v.removeAll();for(var N=0;N<g.length-1;N++){var w=u(y,x);w&&(w.__dimIdx=N,p[N]?(w.setPosition(p[N]),zu[b?"initProps":"updateProps"](w,{x:g[N][0],y:g[N][1]},e,x)):w.setPosition(g[N]),v.add(w))}}function h(p){return pe(p,function(g){return[s.cx,s.cy]})}o.diff(c).add(function(p){var g=o.getItemLayout(p);if(g){var v=new Ma,y=new ma,x={shape:{points:g}};v.shape.points=h(g),y.shape.points=h(g),Kt(v,x,e,p),Kt(y,x,e,p);var b=new Pe,N=new Pe;b.add(y),b.add(v),b.add(N),d(y.shape.points,g,N,o,p,!0),o.setItemGraphicEl(p,b)}}).update(function(p,g){var v=c.getItemGraphicEl(g),y=v.childAt(0),x=v.childAt(1),b=v.childAt(2),N={shape:{points:o.getItemLayout(p)}};N.shape.points&&(d(y.shape.points,N.shape.points,b,o,p,!1),ps(x),ps(y),Nt(y,N,e),Nt(x,N,e),o.setItemGraphicEl(p,v))}).remove(function(p){l.remove(c.getItemGraphicEl(p))}).execute(),o.eachItemGraphicEl(function(p,g){var v=o.getItemModel(g),y=p.childAt(0),x=p.childAt(1),b=p.childAt(2),N=o.getItemVisual(g,"style"),w=N.fill;l.add(p),y.useStyle(Ge(v.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:w})),Xr(y,v,"lineStyle"),Xr(x,v,"areaStyle");var S=v.getModel("areaStyle"),T=S.isEmpty()&&S.parentModel.isEmpty();x.ignore=T,B(["emphasis","select","blur"],function(C){var M=v.getModel([C,"areaStyle"]),R=M.isEmpty()&&M.parentModel.isEmpty();x.ensureState(C).ignore=R&&T;var k=v.getModel([C,"lineStyle"]).getLineStyle();y.ensureState(C).style=k;var L=M.getAreaStyle();x.ensureState(C).style=L;var O=v.getModel([C,"itemStyle"]).getItemStyle();b.eachChild(function(z){z.ensureState(C).style=Oe(O)})}),x.useStyle(Ge(v.getModel("areaStyle").getAreaStyle(),{fill:w,opacity:.7,decal:N.decal}));var A=v.getModel("emphasis");b.eachChild(function(C){if(C instanceof la){var M=C.style;C.useStyle(ie({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},N))}else C.useStyle(N),C.setColor(w),C.style.strokeNoScale=!0;var R=o.getStore().get(o.getDimensionIndex(C.__dimIdx),g);(R==null||isNaN(R))&&(R=""),ia(C,Zr(v),{labelFetcher:o.hostModel,labelDataIndex:g,labelDimIndex:C.__dimIdx,defaultText:R,inheritColor:w,defaultOpacity:N.opacity})}),nr(p,A.get("focus"),A.get("blurScope"),A.get("disabled"))}),this._data=o},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t})(Pt),xle=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new mf(we(this.getData,this),we(this.getRawData,this))},t.prototype.getInitialData=function(e,a){return gf(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,a,n){var s=this.getData(),l=this.coordinateSystem,o=l.getIndicatorAxes(),c=this.getData().getName(e),u=c===""?this.name:c,d=zB(this,e);return Br("section",{header:u,sortBlocks:!0,blocks:pe(o,function(h){var p=s.get(s.mapDimension(h.dim),e);return Br("nameValue",{markerType:"subItem",markerColor:d,name:h.name,value:p,sortParam:p})})})},t.prototype.getTooltipPosition=function(e){if(e!=null){for(var a=this.getData(),n=this.coordinateSystem,s=a.getValues(pe(n.dimensions,function(u){return a.mapDimension(u)}),e),l=0,o=s.length;l<o;l++)if(!isNaN(s[l])){var c=n.getIndicatorAxes();return n.coordToPoint(c[l].dataToCoord(s[l]),l)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t})(zt),Pp=VV.value;function q0(r,t){return Ge({show:t},r)}var yle=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),a=this.get("splitNumber"),n=this.get("scale"),s=this.get("axisLine"),l=this.get("axisTick"),o=this.get("axisLabel"),c=this.get("axisName"),u=this.get(["axisName","show"]),d=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),p=this.get("triggerEvent"),g=pe(this.get("indicator")||[],function(v){v.max!=null&&v.max>0&&!v.min?v.min=0:v.min!=null&&v.min<0&&!v.max&&(v.max=0);var y=c;v.color!=null&&(y=Ge({color:v.color},c));var x=rt(Oe(v),{boundaryGap:e,splitNumber:a,scale:n,axisLine:s,axisTick:l,axisLabel:o,name:v.text,showName:u,nameLocation:"end",nameGap:h,nameTextStyle:y,triggerEvent:p},!1);if(je(d)){var b=x.name;x.name=d.replace("{value}",b??"")}else Le(d)&&(x.name=d(x.name,x));var N=new dt(x,null,this.ecModel);return yr(N,ff.prototype),N.mainType="radar",N.componentIndex=this.componentIndex,N},this);this._indicatorModels=g},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"50%",startAngle:90,axisName:{show:!0,color:ee.color.axisLabel},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:rt({lineStyle:{color:ee.color.neutral20}},Pp.axisLine),axisLabel:q0(Pp.axisLabel,!1),axisTick:q0(Pp.axisTick,!1),splitLine:q0(Pp.splitLine,!0),splitArea:q0(Pp.splitArea,!0),indicator:[]},t})(ct),ble=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=this.group;s.removeAll(),this._buildAxes(e,n),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e,a){var n=e.coordinateSystem,s=n.getIndicatorAxes(),l=pe(s,function(o){var c=o.model.get("showName")?o.name:"",u=new qa(o.model,a,{axisName:c,position:[n.cx,n.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return u});B(l,function(o){o.build(),this.group.add(o.group)},this)},t.prototype._buildSplitLineAndArea=function(e){var a=e.coordinateSystem,n=a.getIndicatorAxes();if(!n.length)return;var s=e.get("shape"),l=e.getModel("splitLine"),o=e.getModel("splitArea"),c=l.getModel("lineStyle"),u=o.getModel("areaStyle"),d=l.get("show"),h=o.get("show"),p=c.get("color"),g=u.get("color"),v=de(p)?p:[p],y=de(g)?g:[g],x=[],b=[];function N(H,P,F){var Y=F%P.length;return H[Y]=H[Y]||[],Y}if(s==="circle")for(var w=n[0].getTicksCoords(),S=a.cx,T=a.cy,A=0;A<w.length;A++){if(d){var C=N(x,v,A);x[C].push(new Ei({shape:{cx:S,cy:T,r:w[A].coord}}))}if(h&&A<w.length-1){var C=N(b,y,A);b[C].push(new Jh({shape:{cx:S,cy:T,r0:w[A].coord,r:w[A+1].coord}}))}}else for(var M,R=pe(n,function(H,P){var F=H.getTicksCoords();return M=M==null?F.length-1:Math.min(F.length-1,M),pe(F,function(Y){return a.coordToPoint(Y.coord,P)})}),k=[],A=0;A<=M;A++){for(var L=[],O=0;O<n.length;O++)L.push(R[O][A]);if(L[0]&&L.push(L[0].slice()),d){var C=N(x,v,A);x[C].push(new ma({shape:{points:L}}))}if(h&&k){var C=N(b,y,A-1);b[C].push(new Ma({shape:{points:L.concat(k)}}))}k=L.slice().reverse()}var z=c.getLineStyle(),U=u.getAreaStyle();B(b,function(H,P){this.group.add(An(H,{style:Ge({stroke:"none",fill:y[P%y.length]},U),silent:!0}))},this),B(x,function(H,P){this.group.add(An(H,{style:Ge({fill:"none",stroke:v[P%v.length]},z),silent:!0}))},this)},t.type="radar",t})(Yt),_le=(function(r){re(t,r);function t(e,a,n){var s=r.call(this,e,a,n)||this;return s.type="value",s.angle=0,s.name="",s}return t})(vs),Nle=(function(){function r(t,e,a){this.dimensions=[],this._model=t,this._indicatorAxes=pe(t.getIndicatorModels(),function(n,s){var l="indicator_"+s,o=new _le(l,new El);return o.name=n.get("name"),o.model=n,n.axis=o,this.dimensions.push(l),o},this),this.resize(t,a)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(t,e){var a=this._indicatorAxes[e];return this.coordToPoint(a.dataToCoord(t),e)},r.prototype.coordToPoint=function(t,e){var a=this._indicatorAxes[e],n=a.angle,s=this.cx+t*Math.cos(n),l=this.cy-t*Math.sin(n);return[s,l]},r.prototype.pointToData=function(t){var e=t[0]-this.cx,a=t[1]-this.cy,n=Math.sqrt(e*e+a*a);e/=n,a/=n;for(var s=Math.atan2(-a,e),l=1/0,o,c=-1,u=0;u<this._indicatorAxes.length;u++){var d=this._indicatorAxes[u],h=Math.abs(s-d.angle);h<l&&(o=d,c=u,l=h)}return[c,+(o&&o.coordToData(n))]},r.prototype.resize=function(t,e){var a=Kr(t,e).refContainer,n=t.get("center"),s=Math.min(a.width,a.height)/2;this.cx=Ne(n[0],a.width)+a.x,this.cy=Ne(n[1],a.height)+a.y,this.startAngle=t.get("startAngle")*Math.PI/180;var l=t.get("radius");(je(l)||xt(l))&&(l=[0,l]),this.r0=Ne(l[0],s),this.r=Ne(l[1],s),B(this._indicatorAxes,function(o,c){o.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),o.angle=u},this)},r.prototype.update=function(t,e){var a=this._indicatorAxes,n=this._model;B(a,function(o){o.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(o,c){if(!(o.get("coordinateSystem")!=="radar"||t.getComponent("radar",o.get("radarIndex"))!==n)){var u=o.getData();B(a,function(d){d.scale.unionExtentFromData(u,u.mapDimension(d.dim))})}},this);var s=n.get("splitNumber"),l=new El;l.setExtent(0,s),l.setInterval(1),B(a,function(o,c){KV(o.scale,o.model,l)})},r.prototype.convertToPixel=function(t,e,a){return console.warn("Not implemented."),null},r.prototype.convertFromPixel=function(t,e,a){return console.warn("Not implemented."),null},r.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},r.create=function(t,e){var a=[];return t.eachComponent("radar",function(n){var s=new r(n,t,e);a.push(s),n.coordinateSystem=s}),t.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=a[n.get("radarIndex")||0])}),a},r.dimensions=[],r})();function jle(r){r.registerCoordinateSystem("radar",Nle),r.registerComponentModel(yle),r.registerComponentView(ble),r.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(a){e.setItemVisual(a,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}function wle(r){st(jle),r.registerChartView(vle),r.registerSeriesModel(xle),r.registerLayout(gle),r.registerProcessor(pf("radar")),r.registerPreprocessor(mle)}var jA=ut();function Sle(r,t,e){jA(r)[t]=e}function Cle(r,t,e){var a=jA(r),n=a[t];n===e&&(a[t]=null)}function BI(r,t){return!!jA(r)[t]}Ys({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},vr);var Tle={axisPointer:1,tooltip:1,brush:1};function sH(r,t,e){var a=t.getComponentByElement(r.topTarget);if(!a||a===e||Tle.hasOwnProperty(a.mainType))return!1;var n=a.coordinateSystem;if(!n||n.model===e)return!1;var s=Eu(a),l=Eu(e);return!((s.zlevel-l.zlevel||s.z-l.z)<=0)}var Uu=(function(r){re(t,r);function t(e){var a=r.call(this)||this;a._zr=e;var n=we(a._mousedownHandler,a),s=we(a._mousemoveHandler,a),l=we(a._mouseupHandler,a),o=we(a._mousewheelHandler,a),c=we(a._pinchHandler,a);return a.enable=function(u,d){var h=d.zInfo,p=Eu(h.component),g=p.z,v=p.zlevel,y={component:h.component,z:g,zlevel:v,z2:Me(h.z2,-1/0)},x=ie({},d.triggerInfo);this._opt=Ge(ie({},d),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:y,triggerInfo:x}),u==null&&(u=!0),(!this._enabled||this._controlType!==u)&&(this._enabled=!0,this.disable(),(u===!0||u==="move"||u==="pan")&&(Bp(e,"mousedown",n,y),Bp(e,"mousemove",s,y),Bp(e,"mouseup",l,y)),(u===!0||u==="scale"||u==="zoom")&&(Bp(e,"mousewheel",o,y),Bp(e,"pinch",c,y)))},a.disable=function(){this._enabled=!1,Vp(e,"mousedown",n),Vp(e,"mousemove",s),Vp(e,"mouseup",l),Vp(e,"mousewheel",o),Vp(e,"pinch",c)},a}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype._checkPointer=function(e,a,n){var s=this._opt,l=s.zInfoParsed;if(sH(e,s.api,l.component))return!1;var o=s.triggerInfo,c=o.roamTrigger,u=!1;return c==="global"&&(u=!0),u||(u=o.isInSelf(e,a,n)),u&&o.isInClip&&!o.isInClip(e,a,n)&&(u=!1),u},t.prototype._decideCursorStyle=function(e,a,n,s){var l=e.target;if(!l&&this._checkPointer(e,a,n))return"grab";if(s)return l&&l.cursor||"default"},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!(iR(e)||zp(e))){for(var a=e.target;a;){if(a.draggable)return;a=a.__hostTarget||a.parent}var n=e.offsetX,s=e.offsetY;this._checkPointer(e,n,s)&&(this._x=n,this._y=s,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){var a=this._zr;if(!(e.gestureEvent==="pinch"||BI(a,"globalPan")||zp(e))){var n=e.offsetX,s=e.offsetY;if(!this._dragging||!zx("moveOnMouseMove",e,this._opt)){var l=this._decideCursorStyle(e,n,s,!1);l&&a.setCursorStyle(l);return}a.setCursorStyle("grabbing");var o=this._x,c=this._y,u=n-o,d=s-c;this._x=n,this._y=s,this._opt.preventDefaultMouseMove&&wl(e.event),e.__ecRoamConsumed=!0,VI(this,"pan","moveOnMouseMove",e,{dx:u,dy:d,oldX:o,oldY:c,newX:n,newY:s,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){if(!zp(e)){var a=this._zr;if(!iR(e)){this._dragging=!1;var n=this._decideCursorStyle(e,e.offsetX,e.offsetY,!0);n&&a.setCursorStyle(n)}}},t.prototype._mousewheelHandler=function(e){if(!zp(e)){var a=zx("zoomOnMouseWheel",e,this._opt),n=zx("moveOnMouseWheel",e,this._opt),s=e.wheelDelta,l=Math.abs(s),o=e.offsetX,c=e.offsetY;if(!(s===0||!a&&!n)){if(a){var u=l>3?1.4:l>1?1.2:1.1,d=s>0?u:1/u;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",e,{scale:d,originX:o,originY:c,isAvailableBehavior:null})}if(n){var h=Math.abs(s),p=(s>0?1:-1)*(h>3?.4:h>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:p,originX:o,originY:c,isAvailableBehavior:null})}}}},t.prototype._pinchHandler=function(e){if(!(BI(this._zr,"globalPan")||zp(e))){var a=e.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,e,{scale:a,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t.prototype._checkTriggerMoveZoom=function(e,a,n,s,l){e._checkPointer(s,l.originX,l.originY)&&(wl(s.event),s.__ecRoamConsumed=!0,VI(e,a,n,s,l))},t})(gs);function zp(r){return r.__ecRoamConsumed}var Ale=ut();function Gb(r){var t=Ale(r);return t.roam=t.roam||{},t.uniform=t.uniform||{},t}function Bp(r,t,e,a){for(var n=Gb(r),s=n.roam,l=s[t]=s[t]||[],o=0;o<l.length;o++){var c=l[o].zInfoParsed;if((c.zlevel-a.zlevel||c.z-a.z||c.z2-a.z2)<=0)break}l.splice(o,0,{listener:e,zInfoParsed:a}),Ele(r,t)}function Vp(r,t,e){for(var a=Gb(r),n=a.roam[t]||[],s=0;s<n.length;s++)if(n[s].listener===e){n.splice(s,1),n.length||Dle(r,t);return}}function Ele(r,t){var e=Gb(r);e.uniform[t]||r.on(t,e.uniform[t]=function(a){var n=e.roam[t];if(n)for(var s=0;s<n.length;s++)n[s].listener(a)})}function Dle(r,t){var e=Gb(r),a=e.uniform;a[t]&&(r.off(t,a[t]),a[t]=null)}function VI(r,t,e,a,n){n.isAvailableBehavior=we(zx,null,e,a),r.trigger(t,n)}function zx(r,t,e){var a=e[r];return!r||a&&(!je(a)||t.event[a+"Key"])}function wA(r,t,e){var a=r.target;a.x+=t,a.y+=e,a.dirty()}function SA(r,t,e,a){var n=r.target,s=r.zoomLimit,l=r.zoom=r.zoom||1;l*=t,l=CA(l,s);var o=l/r.zoom;r.zoom=l,lH(n,e,a,o),n.dirty()}function iH(r,t,e,a,n,s){var l=new We(0,0,0,0);a.enable(r.get("roam"),{api:t,zInfo:{component:r},triggerInfo:{roamTrigger:r.get("roamTrigger"),isInSelf:function(u,d,h){return l.copy(e.getBoundingRect()),l.applyTransform(e.getComputedTransform()),l.contain(d,h)},isInClip:function(u,d,h){return!s||s.contain(d,h)}}}),n.zoomLimit=r.get("scaleLimit");var o=r.coordinateSystem;n.zoom=o?o.getZoom():1;var c=r.subType+"Roam";a.off("pan").off("zoom").on("pan",function(u){wA(n,u.dx,u.dy),t.dispatchAction({seriesId:r.id,type:c,dx:u.dx,dy:u.dy})}).on("zoom",function(u){SA(n,u.scale,u.originX,u.originY),t.dispatchAction({seriesId:r.id,type:c,zoom:u.scale,originX:u.originX,originY:u.originY}),t.updateLabelLayout()})}function HI(r,t){return r.pointToProjected?r.pointToProjected(t):r.pointToData(t)}function Ub(r,t,e){var a=r.getZoom(),n=r.getCenter(),s=t.zoom,l=r.projectedToPoint?r.projectedToPoint(n):r.dataToPoint(n);return t.dx!=null&&t.dy!=null&&(l[0]-=t.dx,l[1]-=t.dy,r.setCenter(HI(r,l))),s!=null&&(s=CA(a*s,e)/a,lH(r,t.originX,t.originY,s),r.updateTransform(),r.setCenter(HI(r,l)),r.setZoom(s*a)),{center:r.getCenter(),zoom:r.getZoom()}}function lH(r,t,e,a){r.x-=(t-r.x)*(a-1),r.y-=(e-r.y)*(a-1),r.scaleX*=a,r.scaleY*=a}function CA(r,t){if(t){var e=t.min||0,a=t.max||1/0;r=Math.max(Math.min(a,r),e)}return r}function oH(r){if(je(r)){var t=new DOMParser;r=t.parseFromString(r,"text/xml")}var e=r;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var Oj,Py={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},GI=gt(Py),zy={"alignment-baseline":"textBaseline","stop-color":"stopColor"},UI=gt(zy),Mle=(function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(t,e){e=e||{};var a=oH(t);this._defsUsePending=[];var n=new Pe;this._root=n;var s=[],l=a.getAttribute("viewBox")||"",o=parseFloat(a.getAttribute("width")||e.width),c=parseFloat(a.getAttribute("height")||e.height);isNaN(o)&&(o=null),isNaN(c)&&(c=null),wn(a,n,null,!0,!1);for(var u=a.firstChild;u;)this._parseNode(u,n,s,null,!1,!1),u=u.nextSibling;Ile(this._defs,this._defsUsePending),this._defsUsePending=[];var d,h;if(l){var p=Fb(l);p.length>=4&&(d={x:parseFloat(p[0]||0),y:parseFloat(p[1]||0),width:parseFloat(p[2]),height:parseFloat(p[3])})}if(d&&o!=null&&c!=null&&(h=uH(d,{x:0,y:0,width:o,height:c}),!e.ignoreViewBox)){var g=n;n=new Pe,n.add(g),g.scaleX=g.scaleY=h.scale,g.x=h.x,g.y=h.y}return!e.ignoreRootClip&&o!=null&&c!=null&&n.setClipPath(new it({shape:{x:0,y:0,width:o,height:c}})),{root:n,width:o,height:c,viewBoxRect:d,viewBoxTransform:h,named:s}},r.prototype._parseNode=function(t,e,a,n,s,l){var o=t.nodeName.toLowerCase(),c,u=n;if(o==="defs"&&(s=!0),o==="text"&&(l=!0),o==="defs"||o==="switch")c=e;else{if(!s){var d=Oj[o];if(d&&Te(Oj,o)){c=d.call(this,t,e);var h=t.getAttribute("name");if(h){var p={name:h,namedFrom:null,svgNodeTagLower:o,el:c};a.push(p),o==="g"&&(u=p)}else n&&a.push({name:n.name,namedFrom:n,svgNodeTagLower:o,el:c});e.add(c)}}var g=FI[o];if(g&&Te(FI,o)){var v=g.call(this,t),y=t.getAttribute("id");y&&(this._defs[y]=v)}}if(c&&c.isGroup)for(var x=t.firstChild;x;)x.nodeType===1?this._parseNode(x,c,a,u,s,l):x.nodeType===3&&l&&this._parseText(x,c),x=x.nextSibling},r.prototype._parseText=function(t,e){var a=new Rh({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Xn(e,a),wn(t,a,this._defsUsePending,!1,!1),Rle(a,e);var n=a.style,s=n.fontSize;s&&s<9&&(n.fontSize=9,a.scaleX*=s/9,a.scaleY*=s/9);var l=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=l;var o=a.getBoundingRect();return this._textX+=o.width,e.add(a),a},r.internalField=(function(){Oj={g:function(t,e){var a=new Pe;return Xn(e,a),wn(t,a,this._defsUsePending,!1,!1),a},rect:function(t,e){var a=new it;return Xn(e,a),wn(t,a,this._defsUsePending,!1,!1),a.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),a.silent=!0,a},circle:function(t,e){var a=new Ei;return Xn(e,a),wn(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),a.silent=!0,a},line:function(t,e){var a=new Tr;return Xn(e,a),wn(t,a,this._defsUsePending,!1,!1),a.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),a.silent=!0,a},ellipse:function(t,e){var a=new Em;return Xn(e,a),wn(t,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),a.silent=!0,a},polygon:function(t,e){var a=t.getAttribute("points"),n;a&&(n=$I(a));var s=new Ma({shape:{points:n||[]},silent:!0});return Xn(e,s),wn(t,s,this._defsUsePending,!1,!1),s},polyline:function(t,e){var a=t.getAttribute("points"),n;a&&(n=$I(a));var s=new ma({shape:{points:n||[]},silent:!0});return Xn(e,s),wn(t,s,this._defsUsePending,!1,!1),s},image:function(t,e){var a=new la;return Xn(e,a),wn(t,a,this._defsUsePending,!1,!1),a.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),a.silent=!0,a},text:function(t,e){var a=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",s=t.getAttribute("dx")||"0",l=t.getAttribute("dy")||"0";this._textX=parseFloat(a)+parseFloat(s),this._textY=parseFloat(n)+parseFloat(l);var o=new Pe;return Xn(e,o),wn(t,o,this._defsUsePending,!1,!0),o},tspan:function(t,e){var a=t.getAttribute("x"),n=t.getAttribute("y");a!=null&&(this._textX=parseFloat(a)),n!=null&&(this._textY=parseFloat(n));var s=t.getAttribute("dx")||"0",l=t.getAttribute("dy")||"0",o=new Pe;return Xn(e,o),wn(t,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(l),o},path:function(t,e){var a=t.getAttribute("d")||"",n=C7(a);return Xn(e,n),wn(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}})(),r})(),FI={lineargradient:function(r){var t=parseInt(r.getAttribute("x1")||"0",10),e=parseInt(r.getAttribute("y1")||"0",10),a=parseInt(r.getAttribute("x2")||"10",10),n=parseInt(r.getAttribute("y2")||"0",10),s=new Pu(t,e,a,n);return YI(r,s),WI(r,s),s},radialgradient:function(r){var t=parseInt(r.getAttribute("cx")||"0",10),e=parseInt(r.getAttribute("cy")||"0",10),a=parseInt(r.getAttribute("r")||"0",10),n=new gT(t,e,a);return YI(r,n),WI(r,n),n}};function YI(r,t){var e=r.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(t.global=!0)}function WI(r,t){for(var e=r.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var a=e.getAttribute("offset"),n=void 0;a&&a.indexOf("%")>0?n=parseInt(a,10)/100:a?n=parseFloat(a):n=0;var s={};cH(e,s,s);var l=s.stopColor||e.getAttribute("stop-color")||"#000000",o=s.stopOpacity||e.getAttribute("stop-opacity");if(o){var c=Va(l),u=c&&c[3];u&&(c[3]*=ml(o),l=os(c,"rgba"))}t.colorStops.push({offset:n,color:l})}e=e.nextSibling}}function Xn(r,t){r&&r.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Ge(t.__inheritedStyle,r.__inheritedStyle))}function $I(r){for(var t=Fb(r),e=[],a=0;a<t.length;a+=2){var n=parseFloat(t[a]),s=parseFloat(t[a+1]);e.push([n,s])}return e}function wn(r,t,e,a,n){var s=t,l=s.__inheritedStyle=s.__inheritedStyle||{},o={};r.nodeType===1&&(Ple(r,t),cH(r,l,o),a||zle(r,l,o)),s.style=s.style||{},l.fill!=null&&(s.style.fill=qI(s,"fill",l.fill,e)),l.stroke!=null&&(s.style.stroke=qI(s,"stroke",l.stroke,e)),B(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){l[c]!=null&&(s.style[c]=parseFloat(l[c]))}),B(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(c){l[c]!=null&&(s.style[c]=l[c])}),n&&(s.__selfStyle=o),l.lineDash&&(s.style.lineDash=pe(Fb(l.lineDash),function(c){return parseFloat(c)})),(l.visibility==="hidden"||l.visibility==="collapse")&&(s.invisible=!0),l.display==="none"&&(s.ignore=!0)}function Rle(r,t){var e=t.__selfStyle;if(e){var a=e.textBaseline,n=a;!a||a==="auto"||a==="baseline"?n="alphabetic":a==="before-edge"||a==="text-before-edge"?n="top":a==="after-edge"||a==="text-after-edge"?n="bottom":(a==="central"||a==="mathematical")&&(n="middle"),r.style.textBaseline=n}var s=t.__inheritedStyle;if(s){var l=s.textAlign,o=l;l&&(l==="middle"&&(o="center"),r.style.textAlign=o)}}var Lle=/^url\(\s*#(.*?)\)/;function qI(r,t,e,a){var n=e&&e.match(Lle);if(n){var s=Dn(n[1]);a.push([r,t,s]);return}return e==="none"&&(e=null),e}function Ile(r,t){for(var e=0;e<t.length;e++){var a=t[e];a[0].style[a[1]]=r[a[2]]}}var kle=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Fb(r){return r.match(kle)||[]}var Ole=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Pj=Math.PI/180;function Ple(r,t){var e=r.getAttribute("transform");if(e){e=e.replace(/,/g," ");var a=[],n=null;e.replace(Ole,function(h,p,g){return a.push(p,g),""});for(var s=a.length-1;s>0;s-=2){var l=a[s],o=a[s-1],c=Fb(l);switch(n=n||na(),o){case"translate":zs(n,n,[parseFloat(c[0]),parseFloat(c[1]||"0")]);break;case"scale":mb(n,n,[parseFloat(c[0]),parseFloat(c[1]||c[0])]);break;case"rotate":Ml(n,n,-parseFloat(c[0])*Pj,[parseFloat(c[1]||"0"),parseFloat(c[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(c[0])*Pj);Is(n,[1,0,u,1,0,0],n);break;case"skewY":var d=Math.tan(parseFloat(c[0])*Pj);Is(n,[1,d,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(c[0]),n[1]=parseFloat(c[1]),n[2]=parseFloat(c[2]),n[3]=parseFloat(c[3]),n[4]=parseFloat(c[4]),n[5]=parseFloat(c[5]);break}}t.setLocalTransform(n)}}var XI=/([^\s:;]+)\s*:\s*([^:;]+)/g;function cH(r,t,e){var a=r.getAttribute("style");if(a){XI.lastIndex=0;for(var n;(n=XI.exec(a))!=null;){var s=n[1],l=Te(Py,s)?Py[s]:null;l&&(t[l]=n[2]);var o=Te(zy,s)?zy[s]:null;o&&(e[o]=n[2])}}}function zle(r,t,e){for(var a=0;a<GI.length;a++){var n=GI[a],s=r.getAttribute(n);s!=null&&(t[Py[n]]=s)}for(var a=0;a<UI.length;a++){var n=UI[a],s=r.getAttribute(n);s!=null&&(e[zy[n]]=s)}}function uH(r,t){var e=t.width/r.width,a=t.height/r.height,n=Math.min(e,a);return{scale:n,x:-(r.x+r.width/2)*n+(t.x+t.width/2),y:-(r.y+r.height/2)*n+(t.y+t.height/2)}}function Ble(r,t){var e=new Mle;return e.parse(r,t)}var Vle=De(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Hle=(function(){function r(t,e){this.type="geoSVG",this._usedGraphicMap=De(),this._freedGraphics=[],this._mapName=t,this._parsedXML=oH(e)}return r.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=Ule(t.named),a=e.regions,n=e.regionsMap;this._regions=a,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(t){var e,a;try{e=t&&Ble(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},a=e.root,Ea(a!=null)}catch(x){throw new Error(`Invalid svg format
`+x.message)}var n=new Pe;n.add(a),n.isGeoSVGGraphicRoot=!0;var s=e.width,l=e.height,o=e.viewBoxRect,c=this._boundingRect;if(!c){var u=void 0,d=void 0,h=void 0,p=void 0;if(s!=null?(u=0,h=s):o&&(u=o.x,h=o.width),l!=null?(d=0,p=l):o&&(d=o.y,p=o.height),u==null||d==null){var g=a.getBoundingRect();u==null&&(u=g.x,h=g.width),d==null&&(d=g.y,p=g.height)}c=this._boundingRect=new We(u,d,h,p)}if(o){var v=uH(o,c);a.scaleX=a.scaleY=v.scale,a.x=v.x,a.y=v.y}n.setClipPath(new it({shape:c.plain()}));var y=[];return B(e.named,function(x){Vle.get(x.svgNodeTagLower)!=null&&(y.push(x),Gle(x.el))}),{root:n,boundingRect:c,named:y}},r.prototype.useGraphic=function(t){var e=this._usedGraphicMap,a=e.get(t);return a||(a=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,a),a)},r.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,a=e.get(t);a&&(e.removeKey(t),this._freedGraphics.push(a))},r})();function Gle(r){r.silent=!1,r.isGroup&&r.traverse(function(t){t.silent=!1})}function Ule(r){var t=[],e=De();return B(r,function(a){if(a.namedFrom==null){var n=new Zae(a.name,a.el);t.push(n),e.set(a.name,n)}}),{regions:t,regionsMap:e}}var U2=[126,25],ZI="",Uc=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Hc=0;Hc<Uc.length;Hc++)for(var qd=0;qd<Uc[Hc].length;qd++)Uc[Hc][qd][0]/=10.5,Uc[Hc][qd][1]/=-10.5/.75,Uc[Hc][qd][0]+=U2[0],Uc[Hc][qd][1]+=U2[1];function Fle(r,t){if(r==="china"){for(var e=0;e<t.length;e++)if(t[e].name===ZI)return;t.push(new W9(ZI,pe(Uc,function(a){return{type:"polygon",exterior:a}}),U2))}}var Yle={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function Wle(r,t){if(r==="china"){var e=Yle[t.name];if(e){var a=t.getCenter();a[0]+=e[0]/10.5,a[1]+=-e[1]/(10.5/.75),t.setCenter(a)}}}var $le=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function qle(r,t){r==="china"&&t.name===""&&t.geometries.push({type:"polygon",exterior:$le[0]})}var Xle="name",Zle=(function(){function r(t,e,a){this.type="geoJSON",this._parsedMap=De(),this._mapName=t,this._specialAreas=a,this._geoJSON=Qle(e)}return r.prototype.load=function(t,e){e=e||Xle;var a=this._parsedMap.get(e);if(!a){var n=this._parseToRegions(e);a=this._parsedMap.set(e,{regions:n,boundingRect:Kle(n)})}var s=De(),l=[];return B(a.regions,function(o){var c=o.name;t&&Te(t,c)&&(o=o.cloneShallow(c=t[c])),l.push(o),s.set(c,o)}),{regions:l,boundingRect:a.boundingRect||new We(0,0,0,0),regionsMap:s}},r.prototype._parseToRegions=function(t){var e=this._mapName,a=this._geoJSON,n;try{n=a?C2(a,t):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return Fle(e,n),B(n,function(s){var l=s.name;Wle(e,s),qle(e,s);var o=this._specialAreas&&this._specialAreas[l];o&&s.transformTo(o.left,o.top,o.width,o.height)},this),n},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r})();function Kle(r){for(var t,e=0;e<r.length;e++){var a=r[e].getBoundingRect();t=t||a.clone(),t.union(a)}return t}function Qle(r){return je(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}var Hp=De();const Dl={registerMap:function(r,t,e){if(t.svg){var a=new Hle(r,t.svg);Hp.set(r,a)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?e=t.specialAreas:n=t;var a=new Zle(r,n,e);Hp.set(r,a)}},getGeoResource:function(r){return Hp.get(r)},getMapForUser:function(r){var t=Hp.get(r);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(r,t,e){var a=Hp.get(r);if(a)return a.load(t,e)}};var TA=["rect","circle","line","ellipse","polygon","polyline","path"],Jle=De(TA),eoe=De(TA.concat(["g"])),toe=De(TA.concat(["g"])),dH=ut();function X0(r){var t=r.getItemStyle(),e=r.get("areaColor");return e!=null&&(t.fill=e),t}function KI(r){var t=r.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var hH=(function(){function r(t){var e=this.group=new Pe,a=this._transformGroup=new Pe;e.add(a),this.uid=nf("ec_map_draw"),this._controller=new Uu(t.getZr()),this._controllerHost={target:a},a.add(this._regionsGroup=new Pe),a.add(this._svgGroup=new Pe)}return r.prototype.draw=function(t,e,a,n,s){var l=t.mainType==="geo",o=t.getData&&t.getData();l&&e.eachComponent({mainType:"series",subType:"map"},function(w){!o&&w.getHostGeoModel()===t&&(o=w.getData())});var c=t.coordinateSystem,u=this._regionsGroup,d=this._transformGroup,h=c.getTransformInfo(),p=h.raw,g=h.roam,v=!u.childAt(0)||s,y=t.getShallow("clip",!0),x;y?(x=c.getViewRect().clone(),this.group.setClipPath(new it({shape:x.clone()}))):this.group.removeClipPath(),v?(d.x=g.x,d.y=g.y,d.scaleX=g.scaleX,d.scaleY=g.scaleY,d.dirty()):Nt(d,g,t);var b=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,N={api:a,geo:c,mapOrGeoModel:t,data:o,isVisualEncodedByVisualMap:b,isGeo:l,transformInfoRaw:p};c.resourceType==="geoJSON"?this._buildGeoJSON(N):c.resourceType==="geoSVG"&&this._buildSVG(N),this._updateController(t,x,e,a),this._updateMapSelectHandler(t,u,a,n)},r.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=De(),a=De(),n=this._regionsGroup,s=t.transformInfoRaw,l=t.mapOrGeoModel,o=t.data,c=t.geo.projection,u=c&&c.stream;function d(g,v){return v&&(g=v(g)),g&&[g[0]*s.scaleX+s.x,g[1]*s.scaleY+s.y]}function h(g){for(var v=[],y=!u&&c&&c.project,x=0;x<g.length;++x){var b=d(g[x],y);b&&v.push(b)}return v}function p(g){return{shape:{points:h(g)}}}n.removeAll(),B(t.geo.regions,function(g){var v=g.name,y=e.get(v),x=a.get(v)||{},b=x.dataIdx,N=x.regionModel;if(!y){y=e.set(v,new Pe),n.add(y),b=o?o.indexOfName(v):null,N=t.isGeo?l.getRegionModel(v):o?o.getItemModel(b):null;var w=N.get("silent",!0);w!=null&&(y.silent=w),a.set(v,{dataIdx:b,regionModel:N})}var S=[],T=[];B(g.geometries,function(M){if(M.type==="polygon"){var R=[M.exterior].concat(M.interiors||[]);u&&(R=a6(R,u)),B(R,function(L){S.push(new Ma(p(L)))})}else{var k=M.points;u&&(k=a6(k,u,!0)),B(k,function(L){T.push(new ma(p(L)))})}});var A=d(g.getCenter(),c&&c.project);function C(M,R){if(M.length){var k=new Mm({culling:!0,segmentIgnoreThreshold:1,shape:{paths:M}});y.add(k),QI(t,k,b,N),JI(t,k,v,N,l,b,A),R&&(KI(k),B(k.states,KI))}}C(S),C(T,!0)}),e.each(function(g,v){var y=a.get(v),x=y.dataIdx,b=y.regionModel;e6(t,g,v,b,l,x),t6(t,g,v,b,l),r6(t,g,v,b,l)},this)},r.prototype._buildSVG=function(t){var e=t.geo.map,a=t.transformInfoRaw;this._svgGroup.x=a.x,this._svgGroup.y=a.y,this._svgGroup.scaleX=a.scaleX,this._svgGroup.scaleY=a.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var n=this._svgDispatcherMap=De(),s=!1;B(this._svgGraphicRecord.named,function(l){var o=l.name,c=t.mapOrGeoModel,u=t.data,d=l.svgNodeTagLower,h=l.el,p=u?u.indexOfName(o):null,g=c.getRegionModel(o);Jle.get(d)!=null&&h instanceof fs&&QI(t,h,p,g),h instanceof fs&&(h.culling=!0);var v=g.get("silent",!0);if(v!=null&&(h.silent=v),h.z2EmphasisLift=0,!l.namedFrom&&(toe.get(d)!=null&&JI(t,h,o,g,c,p,null),e6(t,h,o,g,c,p),t6(t,h,o,g,c),eoe.get(d)!=null)){var y=r6(t,h,o,g,c);y==="self"&&(s=!0);var x=n.get(o)||n.set(o,[]);x.push(h)}},this),this._enableBlurEntireSVG(s,t)},r.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var a=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=a.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){Tu(s);var l=s.ensureState("blur").style||{};l.opacity==null&&n!=null&&(l.opacity=n),s.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(t,e){if(t==null)return[];var a=e.coordinateSystem;if(a.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var s=n.get(t);return s?[s]:[]}}else if(a.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},r.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},r.prototype._useSVG=function(t){var e=Dl.getGeoResource(t);if(e&&e.type==="geoSVG"){var a=e.useGraphic(this.uid);this._svgGroup.add(a.root),this._svgGraphicRecord=a,this._svgMapName=t}},r.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var e=Dl.getGeoResource(t);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(t,e,a,n){var s=t.coordinateSystem,l=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=s.getZoom(),l.enable(t.get("roam")||!1,{api:n,zInfo:{component:t},triggerInfo:{roamTrigger:t.get("roamTrigger"),isInSelf:function(d,h,p){return s.containPoint([h,p])},isInClip:function(d,h,p){return!e||e.contain(h,p)}}});var c=t.mainType;function u(){var d={type:"geoRoam",componentType:c};return d[c+"Id"]=t.id,d}l.off("pan").on("pan",function(d){this._mouseDownFlag=!1,wA(o,d.dx,d.dy),n.dispatchAction(ie(u(),{dx:d.dx,dy:d.dy,animation:{duration:0}}))},this),l.off("zoom").on("zoom",function(d){this._mouseDownFlag=!1,SA(o,d.scale,d.originX,d.originY),n.dispatchAction(ie(u(),{totalZoom:o.zoom,zoom:d.scale,originX:d.originX,originY:d.originY,animation:{duration:0}}))},this)},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=dH(e).ignore)})},r.prototype._updateMapSelectHandler=function(t,e,a,n){var s=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){s._mouseDownFlag=!0}),e.on("click",function(l){s._mouseDownFlag&&(s._mouseDownFlag=!1)}))},r})();function QI(r,t,e,a){var n=a.getModel("itemStyle"),s=a.getModel(["emphasis","itemStyle"]),l=a.getModel(["blur","itemStyle"]),o=a.getModel(["select","itemStyle"]),c=X0(n),u=X0(s),d=X0(o),h=X0(l),p=r.data;if(p){var g=p.getItemVisual(e,"style"),v=p.getItemVisual(e,"decal");r.isVisualEncodedByVisualMap&&g.fill&&(c.fill=g.fill),v&&(c.decal=Oh(v,r.api))}t.setStyle(c),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=d,t.ensureState("blur").style=h,Tu(t)}function JI(r,t,e,a,n,s,l){var o=r.data,c=r.isGeo,u=o&&isNaN(o.get(o.mapDimension("value"),s)),d=o&&o.getItemLayout(s);if(c||u||d&&d.showLabel){var h=c?e:s,p=void 0;(!o||s>=0)&&(p=n);var g=l?{normal:{align:"center",verticalAlign:"middle"}}:null;ia(t,Zr(a),{labelFetcher:p,labelDataIndex:h,defaultText:e},g);var v=t.getTextContent();if(v&&(dH(v).ignore=v.ignore,t.textConfig&&l)){var y=t.getBoundingRect().clone();t.textConfig.layoutRect=y,t.textConfig.position=[(l[0]-y.x)/y.width*100+"%",(l[1]-y.y)/y.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function e6(r,t,e,a,n,s){r.data?r.data.setItemGraphicEl(s,t):Xe(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:e,region:a&&a.option||{}}}function t6(r,t,e,a,n){r.data||Ll({el:t,componentModel:n,itemName:e,itemTooltipOption:a.get("tooltip")})}function r6(r,t,e,a,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var s=a.getModel("emphasis"),l=s.get("focus");return nr(t,l,s.get("blurScope"),s.get("disabled")),r.isGeo&&$Q(t,n,e),l}function a6(r,t,e){var a=[],n;function s(){n=[]}function l(){n.length&&(a.push(n),n=[])}var o=t({polygonStart:s,polygonEnd:l,lineStart:s,lineEnd:l,point:function(c,u){isFinite(c)&&isFinite(u)&&n.push([c,u])},sphere:function(){}});return!e&&o.polygonStart(),B(r,function(c){o.lineStart();for(var u=0;u<c.length;u++)o.point(c[u][0],c[u][1]);o.lineEnd()}),!e&&o.polygonEnd(),a}var roe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var l=this.group;if(l.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===e.id){var o=this._mapDraw;o&&l.add(o.group)}else if(e.needsDrawMap){var o=this._mapDraw||new hH(n);l.add(o.group),o.draw(e,a,n,this,s),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&a.getComponent("legend")&&this._renderSymbols(e,a,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,a,n){var s=e.originalData,l=this.group;s.each(s.mapDimension("value"),function(o,c){if(!isNaN(o)){var u=s.getItemLayout(c);if(!(!u||!u.point)){var d=u.point,h=u.offset,p=new Ei({style:{fill:e.getData().getVisual("style").fill},shape:{cx:d[0]+h*9,cy:d[1],r:3},silent:!0,z2:8+(h?0:Qh+1)});if(!h){var g=e.mainSeries.getData(),v=s.getName(c),y=g.indexOfName(v),x=s.getItemModel(c),b=x.getModel("label"),N=g.getItemGraphicEl(y);ia(p,Zr(x),{labelFetcher:{getFormattedLabel:function(w,S){return e.getFormattedLabel(y,S)}},defaultText:v}),p.disableLabelAnimation=!0,b.get("position")||p.setTextConfig({position:"bottom"}),N.onHoverStateChange=function(w){dy(p,w)}}l.add(p)}}})},t.type="map",t})(Pt),aoe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(a){if(a!=null){var n=this.getData().getName(a),s=this.coordinateSystem,l=s.getRegion(n);return l&&s.dataToPoint(l.getCenter())}},e}return t.prototype.getInitialData=function(e){for(var a=gf(this,{coordDimensions:["value"],encodeDefaulter:et(zT,this)}),n=De(),s=[],l=0,o=a.count();l<o;l++){var c=a.getName(l);n.set(c,l)}var u=Dl.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return B(u.regions,function(d){var h=d.name,p=n.get(h),g=d.properties&&d.properties.echartsStyle,v;p==null?(v={name:h},s.push(v)):v=a.getRawDataItem(p),g&&rt(v,g)}),a.appendData(s),a},t.prototype.getHostGeoModel=function(){if(tB(this).kind!==di.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var a=this.getData();return a.get(a.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var a=this.getData();return a.getItemModel(a.indexOfName(e))},t.prototype.formatTooltip=function(e,a,n){for(var s=this.getData(),l=this.getRawValue(e),o=s.getName(e),c=this.seriesGroup,u=[],d=0;d<c.length;d++){var h=c[d].originalData.indexOfName(o),p=s.mapDimension("value");isNaN(c[d].originalData.get(p,h))||u.push(c[d].name)}return Br("section",{header:u.join(", "),noHeader:!u.length,blocks:[Br("nameValue",{name:o,value:l})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var a=e.icon||"roundRect",n=Er(a,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",a.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill=ee.color.neutral00,n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:ee.color.tertiary},itemStyle:{borderWidth:.5,borderColor:ee.color.border,areaColor:ee.color.background},emphasis:{label:{show:!0,color:ee.color.primary},itemStyle:{areaColor:ee.color.highlight}},select:{label:{show:!0,color:ee.color.primary},itemStyle:{color:ee.color.highlight}},nameProperty:"name"},t})(zt);function noe(r,t){var e={};return B(r,function(a){a.each(a.mapDimension("value"),function(n,s){var l="ec-"+a.getName(s);e[l]=e[l]||[],isNaN(n)||e[l].push(n)})}),r[0].map(r[0].mapDimension("value"),function(a,n){for(var s="ec-"+r[0].getName(n),l=0,o=1/0,c=-1/0,u=e[s].length,d=0;d<u;d++)o=Math.min(o,e[s][d]),c=Math.max(c,e[s][d]),l+=e[s][d];var h;return t==="min"?h=o:t==="max"?h=c:t==="average"?h=l/u:h=l,u===0?NaN:h})}function soe(r){var t={};r.eachSeriesByType("map",function(e){var a=e.getHostGeoModel(),n=a?"o"+a.id:"i"+e.getMapType();(t[n]=t[n]||[]).push(e)}),B(t,function(e,a){for(var n=noe(pe(e,function(l){return l.getData()}),e[0].get("mapValueCalculation")),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(var s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=s===0&&!e[s].getHostGeoModel(),e[s].setData(n.cloneShallow()),e[s].mainSeries=e[0]})}function ioe(r){var t={};r.eachSeriesByType("map",function(e){var a=e.getMapType();if(!(e.getHostGeoModel()||t[a])){var n={};B(e.seriesGroup,function(l){var o=l.coordinateSystem,c=l.originalData;l.get("showLegendSymbol")&&r.getComponent("legend")&&c.each(c.mapDimension("value"),function(u,d){var h=c.getName(d),p=o.getRegion(h);if(!(!p||isNaN(u))){var g=n[h]||0,v=o.dataToPoint(p.getCenter());n[h]=g+1,c.setItemLayout(d,{point:v,offset:g})}})});var s=e.getData();s.each(function(l){var o=s.getName(l),c=s.getItemLayout(l)||{};c.showLabel=!n[o],s.setItemLayout(l,c)}),t[a]=!0}})}var n6=xr,Fu=(function(r){re(t,r);function t(e,a){var n=r.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new fl,n._rawTransformable=new fl,n.name=e,n._opt=a,n}return t.prototype.setBoundingRect=function(e,a,n,s){return this._rect=new We(e,a,n,s),this._updateCenterAndZoom(),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,a,n,s){this._transformTo(e,a,n,s),this._viewRect=new We(e,a,n,s)},t.prototype._transformTo=function(e,a,n,s){var l=this.getBoundingRect(),o=this._rawTransformable;o.transform=l.calculateTransform(new We(e,a,n,s));var c=o.parent;o.parent=null,o.decomposeTransform(),o.parent=c,this._updateTransform()},t.prototype.setCenter=function(e){var a=this._opt;a&&a.api&&a.ecModel&&a.ecModel.getShallow("legacyViewCoordSysCenterBase")&&e&&(e=[Ne(e[0],a.api.getWidth()),Ne(e[1],a.api.getWidth())]),this._centerOption=Oe(e),this._updateCenterAndZoom()},t.prototype.setZoom=function(e){this._zoom=CA(e||1,this.zoomLimit),this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),a=e.x+e.width/2,n=e.y+e.height/2;return[a,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._centerOption,a=this._rect;e&&a&&(this._center=[Ne(e[0],a.width,a.x),Ne(e[1],a.height,a.y)]);var n=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,l=this.getDefaultCenter(),o=this.getCenter(),c=this.getZoom();o=xr([],o,n),l=xr([],l,n),s.originX=o[0],s.originY=o[1],s.x=l[0]-o[0],s.y=l[1]-o[1],s.scaleX=s.scaleY=c,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,a=this._rawTransformable;a.parent=e,e.updateTransform(),a.updateTransform(),Cm(this.transform||(this.transform=[]),a.transform||na()),this._rawTransform=a.getLocalTransform(),this.invTransform=this.invTransform||[],hs(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,a=this._roamTransformable,n=new fl;return n.transform=a.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,a,n){var s=a?this._rawTransform:this.transform;return n=n||[],s?n6(n,e,s):Ia(n,e)},t.prototype.pointToData=function(e,a,n){n=n||[];var s=this.invTransform;return s?n6(n,e,s):(n[0]=e[0],n[1]=e[1],n)},t.prototype.convertToPixel=function(e,a,n){var s=s6(a);return s===this?s.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,a,n){var s=s6(a);return s===this?s.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t})(fl);function s6(r){var t=r.seriesModel;return t?t.coordinateSystem:null}var loe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},fH=["lng","lat"],F2=(function(r){re(t,r);function t(e,a,n){var s=r.call(this,e,{api:n.api,ecModel:n.ecModel})||this;s.dimensions=fH,s.type="geo",s._nameCoordMap=De(),s.map=a;var l=n.projection,o=Dl.load(a,n.nameMap,n.nameProperty),c=Dl.getGeoResource(a);s.resourceType=c?c.type:null;var u=s.regions=o.regions,d=loe[c.type];s._regionsMap=o.regionsMap,s.regions=o.regions,s.projection=l;var h;if(l)for(var p=0;p<u.length;p++){var g=u[p].getBoundingRect(l);h=h||g.clone(),h.union(g)}else h=o.boundingRect;return s.setBoundingRect(h.x,h.y,h.width,h.height),s.aspectScale=l?1:Me(n.aspectScale,d.aspectScale),s._invertLongitute=l?!1:d.invertLongitute,s}return t.prototype._transformTo=function(e,a,n,s){var l=this.getBoundingRect(),o=this._invertLongitute;l=l.clone(),o&&(l.y=-l.y-l.height);var c=this._rawTransformable;c.transform=l.calculateTransform(new We(e,a,n,s));var u=c.parent;c.parent=null,c.decomposeTransform(),c.parent=u,o&&(c.scaleY=-c.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var a=this.regions,n=0;n<a.length;n++){var s=a[n];if(s.type==="geoJSON"&&s.contain(e))return a[n]}},t.prototype.addGeoCoord=function(e,a){this._nameCoordMap.set(e,a)},t.prototype.getGeoCoord=function(e){var a=this._regionsMap.get(e);return this._nameCoordMap.get(e)||a&&a.getCenter()},t.prototype.dataToPoint=function(e,a,n){if(je(e)&&(e=this.getGeoCoord(e)),e){var s=this.projection;return s&&(e=s.project(e)),e&&this.projectedToPoint(e,a,n)}},t.prototype.pointToData=function(e,a,n){var s=this.projection;return s&&(e=s.unproject(e)),e&&this.pointToProjected(e,n)},t.prototype.pointToProjected=function(e,a){return r.prototype.pointToData.call(this,e,0,a)},t.prototype.projectedToPoint=function(e,a,n){return r.prototype.dataToPoint.call(this,e,a,n)},t.prototype.convertToPixel=function(e,a,n){var s=i6(a);return s===this?s.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,a,n){var s=i6(a);return s===this?s.pointToData(n):null},t})(Fu);yr(F2,Fu);function i6(r){var t=r.geoModel,e=r.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",pr).models[0]||{}).coordinateSystem:null}function l6(r,t){var e=r.get("boundingCoords");if(e!=null){var a=e[0],n=e[1];if(isFinite(a[0])&&isFinite(a[1])&&isFinite(n[0])&&isFinite(n[1])){var s=this.projection;if(s){var l=a[0],o=a[1],c=n[0],u=n[1];a=[1/0,1/0],n=[-1/0,-1/0];var d=function(T,A,C,M){for(var R=C-T,k=M-A,L=0;L<=100;L++){var O=L/100,z=s.project([T+R*O,A+k*O]);dl(a,a,z),hl(n,n,z)}};d(l,o,c,o),d(c,o,c,u),d(c,u,l,u),d(l,u,c,o)}this.setBoundingRect(a[0],a[1],n[0]-a[0],n[1]-a[1])}}var h=this.getBoundingRect(),p=r.get("layoutCenter"),g=r.get("layoutSize"),v=Kr(r,t).refContainer,y=h.width/h.height*this.aspectScale,x=!1,b,N;p&&g&&(b=[Ne(p[0],v.width)+v.x,Ne(p[1],v.height)+v.y],N=Ne(g,Math.min(v.width,v.height)),!isNaN(b[0])&&!isNaN(b[1])&&!isNaN(N)&&(x=!0));var w;if(x)w={},y>1?(w.width=N,w.height=N/y):(w.height=N,w.width=N*y),w.y=b[1]-w.height/2,w.x=b[0]-w.width/2;else{var S=r.getBoxLayoutParams();S.aspect=y,w=rr(S,v),w=iB(r,w,y)}this.setViewRect(w.x,w.y,w.width,w.height),this.setCenter(r.get("center")),this.setZoom(r.get("zoom"))}function ooe(r,t){B(t.get("geoCoord"),function(e,a){r.addGeoCoord(a,e)})}var coe=(function(){function r(){this.dimensions=fH}return r.prototype.create=function(t,e){var a=[];function n(l){return{nameProperty:l.get("nameProperty"),aspectScale:l.get("aspectScale"),projection:l.get("projection")}}t.eachComponent("geo",function(l,o){var c=l.get("map"),u=new F2(c+o,c,ie({nameMap:l.get("nameMap"),api:e,ecModel:t},n(l)));u.zoomLimit=l.get("scaleLimit"),a.push(u),l.coordinateSystem=u,u.model=l,u.resize=l6,u.resize(l,e)}),t.eachSeries(function(l){Im({targetModel:l,coordSysType:"geo",coordSysProvider:function(){var o=l.subType==="map"?l.getHostGeoModel():l.getReferringComponents("geo",pr).models[0];return o&&o.coordinateSystem},allowNotFound:!0})});var s={};return t.eachSeriesByType("map",function(l){if(!l.getHostGeoModel()){var o=l.getMapType();s[o]=s[o]||[],s[o].push(l)}}),B(s,function(l,o){var c=pe(l,function(d){return d.get("nameMap")}),u=new F2(o,o,ie({nameMap:fb(c),api:e,ecModel:t},n(l[0])));u.zoomLimit=ga.apply(null,pe(l,function(d){return d.get("scaleLimit")})),a.push(u),u.resize=l6,u.resize(l[0],e),B(l,function(d){d.coordinateSystem=u,ooe(u,d)})}),a},r.prototype.getFilledRegions=function(t,e,a,n){for(var s=(t||[]).slice(),l=De(),o=0;o<s.length;o++)l.set(s[o].name,s[o]);var c=Dl.load(e,a,n);return B(c.regions,function(u){var d=u.name,h=l.get(d),p=u.properties&&u.properties.echartsStyle;h||(h={name:d},s.push(h)),p&&rt(h,p)}),s},r})(),pH=new coe,uoe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n);var s=Dl.getGeoResource(e.map);if(s&&s.type==="geoJSON"){var l=e.itemStyle=e.itemStyle||{};"color"in l||(l.color=e.defaultItemStyleColor||ee.color.backgroundTint)}wu(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,a=this.option;a.regions=pH.getFilledRegions(a.regions,a.map,a.nameMap,a.nameProperty);var n={};this._optionModelMap=ds(a.regions||[],function(s,l){var o=l.name;return o&&(s.set(o,new dt(l,e,e.ecModel)),l.selected&&(n[o]=!0)),s},De()),a.selectedMap||(a.selectedMap=n)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new dt(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,a){var n=this.getRegionModel(e),s=a==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),l={name:e};if(Le(s))return l.status=a,s(l);if(je(s))return s.replace("{a}",e??"")},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var a=this.option,n=a.selectedMode;if(n){n!=="multiple"&&(a.selectedMap=null);var s=a.selectedMap||(a.selectedMap={});s[e]=!0}},t.prototype.unSelect=function(e){var a=this.option.selectedMap;a&&(a[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var a=this.option.selectedMap;return!!(a&&a[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:ee.color.tertiary},itemStyle:{borderWidth:.5,borderColor:ee.color.border},emphasis:{label:{show:!0,color:ee.color.primary},itemStyle:{color:ee.color.highlight}},select:{label:{show:!0,color:ee.color.primary},itemStyle:{color:ee.color.highlight}},regions:[]},t})(ct),doe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return t.prototype.init=function(e,a){this._api=a},t.prototype.render=function(e,a,n,s){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new hH(n));var l=this._mapDraw;l.draw(e,a,n,this,s),l.group.on("click",this._handleRegionClick,this),l.group.silent=e.get("silent"),this.group.add(l.group),this.updateSelectStatus(e,a,n)},t.prototype._handleRegionClick=function(e){var a;nu(e.target,function(n){return(a=Xe(n).eventData)!=null},!0),a&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:a.name})},t.prototype.updateSelectStatus=function(e,a,n){var s=this;this._mapDraw.group.traverse(function(l){var o=Xe(l).eventData;if(o)return s._model.isSelected(o.name)?n.enterSelect(l):n.leaveSelect(l),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t})(Yt);function hoe(r,t,e){Dl.registerMap(r,t,e)}function gH(r){r.registerCoordinateSystem("geo",pH),r.registerComponentModel(uoe),r.registerComponentView(doe),r.registerImpl("registerMap",hoe),r.registerImpl("getMap",function(e){return Dl.getMapForUser(e)});function t(e,a){a.update="geo:updateSelectStatus",r.registerAction(a,function(n,s){var l={},o=[];return s.eachComponent({mainType:"geo",query:n},function(c){c[e](n.name);var u=c.coordinateSystem;B(u.regions,function(h){l[h.name]=c.isSelected(h.name)||!1});var d=[];B(l,function(h,p){l[p]&&d.push(p)}),o.push({geoIndex:c.componentIndex,name:d})}),{selected:l,allSelected:o,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,a,n){var s=e.componentType;s||(e.geoId!=null?s="geo":e.seriesId!=null&&(s="series")),s||(s="series"),a.eachComponent({mainType:s,query:e},function(l){var o=l.coordinateSystem;if(o.type==="geo"){var c=Ub(o,e,l.get("scaleLimit"));l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom),s==="series"&&B(l.seriesGroup,function(u){u.setCenter(c.center),u.setZoom(c.zoom)})}})})}function foe(r){st(gH),r.registerChartView(roe),r.registerSeriesModel(aoe),r.registerLayout(ioe),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,soe),ZB("map",r.registerAction)}function poe(r){var t=r;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[t],a,n;a=e.pop();)if(n=a.children,a.isExpand&&n.length)for(var s=n.length,l=s-1;l>=0;l--){var o=n[l];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:l,thread:null},e.push(o)}}function goe(r,t){var e=r.isExpand?r.children:[],a=r.parentNode.children,n=r.hierNode.i?a[r.hierNode.i-1]:null;if(e.length){voe(r);var s=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;n?(r.hierNode.prelim=n.hierNode.prelim+t(r,n),r.hierNode.modifier=r.hierNode.prelim-s):r.hierNode.prelim=s}else n&&(r.hierNode.prelim=n.hierNode.prelim+t(r,n));r.parentNode.hierNode.defaultAncestor=xoe(r,n,r.parentNode.hierNode.defaultAncestor||a[0],t)}function moe(r){var t=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:t},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function o6(r){return arguments.length?r:_oe}function ug(r,t){return r-=Math.PI/2,{x:t*Math.cos(r),y:t*Math.sin(r)}}function voe(r){for(var t=r.children,e=t.length,a=0,n=0;--e>=0;){var s=t[e];s.hierNode.prelim+=a,s.hierNode.modifier+=a,n+=s.hierNode.change,a+=s.hierNode.shift+n}}function xoe(r,t,e,a){if(t){for(var n=r,s=r,l=s.parentNode.children[0],o=t,c=n.hierNode.modifier,u=s.hierNode.modifier,d=l.hierNode.modifier,h=o.hierNode.modifier;o=zj(o),s=Bj(s),o&&s;){n=zj(n),l=Bj(l),n.hierNode.ancestor=r;var p=o.hierNode.prelim+h-s.hierNode.prelim-u+a(o,s);p>0&&(boe(yoe(o,r,e),r,p),u+=p,c+=p),h+=o.hierNode.modifier,u+=s.hierNode.modifier,c+=n.hierNode.modifier,d+=l.hierNode.modifier}o&&!zj(n)&&(n.hierNode.thread=o,n.hierNode.modifier+=h-c),s&&!Bj(l)&&(l.hierNode.thread=s,l.hierNode.modifier+=u-d,e=r)}return e}function zj(r){var t=r.children;return t.length&&r.isExpand?t[t.length-1]:r.hierNode.thread}function Bj(r){var t=r.children;return t.length&&r.isExpand?t[0]:r.hierNode.thread}function yoe(r,t,e){return r.hierNode.ancestor.parentNode===t.parentNode?r.hierNode.ancestor:e}function boe(r,t,e){var a=e/(t.hierNode.i-r.hierNode.i);t.hierNode.change-=a,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,r.hierNode.change+=a}function _oe(r,t){return r.parentNode===t.parentNode?1:2}var Noe=(function(){function r(){this.parentPoint=[],this.childPoints=[]}return r})(),joe=(function(r){re(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultStyle=function(){return{stroke:ee.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new Noe},t.prototype.buildPath=function(e,a){var n=a.childPoints,s=n.length,l=a.parentPoint,o=n[0],c=n[s-1];if(s===1){e.moveTo(l[0],l[1]),e.lineTo(o[0],o[1]);return}var u=a.orient,d=u==="TB"||u==="BT"?0:1,h=1-d,p=Ne(a.forkPosition,1),g=[];g[d]=l[d],g[h]=l[h]+(c[h]-l[h])*p,e.moveTo(l[0],l[1]),e.lineTo(g[0],g[1]),e.moveTo(o[0],o[1]),g[d]=o[d],e.lineTo(g[0],g[1]),g[d]=c[d],e.lineTo(g[0],g[1]),e.lineTo(c[0],c[1]);for(var v=1;v<s-1;v++){var y=n[v];e.moveTo(y[0],y[1]),g[d]=y[d],e.lineTo(g[0],g[1])}},t})(ht),woe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new Pe,e}return t.prototype.init=function(e,a){this._controller=new Uu(a.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,a,n){var s=e.getData(),l=e.layoutInfo,o=this._mainGroup,c=e.get("layout");c==="radial"?(o.x=l.x+l.width/2,o.y=l.y+l.height/2):(o.x=l.x,o.y=l.y),this._updateViewCoordSys(e,n),this._updateController(e,null,a,n);var u=this._data;s.diff(u).add(function(d){c6(s,d)&&u6(s,d,null,o,e)}).update(function(d,h){var p=u.getItemGraphicEl(h);if(!c6(s,d)){p&&h6(u,h,p,o,e);return}u6(s,d,p,o,e)}).remove(function(d){var h=u.getItemGraphicEl(d);h&&h6(u,d,h,o,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&s.eachItemGraphicEl(function(d,h){d.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:h})})}),this._data=s},t.prototype._updateViewCoordSys=function(e,a){var n=e.getData(),s=[];n.each(function(h){var p=n.getItemLayout(h);p&&!isNaN(p.x)&&!isNaN(p.y)&&s.push([+p.x,+p.y])});var l=[],o=[];wb(s,l,o);var c=this._min,u=this._max;o[0]-l[0]===0&&(l[0]=c?c[0]:l[0]-1,o[0]=u?u[0]:o[0]+1),o[1]-l[1]===0&&(l[1]=c?c[1]:l[1]-1,o[1]=u?u[1]:o[1]+1);var d=e.coordinateSystem=new Fu(null,{api:a,ecModel:e.ecModel});d.zoomLimit=e.get("scaleLimit"),d.setBoundingRect(l[0],l[1],o[0]-l[0],o[1]-l[1]),d.setCenter(e.get("center")),d.setZoom(e.get("zoom")),this.group.attr({x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY}),this._min=l,this._max=o},t.prototype._updateController=function(e,a,n,s){var l=this;iH(e,s,this.group,this._controller,this._controllerHost,a),this._controller.on("zoom",function(o){l._updateNodeAndLinkScale(e)})},t.prototype._updateNodeAndLinkScale=function(e){var a=e.getData(),n=this._getNodeGlobalScale(e);a.eachItemGraphicEl(function(s,l){s.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(e){var a=e.coordinateSystem;if(a.type!=="view")return 1;var n=this._nodeScaleRatio,s=a.scaleX||1,l=a.getZoom(),o=(l-1)*n+1;return o/s},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t})(Pt);function c6(r,t){var e=r.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function u6(r,t,e,a,n){var s=!e,l=r.tree.getNodeByDataIndex(t),o=l.getModel(),c=l.getVisual("style").fill,u=l.isExpand===!1&&l.children.length!==0?c:ee.color.neutral00,d=r.tree.root,h=l.parentNode===d?l:l.parentNode||l,p=r.getItemGraphicEl(h.dataIndex),g=h.getLayout(),v=p?{x:p.__oldX,y:p.__oldY,rawX:p.__radialOldRawX,rawY:p.__radialOldRawY}:g,y=l.getLayout();s?(e=new Pm(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.x=v.x,e.y=v.y):e.updateData(r,t,null,{symbolInnerColor:u,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=y.rawX,e.__radialRawY=y.rawY,a.add(e),r.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,Nt(e,{x:y.x,y:y.y},n);var x=e.getSymbolPath();if(n.get("layout")==="radial"){var b=d.children[0],N=b.getLayout(),w=b.children.length,S=void 0,T=void 0;if(y.x===N.x&&l.isExpand===!0&&b.children.length){var A={x:(b.children[0].getLayout().x+b.children[w-1].getLayout().x)/2,y:(b.children[0].getLayout().y+b.children[w-1].getLayout().y)/2};S=Math.atan2(A.y-N.y,A.x-N.x),S<0&&(S=Math.PI*2+S),T=A.x<N.x,T&&(S=S-Math.PI)}else S=Math.atan2(y.y-N.y,y.x-N.x),S<0&&(S=Math.PI*2+S),l.children.length===0||l.children.length!==0&&l.isExpand===!1?(T=y.x<N.x,T&&(S=S-Math.PI)):(T=y.x>N.x,T||(S=S-Math.PI));var C=T?"left":"right",M=o.getModel("label"),R=M.get("rotate"),k=R*(Math.PI/180),L=x.getTextContent();L&&(x.setTextConfig({position:M.get("position")||C,rotation:R==null?-S:k,origin:"center"}),L.setStyle("verticalAlign","middle"))}var O=o.get(["emphasis","focus"]),z=O==="relative"?Ah(l.getAncestorsIndices(),l.getDescendantIndices()):O==="ancestor"?l.getAncestorsIndices():O==="descendant"?l.getDescendantIndices():null;z&&(Xe(e).focus=z),Soe(n,l,d,e,v,g,y,a),e.__edge&&(e.onHoverStateChange=function(U){if(U!=="blur"){var H=l.parentNode&&r.getItemGraphicEl(l.parentNode.dataIndex);H&&H.hoverState===Am||dy(e.__edge,U)}})}function Soe(r,t,e,a,n,s,l,o){var c=t.getModel(),u=r.get("edgeShape"),d=r.get("layout"),h=r.getOrient(),p=r.get(["lineStyle","curveness"]),g=r.get("edgeForkPosition"),v=c.getModel("lineStyle").getLineStyle(),y=a.__edge;if(u==="curve")t.parentNode&&t.parentNode!==e&&(y||(y=a.__edge=new ef({shape:Y2(d,h,p,n,n)})),Nt(y,{shape:Y2(d,h,p,s,l)},r));else if(u==="polyline"&&d==="orthogonal"&&t!==e&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var x=t.children,b=[],N=0;N<x.length;N++){var w=x[N].getLayout();b.push([w.x,w.y])}y||(y=a.__edge=new joe({shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]],orient:h,forkPosition:g}})),Nt(y,{shape:{parentPoint:[l.x,l.y],childPoints:b}},r)}y&&!(u==="polyline"&&!t.isExpand)&&(y.useStyle(Ge({strokeNoScale:!0,fill:null},v)),Xr(y,c,"lineStyle"),Tu(y),o.add(y))}function d6(r,t,e,a,n){var s=t.tree.root,l=mH(s,r),o=l.source,c=l.sourceLayout,u=t.getItemGraphicEl(r.dataIndex);if(u){var d=t.getItemGraphicEl(o.dataIndex),h=d.__edge,p=u.__edge||(o.isExpand===!1||o.children.length===1?h:void 0),g=a.get("edgeShape"),v=a.get("layout"),y=a.get("orient"),x=a.get(["lineStyle","curveness"]);p&&(g==="curve"?zo(p,{shape:Y2(v,y,x,c,c),style:{opacity:0}},a,{cb:function(){e.remove(p)},removeOpt:n}):g==="polyline"&&a.get("layout")==="orthogonal"&&zo(p,{shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]]},style:{opacity:0}},a,{cb:function(){e.remove(p)},removeOpt:n}))}}function mH(r,t){for(var e=t.parentNode===r?t:t.parentNode||t,a;a=e.getLayout(),a==null;)e=e.parentNode===r?e:e.parentNode||e;return{source:e,sourceLayout:a}}function h6(r,t,e,a,n){var s=r.tree.getNodeByDataIndex(t),l=r.tree.root,o=mH(l,s).sourceLayout,c={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};zo(e,{x:o.x+1,y:o.y+1},n,{cb:function(){a.remove(e),r.setItemGraphicEl(t,null)},removeOpt:c}),e.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:c}),s.children.forEach(function(u){d6(u,r,a,n,c)}),d6(s,r,a,n,c)}function Y2(r,t,e,a,n){var s,l,o,c,u,d,h,p;if(r==="radial"){u=a.rawX,h=a.rawY,d=n.rawX,p=n.rawY;var g=ug(u,h),v=ug(u,h+(p-h)*e),y=ug(d,p+(h-p)*e),x=ug(d,p);return{x1:g.x||0,y1:g.y||0,x2:x.x||0,y2:x.y||0,cpx1:v.x||0,cpy1:v.y||0,cpx2:y.x||0,cpy2:y.y||0}}else u=a.x,h=a.y,d=n.x,p=n.y,(t==="LR"||t==="RL")&&(s=u+(d-u)*e,l=h,o=d+(u-d)*e,c=p),(t==="TB"||t==="BT")&&(s=u,l=h+(p-h)*e,o=d,c=p+(h-p)*e);return{x1:u,y1:h,x2:d,y2:p,cpx1:s,cpy1:l,cpx2:o,cpy2:c}}var cs=ut();function vH(r){var t=r.mainData,e=r.datas;e||(e={main:t},r.datasAttr={main:"data"}),r.datas=r.mainData=null,xH(t,e,r),B(e,function(a){B(t.TRANSFERABLE_METHODS,function(n){a.wrapMethod(n,et(Coe,r))})}),t.wrapMethod("cloneShallow",et(Aoe,r)),B(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,et(Toe,r))}),Ea(e[t.dataType]===t)}function Coe(r,t){if(Moe(this)){var e=ie({},cs(this).datas);e[this.dataType]=t,xH(t,e,r)}else AA(t,this.dataType,cs(this).mainData,r);return t}function Toe(r,t){return r.struct&&r.struct.update(),t}function Aoe(r,t){return B(cs(t).datas,function(e,a){e!==t&&AA(e.cloneShallow(),a,t,r)}),t}function Eoe(r){var t=cs(this).mainData;return r==null||t==null?t:cs(t).datas[r]}function Doe(){var r=cs(this).mainData;return r==null?[{data:r}]:pe(gt(cs(r).datas),function(t){return{type:t,data:cs(r).datas[t]}})}function Moe(r){return cs(r).mainData===r}function xH(r,t,e){cs(r).datas={},B(t,function(a,n){AA(a,n,r,e)})}function AA(r,t,e,a){cs(e).datas[t]=r,cs(r).mainData=e,r.dataType=t,a.struct&&(r[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=r),r.getLinkedData=Eoe,r.getLinkedDataAll=Doe}var Roe=(function(){function r(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(t,e,a){Le(t)&&(a=e,e=t,t=null),t=t||{},je(t)&&(t={order:t});var n=t.order||"preorder",s=this[t.attr||"children"],l;n==="preorder"&&(l=e.call(a,this));for(var o=0;!l&&o<s.length;o++)s[o].eachNode(t,e,a);n==="postorder"&&e.call(a,this)},r.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var a=0;a<this.children.length;a++){var n=this.children[a];n.updateDepthAndHeight(t+1),n.height>e&&(e=n.height)}this.height=e+1},r.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,a=this.children,n=a.length;e<n;e++){var s=a[e].getNodeById(t);if(s)return s}},r.prototype.contains=function(t){if(t===this)return!0;for(var e=0,a=this.children,n=a.length;e<n;e++){var s=a[e].contains(t);if(s)return s}},r.prototype.getAncestors=function(t){for(var e=[],a=t?this:this.parentNode;a;)e.push(a),a=a.parentNode;return e.reverse(),e},r.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},r.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},r.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},r.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},r.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},r.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},r.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},r})(),EA=(function(){function r(t){this.type="tree",this._nodes=[],this.hostModel=t}return r.prototype.eachNode=function(t,e,a){this.root.eachNode(t,e,a)},r.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},r.prototype.getNodeById=function(t){return this.root.getNodeById(t)},r.prototype.update=function(){for(var t=this.data,e=this._nodes,a=0,n=e.length;a<n;a++)e[a].dataIndex=-1;for(var a=0,n=t.count();a<n;a++)e[t.getRawIndex(a)].dataIndex=a},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(t,e,a){var n=new r(e),s=[],l=1;o(t);function o(d,h){var p=d.value;l=Math.max(l,de(p)?p.length:1),s.push(d);var g=new Roe($r(d.name,""),n);h?Loe(g,h):n.root=g,n._nodes.push(g);var v=d.children;if(v)for(var y=0;y<v.length;y++)o(v[y],g)}n.root.updateDepthAndHeight(0);var c=df(s,{coordDimensions:["value"],dimensionsCount:l}).dimensions,u=new Ha(c,e);return u.initData(s),a&&a(u),vH({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},r})();function Loe(r,t){var e=t.children;r.parentNode!==t&&(e.push(r),r.parentNode=t)}function im(r,t,e){if(r&&tt(t,r.type)>=0){var a=e.getData().tree.root,n=r.targetNode;if(je(n)&&(n=a.getNodeById(n)),n&&a.contains(n))return{node:n};var s=r.targetNodeId;if(s!=null&&(n=a.getNodeById(s)))return{node:n}}}function yH(r){for(var t=[];r;)r=r.parentNode,r&&t.push(r);return t.reverse()}function DA(r,t){var e=yH(r);return tt(e,t)>=0}function Yb(r,t){for(var e=[];r;){var a=r.dataIndex;e.push({name:r.name,dataIndex:a,value:t.getRawValue(a)}),r=r.parentNode}return e.reverse(),e}var Ioe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e){var a={name:e.name,children:e.data},n=e.leaves||{},s=new dt(n,this,this.ecModel),l=EA.createTree(a,this,o);function o(h){h.wrapMethod("getItemModel",function(p,g){var v=l.getNodeByDataIndex(g);return v&&v.children.length&&v.isExpand||(p.parentModel=s),p})}var c=0;l.eachNode("preorder",function(h){h.depth>c&&(c=h.depth)});var u=e.expandAndCollapse,d=u&&e.initialTreeDepth>=0?e.initialTreeDepth:c;return l.root.eachNode("preorder",function(h){var p=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=p&&p.collapsed!=null?!p.collapsed:h.depth<=d}),l.data},t.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,a,n){for(var s=this.getData().tree,l=s.root.children[0],o=s.getNodeByDataIndex(e),c=o.getValue(),u=o.name;o&&o!==l;)u=o.parentNode.name+"."+u,o=o.parentNode;return Br("nameValue",{name:u,value:c,noValue:isNaN(c)||c==null})},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=Yb(n,this),a.collapsed=!n.isExpand,a},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystemUsage:"box",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,roamTrigger:"global",nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:ee.color.borderTint,width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t})(zt);function koe(r,t,e){for(var a=[r],n=[],s;s=a.pop();)if(n.push(s),s.isExpand){var l=s.children;if(l.length)for(var o=0;o<l.length;o++)a.push(l[o])}for(;s=n.pop();)t(s,e)}function Gp(r,t){for(var e=[r],a;a=e.pop();)if(t(a),a.isExpand){var n=a.children;if(n.length)for(var s=n.length-1;s>=0;s--)e.push(n[s])}}function Ooe(r,t){r.eachSeriesByType("tree",function(e){Poe(e,t)})}function Poe(r,t){var e=Kr(r,t).refContainer,a=rr(r.getBoxLayoutParams(),e);r.layoutInfo=a;var n=r.get("layout"),s=0,l=0,o=null;n==="radial"?(s=2*Math.PI,l=Math.min(a.height,a.width)/2,o=o6(function(S,T){return(S.parentNode===T.parentNode?1:2)/S.depth})):(s=a.width,l=a.height,o=o6());var c=r.getData().tree.root,u=c.children[0];if(u){poe(c),koe(u,goe,o),c.hierNode.modifier=-u.hierNode.prelim,Gp(u,moe);var d=u,h=u,p=u;Gp(u,function(S){var T=S.getLayout().x;T<d.getLayout().x&&(d=S),T>h.getLayout().x&&(h=S),S.depth>p.depth&&(p=S)});var g=d===h?1:o(d,h)/2,v=g-d.getLayout().x,y=0,x=0,b=0,N=0;if(n==="radial")y=s/(h.getLayout().x+g+v),x=l/(p.depth-1||1),Gp(u,function(S){b=(S.getLayout().x+v)*y,N=(S.depth-1)*x;var T=ug(b,N);S.setLayout({x:T.x,y:T.y,rawX:b,rawY:N},!0)});else{var w=r.getOrient();w==="RL"||w==="LR"?(x=l/(h.getLayout().x+g+v),y=s/(p.depth-1||1),Gp(u,function(S){N=(S.getLayout().x+v)*x,b=w==="LR"?(S.depth-1)*y:s-(S.depth-1)*y,S.setLayout({x:b,y:N},!0)})):(w==="TB"||w==="BT")&&(y=s/(h.getLayout().x+g+v),x=l/(p.depth-1||1),Gp(u,function(S){b=(S.getLayout().x+v)*y,N=w==="TB"?(S.depth-1)*x:l-(S.depth-1)*x,S.setLayout({x:b,y:N},!0)}))}}}function zoe(r){r.eachSeriesByType("tree",function(t){var e=t.getData(),a=e.tree;a.eachNode(function(n){var s=n.getModel(),l=s.getModel("itemStyle").getItemStyle(),o=e.ensureUniqueItemVisual(n.dataIndex,"style");ie(o,l)})})}function Boe(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(a){var n=t.dataIndex,s=a.getData().tree,l=s.getNodeByDataIndex(n);l.isExpand=!l.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,a){e.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var s=n.coordinateSystem,l=Ub(s,t,n.get("scaleLimit"));n.setCenter(l.center),n.setZoom(l.zoom)})})}function Voe(r){r.registerChartView(woe),r.registerSeriesModel(Ioe),r.registerLayout(Ooe),r.registerVisual(zoe),Boe(r)}var f6=["treemapZoomToNode","treemapRender","treemapMove"];function Hoe(r){for(var t=0;t<f6.length;t++)r.registerAction({type:f6[t],update:"updateView"},vr);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,a){a.eachComponent({mainType:"series",subType:"treemap",query:e},n);function n(s,l){var o=["treemapZoomToNode","treemapRootToNode"],c=im(e,o,s);if(c){var u=s.getViewRoot();u&&(e.direction=DA(u,c.node)?"rollUp":"drillDown"),s.resetViewRoot(c.node)}}})}function bH(r){var t=r.getData(),e=t.tree,a={};e.eachNode(function(n){for(var s=n;s&&s.depth>1;)s=s.parentNode;var l=o2(r.ecModel,s.name||s.dataIndex+"",a);n.setVisual("decal",l)})}var Goe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return t.prototype.getInitialData=function(e,a){var n={name:e.name,children:e.data};_H(n);var s=e.levels||[],l=this.designatedVisualItemStyle={},o=new dt({itemStyle:l},this,a);s=e.levels=Uoe(s,a);var c=pe(s||[],function(h){return new dt(h,o,a)},this),u=EA.createTree(n,this,d);function d(h){h.wrapMethod("getItemModel",function(p,g){var v=u.getNodeByDataIndex(g),y=v?c[v.depth]:null;return p.parentModel=y||o,p})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,a,n){var s=this.getData(),l=this.getRawValue(e),o=s.getName(e);return Br("nameValue",{name:o,value:l})},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treeAncestors=Yb(n,this),a.treePathInfo=a.treeAncestors,a},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},ie(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var a=this._idIndexMap;a||(a=this._idIndexMap=De(),this._idIndexMapCount=0);var n=a.get(e);return n==null&&a.set(e,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var a=this.getRawData().tree.root;(!e||e!==a&&!a.contains(e))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){bH(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,coordinateSystemUsage:"box",left:ee.size.l,top:ee.size.xxxl,right:ee.size.l,bottom:ee.size.xxxl,sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:{max:5,min:.2},roam:!0,roamTrigger:"global",nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",bottom:ee.size.m,emptyItemWidth:25,itemStyle:{color:ee.color.backgroundShade,textStyle:{color:ee.color.secondary}},emphasis:{itemStyle:{color:ee.color.background}}},label:{show:!0,distance:0,padding:5,position:"inside",color:ee.color.neutral00,overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:ee.color.neutral00,borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t})(zt);function _H(r){var t=0;B(r.children,function(a){_H(a);var n=a.value;de(n)&&(n=n[0]),t+=n});var e=r.value;de(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),de(r.value)?r.value[0]=e:r.value=e}function Uoe(r,t){var e=Ft(t.get("color")),a=Ft(t.get(["aria","decal","decals"]));if(e){r=r||[];var n,s;B(r,function(o){var c=new dt(o),u=c.get("color"),d=c.get("decal");(c.get(["itemStyle","color"])||u&&u!=="none")&&(n=!0),(c.get(["itemStyle","decal"])||d&&d!=="none")&&(s=!0)});var l=r[0]||(r[0]={});return n||(l.color=e.slice()),!s&&a&&(l.decal=a.slice()),r}}var Foe=8,p6=8,Vj=5,Yoe=(function(){function r(t){this.group=new Pe,t.add(this.group)}return r.prototype.render=function(t,e,a,n){var s=t.getModel("breadcrumb"),l=this.group;if(l.removeAll(),!(!s.get("show")||!a)){var o=s.getModel("itemStyle"),c=s.getModel("emphasis"),u=o.getModel("textStyle"),d=c.getModel(["itemStyle","textStyle"]),h=Kr(t,e).refContainer,p={left:s.get("left"),right:s.get("right"),top:s.get("top"),bottom:s.get("bottom")},g={emptyItemWidth:s.get("emptyItemWidth"),totalWidth:0,renderList:[]},v=rr(p,h);this._prepare(a,g,u),this._renderContent(t,g,v,o,c,u,d,n),Rb(l,p,h)}},r.prototype._prepare=function(t,e,a){for(var n=t;n;n=n.parentNode){var s=$r(n.getModel().get("name"),""),l=a.getTextRect(s),o=Math.max(l.width+Foe*2,e.emptyItemWidth);e.totalWidth+=o+p6,e.renderList.push({node:n,text:s,width:o})}},r.prototype._renderContent=function(t,e,a,n,s,l,o,c){for(var u=0,d=e.emptyItemWidth,h=t.get(["breadcrumb","height"]),p=e.totalWidth,g=e.renderList,v=s.getModel("itemStyle").getItemStyle(),y=g.length-1;y>=0;y--){var x=g[y],b=x.node,N=x.width,w=x.text;p>a.width&&(p-=N-d,N=d,w=null);var S=new Ma({shape:{points:Woe(u,0,N,h,y===g.length-1,y===0)},style:Ge(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new vt({style:Gt(l,{text:w})}),textConfig:{position:"inside"},z2:Qh*1e4,onclick:et(c,b)});S.disableLabelAnimation=!0,S.getTextContent().ensureState("emphasis").style=Gt(o,{text:w}),S.ensureState("emphasis").style=v,nr(S,s.get("focus"),s.get("blurScope"),s.get("disabled")),this.group.add(S),$oe(S,t,b),u+=N+p6}},r.prototype.remove=function(){this.group.removeAll()},r})();function Woe(r,t,e,a,n,s){var l=[[n?r:r-Vj,t],[r+e,t],[r+e,t+a],[n?r:r-Vj,t+a]];return!s&&l.splice(2,0,[r+e+Vj,t+a/2]),!n&&l.push([r,t+a/2]),l}function $oe(r,t,e){Xe(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&Yb(e,t)}}var qoe=(function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(t,e,a,n,s){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:a,delay:n,easing:s}),!0)},r.prototype.finished=function(t){return this._finishedCallback=t,this},r.prototype.start=function(){for(var t=this,e=this._storage.length,a=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,s=this._storage.length;n<s;n++){var l=this._storage[n];l.el.animateTo(l.target,{duration:l.duration,delay:l.delay,easing:l.easing,setToFinal:!0,done:a,aborted:a})}return this},r})();function Xoe(){return new qoe}var W2=Pe,g6=it,m6=3,v6="label",x6="upperLabel",Zoe=Qh*10,Koe=Qh*2,Qoe=Qh*3,Fc=Cu([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),y6=function(r){var t=Fc(r);return t.stroke=t.fill=t.lineWidth=null,t},By=ut(),Joe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage=Up(),e}return t.prototype.render=function(e,a,n,s){var l=a.findComponents({mainType:"series",subType:"treemap",query:s});if(!(tt(l,e)<0)){this.seriesModel=e,this.api=n,this.ecModel=a;var o=["treemapZoomToNode","treemapRootToNode"],c=im(s,o,e),u=s&&s.type,d=e.layoutInfo,h=!this._oldTree,p=this._storage,g=u==="treemapRootToNode"&&c&&p?{rootNodeGroup:p.nodeGroup[c.node.getRawIndex()],direction:s.direction}:null,v=this._giveContainerGroup(d),y=e.get("animation"),x=this._doRender(v,e,g);y&&!h&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(v,x,e,g):x.renderFinally(),this._resetController(n),this._renderBreadcrumb(e,n,c)}},t.prototype._giveContainerGroup=function(e){var a=this._containerGroup;return a||(a=this._containerGroup=new W2,this._initEvents(a),this.group.add(a)),a.x=e.x,a.y=e.y,a},t.prototype._doRender=function(e,a,n){var s=a.getData().tree,l=this._oldTree,o=Up(),c=Up(),u=this._storage,d=[];function h(N,w,S,T){return ece(a,c,u,n,o,d,N,w,S,T)}y(s.root?[s.root]:[],l&&l.root?[l.root]:[],e,s===l||!l,0);var p=x(u);if(this._oldTree=s,this._storage=c,this._controllerHost){var g=this.seriesModel.layoutInfo,v=s.root.getLayout();v.width===g.width&&v.height===g.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:p,renderFinally:b};function y(N,w,S,T,A){T?(w=N,B(N,function(R,k){!R.isRemoved()&&M(k,k)})):new Tl(w,N,C,C).add(M).update(M).remove(et(M,null)).execute();function C(R){return R.getId()}function M(R,k){var L=R!=null?N[R]:null,O=k!=null?w[k]:null,z=h(L,O,S,A);z&&y(L&&L.viewChildren||[],O&&O.viewChildren||[],z,T,A+1)}}function x(N){var w=Up();return N&&B(N,function(S,T){var A=w[T];B(S,function(C){C&&(A.push(C),By(C).willDelete=!0)})}),w}function b(){B(p,function(N){B(N,function(w){w.parent&&w.parent.remove(w)})}),B(d,function(N){N.invisible=!0,N.dirty()})}},t.prototype._doAnimation=function(e,a,n,s){var l=n.get("animationDurationUpdate"),o=n.get("animationEasing"),c=(Le(l)?0:l)||0,u=(Le(o)?null:o)||"cubicOut",d=Xoe();B(a.willDeleteEls,function(h,p){B(h,function(g,v){if(!g.invisible){var y=g.parent,x,b=By(y);if(s&&s.direction==="drillDown")x=y===s.rootNodeGroup?{shape:{x:0,y:0,width:b.nodeWidth,height:b.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var N=0,w=0;b.willDelete||(N=b.nodeWidth/2,w=b.nodeHeight/2),x=p==="nodeGroup"?{x:N,y:w,style:{opacity:0}}:{shape:{x:N,y:w,width:0,height:0},style:{opacity:0}}}x&&d.add(g,x,c,0,u)}})}),B(this._storage,function(h,p){B(h,function(g,v){var y=a.lastsForAnimation[p][v],x={};y&&(g instanceof Pe?y.oldX!=null&&(x.x=g.x,x.y=g.y,g.x=y.oldX,g.y=y.oldY):(y.oldShape&&(x.shape=ie({},g.shape),g.setShape(y.oldShape)),y.fadein?(g.setStyle("opacity",0),x.style={opacity:1}):g.style.opacity!==1&&(x.style={opacity:1})),d.add(g,x,c,0,u))})},this),this._state="animating",d.finished(we(function(){this._state="ready",a.renderFinally()},this)).start()},t.prototype._resetController=function(e){var a=this,n=this._controller,s=this._controllerHost;s||(this._controllerHost={target:this.group},s=this._controllerHost);var l=this.seriesModel;n||(n=this._controller=new Uu(e.getZr()),n.on("pan",we(this._onPan,this)),n.on("zoom",we(this._onZoom,this))),n.enable(l.get("roam"),{api:e,zInfo:{component:l},triggerInfo:{roamTrigger:l.get("roamTrigger"),isInSelf:function(o,c,u){var d=a._containerGroup;return d?d.getBoundingRect().contain(c-d.x,u-d.y):!1}}}),s.zoomLimit=l.get("scaleLimit"),s.zoom=l.get("zoom")},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>m6||Math.abs(e.dy)>m6)){var a=this.seriesModel.getData().tree.root;if(!a)return;var n=a.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(e){var a=e.originX,n=e.originY,s=e.scale;if(this._state!=="animating"){var l=this.seriesModel.getData().tree.root;if(!l)return;var o=l.getLayout();if(!o)return;var c=new We(o.x,o.y,o.width,o.height),u=null,d=this._controllerHost;u=d.zoomLimit;var h=d.zoom=d.zoom||1;if(h*=s,u){var p=u.min||0,g=u.max||1/0;h=Math.max(Math.min(g,h),p)}var v=h/d.zoom;d.zoom=h;var y=this.seriesModel.layoutInfo;a-=y.x,n-=y.y;var x=na();zs(x,x,[-a,-n]),mb(x,x,[v,v]),zs(x,x,[a,n]),c.applyTransform(x),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},t.prototype._initEvents=function(e){var a=this;e.on("click",function(n){if(a._state==="ready"){var s=a.seriesModel.get("nodeClick",!0);if(s){var l=a.findTarget(n.offsetX,n.offsetY);if(l){var o=l.node;if(o.getLayout().isLeafRoot)a._rootToNode(l);else if(s==="zoomToNode")a._zoomToNode(l);else if(s==="link"){var c=o.hostTree.data.getItemModel(o.dataIndex),u=c.get("link",!0),d=c.get("target",!0)||"blank";u&&gy(u,d)}}}}},this)},t.prototype._renderBreadcrumb=function(e,a,n){var s=this;n||(n=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(a.getWidth()/2,a.getHeight()/2),n||(n={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Yoe(this.group))).render(e,a,n.node,function(l){s._state!=="animating"&&(DA(e.getViewRoot(),l)?s._rootToNode({node:l}):s._zoomToNode({node:l}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Up(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,a){var n,s=this.seriesModel.getViewRoot();return s.eachNode({attr:"viewChildren",order:"preorder"},function(l){var o=this._storage.background[l.getRawIndex()];if(o){var c=o.transformCoordToLocal(e,a),u=o.shape;if(u.x<=c[0]&&c[0]<=u.x+u.width&&u.y<=c[1]&&c[1]<=u.y+u.height)n={node:l,offsetX:c[0],offsetY:c[1]};else return!1}},this),n},t.type="treemap",t})(Pt);function Up(){return{nodeGroup:[],background:[],content:[]}}function ece(r,t,e,a,n,s,l,o,c,u){if(!l)return;var d=l.getLayout(),h=r.getData(),p=l.getModel();if(h.setItemGraphicEl(l.dataIndex,null),!d||!d.isInView)return;var g=d.width,v=d.height,y=d.borderWidth,x=d.invisible,b=l.getRawIndex(),N=o&&o.getRawIndex(),w=l.viewChildren,S=d.upperHeight,T=w&&w.length,A=p.getModel("itemStyle"),C=p.getModel(["emphasis","itemStyle"]),M=p.getModel(["blur","itemStyle"]),R=p.getModel(["select","itemStyle"]),k=A.get("borderRadius")||0,L=me("nodeGroup",W2);if(!L)return;if(c.add(L),L.x=d.x||0,L.y=d.y||0,L.markRedraw(),By(L).nodeWidth=g,By(L).nodeHeight=v,d.isAboveViewRoot)return L;var O=me("background",g6,u,Koe);O&&q(L,O,T&&d.upperLabelHeight);var z=p.getModel("emphasis"),U=z.get("focus"),H=z.get("blurScope"),P=z.get("disabled"),F=U==="ancestor"?l.getAncestorsIndices():U==="descendant"?l.getDescendantIndices():U;if(T)Yg(L)&&ru(L,!1),O&&(ru(O,!P),h.setItemGraphicEl(l.dataIndex,O),KS(O,F,H));else{var Y=me("content",g6,u,Qoe);Y&&G(L,Y),O.disableMorphing=!0,O&&Yg(O)&&ru(O,!1),ru(L,!P),h.setItemGraphicEl(l.dataIndex,L);var X=p.getShallow("cursor");X&&Y.attr("cursor",X),KS(L,F,H)}return L;function q(Ee,be,He){var Se=Xe(be);if(Se.dataIndex=l.dataIndex,Se.seriesIndex=r.seriesIndex,be.setShape({x:0,y:0,width:g,height:v,r:k}),x)$(be);else{be.invisible=!1;var Ie=l.getVisual("style"),ft=Ie.stroke,le=y6(A);le.fill=ft;var ze=Fc(C);ze.fill=C.get("borderColor");var $e=Fc(M);$e.fill=M.get("borderColor");var ot=Fc(R);if(ot.fill=R.get("borderColor"),He){var Rt=g-2*y;Z(be,ft,Ie.opacity,{x:y,y:0,width:Rt,height:S})}else be.removeTextContent();be.setStyle(le),be.ensureState("emphasis").style=ze,be.ensureState("blur").style=$e,be.ensureState("select").style=ot,Tu(be)}Ee.add(be)}function G(Ee,be){var He=Xe(be);He.dataIndex=l.dataIndex,He.seriesIndex=r.seriesIndex;var Se=Math.max(g-2*y,0),Ie=Math.max(v-2*y,0);if(be.culling=!0,be.setShape({x:y,y,width:Se,height:Ie,r:k}),x)$(be);else{be.invisible=!1;var ft=l.getVisual("style"),le=ft.fill,ze=y6(A);ze.fill=le,ze.decal=ft.decal;var $e=Fc(C),ot=Fc(M),Rt=Fc(R);Z(be,le,ft.opacity,null),be.setStyle(ze),be.ensureState("emphasis").style=$e,be.ensureState("blur").style=ot,be.ensureState("select").style=Rt,Tu(be)}Ee.add(be)}function $(Ee){!Ee.invisible&&s.push(Ee)}function Z(Ee,be,He,Se){var Ie=p.getModel(Se?x6:v6),ft=$r(p.get("name"),null),le=Ie.getShallow("show");ia(Ee,Zr(p,Se?x6:v6),{defaultText:le?ft:null,inheritColor:be,defaultOpacity:He,labelFetcher:r,labelDataIndex:l.dataIndex});var ze=Ee.getTextContent();if(ze){var $e=ze.style,ot=jm($e.padding||0);Se&&(Ee.setTextConfig({layoutRect:Se}),ze.disableLabelLayout=!0),ze.beforeUpdate=function(){var or=Math.max((Se?Se.width:Ee.shape.width)-ot[1]-ot[3],0),Qr=Math.max((Se?Se.height:Ee.shape.height)-ot[0]-ot[2],0);($e.width!==or||$e.height!==Qr)&&ze.setStyle({width:or,height:Qr})},$e.truncateMinChar=2,$e.lineOverflow="truncate",te($e,Se,d);var Rt=ze.getState("emphasis");te(Rt?Rt.style:null,Se,d)}}function te(Ee,be,He){var Se=Ee?Ee.text:null;if(!be&&He.isLeafRoot&&Se!=null){var Ie=r.get("drillDownIcon",!0);Ee.text=Ie?Ie+" "+Se:Se}}function me(Ee,be,He,Se){var Ie=N!=null&&e[Ee][N],ft=n[Ee];return Ie?(e[Ee][N]=null,Ce(ft,Ie)):x||(Ie=new be,Ie instanceof fs&&(Ie.z2=tce(He,Se)),Ve(ft,Ie)),t[Ee][b]=Ie}function Ce(Ee,be){var He=Ee[b]={};be instanceof W2?(He.oldX=be.x,He.oldY=be.y):He.oldShape=ie({},be.shape)}function Ve(Ee,be){var He=Ee[b]={},Se=l.parentNode,Ie=be instanceof Pe;if(Se&&(!a||a.direction==="drillDown")){var ft=0,le=0,ze=n.background[Se.getRawIndex()];!a&&ze&&ze.oldShape&&(ft=ze.oldShape.width,le=ze.oldShape.height),Ie?(He.oldX=0,He.oldY=le):He.oldShape={x:ft,y:le,width:0,height:0}}He.fadein=!Ie}}function tce(r,t){return r*Zoe+t}var lm=B,rce=Ue,Vy=-1,sa=(function(){function r(t){var e=t.mappingMethod,a=t.type,n=this.option=Oe(t);this.type=a,this.mappingMethod=e,this._normalizeData=sce[e];var s=r.visualHandlers[a];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[e],e==="piecewise"?(Hj(n),ace(n)):e==="category"?n.categories?nce(n):Hj(n,!0):(Ea(e!=="linear"||n.dataExtent),Hj(n))}return r.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},r.prototype.getNormalizer=function(){return we(this._normalizeData,this)},r.listVisualTypes=function(){return gt(r.visualHandlers)},r.isValidType=function(t){return r.visualHandlers.hasOwnProperty(t)},r.eachVisual=function(t,e,a){Ue(t)?B(t,e,a):e.call(a,t)},r.mapVisual=function(t,e,a){var n,s=de(t)?[]:Ue(t)?{}:(n=!0,null);return r.eachVisual(t,function(l,o){var c=e.call(a,l,o);n?s=c:s[o]=c}),s},r.retrieveVisuals=function(t){var e={},a;return t&&lm(r.visualHandlers,function(n,s){t.hasOwnProperty(s)&&(e[s]=t[s],a=!0)}),a?e:null},r.prepareVisualTypes=function(t){if(de(t))t=t.slice();else if(rce(t)){var e=[];lm(t,function(a,n){e.push(n)}),t=e}else return[];return t.sort(function(a,n){return n==="color"&&a!=="color"&&a.indexOf("color")===0?1:-1}),t},r.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e},r.findPieceIndex=function(t,e,a){for(var n,s=1/0,l=0,o=e.length;l<o;l++){var c=e[l].value;if(c!=null){if(c===t||je(c)&&c===t+"")return l;a&&p(c,l)}}for(var l=0,o=e.length;l<o;l++){var u=e[l],d=u.interval,h=u.close;if(d){if(d[0]===-1/0){if(K0(h[1],t,d[1]))return l}else if(d[1]===1/0){if(K0(h[0],d[0],t))return l}else if(K0(h[0],d[0],t)&&K0(h[1],t,d[1]))return l;a&&p(d[0],l),a&&p(d[1],l)}}if(a)return t===1/0?e.length-1:t===-1/0?0:n;function p(g,v){var y=Math.abs(g-t);y<s&&(s=y,n=v)}},r.visualHandlers={color:{applyVisual:Fp("color"),getColorMapper:function(){var t=this.option;return we(t.mappingMethod==="category"?function(e,a){return!a&&(e=this._normalizeData(e)),dg.call(this,e)}:function(e,a,n){var s=!!n;return!a&&(e=this._normalizeData(e)),n=_g(e,t.parsedVisual,n),s?n:os(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return os(_g(t,this.option.parsedVisual),"rgba")},category:dg,piecewise:function(t,e){var a=q2.call(this,e);return a==null&&(a=os(_g(t,this.option.parsedVisual),"rgba")),a},fixed:Yc}},colorHue:Z0(function(t,e){return vl(t,e)}),colorSaturation:Z0(function(t,e){return vl(t,null,e)}),colorLightness:Z0(function(t,e){return vl(t,null,null,e)}),colorAlpha:Z0(function(t,e){return Vg(t,e)}),decal:{applyVisual:Fp("decal"),_normalizedToVisual:{linear:null,category:dg,piecewise:null,fixed:null}},opacity:{applyVisual:Fp("opacity"),_normalizedToVisual:$2([0,1])},liftZ:{applyVisual:Fp("liftZ"),_normalizedToVisual:{linear:Yc,category:Yc,piecewise:Yc,fixed:Yc}},symbol:{applyVisual:function(t,e,a){var n=this.mapValueToVisual(t);a("symbol",n)},_normalizedToVisual:{linear:b6,category:dg,piecewise:function(t,e){var a=q2.call(this,e);return a==null&&(a=b6.call(this,t)),a},fixed:Yc}},symbolSize:{applyVisual:Fp("symbolSize"),_normalizedToVisual:$2([0,1])}},r})();function ace(r){var t=r.pieceList;r.hasSpecialVisual=!1,B(t,function(e,a){e.originIndex=a,e.visual!=null&&(r.hasSpecialVisual=!0)})}function nce(r){var t=r.categories,e=r.categoryMap={},a=r.visual;if(lm(t,function(l,o){e[l]=o}),!de(a)){var n=[];Ue(a)?lm(a,function(l,o){var c=e[o];n[c??Vy]=l}):n[Vy]=a,a=NH(r,n)}for(var s=t.length-1;s>=0;s--)a[s]==null&&(delete e[t[s]],t.pop())}function Hj(r,t){var e=r.visual,a=[];Ue(e)?lm(e,function(s){a.push(s)}):e!=null&&a.push(e);var n={color:1,symbol:1};!t&&a.length===1&&!n.hasOwnProperty(r.type)&&(a[1]=a[0]),NH(r,a)}function Z0(r){return{applyVisual:function(t,e,a){var n=this.mapValueToVisual(t);a("color",r(e("color"),n))},_normalizedToVisual:$2([0,1])}}function b6(r){var t=this.option.visual;return t[Math.round(Tt(r,[0,1],[0,t.length-1],!0))]||{}}function Fp(r){return function(t,e,a){a(r,this.mapValueToVisual(t))}}function dg(r){var t=this.option.visual;return t[this.option.loop&&r!==Vy?r%t.length:r]}function Yc(){return this.option.visual[0]}function $2(r){return{linear:function(t){return Tt(t,r,this.option.visual,!0)},category:dg,piecewise:function(t,e){var a=q2.call(this,e);return a==null&&(a=Tt(t,r,this.option.visual,!0)),a},fixed:Yc}}function q2(r){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var a=sa.findPieceIndex(r,e),n=e[a];if(n&&n.visual)return n.visual[this.type]}}function NH(r,t){return r.visual=t,r.type==="color"&&(r.parsedVisual=pe(t,function(e){var a=Va(e);return a||[0,0,0,1]})),t}var sce={linear:function(r){return Tt(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var t=this.option.pieceList,e=sa.findPieceIndex(r,t,!0);if(e!=null)return Tt(e,[0,t.length-1],[0,1],!0)},category:function(r){var t=this.option.categories?this.option.categoryMap[r]:r;return t??Vy},fixed:vr};function K0(r,t,e){return r?t<=e:t<e}var ice="itemStyle",jH=ut();const lce={seriesType:"treemap",reset:function(r){var t=r.getData().tree,e=t.root;e.isRemoved()||wH(e,{},r.getViewRoot().getAncestors(),r)}};function wH(r,t,e,a){var n=r.getModel(),s=r.getLayout(),l=r.hostTree.data;if(!(!s||s.invisible||!s.isInView)){var o=n.getModel(ice),c=oce(o,t,a),u=l.ensureUniqueItemVisual(r.dataIndex,"style"),d=o.get("borderColor"),h=o.get("borderColorSaturation"),p;h!=null&&(p=_6(c),d=cce(h,p)),u.stroke=d;var g=r.viewChildren;if(!g||!g.length)p=_6(c),u.fill=p;else{var v=uce(r,n,s,o,c,g);B(g,function(y,x){if(y.depth>=e.length||y===e[y.depth]){var b=dce(n,c,y,x,v,a);wH(y,b,e,a)}})}}}function oce(r,t,e){var a=ie({},t),n=e.designatedVisualItemStyle;return B(["color","colorAlpha","colorSaturation"],function(s){n[s]=t[s];var l=r.get(s);n[s]=null,l!=null&&(a[s]=l)}),a}function _6(r){var t=Gj(r,"color");if(t){var e=Gj(r,"colorAlpha"),a=Gj(r,"colorSaturation");return a&&(t=vl(t,null,null,a)),e&&(t=Vg(t,e)),t}}function cce(r,t){return t!=null?vl(t,null,null,r):null}function Gj(r,t){var e=r[t];if(e!=null&&e!=="none")return e}function uce(r,t,e,a,n,s){if(!(!s||!s.length)){var l=Uj(t,"color")||n.color!=null&&n.color!=="none"&&(Uj(t,"colorAlpha")||Uj(t,"colorSaturation"));if(l){var o=t.get("visualMin"),c=t.get("visualMax"),u=e.dataExtent.slice();o!=null&&o<u[0]&&(u[0]=o),c!=null&&c>u[1]&&(u[1]=c);var d=t.get("colorMappingBy"),h={type:l.name,dataExtent:u,visual:l.range};h.type==="color"&&(d==="index"||d==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var p=new sa(h);return jH(p).drColorMappingBy=d,p}}}function Uj(r,t){var e=r.get(t);return de(e)&&e.length?{name:t,range:e}:null}function dce(r,t,e,a,n,s){var l=ie({},t);if(n){var o=n.type,c=o==="color"&&jH(n).drColorMappingBy,u=c==="index"?a:c==="id"?s.mapIdToIndex(e.getId()):e.getValue(r.get("visualDimension"));l[o]=n.mapValueToVisual(u)}return l}var om=Math.max,Hy=Math.min,N6=ga,MA=B,SH=["itemStyle","borderWidth"],hce=["itemStyle","gapWidth"],fce=["upperLabel","show"],pce=["upperLabel","height"];const gce={seriesType:"treemap",reset:function(r,t,e,a){var n=r.option,s=Kr(r,e).refContainer,l=rr(r.getBoxLayoutParams(),s),o=n.size||[],c=Ne(N6(l.width,o[0]),s.width),u=Ne(N6(l.height,o[1]),s.height),d=a&&a.type,h=["treemapZoomToNode","treemapRootToNode"],p=im(a,h,r),g=d==="treemapRender"||d==="treemapMove"?a.rootRect:null,v=r.getViewRoot(),y=yH(v);if(d!=="treemapMove"){var x=d==="treemapZoomToNode"?_ce(r,p,v,c,u):g?[g.width,g.height]:[c,u],b=n.sort;b&&b!=="asc"&&b!=="desc"&&(b="desc");var N={squareRatio:n.squareRatio,sort:b,leafDepth:n.leafDepth};v.hostTree.clearLayouts();var w={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};v.setLayout(w),CH(v,N,!1,0),w=v.getLayout(),MA(y,function(T,A){var C=(y[A+1]||v).getValue();T.setLayout(ie({dataExtent:[C,C],borderWidth:0,upperHeight:0},w))})}var S=r.getData().tree.root;S.setLayout(Nce(l,g,p),!0),r.setLayoutInfo(l),TH(S,new We(-l.x,-l.y,e.getWidth(),e.getHeight()),y,v,0)}};function CH(r,t,e,a){var n,s;if(!r.isRemoved()){var l=r.getLayout();n=l.width,s=l.height;var o=r.getModel(),c=o.get(SH),u=o.get(hce)/2,d=AH(o),h=Math.max(c,d),p=c-u,g=h-u;r.setLayout({borderWidth:c,upperHeight:h,upperLabelHeight:d},!0),n=om(n-2*p,0),s=om(s-p-g,0);var v=n*s,y=mce(r,o,v,t,e,a);if(y.length){var x={x:p,y:g,width:n,height:s},b=Hy(n,s),N=1/0,w=[];w.area=0;for(var S=0,T=y.length;S<T;){var A=y[S];w.push(A),w.area+=A.getLayout().area;var C=bce(w,b,t.squareRatio);C<=N?(S++,N=C):(w.area-=w.pop().getLayout().area,j6(w,b,x,u,!1),b=Hy(x.width,x.height),w.length=w.area=0,N=1/0)}if(w.length&&j6(w,b,x,u,!0),!e){var M=o.get("childrenVisibleMin");M!=null&&v<M&&(e=!0)}for(var S=0,T=y.length;S<T;S++)CH(y[S],t,e,a+1)}}}function mce(r,t,e,a,n,s){var l=r.children||[],o=a.sort;o!=="asc"&&o!=="desc"&&(o=null);var c=a.leafDepth!=null&&a.leafDepth<=s;if(n&&!c)return r.viewChildren=[];l=Ct(l,function(g){return!g.isRemoved()}),xce(l,o);var u=yce(t,l,o);if(u.sum===0)return r.viewChildren=[];if(u.sum=vce(t,e,u.sum,o,l),u.sum===0)return r.viewChildren=[];for(var d=0,h=l.length;d<h;d++){var p=l[d].getValue()/u.sum*e;l[d].setLayout({area:p})}return c&&(l.length&&r.setLayout({isLeafRoot:!0},!0),l.length=0),r.viewChildren=l,r.setLayout({dataExtent:u.dataExtent},!0),l}function vce(r,t,e,a,n){if(!a)return e;for(var s=r.get("visibleMin"),l=n.length,o=l,c=l-1;c>=0;c--){var u=n[a==="asc"?l-c-1:c].getValue();u/e*t<s&&(o=c,e-=u)}return a==="asc"?n.splice(0,l-o):n.splice(o,l-o),e}function xce(r,t){return t&&r.sort(function(e,a){var n=t==="asc"?e.getValue()-a.getValue():a.getValue()-e.getValue();return n===0?t==="asc"?e.dataIndex-a.dataIndex:a.dataIndex-e.dataIndex:n}),r}function yce(r,t,e){for(var a=0,n=0,s=t.length;n<s;n++)a+=t[n].getValue();var l=r.get("visualDimension"),o;return!t||!t.length?o=[NaN,NaN]:l==="value"&&e?(o=[t[t.length-1].getValue(),t[0].getValue()],e==="asc"&&o.reverse()):(o=[1/0,-1/0],MA(t,function(c){var u=c.getValue(l);u<o[0]&&(o[0]=u),u>o[1]&&(o[1]=u)})),{sum:a,dataExtent:o}}function bce(r,t,e){for(var a=0,n=1/0,s=0,l=void 0,o=r.length;s<o;s++)l=r[s].getLayout().area,l&&(l<n&&(n=l),l>a&&(a=l));var c=r.area*r.area,u=t*t*e;return c?om(u*a/c,c/(u*n)):1/0}function j6(r,t,e,a,n){var s=t===e.width?0:1,l=1-s,o=["x","y"],c=["width","height"],u=e[o[s]],d=t?r.area/t:0;(n||d>e[c[l]])&&(d=e[c[l]]);for(var h=0,p=r.length;h<p;h++){var g=r[h],v={},y=d?g.getLayout().area/d:0,x=v[c[l]]=om(d-2*a,0),b=e[o[s]]+e[c[s]]-u,N=h===p-1||b<y?b:y,w=v[c[s]]=om(N-2*a,0);v[o[l]]=e[o[l]]+Hy(a,x/2),v[o[s]]=u+Hy(a,w/2),u+=N,g.setLayout(v,!0)}e[o[l]]+=d,e[c[l]]-=d}function _ce(r,t,e,a,n){var s=(t||{}).node,l=[a,n];if(!s||s===e)return l;for(var o,c=a*n,u=c*r.option.zoomToNodeRatio;o=s.parentNode;){for(var d=0,h=o.children,p=0,g=h.length;p<g;p++)d+=h[p].getValue();var v=s.getValue();if(v===0)return l;u*=d/v;var y=o.getModel(),x=y.get(SH),b=Math.max(x,AH(y));u+=4*x*x+(3*x+b)*Math.pow(u,.5),u>VS&&(u=VS),s=o}u<c&&(u=c);var N=Math.pow(u/c,.5);return[a*N,n*N]}function Nce(r,t,e){if(t)return{x:t.x,y:t.y};var a={x:0,y:0};if(!e)return a;var n=e.node,s=n.getLayout();if(!s)return a;for(var l=[s.width/2,s.height/2],o=n;o;){var c=o.getLayout();l[0]+=c.x,l[1]+=c.y,o=o.parentNode}return{x:r.width/2-l[0],y:r.height/2-l[1]}}function TH(r,t,e,a,n){var s=r.getLayout(),l=e[n],o=l&&l===r;if(!(l&&!o||n===e.length&&r!==a)){r.setLayout({isInView:!0,invisible:!o&&!t.intersect(s),isAboveViewRoot:o},!0);var c=new We(t.x-s.x,t.y-s.y,t.width,t.height);MA(r.viewChildren||[],function(u){TH(u,c,e,a,n+1)})}}function AH(r){return r.get(fce)?r.get(pce):0}function jce(r){r.registerSeriesModel(Goe),r.registerChartView(Joe),r.registerVisual(lce),r.registerLayout(gce),Hoe(r)}function wce(r){var t=r.findComponents({mainType:"legend"});!t||!t.length||r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),n=e.getGraph(),s=n.data,l=a.mapArray(a.getName);s.filterSelf(function(o){var c=s.getItemModel(o),u=c.getShallow("category");if(u!=null){xt(u)&&(u=l[u]);for(var d=0;d<t.length;d++)if(!t[d].isSelected(u))return!1}return!0})})}function Sce(r){var t={};r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),n=e.getData(),s={};a.each(function(l){var o=a.getName(l);s["ec-"+o]=l;var c=a.getItemModel(l),u=c.getModel("itemStyle").getItemStyle();u.fill||(u.fill=e.getColorFromPalette(o,t)),a.setItemVisual(l,"style",u);for(var d=["symbol","symbolSize","symbolKeepAspect"],h=0;h<d.length;h++){var p=c.getShallow(d[h],!0);p!=null&&a.setItemVisual(l,d[h],p)}}),a.count()&&n.each(function(l){var o=n.getItemModel(l),c=o.getShallow("category");if(c!=null){je(c)&&(c=s["ec-"+c]);var u=a.getItemVisual(c,"style"),d=n.ensureUniqueItemVisual(l,"style");ie(d,u);for(var h=["symbol","symbolSize","symbolKeepAspect"],p=0;p<h.length;p++)n.setItemVisual(l,h[p],a.getItemVisual(c,h[p]))}})})}function Q0(r){return r instanceof Array||(r=[r,r]),r}function Cce(r){r.eachSeriesByType("graph",function(t){var e=t.getGraph(),a=t.getEdgeData(),n=Q0(t.get("edgeSymbol")),s=Q0(t.get("edgeSymbolSize"));a.setVisual("fromSymbol",n&&n[0]),a.setVisual("toSymbol",n&&n[1]),a.setVisual("fromSymbolSize",s&&s[0]),a.setVisual("toSymbolSize",s&&s[1]),a.setVisual("style",t.getModel("lineStyle").getLineStyle()),a.each(function(l){var o=a.getItemModel(l),c=e.getEdgeByIndex(l),u=Q0(o.getShallow("symbol",!0)),d=Q0(o.getShallow("symbolSize",!0)),h=o.getModel("lineStyle").getLineStyle(),p=a.ensureUniqueItemVisual(l,"style");switch(ie(p,h),p.stroke){case"source":{var g=c.node1.getVisual("style");p.stroke=g&&g.fill;break}case"target":{var g=c.node2.getVisual("style");p.stroke=g&&g.fill;break}}u[0]&&c.setVisual("fromSymbol",u[0]),u[1]&&c.setVisual("toSymbol",u[1]),d[0]&&c.setVisual("fromSymbolSize",d[0]),d[1]&&c.setVisual("toSymbolSize",d[1])})})}var X2="-->",Wb=function(r){return r.get("autoCurveness")||null},EH=function(r,t){var e=Wb(r),a=20,n=[];if(xt(e))a=e;else if(de(e)){r.__curvenessList=e;return}t>a&&(a=t);var s=a%2?a+2:a+3;n=[];for(var l=0;l<s;l++)n.push((l%2?l+1:l)/10*(l%2?-1:1));r.__curvenessList=n},cm=function(r,t,e){var a=[r.id,r.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[e.uid,a,n].join(X2)},DH=function(r){var t=r.split(X2);return[t[0],t[2],t[1]].join(X2)},Tce=function(r,t){var e=cm(r.node1,r.node2,t);return t.__edgeMap[e]},Ace=function(r,t){var e=Z2(cm(r.node1,r.node2,t),t),a=Z2(cm(r.node2,r.node1,t),t);return e+a},Z2=function(r,t){var e=t.__edgeMap;return e[r]?e[r].length:0};function Ece(r){Wb(r)&&(r.__curvenessList=[],r.__edgeMap={},EH(r))}function Dce(r,t,e,a){if(Wb(e)){var n=cm(r,t,e),s=e.__edgeMap,l=s[DH(n)];s[n]&&!l?s[n].isForward=!0:l&&s[n]&&(l.isForward=!0,s[n].isForward=!1),s[n]=s[n]||[],s[n].push(a)}}function RA(r,t,e,a){var n=Wb(t),s=de(n);if(!n)return null;var l=Tce(r,t);if(!l)return null;for(var o=-1,c=0;c<l.length;c++)if(l[c]===e){o=c;break}var u=Ace(r,t);EH(t,u),r.lineStyle=r.lineStyle||{};var d=cm(r.node1,r.node2,t),h=t.__curvenessList,p=s||u%2?0:1;if(l.isForward)return h[p+o];var g=DH(d),v=Z2(g,t),y=h[o+v+p];return a?s?n&&n[0]===0?(v+p)%2?y:-y:((v%2?0:1)+p)%2?y:-y:(v+p)%2?y:-y:h[o+v+p]}function MH(r){var t=r.coordinateSystem;if(!(t&&t.type!=="view")){var e=r.getGraph();e.eachNode(function(a){var n=a.getModel();a.setLayout([+n.get("x"),+n.get("y")])}),LA(e,r)}}function LA(r,t){r.eachEdge(function(e,a){var n=fn(e.getModel().get(["lineStyle","curveness"]),-RA(e,t,a,!0),0),s=yi(e.node1.getLayout()),l=yi(e.node2.getLayout()),o=[s,l];+n&&o.push([(s[0]+l[0])/2-(s[1]-l[1])*n,(s[1]+l[1])/2-(l[0]-s[0])*n]),e.setLayout(o)})}function Mce(r,t){r.eachSeriesByType("graph",function(e){var a=e.get("layout"),n=e.coordinateSystem;if(n&&n.type!=="view"){var s=e.getData(),l=[];B(n.dimensions,function(p){l=l.concat(s.mapDimensionsAll(p))});for(var o=0;o<s.count();o++){for(var c=[],u=!1,d=0;d<l.length;d++){var h=s.get(l[d],o);isNaN(h)||(u=!0),c.push(h)}u?s.setItemLayout(o,n.dataToPoint(c)):s.setItemLayout(o,[NaN,NaN])}LA(s.graph,e)}else(!a||a==="none")&&MH(e)})}function hg(r){var t=r.coordinateSystem;if(t.type!=="view")return 1;var e=r.option.nodeScaleRatio,a=t.scaleX,n=t.getZoom(),s=(n-1)*e+1;return s/a}function fg(r){var t=r.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var w6=Math.PI,Fj=[];function IA(r,t,e,a){var n=r.coordinateSystem;if(!(n&&n.type!=="view")){var s=n.getBoundingRect(),l=r.getData(),o=l.graph,c=s.width/2+s.x,u=s.height/2+s.y,d=Math.min(s.width,s.height)/2,h=l.count();if(l.setLayout({cx:c,cy:u}),!!h){if(e){var p=n.pointToData(a),g=p[0],v=p[1],y=[g-c,v-u];Ou(y,y),vg(y,y,d),e.setLayout([c+y[0],u+y[1]],!0);var x=r.get(["circular","rotateLabel"]);RH(e,x,c,u)}Rce[t](r,o,l,d,c,u,h),o.eachEdge(function(b,N){var w=fn(b.getModel().get(["lineStyle","curveness"]),RA(b,r,N),0),S=yi(b.node1.getLayout()),T=yi(b.node2.getLayout()),A,C=(S[0]+T[0])/2,M=(S[1]+T[1])/2;+w&&(w*=3,A=[c*w+C*(1-w),u*w+M*(1-w)]),b.setLayout([S,T,A])})}}}var Rce={value:function(r,t,e,a,n,s,l){var o=0,c=e.getSum("value"),u=Math.PI*2/(c||l);t.eachNode(function(d){var h=d.getValue("value"),p=u*(c?h:1)/2;o+=p,d.setLayout([a*Math.cos(o)+n,a*Math.sin(o)+s]),o+=p})},symbolSize:function(r,t,e,a,n,s,l){var o=0;Fj.length=l;var c=hg(r);t.eachNode(function(h){var p=fg(h);isNaN(p)&&(p=2),p<0&&(p=0),p*=c;var g=Math.asin(p/2/a);isNaN(g)&&(g=w6/2),Fj[h.dataIndex]=g,o+=g*2});var u=(2*w6-o)/l/2,d=0;t.eachNode(function(h){var p=u+Fj[h.dataIndex];d+=p,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([a*Math.cos(d)+n,a*Math.sin(d)+s]),d+=p})}};function RH(r,t,e,a){var n=r.getGraphicEl();if(n){var s=r.getModel(),l=s.get(["label","rotate"])||0,o=n.getSymbolPath();if(t){var c=r.getLayout(),u=Math.atan2(c[1]-a,c[0]-e);u<0&&(u=Math.PI*2+u);var d=c[0]<e;d&&(u=u-Math.PI);var h=d?"left":"right";o.setTextConfig({rotation:-u,position:h,origin:"center"});var p=o.ensureState("emphasis");ie(p.textConfig||(p.textConfig={}),{position:h})}else o.setTextConfig({rotation:l*=Math.PI/180})}}function Lce(r){r.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&IA(t,"symbolSize")})}var Xd=Xx;function Ice(r,t,e){for(var a=r,n=t,s=e.rect,l=s.width,o=s.height,c=[s.x+l/2,s.y+o/2],u=e.gravity==null?.1:e.gravity,d=0;d<a.length;d++){var h=a[d];h.p||(h.p=Yo(l*(Math.random()-.5)+c[0],o*(Math.random()-.5)+c[1])),h.pp=yi(h.p),h.edges=null}var p=e.friction==null?.6:e.friction,g=p,v,y;return{warmUp:function(){g=p*.8},setFixed:function(x){a[x].fixed=!0},setUnfixed:function(x){a[x].fixed=!1},beforeStep:function(x){v=x},afterStep:function(x){y=x},step:function(x){v&&v(a,n);for(var b=[],N=a.length,w=0;w<n.length;w++){var S=n[w];if(!S.ignoreForceLayout){var T=S.n1,A=S.n2;_o(b,A.p,T.p);var C=Pg(b)-S.d,M=A.w/(T.w+A.w);isNaN(M)&&(M=0),Ou(b,b),!T.fixed&&Xd(T.p,T.p,b,M*C*g),!A.fixed&&Xd(A.p,A.p,b,-(1-M)*C*g)}}for(var w=0;w<N;w++){var R=a[w];R.fixed||(_o(b,c,R.p),Xd(R.p,R.p,b,u*g))}for(var w=0;w<N;w++)for(var T=a[w],k=w+1;k<N;k++){var A=a[k];_o(b,A.p,T.p);var C=Pg(b);C===0&&(gb(b,Math.random()-.5,Math.random()-.5),C=1);var L=(T.rep+A.rep)/C/C;!T.fixed&&Xd(T.pp,T.pp,b,L),!A.fixed&&Xd(A.pp,A.pp,b,-L)}for(var O=[],w=0;w<N;w++){var R=a[w];R.fixed||(_o(O,R.p,R.pp),Xd(R.p,R.p,O,g),Ia(R.pp,R.p))}g=g*.992;var z=g<.01;y&&y(a,n,z),x&&x(z)}}}function kce(r){r.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view"))if(t.get("layout")==="force"){var a=t.preservedPoints||{},n=t.getGraph(),s=n.data,l=n.edgeData,o=t.getModel("force"),c=o.get("initLayout");t.preservedPoints?s.each(function(w){var S=s.getId(w);s.setItemLayout(w,a[S]||[NaN,NaN])}):!c||c==="none"?MH(t):c==="circular"&&IA(t,"value");var u=s.getDataExtent("value"),d=l.getDataExtent("value"),h=o.get("repulsion"),p=o.get("edgeLength"),g=de(h)?h:[h,h],v=de(p)?p:[p,p];v=[v[1],v[0]];var y=s.mapArray("value",function(w,S){var T=s.getItemLayout(S),A=Tt(w,u,g);return isNaN(A)&&(A=(g[0]+g[1])/2),{w:A,rep:A,fixed:s.getItemModel(S).get("fixed"),p:!T||isNaN(T[0])||isNaN(T[1])?null:T}}),x=l.mapArray("value",function(w,S){var T=n.getEdgeByIndex(S),A=Tt(w,d,v);isNaN(A)&&(A=(v[0]+v[1])/2);var C=T.getModel(),M=fn(T.getModel().get(["lineStyle","curveness"]),-RA(T,t,S,!0),0);return{n1:y[T.node1.dataIndex],n2:y[T.node2.dataIndex],d:A,curveness:M,ignoreForceLayout:C.get("ignoreForceLayout")}}),b=e.getBoundingRect(),N=Ice(y,x,{rect:b,gravity:o.get("gravity"),friction:o.get("friction")});N.beforeStep(function(w,S){for(var T=0,A=w.length;T<A;T++)w[T].fixed&&Ia(w[T].p,n.getNodeByIndex(T).getLayout())}),N.afterStep(function(w,S,T){for(var A=0,C=w.length;A<C;A++)w[A].fixed||n.getNodeByIndex(A).setLayout(w[A].p),a[s.getId(A)]=w[A].p;for(var A=0,C=S.length;A<C;A++){var M=S[A],R=n.getEdgeByIndex(A),k=M.n1.p,L=M.n2.p,O=R.getLayout();O=O?O.slice():[],O[0]=O[0]||[],O[1]=O[1]||[],Ia(O[0],k),Ia(O[1],L),+M.curveness&&(O[2]=[(k[0]+L[0])/2-(k[1]-L[1])*M.curveness,(k[1]+L[1])/2-(L[0]-k[0])*M.curveness]),R.setLayout(O)}}),t.forceLayout=N,t.preservedPoints=a,N.step()}else t.forceLayout=null})}function Oce(r,t,e){var a=Kr(r,t),n=ie(r.getBoxLayoutParams(),{aspect:e}),s=rr(n,a.refContainer);return iB(r,s,e)}function Pce(r,t){var e=[];return r.eachSeriesByType("graph",function(a){Im({targetModel:a,coordSysType:"view",coordSysProvider:n,isDefaultDataCoordSys:!0});function n(){var s=a.getData(),l=s.mapArray(function(v){var y=s.getItemModel(v);return[+y.get("x"),+y.get("y")]}),o=[],c=[];wb(l,o,c),c[0]-o[0]===0&&(c[0]+=1,o[0]-=1),c[1]-o[1]===0&&(c[1]+=1,o[1]-=1);var u=(c[0]-o[0])/(c[1]-o[1]),d=Oce(a,t,u);isNaN(u)&&(o=[d.x,d.y],c=[d.x+d.width,d.y+d.height]);var h=c[0]-o[0],p=c[1]-o[1],g=new Fu(null,{api:t,ecModel:r});return g.zoomLimit=a.get("scaleLimit"),g.setBoundingRect(o[0],o[1],h,p),g.setViewRect(d.x,d.y,d.width,d.height),g.setCenter(a.get("center")),g.setZoom(a.get("zoom")),e.push(g),g}}),e}var S6=Tr.prototype,Yj=ef.prototype,LH=(function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r})();(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(LH);function Wj(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var IH=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-line",a}return t.prototype.getDefaultStyle=function(){return{stroke:ee.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new LH},t.prototype.buildPath=function(e,a){Wj(a)?S6.buildPath.call(this,e,a):Yj.buildPath.call(this,e,a)},t.prototype.pointAt=function(e){return Wj(this.shape)?S6.pointAt.call(this,e):Yj.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var a=this.shape,n=Wj(a)?[a.x2-a.x1,a.y2-a.y1]:Yj.tangentAt.call(this,e);return Ou(n,n)},t})(ht),$j=["fromSymbol","toSymbol"];function C6(r){return"_"+r+"Type"}function T6(r,t,e){var a=t.getItemVisual(e,r);if(!a||a==="none")return a;var n=t.getItemVisual(e,r+"Size"),s=t.getItemVisual(e,r+"Rotate"),l=t.getItemVisual(e,r+"Offset"),o=t.getItemVisual(e,r+"KeepAspect"),c=uf(n),u=Hu(l||0,c);return a+c+u+(s||"")+(o||"")}function A6(r,t,e){var a=t.getItemVisual(e,r);if(!(!a||a==="none")){var n=t.getItemVisual(e,r+"Size"),s=t.getItemVisual(e,r+"Rotate"),l=t.getItemVisual(e,r+"Offset"),o=t.getItemVisual(e,r+"KeepAspect"),c=uf(n),u=Hu(l||0,c),d=Er(a,-c[0]/2+u[0],-c[1]/2+u[1],c[0],c[1],null,o);return d.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,d.name=r,d}}function zce(r){var t=new IH({name:"line",subPixelOptimize:!0});return K2(t.shape,r),t}function K2(r,t){r.x1=t[0][0],r.y1=t[0][1],r.x2=t[1][0],r.y2=t[1][1],r.percent=1;var e=t[2];e?(r.cpx1=e[0],r.cpy1=e[1]):(r.cpx1=NaN,r.cpy1=NaN)}var kA=(function(r){re(t,r);function t(e,a,n){var s=r.call(this)||this;return s._createLine(e,a,n),s}return t.prototype._createLine=function(e,a,n){var s=e.hostModel,l=e.getItemLayout(a),o=e.getItemVisual(a,"z2"),c=zce(l);c.shape.percent=0,Kt(c,{z2:Me(o,0),shape:{percent:1}},s,a),this.add(c),B($j,function(u){var d=A6(u,e,a);this.add(d),this[C6(u)]=T6(u,e,a)},this),this._updateCommonStl(e,a,n)},t.prototype.updateData=function(e,a,n){var s=e.hostModel,l=this.childOfName("line"),o=e.getItemLayout(a),c={shape:{}};K2(c.shape,o),Nt(l,c,s,a),B($j,function(u){var d=T6(u,e,a),h=C6(u);if(this[h]!==d){this.remove(this.childOfName(u));var p=A6(u,e,a);this.add(p)}this[h]=d},this),this._updateCommonStl(e,a,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,a,n){var s=e.hostModel,l=this.childOfName("line"),o=n&&n.emphasisLineStyle,c=n&&n.blurLineStyle,u=n&&n.selectLineStyle,d=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,p=n&&n.focus,g=n&&n.blurScope;if(!n||e.hasItemOption){var v=e.getItemModel(a),y=v.getModel("emphasis");o=y.getModel("lineStyle").getLineStyle(),c=v.getModel(["blur","lineStyle"]).getLineStyle(),u=v.getModel(["select","lineStyle"]).getLineStyle(),h=y.get("disabled"),p=y.get("focus"),g=y.get("blurScope"),d=Zr(v)}var x=e.getItemVisual(a,"style"),b=x.stroke;l.useStyle(x),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=o,l.ensureState("blur").style=c,l.ensureState("select").style=u,B($j,function(A){var C=this.childOfName(A);if(C){C.setColor(b),C.style.opacity=x.opacity;for(var M=0;M<Za.length;M++){var R=Za[M],k=l.getState(R);if(k){var L=k.style||{},O=C.ensureState(R),z=O.style||(O.style={});L.stroke!=null&&(z[C.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&(z.opacity=L.opacity)}}C.markRedraw()}},this);var N=s.getRawValue(a);ia(this,d,{labelDataIndex:a,labelFetcher:{getFormattedLabel:function(A,C){return s.getFormattedLabel(A,C,e.dataType)}},inheritColor:b||ee.color.neutral99,defaultOpacity:x.opacity,defaultText:(N==null?e.getName(a):isFinite(N)?Cr(N):N)+""});var w=this.getTextContent();if(w){var S=d.normal;w.__align=w.style.align,w.__verticalAlign=w.style.verticalAlign,w.__position=S.get("position")||"middle";var T=S.get("distance");de(T)||(T=[T,T]),w.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),nr(this,p,g,h)},t.prototype.highlight=function(){Sl(this)},t.prototype.downplay=function(){Cl(this)},t.prototype.updateLayout=function(e,a){this.setLinePoints(e.getItemLayout(a))},t.prototype.setLinePoints=function(e){var a=this.childOfName("line");K2(a.shape,e),a.dirty()},t.prototype.beforeUpdate=function(){var e=this,a=e.childOfName("fromSymbol"),n=e.childOfName("toSymbol"),s=e.getTextContent();if(!a&&!n&&(!s||s.ignore))return;for(var l=1,o=this.parent;o;)o.scaleX&&(l/=o.scaleX),o=o.parent;var c=e.childOfName("line");if(!this.__dirty&&!c.__dirty)return;var u=c.shape.percent,d=c.pointAt(0),h=c.pointAt(u),p=_o([],h,d);Ou(p,p);function g(k,L){var O=k.__specifiedRotation;if(O==null){var z=c.tangentAt(L);k.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2(z[1],z[0]))}else k.attr("rotation",O)}if(a&&(a.setPosition(d),g(a,0),a.scaleX=a.scaleY=l*u,a.markRedraw()),n&&(n.setPosition(h),g(n,1),n.scaleX=n.scaleY=l*u,n.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var v=void 0,y=void 0,x=s.__labelDistance,b=x[0]*l,N=x[1]*l,w=u/2,S=c.tangentAt(w),T=[S[1],-S[0]],A=c.pointAt(w);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var C=S[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var M=-Math.atan2(S[1],S[0]);h[0]<d[0]&&(M=Math.PI+M),s.rotation=M}var R=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":R=-N,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":R=N,y="top";break;default:R=0,y="middle"}switch(s.__position){case"end":s.x=p[0]*b+h[0],s.y=p[1]*N+h[1],v=p[0]>.8?"left":p[0]<-.8?"right":"center",y=p[1]>.8?"top":p[1]<-.8?"bottom":"middle";break;case"start":s.x=-p[0]*b+d[0],s.y=-p[1]*N+d[1],v=p[0]>.8?"right":p[0]<-.8?"left":"center",y=p[1]>.8?"bottom":p[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=b*C+d[0],s.y=d[1]+R,v=S[0]<0?"right":"left",s.originX=-b*C,s.originY=-R;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=A[0],s.y=A[1]+R,v="center",s.originY=-R;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-b*C+h[0],s.y=h[1]+R,v=S[0]>=0?"right":"left",s.originX=b*C,s.originY=-R;break}s.scaleX=s.scaleY=l,s.setStyle({verticalAlign:s.__verticalAlign||y,align:s.__align||v})}},t})(Pe),OA=(function(){function r(t){this.group=new Pe,this._LineCtor=t||kA}return r.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var a=this,n=a.group,s=a._lineData;a._lineData=t,s||n.removeAll();var l=E6(t);t.diff(s).add(function(o){e._doAdd(t,o,l)}).update(function(o,c){e._doUpdate(s,t,c,o,l)}).remove(function(o){n.remove(s.getItemGraphicEl(o))}).execute()},r.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,a){e.updateLayout(t,a)},this)},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=E6(t),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function a(o){!o.isGroup&&!Bce(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var s=e.getItemLayout(n);if(qj(s)){var l=new this._LineCtor(e,n,this._seriesScope);l.traverse(a),this.group.add(l),e.setItemGraphicEl(n,l),this._progressiveEls.push(l)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(t){Wo(this._progressiveEls||this.group,t)},r.prototype._doAdd=function(t,e,a){var n=t.getItemLayout(e);if(qj(n)){var s=new this._LineCtor(t,e,a);t.setItemGraphicEl(e,s),this.group.add(s)}},r.prototype._doUpdate=function(t,e,a,n,s){var l=t.getItemGraphicEl(a);if(!qj(e.getItemLayout(n))){this.group.remove(l);return}l?l.updateData(e,n,s):l=new this._LineCtor(e,n,s),e.setItemGraphicEl(n,l),this.group.add(l)},r})();function Bce(r){return r.animators&&r.animators.length>0}function E6(r){var t=r.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:Zr(t)}}function D6(r){return isNaN(r[0])||isNaN(r[1])}function qj(r){return r&&!D6(r[0])&&!D6(r[1])}var Xj=[],Zj=[],Kj=[],Zd=pa,Qj=Ao,M6=Math.abs;function R6(r,t,e){for(var a=r[0],n=r[1],s=r[2],l=1/0,o,c=e*e,u=.1,d=.1;d<=.9;d+=.1){Xj[0]=Zd(a[0],n[0],s[0],d),Xj[1]=Zd(a[1],n[1],s[1],d);var h=M6(Qj(Xj,t)-c);h<l&&(l=h,o=d)}for(var p=0;p<32;p++){var g=o+u;Zj[0]=Zd(a[0],n[0],s[0],o),Zj[1]=Zd(a[1],n[1],s[1],o),Kj[0]=Zd(a[0],n[0],s[0],g),Kj[1]=Zd(a[1],n[1],s[1],g);var h=Qj(Zj,t)-c;if(M6(h)<.01)break;var v=Qj(Kj,t)-c;u/=2,h<0?v>=0?o=o+u:o=o-u:v>=0?o=o-u:o=o+u}return o}function Jj(r,t){var e=[],a=zg,n=[[],[],[]],s=[[],[]],l=[];t/=2,r.eachEdge(function(o,c){var u=o.getLayout(),d=o.getVisual("fromSymbol"),h=o.getVisual("toSymbol");u.__original||(u.__original=[yi(u[0]),yi(u[1])],u[2]&&u.__original.push(yi(u[2])));var p=u.__original;if(u[2]!=null){if(Ia(n[0],p[0]),Ia(n[1],p[2]),Ia(n[2],p[1]),d&&d!=="none"){var g=fg(o.node1),v=R6(n,p[0],g*t);a(n[0][0],n[1][0],n[2][0],v,e),n[0][0]=e[3],n[1][0]=e[4],a(n[0][1],n[1][1],n[2][1],v,e),n[0][1]=e[3],n[1][1]=e[4]}if(h&&h!=="none"){var g=fg(o.node2),v=R6(n,p[1],g*t);a(n[0][0],n[1][0],n[2][0],v,e),n[1][0]=e[1],n[2][0]=e[2],a(n[0][1],n[1][1],n[2][1],v,e),n[1][1]=e[1],n[2][1]=e[2]}Ia(u[0],n[0]),Ia(u[1],n[2]),Ia(u[2],n[1])}else{if(Ia(s[0],p[0]),Ia(s[1],p[1]),_o(l,s[1],s[0]),Ou(l,l),d&&d!=="none"){var g=fg(o.node1);Xx(s[0],s[0],l,g*t)}if(h&&h!=="none"){var g=fg(o.node2);Xx(s[1],s[1],l,-g*t)}Ia(u[0],s[0]),Ia(u[1],s[1])}})}var kH=ut();function Vce(r){if(r)return kH(r).bridge}function L6(r,t){r&&(kH(r).bridge=t)}function I6(r){return r.type==="view"}var Hce=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){var n=new zm,s=new OA,l=this.group,o=new Pe;this._controller=new Uu(a.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(s.group),l.add(o),this._symbolDraw=n,this._lineDraw=s,this._mainGroup=o,this._firstRender=!0},t.prototype.render=function(e,a,n){var s=this,l=e.coordinateSystem,o=!1;this._model=e,this._api=n,this._active=!0;var c=this._getThumbnailInfo();c&&c.bridge.reset(n);var u=this._symbolDraw,d=this._lineDraw;if(I6(l)){var h={x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY};this._firstRender?this._mainGroup.attr(h):Nt(this._mainGroup,h,e)}Jj(e.getGraph(),hg(e));var p=e.getData();u.updateData(p);var g=e.getEdgeData();d.updateData(g),this._updateNodeAndLinkScale(),this._updateController(null,e,n),clearTimeout(this._layoutTimeout);var v=e.forceLayout,y=e.get(["force","layoutAnimation"]);v&&(o=!0,this._startForceLayoutIteration(v,n,y));var x=e.get("layout");p.graph.eachNode(function(S){var T=S.dataIndex,A=S.getGraphicEl(),C=S.getModel();if(A){A.off("drag").off("dragend");var M=C.get("draggable");M&&A.on("drag",function(k){switch(x){case"force":v.warmUp(),!s._layouting&&s._startForceLayoutIteration(v,n,y),v.setFixed(T),p.setItemLayout(T,[A.x,A.y]);break;case"circular":p.setItemLayout(T,[A.x,A.y]),S.setLayout({fixed:!0},!0),IA(e,"symbolSize",S,[k.offsetX,k.offsetY]),s.updateLayout(e);break;case"none":default:p.setItemLayout(T,[A.x,A.y]),LA(e.getGraph(),e),s.updateLayout(e);break}}).on("dragend",function(){v&&v.setUnfixed(T)}),A.setDraggable(M,!!C.get("cursor"));var R=C.get(["emphasis","focus"]);R==="adjacency"&&(Xe(A).focus=S.getAdjacentDataIndices())}}),p.graph.eachEdge(function(S){var T=S.getGraphicEl(),A=S.getModel().get(["emphasis","focus"]);T&&A==="adjacency"&&(Xe(T).focus={edge:[S.dataIndex],node:[S.node1.dataIndex,S.node2.dataIndex]})});var b=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),N=p.getLayout("cx"),w=p.getLayout("cy");p.graph.eachNode(function(S){RH(S,b,N,w)}),this._firstRender=!1,o||this._renderThumbnail(e,n,this._symbolDraw,this._lineDraw)},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,a,n){var s=this,l=!1;(function o(){e.step(function(c){s.updateLayout(s._model),(c||!l)&&(l=!0,s._renderThumbnail(s._model,a,s._symbolDraw,s._lineDraw)),(s._layouting=!c)&&(n?s._layoutTimeout=setTimeout(o,16):o())})})()},t.prototype._updateController=function(e,a,n){var s=this._controller,l=this._controllerHost,o=a.coordinateSystem;if(!I6(o)){s.disable();return}s.enable(a.get("roam"),{api:n,zInfo:{component:a},triggerInfo:{roamTrigger:a.get("roamTrigger"),isInSelf:function(c,u,d){return o.containPoint([u,d])},isInClip:function(c,u,d){return!e||e.contain(u,d)}}}),l.zoomLimit=a.get("scaleLimit"),l.zoom=o.getZoom(),s.off("pan").off("zoom").on("pan",function(c){n.dispatchAction({seriesId:a.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){n.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY})})},t.prototype.updateViewOnPan=function(e,a,n){this._active&&(wA(this._controllerHost,n.dx,n.dy),this._updateThumbnailWindow())},t.prototype.updateViewOnZoom=function(e,a,n){this._active&&(SA(this._controllerHost,n.zoom,n.originX,n.originY),this._updateNodeAndLinkScale(),Jj(e.getGraph(),hg(e)),this._lineDraw.updateLayout(),a.updateLabelLayout(),this._updateThumbnailWindow())},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,a=e.getData(),n=hg(e);a.eachItemGraphicEl(function(s,l){s&&s.setSymbolScale(n)})},t.prototype.updateLayout=function(e){this._active&&(Jj(e.getGraph(),hg(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout())},t.prototype.remove=function(){this._active=!1,clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove(),this._controller&&this._controller.disable()},t.prototype._getThumbnailInfo=function(){var e=this._model,a=e.coordinateSystem;if(a.type==="view"){var n=Vce(e);if(n)return{bridge:n,coordSys:a}}},t.prototype._updateThumbnailWindow=function(){var e=this._getThumbnailInfo();e&&e.bridge.updateWindow(e.coordSys.transform,this._api)},t.prototype._renderThumbnail=function(e,a,n,s){var l=this._getThumbnailInfo();if(l){var o=new Pe,c=n.group.children(),u=s.group.children(),d=new Pe,h=new Pe;o.add(h),o.add(d);for(var p=0;p<c.length;p++){var g=c[p],v=g.children()[0],y=g.x,x=g.y,b=Oe(v.shape),N=ie(b,{width:v.scaleX,height:v.scaleY,x:y-v.scaleX/2,y:x-v.scaleY/2}),w=Oe(v.style),S=new v.constructor({shape:N,style:w,z2:151});h.add(S)}for(var p=0;p<u.length;p++){var g=u[p],T=g.children()[0],w=Oe(T.style),N=Oe(T.shape),A=new IH({style:w,shape:N,z2:151});d.add(A)}l.bridge.renderContent({api:a,roamType:e.get("roam"),viewportRect:null,group:o,targetTrans:l.coordSys.transform})}},t.type="graph",t})(Pt);function Kd(r){return"_EC_"+r}var Gce=(function(){function r(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(t,e){t=t==null?""+e:""+t;var a=this._nodesMap;if(!a[Kd(t)]){var n=new Wc(t,e);return n.hostGraph=this,this.nodes.push(n),a[Kd(t)]=n,n}},r.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},r.prototype.getNodeById=function(t){return this._nodesMap[Kd(t)]},r.prototype.addEdge=function(t,e,a){var n=this._nodesMap,s=this._edgesMap;if(xt(t)&&(t=this.nodes[t]),xt(e)&&(e=this.nodes[e]),t instanceof Wc||(t=n[Kd(t)]),e instanceof Wc||(e=n[Kd(e)]),!(!t||!e)){var l=t.id+"-"+e.id,o=new OH(t,e,a);return o.hostGraph=this,this._directed&&(t.outEdges.push(o),e.inEdges.push(o)),t.edges.push(o),t!==e&&e.edges.push(o),this.edges.push(o),s[l]=o,o}},r.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},r.prototype.getEdge=function(t,e){t instanceof Wc&&(t=t.id),e instanceof Wc&&(e=e.id);var a=this._edgesMap;return this._directed?a[t+"-"+e]:a[t+"-"+e]||a[e+"-"+t]},r.prototype.eachNode=function(t,e){for(var a=this.nodes,n=a.length,s=0;s<n;s++)a[s].dataIndex>=0&&t.call(e,a[s],s)},r.prototype.eachEdge=function(t,e){for(var a=this.edges,n=a.length,s=0;s<n;s++)a[s].dataIndex>=0&&a[s].node1.dataIndex>=0&&a[s].node2.dataIndex>=0&&t.call(e,a[s],s)},r.prototype.breadthFirstTraverse=function(t,e,a,n){if(e instanceof Wc||(e=this._nodesMap[Kd(e)]),!!e){for(var s=a==="out"?"outEdges":a==="in"?"inEdges":"edges",l=0;l<this.nodes.length;l++)this.nodes[l].__visited=!1;if(!t.call(n,e,null))for(var o=[e];o.length;)for(var c=o.shift(),u=c[s],l=0;l<u.length;l++){var d=u[l],h=d.node1===c?d.node2:d.node1;if(!h.__visited){if(t.call(n,h,c))return;o.push(h),h.__visited=!0}}}},r.prototype.update=function(){for(var t=this.data,e=this.edgeData,a=this.nodes,n=this.edges,s=0,l=a.length;s<l;s++)a[s].dataIndex=-1;for(var s=0,l=t.count();s<l;s++)a[t.getRawIndex(s)].dataIndex=s;e.filterSelf(function(o){var c=n[e.getRawIndex(o)];return c.node1.dataIndex>=0&&c.node2.dataIndex>=0});for(var s=0,l=n.length;s<l;s++)n[s].dataIndex=-1;for(var s=0,l=e.count();s<l;s++)n[e.getRawIndex(s)].dataIndex=s},r.prototype.clone=function(){for(var t=new r(this._directed),e=this.nodes,a=this.edges,n=0;n<e.length;n++)t.addNode(e[n].id,e[n].dataIndex);for(var n=0;n<a.length;n++){var s=a[n];t.addEdge(s.node1.id,s.node2.id,s.dataIndex)}return t},r})(),Wc=(function(){function r(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var a=this.edges[e];a.dataIndex<0||(t.edge.push(a.dataIndex),t.node.push(a.node1.dataIndex,a.node2.dataIndex))}return t},r.prototype.getTrajectoryDataIndices=function(){for(var t=De(),e=De(),a=0,n=this.edges.length;a<n;a++){var s=this.edges[a];if(!(s.dataIndex<0)){t.set(s.dataIndex,!0);for(var l=[s.node1],o=[s.node2],c=0;c<l.length;){var u=l[c];c++,e.set(u.dataIndex,!0);for(var d=u.inEdges,h=0,p=d.length,g=void 0,v=void 0;h<p;h++)g=d[h],v=g.dataIndex,v>=0&&!t.hasKey(v)&&(t.set(v,!0),l.push(g.node1))}for(c=0;c<o.length;){var y=o[c];c++,e.set(y.dataIndex,!0);for(var x=y.outEdges,h=0,b=x.length,N=void 0,w=void 0;h<b;h++)N=x[h],w=N.dataIndex,w>=0&&!t.hasKey(w)&&(t.set(w,!0),o.push(N.node2))}}}return{edge:t.keys(),node:e.keys()}},r})(),OH=(function(){function r(t,e,a){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=a??-1}return r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.edgeData.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var t=De(),e=De();t.set(this.dataIndex,!0);for(var a=[this.node1],n=[this.node2],s=0;s<a.length;){var l=a[s];s++,e.set(l.dataIndex,!0);for(var o=l.inEdges,c=0,u=o.length,d=void 0,h=void 0;c<u;c++)d=l.inEdges[c],h=d.dataIndex,h>=0&&!t.hasKey(h)&&(t.set(h,!0),a.push(d.node1))}for(s=0;s<n.length;){var p=n[s];s++,e.set(p.dataIndex,!0);for(var g=p.outEdges,c=0,u=g.length,v=void 0,y=void 0;c<u;c++)v=p.outEdges[c],y=v.dataIndex,y>=0&&!t.hasKey(y)&&(t.set(y,!0),n.push(v.node2))}return{edge:t.keys(),node:e.keys()}},r})();function PH(r,t){return{getValue:function(e){var a=this[r][t];return a.getStore().get(a.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,a){this.dataIndex>=0&&this[r][t].setItemVisual(this.dataIndex,e,a)},getVisual:function(e){return this[r][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,a){this.dataIndex>=0&&this[r][t].setItemLayout(this.dataIndex,e,a)},getLayout:function(){return this[r][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][t].getRawIndex(this.dataIndex)}}}yr(Wc,PH("hostGraph","data"));yr(OH,PH("hostGraph","edgeData"));function PA(r,t,e,a,n){for(var s=new Gce(a),l=0;l<r.length;l++)s.addNode(ga(r[l].id,r[l].name,l),l);for(var o=[],c=[],u=0,l=0;l<t.length;l++){var d=t[l],h=d.source,p=d.target;s.addEdge(h,p,u)&&(c.push(d),o.push(ga($r(d.id,null),h+" > "+p)),u++)}var g=e.get("coordinateSystem"),v;if(g==="cartesian2d"||g==="polar"||g==="matrix")v=Di(r,e);else{var y=lf.get(g),x=y?y.dimensions||[]:[];tt(x,"value")<0&&x.concat(["value"]);var b=df(r,{coordDimensions:x,encodeDefine:e.getEncode()}).dimensions;v=new Ha(b,e),v.initData(r)}var N=new Ha(["value"],e);return N.initData(c,o),n&&n(v,N),vH({mainData:v,struct:s,structAttr:"graph",datas:{node:v,edge:N},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var Uce=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments);var a=this;function n(){return a._categoriesData}this.legendVisualProvider=new mf(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){r.prototype.mergeDefaultAndTheme.apply(this,arguments),wu(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,a){var n=e.edges||e.links||[],s=e.data||e.nodes||[],l=this;if(s&&n){Ece(this);var o=PA(s,n,this,!0,c);return B(o.edges,function(u){Dce(u.node1,u.node2,this,u.dataIndex)},this),o.data}function c(u,d){u.wrapMethod("getItemModel",function(v){var y=l._categoriesModels,x=v.getShallow("category"),b=y[x];return b&&(b.parentModel=v.parentModel,v.parentModel=b),v});var h=dt.prototype.getModel;function p(v,y){var x=h.call(this,v,y);return x.resolveParentPath=g,x}d.wrapMethod("getItemModel",function(v){return v.resolveParentPath=g,v.getModel=p,v});function g(v){if(v&&(v[0]==="label"||v[1]==="label")){var y=v.slice();return v[0]==="label"?y[0]="edgeLabel":v[1]==="label"&&(y[1]="edgeLabel"),y}return v}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,a,n){if(n==="edge"){var s=this.getData(),l=this.getDataParams(e,n),o=s.graph.getEdgeByIndex(e),c=s.getName(o.node1.dataIndex),u=s.getName(o.node2.dataIndex),d=[];return c!=null&&d.push(c),u!=null&&d.push(u),Br("nameValue",{name:d.join(" > "),value:l.value,noValue:l.value==null})}var h=VB({series:this,dataIndex:e,multipleSeries:a});return h},t.prototype._updateCategoriesData=function(){var e=pe(this.option.categories||[],function(n){return n.value!=null?n:ie({value:0},n)}),a=new Ha(["value"],this);a.initData(e),this._categoriesData=a,this._categoriesModels=a.mapArray(function(n){return a.getItemModel(n)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:ee.color.neutral50,width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:ee.color.primary}}},t})(zt);function Fce(r){r.registerChartView(Hce),r.registerSeriesModel(Uce),r.registerProcessor(wce),r.registerVisual(Sce),r.registerVisual(Cce),r.registerLayout(Mce),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,Lce),r.registerLayout(kce),r.registerCoordinateSystem("graphView",{dimensions:Fu.dimensions,create:Pce}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},vr),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},vr),r.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(t,e,a){e.eachComponent({mainType:"series",query:t},function(n){var s=a.getViewOfSeriesModel(n);s&&(t.dx!=null&&t.dy!=null&&s.updateViewOnPan(n,a,t),t.zoom!=null&&t.originX!=null&&t.originY!=null&&s.updateViewOnZoom(n,a,t));var l=n.coordinateSystem,o=Ub(l,t,n.get("scaleLimit"));n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var k6=(function(r){re(t,r);function t(e,a,n){var s=r.call(this)||this;Xe(s).dataType="node",s.z2=2;var l=new vt;return s.setTextContent(l),s.updateData(e,a,n,!0),s}return t.prototype.updateData=function(e,a,n,s){var l=this,o=e.graph.getNodeByIndex(a),c=e.hostModel,u=o.getModel(),d=u.getModel("emphasis"),h=e.getItemLayout(a),p=ie(vi(u.getModel("itemStyle"),h,!0),h),g=this;if(isNaN(p.startAngle)){g.setShape(p);return}s?g.setShape(p):Nt(g,{shape:p},c,a);var v=ie(vi(u.getModel("itemStyle"),h,!0),h);l.setShape(v),l.useStyle(e.getItemVisual(a,"style")),Xr(l,u),this._updateLabel(c,u,o),e.setItemGraphicEl(a,g),Xr(g,u,"itemStyle");var y=d.get("focus");nr(this,y==="adjacency"?o.getAdjacentDataIndices():y,d.get("blurScope"),d.get("disabled"))},t.prototype._updateLabel=function(e,a,n){var s=this.getTextContent(),l=n.getLayout(),o=(l.startAngle+l.endAngle)/2,c=Math.cos(o),u=Math.sin(o),d=a.getModel("label");s.ignore=!d.get("show");var h=Zr(a),p=n.getVisual("style");ia(s,h,{labelFetcher:{getFormattedLabel:function(N,w,S,T,A,C){return e.getFormattedLabel(N,w,"node",T,fn(A,h.normal&&h.normal.get("formatter"),a.get("name")),C)}},labelDataIndex:n.dataIndex,defaultText:n.dataIndex+"",inheritColor:p.fill,defaultOpacity:p.opacity,defaultOutsidePosition:"startArc"});var g=d.get("position")||"outside",v=d.get("distance")||0,y;g==="outside"?y=l.r+v:y=(l.r+l.r0)/2,this.textConfig={inside:g!=="outside"};var x=g!=="outside"?d.get("align")||"center":c>0?"left":"right",b=g!=="outside"?d.get("verticalAlign")||"middle":u>0?"top":"bottom";s.attr({x:c*y+l.cx,y:u*y+l.cy,rotation:0,style:{align:x,verticalAlign:b}})},t})(Da),Yce=(function(r){re(t,r);function t(e,a,n,s){var l=r.call(this)||this;return Xe(l).dataType="edge",l.updateData(e,a,n,s,!0),l}return t.prototype.buildPath=function(e,a){e.moveTo(a.s1[0],a.s1[1]);var n=.7,s=a.clockwise;e.arc(a.cx,a.cy,a.r,a.sStartAngle,a.sEndAngle,!s),e.bezierCurveTo((a.cx-a.s2[0])*n+a.s2[0],(a.cy-a.s2[1])*n+a.s2[1],(a.cx-a.t1[0])*n+a.t1[0],(a.cy-a.t1[1])*n+a.t1[1],a.t1[0],a.t1[1]),e.arc(a.cx,a.cy,a.r,a.tStartAngle,a.tEndAngle,!s),e.bezierCurveTo((a.cx-a.t2[0])*n+a.t2[0],(a.cy-a.t2[1])*n+a.t2[1],(a.cx-a.s1[0])*n+a.s1[0],(a.cy-a.s1[1])*n+a.s1[1],a.s1[0],a.s1[1]),e.closePath()},t.prototype.updateData=function(e,a,n,s,l){var o=e.hostModel,c=a.graph.getEdgeByIndex(n),u=c.getLayout(),d=c.node1.getModel(),h=a.getItemModel(c.dataIndex),p=h.getModel("lineStyle"),g=h.getModel("emphasis"),v=g.get("focus"),y=ie(vi(d.getModel("itemStyle"),u,!0),u),x=this;if(isNaN(y.sStartAngle)||isNaN(y.tStartAngle)){x.setShape(y);return}l?(x.setShape(y),O6(x,c,e,p)):(ps(x),O6(x,c,e,p),Nt(x,{shape:y},o,n)),nr(this,v==="adjacency"?c.getAdjacentDataIndices():v,g.get("blurScope"),g.get("disabled")),Xr(x,h,"lineStyle"),a.setItemGraphicEl(c.dataIndex,x)},t})(ht);function O6(r,t,e,a){var n=t.node1,s=t.node2,l=r.style;r.setStyle(a.getLineStyle());var o=a.get("color");switch(o){case"source":l.fill=e.getItemVisual(n.dataIndex,"style").fill,l.decal=n.getVisual("style").decal;break;case"target":l.fill=e.getItemVisual(s.dataIndex,"style").fill,l.decal=s.getVisual("style").decal;break;case"gradient":var c=e.getItemVisual(n.dataIndex,"style").fill,u=e.getItemVisual(s.dataIndex,"style").fill;if(je(c)&&je(u)){var d=r.shape,h=(d.s1[0]+d.s2[0])/2,p=(d.s1[1]+d.s2[1])/2,g=(d.t1[0]+d.t2[0])/2,v=(d.t1[1]+d.t2[1])/2;l.fill=new Pu(h,p,g,v,[{offset:0,color:c},{offset:1,color:u}],!0)}break}}var Wce=Math.PI/180,$ce=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){},t.prototype.render=function(e,a,n){var s=e.getData(),l=this._data,o=this.group,c=-e.get("startAngle")*Wce;if(s.diff(l).add(function(d){var h=s.getItemLayout(d);if(h){var p=new k6(s,d,c);Xe(p).dataIndex=d,o.add(p)}}).update(function(d,h){var p=l.getItemGraphicEl(h),g=s.getItemLayout(d);if(!g){p&&xl(p,e,h);return}p?p.updateData(s,d,c):p=new k6(s,d,c),o.add(p)}).remove(function(d){var h=l.getItemGraphicEl(d);h&&xl(h,e,d)}).execute(),!l){var u=e.get("center");this.group.scaleX=.01,this.group.scaleY=.01,this.group.originX=Ne(u[0],n.getWidth()),this.group.originY=Ne(u[1],n.getHeight()),Kt(this.group,{scaleX:1,scaleY:1},e)}this._data=s,this.renderEdges(e,c)},t.prototype.renderEdges=function(e,a){var n=e.getData(),s=e.getEdgeData(),l=this._edgeData,o=this.group;s.diff(l).add(function(c){var u=new Yce(n,s,c,a);Xe(u).dataIndex=c,o.add(u)}).update(function(c,u){var d=l.getItemGraphicEl(u);d.updateData(n,s,c,a),o.add(d)}).remove(function(c){var u=l.getItemGraphicEl(c);u&&xl(u,e,c)}).execute(),this._edgeData=s},t.prototype.dispose=function(){},t.type="chord",t})(Pt),qce=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this.legendVisualProvider=new mf(we(this.getData,this),we(this.getRawData,this))},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links)},t.prototype.getInitialData=function(e,a){var n=e.edges||e.links||[],s=e.data||e.nodes||[];if(s&&n){var l=PA(s,n,this,!0,o);return l.data}function o(c,u){var d=dt.prototype.getModel;function h(g,v){var y=d.call(this,g,v);return y.resolveParentPath=p,y}u.wrapMethod("getItemModel",function(g){return g.resolveParentPath=p,g.getModel=h,g});function p(g){if(g&&(g[0]==="label"||g[1]==="label")){var v=g.slice();return g[0]==="label"?v[0]="edgeLabel":g[1]==="label"&&(v[1]="edgeLabel"),v}return g}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,a,n){var s=this.getDataParams(e,n);if(n==="edge"){var l=this.getData(),o=l.graph.getEdgeByIndex(e),c=l.getName(o.node1.dataIndex),u=l.getName(o.node2.dataIndex),d=[];return c!=null&&d.push(c),u!=null&&d.push(u),Br("nameValue",{name:d.join(" > "),value:s.value,noValue:s.value==null})}return Br("nameValue",{name:s.name,value:s.value,noValue:s.value==null})},t.prototype.getDataParams=function(e,a){var n=r.prototype.getDataParams.call(this,e,a);if(a==="node"){var s=this.getData(),l=this.getGraph().getNodeByIndex(e);if(n.name==null&&(n.name=s.getName(e)),n.value==null){var o=l.getLayout().value;n.value=o}}return n},t.type="series.chord",t.defaultOption={z:2,coordinateSystem:"none",legendHoverLink:!0,colorBy:"data",left:0,top:0,right:0,bottom:0,width:null,height:null,center:["50%","50%"],radius:["70%","80%"],clockwise:!0,startAngle:90,endAngle:"auto",minAngle:0,padAngle:3,itemStyle:{borderRadius:[0,0,5,5]},lineStyle:{width:0,color:"source",opacity:.2},label:{show:!0,position:"outside",distance:5},emphasis:{focus:"adjacency",lineStyle:{opacity:.5}}},t})(zt),ew=Math.PI/180;function Xce(r,t){r.eachSeriesByType("chord",function(e){Zce(e,t)})}function Zce(r,t){var e=r.getData(),a=e.graph,n=r.getEdgeData(),s=n.count();if(s){var l=sB(r,t),o=l.cx,c=l.cy,u=l.r,d=l.r0,h=Math.max((r.get("padAngle")||0)*ew,0),p=Math.max((r.get("minAngle")||0)*ew,0),g=-r.get("startAngle")*ew,v=g+Math.PI*2,y=r.get("clockwise"),x=y?1:-1,b=[g,v];Sb(b,!y);var N=b[0],w=b[1],S=w-N,T=e.getSum("value")===0&&n.getSum("value")===0,A=[],C=0;a.eachEdge(function(Y){var X=T?1:Y.getValue("value");T&&(X>0||p)&&(C+=2);var q=Y.node1.dataIndex,G=Y.node2.dataIndex;A[q]=(A[q]||0)+X,A[G]=(A[G]||0)+X});var M=0;if(a.eachNode(function(Y){var X=Y.getValue("value");isNaN(X)||(A[Y.dataIndex]=Math.max(X,A[Y.dataIndex]||0)),!T&&(A[Y.dataIndex]>0||p)&&C++,M+=A[Y.dataIndex]||0}),!(C===0||M===0)){h*C>=Math.abs(S)&&(h=Math.max(0,(Math.abs(S)-p*C)/C)),(h+p)*C>=Math.abs(S)&&(p=(Math.abs(S)-h*C)/C);var R=(S-h*C*x)/M,k=0,L=0,O=0;a.eachNode(function(Y){var X=A[Y.dataIndex]||0,q=R*(M?X:1)*x;Math.abs(q)<p?k+=p-Math.abs(q):(L+=Math.abs(q)-p,O+=Math.abs(q)),Y.setLayout({angle:q,value:X})});var z=!1;if(k>L){var U=k/L;a.eachNode(function(Y){var X=Y.getLayout().angle;Math.abs(X)>=p?Y.setLayout({angle:X*U,ratio:U},!0):Y.setLayout({angle:p,ratio:p===0?1:X/p},!0)})}else a.eachNode(function(Y){if(!z){var X=Y.getLayout().angle,q=Math.min(X/O,1),G=q*k;X-G<p&&(z=!0)}});var H=k;a.eachNode(function(Y){if(!(H<=0)){var X=Y.getLayout().angle;if(X>p&&p>0){var q=z?1:Math.min(X/O,1),G=X-p,$=Math.min(G,Math.min(H,k*q));H-=$,Y.setLayout({angle:X-$,ratio:(X-$)/X},!0)}else p>0&&Y.setLayout({angle:p,ratio:X===0?1:p/X},!0)}});var P=N,F=[];a.eachNode(function(Y){var X=Math.max(Y.getLayout().angle,p);Y.setLayout({cx:o,cy:c,r0:d,r:u,startAngle:P,endAngle:P+X*x,clockwise:y},!0),F[Y.dataIndex]=P,P+=(X+h)*x}),a.eachEdge(function(Y){var X=T?1:Y.getValue("value"),q=R*(M?X:1)*x,G=Y.node1.dataIndex,$=F[G]||0,Z=Math.abs((Y.node1.getLayout().ratio||1)*q),te=$+Z*x,me=[o+d*Math.cos($),c+d*Math.sin($)],Ce=[o+d*Math.cos(te),c+d*Math.sin(te)],Ve=Y.node2.dataIndex,Ee=F[Ve]||0,be=Math.abs((Y.node2.getLayout().ratio||1)*q),He=Ee+be*x,Se=[o+d*Math.cos(Ee),c+d*Math.sin(Ee)],Ie=[o+d*Math.cos(He),c+d*Math.sin(He)];Y.setLayout({s1:me,s2:Ce,sStartAngle:$,sEndAngle:te,t1:Se,t2:Ie,tStartAngle:Ee,tEndAngle:He,cx:o,cy:c,r:d,value:X,clockwise:y}),F[G]=te,F[Ve]=He})}}}function Kce(r){r.registerChartView($ce),r.registerSeriesModel(qce),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,Xce),r.registerProcessor(pf("chord"))}var Qce=(function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r})(),Jce=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="pointer",a}return t.prototype.getDefaultShape=function(){return new Qce},t.prototype.buildPath=function(e,a){var n=Math.cos,s=Math.sin,l=a.r,o=a.width,c=a.angle,u=a.x-n(c)*o*(o>=l/3?1:2),d=a.y-s(c)*o*(o>=l/3?1:2);c=a.angle-Math.PI/2,e.moveTo(u,d),e.lineTo(a.x+n(c)*o,a.y+s(c)*o),e.lineTo(a.x+n(a.angle)*l,a.y+s(a.angle)*l),e.lineTo(a.x-n(c)*o,a.y-s(c)*o),e.lineTo(u,d)},t})(ht);function eue(r,t){var e=r.get("center"),a=t.getWidth(),n=t.getHeight(),s=Math.min(a,n),l=Ne(e[0],t.getWidth()),o=Ne(e[1],t.getHeight()),c=Ne(r.get("radius"),s/2);return{cx:l,cy:o,r:c}}function J0(r,t){var e=r==null?"":r+"";return t&&(je(t)?e=t.replace("{value}",e):Le(t)&&(e=t(r))),e}var tue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this.group.removeAll();var s=e.get(["axisLine","lineStyle","color"]),l=eue(e,n);this._renderMain(e,a,n,s,l),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,a,n,s,l){var o=this.group,c=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,d=-e.get("endAngle")/180*Math.PI,h=e.getModel("axisLine"),p=h.get("roundCap"),g=p?Iy:Da,v=h.get("show"),y=h.getModel("lineStyle"),x=y.get("width"),b=[u,d];Sb(b,!c),u=b[0],d=b[1];for(var N=d-u,w=u,S=[],T=0;v&&T<s.length;T++){var A=Math.min(Math.max(s[T][0],0),1);d=u+N*A;var C=new g({shape:{startAngle:w,endAngle:d,cx:l.cx,cy:l.cy,clockwise:c,r0:l.r-x,r:l.r},silent:!0});C.setStyle({fill:s[T][1]}),C.setStyle(y.getLineStyle(["color","width"])),S.push(C),w=d}S.reverse(),B(S,function(R){return o.add(R)});var M=function(R){if(R<=0)return s[0][1];var k;for(k=0;k<s.length;k++)if(s[k][0]>=R&&(k===0?0:s[k-1][0])<R)return s[k][1];return s[k-1][1]};this._renderTicks(e,a,n,M,l,u,d,c,x),this._renderTitleAndDetail(e,a,n,M,l),this._renderAnchor(e,l),this._renderPointer(e,a,n,M,l,u,d,c,x)},t.prototype._renderTicks=function(e,a,n,s,l,o,c,u,d){for(var h=this.group,p=l.cx,g=l.cy,v=l.r,y=+e.get("min"),x=+e.get("max"),b=e.getModel("splitLine"),N=e.getModel("axisTick"),w=e.getModel("axisLabel"),S=e.get("splitNumber"),T=N.get("splitNumber"),A=Ne(b.get("length"),v),C=Ne(N.get("length"),v),M=o,R=(c-o)/S,k=R/T,L=b.getModel("lineStyle").getLineStyle(),O=N.getModel("lineStyle").getLineStyle(),z=b.get("distance"),U,H,P=0;P<=S;P++){if(U=Math.cos(M),H=Math.sin(M),b.get("show")){var F=z?z+d:d,Y=new Tr({shape:{x1:U*(v-F)+p,y1:H*(v-F)+g,x2:U*(v-A-F)+p,y2:H*(v-A-F)+g},style:L,silent:!0});L.stroke==="auto"&&Y.setStyle({stroke:s(P/S)}),h.add(Y)}if(w.get("show")){var F=w.get("distance")+z,X=J0(Cr(P/S*(x-y)+y),w.get("formatter")),q=s(P/S),G=U*(v-A-F)+p,$=H*(v-A-F)+g,Z=w.get("rotate"),te=0;Z==="radial"?(te=-M+2*Math.PI,te>Math.PI/2&&(te+=Math.PI)):Z==="tangential"?te=-M-Math.PI/2:xt(Z)&&(te=Z*Math.PI/180),te===0?h.add(new vt({style:Gt(w,{text:X,x:G,y:$,verticalAlign:H<-.8?"top":H>.8?"bottom":"middle",align:U<-.4?"left":U>.4?"right":"center"},{inheritColor:q}),silent:!0})):h.add(new vt({style:Gt(w,{text:X,x:G,y:$,verticalAlign:"middle",align:"center"},{inheritColor:q}),silent:!0,originX:G,originY:$,rotation:te}))}if(N.get("show")&&P!==S){var F=N.get("distance");F=F?F+d:d;for(var me=0;me<=T;me++){U=Math.cos(M),H=Math.sin(M);var Ce=new Tr({shape:{x1:U*(v-F)+p,y1:H*(v-F)+g,x2:U*(v-C-F)+p,y2:H*(v-C-F)+g},silent:!0,style:O});O.stroke==="auto"&&Ce.setStyle({stroke:s((P+me/T)/S)}),h.add(Ce),M+=k}M-=k}else M+=R}},t.prototype._renderPointer=function(e,a,n,s,l,o,c,u,d){var h=this.group,p=this._data,g=this._progressEls,v=[],y=e.get(["pointer","show"]),x=e.getModel("progress"),b=x.get("show"),N=e.getData(),w=N.mapDimension("value"),S=+e.get("min"),T=+e.get("max"),A=[S,T],C=[o,c];function M(k,L){var O=N.getItemModel(k),z=O.getModel("pointer"),U=Ne(z.get("width"),l.r),H=Ne(z.get("length"),l.r),P=e.get(["pointer","icon"]),F=z.get("offsetCenter"),Y=Ne(F[0],l.r),X=Ne(F[1],l.r),q=z.get("keepAspect"),G;return P?G=Er(P,Y-U/2,X-H,U,H,null,q):G=new Jce({shape:{angle:-Math.PI/2,width:U,r:H,x:Y,y:X}}),G.rotation=-(L+Math.PI/2),G.x=l.cx,G.y=l.cy,G}function R(k,L){var O=x.get("roundCap"),z=O?Iy:Da,U=x.get("overlap"),H=U?x.get("width"):d/N.count(),P=U?l.r-H:l.r-(k+1)*H,F=U?l.r:l.r-k*H,Y=new z({shape:{startAngle:o,endAngle:L,cx:l.cx,cy:l.cy,clockwise:u,r0:P,r:F}});return U&&(Y.z2=Tt(N.get(w,k),[S,T],[100,0],!0)),Y}(b||y)&&(N.diff(p).add(function(k){var L=N.get(w,k);if(y){var O=M(k,o);Kt(O,{rotation:-((isNaN(+L)?C[0]:Tt(L,A,C,!0))+Math.PI/2)},e),h.add(O),N.setItemGraphicEl(k,O)}if(b){var z=R(k,o),U=x.get("clip");Kt(z,{shape:{endAngle:Tt(L,A,C,U)}},e),h.add(z),$S(e.seriesIndex,N.dataType,k,z),v[k]=z}}).update(function(k,L){var O=N.get(w,k);if(y){var z=p.getItemGraphicEl(L),U=z?z.rotation:o,H=M(k,U);H.rotation=U,Nt(H,{rotation:-((isNaN(+O)?C[0]:Tt(O,A,C,!0))+Math.PI/2)},e),h.add(H),N.setItemGraphicEl(k,H)}if(b){var P=g[L],F=P?P.shape.endAngle:o,Y=R(k,F),X=x.get("clip");Nt(Y,{shape:{endAngle:Tt(O,A,C,X)}},e),h.add(Y),$S(e.seriesIndex,N.dataType,k,Y),v[k]=Y}}).execute(),N.each(function(k){var L=N.getItemModel(k),O=L.getModel("emphasis"),z=O.get("focus"),U=O.get("blurScope"),H=O.get("disabled");if(y){var P=N.getItemGraphicEl(k),F=N.getItemVisual(k,"style"),Y=F.fill;if(P instanceof la){var X=P.style;P.useStyle(ie({image:X.image,x:X.x,y:X.y,width:X.width,height:X.height},F))}else P.useStyle(F),P.type!=="pointer"&&P.setColor(Y);P.setStyle(L.getModel(["pointer","itemStyle"]).getItemStyle()),P.style.fill==="auto"&&P.setStyle("fill",s(Tt(N.get(w,k),A,[0,1],!0))),P.z2EmphasisLift=0,Xr(P,L),nr(P,z,U,H)}if(b){var q=v[k];q.useStyle(N.getItemVisual(k,"style")),q.setStyle(L.getModel(["progress","itemStyle"]).getItemStyle()),q.z2EmphasisLift=0,Xr(q,L),nr(q,z,U,H)}}),this._progressEls=v)},t.prototype._renderAnchor=function(e,a){var n=e.getModel("anchor"),s=n.get("show");if(s){var l=n.get("size"),o=n.get("icon"),c=n.get("offsetCenter"),u=n.get("keepAspect"),d=Er(o,a.cx-l/2+Ne(c[0],a.r),a.cy-l/2+Ne(c[1],a.r),l,l,null,u);d.z2=n.get("showAbove")?1:0,d.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(d)}},t.prototype._renderTitleAndDetail=function(e,a,n,s,l){var o=this,c=e.getData(),u=c.mapDimension("value"),d=+e.get("min"),h=+e.get("max"),p=new Pe,g=[],v=[],y=e.isAnimationEnabled(),x=e.get(["pointer","showAbove"]);c.diff(this._data).add(function(b){g[b]=new vt({silent:!0}),v[b]=new vt({silent:!0})}).update(function(b,N){g[b]=o._titleEls[N],v[b]=o._detailEls[N]}).execute(),c.each(function(b){var N=c.getItemModel(b),w=c.get(u,b),S=new Pe,T=s(Tt(w,[d,h],[0,1],!0)),A=N.getModel("title");if(A.get("show")){var C=A.get("offsetCenter"),M=l.cx+Ne(C[0],l.r),R=l.cy+Ne(C[1],l.r),k=g[b];k.attr({z2:x?0:2,style:Gt(A,{x:M,y:R,text:c.getName(b),align:"center",verticalAlign:"middle"},{inheritColor:T})}),S.add(k)}var L=N.getModel("detail");if(L.get("show")){var O=L.get("offsetCenter"),z=l.cx+Ne(O[0],l.r),U=l.cy+Ne(O[1],l.r),H=Ne(L.get("width"),l.r),P=Ne(L.get("height"),l.r),F=e.get(["progress","show"])?c.getItemVisual(b,"style").fill:T,k=v[b],Y=L.get("formatter");k.attr({z2:x?0:2,style:Gt(L,{x:z,y:U,text:J0(w,Y),width:isNaN(H)?null:H,height:isNaN(P)?null:P,align:"center",verticalAlign:"middle"},{inheritColor:F})}),H7(k,{normal:L},w,function(q){return J0(q,Y)}),y&&G7(k,b,c,e,{getFormattedLabel:function(q,G,$,Z,te,me){return J0(me?me.interpolatedValue:w,Y)}}),S.add(k)}p.add(S)}),this.group.add(p),this._titleEls=g,this._detailEls=v},t.type="gauge",t})(Pt),rue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="itemStyle",e}return t.prototype.getInitialData=function(e,a){return gf(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,ee.color.neutral10]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:ee.color.axisTick,width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:ee.color.axisTickMinor,width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:ee.color.axisLabel,fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:ee.color.neutral00,borderWidth:0,borderColor:ee.color.theme[0]}},title:{show:!0,offsetCenter:[0,"20%"],color:ee.color.secondary,fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:ee.color.transparent,borderWidth:0,borderColor:ee.color.neutral40,width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:ee.color.primary,fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t})(zt);function aue(r){r.registerChartView(tue),r.registerSeriesModel(rue)}var nue=["itemStyle","opacity"],sue=(function(r){re(t,r);function t(e,a){var n=r.call(this)||this,s=n,l=new ma,o=new vt;return s.setTextContent(o),n.setTextGuideLine(l),n.updateData(e,a,!0),n}return t.prototype.updateData=function(e,a,n){var s=this,l=e.hostModel,o=e.getItemModel(a),c=e.getItemLayout(a),u=o.getModel("emphasis"),d=o.get(nue);d=d??1,n||ps(s),s.useStyle(e.getItemVisual(a,"style")),s.style.lineJoin="round",n?(s.setShape({points:c.points}),s.style.opacity=0,Kt(s,{style:{opacity:d}},l,a)):Nt(s,{style:{opacity:d},shape:{points:c.points}},l,a),Xr(s,o),this._updateLabel(e,a),nr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e,a){var n=this,s=this.getTextGuideLine(),l=n.getTextContent(),o=e.hostModel,c=e.getItemModel(a),u=e.getItemLayout(a),d=u.label,h=e.getItemVisual(a,"style"),p=h.fill;ia(l,Zr(c),{labelFetcher:e.hostModel,labelDataIndex:a,defaultOpacity:h.opacity,defaultText:e.getName(a)},{normal:{align:d.textAlign,verticalAlign:d.verticalAlign}});var g=c.getModel("label"),v=g.get("color"),y=v==="inherit"?p:null;n.setTextConfig({local:!0,inside:!!d.inside,insideStroke:y,outsideFill:y});var x=d.linePoints;s.setShape({points:x}),n.textGuideLineConfig={anchor:x?new Ye(x[0][0],x[0][1]):null},Nt(l,{style:{x:d.x,y:d.y}},o,a),l.attr({rotation:d.rotation,originX:d.x,originY:d.y,z2:10}),uA(n,dA(c),{stroke:p})},t})(Ma),iue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,a,n){var s=e.getData(),l=this._data,o=this.group;s.diff(l).add(function(c){var u=new sue(s,c);s.setItemGraphicEl(c,u),o.add(u)}).update(function(c,u){var d=l.getItemGraphicEl(u);d.updateData(s,c),o.add(d),s.setItemGraphicEl(c,d)}).remove(function(c){var u=l.getItemGraphicEl(c);xl(u,e,c)}).execute(),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t})(Pt),lue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new mf(we(this.getData,this),we(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,a){return gf(this,{coordDimensions:["value"],encodeDefaulter:et(zT,this)})},t.prototype._defaultLabelLine=function(e){wu(e,"labelLine",["show"]);var a=e.labelLine,n=e.emphasis.labelLine;a.show=a.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var a=this.getData(),n=r.prototype.getDataParams.call(this,e),s=a.mapDimension("value"),l=a.getSum(s);return n.percent=l?+(a.get(s,e)/l*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={coordinateSystemUsage:"box",z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:65,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:ee.color.neutral00,borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:ee.color.primary}}},t})(zt);function oue(r,t){for(var e=r.mapDimension("value"),a=r.mapArray(e,function(c){return c}),n=[],s=t==="ascending",l=0,o=r.count();l<o;l++)n[l]=l;return Le(t)?n.sort(t):t!=="none"&&n.sort(function(c,u){return s?a[c]-a[u]:a[u]-a[c]}),n}function cue(r){var t=r.hostModel,e=t.get("orient");r.each(function(a){var n=r.getItemModel(a),s=n.getModel("label"),l=s.get("position"),o=n.getModel("labelLine"),c=r.getItemLayout(a),u=c.points,d=l==="inner"||l==="inside"||l==="center"||l==="insideLeft"||l==="insideRight",h,p,g,v;if(d)l==="insideLeft"?(p=(u[0][0]+u[3][0])/2+5,g=(u[0][1]+u[3][1])/2,h="left"):l==="insideRight"?(p=(u[1][0]+u[2][0])/2-5,g=(u[1][1]+u[2][1])/2,h="right"):(p=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,g=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,h="center"),v=[[p,g],[p,g]];else{var y=void 0,x=void 0,b=void 0,N=void 0,w=o.get("length");l==="left"?(y=(u[3][0]+u[0][0])/2,x=(u[3][1]+u[0][1])/2,b=y-w,p=b-5,h="right"):l==="right"?(y=(u[1][0]+u[2][0])/2,x=(u[1][1]+u[2][1])/2,b=y+w,p=b+5,h="left"):l==="top"?(y=(u[3][0]+u[0][0])/2,x=(u[3][1]+u[0][1])/2,N=x-w,g=N-5,h="center"):l==="bottom"?(y=(u[1][0]+u[2][0])/2,x=(u[1][1]+u[2][1])/2,N=x+w,g=N+5,h="center"):l==="rightTop"?(y=e==="horizontal"?u[3][0]:u[1][0],x=e==="horizontal"?u[3][1]:u[1][1],e==="horizontal"?(N=x-w,g=N-5,h="center"):(b=y+w,p=b+5,h="top")):l==="rightBottom"?(y=u[2][0],x=u[2][1],e==="horizontal"?(N=x+w,g=N+5,h="center"):(b=y+w,p=b+5,h="bottom")):l==="leftTop"?(y=u[0][0],x=e==="horizontal"?u[0][1]:u[1][1],e==="horizontal"?(N=x-w,g=N-5,h="center"):(b=y-w,p=b-5,h="right")):l==="leftBottom"?(y=e==="horizontal"?u[1][0]:u[3][0],x=e==="horizontal"?u[1][1]:u[2][1],e==="horizontal"?(N=x+w,g=N+5,h="center"):(b=y-w,p=b-5,h="right")):(y=(u[1][0]+u[2][0])/2,x=(u[1][1]+u[2][1])/2,e==="horizontal"?(N=x+w,g=N+5,h="center"):(b=y+w,p=b+5,h="left")),e==="horizontal"?(b=y,p=b):(N=x,g=N),v=[[y,x],[b,N]]}c.label={linePoints:v,x:p,y:g,verticalAlign:"middle",textAlign:h,inside:d}})}function uue(r,t){r.eachSeriesByType("funnel",function(e){var a=e.getData(),n=a.mapDimension("value"),s=e.get("sort"),l=Kr(e,t),o=rr(e.getBoxLayoutParams(),l.refContainer),c=e.get("orient"),u=o.width,d=o.height,h=oue(a,s),p=o.x,g=o.y,v=c==="horizontal"?[Ne(e.get("minSize"),d),Ne(e.get("maxSize"),d)]:[Ne(e.get("minSize"),u),Ne(e.get("maxSize"),u)],y=a.getDataExtent(n),x=e.get("min"),b=e.get("max");x==null&&(x=Math.min(y[0],0)),b==null&&(b=y[1]);var N=e.get("funnelAlign"),w=e.get("gap"),S=c==="horizontal"?u:d,T=(S-w*(a.count()-1))/a.count(),A=function(H,P){if(c==="horizontal"){var F=a.get(n,H)||0,Y=Tt(F,[x,b],v,!0),X=void 0;switch(N){case"top":X=g;break;case"center":X=g+(d-Y)/2;break;case"bottom":X=g+(d-Y);break}return[[P,X],[P,X+Y]]}var q=a.get(n,H)||0,G=Tt(q,[x,b],v,!0),$;switch(N){case"left":$=p;break;case"center":$=p+(u-G)/2;break;case"right":$=p+u-G;break}return[[$,P],[$+G,P]]};s==="ascending"&&(T=-T,w=-w,c==="horizontal"?p+=u:g+=d,h=h.reverse());for(var C=0;C<h.length;C++){var M=h[C],R=h[C+1],k=a.getItemModel(M);if(c==="horizontal"){var L=k.get(["itemStyle","width"]);L==null?L=T:(L=Ne(L,u),s==="ascending"&&(L=-L));var O=A(M,p),z=A(R,p+L);p+=L+w,a.setItemLayout(M,{points:O.concat(z.slice().reverse())})}else{var U=k.get(["itemStyle","height"]);U==null?U=T:(U=Ne(U,d),s==="ascending"&&(U=-U));var O=A(M,g),z=A(R,g+U);g+=U+w,a.setItemLayout(M,{points:O.concat(z.slice().reverse())})}}cue(a)})}function due(r){r.registerChartView(iue),r.registerSeriesModel(lue),r.registerLayout(uue),r.registerProcessor(pf("funnel"))}var hue=.3,fue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new Pe,e._initialized=!1,e}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,a,n,s){this._progressiveEls=null;var l=this._dataGroup,o=e.getData(),c=this._data,u=e.coordinateSystem,d=u.dimensions,h=z6(e);o.diff(c).add(p).update(g).remove(v).execute();function p(x){var b=P6(o,l,x,d,u);tw(b,o,x,h)}function g(x,b){var N=c.getItemGraphicEl(b),w=zH(o,x,d,u);o.setItemGraphicEl(x,N),Nt(N,{shape:{points:w}},e,x),ps(N),tw(N,o,x,h)}function v(x){var b=c.getItemGraphicEl(x);l.remove(b)}if(!this._initialized){this._initialized=!0;var y=pue(u,e,function(){setTimeout(function(){l.removeClipPath()})});l.setClipPath(y)}this._data=o},t.prototype.incrementalPrepareRender=function(e,a,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,a,n){for(var s=a.getData(),l=a.coordinateSystem,o=l.dimensions,c=z6(a),u=this._progressiveEls=[],d=e.start;d<e.end;d++){var h=P6(s,this._dataGroup,d,o,l);h.incremental=!0,tw(h,s,d,c),u.push(h)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t})(Pt);function pue(r,t,e){var a=r.model,n=r.getRect(),s=new it({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),l=a.get("layout")==="horizontal"?"width":"height";return s.setShape(l,0),Kt(s,{shape:{width:n.width,height:n.height}},t,e),s}function zH(r,t,e,a){for(var n=[],s=0;s<e.length;s++){var l=e[s],o=r.get(r.mapDimension(l),t);gue(o,a.getAxis(l).type)||n.push(a.dataToPoint(o,l))}return n}function P6(r,t,e,a,n){var s=zH(r,e,a,n),l=new ma({shape:{points:s},z2:10});return t.add(l),r.setItemGraphicEl(e,l),l}function z6(r){var t=r.get("smooth",!0);return t===!0&&(t=hue),t=ji(t),Ta(t)&&(t=0),{smooth:t}}function tw(r,t,e,a){r.useStyle(t.getItemVisual(e,"style")),r.style.fill=null,r.setShape("smooth",a.smooth);var n=t.getItemModel(e),s=n.getModel("emphasis");Xr(r,n,"lineStyle"),nr(r,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function gue(r,t){return t==="category"?r==null:r==null||isNaN(r)}var mue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.getInitialData=function(e,a){return Di(null,this,{useEncodeDefaulter:we(vue,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var a=this.coordinateSystem,n=this.getData(),s=[];return a.eachActiveState(n,function(l,o){e===l&&s.push(n.getRawIndex(o))}),s},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t})(zt);function vue(r){var t=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(t){var e={};return B(t.dimensions,function(a){var n=xue(a);e[a]=n}),e}}function xue(r){return+r.replace("dim","")}var yue=["lineStyle","opacity"],bue={seriesType:"parallel",reset:function(r,t){var e=r.coordinateSystem,a={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(n,s){e.eachActiveState(s,function(l,o){var c=a[l];if(l==="normal"&&s.hasItemOption){var u=s.getItemModel(o).get(yue,!0);u!=null&&(c=u)}var d=s.ensureUniqueItemVisual(o,"style");d.opacity=c},n.start,n.end)}}}};function _ue(r){Nue(r),jue(r)}function Nue(r){if(!r.parallel){var t=!1;B(r.series,function(e){e&&e.type==="parallel"&&(t=!0)}),t&&(r.parallel=[{}])}}function jue(r){var t=Ft(r.parallelAxis);B(t,function(e){if(Ue(e)){var a=e.parallelIndex||0,n=Ft(r.parallel)[a];n&&n.parallelAxisDefault&&rt(e,n.parallelAxisDefault,!1)}})}var wue=5,Sue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this._model=e,this._api=n,this._handlers||(this._handlers={},B(Cue,function(s,l){n.getZr().on(l,this._handlers[l]=we(s,this))},this)),cf(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,a){Zg(this,"_throttledDispatchExpand"),B(this._handlers,function(n,s){a.getZr().off(s,n)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(ie({type:"parallelAxisExpand"},e))},t.type="parallel",t})(Yt),Cue={mousedown:function(r){rw(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var t=this._mouseDownPoint;if(rw(this,"click")&&t){var e=[r.offsetX,r.offsetY],a=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);if(a>wue)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!(this._mouseDownPoint||!rw(this,"mousemove"))){var t=this._model,e=t.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),a=e.behavior;a==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(a==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:a==="jump"?null:{duration:0}})}}};function rw(r,t){var e=r._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===t}var Tue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var a=this.option;e&&rt(a,e,!0),this._initDimensions()},t.prototype.contains=function(e,a){var n=e.get("parallelIndex");return n!=null&&a.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(e){B(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(a){e.hasOwnProperty(a)&&(this.option[a]=e[a])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],a=this.parallelAxisIndex=[],n=Ct(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(s){return(s.get("parallelIndex")||0)===this.componentIndex},this);B(n,function(s){e.push("dim"+s.get("dim")),a.push(s.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t})(ct),Aue=(function(r){re(t,r);function t(e,a,n,s,l){var o=r.call(this,e,a,n)||this;return o.type=s||"value",o.axisIndex=l,o}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t})(vs);function Vo(r,t,e,a,n,s){r=r||0;var l=e[1]-e[0];if(n!=null&&(n=Qd(n,[0,l])),s!=null&&(s=Math.max(s,n??0)),a==="all"){var o=Math.abs(t[1]-t[0]);o=Qd(o,[0,l]),n=s=Qd(o,[n,s]),a=0}t[0]=Qd(t[0],e),t[1]=Qd(t[1],e);var c=aw(t,a);t[a]+=r;var u=n||0,d=e.slice();c.sign<0?d[0]+=u:d[1]-=u,t[a]=Qd(t[a],d);var h;return h=aw(t,a),n!=null&&(h.sign!==c.sign||h.span<n)&&(t[1-a]=t[a]+c.sign*n),h=aw(t,a),s!=null&&h.span>s&&(t[1-a]=t[a]+h.sign*s),t}function aw(r,t){var e=r[t]-r[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function Qd(r,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,r))}var nw=B,BH=Math.min,VH=Math.max,B6=Math.floor,Eue=Math.ceil,V6=Cr,Due=Math.PI,Mue=(function(){function r(t,e,a){this.type="parallel",this._axesMap=De(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,a)}return r.prototype._init=function(t,e,a){var n=t.dimensions,s=t.parallelAxisIndex;nw(n,function(l,o){var c=s[o],u=e.getComponent("parallelAxis",c),d=this._axesMap.set(l,new Aue(l,Om(u),[0,0],u.get("type"),c)),h=d.type==="category";d.onBand=h&&u.get("boundaryGap"),d.inverse=u.get("inverse"),u.axis=d,d.model=u,d.coordinateSystem=u.coordinateSystem=this},this)},r.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},r.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),a=e.axisBase,n=e.layoutBase,s=e.pixelDimIndex,l=t[1-s],o=t[s];return l>=a&&l<=a+e.axisLength&&o>=n&&o<=n+e.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(a){if(t.contains(a,e)){var n=a.getData();nw(this.dimensions,function(s){var l=this._axesMap.get(s);l.scale.unionExtentFromData(n,n.mapDimension(s)),Mu(l.scale,l.model)},this)}},this)},r.prototype.resize=function(t,e){var a=Kr(t,e).refContainer;this._rect=rr(t.getBoxLayoutParams(),a),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var t=this._model,e=this._rect,a=["x","y"],n=["width","height"],s=t.get("layout"),l=s==="horizontal"?0:1,o=e[n[l]],c=[0,o],u=this.dimensions.length,d=ex(t.get("axisExpandWidth"),c),h=ex(t.get("axisExpandCount")||0,[0,u]),p=t.get("axisExpandable")&&u>3&&u>h&&h>1&&d>0&&o>0,g=t.get("axisExpandWindow"),v;if(g)v=ex(g[1]-g[0],c),g[1]=g[0]+v;else{v=ex(d*(h-1),c);var y=t.get("axisExpandCenter")||B6(u/2);g=[d*y-v/2],g[1]=g[0]+v}var x=(o-v)/(u-h);x<3&&(x=0);var b=[B6(V6(g[0]/d,1))+1,Eue(V6(g[1]/d,1))-1],N=x/d*g[0];return{layout:s,pixelDimIndex:l,layoutBase:e[a[l]],layoutLength:o,axisBase:e[a[1-l]],axisLength:e[n[1-l]],axisExpandable:p,axisExpandWidth:d,axisCollapseWidth:x,axisExpandWindow:g,axisCount:u,winInnerIndices:b,axisExpandWindow0Pos:N}},r.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,a=this.dimensions,n=this._makeLayoutInfo(),s=n.layout;e.each(function(l){var o=[0,n.axisLength],c=l.inverse?1:0;l.setExtent(o[c],o[1-c])}),nw(a,function(l,o){var c=(n.axisExpandable?Lue:Rue)(o,n),u={horizontal:{x:c.position,y:n.axisLength},vertical:{x:0,y:c.position}},d={horizontal:Due/2,vertical:0},h=[u[s].x+t.x,u[s].y+t.y],p=d[s],g=na();Ml(g,g,p),zs(g,g,h),this._axesLayout[l]={position:h,rotation:p,transform:g,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(t){return this._axesMap.get(t)},r.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},r.prototype.eachActiveState=function(t,e,a,n){a==null&&(a=0),n==null&&(n=t.count());var s=this._axesMap,l=this.dimensions,o=[],c=[];B(l,function(x){o.push(t.mapDimension(x)),c.push(s.get(x).model)});for(var u=this.hasAxisBrushed(),d=a;d<n;d++){var h=void 0;if(!u)h="normal";else{h="active";for(var p=t.getValues(o,d),g=0,v=l.length;g<v;g++){var y=c[g].getActiveState(p[g]);if(y==="inactive"){h="inactive";break}}}e(h,d)}},r.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,a=!1,n=0,s=t.length;n<s;n++)e.get(t[n]).model.getActiveState()!=="normal"&&(a=!0);return a},r.prototype.axisCoordToPoint=function(t,e){var a=this._axesLayout[e];return Os([t,0],a.transform)},r.prototype.getAxisLayout=function(t){return Oe(this._axesLayout[t])},r.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),a=e.pixelDimIndex,n=e.axisExpandWindow.slice(),s=n[1]-n[0],l=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:n};var o=t[a]-e.layoutBase-e.axisExpandWindow0Pos,c,u="slide",d=e.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),p=h[0]!=null;if(d)p&&d&&o<s*h[0]?(u="jump",c=o-s*h[2]):p&&d&&o>s*(1-h[0])?(u="jump",c=o-s*(1-h[2])):(c=o-s*h[1])>=0&&(c=o-s*(1-h[1]))<=0&&(c=0),c*=e.axisExpandWidth/d,c?Vo(c,n,l,"all"):u="none";else{var g=n[1]-n[0],v=l[1]*o/g;n=[VH(0,v-g/2)],n[1]=BH(l[1],n[0]+g),n[0]=n[1]-g}return{axisExpandWindow:n,behavior:u}},r})();function ex(r,t){return BH(VH(r,t[0]),t[1])}function Rue(r,t){var e=t.layoutLength/(t.axisCount-1);return{position:e*r,axisNameAvailableWidth:e,axisLabelShow:!0}}function Lue(r,t){var e=t.layoutLength,a=t.axisExpandWidth,n=t.axisCount,s=t.axisCollapseWidth,l=t.winInnerIndices,o,c=s,u=!1,d;return r<l[0]?(o=r*s,d=s):r<=l[1]?(o=t.axisExpandWindow0Pos+r*a-t.axisExpandWindow[0],c=a,u=!0):(o=e-(n-1-r)*s,d=s),{position:o,axisNameAvailableWidth:c,axisLabelShow:u,nameTruncateMaxWidth:d}}function Iue(r,t){var e=[];return r.eachComponent("parallel",function(a,n){var s=new Mue(a,r,t);s.name="parallel_"+n,s.resize(a,t),a.coordinateSystem=s,s.model=a,e.push(s)}),r.eachSeries(function(a){if(a.get("coordinateSystem")==="parallel"){var n=a.getReferringComponents("parallel",pr).models[0];a.coordinateSystem=n.coordinateSystem}}),e}var kue={create:Iue},Q2=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.activeIntervals=[],e}return t.prototype.getAreaSelectStyle=function(){return Cu([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var a=this.activeIntervals=Oe(e);if(a)for(var n=a.length-1;n>=0;n--)Mn(a[n])},t.prototype.getActiveState=function(e){var a=this.activeIntervals;if(!a.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(a.length===1){var n=a[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var s=0,l=a.length;s<l;s++)if(a[s][0]<=e&&e<=a[s][1])return"active";return"inactive"},t})(ct);yr(Q2,ff);var Ru=!0,um=Math.min,Gh=Math.max,Oue=Math.pow,Pue=1e4,zue=6,Bue=6,H6="globalPan",Vue={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Hue={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},G6={brushStyle:{lineWidth:2,stroke:ee.color.backgroundTint,fill:ee.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},Gue=0,zA=(function(r){re(t,r);function t(e){var a=r.call(this)||this;return a._track=[],a._covers=[],a._handlers={},a._zr=e,a.group=new Pe,a._uid="brushController_"+Gue++,B(Xue,function(n,s){this._handlers[s]=we(n,this)},a),a}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var a=this._zr;this._enableGlobalPan||Sle(a,H6,this._uid),B(this._handlers,function(n,s){a.on(s,n)}),this._brushType=e.brushType,this._brushOption=rt(Oe(G6),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;Cle(e,H6,this._uid),B(this._handlers,function(a,n){e.off(n,a)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var a=this._panels={};B(e,function(n){a[n.panelId]=Oe(n)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=a.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=pe(e,function(p){return rt(Oe(G6),p,!0)});var a="\0-brush-index-",n=this._covers,s=this._covers=[],l=this,o=this._creatingCover;return new Tl(n,e,u,c).add(d).update(d).remove(h).execute(),this;function c(p,g){return(p.id!=null?p.id:a+g)+"-"+p.brushType}function u(p,g){return c(p.__brushOption,g)}function d(p,g){var v=e[p];if(g!=null&&n[g]===o)s[p]=n[g];else{var y=s[p]=g!=null?(n[g].__brushOption=v,n[g]):GH(l,HH(l,v));BA(l,y)}}function h(p){n[p]!==o&&l.group.remove(n[p])}},t.prototype.unmount=function(){return this.enableBrush(!1),J2(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t})(gs);function HH(r,t){var e=$b[t.brushType].createCover(r,t);return e.__brushOption=t,FH(e,t),r.group.add(e),e}function GH(r,t){var e=VA(t);return e.endCreating&&(e.endCreating(r,t),FH(t,t.__brushOption)),t}function UH(r,t){var e=t.__brushOption;VA(t).updateCoverShape(r,t,e.range,e)}function FH(r,t){var e=t.z;e==null&&(e=Pue),r.traverse(function(a){a.z=e,a.z2=e})}function BA(r,t){VA(t).updateCommon(r,t),UH(r,t)}function VA(r){return $b[r.__brushOption.brushType]}function HA(r,t,e){var a=r._panels;if(!a)return Ru;var n,s=r._transform;return B(a,function(l){l.isTargetByCursor(t,e,s)&&(n=l)}),n}function YH(r,t){var e=r._panels;if(!e)return Ru;var a=t.__brushOption.panelId;return a!=null?e[a]:Ru}function J2(r){var t=r._covers,e=t.length;return B(t,function(a){r.group.remove(a)},r),t.length=0,!!e}function Lu(r,t){var e=pe(r._covers,function(a){var n=a.__brushOption,s=Oe(n.range);return{brushType:n.brushType,panelId:n.panelId,range:s}});r.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function Uue(r){var t=r._track;if(!t.length)return!1;var e=t[t.length-1],a=t[0],n=e[0]-a[0],s=e[1]-a[1],l=Oue(n*n+s*s,.5);return l>zue}function WH(r){var t=r.length-1;return t<0&&(t=0),[r[0],r[t]]}function $H(r,t,e,a){var n=new Pe;return n.add(new it({name:"main",style:GA(e),silent:!0,draggable:!0,cursor:"move",drift:et(U6,r,t,n,["n","s","w","e"]),ondragend:et(Lu,t,{isEnd:!0})})),B(a,function(s){n.add(new it({name:s.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:et(U6,r,t,n,s),ondragend:et(Lu,t,{isEnd:!0})}))}),n}function qH(r,t,e,a){var n=a.brushStyle.lineWidth||0,s=Gh(n,Bue),l=e[0][0],o=e[1][0],c=l-n/2,u=o-n/2,d=e[0][1],h=e[1][1],p=d-s+n/2,g=h-s+n/2,v=d-l,y=h-o,x=v+n,b=y+n;tl(r,t,"main",l,o,v,y),a.transformable&&(tl(r,t,"w",c,u,s,b),tl(r,t,"e",p,u,s,b),tl(r,t,"n",c,u,x,s),tl(r,t,"s",c,g,x,s),tl(r,t,"nw",c,u,s,s),tl(r,t,"ne",p,u,s,s),tl(r,t,"sw",c,g,s,s),tl(r,t,"se",p,g,s,s))}function eC(r,t){var e=t.__brushOption,a=e.transformable,n=t.childAt(0);n.useStyle(GA(e)),n.attr({silent:!a,cursor:a?"move":"default"}),B([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(s){var l=t.childOfName(s.join("")),o=s.length===1?tC(r,s[0]):Yue(r,s);l&&l.attr({silent:!a,invisible:!a,cursor:a?Hue[o]+"-resize":null})})}function tl(r,t,e,a,n,s,l){var o=t.childOfName(e);o&&o.setShape($ue(UA(r,t,[[a,n],[a+s,n+l]])))}function GA(r){return Ge({strokeNoScale:!0},r.brushStyle)}function XH(r,t,e,a){var n=[um(r,e),um(t,a)],s=[Gh(r,e),Gh(t,a)];return[[n[0],s[0]],[n[1],s[1]]]}function Fue(r){return Ro(r.group)}function tC(r,t){var e={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},n=Eb(e[t],Fue(r));return a[n]}function Yue(r,t){var e=[tC(r,t[0]),tC(r,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function U6(r,t,e,a,n,s){var l=e.__brushOption,o=r.toRectRange(l.range),c=ZH(t,n,s);B(a,function(u){var d=Vue[u];o[d[0]][d[1]]+=c[d[0]]}),l.range=r.fromRectRange(XH(o[0][0],o[1][0],o[0][1],o[1][1])),BA(t,e),Lu(t,{isEnd:!1})}function Wue(r,t,e,a){var n=t.__brushOption.range,s=ZH(r,e,a);B(n,function(l){l[0]+=s[0],l[1]+=s[1]}),BA(r,t),Lu(r,{isEnd:!1})}function ZH(r,t,e){var a=r.group,n=a.transformCoordToLocal(t,e),s=a.transformCoordToLocal(0,0);return[n[0]-s[0],n[1]-s[1]]}function UA(r,t,e){var a=YH(r,t);return a&&a!==Ru?a.clipPath(e,r._transform):Oe(e)}function $ue(r){var t=um(r[0][0],r[1][0]),e=um(r[0][1],r[1][1]),a=Gh(r[0][0],r[1][0]),n=Gh(r[0][1],r[1][1]);return{x:t,y:e,width:a-t,height:n-e}}function que(r,t,e){if(!(!r._brushType||Zue(r,t.offsetX,t.offsetY))){var a=r._zr,n=r._covers,s=HA(r,t,e);if(!r._dragging)for(var l=0;l<n.length;l++){var o=n[l].__brushOption;if(s&&(s===Ru||o.panelId===s.panelId)&&$b[o.brushType].contain(n[l],e[0],e[1]))return}s&&a.setCursorStyle("crosshair")}}function rC(r){var t=r.event;t.preventDefault&&t.preventDefault()}function aC(r,t,e){return r.childOfName("main").contain(t,e)}function KH(r,t,e,a){var n=r._creatingCover,s=r._creatingPanel,l=r._brushOption,o;if(r._track.push(e.slice()),Uue(r)||n){if(s&&!n){l.brushMode==="single"&&J2(r);var c=Oe(l);c.brushType=F6(c.brushType,s),c.panelId=s===Ru?null:s.panelId,n=r._creatingCover=HH(r,c),r._covers.push(n)}if(n){var u=$b[F6(r._brushType,s)],d=n.__brushOption;d.range=u.getCreatingRange(UA(r,n,r._track)),a&&(GH(r,n),u.updateCommon(r,n)),UH(r,n),o={isEnd:a}}}else a&&l.brushMode==="single"&&l.removeOnClick&&HA(r,t,e)&&J2(r)&&(o={isEnd:a,removeOnClick:!0});return o}function F6(r,t){return r==="auto"?t.defaultBrushType:r}var Xue={mousedown:function(r){if(this._dragging)Y6(this,r);else if(!r.target||!r.target.draggable){rC(r);var t=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var e=this._creatingPanel=HA(this,r,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(r){var t=r.offsetX,e=r.offsetY,a=this.group.transformCoordToLocal(t,e);if(que(this,r,a),this._dragging){rC(r);var n=KH(this,r,a,!1);n&&Lu(this,n)}},mouseup:function(r){Y6(this,r)}};function Y6(r,t){if(r._dragging){rC(t);var e=t.offsetX,a=t.offsetY,n=r.group.transformCoordToLocal(e,a),s=KH(r,t,n,!0);r._dragging=!1,r._track=[],r._creatingCover=null,s&&Lu(r,s)}}function Zue(r,t,e){var a=r._zr;return t<0||t>a.getWidth()||e<0||e>a.getHeight()}var $b={lineX:W6(0),lineY:W6(1),rect:{createCover:function(r,t){function e(a){return a}return $H({toRectRange:e,fromRectRange:e},r,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var t=WH(r);return XH(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(r,t,e,a){qH(r,t,e,a)},updateCommon:eC,contain:aC},polygon:{createCover:function(r,t){var e=new Pe;return e.add(new ma({name:"main",style:GA(t),silent:!0})),e},getCreatingRange:function(r){return r},endCreating:function(r,t){t.remove(t.childAt(0)),t.add(new Ma({name:"main",draggable:!0,drift:et(Wue,r,t),ondragend:et(Lu,r,{isEnd:!0})}))},updateCoverShape:function(r,t,e,a){t.childAt(0).setShape({points:UA(r,t,e)})},updateCommon:eC,contain:aC}};function W6(r){return{createCover:function(t,e){return $H({toRectRange:function(a){var n=[a,[0,100]];return r&&n.reverse(),n},fromRectRange:function(a){return a[r]}},t,e,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(t){var e=WH(t),a=um(e[0][r],e[1][r]),n=Gh(e[0][r],e[1][r]);return[a,n]},updateCoverShape:function(t,e,a,n){var s,l=YH(t,e);if(l!==Ru&&l.getLinearBrushOtherExtent)s=l.getLinearBrushOtherExtent(r);else{var o=t._zr;s=[0,[o.getWidth(),o.getHeight()][1-r]]}var c=[a,s];r&&c.reverse(),qH(t,e,c,n)},updateCommon:eC,contain:aC}}function QH(r){return r=FA(r),function(t){return yT(t,r)}}function JH(r,t){return r=FA(r),function(e){var a=t??e,n=a?r.width:r.height,s=a?r.x:r.y;return[s,s+(n||0)]}}function eG(r,t,e){var a=FA(r);return function(n,s){return a.contain(s[0],s[1])&&!sH(n,t,e)}}function FA(r){return We.create(r)}var Kue=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){r.prototype.init.apply(this,arguments),(this._brushController=new zA(a.getZr())).on("brush",we(this._onBrush,this))},t.prototype.render=function(e,a,n,s){if(!Que(e,a,s)){this.axisModel=e,this.api=n,this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new Pe,this.group.add(this._axisGroup),!!e.get("show")){var o=ede(e,a),c=o.coordinateSystem,u=e.getAreaSelectStyle(),d=u.width,h=e.axis.dim,p=c.getAxisLayout(h),g=ie({strokeContainThreshold:d},p),v=new qa(e,n,g);v.build(),this._axisGroup.add(v.group),this._refreshBrushController(g,u,e,o,d,n),Rm(l,this._axisGroup,e)}}},t.prototype._refreshBrushController=function(e,a,n,s,l,o){var c=n.axis.getExtent(),u=c[1]-c[0],d=Math.min(30,Math.abs(u)*.1),h=We.create({x:c[0],y:-l/2,width:u,height:l});h.x-=d,h.width+=2*d,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:QH(h),isTargetByCursor:eG(h,o,s),getLinearBrushOtherExtent:JH(h,0)}]).enableBrush({brushType:"lineX",brushStyle:a,removeOnClick:!0}).updateCovers(Jue(n))},t.prototype._onBrush=function(e){var a=e.areas,n=this.axisModel,s=n.axis,l=pe(a,function(o){return[s.coordToData(o.range[0],!0),s.coordToData(o.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:l})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t})(Yt);function Que(r,t,e){return e&&e.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:e})[0]===r}function Jue(r){var t=r.axis;return pe(r.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}})}function ede(r,t){return t.getComponent("parallel",r.get("parallelIndex"))}var tde={type:"axisAreaSelect",event:"axisAreaSelected"};function rde(r){r.registerAction(tde,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(a){a.axis.model.setActiveIntervals(t.intervals)})}),r.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(a){a.setAxisExpand(t)})})}var ade={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function tG(r){r.registerComponentView(Sue),r.registerComponentModel(Tue),r.registerCoordinateSystem("parallel",kue),r.registerPreprocessor(_ue),r.registerComponentModel(Q2),r.registerComponentView(Kue),Vh(r,"parallel",Q2,ade),rde(r)}function nde(r){st(tG),r.registerChartView(fue),r.registerSeriesModel(mue),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,bue)}var sde=(function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r})(),ide=(function(r){re(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new sde},t.prototype.buildPath=function(e,a){var n=a.extent;e.moveTo(a.x1,a.y1),e.bezierCurveTo(a.cpx1,a.cpy1,a.cpx2,a.cpy2,a.x2,a.y2),a.orient==="vertical"?(e.lineTo(a.x2+n,a.y2),e.bezierCurveTo(a.cpx2+n,a.cpy2,a.cpx1+n,a.cpy1,a.x1+n,a.y1)):(e.lineTo(a.x2,a.y2+n),e.bezierCurveTo(a.cpx2,a.cpy2+n,a.cpx1,a.cpy1+n,a.x1,a.y1+n)),e.closePath()},t.prototype.highlight=function(){Sl(this)},t.prototype.downplay=function(){Cl(this)},t})(ht),lde=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new Pe,e._focusAdjacencyDisabled=!1,e}return t.prototype.init=function(e,a){this._controller=new Uu(a.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,a,n){var s=this,l=e.getGraph(),o=this._mainGroup,c=e.layoutInfo,u=c.width,d=c.height,h=e.getData(),p=e.getData("edge"),g=e.get("orient");this._model=e,o.removeAll(),o.x=c.x,o.y=c.y,this._updateViewCoordSys(e,n),iH(e,n,o,this._controller,this._controllerHost,null),l.eachEdge(function(v){var y=new ide,x=Xe(y);x.dataIndex=v.dataIndex,x.seriesIndex=e.seriesIndex,x.dataType="edge";var b=v.getModel(),N=b.getModel("lineStyle"),w=N.get("curveness"),S=v.node1.getLayout(),T=v.node1.getModel(),A=T.get("localX"),C=T.get("localY"),M=v.node2.getLayout(),R=v.node2.getModel(),k=R.get("localX"),L=R.get("localY"),O=v.getLayout(),z,U,H,P,F,Y,X,q;y.shape.extent=Math.max(1,O.dy),y.shape.orient=g,g==="vertical"?(z=(A!=null?A*u:S.x)+O.sy,U=(C!=null?C*d:S.y)+S.dy,H=(k!=null?k*u:M.x)+O.ty,P=L!=null?L*d:M.y,F=z,Y=U*(1-w)+P*w,X=H,q=U*w+P*(1-w)):(z=(A!=null?A*u:S.x)+S.dx,U=(C!=null?C*d:S.y)+O.sy,H=k!=null?k*u:M.x,P=(L!=null?L*d:M.y)+O.ty,F=z*(1-w)+H*w,Y=U,X=z*w+H*(1-w),q=P),y.setShape({x1:z,y1:U,x2:H,y2:P,cpx1:F,cpy1:Y,cpx2:X,cpy2:q}),y.useStyle(N.getItemStyle()),$6(y.style,g,v);var G=""+b.get("value"),$=Zr(b,"edgeLabel");ia(y,$,{labelFetcher:{getFormattedLabel:function(me,Ce,Ve,Ee,be,He){return e.getFormattedLabel(me,Ce,"edge",Ee,fn(be,$.normal&&$.normal.get("formatter"),G),He)}},labelDataIndex:v.dataIndex,defaultText:G}),y.setTextConfig({position:"inside"});var Z=b.getModel("emphasis");Xr(y,b,"lineStyle",function(me){var Ce=me.getItemStyle();return $6(Ce,g,v),Ce}),o.add(y),p.setItemGraphicEl(v.dataIndex,y);var te=Z.get("focus");nr(y,te==="adjacency"?v.getAdjacentDataIndices():te==="trajectory"?v.getTrajectoryDataIndices():te,Z.get("blurScope"),Z.get("disabled"))}),l.eachNode(function(v){var y=v.getLayout(),x=v.getModel(),b=x.get("localX"),N=x.get("localY"),w=x.getModel("emphasis"),S=x.get(["itemStyle","borderRadius"])||0,T=new it({shape:{x:b!=null?b*u:y.x,y:N!=null?N*d:y.y,width:y.dx,height:y.dy,r:S},style:x.getModel("itemStyle").getItemStyle(),z2:10});ia(T,Zr(x),{labelFetcher:{getFormattedLabel:function(C,M){return e.getFormattedLabel(C,M,"node")}},labelDataIndex:v.dataIndex,defaultText:v.id}),T.disableLabelAnimation=!0,T.setStyle("fill",v.getVisual("color")),T.setStyle("decal",v.getVisual("style").decal),Xr(T,x),o.add(T),h.setItemGraphicEl(v.dataIndex,T),Xe(T).dataType="node";var A=w.get("focus");nr(T,A==="adjacency"?v.getAdjacentDataIndices():A==="trajectory"?v.getTrajectoryDataIndices():A,w.get("blurScope"),w.get("disabled"))}),h.eachItemGraphicEl(function(v,y){var x=h.getItemModel(y);x.get("draggable")&&(v.drift=function(b,N){s._focusAdjacencyDisabled=!0,this.shape.x+=b,this.shape.y+=N,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:h.getRawIndex(y),localX:this.shape.x/u,localY:this.shape.y/d})},v.ondragend=function(){s._focusAdjacencyDisabled=!1},v.draggable=!0,v.cursor="move")}),!this._data&&e.isAnimationEnabled()&&o.setClipPath(ode(o.getBoundingRect(),e,function(){o.removeClipPath()})),this._data=e.getData()},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._updateViewCoordSys=function(e,a){var n=e.layoutInfo,s=n.width,l=n.height,o=e.coordinateSystem=new Fu(null,{api:a,ecModel:e.ecModel});o.zoomLimit=e.get("scaleLimit"),o.setBoundingRect(0,0,s,l),o.setCenter(e.get("center")),o.setZoom(e.get("zoom")),this._controllerHost.target.attr({x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY})},t.type="sankey",t})(Pt);function $6(r,t,e){switch(r.fill){case"source":r.fill=e.node1.getVisual("color"),r.decal=e.node1.getVisual("style").decal;break;case"target":r.fill=e.node2.getVisual("color"),r.decal=e.node2.getVisual("style").decal;break;case"gradient":var a=e.node1.getVisual("color"),n=e.node2.getVisual("color");je(a)&&je(n)&&(r.fill=new Pu(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:a,offset:0},{color:n,offset:1}]))}}function ode(r,t,e){var a=new it({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return Kt(a,{shape:{width:r.width+20}},t,e),a}var cde=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){var n=e.edges||e.links||[],s=e.data||e.nodes||[],l=e.levels||[];this.levelModels=[];for(var o=this.levelModels,c=0;c<l.length;c++)l[c].depth!=null&&l[c].depth>=0&&(o[l[c].depth]=new dt(l[c],this,a));var u=PA(s,n,this,!0,d);return u.data;function d(h,p){h.wrapMethod("getItemModel",function(g,v){var y=g.parentModel,x=y.getData().getItemLayout(v);if(x){var b=x.depth,N=y.levelModels[b];N&&(g.parentModel=N)}return g}),p.wrapMethod("getItemModel",function(g,v){var y=g.parentModel,x=y.getGraph().getEdgeByIndex(v),b=x.node1.getLayout();if(b){var N=b.depth,w=y.levelModels[N];w&&(g.parentModel=w)}return g})}},t.prototype.setNodePosition=function(e,a){var n=this.option.data||this.option.nodes,s=n[e];s.localX=a[0],s.localY=a[1]},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,a,n){function s(g){return isNaN(g)||g==null}if(n==="edge"){var l=this.getDataParams(e,n),o=l.data,c=l.value,u=o.source+" -- "+o.target;return Br("nameValue",{name:u,value:c,noValue:s(c)})}else{var d=this.getGraph().getNodeByIndex(e),h=d.getLayout().value,p=this.getDataParams(e,n).data.name;return Br("nameValue",{name:p!=null?p+"":null,value:h,noValue:s(h)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,a){var n=r.prototype.getDataParams.call(this,e,a);if(n.value==null&&a==="node"){var s=this.getGraph().getNodeByIndex(e),l=s.getLayout().value;n.value=l}return n},t.type="series.sankey",t.layoutMode="box",t.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:ee.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:ee.color.primary}},animationEasing:"linear",animationDuration:1e3},t})(zt);function ude(r,t){r.eachSeriesByType("sankey",function(e){var a=e.get("nodeWidth"),n=e.get("nodeGap"),s=Kr(e,t).refContainer,l=rr(e.getBoxLayoutParams(),s);e.layoutInfo=l;var o=l.width,c=l.height,u=e.getGraph(),d=u.nodes,h=u.edges;hde(d);var p=Ct(d,function(x){return x.getLayout().value===0}),g=p.length!==0?0:e.get("layoutIterations"),v=e.get("orient"),y=e.get("nodeAlign");dde(d,h,a,n,o,c,g,v,y)})}function dde(r,t,e,a,n,s,l,o,c){fde(r,t,e,n,s,o,c),vde(r,t,s,n,a,l,o),Cde(r,o)}function hde(r){B(r,function(t){var e=ko(t.outEdges,Gy),a=ko(t.inEdges,Gy),n=t.getValue()||0,s=Math.max(e,a,n);t.setLayout({value:s},!0)})}function fde(r,t,e,a,n,s,l){for(var o=[],c=[],u=[],d=[],h=0,p=0;p<t.length;p++)o[p]=1;for(var p=0;p<r.length;p++)c[p]=r[p].inEdges.length,c[p]===0&&u.push(r[p]);for(var g=-1;u.length;){for(var v=0;v<u.length;v++){var y=u[v],x=y.hostGraph.data.getRawDataItem(y.dataIndex),b=x.depth!=null&&x.depth>=0;b&&x.depth>g&&(g=x.depth),y.setLayout({depth:b?x.depth:h},!0),s==="vertical"?y.setLayout({dy:e},!0):y.setLayout({dx:e},!0);for(var N=0;N<y.outEdges.length;N++){var w=y.outEdges[N],S=t.indexOf(w);o[S]=0;var T=w.node2,A=r.indexOf(T);--c[A]===0&&d.indexOf(T)<0&&d.push(T)}}++h,u=d,d=[]}for(var p=0;p<o.length;p++)if(o[p]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var C=g>h-1?g:h-1;l&&l!=="left"&&pde(r,l,s,C);var M=s==="vertical"?(n-e)/C:(a-e)/C;mde(r,M,s)}function rG(r){var t=r.hostGraph.data.getRawDataItem(r.dataIndex);return t.depth!=null&&t.depth>=0}function pde(r,t,e,a){if(t==="right"){for(var n=[],s=r,l=0;s.length;){for(var o=0;o<s.length;o++){var c=s[o];c.setLayout({skNodeHeight:l},!0);for(var u=0;u<c.inEdges.length;u++){var d=c.inEdges[u];n.indexOf(d.node1)<0&&n.push(d.node1)}}s=n,n=[],++l}B(r,function(h){rG(h)||h.setLayout({depth:Math.max(0,a-h.getLayout().skNodeHeight)},!0)})}else t==="justify"&&gde(r,a)}function gde(r,t){B(r,function(e){!rG(e)&&!e.outEdges.length&&e.setLayout({depth:t},!0)})}function mde(r,t,e){B(r,function(a){var n=a.getLayout().depth*t;e==="vertical"?a.setLayout({y:n},!0):a.setLayout({x:n},!0)})}function vde(r,t,e,a,n,s,l){var o=xde(r,l);yde(o,t,e,a,n,l),sw(o,n,e,a,l);for(var c=1;s>0;s--)c*=.99,bde(o,c,l),sw(o,n,e,a,l),Sde(o,c,l),sw(o,n,e,a,l)}function xde(r,t){var e=[],a=t==="vertical"?"y":"x",n=GS(r,function(s){return s.getLayout()[a]});return n.keys.sort(function(s,l){return s-l}),B(n.keys,function(s){e.push(n.buckets.get(s))}),e}function yde(r,t,e,a,n,s){var l=1/0;B(r,function(o){var c=o.length,u=0;B(o,function(h){u+=h.getLayout().value});var d=s==="vertical"?(a-(c-1)*n)/u:(e-(c-1)*n)/u;d<l&&(l=d)}),B(r,function(o){B(o,function(c,u){var d=c.getLayout().value*l;s==="vertical"?(c.setLayout({x:u},!0),c.setLayout({dx:d},!0)):(c.setLayout({y:u},!0),c.setLayout({dy:d},!0))})}),B(t,function(o){var c=+o.getValue()*l;o.setLayout({dy:c},!0)})}function sw(r,t,e,a,n){var s=n==="vertical"?"x":"y";B(r,function(l){l.sort(function(y,x){return y.getLayout()[s]-x.getLayout()[s]});for(var o,c,u,d=0,h=l.length,p=n==="vertical"?"dx":"dy",g=0;g<h;g++)c=l[g],u=d-c.getLayout()[s],u>0&&(o=c.getLayout()[s]+u,n==="vertical"?c.setLayout({x:o},!0):c.setLayout({y:o},!0)),d=c.getLayout()[s]+c.getLayout()[p]+t;var v=n==="vertical"?a:e;if(u=d-t-v,u>0){o=c.getLayout()[s]-u,n==="vertical"?c.setLayout({x:o},!0):c.setLayout({y:o},!0),d=o;for(var g=h-2;g>=0;--g)c=l[g],u=c.getLayout()[s]+c.getLayout()[p]+t-d,u>0&&(o=c.getLayout()[s]-u,n==="vertical"?c.setLayout({x:o},!0):c.setLayout({y:o},!0)),d=c.getLayout()[s]}})}function bde(r,t,e){B(r.slice().reverse(),function(a){B(a,function(n){if(n.outEdges.length){var s=ko(n.outEdges,_de,e)/ko(n.outEdges,Gy);if(isNaN(s)){var l=n.outEdges.length;s=l?ko(n.outEdges,Nde,e)/l:0}if(e==="vertical"){var o=n.getLayout().x+(s-Ho(n,e))*t;n.setLayout({x:o},!0)}else{var c=n.getLayout().y+(s-Ho(n,e))*t;n.setLayout({y:c},!0)}}})})}function _de(r,t){return Ho(r.node2,t)*r.getValue()}function Nde(r,t){return Ho(r.node2,t)}function jde(r,t){return Ho(r.node1,t)*r.getValue()}function wde(r,t){return Ho(r.node1,t)}function Ho(r,t){return t==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function Gy(r){return r.getValue()}function ko(r,t,e){for(var a=0,n=r.length,s=-1;++s<n;){var l=+t(r[s],e);isNaN(l)||(a+=l)}return a}function Sde(r,t,e){B(r,function(a){B(a,function(n){if(n.inEdges.length){var s=ko(n.inEdges,jde,e)/ko(n.inEdges,Gy);if(isNaN(s)){var l=n.inEdges.length;s=l?ko(n.inEdges,wde,e)/l:0}if(e==="vertical"){var o=n.getLayout().x+(s-Ho(n,e))*t;n.setLayout({x:o},!0)}else{var c=n.getLayout().y+(s-Ho(n,e))*t;n.setLayout({y:c},!0)}}})})}function Cde(r,t){var e=t==="vertical"?"x":"y";B(r,function(a){a.outEdges.sort(function(n,s){return n.node2.getLayout()[e]-s.node2.getLayout()[e]}),a.inEdges.sort(function(n,s){return n.node1.getLayout()[e]-s.node1.getLayout()[e]})}),B(r,function(a){var n=0,s=0;B(a.outEdges,function(l){l.setLayout({sy:n},!0),n+=l.getLayout().dy}),B(a.inEdges,function(l){l.setLayout({ty:s},!0),s+=l.getLayout().dy})})}function Tde(r){r.eachSeriesByType("sankey",function(t){var e=t.getGraph(),a=e.nodes,n=e.edges;if(a.length){var s=1/0,l=-1/0;B(a,function(o){var c=o.getLayout().value;c<s&&(s=c),c>l&&(l=c)}),B(a,function(o){var c=new sa({type:"color",mappingMethod:"linear",dataExtent:[s,l],visual:t.get("color")}),u=c.mapValueToVisual(o.getLayout().value),d=o.getModel().get(["itemStyle","color"]);d!=null?(o.setVisual("color",d),o.setVisual("style",{fill:d})):(o.setVisual("color",u),o.setVisual("style",{fill:u}))})}n.length&&B(n,function(o){var c=o.getModel().get("lineStyle");o.setVisual("style",c)})})}function Ade(r){r.registerChartView(lde),r.registerSeriesModel(cde),r.registerLayout(ude),r.registerVisual(Tde),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(a){a.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),r.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(t,e,a){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(n){var s=n.coordinateSystem,l=Ub(s,t,n.get("scaleLimit"));n.setCenter(l.center),n.setZoom(l.zoom)})})}var aG=(function(){function r(){}return r.prototype._hasEncodeRule=function(t){var e=this.getEncode();return e&&e.get(t)!=null},r.prototype.getInitialData=function(t,e){var a,n=e.getComponent("xAxis",this.get("xAxisIndex")),s=e.getComponent("yAxis",this.get("yAxisIndex")),l=n.get("type"),o=s.get("type"),c;l==="category"?(t.layout="horizontal",a=n.getOrdinalMeta(),c=!this._hasEncodeRule("x")):o==="category"?(t.layout="vertical",a=s.getOrdinalMeta(),c=!this._hasEncodeRule("y")):t.layout=t.layout||"horizontal";var u=["x","y"],d=t.layout==="horizontal"?0:1,h=this._baseAxisDim=u[d],p=u[1-d],g=[n,s],v=g[d].get("type"),y=g[1-d].get("type"),x=t.data;if(x&&c){var b=[];B(x,function(S,T){var A;de(S)?(A=S.slice(),S.unshift(T)):de(S.value)?(A=ie({},S),A.value=A.value.slice(),S.value.unshift(T)):A=S,b.push(A)}),t.data=b}var N=this.defaultValueDimensions,w=[{name:h,type:Sy(v),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:Sy(y),dimsDef:N.slice()}];return gf(this,{coordDimensions:w,dimensionsCount:N.length+1,encodeDefaulter:et(fB,w,this)})},r.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},r})(),nG=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:ee.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:ee.color.shadow}},animationDuration:800},t})(zt);yr(nG,aG,!0);var Ede=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=e.getData(),l=this.group,o=this._data;this._data||l.removeAll();var c=e.get("layout")==="horizontal"?1:0;s.diff(o).add(function(u){if(s.hasValue(u)){var d=s.getItemLayout(u),h=q6(d,s,u,c,!0);s.setItemGraphicEl(u,h),l.add(h)}}).update(function(u,d){var h=o.getItemGraphicEl(d);if(!s.hasValue(u)){l.remove(h);return}var p=s.getItemLayout(u);h?(ps(h),sG(p,h,s,u)):h=q6(p,s,u,c),l.add(h),s.setItemGraphicEl(u,h)}).remove(function(u){var d=o.getItemGraphicEl(u);d&&l.remove(d)}).execute(),this._data=s},t.prototype.remove=function(e){var a=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(s){s&&a.remove(s)})},t.type="boxplot",t})(Pt),Dde=(function(){function r(){}return r})(),Mde=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="boxplotBoxPath",a}return t.prototype.getDefaultShape=function(){return new Dde},t.prototype.buildPath=function(e,a){var n=a.points,s=0;for(e.moveTo(n[s][0],n[s][1]),s++;s<4;s++)e.lineTo(n[s][0],n[s][1]);for(e.closePath();s<n.length;s++)e.moveTo(n[s][0],n[s][1]),s++,e.lineTo(n[s][0],n[s][1])},t})(ht);function q6(r,t,e,a,n){var s=r.ends,l=new Mde({shape:{points:n?Rde(s,a,r):s}});return sG(r,l,t,e,n),l}function sG(r,t,e,a,n){var s=e.hostModel,l=zu[n?"initProps":"updateProps"];l(t,{shape:{points:r.ends}},s,a),t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.z2=100;var o=e.getItemModel(a),c=o.getModel("emphasis");Xr(t,o),nr(t,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function Rde(r,t,e){return pe(r,function(a){return a=a.slice(),a[t]=e.initBaseline,a})}var Eg=B;function Lde(r){var t=Ide(r);Eg(t,function(e){var a=e.seriesModels;a.length&&(kde(e),Eg(a,function(n,s){Ode(n,e.boxOffsetList[s],e.boxWidthList[s])}))})}function Ide(r){var t=[],e=[];return r.eachSeriesByType("boxplot",function(a){var n=a.getBaseAxis(),s=tt(e,n);s<0&&(s=e.length,e[s]=n,t[s]={axis:n,seriesModels:[]}),t[s].seriesModels.push(a)}),t}function kde(r){var t=r.axis,e=r.seriesModels,a=e.length,n=r.boxWidthList=[],s=r.boxOffsetList=[],l=[],o;if(t.type==="category")o=t.getBandWidth();else{var c=0;Eg(e,function(v){c=Math.max(c,v.getData().count())});var u=t.getExtent();o=Math.abs(u[1]-u[0])/c}Eg(e,function(v){var y=v.get("boxWidth");de(y)||(y=[y,y]),l.push([Ne(y[0],o)||0,Ne(y[1],o)||0])});var d=o*.8-2,h=d/a*.3,p=(d-h*(a-1))/a,g=p/2-d/2;Eg(e,function(v,y){s.push(g),g+=h+p,n.push(Math.min(Math.max(p,l[y][0]),l[y][1]))})}function Ode(r,t,e){var a=r.coordinateSystem,n=r.getData(),s=e/2,l=r.get("layout")==="horizontal"?0:1,o=1-l,c=["x","y"],u=n.mapDimension(c[l]),d=n.mapDimensionsAll(c[o]);if(u==null||d.length<5)return;for(var h=0;h<n.count();h++){var p=n.get(u,h),g=w(p,d[2],h),v=w(p,d[0],h),y=w(p,d[1],h),x=w(p,d[3],h),b=w(p,d[4],h),N=[];S(N,y,!1),S(N,x,!0),N.push(v,y,b,x),T(N,v),T(N,b),T(N,g),n.setItemLayout(h,{initBaseline:g[o],ends:N})}function w(A,C,M){var R=n.get(C,M),k=[];k[l]=A,k[o]=R;var L;return isNaN(A)||isNaN(R)?L=[NaN,NaN]:(L=a.dataToPoint(k),L[l]+=t),L}function S(A,C,M){var R=C.slice(),k=C.slice();R[l]+=s,k[l]-=s,M?A.push(R,k):A.push(k,R)}function T(A,C){var M=C.slice(),R=C.slice();M[l]-=s,R[l]+=s,A.push(M,R)}}function Pde(r,t){t=t||{};for(var e=[],a=[],n=t.boundIQR,s=n==="none"||n===0,l=0;l<r.length;l++){var o=Mn(r[l].slice()),c=Ex(o,.25),u=Ex(o,.5),d=Ex(o,.75),h=o[0],p=o[o.length-1],g=(n??1.5)*(d-c),v=s?h:Math.max(h,c-g),y=s?p:Math.min(p,d+g),x=t.itemNameFormatter,b=Le(x)?x({value:l}):je(x)?x.replace("{value}",l+""):l+"";e.push([b,v,c,u,d,y]);for(var N=0;N<o.length;N++){var w=o[N];if(w<v||w>y){var S=[b,w];a.push(S)}}}return{boxData:e,outliers:a}}var zde={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==va){var a="";At(a)}var n=Pde(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function Bde(r){r.registerSeriesModel(nG),r.registerChartView(Ede),r.registerLayout(Lde),r.registerTransform(zde)}var Vde=["itemStyle","borderColor"],Hde=["itemStyle","borderColor0"],Gde=["itemStyle","borderColorDoji"],Ude=["itemStyle","color"],Fde=["itemStyle","color0"];function YA(r,t){return t.get(r>0?Ude:Fde)}function WA(r,t){return t.get(r===0?Gde:r>0?Vde:Hde)}var Yde={seriesType:"candlestick",plan:of(),performRawSeries:!0,reset:function(r,t){if(!t.isSeriesFiltered(r)){var e=r.pipelineContext.large;return!e&&{progress:function(a,n){for(var s;(s=a.next())!=null;){var l=n.getItemModel(s),o=n.getItemLayout(s).sign,c=l.getItemStyle();c.fill=YA(o,l),c.stroke=WA(o,l)||c.fill;var u=n.ensureUniqueItemVisual(s,"style");ie(u,c)}}}}}},Wde=["color","borderColor"],$de=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,a,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,a,n,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,a):this._incrementalRenderNormal(e,a)},t.prototype.eachRendered=function(e){Wo(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var a=e.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(e){var a=e.getData(),n=this._data,s=this.group,l=a.getLayout("isSimpleBox"),o=e.get("clip",!0),c=e.coordinateSystem,u=c.getArea&&c.getArea();this._data||s.removeAll(),a.diff(n).add(function(d){if(a.hasValue(d)){var h=a.getItemLayout(d);if(o&&X6(u,h))return;var p=iw(h,d,!0);Kt(p,{shape:{points:h.ends}},e,d),lw(p,a,d,l),s.add(p),a.setItemGraphicEl(d,p)}}).update(function(d,h){var p=n.getItemGraphicEl(h);if(!a.hasValue(d)){s.remove(p);return}var g=a.getItemLayout(d);if(o&&X6(u,g)){s.remove(p);return}p?(Nt(p,{shape:{points:g.ends}},e,d),ps(p)):p=iw(g),lw(p,a,d,l),s.add(p),a.setItemGraphicEl(d,p)}).remove(function(d){var h=n.getItemGraphicEl(d);h&&s.remove(h)}).execute(),this._data=a},t.prototype._renderLarge=function(e){this._clear(),Z6(e,this.group);var a=e.get("clip",!0)?Bm(e.coordinateSystem,!1,e):null;a?this.group.setClipPath(a):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,a){for(var n=a.getData(),s=n.getLayout("isSimpleBox"),l;(l=e.next())!=null;){var o=n.getItemLayout(l),c=iw(o);lw(c,n,l,s),c.incremental=!0,this.group.add(c),this._progressiveEls.push(c)}},t.prototype._incrementalRenderLarge=function(e,a){Z6(a,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t})(Pt),qde=(function(){function r(){}return r})(),Xde=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="normalCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new qde},t.prototype.buildPath=function(e,a){var n=a.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t})(ht);function iw(r,t,e){var a=r.ends;return new Xde({shape:{points:e?Zde(a,r):a},z2:100})}function X6(r,t){for(var e=!0,a=0;a<t.ends.length;a++)if(r.contain(t.ends[a][0],t.ends[a][1])){e=!1;break}return e}function lw(r,t,e,a){var n=t.getItemModel(e);r.useStyle(t.getItemVisual(e,"style")),r.style.strokeNoScale=!0,r.__simpleBox=a,Xr(r,n);var s=t.getItemLayout(e).sign;B(r.states,function(o,c){var u=n.getModel(c),d=YA(s,u),h=WA(s,u)||d,p=o.style||(o.style={});d&&(p.fill=d),h&&(p.stroke=h)});var l=n.getModel("emphasis");nr(r,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function Zde(r,t){return pe(r,function(e){return e=e.slice(),e[1]=t.initBaseline,e})}var Kde=(function(){function r(){}return r})(),ow=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a.type="largeCandlestickBox",a}return t.prototype.getDefaultShape=function(){return new Kde},t.prototype.buildPath=function(e,a){for(var n=a.points,s=0;s<n.length;)if(this.__sign===n[s++]){var l=n[s++];e.moveTo(l,n[s++]),e.lineTo(l,n[s++])}else s+=3},t})(ht);function Z6(r,t,e,a){var n=r.getData(),s=n.getLayout("largePoints"),l=new ow({shape:{points:s},__sign:1,ignoreCoarsePointer:!0});t.add(l);var o=new ow({shape:{points:s},__sign:-1,ignoreCoarsePointer:!0});t.add(o);var c=new ow({shape:{points:s},__sign:0,ignoreCoarsePointer:!0});t.add(c),cw(1,l,r),cw(-1,o,r),cw(0,c,r),a&&(l.incremental=!0,o.incremental=!0),e&&e.push(l,o)}function cw(r,t,e,a){var n=WA(r,e)||YA(r,e),s=e.getModel("itemStyle").getItemStyle(Wde);t.useStyle(s),t.style.fill=null,t.style.stroke=n}var iG=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,a,n){var s=a.getItemLayout(e);return s&&n.rect(s.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t})(zt);yr(iG,aG,!0);function Qde(r){!r||!de(r.series)||B(r.series,function(t){Ue(t)&&t.type==="k"&&(t.type="candlestick")})}var Jde={seriesType:"candlestick",plan:of(),reset:function(r){var t=r.coordinateSystem,e=r.getData(),a=ehe(r,e),n=0,s=1,l=["x","y"],o=e.getDimensionIndex(e.mapDimension(l[n])),c=pe(e.mapDimensionsAll(l[s]),e.getDimensionIndex,e),u=c[0],d=c[1],h=c[2],p=c[3];if(e.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),o<0||c.length<4)return;return{progress:r.pipelineContext.large?v:g};function g(y,x){for(var b,N=x.getStore();(b=y.next())!=null;){var w=N.get(o,b),S=N.get(u,b),T=N.get(d,b),A=N.get(h,b),C=N.get(p,b),M=Math.min(S,T),R=Math.max(S,T),k=F(M,w),L=F(R,w),O=F(A,w),z=F(C,w),U=[];Y(U,L,0),Y(U,k,1),U.push(q(z),q(L),q(O),q(k));var H=x.getItemModel(b),P=!!H.get(["itemStyle","borderColorDoji"]);x.setItemLayout(b,{sign:K6(N,b,S,T,d,P),initBaseline:S>T?L[s]:k[s],ends:U,brushRect:X(A,C,w)})}function F(G,$){var Z=[];return Z[n]=$,Z[s]=G,isNaN($)||isNaN(G)?[NaN,NaN]:t.dataToPoint(Z)}function Y(G,$,Z){var te=$.slice(),me=$.slice();te[n]=Mx(te[n]+a/2,1,!1),me[n]=Mx(me[n]-a/2,1,!0),Z?G.push(te,me):G.push(me,te)}function X(G,$,Z){var te=F(G,Z),me=F($,Z);return te[n]-=a/2,me[n]-=a/2,{x:te[0],y:te[1],width:a,height:me[1]-te[1]}}function q(G){return G[n]=Mx(G[n],1),G}}function v(y,x){for(var b=gi(y.count*4),N=0,w,S=[],T=[],A,C=x.getStore(),M=!!r.get(["itemStyle","borderColorDoji"]);(A=y.next())!=null;){var R=C.get(o,A),k=C.get(u,A),L=C.get(d,A),O=C.get(h,A),z=C.get(p,A);if(isNaN(R)||isNaN(O)||isNaN(z)){b[N++]=NaN,N+=3;continue}b[N++]=K6(C,A,k,L,d,M),S[n]=R,S[s]=O,w=t.dataToPoint(S,null,T),b[N++]=w?w[0]:NaN,b[N++]=w?w[1]:NaN,S[s]=z,w=t.dataToPoint(S,null,T),b[N++]=w?w[1]:NaN}x.setLayout("largePoints",b)}}};function K6(r,t,e,a,n,s){var l;return e>a?l=-1:e<a?l=1:l=s?0:t>0?r.get(n,t-1)<=a?1:-1:1,l}function ehe(r,t){var e=r.getBaseAxis(),a,n=e.type==="category"?e.getBandWidth():(a=e.getExtent(),Math.abs(a[1]-a[0])/t.count()),s=Ne(Me(r.get("barMaxWidth"),n),n),l=Ne(Me(r.get("barMinWidth"),1),n),o=r.get("barWidth");return o!=null?Ne(o,n):Math.max(Math.min(n/2,s),l)}function the(r){r.registerChartView($de),r.registerSeriesModel(iG),r.registerPreprocessor(Qde),r.registerVisual(Yde),r.registerLayout(Jde)}function Q6(r,t){var e=t.rippleEffectColor||t.color;r.eachChild(function(a){a.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?e:null,fill:t.brushType==="fill"?e:null}})})}var rhe=(function(r){re(t,r);function t(e,a){var n=r.call(this)||this,s=new Pm(e,a),l=new Pe;return n.add(s),n.add(l),n.updateData(e,a),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var a=e.symbolType,n=e.color,s=e.rippleNumber,l=this.childAt(1),o=0;o<s;o++){var c=Er(a,-1,-1,2,2,n);c.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-o/s*e.period+e.effectOffset;c.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(u).start(),c.animateStyle(!0).when(e.period,{opacity:0}).delay(u).start(),l.add(c)}Q6(l,e)},t.prototype.updateEffectAnimation=function(e){for(var a=this._effectCfg,n=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],l=0;l<s.length;l++){var o=s[l];if(a[o]!==e[o]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}Q6(n,e)},t.prototype.highlight=function(){Sl(this)},t.prototype.downplay=function(){Cl(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,a){var n=this,s=e.hostModel;this.childAt(0).updateData(e,a);var l=this.childAt(1),o=e.getItemModel(a),c=e.getItemVisual(a,"symbol"),u=uf(e.getItemVisual(a,"symbolSize")),d=e.getItemVisual(a,"style"),h=d&&d.fill,p=o.getModel("emphasis");l.setScale(u),l.traverse(function(x){x.setStyle("fill",h)});var g=Hu(e.getItemVisual(a,"symbolOffset"),u);g&&(l.x=g[0],l.y=g[1]);var v=e.getItemVisual(a,"symbolRotate");l.rotation=(v||0)*Math.PI/180||0;var y={};y.showEffectOn=s.get("showEffectOn"),y.rippleScale=o.get(["rippleEffect","scale"]),y.brushType=o.get(["rippleEffect","brushType"]),y.period=o.get(["rippleEffect","period"])*1e3,y.effectOffset=a/e.count(),y.z=s.getShallow("z")||0,y.zlevel=s.getShallow("zlevel")||0,y.symbolType=c,y.color=h,y.rippleEffectColor=o.get(["rippleEffect","color"]),y.rippleNumber=o.get(["rippleEffect","number"]),y.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(y):this.startEffectAnimation(y),this._effectCfg=y):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(x){x==="emphasis"?y.showEffectOn!=="render"&&n.startEffectAnimation(y):x==="normal"&&y.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=y,nr(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t})(Pe),ahe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._symbolDraw=new zm(rhe)},t.prototype.render=function(e,a,n){var s=e.getData(),l=this._symbolDraw;l.updateData(s,{clipShape:this._getClipShape(e)}),this.group.add(l.group)},t.prototype._getClipShape=function(e){var a=e.coordinateSystem,n=a&&a.getArea&&a.getArea();return e.get("clip",!0)?n:null},t.prototype.updateTransform=function(e,a,n){var s=e.getData();this.group.dirty();var l=Vm("").reset(e,a,n);l.progress&&l.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var a=e.coordinateSystem;a&&a.getRoamTransform&&(this.group.transform=pz(a.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,a){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t})(Pt),nhe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,a){return Di(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,a,n){return n.point(a.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t})(zt);function she(r){r.registerChartView(ahe),r.registerSeriesModel(nhe),r.registerLayout(Vm("effectScatter"))}var lG=(function(r){re(t,r);function t(e,a,n){var s=r.call(this)||this;return s.add(s.createLine(e,a,n)),s._updateEffectSymbol(e,a),s}return t.prototype.createLine=function(e,a,n){return new kA(e,a,n)},t.prototype._updateEffectSymbol=function(e,a){var n=e.getItemModel(a),s=n.getModel("effect"),l=s.get("symbolSize"),o=s.get("symbol");de(l)||(l=[l,l]);var c=e.getItemVisual(a,"style"),u=s.get("color")||c&&c.stroke,d=this.childAt(1);this._symbolType!==o&&(this.remove(d),d=Er(o,-.5,-.5,1,1,u),d.z2=100,d.culling=!0,this.add(d)),d&&(d.setStyle("shadowColor",u),d.setStyle(s.getItemStyle(["color"])),d.scaleX=l[0],d.scaleY=l[1],d.setColor(u),this._symbolType=o,this._symbolScale=l,this._updateEffectAnimation(e,s,a))},t.prototype._updateEffectAnimation=function(e,a,n){var s=this.childAt(1);if(s){var l=e.getItemLayout(n),o=a.get("period")*1e3,c=a.get("loop"),u=a.get("roundTrip"),d=a.get("constantSpeed"),h=ga(a.get("delay"),function(g){return g/e.count()*o/3});if(s.ignore=!0,this._updateAnimationPoints(s,l),d>0&&(o=this._getLineLength(s)/d*1e3),o!==this._period||c!==this._loop||u!==this._roundTrip){s.stopAnimation();var p=void 0;Le(h)?p=h(n):p=h,s.__t>0&&(p=-o*s.__t),this._animateSymbol(s,o,p,c,u)}this._period=o,this._loop=c,this._roundTrip=u}},t.prototype._animateSymbol=function(e,a,n,s,l){if(a>0){e.__t=0;var o=this,c=e.animate("",s).when(l?a*2:a,{__t:l?2:1}).delay(n).during(function(){o._updateSymbolPosition(e)});s||c.done(function(){o.remove(e)}),c.start()}},t.prototype._getLineLength=function(e){return ul(e.__p1,e.__cp1)+ul(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,a){e.__p1=a[0],e.__p2=a[1],e.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]},t.prototype.updateData=function(e,a,n){this.childAt(0).updateData(e,a,n),this._updateEffectSymbol(e,a)},t.prototype._updateSymbolPosition=function(e){var a=e.__p1,n=e.__p2,s=e.__cp1,l=e.__t<1?e.__t:2-e.__t,o=[e.x,e.y],c=o.slice(),u=pa,d=CS;o[0]=u(a[0],s[0],n[0],l),o[1]=u(a[1],s[1],n[1],l);var h=e.__t<1?d(a[0],s[0],n[0],l):d(n[0],s[0],a[0],1-l),p=e.__t<1?d(a[1],s[1],n[1],l):d(n[1],s[1],a[1],1-l);e.rotation=-Math.atan2(p,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=ul(c,o)*1.05,l===1&&(o[0]=c[0]+(o[0]-c[0])/2,o[1]=c[1]+(o[1]-c[1])/2)):e.__lastT===1?e.scaleY=2*ul(a,o):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=o[0],e.y=o[1]},t.prototype.updateLayout=function(e,a){this.childAt(0).updateLayout(e,a);var n=e.getItemModel(a).getModel("effect");this._updateEffectAnimation(e,n,a)},t})(Pe),oG=(function(r){re(t,r);function t(e,a,n){var s=r.call(this)||this;return s._createPolyline(e,a,n),s}return t.prototype._createPolyline=function(e,a,n){var s=e.getItemLayout(a),l=new ma({shape:{points:s}});this.add(l),this._updateCommonStl(e,a,n)},t.prototype.updateData=function(e,a,n){var s=e.hostModel,l=this.childAt(0),o={shape:{points:e.getItemLayout(a)}};Nt(l,o,s,a),this._updateCommonStl(e,a,n)},t.prototype._updateCommonStl=function(e,a,n){var s=this.childAt(0),l=e.getItemModel(a),o=n&&n.emphasisLineStyle,c=n&&n.focus,u=n&&n.blurScope,d=n&&n.emphasisDisabled;if(!n||e.hasItemOption){var h=l.getModel("emphasis");o=h.getModel("lineStyle").getLineStyle(),d=h.get("disabled"),c=h.get("focus"),u=h.get("blurScope")}s.useStyle(e.getItemVisual(a,"style")),s.style.fill=null,s.style.strokeNoScale=!0;var p=s.ensureState("emphasis");p.style=o,nr(this,c,u,d)},t.prototype.updateLayout=function(e,a){var n=this.childAt(0);n.setShape("points",e.getItemLayout(a))},t})(Pe),ihe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return t.prototype.createLine=function(e,a,n){return new oG(e,a,n)},t.prototype._updateAnimationPoints=function(e,a){this._points=a;for(var n=[0],s=0,l=1;l<a.length;l++){var o=a[l-1],c=a[l];s+=ul(o,c),n.push(s)}if(s===0){this._length=0;return}for(var l=0;l<n.length;l++)n[l]/=s;this._offsets=n,this._length=s},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var a=e.__t<1?e.__t:2-e.__t,n=this._points,s=this._offsets,l=n.length;if(s){var o=this._lastFrame,c;if(a<this._lastFramePercent){var u=Math.min(o+1,l-1);for(c=u;c>=0&&!(s[c]<=a);c--);c=Math.min(c,l-2)}else{for(c=o;c<l&&!(s[c]>a);c++);c=Math.min(c-1,l-2)}var d=(a-s[c])/(s[c+1]-s[c]),h=n[c],p=n[c+1];e.x=h[0]*(1-d)+d*p[0],e.y=h[1]*(1-d)+d*p[1];var g=e.__t<1?p[0]-h[0]:h[0]-p[0],v=e.__t<1?p[1]-h[1]:h[1]-p[1];e.rotation=-Math.atan2(v,g)-Math.PI/2,this._lastFrame=c,this._lastFramePercent=a,e.ignore=!1}},t})(lG),lhe=(function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r})(),ohe=(function(r){re(t,r);function t(e){var a=r.call(this,e)||this;return a._off=0,a.hoverDataIdx=-1,a}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:ee.color.neutral99,fill:null}},t.prototype.getDefaultShape=function(){return new lhe},t.prototype.buildPath=function(e,a){var n=a.segs,s=a.curveness,l;if(a.polyline)for(l=this._off;l<n.length;){var o=n[l++];if(o>0){e.moveTo(n[l++],n[l++]);for(var c=1;c<o;c++)e.lineTo(n[l++],n[l++])}}else for(l=this._off;l<n.length;){var u=n[l++],d=n[l++],h=n[l++],p=n[l++];if(e.moveTo(u,d),s>0){var g=(u+h)/2-(d-p)*s,v=(d+p)/2-(h-u)*s;e.quadraticCurveTo(g,v,h,p)}else e.lineTo(h,p)}this.incremental&&(this._off=l,this.notClear=!0)},t.prototype.findDataIndex=function(e,a){var n=this.shape,s=n.segs,l=n.curveness,o=this.style.lineWidth;if(n.polyline)for(var c=0,u=0;u<s.length;){var d=s[u++];if(d>0)for(var h=s[u++],p=s[u++],g=1;g<d;g++){var v=s[u++],y=s[u++];if(vo(h,p,v,y,o,e,a))return c}c++}else for(var c=0,u=0;u<s.length;){var h=s[u++],p=s[u++],v=s[u++],y=s[u++];if(l>0){var x=(h+v)/2-(p-y)*l,b=(p+y)/2-(v-h)*l;if(o7(h,p,x,b,v,y,o,e,a))return c}else if(vo(h,p,v,y,o,e,a))return c;c++}return-1},t.prototype.contain=function(e,a){var n=this.transformCoordToLocal(e,a),s=this.getBoundingRect();if(e=n[0],a=n[1],s.contain(e,a)){var l=this.hoverDataIdx=this.findDataIndex(e,a);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var a=this.shape,n=a.segs,s=1/0,l=1/0,o=-1/0,c=-1/0,u=0;u<n.length;){var d=n[u++],h=n[u++];s=Math.min(d,s),o=Math.max(d,o),l=Math.min(h,l),c=Math.max(h,c)}e=this._rect=new We(s,l,o,c)}return e},t})(ht),che=(function(){function r(){this.group=new Pe}return r.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},r.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(t,e){var a=this._newAdded[0],n=e.getLayout("linesPoints"),s=a&&a.shape.segs;if(s&&s.length<2e4){var l=s.length,o=new Float32Array(l+n.length);o.set(s),o.set(n,l),a.setShape({segs:o})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:n}),this._setCommon(c,e),c.__startIndex=t.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},r.prototype._create=function(){var t=new ohe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},r.prototype._setCommon=function(t,e,a){var n=e.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var s=e.getVisual("style");s&&s.stroke&&t.setStyle("stroke",s.stroke),t.setStyle("fill",null);var l=Xe(t);l.seriesIndex=n.seriesIndex,t.on("mousemove",function(o){l.dataIndex=null;var c=t.hoverDataIdx;c>0&&(l.dataIndex=c+t.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r})(),cG={seriesType:"lines",plan:of(),reset:function(r){var t=r.coordinateSystem;if(t){var e=r.get("polyline"),a=r.pipelineContext.large;return{progress:function(n,s){var l=[];if(a){var o=void 0,c=n.end-n.start;if(e){for(var u=0,d=n.start;d<n.end;d++)u+=r.getLineCoordsCount(d);o=new Float32Array(c+u*2)}else o=new Float32Array(c*4);for(var h=0,p=[],d=n.start;d<n.end;d++){var g=r.getLineCoords(d,l);e&&(o[h++]=g);for(var v=0;v<g;v++)p=t.dataToPoint(l[v],!1,p),o[h++]=p[0],o[h++]=p[1]}s.setLayout("linesPoints",o)}else for(var d=n.start;d<n.end;d++){var y=s.getItemModel(d),g=r.getLineCoords(d,l),x=[];if(e)for(var b=0;b<g;b++)x.push(t.dataToPoint(l[b]));else{x[0]=t.dataToPoint(l[0]),x[1]=t.dataToPoint(l[1]);var N=y.get(["lineStyle","curveness"]);+N&&(x[2]=[(x[0][0]+x[1][0])/2-(x[0][1]-x[1][1])*N,(x[0][1]+x[1][1])/2-(x[1][0]-x[0][0])*N])}s.setItemLayout(d,x)}}}}}},uhe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=e.getData(),l=this._updateLineDraw(s,e),o=e.get("zlevel"),c=e.get(["effect","trailLength"]),u=n.getZr(),d=u.painter.getType()==="svg";d||u.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!d&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&c>0&&(d||u.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),l.updateData(s);var h=e.get("clip",!0)&&Bm(e.coordinateSystem,!1,e);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,a,n){var s=e.getData(),l=this._updateLineDraw(s,e);l.incrementalPrepareUpdate(s),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(e,a,n){this._lineDraw.incrementalUpdate(e,a.getData()),this._finished=e.end===a.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,a,n){var s=e.getData(),l=e.pipelineContext;if(!this._finished||l.large||l.progressiveRender)return{update:!0};var o=cG.reset(e,a,n);o.progress&&o.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(e,a){var n=this._lineDraw,s=this._showEffect(a),l=!!a.get("polyline"),o=a.pipelineContext,c=o.large;return(!n||s!==this._hasEffet||l!==this._isPolyline||c!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=c?new che:new OA(l?s?ihe:oG:s?lG:kA),this._hasEffet=s,this._isPolyline=l,this._isLargeDraw=c),this.group.add(n.group),n},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var a=e.getZr(),n=a.painter.getType()==="svg";!n&&this._lastZlevel!=null&&a.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,a){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(a)},t.prototype.dispose=function(e,a){this.remove(e,a)},t.type="lines",t})(Pt),dhe=typeof Uint32Array>"u"?Array:Uint32Array,hhe=typeof Float64Array>"u"?Array:Float64Array;function J6(r){var t=r.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(r.data=pe(t,function(e){var a=[e[0].coord,e[1].coord],n={coords:a};return e[0].name&&(n.fromName=e[0].name),e[1].name&&(n.toName=e[1].name),fb([n,e[0],e[1]])}))}var fhe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return t.prototype.init=function(e){e.data=e.data||[],J6(e);var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count)),r.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if(J6(e),e.data){var a=this._processFlatCoordsArray(e.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(e.data=new Float32Array(a.count))}r.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var a=this._processFlatCoordsArray(e.data);a.flatCoords&&(this._flatCoords?(this._flatCoords=Ah(this._flatCoords,a.flatCoords),this._flatCoordsOffset=Ah(this._flatCoordsOffset,a.flatCoordsOffset)):(this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset),e.data=new Float32Array(a.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var a=this.getData().getItemModel(e),n=a.option instanceof Array?a.option:a.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,a){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[e*2],s=this._flatCoordsOffset[e*2+1],l=0;l<s;l++)a[l]=a[l]||[],a[l][0]=this._flatCoords[n+l*2],a[l][1]=this._flatCoords[n+l*2+1];return s}else{for(var o=this._getCoordsFromItemModel(e),l=0;l<o.length;l++)a[l]=a[l]||[],a[l][0]=o[l][0],a[l][1]=o[l][1];return o.length}},t.prototype._processFlatCoordsArray=function(e){var a=0;if(this._flatCoords&&(a=this._flatCoords.length),xt(e[0])){for(var n=e.length,s=new dhe(n),l=new hhe(n),o=0,c=0,u=0,d=0;d<n;){u++;var h=e[d++];s[c++]=o+a,s[c++]=h;for(var p=0;p<h;p++){var g=e[d++],v=e[d++];l[o++]=g,l[o++]=v}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,c),flatCoords:l,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,a){var n=new Ha(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(s,l,o,c){if(s instanceof Array)return NaN;n.hasItemOption=!0;var u=s.value;if(u!=null)return u instanceof Array?u[c]:u}),n},t.prototype.formatTooltip=function(e,a,n){var s=this.getData(),l=s.getItemModel(e),o=l.get("name");if(o)return o;var c=l.get("fromName"),u=l.get("toName"),d=[];return c!=null&&d.push(c),u!=null&&d.push(u),Br("nameValue",{name:d.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),a=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&a>0?a+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t})(zt);function tx(r){return r instanceof Array||(r=[r,r]),r}var phe={seriesType:"lines",reset:function(r){var t=tx(r.get("symbol")),e=tx(r.get("symbolSize")),a=r.getData();a.setVisual("fromSymbol",t&&t[0]),a.setVisual("toSymbol",t&&t[1]),a.setVisual("fromSymbolSize",e&&e[0]),a.setVisual("toSymbolSize",e&&e[1]);function n(s,l){var o=s.getItemModel(l),c=tx(o.getShallow("symbol",!0)),u=tx(o.getShallow("symbolSize",!0));c[0]&&s.setItemVisual(l,"fromSymbol",c[0]),c[1]&&s.setItemVisual(l,"toSymbol",c[1]),u[0]&&s.setItemVisual(l,"fromSymbolSize",u[0]),u[1]&&s.setItemVisual(l,"toSymbolSize",u[1])}return{dataEach:a.hasItemOption?n:null}}};function ghe(r){r.registerChartView(uhe),r.registerSeriesModel(fhe),r.registerLayout(cG),r.registerVisual(phe)}var mhe=256,vhe=(function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=pn.createCanvas();this.canvas=t}return r.prototype.update=function(t,e,a,n,s,l){var o=this._getBrush(),c=this._getGradient(s,"inRange"),u=this._getGradient(s,"outOfRange"),d=this.pointSize+this.blurSize,h=this.canvas,p=h.getContext("2d"),g=t.length;h.width=e,h.height=a;for(var v=0;v<g;++v){var y=t[v],x=y[0],b=y[1],N=y[2],w=n(N);p.globalAlpha=w,p.drawImage(o,x-d,b-d)}if(!h.width||!h.height)return h;for(var S=p.getImageData(0,0,h.width,h.height),T=S.data,A=0,C=T.length,M=this.minOpacity,R=this.maxOpacity,k=R-M;A<C;){var w=T[A+3]/256,L=Math.floor(w*(mhe-1))*4;if(w>0){var O=l(w)?c:u;w>0&&(w=w*k+M),T[A++]=O[L],T[A++]=O[L+1],T[A++]=O[L+2],T[A++]=O[L+3]*w*256}else A+=4}return p.putImageData(S,0,0),h},r.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=pn.createCanvas()),e=this.pointSize+this.blurSize,a=e*2;t.width=a,t.height=a;var n=t.getContext("2d");return n.clearRect(0,0,a,a),n.shadowOffsetX=a,n.shadowBlur=this.blurSize,n.shadowColor=ee.color.neutral99,n.beginPath(),n.arc(-e,e,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},r.prototype._getGradient=function(t,e){for(var a=this._gradientPixels,n=a[e]||(a[e]=new Uint8ClampedArray(256*4)),s=[0,0,0,0],l=0,o=0;o<256;o++)t[e](o/255,!0,s),n[l++]=s[0],n[l++]=s[1],n[l++]=s[2],n[l++]=s[3];return n},r})();function xhe(r,t,e){var a=r[1]-r[0];t=pe(t,function(l){return{interval:[(l.interval[0]-r[0])/a,(l.interval[1]-r[0])/a]}});var n=t.length,s=0;return function(l){var o;for(o=s;o<n;o++){var c=t[o].interval;if(c[0]<=l&&l<=c[1]){s=o;break}}if(o===n)for(o=s-1;o>=0;o--){var c=t[o].interval;if(c[0]<=l&&l<=c[1]){s=o;break}}return o>=0&&o<n&&e[o]}}function yhe(r,t){var e=r[1]-r[0];return t=[(t[0]-r[0])/e,(t[1]-r[0])/e],function(a){return a>=t[0]&&a<=t[1]}}function ek(r){var t=r.dimensions;return t[0]==="lng"&&t[1]==="lat"}var bhe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s;a.eachComponent("visualMap",function(o){o.eachTargetSeries(function(c){c===e&&(s=o)})}),this._progressiveEls=null,this.group.removeAll();var l=e.coordinateSystem;l.type==="cartesian2d"||l.type==="calendar"||l.type==="matrix"?this._renderOnGridLike(e,n,0,e.getData().count()):ek(l)&&this._renderOnGeo(l,e,s,n)},t.prototype.incrementalPrepareRender=function(e,a,n){this.group.removeAll()},t.prototype.incrementalRender=function(e,a,n,s){var l=a.coordinateSystem;l&&(ek(l)?this.render(a,n,s):(this._progressiveEls=[],this._renderOnGridLike(a,s,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Wo(this._progressiveEls||this.group,e)},t.prototype._renderOnGridLike=function(e,a,n,s,l){var o=e.coordinateSystem,c=Bo(o,"cartesian2d"),u=Bo(o,"matrix"),d,h,p,g;if(c){var v=o.getAxis("x"),y=o.getAxis("y");d=v.getBandWidth()+.5,h=y.getBandWidth()+.5,p=v.scale.getExtent(),g=y.scale.getExtent()}for(var x=this.group,b=e.getData(),N=e.getModel(["emphasis","itemStyle"]).getItemStyle(),w=e.getModel(["blur","itemStyle"]).getItemStyle(),S=e.getModel(["select","itemStyle"]).getItemStyle(),T=e.get(["itemStyle","borderRadius"]),A=Zr(e),C=e.getModel("emphasis"),M=C.get("focus"),R=C.get("blurScope"),k=C.get("disabled"),L=c||u?[b.mapDimension("x"),b.mapDimension("y"),b.mapDimension("value")]:[b.mapDimension("time"),b.mapDimension("value")],O=n;O<s;O++){var z=void 0,U=b.getItemVisual(O,"style");if(c){var H=b.get(L[0],O),P=b.get(L[1],O);if(isNaN(b.get(L[2],O))||isNaN(H)||isNaN(P)||H<p[0]||H>p[1]||P<g[0]||P>g[1])continue;var F=o.dataToPoint([H,P]);z=new it({shape:{x:F[0]-d/2,y:F[1]-h/2,width:d,height:h},style:U})}else if(u){var Y=o.dataToLayout([b.get(L[0],O),b.get(L[1],O)]).rect;if(Ta(Y.x))continue;z=new it({z2:1,shape:Y,style:U})}else{if(isNaN(b.get(L[1],O)))continue;var X=o.dataToLayout([b.get(L[0],O)]),Y=X.contentRect||X.rect;if(Ta(Y.x)||Ta(Y.y))continue;z=new it({z2:1,shape:Y,style:U})}if(b.hasItemOption){var q=b.getItemModel(O),G=q.getModel("emphasis");N=G.getModel("itemStyle").getItemStyle(),w=q.getModel(["blur","itemStyle"]).getItemStyle(),S=q.getModel(["select","itemStyle"]).getItemStyle(),T=q.get(["itemStyle","borderRadius"]),M=G.get("focus"),R=G.get("blurScope"),k=G.get("disabled"),A=Zr(q)}z.shape.r=T;var $=e.getRawValue(O),Z="-";$&&$[2]!=null&&(Z=$[2]+""),ia(z,A,{labelFetcher:e,labelDataIndex:O,defaultOpacity:U.opacity,defaultText:Z}),z.ensureState("emphasis").style=N,z.ensureState("blur").style=w,z.ensureState("select").style=S,nr(z,M,R,k),z.incremental=l,l&&(z.states.emphasis.hoverLayer=!0),x.add(z),b.setItemGraphicEl(O,z),this._progressiveEls&&this._progressiveEls.push(z)}},t.prototype._renderOnGeo=function(e,a,n,s){var l=n.targetVisuals.inRange,o=n.targetVisuals.outOfRange,c=a.getData(),u=this._hmLayer||this._hmLayer||new vhe;u.blurSize=a.get("blurSize"),u.pointSize=a.get("pointSize"),u.minOpacity=a.get("minOpacity"),u.maxOpacity=a.get("maxOpacity");var d=e.getViewRect().clone(),h=e.getRoamTransform();d.applyTransform(h);var p=Math.max(d.x,0),g=Math.max(d.y,0),v=Math.min(d.width+d.x,s.getWidth()),y=Math.min(d.height+d.y,s.getHeight()),x=v-p,b=y-g,N=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],w=c.mapArray(N,function(C,M,R){var k=e.dataToPoint([C,M]);return k[0]-=p,k[1]-=g,k.push(R),k}),S=n.getExtent(),T=n.type==="visualMap.continuous"?yhe(S,n.option.range):xhe(S,n.getPieceList(),n.option.selected);u.update(w,x,b,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:o.color.getColorMapper()},T);var A=new la({style:{width:x,height:b,x:p,y:g,image:u.canvas},silent:!0});this.group.add(A)},t.type="heatmap",t})(Pt),_he=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return Di(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=lf.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar","matrix"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:ee.color.primary}}},t})(zt);function Nhe(r){r.registerChartView(bhe),r.registerSeriesModel(_he)}var jhe=["itemStyle","borderWidth"],tk=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],uw=new Ei,whe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=this.group,l=e.getData(),o=this._data,c=e.coordinateSystem,u=c.getBaseAxis(),d=u.isHorizontal(),h=c.master.getRect(),p={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:c,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:d,valueDim:tk[+d],categoryDim:tk[1-+d]};l.diff(o).add(function(v){if(l.hasValue(v)){var y=ak(l,v),x=rk(l,v,y,p),b=nk(l,p,x);l.setItemGraphicEl(v,b),s.add(b),ik(b,p,x)}}).update(function(v,y){var x=o.getItemGraphicEl(y);if(!l.hasValue(v)){s.remove(x);return}var b=ak(l,v),N=rk(l,v,b,p),w=gG(l,N);x&&w!==x.__pictorialShapeStr&&(s.remove(x),l.setItemGraphicEl(v,null),x=null),x?Mhe(x,p,N):x=nk(l,p,N,!0),l.setItemGraphicEl(v,x),x.__pictorialSymbolMeta=N,s.add(x),ik(x,p,N)}).remove(function(v){var y=o.getItemGraphicEl(v);y&&sk(o,v,y.__pictorialSymbolMeta.animationModel,y)}).execute();var g=e.get("clip",!0)?Bm(e.coordinateSystem,!1,e):null;return g?s.setClipPath(g):s.removeClipPath(),this._data=l,this.group},t.prototype.remove=function(e,a){var n=this.group,s=this._data;e.get("animation")?s&&s.eachItemGraphicEl(function(l){sk(s,Xe(l).dataIndex,e,l)}):n.removeAll()},t.type="pictorialBar",t})(Pt);function rk(r,t,e,a){var n=r.getItemLayout(t),s=e.get("symbolRepeat"),l=e.get("symbolClip"),o=e.get("symbolPosition")||"start",c=e.get("symbolRotate"),u=(c||0)*Math.PI/180||0,d=e.get("symbolPatternSize")||2,h=e.isAnimationEnabled(),p={dataIndex:t,layout:n,itemModel:e,symbolType:r.getItemVisual(t,"symbol")||"circle",style:r.getItemVisual(t,"style"),symbolClip:l,symbolRepeat:s,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:u,animationModel:h?e:null,hoverScale:h&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};She(e,s,n,a,p),Che(r,t,n,s,l,p.boundingLength,p.pxSign,d,a,p),The(e,p.symbolScale,u,a,p);var g=p.symbolSize,v=Hu(e.get("symbolOffset"),g);return Ahe(e,g,n,s,l,v,o,p.valueLineWidth,p.boundingLength,p.repeatCutLength,a,p),p}function She(r,t,e,a,n){var s=a.valueDim,l=r.get("symbolBoundingData"),o=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),c=o.toGlobalCoord(o.dataToCoord(0)),u=1-+(e[s.wh]<=0),d;if(de(l)){var h=[dw(o,l[0])-c,dw(o,l[1])-c];h[1]<h[0]&&h.reverse(),d=h[u]}else l!=null?d=dw(o,l)-c:t?d=a.coordSysExtent[s.index][u]-c:d=e[s.wh];n.boundingLength=d,t&&(n.repeatCutLength=e[s.wh]);var p=s.xy==="x",g=o.inverse;n.pxSign=p&&!g||!p&&g?d>=0?1:-1:d>0?1:-1}function dw(r,t){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(t)))}function Che(r,t,e,a,n,s,l,o,c,u){var d=c.valueDim,h=c.categoryDim,p=Math.abs(e[h.wh]),g=r.getItemVisual(t,"symbolSize"),v;de(g)?v=g.slice():g==null?v=["100%","100%"]:v=[g,g],v[h.index]=Ne(v[h.index],p),v[d.index]=Ne(v[d.index],a?p:Math.abs(s)),u.symbolSize=v;var y=u.symbolScale=[v[0]/o,v[1]/o];y[d.index]*=(c.isHorizontal?-1:1)*l}function The(r,t,e,a,n){var s=r.get(jhe)||0;s&&(uw.attr({scaleX:t[0],scaleY:t[1],rotation:e}),uw.updateTransform(),s/=uw.getLineScale(),s*=t[a.valueDim.index]),n.valueLineWidth=s||0}function Ahe(r,t,e,a,n,s,l,o,c,u,d,h){var p=d.categoryDim,g=d.valueDim,v=h.pxSign,y=Math.max(t[g.index]+o,0),x=y;if(a){var b=Math.abs(c),N=ga(r.get("symbolMargin"),"15%")+"",w=!1;N.lastIndexOf("!")===N.length-1&&(w=!0,N=N.slice(0,N.length-1));var S=Ne(N,t[g.index]),T=Math.max(y+S*2,0),A=w?0:S*2,C=rT(a),M=C?a:lk((b+A)/T),R=b-M*y;S=R/2/(w?M:Math.max(M-1,1)),T=y+S*2,A=w?0:S*2,!C&&a!=="fixed"&&(M=u?lk((Math.abs(u)+A)/T):0),x=M*T-A,h.repeatTimes=M,h.symbolMargin=S}var k=v*(x/2),L=h.pathPosition=[];L[p.index]=e[p.wh]/2,L[g.index]=l==="start"?k:l==="end"?c-k:c/2,s&&(L[0]+=s[0],L[1]+=s[1]);var O=h.bundlePosition=[];O[p.index]=e[p.xy],O[g.index]=e[g.xy];var z=h.barRectShape=ie({},e);z[g.wh]=v*Math.max(Math.abs(e[g.wh]),Math.abs(L[g.index]+k)),z[p.wh]=e[p.wh];var U=h.clipShape={};U[p.xy]=-e[p.xy],U[p.wh]=d.ecSize[p.wh],U[g.xy]=0,U[g.wh]=e[g.wh]}function uG(r){var t=r.symbolPatternSize,e=Er(r.symbolType,-t/2,-t/2,t,t);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function dG(r,t,e,a){var n=r.__pictorialBundle,s=e.symbolSize,l=e.valueLineWidth,o=e.pathPosition,c=t.valueDim,u=e.repeatTimes||0,d=0,h=s[t.valueDim.index]+l+e.symbolMargin*2;for($A(r,function(y){y.__pictorialAnimationIndex=d,y.__pictorialRepeatTimes=u,d<u?Sh(y,null,v(d),e,a):Sh(y,null,{scaleX:0,scaleY:0},e,a,function(){n.remove(y)}),d++});d<u;d++){var p=uG(e);p.__pictorialAnimationIndex=d,p.__pictorialRepeatTimes=u,n.add(p);var g=v(d);Sh(p,{x:g.x,y:g.y,scaleX:0,scaleY:0},{scaleX:g.scaleX,scaleY:g.scaleY,rotation:g.rotation},e,a)}function v(y){var x=o.slice(),b=e.pxSign,N=y;return(e.symbolRepeatDirection==="start"?b>0:b<0)&&(N=u-1-y),x[c.index]=h*(N-u/2+.5)+o[c.index],{x:x[0],y:x[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function hG(r,t,e,a){var n=r.__pictorialBundle,s=r.__pictorialMainPath;s?Sh(s,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,a):(s=r.__pictorialMainPath=uG(e),n.add(s),Sh(s,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,a))}function fG(r,t,e){var a=ie({},t.barRectShape),n=r.__pictorialBarRect;n?Sh(n,null,{shape:a},t,e):(n=r.__pictorialBarRect=new it({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,r.add(n))}function pG(r,t,e,a){if(e.symbolClip){var n=r.__pictorialClipPath,s=ie({},e.clipShape),l=t.valueDim,o=e.animationModel,c=e.dataIndex;if(n)Nt(n,{shape:s},o,c);else{s[l.wh]=0,n=new it({shape:s}),r.__pictorialBundle.setClipPath(n),r.__pictorialClipPath=n;var u={};u[l.wh]=e.clipShape[l.wh],zu[a?"updateProps":"initProps"](n,{shape:u},o,c)}}}function ak(r,t){var e=r.getItemModel(t);return e.getAnimationDelayParams=Ehe,e.isAnimationEnabled=Dhe,e}function Ehe(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function Dhe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function nk(r,t,e,a){var n=new Pe,s=new Pe;return n.add(s),n.__pictorialBundle=s,s.x=e.bundlePosition[0],s.y=e.bundlePosition[1],e.symbolRepeat?dG(n,t,e):hG(n,t,e),fG(n,e,a),pG(n,t,e,a),n.__pictorialShapeStr=gG(r,e),n.__pictorialSymbolMeta=e,n}function Mhe(r,t,e){var a=e.animationModel,n=e.dataIndex,s=r.__pictorialBundle;Nt(s,{x:e.bundlePosition[0],y:e.bundlePosition[1]},a,n),e.symbolRepeat?dG(r,t,e,!0):hG(r,t,e,!0),fG(r,e,!0),pG(r,t,e,!0)}function sk(r,t,e,a){var n=a.__pictorialBarRect;n&&n.removeTextContent();var s=[];$A(a,function(l){s.push(l)}),a.__pictorialMainPath&&s.push(a.__pictorialMainPath),a.__pictorialClipPath&&(e=null),B(s,function(l){zo(l,{scaleX:0,scaleY:0},e,t,function(){a.parent&&a.parent.remove(a)})}),r.setItemGraphicEl(t,null)}function gG(r,t){return[r.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function $A(r,t,e){B(r.__pictorialBundle.children(),function(a){a!==r.__pictorialBarRect&&t.call(e,a)})}function Sh(r,t,e,a,n,s){t&&r.attr(t),a.symbolClip&&!n?e&&r.attr(e):e&&zu[n?"updateProps":"initProps"](r,e,a.animationModel,a.dataIndex,s)}function ik(r,t,e){var a=e.dataIndex,n=e.itemModel,s=n.getModel("emphasis"),l=s.getModel("itemStyle").getItemStyle(),o=n.getModel(["blur","itemStyle"]).getItemStyle(),c=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),d=s.get("focus"),h=s.get("blurScope"),p=s.get("scale");$A(r,function(y){if(y instanceof la){var x=y.style;y.useStyle(ie({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},e.style))}else y.useStyle(e.style);var b=y.ensureState("emphasis");b.style=l,p&&(b.scaleX=y.scaleX*1.1,b.scaleY=y.scaleY*1.1),y.ensureState("blur").style=o,y.ensureState("select").style=c,u&&(y.cursor=u),y.z2=e.z2});var g=t.valueDim.posDesc[+(e.boundingLength>0)],v=r.__pictorialBarRect;v.ignoreClip=!0,ia(v,Zr(n),{labelFetcher:t.seriesModel,labelDataIndex:a,defaultText:Bh(t.seriesModel.getData(),a),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:g}),nr(r,d,h,s.get("disabled"))}function lk(r){var t=Math.round(r);return Math.abs(r-t)<1e-4?t:Math.ceil(r)}var Rhe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return t.prototype.getInitialData=function(e){return e.stack=null,r.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=$o(nm.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:ee.color.primary}}}),t})(nm);function Lhe(r){r.registerChartView(whe),r.registerSeriesModel(Rhe),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,et(k9,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,O9("pictorialBar"))}var Ihe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return t.prototype.render=function(e,a,n){var s=e.getData(),l=this,o=this.group,c=e.getLayerSeries(),u=s.getLayout("layoutInfo"),d=u.rect,h=u.boundaryGap;o.x=0,o.y=d.y+h[0];function p(x){return x.name}var g=new Tl(this._layersSeries||[],c,p,p),v=[];g.add(we(y,this,"add")).update(we(y,this,"update")).remove(we(y,this,"remove")).execute();function y(x,b,N){var w=l._layers;if(x==="remove"){o.remove(w[b]);return}for(var S=[],T=[],A,C=c[b].indices,M=0;M<C.length;M++){var R=s.getItemLayout(C[M]),k=R.x,L=R.y0,O=R.y;S.push(k,L),T.push(k,L+O),A=s.getItemVisual(C[M],"style")}var z,U=s.getItemLayout(C[0]),H=e.getModel("label"),P=H.get("margin"),F=e.getModel("emphasis");if(x==="add"){var Y=v[b]=new Pe;z=new CV({shape:{points:S,stackedOnPoints:T,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Y.add(z),o.add(Y),e.isAnimationEnabled()&&z.setClipPath(khe(z.getBoundingRect(),e,function(){z.removeClipPath()}))}else{var Y=w[N];z=Y.childAt(0),o.add(Y),v[b]=Y,Nt(z,{shape:{points:S,stackedOnPoints:T}},e),ps(z)}ia(z,Zr(e),{labelDataIndex:C[M-1],defaultText:s.getName(C[M-1]),inheritColor:A.fill},{normal:{verticalAlign:"middle"}}),z.setTextConfig({position:null,local:!0});var X=z.getTextContent();X&&(X.x=U.x-P,X.y=U.y0+U.y/2),z.useStyle(A),s.setItemGraphicEl(b,z),Xr(z,e),nr(z,F.get("focus"),F.get("blurScope"),F.get("disabled"))}this._layersSeries=c,this._layers=v},t.type="themeRiver",t})(Pt);function khe(r,t,e){var a=new it({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return Kt(a,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},t,e),a}var hw=2,Ohe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new mf(we(this.getData,this),we(this.getRawData,this))},t.prototype.fixData=function(e){var a=e.length,n={},s=GS(e,function(p){return n.hasOwnProperty(p[0]+"")||(n[p[0]+""]=-1),p[2]}),l=[];s.buckets.each(function(p,g){l.push({name:g,dataList:p})});for(var o=l.length,c=0;c<o;++c){for(var u=l[c].name,d=0;d<l[c].dataList.length;++d){var h=l[c].dataList[d][0]+"";n[h]=c}for(var h in n)n.hasOwnProperty(h)&&n[h]!==c&&(n[h]=c,e[a]=[h,0,u],a++)}return e},t.prototype.getInitialData=function(e,a){for(var n=this.getReferringComponents("singleAxis",pr).models[0],s=n.get("type"),l=Ct(e.data,function(v){return v[2]!==void 0}),o=this.fixData(l||[]),c=[],u=this.nameMap=De(),d=0,h=0;h<o.length;++h)c.push(o[h][hw]),u.get(o[h][hw])||(u.set(o[h][hw],d),d++);var p=df(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Sy(s)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,g=new Ha(p,this);return g.initData(o),g},t.prototype.getLayerSeries=function(){for(var e=this.getData(),a=e.count(),n=[],s=0;s<a;++s)n[s]=s;var l=e.mapDimension("single"),o=GS(n,function(u){return e.get("name",u)}),c=[];return o.buckets.each(function(u,d){u.sort(function(h,p){return e.get(l,h)-e.get(l,p)}),c.push({name:d,indices:u})}),c},t.prototype.getAxisTooltipData=function(e,a,n){de(e)||(e=e?[e]:[]);for(var s=this.getData(),l=this.getLayerSeries(),o=[],c=l.length,u,d=0;d<c;++d){for(var h=Number.MAX_VALUE,p=-1,g=l[d].indices.length,v=0;v<g;++v){var y=s.get(e[0],l[d].indices[v]),x=Math.abs(y-a);x<=h&&(u=y,h=x,p=l[d].indices[v])}o.push(p)}return{dataIndices:o,nestestValue:u}},t.prototype.formatTooltip=function(e,a,n){var s=this.getData(),l=s.getName(e),o=s.get(s.mapDimension("value"),e);return Br("nameValue",{name:l,value:o})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t})(zt);function Phe(r,t){r.eachSeriesByType("themeRiver",function(e){var a=e.getData(),n=e.coordinateSystem,s={},l=n.getRect();s.rect=l;var o=e.get("boundaryGap"),c=n.getAxis();if(s.boundaryGap=o,c.orient==="horizontal"){o[0]=Ne(o[0],l.height),o[1]=Ne(o[1],l.height);var u=l.height-o[0]-o[1];ok(a,e,u)}else{o[0]=Ne(o[0],l.width),o[1]=Ne(o[1],l.width);var d=l.width-o[0]-o[1];ok(a,e,d)}a.setLayout("layoutInfo",s)})}function ok(r,t,e){if(r.count())for(var a=t.coordinateSystem,n=t.getLayerSeries(),s=r.mapDimension("single"),l=r.mapDimension("value"),o=pe(n,function(x){return pe(x.indices,function(b){var N=a.dataToPoint(r.get(s,b));return N[1]=r.get(l,b),N})}),c=zhe(o),u=c.y0,d=e/c.max,h=n.length,p=n[0].indices.length,g,v=0;v<p;++v){g=u[v]*d,r.setItemLayout(n[0].indices[v],{layerIndex:0,x:o[0][v][0],y0:g,y:o[0][v][1]*d});for(var y=1;y<h;++y)g+=o[y-1][v][1]*d,r.setItemLayout(n[y].indices[v],{layerIndex:y,x:o[y][v][0],y0:g,y:o[y][v][1]*d})}}function zhe(r){for(var t=r.length,e=r[0].length,a=[],n=[],s=0,l=0;l<e;++l){for(var o=0,c=0;c<t;++c)o+=r[c][l][1];o>s&&(s=o),a.push(o)}for(var u=0;u<e;++u)n[u]=(s-a[u])/2;s=0;for(var d=0;d<e;++d){var h=a[d]+n[d];h>s&&(s=h)}return{y0:n,max:s}}function Bhe(r){r.registerChartView(Ihe),r.registerSeriesModel(Ohe),r.registerLayout(Phe),r.registerProcessor(pf("themeRiver"))}var Vhe=2,Hhe=4,ck=(function(r){re(t,r);function t(e,a,n,s){var l=r.call(this)||this;l.z2=Vhe,l.textConfig={inside:!0},Xe(l).seriesIndex=a.seriesIndex;var o=new vt({z2:Hhe,silent:e.getModel().get(["label","silent"])});return l.setTextContent(o),l.updateData(!0,e,a,n,s),l}return t.prototype.updateData=function(e,a,n,s,l){this.node=a,a.piece=this,n=n||this._seriesModel,s=s||this._ecModel;var o=this;Xe(o).dataIndex=a.dataIndex;var c=a.getModel(),u=c.getModel("emphasis"),d=a.getLayout(),h=ie({},d);h.label=null;var p=a.getVisual("style");p.lineJoin="bevel";var g=a.getVisual("decal");g&&(p.decal=Oh(g,l));var v=vi(c.getModel("itemStyle"),h,!0);ie(h,v),B(Za,function(N){var w=o.ensureState(N),S=c.getModel([N,"itemStyle"]);w.style=S.getItemStyle();var T=vi(S,h);T&&(w.shape=T)}),e?(o.setShape(h),o.shape.r=d.r0,Kt(o,{shape:{r:d.r}},n,a.dataIndex)):(Nt(o,{shape:h},n),ps(o)),o.useStyle(p),this._updateLabel(n);var y=c.getShallow("cursor");y&&o.attr("cursor",y),this._seriesModel=n||this._seriesModel,this._ecModel=s||this._ecModel;var x=u.get("focus"),b=x==="relative"?Ah(a.getAncestorsIndices(),a.getDescendantIndices()):x==="ancestor"?a.getAncestorsIndices():x==="descendant"?a.getDescendantIndices():x;nr(this,b,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var a=this,n=this.node.getModel(),s=n.getModel("label"),l=this.node.getLayout(),o=l.endAngle-l.startAngle,c=(l.startAngle+l.endAngle)/2,u=Math.cos(c),d=Math.sin(c),h=this,p=h.getTextContent(),g=this.node.dataIndex,v=s.get("minAngle")/180*Math.PI,y=s.get("show")&&!(v!=null&&Math.abs(o)<v);p.ignore=!y,B(Fg,function(b){var N=b==="normal"?n.getModel("label"):n.getModel([b,"label"]),w=b==="normal",S=w?p:p.ensureState(b),T=e.getFormattedLabel(g,b);w&&(T=T||a.node.name),S.style=Gt(N,{},null,b!=="normal",!0),T&&(S.style.text=T);var A=N.get("show");A!=null&&!w&&(S.ignore=!A);var C=x(N,"position"),M=w?h:h.states[b],R=M.style.fill;M.textConfig={outsideFill:N.get("color")==="inherit"?R:null,inside:C!=="outside"};var k,L=x(N,"distance")||0,O=x(N,"align"),z=x(N,"rotate"),U=Math.PI*.5,H=Math.PI*1.5,P=Rn(z==="tangential"?Math.PI/2-c:c),F=P>U&&!Mh(P-U)&&P<H;C==="outside"?(k=l.r+L,O=F?"right":"left"):!O||O==="center"?(o===2*Math.PI&&l.r0===0?k=0:k=(l.r+l.r0)/2,O="center"):O==="left"?(k=l.r0+L,O=F?"right":"left"):O==="right"&&(k=l.r-L,O=F?"left":"right"),S.style.align=O,S.style.verticalAlign=x(N,"verticalAlign")||"middle",S.x=k*u+l.cx,S.y=k*d+l.cy;var Y=0;z==="radial"?Y=Rn(-c)+(F?Math.PI:0):z==="tangential"?Y=Rn(Math.PI/2-c)+(F?Math.PI:0):xt(z)&&(Y=z*Math.PI/180),S.rotation=Rn(Y)});function x(b,N){var w=b.get(N);return w??s.get(N)}p.dirtyStyle()},t})(Da),nC="sunburstRootToNode",uk="sunburstHighlight",Ghe="sunburstUnhighlight";function Uhe(r){r.registerAction({type:nC,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},a);function a(n,s){var l=im(t,[nC],n);if(l){var o=n.getViewRoot();o&&(t.direction=DA(o,l.node)?"rollUp":"drillDown"),n.resetViewRoot(l.node)}}}),r.registerAction({type:uk,update:"none"},function(t,e,a){t=ie({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(s){var l=im(t,[uk],s);l&&(t.dataIndex=l.node.dataIndex)}a.dispatchAction(ie(t,{type:"highlight"}))}),r.registerAction({type:Ghe,update:"updateView"},function(t,e,a){t=ie({},t),a.dispatchAction(ie(t,{type:"downplay"}))})}var Fhe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,s){var l=this;this.seriesModel=e,this.api=n,this.ecModel=a;var o=e.getData(),c=o.tree.root,u=e.getViewRoot(),d=this.group,h=e.get("renderLabelForZeroData"),p=[];u.eachNode(function(N){p.push(N)});var g=this._oldChildren||[];v(p,g),b(c,u),this._initEvents(),this._oldChildren=p;function v(N,w){if(N.length===0&&w.length===0)return;new Tl(w,N,S,S).add(T).update(T).remove(et(T,null)).execute();function S(A){return A.getId()}function T(A,C){var M=A==null?null:N[A],R=C==null?null:w[C];y(M,R)}}function y(N,w){if(!h&&N&&!N.getValue()&&(N=null),N!==c&&w!==c){if(w&&w.piece)N?(w.piece.updateData(!1,N,e,a,n),o.setItemGraphicEl(N.dataIndex,w.piece)):x(w);else if(N){var S=new ck(N,e,a,n);d.add(S),o.setItemGraphicEl(N.dataIndex,S)}}}function x(N){N&&N.piece&&(d.remove(N.piece),N.piece=null)}function b(N,w){w.depth>0?(l.virtualPiece?l.virtualPiece.updateData(!1,N,e,a,n):(l.virtualPiece=new ck(N,e,a,n),d.add(l.virtualPiece)),w.piece.off("click"),l.virtualPiece.on("click",function(S){l._rootToNode(w.parentNode)})):l.virtualPiece&&(d.remove(l.virtualPiece),l.virtualPiece=null)}},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(a){var n=!1,s=e.seriesModel.getViewRoot();s.eachNode(function(l){if(!n&&l.piece&&l.piece===a.target){var o=l.getModel().get("nodeClick");if(o==="rootToNode")e._rootToNode(l);else if(o==="link"){var c=l.getModel(),u=c.get("link");if(u){var d=c.get("target",!0)||"_blank";gy(u,d)}}n=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:nC,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,a){var n=a.getData(),s=n.getItemLayout(0);if(s){var l=e[0]-s.cx,o=e[1]-s.cy,c=Math.sqrt(l*l+o*o);return c<=s.r&&c>=s.r0}},t.type="sunburst",t})(Pt),Yhe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return t.prototype.getInitialData=function(e,a){var n={name:e.name,children:e.data};mG(n);var s=this._levelModels=pe(e.levels||[],function(c){return new dt(c,this,a)},this),l=EA.createTree(n,this,o);function o(c){c.wrapMethod("getItemModel",function(u,d){var h=l.getNodeByDataIndex(d),p=s[h.depth];return p&&(u.parentModel=p),u})}return l.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var a=r.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return a.treePathInfo=Yb(n,this),a},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var a=this.getRawData().tree.root;(!e||e!==a&&!a.contains(e))&&(this._viewRoot=a)},t.prototype.enableAriaDecal=function(){bH(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t})(zt);function mG(r){var t=0;B(r.children,function(a){mG(a);var n=a.value;de(n)&&(n=n[0]),t+=n});var e=r.value;de(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=t),e<0&&(e=0),de(r.value)?r.value[0]=e:r.value=e}var dk=Math.PI/180;function Whe(r,t,e){t.eachSeriesByType(r,function(a){var n=a.get("center"),s=a.get("radius");de(s)||(s=[0,s]),de(n)||(n=[n,n]);var l=e.getWidth(),o=e.getHeight(),c=Math.min(l,o),u=Ne(n[0],l),d=Ne(n[1],o),h=Ne(s[0],c/2),p=Ne(s[1],c/2),g=-a.get("startAngle")*dk,v=a.get("minAngle")*dk,y=a.getData().tree.root,x=a.getViewRoot(),b=x.depth,N=a.get("sort");N!=null&&vG(x,N);var w=0;B(x.children,function(P){!isNaN(P.getValue())&&w++});var S=x.getValue(),T=Math.PI/(S||w)*2,A=x.depth>0,C=x.height-(A?-1:1),M=(p-h)/(C||1),R=a.get("clockwise"),k=a.get("stillShowZeroSum"),L=R?1:-1,O=function(P,F){if(P){var Y=F;if(P!==y){var X=P.getValue(),q=S===0&&k?T:X*T;q<v&&(q=v),Y=F+L*q;var G=P.depth-b-(A?-1:1),$=h+M*G,Z=h+M*(G+1),te=a.getLevelModel(P);if(te){var me=te.get("r0",!0),Ce=te.get("r",!0),Ve=te.get("radius",!0);Ve!=null&&(me=Ve[0],Ce=Ve[1]),me!=null&&($=Ne(me,c/2)),Ce!=null&&(Z=Ne(Ce,c/2))}P.setLayout({angle:q,startAngle:F,endAngle:Y,clockwise:R,cx:u,cy:d,r0:$,r:Z})}if(P.children&&P.children.length){var Ee=0;B(P.children,function(be){Ee+=O(be,F+Ee)})}return Y-F}};if(A){var z=h,U=h+M,H=Math.PI*2;y.setLayout({angle:H,startAngle:g,endAngle:g+H,clockwise:R,cx:u,cy:d,r0:z,r:U})}O(x,g)})}function vG(r,t){var e=r.children||[];r.children=$he(e,t),e.length&&B(r.children,function(a){vG(a,t)})}function $he(r,t){if(Le(t)){var e=pe(r,function(n,s){var l=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return l}},index:s}});return e.sort(function(n,s){return t(n.params,s.params)}),pe(e,function(n){return r[n.index]})}else{var a=t==="asc";return r.sort(function(n,s){var l=(n.getValue()-s.getValue())*(a?1:-1);return l===0?(n.dataIndex-s.dataIndex)*(a?-1:1):l})}}function qhe(r){var t={};function e(a,n,s){if(a.depth===0)return ee.color.neutral50;for(var l=a;l&&l.depth>1;)l=l.parentNode;var o=n.getColorFromPalette(l.name||l.dataIndex+"",t);return a.depth>1&&je(o)&&(o=ty(o,(a.depth-1)/(s-1)*.5)),o}r.eachSeriesByType("sunburst",function(a){var n=a.getData(),s=n.tree;s.eachNode(function(l){var o=l.getModel(),c=o.getModel("itemStyle").getItemStyle();c.fill||(c.fill=e(l,a,s.root.height));var u=n.ensureUniqueItemVisual(l.dataIndex,"style");ie(u,c)})})}function Xhe(r){r.registerChartView(Fhe),r.registerSeriesModel(Yhe),r.registerLayout(et(Whe,"sunburst")),r.registerProcessor(et(pf,"sunburst")),r.registerVisual(qhe),Uhe(r)}var hk={color:"fill",borderColor:"stroke"},Zhe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},yl=ut(),Khe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,a){return Di(null,this)},t.prototype.getDataParams=function(e,a,n){var s=r.prototype.getDataParams.call(this,e,a);return n&&(s.info=yl(n).info),s},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t})(zt);function Qhe(r,t){return t=t||[0,0],pe(["x","y"],function(e,a){var n=this.getAxis(e),s=t[a],l=r[a]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(s-l)-n.dataToCoord(s+l))},this)}function Jhe(r){var t=r.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:we(Qhe,r)}}}function efe(r,t){return t=t||[0,0],pe([0,1],function(e){var a=t[e],n=r[e]/2,s=[],l=[];return s[e]=a-n,l[e]=a+n,s[1-e]=l[1-e]=t[1-e],Math.abs(this.dataToPoint(s)[e]-this.dataToPoint(l)[e])},this)}function tfe(r){var t=r.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:r.getZoom()},api:{coord:function(e){return r.dataToPoint(e)},size:we(efe,r)}}}function rfe(r,t){var e=this.getAxis(),a=t instanceof Array?t[0]:t,n=(r instanceof Array?r[0]:r)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(a-n)-e.dataToCoord(a+n))}function afe(r){var t=r.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return r.dataToPoint(e)},size:we(rfe,r)}}}function nfe(r,t){return t=t||[0,0],pe(["Radius","Angle"],function(e,a){var n="get"+e+"Axis",s=this[n](),l=t[a],o=r[a]/2,c=s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(l-o)-s.dataToCoord(l+o));return e==="Angle"&&(c=c*Math.PI/180),c},this)}function sfe(r){var t=r.getRadiusAxis(),e=r.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:a[1],r0:a[0]},api:{coord:function(n){var s=t.dataToRadius(n[0]),l=e.dataToAngle(n[1]),o=r.coordToPoint([s,l]);return o.push(s,l*Math.PI/180),o},size:we(nfe,r)}}}function ife(r){var t=r.getRect(),e=r.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(a,n){return r.dataToPoint(a,n)},layout:function(a,n){return r.dataToLayout(a,n)}}}}function lfe(r){var t=r.getRect();return{coordSys:{type:"matrix",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e,a){return r.dataToPoint(e,a)},layout:function(e,a){return r.dataToLayout(e,a)}}}}function xG(r,t,e,a){return r&&(r.legacy||r.legacy!==!1&&!e&&!a&&t!=="tspan"&&(t==="text"||Te(r,"text")))}function yG(r,t,e){var a=r,n,s,l;if(t==="text")l=a;else{l={},Te(a,"text")&&(l.text=a.text),Te(a,"rich")&&(l.rich=a.rich),Te(a,"textFill")&&(l.fill=a.textFill),Te(a,"textStroke")&&(l.stroke=a.textStroke),Te(a,"fontFamily")&&(l.fontFamily=a.fontFamily),Te(a,"fontSize")&&(l.fontSize=a.fontSize),Te(a,"fontStyle")&&(l.fontStyle=a.fontStyle),Te(a,"fontWeight")&&(l.fontWeight=a.fontWeight),s={type:"text",style:l,silent:!0},n={};var o=Te(a,"textPosition");e?n.position=o?a.textPosition:"inside":o&&(n.position=a.textPosition),Te(a,"textPosition")&&(n.position=a.textPosition),Te(a,"textOffset")&&(n.offset=a.textOffset),Te(a,"textRotation")&&(n.rotation=a.textRotation),Te(a,"textDistance")&&(n.distance=a.textDistance)}return fk(l,r),B(l.rich,function(c){fk(c,c)}),{textConfig:n,textContent:s}}function fk(r,t){t&&(t.font=t.textFont||t.font,Te(t,"textStrokeWidth")&&(r.lineWidth=t.textStrokeWidth),Te(t,"textAlign")&&(r.align=t.textAlign),Te(t,"textVerticalAlign")&&(r.verticalAlign=t.textVerticalAlign),Te(t,"textLineHeight")&&(r.lineHeight=t.textLineHeight),Te(t,"textWidth")&&(r.width=t.textWidth),Te(t,"textHeight")&&(r.height=t.textHeight),Te(t,"textBackgroundColor")&&(r.backgroundColor=t.textBackgroundColor),Te(t,"textPadding")&&(r.padding=t.textPadding),Te(t,"textBorderColor")&&(r.borderColor=t.textBorderColor),Te(t,"textBorderWidth")&&(r.borderWidth=t.textBorderWidth),Te(t,"textBorderRadius")&&(r.borderRadius=t.textBorderRadius),Te(t,"textBoxShadowColor")&&(r.shadowColor=t.textBoxShadowColor),Te(t,"textBoxShadowBlur")&&(r.shadowBlur=t.textBoxShadowBlur),Te(t,"textBoxShadowOffsetX")&&(r.shadowOffsetX=t.textBoxShadowOffsetX),Te(t,"textBoxShadowOffsetY")&&(r.shadowOffsetY=t.textBoxShadowOffsetY))}function pk(r,t,e){var a=r;a.textPosition=a.textPosition||e.position||"inside",e.offset!=null&&(a.textOffset=e.offset),e.rotation!=null&&(a.textRotation=e.rotation),e.distance!=null&&(a.textDistance=e.distance);var n=a.textPosition.indexOf("inside")>=0,s=r.fill||ee.color.neutral99;gk(a,t);var l=a.textFill==null;return n?l&&(a.textFill=e.insideFill||ee.color.neutral00,!a.textStroke&&e.insideStroke&&(a.textStroke=e.insideStroke),!a.textStroke&&(a.textStroke=s),a.textStrokeWidth==null&&(a.textStrokeWidth=2)):(l&&(a.textFill=r.fill||e.outsideFill||ee.color.neutral00),!a.textStroke&&e.outsideStroke&&(a.textStroke=e.outsideStroke)),a.text=t.text,a.rich=t.rich,B(t.rich,function(o){gk(o,o)}),a}function gk(r,t){t&&(Te(t,"fill")&&(r.textFill=t.fill),Te(t,"stroke")&&(r.textStroke=t.fill),Te(t,"lineWidth")&&(r.textStrokeWidth=t.lineWidth),Te(t,"font")&&(r.font=t.font),Te(t,"fontStyle")&&(r.fontStyle=t.fontStyle),Te(t,"fontWeight")&&(r.fontWeight=t.fontWeight),Te(t,"fontSize")&&(r.fontSize=t.fontSize),Te(t,"fontFamily")&&(r.fontFamily=t.fontFamily),Te(t,"align")&&(r.textAlign=t.align),Te(t,"verticalAlign")&&(r.textVerticalAlign=t.verticalAlign),Te(t,"lineHeight")&&(r.textLineHeight=t.lineHeight),Te(t,"width")&&(r.textWidth=t.width),Te(t,"height")&&(r.textHeight=t.height),Te(t,"backgroundColor")&&(r.textBackgroundColor=t.backgroundColor),Te(t,"padding")&&(r.textPadding=t.padding),Te(t,"borderColor")&&(r.textBorderColor=t.borderColor),Te(t,"borderWidth")&&(r.textBorderWidth=t.borderWidth),Te(t,"borderRadius")&&(r.textBorderRadius=t.borderRadius),Te(t,"shadowColor")&&(r.textBoxShadowColor=t.shadowColor),Te(t,"shadowBlur")&&(r.textBoxShadowBlur=t.shadowBlur),Te(t,"shadowOffsetX")&&(r.textBoxShadowOffsetX=t.shadowOffsetX),Te(t,"shadowOffsetY")&&(r.textBoxShadowOffsetY=t.shadowOffsetY),Te(t,"textShadowColor")&&(r.textShadowColor=t.textShadowColor),Te(t,"textShadowBlur")&&(r.textShadowBlur=t.textShadowBlur),Te(t,"textShadowOffsetX")&&(r.textShadowOffsetX=t.textShadowOffsetX),Te(t,"textShadowOffsetY")&&(r.textShadowOffsetY=t.textShadowOffsetY))}var bG={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},mk=gt(bG);ds(Ni,function(r,t){return r[t]=1,r},{});Ni.join(", ");var Uy=["","style","shape","extra"],Uh=ut();function qA(r,t,e,a,n){var s=r+"Animation",l=tf(r,a,n)||{},o=Uh(t).userDuring;return l.duration>0&&(l.during=o?we(hfe,{el:t,userDuring:o}):null,l.setToFinal=!0,l.scope=r),ie(l,e[s]),l}function Bx(r,t,e,a){a=a||{};var n=a.dataIndex,s=a.isInit,l=a.clearStyle,o=e.isAnimationEnabled(),c=Uh(r),u=t.style;c.userDuring=t.during;var d={},h={};if(pfe(r,t,h),r.type==="compound")for(var p=r.shape.paths,g=t.shape.paths,v=0;v<g.length;v++){var y=g[v];fw("shape",y,p[v])}else fw("shape",t,h),fw("extra",t,h);if(!s&&o&&(ffe(r,t,d),vk("shape",r,t,d),vk("extra",r,t,d),gfe(r,t,u,d)),h.style=u,ofe(r,h,l),ufe(r,t),o)if(s){var x={};B(Uy,function(N){var w=N?t[N]:t;w&&w.enterFrom&&(N&&(x[N]=x[N]||{}),ie(N?x[N]:x,w.enterFrom))});var b=qA("enter",r,t,e,n);b.duration>0&&r.animateFrom(x,b)}else cfe(r,t,n||0,e,d);_G(r,t),u?r.dirty():r.markRedraw()}function _G(r,t){for(var e=Uh(r).leaveToProps,a=0;a<Uy.length;a++){var n=Uy[a],s=n?t[n]:t;s&&s.leaveTo&&(e||(e=Uh(r).leaveToProps={}),n&&(e[n]=e[n]||{}),ie(n?e[n]:e,s.leaveTo))}}function qb(r,t,e,a){if(r){var n=r.parent,s=Uh(r).leaveToProps;if(s){var l=qA("update",r,t,e,0);l.done=function(){n&&n.remove(r)},r.animateTo(s,l)}else n&&n.remove(r)}}function xu(r){return r==="all"}function ofe(r,t,e){var a=t.style;if(!r.isGroup&&a){if(e){r.useStyle({});for(var n=r.animators,s=0;s<n.length;s++){var l=n[s];l.targetName==="style"&&l.changeTarget(r.style)}}r.setStyle(a)}t&&(t.style=null,t&&r.attr(t),t.style=a)}function cfe(r,t,e,a,n){if(n){var s=qA("update",r,t,a,e);s.duration>0&&r.animateFrom(n,s)}}function ufe(r,t){Te(t,"silent")&&(r.silent=t.silent),Te(t,"ignore")&&(r.ignore=t.ignore),r instanceof fs&&Te(t,"invisible")&&(r.invisible=t.invisible),r instanceof ht&&Te(t,"autoBatch")&&(r.autoBatch=t.autoBatch)}var ii={},dfe={setTransform:function(r,t){return ii.el[r]=t,this},getTransform:function(r){return ii.el[r]},setShape:function(r,t){var e=ii.el,a=e.shape||(e.shape={});return a[r]=t,e.dirtyShape&&e.dirtyShape(),this},getShape:function(r){var t=ii.el.shape;if(t)return t[r]},setStyle:function(r,t){var e=ii.el,a=e.style;return a&&(a[r]=t,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(r){var t=ii.el.style;if(t)return t[r]},setExtra:function(r,t){var e=ii.el.extra||(ii.el.extra={});return e[r]=t,this},getExtra:function(r){var t=ii.el.extra;if(t)return t[r]}};function hfe(){var r=this,t=r.el;if(t){var e=Uh(t).userDuring,a=r.userDuring;if(e!==a){r.el=r.userDuring=null;return}ii.el=t,a(dfe)}}function vk(r,t,e,a){var n=e[r];if(n){var s=t[r],l;if(s){var o=e.transition,c=n.transition;if(c)if(!l&&(l=a[r]={}),xu(c))ie(l,s);else for(var u=Ft(c),d=0;d<u.length;d++){var h=u[d],p=s[h];l[h]=p}else if(xu(o)||tt(o,r)>=0){!l&&(l=a[r]={});for(var g=gt(s),d=0;d<g.length;d++){var h=g[d],p=s[h];mfe(n[h],p)&&(l[h]=p)}}}}}function fw(r,t,e){var a=t[r];if(a)for(var n=e[r]={},s=gt(a),l=0;l<s.length;l++){var o=s[l];n[o]=Ng(a[o])}}function ffe(r,t,e){for(var a=t.transition,n=xu(a)?Ni:Ft(a||[]),s=0;s<n.length;s++){var l=n[s];if(!(l==="style"||l==="shape"||l==="extra")){var o=r[l];e[l]=o}}}function pfe(r,t,e){for(var a=0;a<mk.length;a++){var n=mk[a],s=bG[n],l=t[n];l&&(e[s[0]]=l[0],e[s[1]]=l[1])}for(var a=0;a<Ni.length;a++){var o=Ni[a];t[o]!=null&&(e[o]=t[o])}}function gfe(r,t,e,a){if(e){var n=r.style,s;if(n){var l=e.transition,o=t.transition;if(l&&!xu(l)){var c=Ft(l);!s&&(s=a.style={});for(var u=0;u<c.length;u++){var d=c[u],h=n[d];s[d]=h}}else if(r.getAnimationStyleProps&&(xu(o)||xu(l)||tt(o,"style")>=0)){var p=r.getAnimationStyleProps(),g=p?p.style:null;if(g){!s&&(s=a.style={});for(var v=gt(e),u=0;u<v.length;u++){var d=v[u];if(g[d]){var h=n[d];s[d]=h}}}}}}}function mfe(r,t){return Aa(r)?r!==t:r!=null&&isFinite(r)}var NG=ut(),vfe=["percent","easing","shape","style","extra"];function jG(r){r.stopAnimation("keyframe"),r.attr(NG(r))}function Fy(r,t,e){if(!(!e.isAnimationEnabled()||!t)){if(de(t)){B(t,function(o){Fy(r,o,e)});return}var a=t.keyframes,n=t.duration;if(e&&n==null){var s=tf("enter",e,0);n=s&&s.duration}if(!(!a||!n)){var l=NG(r);B(Uy,function(o){if(!(o&&!r[o])){var c;a.sort(function(u,d){return u.percent-d.percent}),B(a,function(u){var d=r.animators,h=o?u[o]:u;if(h){var p=gt(h);if(o||(p=Ct(p,function(y){return tt(vfe,y)<0})),!!p.length){c||(c=r.animate(o,t.loop,!0),c.scope="keyframe");for(var g=0;g<d.length;g++)d[g]!==c&&d[g].targetName===c.targetName&&d[g].stopTracks(p);o&&(l[o]=l[o]||{});var v=o?l[o]:l;B(p,function(y){v[y]=((o?r[o]:r)||{})[y]}),c.whenWithKeys(n*u.percent,h,p,u.easing)}}}),c&&c.delay(t.delay||0).duration(n).start(t.easing)}})}}}var bl="emphasis",Co="normal",XA="blur",ZA="select",Go=[Co,bl,XA,ZA],pw={normal:["itemStyle"],emphasis:[bl,"itemStyle"],blur:[XA,"itemStyle"],select:[ZA,"itemStyle"]},gw={normal:["label"],emphasis:[bl,"label"],blur:[XA,"label"],select:[ZA,"label"]},xfe=["x","y"],yfe="e\0\0",Zn={normal:{},emphasis:{},blur:{},select:{}},bfe={cartesian2d:Jhe,geo:tfe,single:afe,polar:sfe,calendar:ife,matrix:lfe};function sC(r){return r instanceof ht}function iC(r){return r instanceof fs}function _fe(r,t){t.copyTransform(r),iC(t)&&iC(r)&&(t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t.invisible=r.invisible,t.ignore=r.ignore,sC(t)&&sC(r)&&t.setShape(r.shape))}var Nfe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,s){this._progressiveEls=null;var l=this._data,o=e.getData(),c=this.group,u=xk(e,o,a,n);l||c.removeAll(),o.diff(l).add(function(h){mw(n,null,h,u(h,s),e,c,o)}).remove(function(h){var p=l.getItemGraphicEl(h);p&&qb(p,yl(p).option,e)}).update(function(h,p){var g=l.getItemGraphicEl(p);mw(n,g,h,u(h,s),e,c,o)}).execute();var d=e.get("clip",!0)?Bm(e.coordinateSystem,!1,e):null;d?c.setClipPath(d):c.removeClipPath(),this._data=o},t.prototype.incrementalPrepareRender=function(e,a,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,a,n,s,l){var o=a.getData(),c=xk(a,o,n,s),u=this._progressiveEls=[];function d(g){g.isGroup||(g.incremental=!0,g.ensureState("emphasis").hoverLayer=!0)}for(var h=e.start;h<e.end;h++){var p=mw(null,null,h,c(h,l),a,this.group,o);p&&(p.traverse(d),u.push(p))}},t.prototype.eachRendered=function(e){Wo(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,a,n,s){var l=a.element;if(l==null||n.name===l)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===l)return!0;return!1},t.type="custom",t})(Pt);function KA(r){var t=r.type,e;if(t==="path"){var a=r.shape,n=a.width!=null&&a.height!=null?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,s=CG(a);e=Lh(s,null,n,a.layout||"center"),yl(e).customPathData=s}else if(t==="image")e=new la({}),yl(e).customImagePath=r.style.image;else if(t==="text")e=new vt({});else if(t==="group")e=new Pe;else if(t==="compoundPath"){var a=r.shape;if(!a||!a.paths){var l="";At(l)}var o=pe(a.paths,function(d){if(d.type==="path")return Lh(d.shape.pathData,d,null);var h=Wg(d.type);if(!h){var p="";At(p)}return new h});e=new Mm({shape:{paths:o}})}else{var c=Wg(t);if(!c){var l="";At(l)}e=new c}return yl(e).customGraphicType=t,e.name=r.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function QA(r,t,e,a,n,s,l){jG(t);var o=n&&n.normal.cfg;o&&t.setTextConfig(o),a&&a.transition==null&&(a.transition=xfe);var c=a&&a.style;if(c){if(t.type==="text"){var u=c;Te(u,"textFill")&&(u.fill=u.textFill),Te(u,"textStroke")&&(u.stroke=u.textStroke)}var d=void 0,h=sC(t)?c.decal:null;r&&h&&(h.dirty=!0,d=Oh(h,r)),c.__decalPattern=d}if(iC(t)&&c){var d=c.__decalPattern;d&&(c.decal=d)}Bx(t,a,s,{dataIndex:e,isInit:l,clearStyle:!0}),Fy(t,a.keyframeAnimation,s)}function wG(r,t,e,a,n){var s=t.isGroup?null:t,l=n&&n[r].cfg;if(s){var o=s.ensureState(r);if(a===!1){var c=s.getState(r);c&&(c.style=null)}else o.style=a||null;l&&(o.textConfig=l),Tu(s)}}function jfe(r,t,e){if(!r.isGroup){var a=r,n=e.currentZ,s=e.currentZLevel;a.z=n,a.zlevel=s;var l=t.z2;l!=null&&(a.z2=l||0);for(var o=0;o<Go.length;o++)wfe(a,t,Go[o])}}function wfe(r,t,e){var a=e===Co,n=a?t:Yy(t,e),s=n?n.z2:null,l;s!=null&&(l=a?r:r.ensureState(e),l.z2=s||0)}function xk(r,t,e,a){var n=r.get("renderItem");if(typeof n=="string"){var s=vre(n);s&&(n=s)}var l=r.coordinateSystem,o={};l&&(o=l.prepareCustoms?l.prepareCustoms(l):bfe[l.type](l));for(var c=Ge({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:T,style:C,ordinalRawValue:A,styleEmphasis:M,visual:L,barLayout:O,currentSeriesIndices:z,font:U},o.api||{}),u={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:Sfe(r.getData()),itemPayload:r.get("itemPayload")||{}},d,h,p={},g={},v={},y={},x=0;x<Go.length;x++){var b=Go[x];v[b]=r.getModel(pw[b]),y[b]=r.getModel(gw[b])}function N(H){return H===d?h||(h=t.getItemModel(H)):t.getItemModel(H)}function w(H,P){return t.hasItemOption?H===d?p[P]||(p[P]=N(H).getModel(pw[P])):N(H).getModel(pw[P]):v[P]}function S(H,P){return t.hasItemOption?H===d?g[P]||(g[P]=N(H).getModel(gw[P])):N(H).getModel(gw[P]):y[P]}return function(H,P){return d=H,h=null,p={},g={},n&&n(Ge({dataIndexInside:H,dataIndex:t.getRawIndex(H),actionType:P?P.type:null},u),c)};function T(H,P){return P==null&&(P=d),t.getStore().get(t.getDimensionIndex(H||0),P)}function A(H,P){P==null&&(P=d),H=H||0;var F=t.getDimensionInfo(H);if(!F){var Y=t.getDimensionIndex(H);return Y>=0?t.getStore().get(Y,P):void 0}var X=t.get(F.name,P),q=F&&F.ordinalMeta;return q?q.categories[X]:X}function C(H,P){P==null&&(P=d);var F=t.getItemVisual(P,"style"),Y=F&&F.fill,X=F&&F.opacity,q=w(P,Co).getItemStyle();Y!=null&&(q.fill=Y),X!=null&&(q.opacity=X);var G={inheritColor:je(Y)?Y:ee.color.neutral99},$=S(P,Co),Z=Gt($,null,G,!1,!0);Z.text=$.getShallow("show")?Me(r.getFormattedLabel(P,Co),Bh(t,P)):null;var te=hy($,G,!1);return k(H,q),q=pk(q,Z,te),H&&R(q,H),q.legacy=!0,q}function M(H,P){P==null&&(P=d);var F=w(P,bl).getItemStyle(),Y=S(P,bl),X=Gt(Y,null,null,!0,!0);X.text=Y.getShallow("show")?fn(r.getFormattedLabel(P,bl),r.getFormattedLabel(P,Co),Bh(t,P)):null;var q=hy(Y,null,!0);return k(H,F),F=pk(F,X,q),H&&R(F,H),F.legacy=!0,F}function R(H,P){for(var F in P)Te(P,F)&&(H[F]=P[F])}function k(H,P){H&&(H.textFill&&(P.textFill=H.textFill),H.textPosition&&(P.textPosition=H.textPosition))}function L(H,P){if(P==null&&(P=d),Te(hk,H)){var F=t.getItemVisual(P,"style");return F?F[hk[H]]:null}if(Te(Zhe,H))return t.getItemVisual(P,H)}function O(H){if(l.type==="cartesian2d"){var P=l.getBaseAxis();return bae(Ge({axis:P},H))}}function z(){return e.getCurrentSeriesIndices()}function U(H){return NT(H,e)}}function Sfe(r){var t={};return B(r.dimensions,function(e){var a=r.getDimensionInfo(e);if(!a.isExtraCoord){var n=a.coordDim,s=t[n]=t[n]||[];s[a.coordDimIndex]=r.getDimensionIndex(e)}}),t}function mw(r,t,e,a,n,s,l){if(!a){s.remove(t);return}var o=JA(r,t,e,a,n,s);return o&&l.setItemGraphicEl(e,o),o&&nr(o,a.focus,a.blurScope,a.emphasisDisabled),o}function JA(r,t,e,a,n,s){var l=-1,o=t;t&&SG(t,a,n)&&(l=tt(s.childrenRef(),t),t=null);var c=!t,u=t;u?u.clearStates():(u=KA(a),o&&_fe(o,u)),a.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),a.tooltipDisabled&&(u.tooltipDisabled=!0),Zn.normal.cfg=Zn.normal.conOpt=Zn.emphasis.cfg=Zn.emphasis.conOpt=Zn.blur.cfg=Zn.blur.conOpt=Zn.select.cfg=Zn.select.conOpt=null,Zn.isLegacy=!1,Tfe(u,e,a,n,c,Zn),Cfe(u,e,a,n,c),QA(r,u,e,a,Zn,n,c),Te(a,"info")&&(yl(u).info=a.info);for(var d=0;d<Go.length;d++){var h=Go[d];if(h!==Co){var p=Yy(a,h),g=eE(a,p,h);wG(h,u,p,g,Zn)}}return jfe(u,a,n),a.type==="group"&&Afe(r,u,e,a,n),l>=0?s.replaceAt(u,l):s.add(u),u}function SG(r,t,e){var a=yl(r),n=t.type,s=t.shape,l=t.style;return e.isUniversalTransitionEnabled()||n!=null&&n!==a.customGraphicType||n==="path"&&Rfe(s)&&CG(s)!==a.customPathData||n==="image"&&Te(l,"image")&&l.image!==a.customImagePath}function Cfe(r,t,e,a,n){var s=e.clipPath;if(s===!1)r&&r.getClipPath()&&r.removeClipPath();else if(s){var l=r.getClipPath();l&&SG(l,s,a)&&(l=null),l||(l=KA(s),r.setClipPath(l)),QA(null,l,t,s,null,a,n)}}function Tfe(r,t,e,a,n,s){if(!(r.isGroup||r.type==="compoundPath")){yk(e,null,s),yk(e,bl,s);var l=s.normal.conOpt,o=s.emphasis.conOpt,c=s.blur.conOpt,u=s.select.conOpt;if(l!=null||o!=null||u!=null||c!=null){var d=r.getTextContent();if(l===!1)d&&r.removeTextContent();else{l=s.normal.conOpt=l||{type:"text"},d?d.clearStates():(d=KA(l),r.setTextContent(d)),QA(null,d,t,l,null,a,n);for(var h=l&&l.style,p=0;p<Go.length;p++){var g=Go[p];if(g!==Co){var v=s[g].conOpt;wG(g,d,v,eE(l,v,g),null)}}h?d.dirty():d.markRedraw()}}}}function yk(r,t,e){var a=t?Yy(r,t):r,n=t?eE(r,a,bl):r.style,s=r.type,l=a?a.textConfig:null,o=r.textContent,c=o?t?Yy(o,t):o:null;if(n&&(e.isLegacy||xG(n,s,!!l,!!c))){e.isLegacy=!0;var u=yG(n,s,!t);!l&&u.textConfig&&(l=u.textConfig),!c&&u.textContent&&(c=u.textContent)}if(!t&&c){var d=c;!d.type&&(d.type="text")}var h=t?e[t]:e.normal;h.cfg=l,h.conOpt=c}function Yy(r,t){return t?r?r[t]:null:r}function eE(r,t,e){var a=t&&t.style;return a==null&&e===bl&&r&&(a=r.styleEmphasis),a}function Afe(r,t,e,a,n){var s=a.children,l=s?s.length:0,o=a.$mergeChildren,c=o==="byName"||a.diffChildrenByName,u=o===!1;if(!(!l&&!c&&!u)){if(c){Dfe({api:r,oldChildren:t.children()||[],newChildren:s||[],dataIndex:e,seriesModel:n,group:t});return}u&&t.removeAll();for(var d=0;d<l;d++){var h=s[d],p=t.childAt(d);h?(h.ignore==null&&(h.ignore=!1),JA(r,p,e,h,n,t)):p.ignore=!0}for(var g=t.childCount()-1;g>=d;g--){var v=t.childAt(g);Efe(t,v,n)}}}function Efe(r,t,e){t&&qb(t,yl(r).option,e)}function Dfe(r){new Tl(r.oldChildren,r.newChildren,bk,bk,r).add(_k).update(_k).remove(Mfe).execute()}function bk(r,t){var e=r&&r.name;return e??yfe+t}function _k(r,t){var e=this.context,a=r!=null?e.newChildren[r]:null,n=t!=null?e.oldChildren[t]:null;JA(e.api,n,e.dataIndex,a,e.seriesModel,e.group)}function Mfe(r){var t=this.context,e=t.oldChildren[r];e&&qb(e,yl(e).option,t.seriesModel)}function CG(r){return r&&(r.pathData||r.d)}function Rfe(r){return r&&(Te(r,"pathData")||Te(r,"d"))}function Lfe(r){r.registerChartView(Nfe),r.registerSeriesModel(Khe)}var Kc=ut(),Nk=Oe,vw=we,tE=(function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(t,e,a,n){var s=e.get("value"),l=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=a,!(!n&&this._lastValue===s&&this._lastStatus===l)){this._lastValue=s,this._lastStatus=l;var o=this._group,c=this._handle;if(!l||l==="hide"){o&&o.hide(),c&&c.hide();return}o&&o.show(),c&&c.show();var u={};this.makeElOption(u,s,t,e,a);var d=u.graphicKey;d!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=d;var h=this._moveAnimation=this.determineAnimation(t,e);if(!o)o=this._group=new Pe,this.createPointerEl(o,u,t,e),this.createLabelEl(o,u,t,e),a.getZr().add(o);else{var p=et(jk,e,h);this.updatePointerEl(o,u,p),this.updateLabelEl(o,u,p,e)}Sk(o,e,!0),this._renderHandle(s)}},r.prototype.remove=function(t){this.clear(t)},r.prototype.dispose=function(t){this.clear(t)},r.prototype.determineAnimation=function(t,e){var a=e.get("animation"),n=t.axis,s=n.type==="category",l=e.get("snap");if(!l&&!s)return!1;if(a==="auto"||a==null){var o=this.animationThreshold;if(s&&n.getBandWidth()>o)return!0;if(l){var c=NA(t).seriesDataCount,u=n.getExtent();return Math.abs(u[0]-u[1])/c>o}return!1}return a===!0},r.prototype.makeElOption=function(t,e,a,n,s){},r.prototype.createPointerEl=function(t,e,a,n){var s=e.pointer;if(s){var l=Kc(t).pointerEl=new zu[s.type](Nk(e.pointer));t.add(l)}},r.prototype.createLabelEl=function(t,e,a,n){if(e.label){var s=Kc(t).labelEl=new vt(Nk(e.label));t.add(s),wk(s,n)}},r.prototype.updatePointerEl=function(t,e,a){var n=Kc(t).pointerEl;n&&e.pointer&&(n.setStyle(e.pointer.style),a(n,{shape:e.pointer.shape}))},r.prototype.updateLabelEl=function(t,e,a,n){var s=Kc(t).labelEl;s&&(s.setStyle(e.label.style),a(s,{x:e.label.x,y:e.label.y}),wk(s,n))},r.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,a=this._api.getZr(),n=this._handle,s=e.getModel("handle"),l=e.get("status");if(!s.get("show")||!l||l==="hide"){n&&a.remove(n),this._handle=null;return}var o;this._handle||(o=!0,n=this._handle=rf(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){wl(u.event)},onmousedown:vw(this._onHandleDragMove,this,0,0),drift:vw(this._onHandleDragMove,this),ondragend:vw(this._onHandleDragEnd,this)}),a.add(n)),Sk(n,e,!1),n.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=s.get("size");de(c)||(c=[c,c]),n.scaleX=c[0]/2,n.scaleY=c[1]/2,cf(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,o)}},r.prototype._moveHandleToValue=function(t,e){jk(this._axisPointerModel,!e&&this._moveAnimation,this._handle,xw(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(t,e){var a=this._handle;if(a){this._dragging=!0;var n=this.updateHandleTransform(xw(a),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,a.stopAnimation(),a.attr(xw(n)),Kc(a).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,a=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:a.axis.dim,axisIndex:a.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),a=this._group,n=this._handle;e&&a&&(this._lastGraphicKey=null,a&&e.remove(a),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Zg(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(t,e,a){return a=a||0,{x:t[a],y:t[1-a],width:e[a],height:e[1-a]}},r})();function jk(r,t,e,a){TG(Kc(e).lastProp,a)||(Kc(e).lastProp=a,t?Nt(e,a,r):(e.stopAnimation(),e.attr(a)))}function TG(r,t){if(Ue(r)&&Ue(t)){var e=!0;return B(t,function(a,n){e=e&&TG(r[n],a)}),!!e}else return r===t}function wk(r,t){r[t.get(["label","show"])?"show":"hide"]()}function xw(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function Sk(r,t,e){var a=t.get("z"),n=t.get("zlevel");r&&r.traverse(function(s){s.type!=="group"&&(a!=null&&(s.z=a),n!=null&&(s.zlevel=n),s.silent=e)})}function rE(r){var t=r.get("type"),e=r.getModel(t+"Style"),a;return t==="line"?(a=e.getLineStyle(),a.fill=null):t==="shadow"&&(a=e.getAreaStyle(),a.stroke=null),a}function AG(r,t,e,a,n){var s=e.get("value"),l=EG(s,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),o=e.getModel("label"),c=sf(o.get("padding")||0),u=o.getFont(),d=xb(l,u),h=n.position,p=d.width+c[1]+c[3],g=d.height+c[0]+c[2],v=n.align;v==="right"&&(h[0]-=p),v==="center"&&(h[0]-=p/2);var y=n.verticalAlign;y==="bottom"&&(h[1]-=g),y==="middle"&&(h[1]-=g/2),Ife(h,p,g,a);var x=o.get("backgroundColor");(!x||x==="auto")&&(x=t.get(["axisLine","lineStyle","color"])),r.label={x:h[0],y:h[1],style:Gt(o,{text:l,font:u,fill:o.getTextColor(),padding:c,backgroundColor:x}),z2:10}}function Ife(r,t,e,a){var n=a.getWidth(),s=a.getHeight();r[0]=Math.min(r[0]+t,n)-t,r[1]=Math.min(r[1]+e,s)-e,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function EG(r,t,e,a,n){r=t.scale.parse(r);var s=t.scale.getLabel({value:r},{precision:n.precision}),l=n.formatter;if(l){var o={value:Cy(t,{value:r}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};B(a,function(c){var u=e.getSeriesByIndex(c.seriesIndex),d=c.dataIndexInside,h=u&&u.getDataParams(d);h&&o.seriesData.push(h)}),je(l)?s=l.replace("{value}",s):Le(l)&&(s=l(o))}return s}function aE(r,t,e){var a=na();return Ml(a,a,e.rotation),zs(a,a,e.position),Os([r.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],a)}function DG(r,t,e,a,n,s){var l=qa.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=n.get(["label","margin"]),AG(t,a,n,s,{position:aE(a.axis,r,e),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function nE(r,t,e){return e=e||0,{x1:r[e],y1:r[1-e],x2:t[e],y2:t[1-e]}}function MG(r,t,e){return e=e||0,{x:r[e],y:r[1-e],width:t[e],height:t[1-e]}}function Ck(r,t,e,a,n,s){return{cx:r,cy:t,r0:e,r:a,startAngle:n,endAngle:s,clockwise:!0}}var kfe=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,a,n,s,l){var o=n.axis,c=o.grid,u=s.get("type"),d=Tk(c,o).getOtherAxis(o).getGlobalExtent(),h=o.toGlobalCoord(o.dataToCoord(a,!0));if(u&&u!=="none"){var p=rE(s),g=Ofe[u](o,h,d);g.style=p,e.graphicKey=g.type,e.pointer=g}var v=Oy(c.getRect(),n);DG(a,e,v,n,s,l)},t.prototype.getHandleTransform=function(e,a,n){var s=Oy(a.axis.grid.getRect(),a,{labelInside:!1});s.labelMargin=n.get(["handle","margin"]);var l=aE(a.axis,e,s);return{x:l[0],y:l[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,a,n,s){var l=n.axis,o=l.grid,c=l.getGlobalExtent(!0),u=Tk(o,l).getOtherAxis(l).getGlobalExtent(),d=l.dim==="x"?0:1,h=[e.x,e.y];h[d]+=a[d],h[d]=Math.min(c[1],h[d]),h[d]=Math.max(c[0],h[d]);var p=(u[1]+u[0])/2,g=[p,p];g[d]=h[d];var v=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:e.rotation,cursorPoint:g,tooltipOption:v[d]}},t})(tE);function Tk(r,t){var e={};return e[t.dim+"AxisIndex"]=t.index,r.getCartesian(e)}var Ofe={line:function(r,t,e){var a=nE([t,e[0]],[t,e[1]],Ak(r));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(r,t,e){var a=Math.max(1,r.getBandWidth()),n=e[1]-e[0];return{type:"Rect",shape:MG([t-a/2,e[0]],[a,n],Ak(r))}}};function Ak(r){return r.dim==="x"?0:1}var Pfe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:ee.color.border,width:1,type:"dashed"},shadowStyle:{color:ee.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:ee.color.neutral00,padding:[5,7,5,7],backgroundColor:ee.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:ee.color.accent40,throttle:40}},t})(ct),pl=ut(),zfe=B;function RG(r,t,e){if(!pt.node){var a=t.getZr();pl(a).records||(pl(a).records={}),Bfe(a,t);var n=pl(a).records[r]||(pl(a).records[r]={});n.handler=e}}function Bfe(r,t){if(pl(r).initialized)return;pl(r).initialized=!0,e("click",et(Ek,"click")),e("mousemove",et(Ek,"mousemove")),e("globalout",Hfe);function e(a,n){r.on(a,function(s){var l=Gfe(t);zfe(pl(r).records,function(o){o&&n(o,s,l.dispatchAction)}),Vfe(l.pendings,t)})}}function Vfe(r,t){var e=r.showTip.length,a=r.hideTip.length,n;e?n=r.showTip[e-1]:a&&(n=r.hideTip[a-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function Hfe(r,t,e){r.handler("leave",null,e)}function Ek(r,t,e,a){t.handler(r,e,a)}function Gfe(r){var t={showTip:[],hideTip:[]},e=function(a){var n=t[a.type];n?n.push(a):(a.dispatchAction=e,r.dispatchAction(a))};return{dispatchAction:e,pendings:t}}function lC(r,t){if(!pt.node){var e=t.getZr(),a=(pl(e).records||{})[r];a&&(pl(e).records[r]=null)}}var Ufe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=a.getComponent("tooltip"),l=e.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";RG("axisPointer",n,function(o,c,u){l!=="none"&&(o==="leave"||l.indexOf(o)>=0)&&u({type:"updateAxisPointer",currTrigger:o,x:c&&c.offsetX,y:c&&c.offsetY})})},t.prototype.remove=function(e,a){lC("axisPointer",a)},t.prototype.dispose=function(e,a){lC("axisPointer",a)},t.type="axisPointer",t})(Yt);function LG(r,t){var e=[],a=r.seriesIndex,n;if(a==null||!(n=t.getSeriesByIndex(a)))return{point:[]};var s=n.getData(),l=Su(s,r);if(l==null||l<0||de(l))return{point:[]};var o=s.getItemGraphicEl(l),c=n.coordinateSystem;if(n.getTooltipPosition)e=n.getTooltipPosition(l)||[];else if(c&&c.dataToPoint)if(r.isStacked){var u=c.getBaseAxis(),d=c.getOtherAxis(u),h=d.dim,p=u.dim,g=h==="x"||h==="radius"?1:0,v=s.mapDimension(p),y=[];y[g]=s.get(v,l),y[1-g]=s.get(s.getCalculationInfo("stackResultDimension"),l),e=c.dataToPoint(y)||[]}else e=c.dataToPoint(s.getValues(pe(c.dimensions,function(b){return s.mapDimension(b)}),l))||[];else if(o){var x=o.getBoundingRect().clone();x.applyTransform(o.transform),e=[x.x+x.width/2,x.y+x.height/2]}return{point:e,el:o}}var Dk=ut();function Ffe(r,t,e){var a=r.currTrigger,n=[r.x,r.y],s=r,l=r.dispatchAction||we(e.dispatchAction,e),o=t.getComponent("axisPointer").coordSysAxesInfo;if(o){Vx(n)&&(n=LG({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},t).point);var c=Vx(n),u=s.axesInfo,d=o.axesInfo,h=a==="leave"||Vx(n),p={},g={},v={list:[],map:{}},y={showPointer:et(Wfe,g),showTooltip:et($fe,v)};B(o.coordSysMap,function(b,N){var w=c||b.containPoint(n);B(o.coordSysAxesInfo[N],function(S,T){var A=S.axis,C=Kfe(u,S);if(!h&&w&&(!u||C)){var M=C&&C.value;M==null&&!c&&(M=A.pointToData(n)),M!=null&&Mk(S,M,y,!1,p)}})});var x={};return B(d,function(b,N){var w=b.linkGroup;w&&!g[N]&&B(w.axesInfo,function(S,T){var A=g[T];if(S!==b&&A){var C=A.value;w.mapper&&(C=b.axis.scale.parse(w.mapper(C,Rk(S),Rk(b)))),x[b.key]=C}})}),B(x,function(b,N){Mk(d[N],b,y,!0,p)}),qfe(g,d,p),Xfe(v,n,r,l),Zfe(d,l,e),p}}function Mk(r,t,e,a,n){var s=r.axis;if(!(s.scale.isBlank()||!s.containData(t))){if(!r.involveSeries){e.showPointer(r,t);return}var l=Yfe(t,r),o=l.payloadBatch,c=l.snapToValue;o[0]&&n.seriesIndex==null&&ie(n,o[0]),!a&&r.snap&&s.containData(c)&&c!=null&&(t=c),e.showPointer(r,t,o),e.showTooltip(r,l,c)}}function Yfe(r,t){var e=t.axis,a=e.dim,n=r,s=[],l=Number.MAX_VALUE,o=-1;return B(t.seriesModels,function(c,u){var d=c.getData().mapDimensionsAll(a),h,p;if(c.getAxisTooltipData){var g=c.getAxisTooltipData(d,r,e);p=g.dataIndices,h=g.nestestValue}else{if(p=c.indicesOfNearest(a,d[0],r,e.type==="category"?.5:null),!p.length)return;h=c.getData().get(d[0],p[0])}if(!(h==null||!isFinite(h))){var v=r-h,y=Math.abs(v);y<=l&&((y<l||v>=0&&o<0)&&(l=y,o=v,n=h,s.length=0),B(p,function(x){s.push({seriesIndex:c.seriesIndex,dataIndexInside:x,dataIndex:c.getData().getRawIndex(x)})}))}}),{payloadBatch:s,snapToValue:n}}function Wfe(r,t,e,a){r[t.key]={value:e,payloadBatch:a}}function $fe(r,t,e,a){var n=e.payloadBatch,s=t.axis,l=s.model,o=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var c=t.coordSys.model,u=sm(c),d=r.map[u];d||(d=r.map[u]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},r.list.push(d)),d.dataByAxis.push({axisDim:s.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:a,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function qfe(r,t,e){var a=e.axesInfo=[];B(t,function(n,s){var l=n.axisPointerModel.option,o=r[s];o?(!n.useHandle&&(l.status="show"),l.value=o.value,l.seriesDataIndices=(o.payloadBatch||[]).slice()):!n.useHandle&&(l.status="hide"),l.status==="show"&&a.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:l.value})})}function Xfe(r,t,e,a){if(Vx(t)||!r.list.length){a({type:"hideTip"});return}var n=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};a({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:r.list})}function Zfe(r,t,e){var a=e.getZr(),n="axisPointerLastHighlights",s=Dk(a)[n]||{},l=Dk(a)[n]={};B(r,function(u,d){var h=u.axisPointerModel.option;h.status==="show"&&u.triggerEmphasis&&B(h.seriesDataIndices,function(p){var g=p.seriesIndex+" | "+p.dataIndex;l[g]=p})});var o=[],c=[];B(s,function(u,d){!l[d]&&c.push(u)}),B(l,function(u,d){!s[d]&&o.push(u)}),c.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:c}),o.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function Kfe(r,t){for(var e=0;e<(r||[]).length;e++){var a=r[e];if(t.axis.dim===a.axisDim&&t.axis.model.componentIndex===a.axisIndex)return a}}function Rk(r){var t=r.axis.model,e={},a=e.axisDim=r.axis.dim;return e.axisIndex=e[a+"AxisIndex"]=t.componentIndex,e.axisName=e[a+"AxisName"]=t.name,e.axisId=e[a+"AxisId"]=t.id,e}function Vx(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function Gm(r){Gu.registerAxisPointerClass("CartesianAxisPointer",kfe),r.registerComponentModel(Pfe),r.registerComponentView(Ufe),r.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!de(e)&&(t.axisPointer.link=[e])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=Qie(t,e)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Ffe)}function Qfe(r){st(aH),st(Gm)}var Jfe=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,a,n,s,l){var o=n.axis;o.dim==="angle"&&(this.animationThreshold=Math.PI/18);var c=o.polar,u=c.getOtherAxis(o),d=u.getExtent(),h=o.dataToCoord(a),p=s.get("type");if(p&&p!=="none"){var g=rE(s),v=tpe[p](o,c,h,d);v.style=g,e.graphicKey=v.type,e.pointer=v}var y=s.get(["label","margin"]),x=epe(a,n,s,c,y);AG(e,n,s,l,x)},t})(tE);function epe(r,t,e,a,n){var s=t.axis,l=s.dataToCoord(r),o=a.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var c=a.getRadiusAxis().getExtent(),u,d,h;if(s.dim==="radius"){var p=na();Ml(p,p,o),zs(p,p,[a.cx,a.cy]),u=Os([l,-n],p);var g=t.getModel("axisLabel").get("rotate")||0,v=qa.innerTextLayout(o,g*Math.PI/180,-1);d=v.textAlign,h=v.textVerticalAlign}else{var y=c[1];u=a.coordToPoint([y+n,l]);var x=a.cx,b=a.cy;d=Math.abs(u[0]-x)/y<.3?"center":u[0]>x?"left":"right",h=Math.abs(u[1]-b)/y<.3?"middle":u[1]>b?"top":"bottom"}return{position:u,align:d,verticalAlign:h}}var tpe={line:function(r,t,e,a){return r.dim==="angle"?{type:"Line",shape:nE(t.coordToPoint([a[0],e]),t.coordToPoint([a[1],e]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:e}}},shadow:function(r,t,e,a){var n=Math.max(1,r.getBandWidth()),s=Math.PI/180;return r.dim==="angle"?{type:"Sector",shape:Ck(t.cx,t.cy,a[0],a[1],(-e-n/2)*s,(-e+n/2)*s)}:{type:"Sector",shape:Ck(t.cx,t.cy,e-n/2,e+n/2,0,Math.PI*2)}}},rpe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.findAxisModel=function(e){var a,n=this.ecModel;return n.eachComponent(e,function(s){s.getCoordSysModel()===this&&(a=s)},this),a},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t})(ct),sE=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",pr).models[0]},t.type="polarAxis",t})(ct);yr(sE,ff);var ape=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="angleAxis",t})(sE),npe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="radiusAxis",t})(sE),iE=(function(r){re(t,r);function t(e,a){return r.call(this,"radius",e,a)||this}return t.prototype.pointToData=function(e,a){return this.polar.pointToData(e,a)[this.dim==="radius"?0:1]},t})(vs);iE.prototype.dataToRadius=vs.prototype.dataToCoord;iE.prototype.radiusToData=vs.prototype.coordToData;var spe=ut(),lE=(function(r){re(t,r);function t(e,a){return r.call(this,"angle",e,a||[0,360])||this}return t.prototype.pointToData=function(e,a){return this.polar.pointToData(e,a)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,a=e.getLabelModel(),n=e.scale,s=n.getExtent(),l=n.count();if(s[1]-s[0]<1)return 0;var o=s[0],c=e.dataToCoord(o+1)-e.dataToCoord(o),u=Math.abs(c),d=xb(o==null?"":o+"",a.getFont(),"center","top"),h=Math.max(d.height,7),p=h/u;isNaN(p)&&(p=1/0);var g=Math.max(0,Math.floor(p)),v=spe(e.model),y=v.lastAutoInterval,x=v.lastTickCount;return y!=null&&x!=null&&Math.abs(y-g)<=1&&Math.abs(x-l)<=1&&y>g?g=y:(v.lastTickCount=l,v.lastAutoInterval=g),g},t})(vs);lE.prototype.dataToAngle=vs.prototype.dataToCoord;lE.prototype.angleToData=vs.prototype.coordToData;var IG=["radius","angle"],ipe=(function(){function r(t){this.dimensions=IG,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new iE,this._angleAxis=new lE,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},r.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},r.prototype.getAxis=function(t){var e="_"+t+"Axis";return this[e]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(t){var e=[],a=this._angleAxis,n=this._radiusAxis;return a.scale.type===t&&e.push(a),n.scale.type===t&&e.push(n),e},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(t){var e=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},r.prototype.dataToPoint=function(t,e,a){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)],a)},r.prototype.pointToData=function(t,e,a){a=a||[];var n=this.pointToCoord(t);return a[0]=this._radiusAxis.radiusToData(n[0],e),a[1]=this._angleAxis.angleToData(n[1],e),a},r.prototype.pointToCoord=function(t){var e=t[0]-this.cx,a=t[1]-this.cy,n=this.getAngleAxis(),s=n.getExtent(),l=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);n.inverse?l=o-360:o=l+360;var c=Math.sqrt(e*e+a*a);e/=c,a/=c;for(var u=Math.atan2(-a,e)/Math.PI*180,d=u<l?1:-1;u<l||u>o;)u+=d*360;return[c,u]},r.prototype.coordToPoint=function(t,e){e=e||[];var a=t[0],n=t[1]/180*Math.PI;return e[0]=Math.cos(n)*a+this.cx,e[1]=-Math.sin(n)*a+this.cy,e},r.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis(),a=e.getExtent().slice();a[0]>a[1]&&a.reverse();var n=t.getExtent(),s=Math.PI/180,l=1e-4;return{cx:this.cx,cy:this.cy,r0:a[0],r:a[1],startAngle:-n[0]*s,endAngle:-n[1]*s,clockwise:t.inverse,contain:function(o,c){var u=o-this.cx,d=c-this.cy,h=u*u+d*d,p=this.r,g=this.r0;return p!==g&&h-l<=p*p&&h+l>=g*g},x:this.cx-a[1],y:this.cy-a[1],width:a[1]*2,height:a[1]*2}},r.prototype.convertToPixel=function(t,e,a){var n=Lk(e);return n===this?this.dataToPoint(a):null},r.prototype.convertFromPixel=function(t,e,a){var n=Lk(e);return n===this?this.pointToData(a):null},r})();function Lk(r){var t=r.seriesModel,e=r.polarModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function lpe(r,t,e){var a=t.get("center"),n=Kr(t,e).refContainer;r.cx=Ne(a[0],n.width)+n.x,r.cy=Ne(a[1],n.height)+n.y;var s=r.getRadiusAxis(),l=Math.min(n.width,n.height)/2,o=t.get("radius");o==null?o=[0,"100%"]:de(o)||(o=[0,o]);var c=[Ne(o[0],l),Ne(o[1],l)];s.inverse?s.setExtent(c[1],c[0]):s.setExtent(c[0],c[1])}function ope(r,t){var e=this,a=e.getAngleAxis(),n=e.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),r.eachSeries(function(o){if(o.coordinateSystem===e){var c=o.getData();B(Ty(c,"radius"),function(u){n.scale.unionExtentFromData(c,u)}),B(Ty(c,"angle"),function(u){a.scale.unionExtentFromData(c,u)})}}),Mu(a.scale,a.model),Mu(n.scale,n.model),a.type==="category"&&!a.onBand){var s=a.getExtent(),l=360/a.scale.count();a.inverse?s[1]+=l:s[1]-=l,a.setExtent(s[0],s[1])}}function cpe(r){return r.mainType==="angleAxis"}function Ik(r,t){var e;if(r.type=t.get("type"),r.scale=Om(t),r.onBand=t.get("boundaryGap")&&r.type==="category",r.inverse=t.get("inverse"),cpe(t)){r.inverse=r.inverse!==t.get("clockwise");var a=t.get("startAngle"),n=(e=t.get("endAngle"))!==null&&e!==void 0?e:a+(r.inverse?-360:360);r.setExtent(a,n)}t.axis=r,r.model=t}var upe={dimensions:IG,create:function(r,t){var e=[];return r.eachComponent("polar",function(a,n){var s=new ipe(n+"");s.update=ope;var l=s.getRadiusAxis(),o=s.getAngleAxis(),c=a.findAxisModel("radiusAxis"),u=a.findAxisModel("angleAxis");Ik(l,c),Ik(o,u),lpe(s,a,t),e.push(s),a.coordinateSystem=s,s.model=a}),r.eachSeries(function(a){if(a.get("coordinateSystem")==="polar"){var n=a.getReferringComponents("polar",pr).models[0];a.coordinateSystem=n.coordinateSystem}}),e}},dpe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function rx(r,t,e){t[1]>t[0]&&(t=t.slice().reverse());var a=r.coordToPoint([t[0],e]),n=r.coordToPoint([t[1],e]);return{x1:a[0],y1:a[1],x2:n[0],y2:n[1]}}function ax(r){var t=r.getRadiusAxis();return t.inverse?0:1}function kk(r){var t=r[0],e=r[r.length-1];t&&e&&Math.abs(Math.abs(t.coord-e.coord)-360)<1e-4&&r.pop()}var hpe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,a){if(this.group.removeAll(),!!e.get("show")){var n=e.axis,s=n.polar,l=s.getRadiusAxis().getExtent(),o=n.getTicksCoords({breakTicks:"none"}),c=n.getMinorTicksCoords(),u=pe(n.getViewLabels(),function(d){d=Oe(d);var h=n.scale,p=h.type==="ordinal"?h.getRawOrdinalNumber(d.tickValue):d.tickValue;return d.coord=n.dataToCoord(p),d});kk(u),kk(o),B(dpe,function(d){e.get([d,"show"])&&(!n.scale.isBlank()||d==="axisLine")&&fpe[d](this.group,e,s,o,c,l,u)},this)}},t.type="angleAxis",t})(Gu),fpe={axisLine:function(r,t,e,a,n,s){var l=t.getModel(["axisLine","lineStyle"]),o=e.getAngleAxis(),c=Math.PI/180,u=o.getExtent(),d=ax(e),h=d?0:1,p,g=Math.abs(u[1]-u[0])===360?"Circle":"Arc";s[h]===0?p=new zu[g]({shape:{cx:e.cx,cy:e.cy,r:s[d],startAngle:-u[0]*c,endAngle:-u[1]*c,clockwise:o.inverse},style:l.getLineStyle(),z2:1,silent:!0}):p=new Jh({shape:{cx:e.cx,cy:e.cy,r:s[d],r0:s[h]},style:l.getLineStyle(),z2:1,silent:!0}),p.style.fill=null,r.add(p)},axisTick:function(r,t,e,a,n,s){var l=t.getModel("axisTick"),o=(l.get("inside")?-1:1)*l.get("length"),c=s[ax(e)],u=pe(a,function(d){return new Tr({shape:rx(e,[c,c+o],d.coord)})});r.add(An(u,{style:Ge(l.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,t,e,a,n,s){if(n.length){for(var l=t.getModel("axisTick"),o=t.getModel("minorTick"),c=(l.get("inside")?-1:1)*o.get("length"),u=s[ax(e)],d=[],h=0;h<n.length;h++)for(var p=0;p<n[h].length;p++)d.push(new Tr({shape:rx(e,[u,u+c],n[h][p].coord)}));r.add(An(d,{style:Ge(o.getModel("lineStyle").getLineStyle(),Ge(l.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,t,e,a,n,s,l){var o=t.getCategories(!0),c=t.getModel("axisLabel"),u=c.get("margin"),d=t.get("triggerEvent");B(l,function(h,p){var g=c,v=h.tickValue,y=s[ax(e)],x=e.coordToPoint([y+u,h.coord]),b=e.cx,N=e.cy,w=Math.abs(x[0]-b)/y<.3?"center":x[0]>b?"left":"right",S=Math.abs(x[1]-N)/y<.3?"middle":x[1]>N?"top":"bottom";if(o&&o[v]){var T=o[v];Ue(T)&&T.textStyle&&(g=new dt(T.textStyle,c,c.ecModel))}var A=new vt({silent:qa.isLabelSilent(t),style:Gt(g,{x:x[0],y:x[1],fill:g.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:w,verticalAlign:S})});if(r.add(A),Ll({el:A,componentModel:t,itemName:h.formattedLabel,formatterParamsExtra:{isTruncated:function(){return A.isTruncated},value:h.rawLabel,tickIndex:p}}),d){var C=qa.makeAxisEventDataBase(t);C.targetType="axisLabel",C.value=h.rawLabel,Xe(A).eventData=C}},this)},splitLine:function(r,t,e,a,n,s){var l=t.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color"),u=0;c=c instanceof Array?c:[c];for(var d=[],h=0;h<a.length;h++){var p=u++%c.length;d[p]=d[p]||[],d[p].push(new Tr({shape:rx(e,s,a[h].coord)}))}for(var h=0;h<d.length;h++)r.add(An(d[h],{style:Ge({stroke:c[h%c.length]},o.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(r,t,e,a,n,s){if(n.length){for(var l=t.getModel("minorSplitLine"),o=l.getModel("lineStyle"),c=[],u=0;u<n.length;u++)for(var d=0;d<n[u].length;d++)c.push(new Tr({shape:rx(e,s,n[u][d].coord)}));r.add(An(c,{style:o.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(r,t,e,a,n,s){if(a.length){var l=t.getModel("splitArea"),o=l.getModel("areaStyle"),c=o.get("color"),u=0;c=c instanceof Array?c:[c];for(var d=[],h=Math.PI/180,p=-a[0].coord*h,g=Math.min(s[0],s[1]),v=Math.max(s[0],s[1]),y=t.get("clockwise"),x=1,b=a.length;x<=b;x++){var N=x===b?a[0].coord:a[x].coord,w=u++%c.length;d[w]=d[w]||[],d[w].push(new Da({shape:{cx:e.cx,cy:e.cy,r0:g,r:v,startAngle:p,endAngle:-N*h,clockwise:y},silent:!0})),p=-N*h}for(var x=0;x<d.length;x++)r.add(An(d[x],{style:Ge({fill:c[x%c.length]},o.getAreaStyle()),silent:!0}))}}},ppe=["splitLine","splitArea","minorSplitLine"],gpe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return t.prototype.render=function(e,a,n){if(this.group.removeAll(),!!e.get("show")){var s=this._axisGroup,l=this._axisGroup=new Pe;this.group.add(l);var o=e.axis,c=o.polar,u=c.getAngleAxis(),d=o.getTicksCoords(),h=o.getMinorTicksCoords(),p=u.getExtent()[0],g=o.getExtent(),v=vpe(c,e,p),y=new qa(e,n,v);y.build(),l.add(y.group),Rm(s,l,e),B(ppe,function(x){e.get([x,"show"])&&!o.scale.isBlank()&&mpe[x](this.group,e,c,p,g,d,h)},this)}},t.type="radiusAxis",t})(Gu),mpe={splitLine:function(r,t,e,a,n,s){var l=t.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color"),u=0,d=e.getAngleAxis(),h=Math.PI/180,p=d.getExtent(),g=Math.abs(p[1]-p[0])===360?"Circle":"Arc";c=c instanceof Array?c:[c];for(var v=[],y=0;y<s.length;y++){var x=u++%c.length;v[x]=v[x]||[],v[x].push(new zu[g]({shape:{cx:e.cx,cy:e.cy,r:Math.max(s[y].coord,0),startAngle:-p[0]*h,endAngle:-p[1]*h,clockwise:d.inverse}}))}for(var y=0;y<v.length;y++)r.add(An(v[y],{style:Ge({stroke:c[y%c.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(r,t,e,a,n,s,l){if(l.length){for(var o=t.getModel("minorSplitLine"),c=o.getModel("lineStyle"),u=[],d=0;d<l.length;d++)for(var h=0;h<l[d].length;h++)u.push(new Ei({shape:{cx:e.cx,cy:e.cy,r:l[d][h].coord}}));r.add(An(u,{style:Ge({fill:null},c.getLineStyle()),silent:!0}))}},splitArea:function(r,t,e,a,n,s){if(s.length){var l=t.getModel("splitArea"),o=l.getModel("areaStyle"),c=o.get("color"),u=0;c=c instanceof Array?c:[c];for(var d=[],h=s[0].coord,p=1;p<s.length;p++){var g=u++%c.length;d[g]=d[g]||[],d[g].push(new Da({shape:{cx:e.cx,cy:e.cy,r0:h,r:s[p].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=s[p].coord}for(var p=0;p<d.length;p++)r.add(An(d[p],{style:Ge({fill:c[p%c.length]},o.getAreaStyle()),silent:!0}))}}};function vpe(r,t,e){return{position:[r.cx,r.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function kG(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function OG(r,t){return t.dim+r.model.componentIndex}function xpe(r,t,e){var a={},n=ype(Ct(t.getSeriesByType(r),function(s){return!t.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));t.eachSeriesByType(r,function(s){if(s.coordinateSystem.type==="polar"){var l=s.getData(),o=s.coordinateSystem,c=o.getBaseAxis(),u=OG(o,c),d=kG(s),h=n[u][d],p=h.offset,g=h.width,v=o.getOtherAxis(c),y=s.coordinateSystem.cx,x=s.coordinateSystem.cy,b=s.get("barMinHeight")||0,N=s.get("barMinAngle")||0;a[d]=a[d]||[];for(var w=l.mapDimension(v.dim),S=l.mapDimension(c.dim),T=Al(l,w),A=c.dim!=="radius"||!s.get("roundCap",!0),C=v.model,M=C.get("startValue"),R=v.dataToCoord(M||0),k=0,L=l.count();k<L;k++){var O=l.get(w,k),z=l.get(S,k),U=O>=0?"p":"n",H=R;T&&(a[d][z]||(a[d][z]={p:R,n:R}),H=a[d][z][U]);var P=void 0,F=void 0,Y=void 0,X=void 0;if(v.dim==="radius"){var q=v.dataToCoord(O)-R,G=c.dataToCoord(z);Math.abs(q)<b&&(q=(q<0?-1:1)*b),P=H,F=H+q,Y=G-p,X=Y-g,T&&(a[d][z][U]=F)}else{var $=v.dataToCoord(O,A)-R,Z=c.dataToCoord(z);Math.abs($)<N&&($=($<0?-1:1)*N),P=Z+p,F=P+g,Y=H,X=H+$,T&&(a[d][z][U]=X)}l.setItemLayout(k,{cx:y,cy:x,r0:P,r:F,startAngle:-Y*Math.PI/180,endAngle:-X*Math.PI/180,clockwise:Y>=X})}}})}function ype(r){var t={};B(r,function(a,n){var s=a.getData(),l=a.coordinateSystem,o=l.getBaseAxis(),c=OG(l,o),u=o.getExtent(),d=o.type==="category"?o.getBandWidth():Math.abs(u[1]-u[0])/s.count(),h=t[c]||{bandWidth:d,remainedWidth:d,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},p=h.stacks;t[c]=h;var g=kG(a);p[g]||h.autoWidthCount++,p[g]=p[g]||{width:0,maxWidth:0};var v=Ne(a.get("barWidth"),d),y=Ne(a.get("barMaxWidth"),d),x=a.get("barGap"),b=a.get("barCategoryGap");v&&!p[g].width&&(v=Math.min(h.remainedWidth,v),p[g].width=v,h.remainedWidth-=v),y&&(p[g].maxWidth=y),x!=null&&(h.gap=x),b!=null&&(h.categoryGap=b)});var e={};return B(t,function(a,n){e[n]={};var s=a.stacks,l=a.bandWidth,o=Ne(a.categoryGap,l),c=Ne(a.gap,1),u=a.remainedWidth,d=a.autoWidthCount,h=(u-o)/(d+(d-1)*c);h=Math.max(h,0),B(s,function(y,x){var b=y.maxWidth;b&&b<h&&(b=Math.min(b,u),y.width&&(b=Math.min(b,y.width)),u-=b,y.width=b,d--)}),h=(u-o)/(d+(d-1)*c),h=Math.max(h,0);var p=0,g;B(s,function(y,x){y.width||(y.width=h),g=y,p+=y.width*(1+c)}),g&&(p-=g.width*c);var v=-p/2;B(s,function(y,x){e[n][x]=e[n][x]||{offset:v,width:y.width},v+=y.width*(1+c)})}),e}var bpe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},_pe={splitNumber:5},Npe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="polar",t})(Yt);function jpe(r){st(Gm),Gu.registerAxisPointerClass("PolarAxisPointer",Jfe),r.registerCoordinateSystem("polar",upe),r.registerComponentModel(rpe),r.registerComponentView(Npe),Vh(r,"angle",ape,bpe),Vh(r,"radius",npe,_pe),r.registerComponentView(hpe),r.registerComponentView(gpe),r.registerLayout(et(xpe,"bar"))}function oC(r,t){t=t||{};var e=r.coordinateSystem,a=r.axis,n={},s=a.position,l=a.orient,o=e.getRect(),c=[o.x,o.x+o.width,o.y,o.y+o.height],u={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};n.position=[l==="vertical"?u.vertical[s]:c[0],l==="horizontal"?u.horizontal[s]:c[3]];var d={horizontal:0,vertical:1};n.rotation=Math.PI/2*d[l];var h={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=h[s],r.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),ga(t.labelInside,r.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var p=r.get(["axisLabel","rotate"]);return n.labelRotate=s==="top"?-p:p,n.z2=1,n}var wpe=["splitArea","splitLine","breakArea"],Spe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return t.prototype.render=function(e,a,n,s){var l=this.group;l.removeAll();var o=this._axisGroup;this._axisGroup=new Pe;var c=oC(e),u=new qa(e,n,c);u.build(),l.add(this._axisGroup),l.add(u.group),B(wpe,function(d){e.get([d,"show"])&&Cpe[d](this,this.group,this._axisGroup,e,n)},this),Rm(o,this._axisGroup,e),r.prototype.render.call(this,e,a,n,s)},t.prototype.remove=function(){eH(this)},t.type="singleAxis",t})(Gu),Cpe={splitLine:function(r,t,e,a,n){var s=a.axis;if(!s.scale.isBlank()){var l=a.getModel("splitLine"),o=l.getModel("lineStyle"),c=o.get("color");c=c instanceof Array?c:[c];for(var u=o.get("width"),d=a.coordinateSystem.getRect(),h=s.isHorizontal(),p=[],g=0,v=s.getTicksCoords({tickModel:l,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),y=[],x=[],b=0;b<v.length;++b){var N=s.toGlobalCoord(v[b].coord);h?(y[0]=N,y[1]=d.y,x[0]=N,x[1]=d.y+d.height):(y[0]=d.x,y[1]=N,x[0]=d.x+d.width,x[1]=N);var w=new Tr({shape:{x1:y[0],y1:y[1],x2:x[0],y2:x[1]},silent:!0});Ih(w.shape,u);var S=g++%c.length;p[S]=p[S]||[],p[S].push(w)}for(var T=o.getLineStyle(["color"]),b=0;b<p.length;++b)t.add(An(p[b],{style:Ge({stroke:c[b%c.length]},T),silent:!0}))}},splitArea:function(r,t,e,a,n){JV(r,e,a,a)},breakArea:function(r,t,e,a,n){var s=Hm(),l=a.axis.scale;s&&l.type!=="ordinal"&&s.rectCoordBuildBreakAxis(t,r,a,a.coordinateSystem.getRect(),n)}},Hx=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}},jitter:0,jitterOverlap:!0,jitterMargin:2},t})(ct);yr(Hx,ff.prototype);var Tpe=(function(r){re(t,r);function t(e,a,n,s,l){var o=r.call(this,e,a,n)||this;return o.type=s||"value",o.position=l||"bottom",o}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.pointToData=function(e,a){return this.coordinateSystem.pointToData(e)[0]},t})(vs),PG=["single"],Ape=(function(){function r(t,e,a){this.type="single",this.dimension="single",this.dimensions=PG,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,a)}return r.prototype._init=function(t,e,a){var n=this.dimension,s=new Tpe(n,Om(t),[0,0],t.get("type"),t.get("position")),l=s.type==="category";s.onBand=l&&t.get("boundaryGap"),s.inverse=t.get("inverse"),s.orient=t.get("orient"),t.axis=s,s.model=t,s.coordinateSystem=this,this._axis=s},r.prototype.update=function(t,e){t.eachSeries(function(a){if(a.coordinateSystem===this){var n=a.getData();B(n.mapDimensionsAll(this.dimension),function(s){this._axis.scale.unionExtentFromData(n,s)},this),Mu(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(t,e){var a=Kr(t,e).refContainer;this._rect=rr(t.getBoxLayoutParams(),a),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,a=e.isHorizontal(),n=a?[0,t.width]:[0,t.height],s=e.inverse?1:0;e.setExtent(n[s],n[1-s]),this._updateAxisTransform(e,a?t.x:t.y)},r.prototype._updateAxisTransform=function(t,e){var a=t.getExtent(),n=a[0]+a[1],s=t.isHorizontal();t.toGlobalCoord=s?function(l){return l+e}:function(l){return n-l+e},t.toLocalCoord=s?function(l){return l-e}:function(l){return n-l+e}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(t){var e=this.getRect(),a=this.getAxis(),n=a.orient;return n==="horizontal"?a.contain(a.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:a.contain(a.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},r.prototype.pointToData=function(t,e,a){a=a||[];var n=this.getAxis();return a[0]=n.coordToData(n.toLocalCoord(t[n.orient==="horizontal"?0:1])),a},r.prototype.dataToPoint=function(t,e,a){var n=this.getAxis(),s=this.getRect();a=a||[];var l=n.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),a[l]=n.toGlobalCoord(n.dataToCoord(+t)),a[1-l]=l===0?s.y+s.height/2:s.x+s.width/2,a},r.prototype.convertToPixel=function(t,e,a){var n=Ok(e);return n===this?this.dataToPoint(a):null},r.prototype.convertFromPixel=function(t,e,a){var n=Ok(e);return n===this?this.pointToData(a):null},r})();function Ok(r){var t=r.seriesModel,e=r.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function Epe(r,t){var e=[];return r.eachComponent("singleAxis",function(a,n){var s=new Ape(a,r,t);s.name="single_"+n,s.resize(a,t),a.coordinateSystem=s,e.push(s)}),r.eachSeries(function(a){if(a.get("coordinateSystem")==="singleAxis"){var n=a.getReferringComponents("singleAxis",pr).models[0];a.coordinateSystem=n&&n.coordinateSystem}}),e}var Dpe={create:Epe,dimensions:PG},Pk=["x","y"],Mpe=["width","height"],Rpe=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,a,n,s,l){var o=n.axis,c=o.coordinateSystem,u=yw(c,1-Wy(o)),d=c.dataToPoint(a)[0],h=s.get("type");if(h&&h!=="none"){var p=rE(s),g=Lpe[h](o,d,u);g.style=p,e.graphicKey=g.type,e.pointer=g}var v=oC(n);DG(a,e,v,n,s,l)},t.prototype.getHandleTransform=function(e,a,n){var s=oC(a,{labelInside:!1});s.labelMargin=n.get(["handle","margin"]);var l=aE(a.axis,e,s);return{x:l[0],y:l[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,a,n,s){var l=n.axis,o=l.coordinateSystem,c=Wy(l),u=yw(o,c),d=[e.x,e.y];d[c]+=a[c],d[c]=Math.min(u[1],d[c]),d[c]=Math.max(u[0],d[c]);var h=yw(o,1-c),p=(h[1]+h[0])/2,g=[p,p];return g[c]=d[c],{x:d[0],y:d[1],rotation:e.rotation,cursorPoint:g,tooltipOption:{verticalAlign:"middle"}}},t})(tE),Lpe={line:function(r,t,e){var a=nE([t,e[0]],[t,e[1]],Wy(r));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(r,t,e){var a=r.getBandWidth(),n=e[1]-e[0];return{type:"Rect",shape:MG([t-a/2,e[0]],[a,n],Wy(r))}}};function Wy(r){return r.isHorizontal()?0:1}function yw(r,t){var e=r.getRect();return[e[Pk[t]],e[Pk[t]]+e[Mpe[t]]]}var Ipe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="single",t})(Yt);function kpe(r){st(Gm),Gu.registerAxisPointerClass("SingleAxisPointer",Rpe),r.registerComponentView(Ipe),r.registerComponentView(Spe),r.registerComponentModel(Hx),Vh(r,"single",Hx,Hx.defaultOption),r.registerCoordinateSystem("single",Dpe)}var Ope=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a,n){var s=Bu(e);r.prototype.init.apply(this,arguments),zk(e,s)},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),zk(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.layoutMode="box",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:ee.color.axisLine,width:1,type:"solid"}},itemStyle:{color:ee.color.neutral00,borderWidth:1,borderColor:ee.color.neutral10},dayLabel:{show:!0,firstDay:0,position:"start",margin:ee.size.s,color:ee.color.secondary},monthLabel:{show:!0,position:"start",margin:ee.size.s,align:"center",formatter:null,color:ee.color.secondary},yearLabel:{show:!0,position:null,margin:ee.size.xl,formatter:null,color:ee.color.quaternary,fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t})(ct);function zk(r,t){var e=r.cellSize,a;de(e)?a=e:a=r.cellSize=[e,e],a.length===1&&(a[1]=a[0]);var n=pe([0,1],function(s){return nee(t,s)&&(a[s]="auto"),a[s]!=null&&a[s]!=="auto"});Si(r,t,{type:"box",ignoreSize:n})}var Ppe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var s=this.group;s.removeAll();var l=e.coordinateSystem,o=l.getRangeInfo(),c=l.getOrient(),u=a.getLocaleModel();this._renderDayRect(e,o,s),this._renderLines(e,o,c,s),this._renderYearText(e,o,c,s),this._renderMonthText(e,u,c,s),this._renderWeekText(e,u,o,c,s)},t.prototype._renderDayRect=function(e,a,n){for(var s=e.coordinateSystem,l=e.getModel("itemStyle").getItemStyle(),o=s.getCellWidth(),c=s.getCellHeight(),u=a.start.time;u<=a.end.time;u=s.getNextNDay(u,1).time){var d=s.dataToCalendarLayout([u],!1).tl,h=new it({shape:{x:d[0],y:d[1],width:o,height:c},cursor:"default",style:l});n.add(h)}},t.prototype._renderLines=function(e,a,n,s){var l=this,o=e.coordinateSystem,c=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),d=c.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=a.start,p=0;h.time<=a.end.time;p++){v(h.formatedDate),p===0&&(h=o.getDateInfo(a.start.y+"-"+a.start.m));var g=h.date;g.setMonth(g.getMonth()+1),h=o.getDateInfo(g)}v(o.getNextNDay(a.end.time,1).formatedDate);function v(y){l._firstDayOfMonth.push(o.getDateInfo(y)),l._firstDayPoints.push(o.dataToCalendarLayout([y],!1).tl);var x=l._getLinePointsOfOneWeek(e,y,n);l._tlpoints.push(x[0]),l._blpoints.push(x[x.length-1]),u&&l._drawSplitline(x,c,s)}u&&this._drawSplitline(l._getEdgesPoints(l._tlpoints,d,n),c,s),u&&this._drawSplitline(l._getEdgesPoints(l._blpoints,d,n),c,s)},t.prototype._getEdgesPoints=function(e,a,n){var s=[e[0].slice(),e[e.length-1].slice()],l=n==="horizontal"?0:1;return s[0][l]=s[0][l]-a/2,s[1][l]=s[1][l]+a/2,s},t.prototype._drawSplitline=function(e,a,n){var s=new ma({z2:20,shape:{points:e},style:a});n.add(s)},t.prototype._getLinePointsOfOneWeek=function(e,a,n){for(var s=e.coordinateSystem,l=s.getDateInfo(a),o=[],c=0;c<7;c++){var u=s.getNextNDay(l.time,c),d=s.dataToCalendarLayout([u.time],!1);o[2*u.day]=d.tl,o[2*u.day+1]=d[n==="horizontal"?"bl":"tr"]}return o},t.prototype._formatterLabel=function(e,a){return je(e)&&e?KJ(e,a):Le(e)?e(a):a.nameMap},t.prototype._yearTextPositionControl=function(e,a,n,s,l){var o=a[0],c=a[1],u=["center","bottom"];s==="bottom"?(c+=l,u=["center","top"]):s==="left"?o-=l:s==="right"?(o+=l,u=["center","top"]):c-=l;var d=0;return(s==="left"||s==="right")&&(d=Math.PI/2),{rotation:d,x:o,y:c,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(e,a,n,s){var l=e.getModel("yearLabel");if(l.get("show")){var o=l.get("margin"),c=l.get("position");c||(c=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],d=(u[0][0]+u[1][0])/2,h=(u[0][1]+u[1][1])/2,p=n==="horizontal"?0:1,g={top:[d,u[p][1]],bottom:[d,u[1-p][1]],left:[u[1-p][0],h],right:[u[p][0],h]},v=a.start.y;+a.end.y>+a.start.y&&(v=v+"-"+a.end.y);var y=l.get("formatter"),x={start:a.start.y,end:a.end.y,nameMap:v},b=this._formatterLabel(y,x),N=new vt({z2:30,style:Gt(l,{text:b}),silent:l.get("silent")});N.attr(this._yearTextPositionControl(N,g[c],n,c,o)),s.add(N)}},t.prototype._monthTextPositionControl=function(e,a,n,s,l){var o="left",c="top",u=e[0],d=e[1];return n==="horizontal"?(d=d+l,a&&(o="center"),s==="start"&&(c="bottom")):(u=u+l,a&&(c="middle"),s==="start"&&(o="right")),{x:u,y:d,align:o,verticalAlign:c}},t.prototype._renderMonthText=function(e,a,n,s){var l=e.getModel("monthLabel");if(l.get("show")){var o=l.get("nameMap"),c=l.get("margin"),u=l.get("position"),d=l.get("align"),h=[this._tlpoints,this._blpoints];(!o||je(o))&&(o&&(a=a2(o)||a),o=a.get(["time","monthAbbr"])||[]);var p=u==="start"?0:1,g=n==="horizontal"?0:1;c=u==="start"?-c:c;for(var v=d==="center",y=l.get("silent"),x=0;x<h[p].length-1;x++){var b=h[p][x].slice(),N=this._firstDayOfMonth[x];if(v){var w=this._firstDayPoints[x];b[g]=(w[g]+h[0][x+1][g])/2}var S=l.get("formatter"),T=o[+N.m-1],A={yyyy:N.y,yy:(N.y+"").slice(2),MM:N.m,M:+N.m,nameMap:T},C=this._formatterLabel(S,A),M=new vt({z2:30,style:ie(Gt(l,{text:C}),this._monthTextPositionControl(b,v,n,u,c)),silent:y});s.add(M)}}},t.prototype._weekTextPositionControl=function(e,a,n,s,l){var o="center",c="middle",u=e[0],d=e[1],h=n==="start";return a==="horizontal"?(u=u+s+(h?1:-1)*l[0]/2,o=h?"right":"left"):(d=d+s+(h?1:-1)*l[1]/2,c=h?"bottom":"top"),{x:u,y:d,align:o,verticalAlign:c}},t.prototype._renderWeekText=function(e,a,n,s,l){var o=e.getModel("dayLabel");if(o.get("show")){var c=e.coordinateSystem,u=o.get("position"),d=o.get("nameMap"),h=o.get("margin"),p=c.getFirstDayOfWeek();if(!d||je(d)){d&&(a=a2(d)||a);var g=a.get(["time","dayOfWeekShort"]);d=g||pe(a.get(["time","dayOfWeekAbbr"]),function(A){return A[0]})}var v=c.getNextNDay(n.end.time,7-n.lweek).time,y=[c.getCellWidth(),c.getCellHeight()];h=Ne(h,Math.min(y[1],y[0])),u==="start"&&(v=c.getNextNDay(n.start.time,-(7+n.fweek)).time,h=-h);for(var x=o.get("silent"),b=0;b<7;b++){var N=c.getNextNDay(v,b),w=c.dataToCalendarLayout([N.time],!1).center,S=b;S=Math.abs((b+p)%7);var T=new vt({z2:30,style:ie(Gt(o,{text:d[S]}),this._weekTextPositionControl(w,s,u,h,y)),silent:x});l.add(T)}}},t.type="calendar",t})(Yt),bw=864e5,zpe=(function(){function r(t,e,a){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=t,this._update(e,a)}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(t){t=Ai(t);var e=t.getFullYear(),a=t.getMonth()+1,n=a<10?"0"+a:""+a,s=t.getDate(),l=s<10?"0"+s:""+s,o=t.getDay();return o=Math.abs((o+7-this.getFirstDayOfWeek())%7),{y:e+"",m:n,d:l,day:o,time:t.getTime(),formatedDate:e+"-"+n+"-"+l,date:t}},r.prototype.getNextNDay=function(t,e){return e=e||0,e===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},r.prototype._update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var a=this._rangeInfo.weeks||1,n=["width","height"],s=this._model.getCellSize().slice(),l=this._model.getBoxLayoutParams(),o=this._orient==="horizontal"?[a,7]:[7,a];B([0,1],function(h){d(s,h)&&(l[n[h]]=s[h]*o[h])});var c={width:e.getWidth(),height:e.getHeight()},u=this._rect=rr(l,c);B([0,1],function(h){d(s,h)||(s[h]=u[n[h]]/o[h])});function d(h,p){return h[p]!=null&&h[p]!=="auto"}this._sw=s[0],this._sh=s[1]},r.prototype.dataToPoint=function(t,e,a){a=a||[],de(t)&&(t=t[0]),e==null&&(e=!0);var n=this.getDateInfo(t),s=this._rangeInfo,l=n.formatedDate;if(e&&!(n.time>=s.start.time&&n.time<s.end.time+bw))return a[0]=a[1]=NaN,a;var o=n.day,c=this._getRangeInfo([s.start.time,l]).nthWeek;return this._orient==="vertical"?(a[0]=this._rect.x+o*this._sw+this._sw/2,a[1]=this._rect.y+c*this._sh+this._sh/2):(a[0]=this._rect.x+c*this._sw+this._sw/2,a[1]=this._rect.y+o*this._sh+this._sh/2),a},r.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},r.prototype.dataToLayout=function(t,e,a){a=a||{};var n=a.rect=a.rect||{},s=a.contentRect=a.contentRect||{},l=this.dataToPoint(t,e);return n.x=l[0]-this._sw/2,n.y=l[1]-this._sh/2,n.width=this._sw,n.height=this._sh,We.copy(s,n),Au(s,this._lineWidth/2,!0,!0),a},r.prototype.dataToCalendarLayout=function(t,e){var a=this.dataToPoint(t,e);return{center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},r.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,a=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(a,e-1,n):this._getDateByWeeksAndDay(e,a-1,n)},r.prototype.convertToPixel=function(t,e,a){var n=_w(e);return n===this?n.dataToPoint(a):null},r.prototype.convertToLayout=function(t,e,a){var n=_w(e);return n===this?n.dataToLayout(a):null},r.prototype.convertFromPixel=function(t,e,a){var n=_w(e);return n===this?n.pointToData(a):null},r.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},r.prototype._initRangeOption=function(){var t=this._model.get("range"),e;if(de(t)&&t.length===1&&(t=t[0]),de(t))e=t;else{var a=t.toString();if(/^\d{4}$/.test(a)&&(e=[a+"-01-01",a+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(a)){var n=this.getDateInfo(a),s=n.date;s.setMonth(s.getMonth()+1);var l=this.getNextNDay(s,-1);e=[n.formatedDate,l.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)&&(e=[a,a])}if(!e)return t;var o=this._getRangeInfo(e);return o.start.time>o.end.time&&e.reverse(),e},r.prototype._getRangeInfo=function(t){var e=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],a;e[0].time>e[1].time&&(a=!0,e.reverse());var n=Math.floor(e[1].time/bw)-Math.floor(e[0].time/bw)+1,s=new Date(e[0].time),l=s.getDate(),o=e[1].date.getDate();s.setDate(l+n-1);var c=s.getDate();if(c!==o)for(var u=s.getTime()-e[1].time>0?1:-1;(c=s.getDate())!==o&&(s.getTime()-e[1].time)*u>0;)n-=u,s.setDate(c-u);var d=Math.floor((n+e[0].day+6)/7),h=a?-d+1:d-1;return a&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:d,nthWeek:h,fweek:e[0].day,lweek:e[1].day}},r.prototype._getDateByWeeksAndDay=function(t,e,a){var n=this._getRangeInfo(a);if(t>n.weeks||t===0&&e<n.fweek||t===n.weeks&&e>n.lweek)return null;var s=(t-1)*7-n.fweek+e,l=new Date(n.start.time);return l.setDate(+n.start.d+s),this.getDateInfo(l)},r.create=function(t,e){var a=[];return t.eachComponent("calendar",function(n){var s=new r(n,t,e);a.push(s),n.coordinateSystem=s}),t.eachComponent(function(n,s){Im({targetModel:s,coordSysType:"calendar",coordSysProvider:rB})}),a},r.dimensions=["time","value"],r})();function _w(r){var t=r.calendarModel,e=r.seriesModel,a=t?t.coordinateSystem:e?e.coordinateSystem:null;return a}function Bpe(r){r.registerComponentModel(Ope),r.registerComponentView(Ppe),r.registerCoordinateSystem("calendar",zpe)}var cl={level:1,leaf:2,nonLeaf:3},_l={none:0,all:1,body:2,corner:3};function cC(r,t,e){var a=t[Ke[e]].getCell(r);return!a&&xt(r)&&r<0&&(a=t[Ke[1-e]].getUnitLayoutInfo(e,Math.round(r))),a}function zG(r){var t=r||[];return t[0]=t[0]||[],t[1]=t[1]||[],t[0][0]=t[0][1]=t[1][0]=t[1][1]=NaN,t}function BG(r,t,e,a,n){Bk(r[0],t,n,e,a,0),Bk(r[1],t,n,e,a,1)}function Bk(r,t,e,a,n,s){r[0]=1/0,r[1]=-1/0;var l=a[s],o=de(l)?l:[l],c=o.length,u=!!e;if(c>=1?(Vk(r,t,o,u,n,s,0),c>1&&Vk(r,t,o,u,n,s,c-1)):r[0]=r[1]=NaN,u){var d=-n[Ke[1-s]].getLocatorCount(s),h=n[Ke[s]].getLocatorCount(s)-1;e===_l.body?d=Sr(0,d):e===_l.corner&&(h=In(-1,h)),h<d&&(d=h=NaN),Ta(r[0])&&(r[0]=d),Ta(r[1])&&(r[1]=h),r[0]=Sr(In(r[0],h),d),r[1]=Sr(In(r[1],h),d)}}function Vk(r,t,e,a,n,s,l){var o=cC(e[l],n,s);if(!o){r[0]=r[1]=NaN;return}var c=o.id[Ke[s]],u=c,d=Upe(o);d&&(u+=d.span[Ke[s]]-1),r[0]=In(r[0],c,u),r[1]=Sr(r[1],c,u)}function nx(r,t){return Ta(r[t][0])||Ta(r[t][1])}function Hk(r,t,e,a){t=t||Vpe;for(var n=0;n<a;n++)t[n]=!1;for(;;){for(var s=!1,n=0;n<a;n++){var l=e[n];!t[n]&&l.cellMergeOwner&&Hpe(r,l.locatorRange)&&(t[n]=!0,s=!0)}if(!s)break}}var Vpe=[];function Hpe(r,t){return!Gk(r[0],t[0])||!Gk(r[1],t[1])?!1:(r[0][0]=In(r[0][0],t[0][0]),r[0][1]=Sr(r[0][1],t[0][1]),r[1][0]=In(r[1][0],t[1][0]),r[1][1]=Sr(r[1][1],t[1][1]),!0)}function Gk(r,t){return r[1]>=t[0]&&r[0]<=t[1]}function Uk(r,t){r.id.set(t[0][0],t[1][0]),r.span.set(t[0][1]-r.id.x+1,t[1][1]-r.id.y+1)}function Gpe(r,t){r[0][0]=t[0][0],r[0][1]=t[0][1],r[1][0]=t[1][0],r[1][1]=t[1][1]}function Fk(r,t,e,a){var n=cC(t[a][0],e,a),s=cC(t[a][1],e,a);r[Ke[a]]=r[zr[a]]=NaN,n&&s&&(r[Ke[a]]=n.xy,r[zr[a]]=s.xy+s.wh-n.xy)}function Yp(r,t,e,a){return r[Ke[t]]=e,r[Ke[1-t]]=a,r}function Upe(r){return r&&(r.type===cl.leaf||r.type===cl.nonLeaf)?r:null}function $y(){return{x:NaN,y:NaN,width:NaN,height:NaN}}var Yk=(function(){function r(t,e){this._cells=[],this._levels=[],this.dim=t,this.dimIdx=t==="x"?0:1,this._model=e,this._uniqueValueGen=Fpe(t);var a=e.get("data",!0);a!=null&&!de(a)&&(a=[]),a?this._initByDimModelData(a):this._initBySeriesData()}return r.prototype._initByDimModelData=function(t){var e=this,a=e._cells,n=e._levels,s=[],l=0;e._leavesCount=o(t,0,0),c();return;function o(u,d,h){var p=0;return u&&B(u,function(g,v){var y;je(g)?y={value:g}:Ue(g)?(y=g,g.value!=null&&!je(g.value)&&(y={value:null})):y={value:null};var x={type:cl.nonLeaf,ordinal:NaN,level:h,firstLeafLocator:d,id:new Ye,span:Yp(new Ye,e.dimIdx,1,1),option:y,xy:NaN,wh:NaN,dim:e,rect:$y()};l++,(s[d]||(s[d]=[])).push(x),n[h]||(n[h]={type:cl.level,xy:NaN,wh:NaN,option:null,id:new Ye,dim:e});var b=o(y.children,d,h+1),N=Math.max(1,b);x.span[Ke[e.dimIdx]]=N,p+=N,d+=N}),p}function c(){for(var u=[];a.length<l;)for(var d=0;d<s.length;d++){var h=s[d].pop();if(h){h.ordinal=u.length;var p=h.option.value;u.push(p),a.push(h),e._uniqueValueGen.calcDupBase(p)}}e._uniqueValueGen.ensureValueUnique(u,a);var g=e._ordinalMeta=new em({categories:u,needCollect:!1,deduplication:!1});e._scale=new Ph({ordinalMeta:g});for(var v=0;v<e._leavesCount;v++){var y=e._cells[v];y.type=cl.leaf,y.span[Ke[1-e.dimIdx]]=e._levels.length-y.level}e._initCellsId(),e._initLevelIdOptions()}},r.prototype._initBySeriesData=function(){var t=this;t._leavesCount=0,t._levels=[{type:cl.level,xy:NaN,wh:NaN,option:null,id:new Ye,dim:t}],t._initLevelIdOptions();var e=t._ordinalMeta=new em({needCollect:!0,deduplication:!0,onCollect:function(a,n){var s=t._cells[n]={type:cl.leaf,ordinal:n,level:0,firstLeafLocator:n,id:new Ye,span:Yp(new Ye,t.dimIdx,1,1),option:{value:a+""},xy:NaN,wh:NaN,dim:t,rect:$y()};t._leavesCount++,t._setCellId(s)}});t._scale=new Ph({ordinalMeta:e})},r.prototype._setCellId=function(t){var e=this._levels.length,a=this.dimIdx;Yp(t.id,a,t.firstLeafLocator,t.level-e)},r.prototype._initCellsId=function(){var t=this._levels.length,e=this.dimIdx;B(this._cells,function(a){Yp(a.id,e,a.firstLeafLocator,a.level-t)})},r.prototype._initLevelIdOptions=function(){var t=this._levels.length,e=this.dimIdx,a=this._model.get("levels",!0);a=de(a)?a:[],B(this._levels,function(n,s){Yp(n.id,e,0,s-t),n.option=a[s]})},r.prototype.shouldShow=function(){return!!this._model.getShallow("show",!0)},r.prototype.resetLayoutIterator=function(t,e,a,n){if(t=t||new Do,e===this.dimIdx){var s=this._leavesCount,l=a!=null?Math.max(0,a):0;n=n!=null?Math.min(n,s):s,t.reset(this._cells,l,l+n)}else{var s=this._levels.length,l=a!=null?Math.max(0,a+s):0;n=n!=null?Math.min(n,s):s,t.reset(this._levels,l,l+n)}return t},r.prototype.resetCellIterator=function(t){return(t||new Do).reset(this._cells,0)},r.prototype.resetLevelIterator=function(t){return(t||new Do).reset(this._levels,0)},r.prototype.getLayout=function(t,e,a){var n=this.getUnitLayoutInfo(e,a);t[Ke[e]]=n?n.xy:NaN,t[zr[e]]=n?n.wh:NaN},r.prototype.getUnitLayoutInfo=function(t,e){return t===this.dimIdx?e<this._leavesCount?this._cells[e]:void 0:this._levels[e+this._levels.length]},r.prototype.getCell=function(t){var e=this._scale.parse(t);return Ta(e)?void 0:this._cells[e]},r.prototype.getLocatorCount=function(t){return t===this.dimIdx?this._leavesCount:this._levels.length},r.prototype.getOrdinalMeta=function(){return this._ordinalMeta},r})();function Fpe(r){var t=r.toUpperCase(),e=new RegExp("^"+t+"([0-9]+)$"),a=0;function n(o){var c;o!=null&&(c=o.match(e))&&(a=Sr(a,+c[1]+1))}function s(){return""+t+a++}function l(o,c){for(var u=De(),d=0;d<o.length;d++){var h=o[d];(h==null||u.get(h)!=null)&&(o[d]=h=s(),c[d].option=Ge({value:h},c[d].option)),u.set(h,!0)}}return{calcDupBase:n,ensureValueUnique:l}}var Wk=(function(){function r(t,e,a){this._model=e,this._dims=a,this._kind=t,this._cellMergeOwnerList=[]}return r.prototype._ensureCellMap=function(){var t=this,e=t._cellMap;return e||(e=t._cellMap=De(),a()),e;function a(){var s=[],l=t._model.getShallow("data");l&&!de(l)&&(l=null),B(l,function(v,y){if(!(!Ue(v)||!de(v.coord))){var x=zG([]),b=null;if(BG(x,b,v.coord,t._dims,v.coordClamp?_l[t._kind]:_l.none),!(nx(x,0)||nx(x,1))){var N=v&&v.mergeCells,w={id:new Ye,span:new Ye,locatorRange:x,option:v,cellMergeOwner:N};Uk(w,x),s.push(w)}}});for(var o=[],c=0;c<s.length;c++){var u=s[c];if(u.cellMergeOwner){var d=u.locatorRange;Hk(d,o,s,c);for(var h=0;h<c;h++)o[h]&&(s[h].cellMergeOwner=!1);if(d[0][0]!==u.id.x||d[1][0]!==u.id.y){u.cellMergeOwner=!1;var p=ie({},u.option);p.coord=null;var g={id:new Ye,span:new Ye,locatorRange:d,option:p,cellMergeOwner:!0};Uk(g,d),s.push(g)}}}B(s,function(v){var y=n(v.id.x,v.id.y);if(v.cellMergeOwner&&(y.cellMergeOwner=!0,y.span=v.span,y.locatorRange=v.locatorRange,y.spanRect=$y(),t._cellMergeOwnerList.push(y)),!(!v.cellMergeOwner&&!v.option))for(var x=0;x<v.span.y;x++)for(var b=0;b<v.span.x;b++){var N=n(v.id.x+b,v.id.y+x);N.option=v.option,v.cellMergeOwner&&(N.inSpanOf=y)}})}function n(s,l){var o=$k(s,l),c=e.get(o);return c||(c=e.set(o,{id:new Ye(s,l),option:null,inSpanOf:null,span:null,spanRect:null,locatorRange:null,cellMergeOwner:!1})),c}},r.prototype.getCell=function(t){return this._ensureCellMap().get($k(t[0],t[1]))},r.prototype.travelExistingCells=function(t){this._ensureCellMap().each(t)},r.prototype.expandRangeByCellMerge=function(t){if(!nx(t,0)&&!nx(t,1)&&t[0][0]===t[0][1]&&t[1][0]===t[1][1]){Nw[0]=t[0][0],Nw[1]=t[1][0];var e=this.getCell(Nw),a=e&&e.inSpanOf;if(a){Gpe(t,a.locatorRange);return}}var n=this._cellMergeOwnerList;Hk(t,null,n,n.length)},r})(),Nw=[];function $k(r,t){return r+"|"+t}var oE={show:!0,color:ee.color.secondary,overflow:"break",lineOverflow:"truncate",padding:[2,3,2,3],distance:0};function cE(r){return{color:"none",borderWidth:1,borderColor:r?"none":ee.color.borderTint}}var qk={show:!0,label:oE,itemStyle:cE(!1),silent:void 0,dividerLineStyle:{width:1,color:ee.color.border}},Ype={label:oE,itemStyle:cE(!1),silent:void 0},Wpe={label:oE,itemStyle:cE(!0),silent:void 0},$pe={z:-50,left:"10%",top:"10%",right:"10%",bottom:"10%",x:qk,y:qk,body:Ype,corner:Wpe,backgroundStyle:{color:"none",borderColor:ee.color.axisLine,borderWidth:1}},qpe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){var e=this._dimModels={x:new Xk(this.get("x",!0)||{}),y:new Xk(this.get("y",!0)||{})};e.x.option.type=e.y.option.type="category";var a=e.x.dim=new Yk("x",e.x),n=e.y.dim=new Yk("y",e.y),s={x:a,y:n};this._body=new Wk("body",new dt(this.getShallow("body")),s),this._corner=new Wk("corner",new dt(this.getShallow("corner")),s)},t.prototype.getDimensionModel=function(e){return this._dimModels[e]},t.prototype.getBody=function(){return this._body},t.prototype.getCorner=function(){return this._corner},t.type="matrix",t.layoutMode="box",t.defaultOption=$pe,t})(ct),Xk=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getOrdinalMeta=function(){return this.dim.getOrdinalMeta()},t})(dt),sx=Math.round,Xpe=0,Zpe=99,Kpe={normal:25,special:100},Qpe={normal:50,special:125},Jpe=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a){this.group.removeAll();var n=this.group,s=e.coordinateSystem,l=s.getRect(),o=e.getDimensionModel("x"),c=e.getDimensionModel("y"),u=o.dim,d=c.dim;ege(n,e,a),tge(n,e,u,d,a);var h=e.getShallow("borderZ2",!0),p=Me(h,Zpe),g=p-1,v=e.getModel("backgroundStyle").getItemStyle(["borderWidth"]);v.lineWidth=0;var y=e.getModel("backgroundStyle").getItemStyle(["color","decal","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]);y.fill="none";var x=uC(l.clone(),v,Xpe),b=uC(l.clone(),y,p);x.silent=!0,b.silent=!0,n.add(x),n.add(b);var N=u.getUnitLayoutInfo(0,0),w=d.getUnitLayoutInfo(1,0);N&&w&&(u.shouldShow()&&n.add(Zk({x1:l.x,y1:w.xy,x2:l.x+l.width,y2:w.xy},o.getModel("dividerLineStyle").getLineStyle(),g)),d.shouldShow()&&n.add(Zk({x1:N.xy,y1:l.y,x2:N.xy,y2:l.y+l.height},c.getModel("dividerLineStyle").getLineStyle(),g)))},t.type="matrix",t})(Yt);function ege(r,t,e){a(0),a(1);function a(n){var s=t.getDimensionModel(Ke[n]),l=s.dim;if(l.shouldShow())for(var o=s.getModel("itemStyle"),c=s.getModel("label"),u=t.getShallow("tooltip",!0),d=[],h=l.resetCellIterator();h.next();){var p=h.item,g={};We.copy(g,p.rect),gb(d,p.id.x,p.id.y),VG(d,t,r,e,p.option,o,c,s,g,p.option.value,Qpe,u)}}}function tge(r,t,e,a,n){s("body",t.getBody(),e,a),e.shouldShow()&&a.shouldShow()&&s("corner",t.getCorner(),a,e);function s(l,o,c,u){var d=new dt(t.getShallow(l,!0)),h=d.getModel("itemStyle"),p=d.getModel("label"),g=new Do,v=new Do,y=[],x=t.getShallow("tooltip",!0);for(u.resetLayoutIterator(v,1);v.next();)for(c.resetLayoutIterator(g,0);g.next();){var b=g.item,N=v.item;gb(y,b.id.x,N.id.y);var w=o.getCell(y);if(!(w&&w.inSpanOf&&w.inSpanOf!==w)){var S={};w&&w.span?We.copy(S,w.spanRect):(b.dim.getLayout(S,0,y[0]),N.dim.getLayout(S,1,y[1]));var T=w?w.option:null;VG(y,t,r,n,T,h,p,d,S,T?T.value:null,Kpe,x)}}}}function VG(r,t,e,a,n,s,l,o,c,u,d,h){var p;ix.option=n?n.itemStyle:null,ix.parentModel=s,Jd.option=n,Jd.parentModel=o;var g=Me(Jd.getShallow("z2"),n&&n.itemStyle?d.special:d.normal),v=h&&h.show,y=uC(c,ix.getItemStyle(),g);e.add(y);var x=Jd.get("cursor");x!=null&&y.attr("cursor",x);var b;if(u!=null){var N=u+"";if(eh.option=n?n.label:null,eh.parentModel=l,eh.ecModel=a,ia(y,{normal:eh},{defaultText:N,autoOverflowArea:!0,layoutRect:Oe(y.shape)}),b=y.getTextContent(),b){b.z2=g+1;var w=b.style;if(w&&w.overflow&&w.overflow!=="none"&&w.lineOverflow){var S={};We.copy(S,c),Au(S,(((p=y.style)===null||p===void 0?void 0:p.lineWidth)||0)/2,!0,!0),y.updateInnerText(),b.getLocalTransform(lx),hs(lx,lx),We.applyTransform(S,S,lx),b.setClipPath(new it({shape:S}))}}Ll({el:y,componentModel:t,itemName:N,itemTooltipOption:h,formatterParamsExtra:{xyLocator:r.slice()}})}if(b){var T=eh.get("silent");T==null&&(T=!v),b.silent=T,b.ignoreHostSilent=!0}var A=Jd.get("silent");A==null&&(A=!y.style||y.style.fill==="none"||!y.style.fill),y.silent=A,kN(Jd),kN(ix),kN(eh)}var Jd=new dt,ix=new dt,eh=new dt,lx=[];function uC(r,t,e){var a=t.lineWidth;if(a){var n=r.x+r.width,s=r.y+r.height;r.x=Ln(r.x,a,!0),r.y=Ln(r.y,a,!0),r.width=Ln(n,a,!0)-r.x,r.height=Ln(s,a,!0)-r.y}return new it({shape:r,style:t,z2:e})}function Zk(r,t,e){var a=t.lineWidth;return a&&(sx(r.x1*2)===sx(r.x2*2)&&(r.x1=r.x2=Ln(r.x1,a,!0)),sx(r.y1*2)===sx(r.y2*2)&&(r.y1=r.y2=Ln(r.y1,a,!0))),new Tr({shape:r,style:t,silent:!0,z2:e})}var rge=(function(){function r(t,e,a){this.dimensions=r.dimensions,this.type="matrix",this._model=t;var n=this._dimModels={x:t.getDimensionModel("x"),y:t.getDimensionModel("y")};this._dims={x:n.x.dim,y:n.y.dim},this._resize(t,a)}return r.getDimensionsInfo=function(){return[{name:"x",type:"ordinal"},{name:"y",type:"ordinal"},{name:"value"}]},r.create=function(t,e){var a=[];return t.eachComponent("matrix",function(n){var s=new r(n,t,e);a.push(s),n.coordinateSystem=s}),t.eachComponent(function(n,s){Im({targetModel:s,coordSysType:"matrix",coordSysProvider:rB})}),a},r.prototype.getRect=function(){return this._rect},r.prototype._resize=function(t,e){var a=this._dims,n=this._dimModels,s=this._rect=rr(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});Kk(n,a,s,0),Kk(n,a,s,1),Qk(0,a),Qk(1,a),Jk(this._model.getBody(),a),Jk(this._model.getCorner(),a)},r.prototype.dataToPoint=function(t,e,a){return a=a||[],this.dataToLayout(t,e,Wp),a[0]=Wp.rect.x+Wp.rect.width/2,a[1]=Wp.rect.y+Wp.rect.height/2,a},r.prototype.dataToLayout=function(t,e,a){var n=this._dims;a=a||{};var s=a.rect=a.rect||{};s.x=s.y=s.width=s.height=NaN;var l=a.matrixXYLocatorRange=zG(a.matrixXYLocatorRange);return de(t)&&(BG(l,null,t,n,Me(e&&e.clamp,_l.none)),(!e||!e.ignoreMergeCells)&&((!e||e.clamp!==_l.corner)&&this._model.getBody().expandRangeByCellMerge(l),(!e||e.clamp!==_l.body)&&this._model.getCorner().expandRangeByCellMerge(l)),Fk(s,l,n,0),Fk(s,l,n,1)),a},r.prototype.pointToData=function(t,e,a){var n=this._dims;return eO(ni,0,n,t,e&&e.clamp),eO(ni,1,n,t,e&&e.clamp),a=a||[],a[0]=a[1]=NaN,ni.y===Sa.inCorner&&ni.x===Sa.inBody?tO(ni,a,0,n):ni.x===Sa.inCorner&&ni.y===Sa.inBody?tO(ni,a,1,n):(rO(ni,a,0,n),rO(ni,a,1,n)),a},r.prototype.convertToPixel=function(t,e,a,n){var s=ww(e);return s===this?s.dataToPoint(a,n):void 0},r.prototype.convertToLayout=function(t,e,a,n){var s=ww(e);return s===this?s.dataToLayout(a,n):void 0},r.prototype.convertFromPixel=function(t,e,a,n){var s=ww(e);return s===this?s.pointToData(a,n):void 0},r.prototype.containPoint=function(t){return this._rect.contain(t[0],t[1])},r.dimensions=["x","y","value"],r})(),Wp={rect:$y()},ox=new Do,jw=new Do;function Kk(r,t,e,a){for(var n=1-a,s=t[Ke[a]],l=t[Ke[n]],o=l.shouldShow(),c=s.resetCellIterator();c.next();)c.item.wh=c.item.xy=NaN;for(var u=l.resetLayoutIterator(null,a);u.next();)u.item.wh=u.item.xy=NaN;for(var d=e[zr[a]],h=s.getLocatorCount(a)+l.getLocatorCount(a),p=new dt,g=l.resetLevelIterator();g.next();)p.option=g.item.option,p.parentModel=r[Ke[n]],x(g.item,o?p.get("levelSize"):0);for(var v=new dt,y=s.resetCellIterator();y.next();)y.item.type===cl.leaf&&(v.option=y.item.option,v.parentModel=void 0,x(y.item,v.get("size")));function x(C,M){var R=age(M,a,e);Ta(R)||(C.wh=dC(R,d),d=dC(d-C.wh),h--)}var b=h?d/h:0,N=!h&&d>=1,w=e[Ke[a]],S=s.getLocatorCount(a)-1,T=new Do;for(l.resetLayoutIterator(T,a);T.next();)A(T.item);for(s.resetLayoutIterator(T,a);T.next();)A(T.item);function A(C){Ta(C.wh)&&(C.wh=b),C.xy=w,C.id[Ke[a]]===S&&!N&&(C.wh=e[Ke[a]]+e[zr[a]]-C.xy),w+=C.wh}}function Qk(r,t){for(var e=t[Ke[r]].resetCellIterator();e.next();){var a=e.item;qy(a.rect,r,a.id,a.span,t),qy(a.rect,1-r,a.id,a.span,t),a.type===cl.nonLeaf&&(a.xy=a.rect[Ke[r]],a.wh=a.rect[zr[r]])}}function Jk(r,t){r.travelExistingCells(function(e){var a=e.span;if(a){var n=e.spanRect,s=e.id;qy(n,0,s,a,t),qy(n,1,s,a,t)}})}function qy(r,t,e,a,n){r[zr[t]]=0;var s=e[Ke[t]],l=s<0?n[Ke[1-t]]:n[Ke[t]],o=l.getUnitLayoutInfo(t,e[Ke[t]]);if(r[Ke[t]]=o.xy,r[zr[t]]=o.wh,a[Ke[t]]>1){var c=l.getUnitLayoutInfo(t,e[Ke[t]]+a[Ke[t]]-1);r[zr[t]]=c.xy+c.wh-o.xy}}function age(r,t,e){var a=ly(r,e[zr[t]]);return dC(a,e[zr[t]])}function dC(r,t){return Math.max(Math.min(r,Me(t,1/0)),0)}function ww(r){var t=r.matrixModel,e=r.seriesModel,a=t?t.coordinateSystem:e?e.coordinateSystem:null;return a}var Sa={inBody:1,inCorner:2,outside:3},ni={x:null,y:null,point:[]};function eO(r,t,e,a,n){var s=e[Ke[t]],l=e[Ke[1-t]],o=s.getUnitLayoutInfo(t,s.getLocatorCount(t)-1),c=s.getUnitLayoutInfo(t,0),u=l.getUnitLayoutInfo(t,-l.getLocatorCount(t)),d=l.shouldShow()?l.getUnitLayoutInfo(t,-1):null,h=r.point[t]=a[t];if(!c&&!d){r[Ke[t]]=Sa.outside;return}if(n===_l.body){c?(r[Ke[t]]=Sa.inBody,h=In(o.xy+o.wh,Sr(c.xy,h)),r.point[t]=h):r[Ke[t]]=Sa.outside;return}else if(n===_l.corner){d?(r[Ke[t]]=Sa.inCorner,h=In(d.xy+d.wh,Sr(u.xy,h)),r.point[t]=h):r[Ke[t]]=Sa.outside;return}var p=c?c.xy:d?d.xy+d.wh:NaN,g=u?u.xy:p,v=o?o.xy+o.wh:p;if(h<g){if(!n){r[Ke[t]]=Sa.outside;return}h=g}else if(h>v){if(!n){r[Ke[t]]=Sa.outside;return}h=v}r.point[t]=h,r[Ke[t]]=p<=h&&h<=v?Sa.inBody:g<=h&&h<=p?Sa.inCorner:Sa.outside}function tO(r,t,e,a){var n=1-e;if(r[Ke[e]]!==Sa.outside)for(a[Ke[e]].resetCellIterator(jw);jw.next();){var s=jw.item;if(aO(r.point[e],s.rect,e)&&aO(r.point[n],s.rect,n)){t[e]=s.ordinal,t[n]=s.id[Ke[n]];return}}}function rO(r,t,e,a){if(r[Ke[e]]!==Sa.outside){var n=r[Ke[e]]===Sa.inCorner?a[Ke[1-e]]:a[Ke[e]];for(n.resetLayoutIterator(ox,e);ox.next();)if(nge(r.point[e],ox.item)){t[e]=ox.item.id[Ke[e]];return}}}function nge(r,t){return t.xy<=r&&r<=t.xy+t.wh}function aO(r,t,e){return t[Ke[e]]<=r&&r<=t[Ke[e]]+t[zr[e]]}function sge(r){r.registerComponentModel(qpe),r.registerComponentView(Jpe),r.registerCoordinateSystem("matrix",rge)}function ige(r,t){var e=r.existing;if(t.id=r.keyInfo.id,!t.type&&e&&(t.type=e.type),t.parentId==null){var a=t.parentOption;a?t.parentId=a.id:e&&(t.parentId=e.parentId)}t.parentOption=null}function nO(r,t){var e;return B(t,function(a){r[a]!=null&&r[a]!=="auto"&&(e=!0)}),e}function lge(r,t,e){var a=ie({},e),n=r[t],s=e.$action||"merge";s==="merge"?n?(rt(n,a,!0),Si(n,a,{ignoreSize:!0}),lB(e,n),cx(e,n),cx(e,n,"shape"),cx(e,n,"style"),cx(e,n,"extra"),e.clipPath=n.clipPath):r[t]=a:s==="replace"?r[t]=a:s==="remove"&&n&&(r[t]=null)}var HG=["transition","enterFrom","leaveTo"],oge=HG.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function cx(r,t,e){if(e&&(!r[e]&&t[e]&&(r[e]={}),r=r[e],t=t[e]),!(!r||!t))for(var a=e?HG:oge,n=0;n<a.length;n++){var s=a[n];r[s]==null&&t[s]!=null&&(r[s]=t[s])}}function cge(r,t){if(r&&(r.hv=t.hv=[nO(t,["left","right"]),nO(t,["top","bottom"])],r.type==="group")){var e=r,a=t;e.width==null&&(e.width=a.width=0),e.height==null&&(e.height=a.height=0)}}var uge=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return t.prototype.mergeOption=function(e,a){var n=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,e,a),this.option.elements=n},t.prototype.optionUpdated=function(e,a){var n=this.option,s=(a?n:e).elements,l=n.elements=a?[]:n.elements,o=[];this._flatten(s,o,null);var c=Kz(l,o,"normalMerge"),u=this._elOptionsToUpdate=[];B(c,function(d,h){var p=d.newOption;p&&(u.push(p),ige(d,p),lge(l,h,p),cge(l[h],p))},this),n.elements=Ct(l,function(d){return d&&delete d.$action,d!=null})},t.prototype._flatten=function(e,a,n){B(e,function(s){if(s){n&&(s.parentOption=n),a.push(s);var l=s.children;l&&l.length&&this._flatten(l,a,s),delete s.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t})(ct),sO={path:null,compoundPath:null,group:Pe,image:la,text:vt},ts=ut(),dge=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this._elMap=De()},t.prototype.render=function(e,a,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},t.prototype._updateElements=function(e){var a=e.useElOptionsToUpdate();if(a){var n=this._elMap,s=this.group,l=e.get("z"),o=e.get("zlevel");B(a,function(c){var u=$r(c.id,null),d=u!=null?n.get(u):null,h=$r(c.parentId,null),p=h!=null?n.get(h):s,g=c.type,v=c.style;g==="text"&&v&&c.hv&&c.hv[1]&&(v.textVerticalAlign=v.textBaseline=v.verticalAlign=v.align=null);var y=c.textContent,x=c.textConfig;if(v&&xG(v,g,!!x,!!y)){var b=yG(v,g,!0);!x&&b.textConfig&&(x=c.textConfig=b.textConfig),!y&&b.textContent&&(y=b.textContent)}var N=hge(c),w=c.$action||"merge",S=w==="merge",T=w==="replace";if(S){var A=!d,C=d;A?C=iO(u,p,c.type,n):(C&&(ts(C).isNew=!1),jG(C)),C&&(Bx(C,N,e,{isInit:A}),lO(C,c,l,o))}else if(T){Gx(d,c,n,e);var M=iO(u,p,c.type,n);M&&(Bx(M,N,e,{isInit:!0}),lO(M,c,l,o))}else w==="remove"&&(_G(d,c),Gx(d,c,n,e));var R=n.get(u);if(R&&y)if(S){var k=R.getTextContent();k?k.attr(y):R.setTextContent(new vt(y))}else T&&R.setTextContent(new vt(y));if(R){var L=c.clipPath;if(L){var O=L.type,z=void 0,A=!1;if(S){var U=R.getClipPath();A=!U||ts(U).type!==O,z=A?hC(O):U}else T&&(A=!0,z=hC(O));R.setClipPath(z),Bx(z,L,e,{isInit:A}),Fy(z,L.keyframeAnimation,e)}var H=ts(R);R.setTextConfig(x),H.option=c,fge(R,e,c),Ll({el:R,componentModel:e,itemName:R.name,itemTooltipOption:c.tooltip}),Fy(R,c.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,a){for(var n=e.option.elements,s=this.group,l=this._elMap,o=a.getWidth(),c=a.getHeight(),u=["x","y"],d=0;d<n.length;d++){var h=n[d],p=$r(h.id,null),g=p!=null?l.get(p):null;if(!(!g||!g.isGroup)){var v=g.parent,y=v===s,x=ts(g),b=ts(v);x.width=Ne(x.option.width,y?o:b.width)||0,x.height=Ne(x.option.height,y?c:b.height)||0}}for(var d=n.length-1;d>=0;d--){var h=n[d],p=$r(h.id,null),g=p!=null?l.get(p):null;if(g){var v=g.parent,b=ts(v),N=v===s?{width:o,height:c}:{width:b.width,height:b.height},w={},S=Rb(g,h,N,null,{hv:h.hv,boundingMode:h.bounding},w);if(!ts(g).isNew&&S){for(var T=h.transition,A={},C=0;C<u.length;C++){var M=u[C],R=w[M];T&&(xu(T)||tt(T,M)>=0)?A[M]=R:g[M]=R}Nt(g,A,e,0)}else g.attr(w)}}},t.prototype._clear=function(){var e=this,a=this._elMap;a.each(function(n){Gx(n,ts(n).option,a,e._lastGraphicModel)}),this._elMap=De()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t})(Yt);function hC(r){var t=Te(sO,r)?sO[r]:Wg(r),e=new t({});return ts(e).type=r,e}function iO(r,t,e,a){var n=hC(e);return t.add(n),a.set(r,n),ts(n).id=r,ts(n).isNew=!0,n}function Gx(r,t,e,a){var n=r&&r.parent;n&&(r.type==="group"&&r.traverse(function(s){Gx(s,t,e,a)}),qb(r,t,a),e.removeKey(ts(r).id))}function lO(r,t,e,a){r.isGroup||B([["cursor",fs.prototype.cursor],["zlevel",a||0],["z",e||0],["z2",0]],function(n){var s=n[0];Te(t,s)?r[s]=Me(t[s],n[1]):r[s]==null&&(r[s]=n[1])}),B(gt(t),function(n){if(n.indexOf("on")===0){var s=t[n];r[n]=Le(s)?s:null}}),Te(t,"draggable")&&(r.draggable=t.draggable),t.name!=null&&(r.name=t.name),t.id!=null&&(r.id=t.id)}function hge(r){return r=ie({},r),B(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(aB),function(t){delete r[t]}),r}function fge(r,t,e){var a=Xe(r).eventData;!r.silent&&!r.ignore&&!a&&(a=Xe(r).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:r.name}),a&&(a.info=e.info)}function pge(r){r.registerComponentModel(uge),r.registerComponentView(dge),r.registerPreprocessor(function(t){var e=t.graphic;de(e)?!e[0]||!e[0].elements?t.graphic=[{elements:e}]:t.graphic=[t.graphic[0]]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}var oO=["x","y","radius","angle","single"],gge=["cartesian2d","polar","singleAxis"];function mge(r){var t=r.get("coordinateSystem");return tt(gge,t)>=0}function To(r){return r+"Axis"}function vge(r,t){var e=De(),a=[],n=De();r.eachComponent({mainType:"dataZoom",query:t},function(d){n.get(d.uid)||o(d)});var s;do s=!1,r.eachComponent("dataZoom",l);while(s);function l(d){!n.get(d.uid)&&c(d)&&(o(d),s=!0)}function o(d){n.set(d.uid,!0),a.push(d),u(d)}function c(d){var h=!1;return d.eachTargetAxis(function(p,g){var v=e.get(p);v&&v[g]&&(h=!0)}),h}function u(d){d.eachTargetAxis(function(h,p){(e.get(h)||e.set(h,[]))[p]=!0})}return a}function GG(r){var t=r.ecModel,e={infoList:[],infoMap:De()};return r.eachTargetAxis(function(a,n){var s=t.getComponent(To(a),n);if(s){var l=s.getCoordSysModel();if(l){var o=l.uid,c=e.infoMap.get(o);c||(c={model:l,axisModels:[]},e.infoList.push(c),e.infoMap.set(o,c)),c.axisModels.push(s)}}}),e}var Sw=(function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},r})(),dm=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return t.prototype.init=function(e,a,n){var s=cO(e);this.settledOption=s,this.mergeDefaultAndTheme(e,n),this._doInit(s)},t.prototype.mergeOption=function(e){var a=cO(e);rt(this.option,e,!0),rt(this.settledOption,a,!0),this._doInit(a)},t.prototype._doInit=function(e){var a=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;B([["start","startValue"],["end","endValue"]],function(s,l){this._rangePropMode[l]==="value"&&(a[s[0]]=n[s[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),a=this._targetAxisInfoMap=De(),n=this._fillSpecifiedTargetAxis(a);n?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(a,this._orient)),this._noTarget=!0,a.each(function(s){s.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var a=!1;return B(oO,function(n){var s=this.getReferringComponents(To(n),kK);if(s.specified){a=!0;var l=new Sw;B(s.models,function(o){l.add(o.componentIndex)}),e.set(n,l)}},this),a},t.prototype._fillAutoTargetAxisByOrient=function(e,a){var n=this.ecModel,s=!0;if(s){var l=a==="vertical"?"y":"x",o=n.findComponents({mainType:l+"Axis"});c(o,l)}if(s){var o=n.findComponents({mainType:"singleAxis",filter:function(d){return d.get("orient",!0)===a}});c(o,"single")}function c(u,d){var h=u[0];if(h){var p=new Sw;if(p.add(h.componentIndex),e.set(d,p),s=!1,d==="x"||d==="y"){var g=h.getReferringComponents("grid",pr).models[0];g&&B(u,function(v){h.componentIndex!==v.componentIndex&&g===v.getReferringComponents("grid",pr).models[0]&&p.add(v.componentIndex)})}}}s&&B(oO,function(u){if(s){var d=n.findComponents({mainType:To(u),filter:function(p){return p.get("type",!0)==="category"}});if(d[0]){var h=new Sw;h.add(d[0].componentIndex),e.set(u,h),s=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(a){!e&&(e=a)},this),e==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&a.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var a=this._rangePropMode,n=this.get("rangeMode");B([["start","startValue"],["end","endValue"]],function(s,l){var o=e[s[0]]!=null,c=e[s[1]]!=null;o&&!c?a[l]="percent":!o&&c?a[l]="value":n?a[l]=n[l]:o&&(a[l]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(a,n){e==null&&(e=this.ecModel.getComponent(To(a),n))},this),e},t.prototype.eachTargetAxis=function(e,a){this._targetAxisInfoMap.each(function(n,s){B(n.indexList,function(l){e.call(a,s,l)})})},t.prototype.getAxisProxy=function(e,a){var n=this.getAxisModel(e,a);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,a){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[a])return this.ecModel.getComponent(To(e),a)},t.prototype.setRawRange=function(e){var a=this.option,n=this.settledOption;B([["start","startValue"],["end","endValue"]],function(s){(e[s[0]]!=null||e[s[1]]!=null)&&(a[s[0]]=n[s[0]]=e[s[0]],a[s[1]]=n[s[1]]=e[s[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var a=this.option;B(["start","startValue","end","endValue"],function(n){a[n]=e[n]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,a){if(e==null&&a==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(e,a).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var a,n=this._targetAxisInfoMap.keys(),s=0;s<n.length;s++)for(var l=n[s],o=this._targetAxisInfoMap.get(l),c=0;c<o.indexList.length;c++){var u=this.getAxisProxy(l,o.indexList[c]);if(u.hostedBy(this))return u;a||(a=u)}return a},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t})(ct);function cO(r){var t={};return B(["start","end","startValue","endValue","throttle"],function(e){r.hasOwnProperty(e)&&(t[e]=r[e])}),t}var xge=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t})(dm),uE=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,s){this.dataZoomModel=e,this.ecModel=a,this.api=n},t.type="dataZoom",t})(Yt),yge=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t})(uE),ch=B,uO=Mn,bge=(function(){function r(t,e,a,n){this._dimName=t,this._axisIndex=e,this.ecModel=n,this._dataZoomModel=a}return r.prototype.hostedBy=function(t){return this._dataZoomModel===t},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(mge(e)){var a=To(this._dimName),n=e.getReferringComponents(a,pr).models[0];n&&this._axisIndex===n.componentIndex&&t.push(e)}},this),t},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return Oe(this._minMaxSpan)},r.prototype.calculateDataWindow=function(t){var e=this._dataExtent,a=this.getAxisModel(),n=a.axis.scale,s=this._dataZoomModel.getRangePropMode(),l=[0,100],o=[],c=[],u;ch(["start","end"],function(p,g){var v=t[p],y=t[p+"Value"];s[g]==="percent"?(v==null&&(v=l[g]),y=n.parse(Tt(v,l,e))):(u=!0,y=y==null?e[g]:n.parse(y),v=Tt(y,e,l)),c[g]=y==null||isNaN(y)?e[g]:y,o[g]=v==null||isNaN(v)?l[g]:v}),uO(c),uO(o);var d=this._minMaxSpan;u?h(c,o,e,l,!1):h(o,c,l,e,!0);function h(p,g,v,y,x){var b=x?"Span":"ValueSpan";Vo(0,p,v,"all",d["min"+b],d["max"+b]);for(var N=0;N<2;N++)g[N]=Tt(p[N],v,y,!0),x&&(g[N]=n.parse(g[N]))}return{valueWindow:c,percentWindow:o}},r.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=_ge(this,this._dimName,e),this._updateMinMaxSpan();var a=this.calculateDataWindow(t.settledOption);this._valueWindow=a.valueWindow,this._percentWindow=a.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(t,e){if(t!==this._dataZoomModel)return;var a=this._dimName,n=this.getTargetSeriesModels(),s=t.get("filterMode"),l=this._valueWindow;if(s==="none")return;ch(n,function(c){var u=c.getData(),d=u.mapDimensionsAll(a);if(d.length){if(s==="weakFilter"){var h=u.getStore(),p=pe(d,function(g){return u.getDimensionIndex(g)},u);u.filterSelf(function(g){for(var v,y,x,b=0;b<d.length;b++){var N=h.get(p[b],g),w=!isNaN(N),S=N<l[0],T=N>l[1];if(w&&!S&&!T)return!0;w&&(x=!0),S&&(v=!0),T&&(y=!0)}return x&&v&&y})}else ch(d,function(g){if(s==="empty")c.setData(u=u.map(g,function(y){return o(y)?y:NaN}));else{var v={};v[g]=l,u.selectRange(v)}});ch(d,function(g){u.setApproximateExtent(l,g)})}});function o(c){return c>=l[0]&&c<=l[1]}},r.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,a=this._dataExtent;ch(["min","max"],function(n){var s=e.get(n+"Span"),l=e.get(n+"ValueSpan");l!=null&&(l=this.getAxisModel().axis.scale.parse(l)),l!=null?s=Tt(a[0]+l,a,[0,100],!0):s!=null&&(l=Tt(s,[0,100],a,!0)-a[0]),t[n+"Span"]=s,t[n+"ValueSpan"]=l},this)},r.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,a=this._valueWindow;if(e){var n=JC(a,[0,500]);n=Math.min(n,20);var s=t.axis.scale.rawExtentInfo;e[0]!==0&&s.setDeterminedMinMax("min",+a[0].toFixed(n)),e[1]!==100&&s.setDeterminedMinMax("max",+a[1].toFixed(n)),s.freeze()}},r})();function _ge(r,t,e){var a=[1/0,-1/0];ch(e,function(l){Bae(a,l.getData(),t)});var n=r.getAxisModel(),s=H9(n.axis.scale,n,a).calculate();return[s.min,s.max]}var Nge={getTargetSeries:function(r){function t(n){r.eachComponent("dataZoom",function(s){s.eachTargetAxis(function(l,o){var c=r.getComponent(To(l),o);n(l,o,c,s)})})}t(function(n,s,l,o){l.__dzAxisProxy=null});var e=[];t(function(n,s,l,o){l.__dzAxisProxy||(l.__dzAxisProxy=new bge(n,s,o,r),e.push(l.__dzAxisProxy))});var a=De();return B(e,function(n){B(n.getTargetSeriesModels(),function(s){a.set(s.uid,s)})}),a},overallReset:function(r,t){r.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(a,n){e.getAxisProxy(a,n).reset(e)}),e.eachTargetAxis(function(a,n){e.getAxisProxy(a,n).filterData(e,t)})}),r.eachComponent("dataZoom",function(e){var a=e.findRepresentativeAxisProxy();if(a){var n=a.getDataPercentWindow(),s=a.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:s[0],endValue:s[1]})}})}};function jge(r){r.registerAction("dataZoom",function(t,e){var a=vge(e,t);B(a,function(n){n.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var dO=!1;function dE(r){dO||(dO=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,Nge),jge(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function wge(r){r.registerComponentModel(xge),r.registerComponentView(yge),dE(r)}var as=(function(){function r(){}return r})(),UG={};function uh(r,t){UG[r]=t}function FG(r){return UG[r]}var Sge=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;B(this.option.feature,function(a,n){var s=FG(n);s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(e)),rt(a,s.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:ee.color.border,borderRadius:0,borderWidth:0,padding:ee.size.m,itemSize:15,itemGap:ee.size.s,showTitle:!0,iconStyle:{borderColor:ee.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:ee.color.accent50}},tooltip:{show:!1,position:"bottom"}},t})(ct);function YG(r,t){var e=sf(t.get("padding")),a=t.getItemStyle(["color","opacity"]);a.fill=t.get("backgroundColor");var n=new it({shape:{x:r.x-e[3],y:r.y-e[0],width:r.width+e[1]+e[3],height:r.height+e[0]+e[2],r:t.get("borderRadius")},style:a,silent:!0,z2:-1});return n}var Cge=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,a,n,s){var l=this.group;if(l.removeAll(),!e.get("show"))return;var o=+e.get("itemSize"),c=e.get("orient")==="vertical",u=e.get("feature")||{},d=this._features||(this._features={}),h=[];B(u,function(N,w){h.push(w)}),new Tl(this._featureNames||[],h).add(p).update(p).remove(et(p,null)).execute(),this._featureNames=h;function p(N,w){var S=h[N],T=h[w],A=u[S],C=new dt(A,e,e.ecModel),M;if(s&&s.newTitle!=null&&s.featureName===S&&(A.title=s.newTitle),S&&!T){if(Tge(S))M={onclick:C.option.onclick,featureName:S};else{var R=FG(S);if(!R)return;M=new R}d[S]=M}else if(M=d[T],!M)return;M.uid=nf("toolbox-feature"),M.model=C,M.ecModel=a,M.api=n;var k=M instanceof as;if(!S&&T){k&&M.dispose&&M.dispose(a,n);return}if(!C.get("show")||k&&M.unusable){k&&M.remove&&M.remove(a,n);return}g(C,M,S),C.setIconStatus=function(L,O){var z=this.option,U=this.iconPaths;z.iconStatus=z.iconStatus||{},z.iconStatus[L]=O,U[L]&&(O==="emphasis"?Sl:Cl)(U[L])},M instanceof as&&M.render&&M.render(C,a,n,s)}function g(N,w,S){var T=N.getModel("iconStyle"),A=N.getModel(["emphasis","iconStyle"]),C=w instanceof as&&w.getIcons?w.getIcons():N.get("icon"),M=N.get("title")||{},R,k;je(C)?(R={},R[S]=C):R=C,je(M)?(k={},k[S]=M):k=M;var L=N.iconPaths={};B(R,function(O,z){var U=rf(O,{},{x:-o/2,y:-o/2,width:o,height:o});U.setStyle(T.getItemStyle());var H=U.ensureState("emphasis");H.style=A.getItemStyle();var P=new vt({style:{text:k[z],align:A.get("textAlign"),borderRadius:A.get("textBorderRadius"),padding:A.get("textPadding"),fill:null,font:NT({fontStyle:A.get("textFontStyle"),fontFamily:A.get("textFontFamily"),fontSize:A.get("textFontSize"),fontWeight:A.get("textFontWeight")},a)},ignore:!0});U.setTextContent(P),Ll({el:U,componentModel:e,itemName:z,formatterParamsExtra:{title:k[z]}}),U.__title=k[z],U.on("mouseover",function(){var F=A.getItemStyle(),Y=c?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";P.setStyle({fill:A.get("textFill")||F.fill||F.stroke||ee.color.neutral99,backgroundColor:A.get("textBackgroundColor")}),U.setTextConfig({position:A.get("textPosition")||Y}),P.ignore=!e.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){N.get(["iconStatus",z])!=="emphasis"&&n.leaveEmphasis(this),P.hide()}),(N.get(["iconStatus",z])==="emphasis"?Sl:Cl)(U),l.add(U),U.on("click",we(w.onclick,w,a,n,z)),L[z]=U})}var v=Kr(e,n).refContainer,y=e.getBoxLayoutParams(),x=e.get("padding"),b=rr(y,v,x);gu(e.get("orient"),l,e.get("itemGap"),b.width,b.height),Rb(l,y,v,x),l.add(YG(l.getBoundingRect(),e)),c||l.eachChild(function(N){var w=N.__title,S=N.ensureState("emphasis"),T=S.textConfig||(S.textConfig={}),A=N.getTextContent(),C=A&&A.ensureState("emphasis");if(C&&!Le(C)&&w){var M=C.style||(C.style={}),R=xb(w,vt.makeFont(M)),k=N.x+l.x,L=N.y+l.y+o,O=!1;L+R.height>n.getHeight()&&(T.position="top",O=!0);var z=O?-5-R.height:o+10;k+R.width/2>n.getWidth()?(T.position=["100%",z],M.align="right"):k-R.width/2<0&&(T.position=[0,z],M.align="left")}})},t.prototype.updateView=function(e,a,n,s){B(this._features,function(l){l instanceof as&&l.updateView&&l.updateView(l.model,a,n,s)})},t.prototype.remove=function(e,a){B(this._features,function(n){n instanceof as&&n.remove&&n.remove(e,a)}),this.group.removeAll()},t.prototype.dispose=function(e,a){B(this._features,function(n){n instanceof as&&n.dispose&&n.dispose(e,a)})},t.type="toolbox",t})(Yt);function Tge(r){return r.indexOf("my")===0}var Age=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,a){var n=this.model,s=n.get("name")||e.get("title.0.text")||"echarts",l=a.getZr().painter.getType()==="svg",o=l?"svg":n.get("type",!0)||"png",c=a.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||ee.color.neutral00,connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=pt.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var d=document.createElement("a");d.download=s+"."+o,d.target="_blank",d.href=c;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});d.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||l){var p=c.split(","),g=p[0].indexOf("base64")>-1,v=l?decodeURIComponent(p[1]):p[1];g&&(v=window.atob(v));var y=s+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var x=v.length,b=new Uint8Array(x);x--;)b[x]=v.charCodeAt(x);var N=new Blob([b]);window.navigator.msSaveOrOpenBlob(N,y)}else{var w=document.createElement("iframe");document.body.appendChild(w);var S=w.contentWindow,T=S.document;T.open("image/svg+xml","replace"),T.write(v),T.close(),S.focus(),T.execCommand("SaveAs",!0,y),document.body.removeChild(w)}}else{var A=n.get("lang"),C='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(A&&A[0]||"")+'" /></body>',M=window.open();M.document.write(C),M.document.title=s}},t.getDefaultOption=function(e){var a={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:ee.color.neutral00,name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return a},t})(as),hO="__ec_magicType_stack__",Ege=[["line","bar"],["stack"]],Dge=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,a=e.get("icon"),n={};return B(e.get("type"),function(s){a[s]&&(n[s]=a[s])}),n},t.getDefaultOption=function(e){var a={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return a},t.prototype.onclick=function(e,a,n){var s=this.model,l=s.get(["seriesIndex",n]);if(fO[n]){var o={series:[]},c=function(h){var p=h.subType,g=h.id,v=fO[n](p,g,h,s);v&&(Ge(v,h.option),o.series.push(v));var y=h.coordinateSystem;if(y&&y.type==="cartesian2d"&&(n==="line"||n==="bar")){var x=y.getAxesByScale("ordinal")[0];if(x){var b=x.dim,N=b+"Axis",w=h.getReferringComponents(N,pr).models[0],S=w.componentIndex;o[N]=o[N]||[];for(var T=0;T<=S;T++)o[N][S]=o[N][S]||{};o[N][S].boundaryGap=n==="bar"}}};B(Ege,function(h){tt(h,n)>=0&&B(h,function(p){s.setIconStatus(p,"normal")})}),s.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:l==null?null:{seriesIndex:l}},c);var u,d=n;n==="stack"&&(u=rt({stack:s.option.title.tiled,tiled:s.option.title.stack},s.option.title),s.get(["iconStatus",n])!=="emphasis"&&(d="tiled")),a.dispatchAction({type:"changeMagicType",currentType:d,newOption:o,newTitle:u,featureName:"magicType"})}},t})(as),fO={line:function(r,t,e,a){if(r==="bar")return rt({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(r,t,e,a){if(r==="line")return rt({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(r,t,e,a){var n=e.get("stack")===hO;if(r==="line"||r==="bar")return a.setIconStatus("stack",n?"normal":"emphasis"),rt({id:t,stack:n?"":hO},a.get(["option","stack"])||{},!0)}};Ys({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,t){t.mergeOption(r.newOption)});var Xb=new Array(60).join("-"),Fh="	";function Mge(r){var t={},e=[],a=[];return r.eachRawSeries(function(n){var s=n.coordinateSystem;if(s&&(s.type==="cartesian2d"||s.type==="polar")){var l=s.getBaseAxis();if(l.type==="category"){var o=l.dim+"_"+l.index;t[o]||(t[o]={categoryAxis:l,valueAxis:s.getOtherAxis(l),series:[]},a.push({axisDim:l.dim,axisIndex:l.index})),t[o].series.push(n)}else e.push(n)}else e.push(n)}),{seriesGroupByCategoryAxis:t,other:e,meta:a}}function Rge(r){var t=[];return B(r,function(e,a){var n=e.categoryAxis,s=e.valueAxis,l=s.dim,o=[" "].concat(pe(e.series,function(g){return g.name})),c=[n.model.getCategories()];B(e.series,function(g){var v=g.getRawData();c.push(g.getRawData().mapArray(v.mapDimension(l),function(y){return y}))});for(var u=[o.join(Fh)],d=0;d<c[0].length;d++){for(var h=[],p=0;p<c.length;p++)h.push(c[p][d]);u.push(h.join(Fh))}t.push(u.join(`
`))}),t.join(`

`+Xb+`

`)}function Lge(r){return pe(r,function(t){var e=t.getRawData(),a=[t.name],n=[];return e.each(e.dimensions,function(){for(var s=arguments.length,l=arguments[s-1],o=e.getName(l),c=0;c<s-1;c++)n[c]=arguments[c];a.push((o?o+Fh:"")+n.join(Fh))}),a.join(`
`)}).join(`

`+Xb+`

`)}function Ige(r){var t=Mge(r);return{value:Ct([Rge(t.seriesGroupByCategoryAxis),Lge(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+Xb+`

`),meta:t.meta}}function Xy(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function kge(r){var t=r.slice(0,r.indexOf(`
`));if(t.indexOf(Fh)>=0)return!0}var fC=new RegExp("["+Fh+"]+","g");function Oge(r){for(var t=r.split(/\n+/g),e=Xy(t.shift()).split(fC),a=[],n=pe(e,function(c){return{name:c,data:[]}}),s=0;s<t.length;s++){var l=Xy(t[s]).split(fC);a.push(l.shift());for(var o=0;o<l.length;o++)n[o]&&(n[o].data[s]=l[o])}return{series:n,categories:a}}function Pge(r){for(var t=r.split(/\n+/g),e=Xy(t.shift()),a=[],n=0;n<t.length;n++){var s=Xy(t[n]);if(s){var l=s.split(fC),o="",c=void 0,u=!1;isNaN(l[0])?(u=!0,o=l[0],l=l.slice(1),a[n]={name:o,value:[]},c=a[n].value):c=a[n]=[];for(var d=0;d<l.length;d++)c.push(+l[d]);c.length===1&&(u?a[n].value=c[0]:a[n]=c[0])}}return{name:e,data:a}}function zge(r,t){var e=r.split(new RegExp(`
*`+Xb+`
*`,"g")),a={series:[]};return B(e,function(n,s){if(kge(n)){var l=Oge(n),o=t[s],c=o.axisDim+"Axis";o&&(a[c]=a[c]||[],a[c][o.axisIndex]={data:l.categories},a.series=a.series.concat(l.series))}else{var l=Pge(n);a.series.push(l)}}),a}var Bge=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,a){setTimeout(function(){a.dispatchAction({type:"hideTip"})});var n=a.getDom(),s=this.model;this._dom&&n.removeChild(this._dom);var l=document.createElement("div");l.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",l.style.backgroundColor=s.get("backgroundColor")||ee.color.neutral00;var o=document.createElement("h4"),c=s.get("lang")||[];o.innerHTML=c[0]||s.get("title"),o.style.cssText="margin:10px 20px",o.style.color=s.get("textColor");var u=document.createElement("div"),d=document.createElement("textarea");u.style.cssText="overflow:auto";var h=s.get("optionToContent"),p=s.get("contentToOption"),g=Ige(e);if(Le(h)){var v=h(a.getOption());je(v)?u.innerHTML=v:ju(v)&&u.appendChild(v)}else{d.readOnly=s.get("readOnly");var y=d.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=s.get("textColor"),y.borderColor=s.get("textareaBorderColor"),y.backgroundColor=s.get("textareaColor"),d.value=g.value,u.appendChild(d)}var x=g.meta,b=document.createElement("div");b.style.cssText="position:absolute;bottom:5px;left:0;right:0";var N="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",w=document.createElement("div"),S=document.createElement("div");N+=";background-color:"+s.get("buttonColor"),N+=";color:"+s.get("buttonTextColor");var T=this;function A(){n.removeChild(l),T._dom=null}jS(w,"click",A),jS(S,"click",function(){if(p==null&&h!=null||p!=null&&h==null){A();return}var C;try{Le(p)?C=p(u,a.getOption()):C=zge(d.value,x)}catch(M){throw A(),new Error("Data view format error "+M)}C&&a.dispatchAction({type:"changeDataView",newOption:C}),A()}),w.innerHTML=c[1],S.innerHTML=c[2],S.style.cssText=w.style.cssText=N,!s.get("readOnly")&&b.appendChild(S),b.appendChild(w),l.appendChild(o),l.appendChild(u),l.appendChild(b),u.style.height=n.clientHeight-80+"px",n.appendChild(l),this._dom=l},t.prototype.remove=function(e,a){this._dom&&a.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,a){this.remove(e,a)},t.getDefaultOption=function(e){var a={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:ee.color.background,textColor:ee.color.primary,textareaColor:ee.color.background,textareaBorderColor:ee.color.border,buttonColor:ee.color.accent50,buttonTextColor:ee.color.neutral00};return a},t})(as);function Vge(r,t){return pe(r,function(e,a){var n=t&&t[a];if(Ue(n)&&!de(n)){var s=Ue(e)&&!de(e);s||(e={value:e});var l=n.name!=null&&e.name==null;return e=Ge(e,n),l&&delete e.name,e}else return e})}Ys({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,t){var e=[];B(r.newOption.series,function(a){var n=t.getSeriesByName(a.name)[0];if(!n)e.push(ie({type:"scatter"},a));else{var s=n.get("data");e.push({name:a.name,data:Vge(a.data,s)})}}),t.mergeOption(Ge({series:e},r.newOption))});var WG=B,$G=ut();function Hge(r,t){var e=hE(r);WG(t,function(a,n){for(var s=e.length-1;s>=0;s--){var l=e[s];if(l[n])break}if(s<0){var o=r.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(o){var c=o.getPercentRange();e[0][n]={dataZoomId:n,start:c[0],end:c[1]}}}}),e.push(t)}function Gge(r){var t=hE(r),e=t[t.length-1];t.length>1&&t.pop();var a={};return WG(e,function(n,s){for(var l=t.length-1;l>=0;l--)if(n=t[l][s],n){a[s]=n;break}}),a}function Uge(r){$G(r).snapshots=null}function Fge(r){return hE(r).length}function hE(r){var t=$G(r);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Yge=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.onclick=function(e,a){Uge(e),a.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var a={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return a},t})(as);Ys({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,t){t.resetOption("recreate")});var Wge=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],fE=(function(){function r(t,e,a){var n=this;this._targetInfoList=[];var s=pO(e,t);B($ge,function(l,o){(!a||!a.include||tt(a.include,o)>=0)&&l(s,n._targetInfoList)})}return r.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(a,n,s){if((a.coordRanges||(a.coordRanges=[])).push(n),!a.coordRange){a.coordRange=n;var l=Cw[a.brushType](0,s,n);a.__rangeOffset={offset:xO[a.brushType](l.values,a.range,[1,1]),xyMinMax:l.xyMinMax}}}),t},r.prototype.matchOutputRanges=function(t,e,a){B(t,function(n){var s=this.findTargetInfo(n,e);s&&s!==!0&&B(s.coordSyses,function(l){var o=Cw[n.brushType](1,l,n.range,!0);a(n,o.values,l,e)})},this)},r.prototype.setInputRanges=function(t,e){B(t,function(a){var n=this.findTargetInfo(a,e);if(a.range=a.range||[],n&&n!==!0){a.panelId=n.panelId;var s=Cw[a.brushType](0,n.coordSys,a.coordRange),l=a.__rangeOffset;a.range=l?xO[a.brushType](s.values,l.offset,qge(s.xyMinMax,l.xyMinMax)):s.values}},this)},r.prototype.makePanelOpts=function(t,e){return pe(this._targetInfoList,function(a){var n=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:e?e(a):null,clipPath:QH(n),isTargetByCursor:eG(n,t,a.coordSysModel),getLinearBrushOtherExtent:JH(n)}})},r.prototype.controlSeries=function(t,e,a){var n=this.findTargetInfo(t,a);return n===!0||n&&tt(n.coordSyses,e.coordinateSystem)>=0},r.prototype.findTargetInfo=function(t,e){for(var a=this._targetInfoList,n=pO(e,t),s=0;s<a.length;s++){var l=a[s],o=t.panelId;if(o){if(l.panelId===o)return l}else for(var c=0;c<gO.length;c++)if(gO[c](n,l))return l}return!0},r})();function pC(r){return r[0]>r[1]&&r.reverse(),r}function pO(r,t){return Nh(r,t,{includeMainTypes:Wge})}var $ge={grid:function(r,t){var e=r.xAxisModels,a=r.yAxisModels,n=r.gridModels,s=De(),l={},o={};!e&&!a&&!n||(B(e,function(c){var u=c.axis.grid.model;s.set(u.id,u),l[u.id]=!0}),B(a,function(c){var u=c.axis.grid.model;s.set(u.id,u),o[u.id]=!0}),B(n,function(c){s.set(c.id,c),l[c.id]=!0,o[c.id]=!0}),s.each(function(c){var u=c.coordinateSystem,d=[];B(u.getCartesians(),function(h,p){(tt(e,h.getAxis("x").model)>=0||tt(a,h.getAxis("y").model)>=0)&&d.push(h)}),t.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:d[0],coordSyses:d,getPanelRect:mO.grid,xAxisDeclared:l[c.id],yAxisDeclared:o[c.id]})}))},geo:function(r,t){B(r.geoModels,function(e){var a=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:a,coordSyses:[a],getPanelRect:mO.geo})})}},gO=[function(r,t){var e=r.xAxisModel,a=r.yAxisModel,n=r.gridModel;return!n&&e&&(n=e.axis.grid.model),!n&&a&&(n=a.axis.grid.model),n&&n===t.gridModel},function(r,t){var e=r.geoModel;return e&&e===t.geoModel}],mO={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,t=r.getBoundingRect().clone();return t.applyTransform(Ro(r)),t}},Cw={lineX:et(vO,0),lineY:et(vO,1),rect:function(r,t,e,a){var n=r?t.pointToData([e[0][0],e[1][0]],a):t.dataToPoint([e[0][0],e[1][0]],a),s=r?t.pointToData([e[0][1],e[1][1]],a):t.dataToPoint([e[0][1],e[1][1]],a),l=[pC([n[0],s[0]]),pC([n[1],s[1]])];return{values:l,xyMinMax:l}},polygon:function(r,t,e,a){var n=[[1/0,-1/0],[1/0,-1/0]],s=pe(e,function(l){var o=r?t.pointToData(l,a):t.dataToPoint(l,a);return n[0][0]=Math.min(n[0][0],o[0]),n[1][0]=Math.min(n[1][0],o[1]),n[0][1]=Math.max(n[0][1],o[0]),n[1][1]=Math.max(n[1][1],o[1]),o});return{values:s,xyMinMax:n}}};function vO(r,t,e,a){var n=e.getAxis(["x","y"][r]),s=pC(pe([0,1],function(o){return t?n.coordToData(n.toLocalCoord(a[o]),!0):n.toGlobalCoord(n.dataToCoord(a[o]))})),l=[];return l[r]=s,l[1-r]=[NaN,NaN],{values:s,xyMinMax:l}}var xO={lineX:et(yO,0),lineY:et(yO,1),rect:function(r,t,e){return[[r[0][0]-e[0]*t[0][0],r[0][1]-e[0]*t[0][1]],[r[1][0]-e[1]*t[1][0],r[1][1]-e[1]*t[1][1]]]},polygon:function(r,t,e){return pe(r,function(a,n){return[a[0]-e[0]*t[n][0],a[1]-e[1]*t[n][1]]})}};function yO(r,t,e,a){return[t[0]-a[r]*e[0],t[1]-a[r]*e[1]]}function qge(r,t){var e=bO(r),a=bO(t),n=[e[0]/a[0],e[1]/a[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function bO(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var gC=B,Xge=DK("toolbox-dataZoom_"),Zge=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,a,n,s){this._brushController||(this._brushController=new zA(n.getZr()),this._brushController.on("brush",we(this._onBrush,this)).mount()),Jge(e,a,this,s,n),Qge(e,a)},t.prototype.onclick=function(e,a,n){Kge[n].call(this)},t.prototype.remove=function(e,a){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,a){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var a=e.areas;if(!e.isEnd||!a.length)return;var n={},s=this.ecModel;this._brushController.updateCovers([]);var l=new fE(pE(this.model),s,{include:["grid"]});l.matchOutputRanges(a,s,function(u,d,h){if(h.type==="cartesian2d"){var p=u.brushType;p==="rect"?(o("x",h,d[0]),o("y",h,d[1])):o({lineX:"x",lineY:"y"}[p],h,d)}}),Hge(s,n),this._dispatchZoomAction(n);function o(u,d,h){var p=d.getAxis(u),g=p.model,v=c(u,g,s),y=v.findRepresentativeAxisProxy(g).getMinMaxSpan();(y.minValueSpan!=null||y.maxValueSpan!=null)&&(h=Vo(0,h.slice(),p.scale.getExtent(),0,y.minValueSpan,y.maxValueSpan)),v&&(n[v.id]={dataZoomId:v.id,startValue:h[0],endValue:h[1]})}function c(u,d,h){var p;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(g){var v=g.getAxisModel(u,d.componentIndex);v&&(p=g)}),p}},t.prototype._dispatchZoomAction=function(e){var a=[];gC(e,function(n,s){a.push(Oe(n))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},t.getDefaultOption=function(e){var a={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:ee.color.backgroundTint}};return a},t})(as),Kge={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(Gge(this.ecModel))}};function pE(r){var t={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function Qge(r,t){r.setIconStatus("back",Fge(t)>1?"emphasis":"normal")}function Jge(r,t,e,a,n){var s=e._isZoomActive;a&&a.type==="takeGlobalCursor"&&(s=a.key==="dataZoomSelect"?a.dataZoomSelectActive:!1),e._isZoomActive=s,r.setIconStatus("zoom",s?"emphasis":"normal");var l=new fE(pE(r),t,{include:["grid"]}),o=l.makePanelOpts(n,function(c){return c.xAxisDeclared&&!c.yAxisDeclared?"lineX":!c.xAxisDeclared&&c.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(o).enableBrush(s&&o.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}dee("dataZoom",function(r){var t=r.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var a=t.getModel(e),n=[],s=pE(a),l=Nh(r,s);gC(l.xAxisModels,function(c){return o(c,"xAxis","xAxisIndex")}),gC(l.yAxisModels,function(c){return o(c,"yAxis","yAxisIndex")});function o(c,u,d){var h=c.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:Xge+u+h};p[d]=h,n.push(p)}return n});function eme(r){r.registerComponentModel(Sge),r.registerComponentView(Cge),uh("saveAsImage",Age),uh("magicType",Dge),uh("dataView",Bge),uh("dataZoom",Zge),uh("restore",Yge),st(wge)}var tme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:ee.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:ee.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:ee.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:ee.color.tertiary,fontSize:14}},t})(ct);function qG(r){var t=r.get("confine");return t!=null?!!t:r.get("renderMode")==="richText"}function XG(r){if(pt.domSupported){for(var t=document.documentElement.style,e=0,a=r.length;e<a;e++)if(r[e]in t)return r[e]}}var ZG=XG(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),rme=XG(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function KG(r,t){if(!r)return t;t=kT(t,!0);var e=r.indexOf(t);return r=e===-1?t:"-"+r.slice(0,e)+"-"+t,r.toLowerCase()}function ame(r,t){var e=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return e?e[t]:null}var nme=KG(rme,"transition"),gE=KG(ZG,"transform"),sme="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(pt.transform3dSupported?"will-change:transform;":"");function ime(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function lme(r,t,e){if(!je(e)||e==="inside")return"";var a=r.get("backgroundColor"),n=r.get("borderWidth");t=Du(t);var s=ime(e),l=Math.max(Math.round(n)*1.5,6),o="",c=gE+":",u;tt(["left","right"],s)>-1?(o+="top:50%",c+="translateY(-50%) rotate("+(u=s==="left"?-225:-45)+"deg)"):(o+="left:50%",c+="translateX(-50%) rotate("+(u=s==="top"?225:45)+"deg)");var d=u*Math.PI/180,h=l+n,p=h*Math.abs(Math.cos(d))+h*Math.abs(Math.sin(d)),g=Math.round(((p-Math.SQRT2*n)/2+Math.SQRT2*n-(p-h)/2)*100)/100;o+=";"+s+":-"+g+"px";var v=t+" solid "+n+"px;",y=["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",o+";"+c+";","border-bottom:"+v,"border-right:"+v,"background-color:"+a+";"];return'<div style="'+y.join("")+'"></div>'}function ome(r,t,e){var a="cubic-bezier(0.23,1,0.32,1)",n="",s="";return e&&(n=" "+r/2+"s "+a,s="opacity"+n+",visibility"+n),t||(n=" "+r+"s "+a,s+=(s.length?",":"")+(pt.transformSupported?""+gE+n:",left"+n+",top"+n)),nme+":"+s}function _O(r,t,e){var a=r.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!pt.transformSupported)return e?"top:"+n+";left:"+a+";":[["top",n],["left",a]];var s=pt.transform3dSupported,l="translate"+(s?"3d":"")+"("+a+","+n+(s?",0":"")+")";return e?"top:0;left:0;"+gE+":"+l+";":[["top",0],["left",0],[ZG,l]]}function cme(r){var t=[],e=r.get("fontSize"),a=r.getTextColor();a&&t.push("color:"+a),t.push("font:"+r.getFont());var n=Me(r.get("lineHeight"),Math.round(e*3/2));e&&t.push("line-height:"+n+"px");var s=r.get("textShadowColor"),l=r.get("textShadowBlur")||0,o=r.get("textShadowOffsetX")||0,c=r.get("textShadowOffsetY")||0;return s&&l&&t.push("text-shadow:"+o+"px "+c+"px "+l+"px "+s),B(["decoration","align"],function(u){var d=r.get(u);d&&t.push("text-"+u+":"+d)}),t.join(";")}function ume(r,t,e,a){var n=[],s=r.get("transitionDuration"),l=r.get("backgroundColor"),o=r.get("shadowBlur"),c=r.get("shadowColor"),u=r.get("shadowOffsetX"),d=r.get("shadowOffsetY"),h=r.getModel("textStyle"),p=BB(r,"html"),g=u+"px "+d+"px "+o+"px "+c;return n.push("box-shadow:"+g),t&&s>0&&n.push(ome(s,e,a)),l&&n.push("background-color:"+l),B(["width","color","radius"],function(v){var y="border-"+v,x=kT(y),b=r.get(x);b!=null&&n.push(y+":"+b+(v==="color"?"":"px"))}),n.push(cme(h)),p!=null&&n.push("padding:"+sf(p).join("px ")+"px"),n.join(";")+";"}function NO(r,t,e,a,n){var s=t&&t.painter;if(e){var l=s&&s.getViewportRoot();l&&XX(r,l,e,a,n)}else{r[0]=a,r[1]=n;var o=s&&s.getViewportRootOffset();o&&(r[0]+=o.offsetLeft,r[1]+=o.offsetTop)}r[2]=r[0]/t.getWidth(),r[3]=r[1]/t.getHeight()}var dme=(function(){function r(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,pt.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var n=this._zr=t.getZr(),s=e.appendTo,l=s&&(je(s)?document.querySelector(s):ju(s)?s:Le(s)&&s(t.getDom()));NO(this._styleCoord,n,l,t.getWidth()/2,t.getHeight()/2),(l||t.getDom()).appendChild(a),this._api=t,this._container=l;var o=this;a.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},a.onmousemove=function(c){if(c=c||window.event,!o._enterable){var u=n.handler,d=n.painter.getViewportRoot();Qn(d,c,!0),u.dispatch("mousemove",c)}},a.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return r.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),a=ame(e,"position"),n=e.style;n.position!=="absolute"&&a!=="absolute"&&(n.position="relative")}var s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this._enableDisplayTransition=t.get("displayTransition")&&t.get("transitionDuration")>0,this.el.className=t.get("className")||""},r.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var a=this.el,n=a.style,s=this._styleCoord;a.innerHTML?n.cssText=sme+ume(t,!this._firstShow,this._longHide,this._enableDisplayTransition)+_O(s[0],s[1],!0)+("border-color:"+Du(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(t,e,a,n,s){var l=this.el;if(t==null){l.innerHTML="";return}var o="";if(je(s)&&a.get("trigger")==="item"&&!qG(a)&&(o=lme(a,n,s)),je(t))l.innerHTML=t+o;else if(t){l.innerHTML="",de(t)||(t=[t]);for(var c=0;c<t.length;c++)ju(t[c])&&t[c].parentNode!==l&&l.appendChild(t[c]);if(o&&l.childNodes.length){var u=document.createElement("div");u.innerHTML=o,l.appendChild(u)}}},r.prototype.setEnterable=function(t){this._enterable=t},r.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},r.prototype.moveTo=function(t,e){if(this.el){var a=this._styleCoord;if(NO(a,this._zr,this._container,t,e),a[0]!=null&&a[1]!=null){var n=this.el.style,s=_O(a[0],a[1]);B(s,function(l){n[l[0]]=l[1]})}}},r.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},r.prototype.hide=function(){var t=this,e=this.el.style;this._enableDisplayTransition?(e.visibility="hidden",e.opacity="0"):e.display="none",pt.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},r.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(we(this.hide,this),t)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this._zr;ZX(t&&t.painter&&t.painter.getViewportRoot(),this._container);var e=this.el;if(e){e.onmouseenter=e.onmousemove=e.onmouseleave=null;var a=e.parentNode;a&&a.removeChild(e)}this.el=this._container=null},r})(),hme=(function(){function r(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),wO(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return r.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(t,e,a,n,s){var l=this;Ue(t)&&At(""),this.el&&this._zr.remove(this.el);var o=a.getModel("textStyle");this.el=new vt({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:o.get("textShadowColor"),fill:a.get(["textStyle","color"]),padding:BB(a,"richText"),verticalAlign:"top",align:"left"},z:a.get("z")}),B(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){l.el.style[u]=a.get(u)}),B(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){l.el.style[u]=o.get(u)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},r.prototype.setEnterable=function(t){this._enterable=t},r.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),a=jO(t.style);return[e.width+a.left+a.right,e.height+a.top+a.bottom]},r.prototype.moveTo=function(t,e){var a=this.el;if(a){var n=this._styleCoord;wO(n,this._zr,t,e),t=n[0],e=n[1];var s=a.style,l=mo(s.borderWidth||0),o=jO(s);a.x=t+l+o.left,a.y=e+l+o.top,a.markRedraw()}},r.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(we(this.hide,this),t)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r})();function mo(r){return Math.max(0,r)}function jO(r){var t=mo(r.shadowBlur||0),e=mo(r.shadowOffsetX||0),a=mo(r.shadowOffsetY||0);return{left:mo(t-e),right:mo(t+e),top:mo(t-a),bottom:mo(t+a)}}function wO(r,t,e,a){r[0]=e,r[1]=a,r[2]=r[0]/t.getWidth(),r[3]=r[1]/t.getHeight()}var fme=new it({shape:{x:-1,y:-1,width:2,height:2}}),pme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){if(!(pt.node||!a.getDom())){var n=e.getComponent("tooltip"),s=this._renderMode=PK(n.get("renderMode"));this._tooltipContent=s==="richText"?new hme(a):new dme(a,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},t.prototype.render=function(e,a,n){if(!(pt.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=a,this._api=n;var s=this._tooltipContent;s.update(e),s.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?cf(this,"_updatePosition",50,"fixRate"):Zg(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,a=e.get("triggerOn");RG("itemTooltip",this._api,we(function(n,s,l){a!=="none"&&(a.indexOf(n)>=0?this._tryShow(s,l):n==="leave"&&this._hide(l))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,a=this._ecModel,n=this._api,s=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var l=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&l.manuallyShowTip(e,a,n,{x:l._lastX,y:l._lastY,dataByCoordSys:l._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,a,n,s){if(!(s.from===this.uid||pt.node||!n.getDom())){var l=SO(s,n);this._ticket="";var o=s.dataByCoordSys,c=xme(s,a,n);if(c){var u=c.el.getBoundingRect().clone();u.applyTransform(c.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:c.el,position:s.position,positionDefault:"bottom"},l)}else if(s.tooltip&&s.x!=null&&s.y!=null){var d=fme;d.x=s.x,d.y=s.y,d.update(),Xe(d).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:d},l)}else if(o)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:o,tooltipOption:s.tooltipOption},l);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(e,a,n,s))return;var h=LG(s,a),p=h.point[0],g=h.point[1];p!=null&&g!=null&&this._tryShow({offsetX:p,offsetY:g,target:h.el,position:s.position,positionDefault:"bottom"},l)}else s.x!=null&&s.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:n.getZr().findHover(s.x,s.y).target},l))}},t.prototype.manuallyHideTip=function(e,a,n,s){var l=this._tooltipContent;this._tooltipModel&&l.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(SO(s,n))},t.prototype._manuallyAxisShowTip=function(e,a,n,s){var l=s.seriesIndex,o=s.dataIndex,c=a.getComponent("axisPointer").coordSysAxesInfo;if(!(l==null||o==null||c==null)){var u=a.getSeriesByIndex(l);if(u){var d=u.getData(),h=$p([d.getItemModel(o),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:o,position:s.position}),!0}}},t.prototype._tryShow=function(e,a){var n=e.target,s=this._tooltipModel;if(s){this._lastX=e.offsetX,this._lastY=e.offsetY;var l=e.dataByCoordSys;if(l&&l.length)this._showAxisTooltip(l,e);else if(n){var o=Xe(n);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var c,u;nu(n,function(d){if(d.tooltipDisabled)return c=u=null,!0;c||u||(Xe(d).dataIndex!=null?c=d:Xe(d).tooltipConfig!=null&&(u=d))},!0),c?this._showSeriesItemTooltip(e,c,a):u?this._showComponentItemTooltip(e,u,a):this._hide(a)}else this._lastDataByCoordSys=null,this._hide(a)}},t.prototype._showOrMove=function(e,a){var n=e.get("showDelay");a=we(a,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(a,n):a()},t.prototype._showAxisTooltip=function(e,a){var n=this._ecModel,s=this._tooltipModel,l=[a.offsetX,a.offsetY],o=$p([a.tooltipOption],s),c=this._renderMode,u=[],d=Br("section",{blocks:[],noHeader:!0}),h=[],p=new lj;B(e,function(N){B(N.dataByAxis,function(w){var S=n.getComponent(w.axisDim+"Axis",w.axisIndex),T=w.value;if(!(!S||T==null)){var A=EG(T,S.axis,n,w.seriesDataIndices,w.valueLabelOpt),C=Br("section",{header:A,noHeader:!Dn(A),sortBlocks:!0,blocks:[]});d.blocks.push(C),B(w.seriesDataIndices,function(M){var R=n.getSeriesByIndex(M.seriesIndex),k=M.dataIndexInside,L=R.getDataParams(k);if(!(L.dataIndex<0)){L.axisDim=w.axisDim,L.axisIndex=w.axisIndex,L.axisType=w.axisType,L.axisId=w.axisId,L.axisValue=Cy(S.axis,{value:T}),L.axisValueLabel=A,L.marker=p.makeTooltipMarker("item",Du(L.color),c);var O=HL(R.formatTooltip(k,!0,null)),z=O.frag;if(z){var U=$p([R],s).get("valueFormatter");C.blocks.push(U?ie({valueFormatter:U},z):z)}O.text&&h.push(O.text),u.push(L)}})}})}),d.blocks.reverse(),h.reverse();var g=a.position,v=o.get("order"),y=$L(d,p,c,v,n.get("useUTC"),o.get("textStyle"));y&&h.unshift(y);var x=c==="richText"?`

`:"<br/>",b=h.join(x);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(e,u)?this._updatePosition(o,g,l[0],l[1],this._tooltipContent,u):this._showTooltipContent(o,b,u,Math.random()+"",l[0],l[1],g,null,p)})},t.prototype._showSeriesItemTooltip=function(e,a,n){var s=this._ecModel,l=Xe(a),o=l.seriesIndex,c=s.getSeriesByIndex(o),u=l.dataModel||c,d=l.dataIndex,h=l.dataType,p=u.getData(h),g=this._renderMode,v=e.positionDefault,y=$p([p.getItemModel(d),u,c&&(c.coordinateSystem||{}).model],this._tooltipModel,v?{position:v}:null),x=y.get("trigger");if(!(x!=null&&x!=="item")){var b=u.getDataParams(d,h),N=new lj;b.marker=N.makeTooltipMarker("item",Du(b.color),g);var w=HL(u.formatTooltip(d,!1,h)),S=y.get("order"),T=y.get("valueFormatter"),A=w.frag,C=A?$L(T?ie({valueFormatter:T},A):A,N,g,S,s.get("useUTC"),y.get("textStyle")):w.text,M="item_"+u.name+"_"+d;this._showOrMove(y,function(){this._showTooltipContent(y,C,b,M,e.offsetX,e.offsetY,e.position,e.target,N)}),n({type:"showTip",dataIndexInside:d,dataIndex:p.getRawIndex(d),seriesIndex:o,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,a,n){var s=this._renderMode==="html",l=Xe(a),o=l.tooltipConfig,c=o.option||{},u=c.encodeHTMLContent;if(je(c)){var d=c;c={content:d,formatter:d},u=!0}u&&s&&c.content&&(c=Oe(c),c.content=Oa(c.content));var h=[c],p=this._ecModel.getComponent(l.componentMainType,l.componentIndex);p&&h.push(p),h.push({formatter:c.content});var g=e.positionDefault,v=$p(h,this._tooltipModel,g?{position:g}:null),y=v.get("content"),x=Math.random()+"",b=new lj;this._showOrMove(v,function(){var N=Oe(v.get("formatterParams")||{});this._showTooltipContent(v,y,N,x,e.offsetX,e.offsetY,e.position,a,b)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,a,n,s,l,o,c,u,d){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var h=this._tooltipContent;h.setEnterable(e.get("enterable"));var p=e.get("formatter");c=c||e.get("position");var g=a,v=this._getNearestPoint([l,o],n,e.get("trigger"),e.get("borderColor"),e.get("defaultBorderColor",!0)),y=v.color;if(p)if(je(p)){var x=e.ecModel.get("useUTC"),b=de(n)?n[0]:n,N=b&&b.axisType&&b.axisType.indexOf("time")>=0;g=p,N&&(g=Lm(b.axisValue,g,x)),g=OT(g,n,!0)}else if(Le(p)){var w=we(function(S,T){S===this._ticket&&(h.setContent(T,d,e,y,c),this._updatePosition(e,c,l,o,h,n,u))},this);this._ticket=s,g=p(n,s,w)}else g=p;h.setContent(g,d,e,y,c),h.show(e,y),this._updatePosition(e,c,l,o,h,n,u)}},t.prototype._getNearestPoint=function(e,a,n,s,l){if(n==="axis"||de(a))return{color:s||l};if(!de(a))return{color:s||a.color||a.borderColor}},t.prototype._updatePosition=function(e,a,n,s,l,o,c){var u=this._api.getWidth(),d=this._api.getHeight();a=a||e.get("position");var h=l.getSize(),p=e.get("align"),g=e.get("verticalAlign"),v=c&&c.getBoundingRect().clone();if(c&&v.applyTransform(c.transform),Le(a)&&(a=a([n,s],o,l.el,v,{viewSize:[u,d],contentSize:h.slice()})),de(a))n=Ne(a[0],u),s=Ne(a[1],d);else if(Ue(a)){var y=a;y.width=h[0],y.height=h[1];var x=rr(y,{width:u,height:d});n=x.x,s=x.y,p=null,g=null}else if(je(a)&&c){var b=vme(a,v,h,e.get("borderWidth"));n=b[0],s=b[1]}else{var b=gme(n,s,l,u,d,p?null:20,g?null:20);n=b[0],s=b[1]}if(p&&(n-=CO(p)?h[0]/2:p==="right"?h[0]:0),g&&(s-=CO(g)?h[1]/2:g==="bottom"?h[1]:0),qG(e)){var b=mme(n,s,l,u,d);n=b[0],s=b[1]}l.moveTo(n,s)},t.prototype._updateContentNotChangedOnAxis=function(e,a){var n=this._lastDataByCoordSys,s=this._cbParamsList,l=!!n&&n.length===e.length;return l&&B(n,function(o,c){var u=o.dataByAxis||[],d=e[c]||{},h=d.dataByAxis||[];l=l&&u.length===h.length,l&&B(u,function(p,g){var v=h[g]||{},y=p.seriesDataIndices||[],x=v.seriesDataIndices||[];l=l&&p.value===v.value&&p.axisType===v.axisType&&p.axisId===v.axisId&&y.length===x.length,l&&B(y,function(b,N){var w=x[N];l=l&&b.seriesIndex===w.seriesIndex&&b.dataIndex===w.dataIndex}),s&&B(p.seriesDataIndices,function(b){var N=b.seriesIndex,w=a[N],S=s[N];w&&S&&S.data!==w.data&&(l=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=a,!!l},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,a){pt.node||!a.getDom()||(Zg(this,"_updatePosition"),this._tooltipContent.dispose(),lC("itemTooltip",a))},t.type="tooltip",t})(Yt);function $p(r,t,e){var a=t.ecModel,n;e?(n=new dt(e,a,a),n=new dt(t.option,n,a)):n=t;for(var s=r.length-1;s>=0;s--){var l=r[s];l&&(l instanceof dt&&(l=l.get("tooltip",!0)),je(l)&&(l={formatter:l}),l&&(n=new dt(l,n,a)))}return n}function SO(r,t){return r.dispatchAction||we(t.dispatchAction,t)}function gme(r,t,e,a,n,s,l){var o=e.getSize(),c=o[0],u=o[1];return s!=null&&(r+c+s+2>a?r-=c+s:r+=s),l!=null&&(t+u+l>n?t-=u+l:t+=l),[r,t]}function mme(r,t,e,a,n){var s=e.getSize(),l=s[0],o=s[1];return r=Math.min(r+l,a)-l,t=Math.min(t+o,n)-o,r=Math.max(r,0),t=Math.max(t,0),[r,t]}function vme(r,t,e,a){var n=e[0],s=e[1],l=Math.ceil(Math.SQRT2*a)+8,o=0,c=0,u=t.width,d=t.height;switch(r){case"inside":o=t.x+u/2-n/2,c=t.y+d/2-s/2;break;case"top":o=t.x+u/2-n/2,c=t.y-s-l;break;case"bottom":o=t.x+u/2-n/2,c=t.y+d+l;break;case"left":o=t.x-n-l,c=t.y+d/2-s/2;break;case"right":o=t.x+u+l,c=t.y+d/2-s/2}return[o,c]}function CO(r){return r==="center"||r==="middle"}function xme(r,t,e){var a=nT(r).queryOptionMap,n=a.keys()[0];if(!(!n||n==="series")){var s=Kh(t,n,a.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),l=s.models[0];if(l){var o=e.getViewOfComponentModel(l),c;if(o.group.traverse(function(u){var d=Xe(u).tooltipConfig;if(d&&d.name===r.name)return c=u,!0}),c)return{componentMainType:n,componentIndex:l.componentIndex,el:c}}}}function yme(r){st(Gm),r.registerComponentModel(tme),r.registerComponentView(pme),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},vr),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},vr)}var bme=["rect","polygon","keep","clear"];function _me(r,t){var e=Ft(r?r.brush:[]);if(e.length){var a=[];B(e,function(c){var u=c.hasOwnProperty("toolbox")?c.toolbox:[];u instanceof Array&&(a=a.concat(u))});var n=r&&r.toolbox;de(n)&&(n=n[0]),n||(n={feature:{}},r.toolbox=[n]);var s=n.feature||(n.feature={}),l=s.brush||(s.brush={}),o=l.type||(l.type=[]);o.push.apply(o,a),Nme(o),t&&!o.length&&o.push.apply(o,bme)}}function Nme(r){var t={};B(r,function(e){t[e]=1}),r.length=0,B(t,function(e,a){r.push(a)})}var TO=B;function AO(r){if(r){for(var t in r)if(r.hasOwnProperty(t))return!0}}function mC(r,t,e){var a={};return TO(t,function(s){var l=a[s]=n();TO(r[s],function(o,c){if(sa.isValidType(c)){var u={type:c,visual:o};e&&e(u,s),l[c]=new sa(u),c==="opacity"&&(u=Oe(u),u.type="colorAlpha",l.__hidden.__alphaForOpacity=new sa(u))}})}),a;function n(){var s=function(){};s.prototype.__hidden=s.prototype;var l=new s;return l}}function QG(r,t,e){var a;B(e,function(n){t.hasOwnProperty(n)&&AO(t[n])&&(a=!0)}),a&&B(e,function(n){t.hasOwnProperty(n)&&AO(t[n])?r[n]=Oe(t[n]):delete r[n]})}function jme(r,t,e,a,n,s){var l={};B(r,function(h){var p=sa.prepareVisualTypes(t[h]);l[h]=p});var o;function c(h){return WT(e,o,h)}function u(h,p){XB(e,o,h,p)}e.each(d);function d(h,p){o=h;var g=e.getRawDataItem(o);if(!(g&&g.visualMap===!1))for(var v=a.call(n,h),y=t[v],x=l[v],b=0,N=x.length;b<N;b++){var w=x[b];y[w]&&y[w].applyVisual(h,c,u)}}}function wme(r,t,e,a){var n={};return B(r,function(s){var l=sa.prepareVisualTypes(t[s]);n[s]=l}),{progress:function(l,o){var c;a!=null&&(c=o.getDimensionIndex(a));function u(T){return WT(o,h,T)}function d(T,A){XB(o,h,T,A)}for(var h,p=o.getStore();(h=l.next())!=null;){var g=o.getRawDataItem(h);if(!(g&&g.visualMap===!1))for(var v=a!=null?p.get(c,h):h,y=e(v),x=t[y],b=n[y],N=0,w=b.length;N<w;N++){var S=b[N];x[S]&&x[S].applyVisual(v,u,d)}}}}}function Sme(r){var t=r.brushType,e={point:function(a){return EO[t].point(a,e,r)},rect:function(a){return EO[t].rect(a,e,r)}};return e}var EO={lineX:DO(0),lineY:DO(1),rect:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])},rect:function(r,t,e){return r&&e.boundingRect.intersect(r)}},polygon:{point:function(r,t,e){return r&&e.boundingRect.contain(r[0],r[1])&&Xc(e.range,r[0],r[1])},rect:function(r,t,e){var a=e.range;if(!r||a.length<=1)return!1;var n=r.x,s=r.y,l=r.width,o=r.height,c=a[0];if(Xc(a,n,s)||Xc(a,n+l,s)||Xc(a,n,s+o)||Xc(a,n+l,s+o)||We.create(r).contain(c[0],c[1])||sg(n,s,n+l,s,a)||sg(n,s,n,s+o,a)||sg(n+l,s,n+l,s+o,a)||sg(n,s+o,n+l,s+o,a))return!0}}};function DO(r){var t=["x","y"],e=["width","height"];return{point:function(a,n,s){if(a){var l=s.range,o=a[r];return qp(o,l)}},rect:function(a,n,s){if(a){var l=s.range,o=[a[t[r]],a[t[r]]+a[e[r]]];return o[1]<o[0]&&o.reverse(),qp(o[0],l)||qp(o[1],l)||qp(l[0],o)||qp(l[1],o)}}}}function qp(r,t){return t[0]<=r&&r<=t[1]}var MO=["inBrush","outOfBrush"],Tw="__ecBrushSelect",vC="__ecInBrushSelectEvent";function JG(r){r.eachComponent({mainType:"brush"},function(t){var e=t.brushTargetManager=new fE(t.option,r);e.setInputRanges(t.areas,r)})}function Cme(r,t,e){var a=[],n,s;r.eachComponent({mainType:"brush"},function(l){e&&e.type==="takeGlobalCursor"&&l.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),JG(r),r.eachComponent({mainType:"brush"},function(l,o){var c={brushId:l.id,brushIndex:o,brushName:l.name,areas:Oe(l.areas),selected:[]};a.push(c);var u=l.option,d=u.brushLink,h=[],p=[],g=[],v=!1;o||(n=u.throttleType,s=u.throttleDelay);var y=pe(l.areas,function(T){var A=Dme[T.brushType],C=Ge({boundingRect:A?A(T):void 0},T);return C.selectors=Sme(C),C}),x=mC(l.option,MO,function(T){T.mappingMethod="fixed"});de(d)&&B(d,function(T){h[T]=1});function b(T){return d==="all"||!!h[T]}function N(T){return!!T.length}r.eachSeries(function(T,A){var C=g[A]=[];T.subType==="parallel"?w(T,A):S(T,A,C)});function w(T,A){var C=T.coordinateSystem;v=v||C.hasAxisBrushed(),b(A)&&C.eachActiveState(T.getData(),function(M,R){M==="active"&&(p[R]=1)})}function S(T,A,C){if(!(!T.brushSelector||Eme(l,A))&&(B(y,function(R){l.brushTargetManager.controlSeries(R,T,r)&&C.push(R),v=v||N(C)}),b(A)&&N(C))){var M=T.getData();M.each(function(R){RO(T,C,M,R)&&(p[R]=1)})}}r.eachSeries(function(T,A){var C={seriesId:T.id,seriesIndex:A,seriesName:T.name,dataIndex:[]};c.selected.push(C);var M=g[A],R=T.getData(),k=b(A)?function(L){return p[L]?(C.dataIndex.push(R.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return RO(T,M,R,L)?(C.dataIndex.push(R.getRawIndex(L)),"inBrush"):"outOfBrush"};(b(A)?v:N(M))&&jme(MO,x,R,k)})}),Tme(t,n,s,a,e)}function Tme(r,t,e,a,n){if(n){var s=r.getZr();if(!s[vC]){s[Tw]||(s[Tw]=Ame);var l=cf(s,Tw,e,t);l(r,a)}}}function Ame(r,t){if(!r.isDisposed()){var e=r.getZr();e[vC]=!0,r.dispatchAction({type:"brushSelect",batch:t}),e[vC]=!1}}function RO(r,t,e,a){for(var n=0,s=t.length;n<s;n++){var l=t[n];if(r.brushSelector(a,e,l.selectors,l))return!0}}function Eme(r,t){var e=r.option.seriesIndex;return e!=null&&e!=="all"&&(de(e)?tt(e,t)<0:t!==e)}var Dme={rect:function(r){return LO(r.range)},polygon:function(r){for(var t,e=r.range,a=0,n=e.length;a<n;a++){t=t||[[1/0,-1/0],[1/0,-1/0]];var s=e[a];s[0]<t[0][0]&&(t[0][0]=s[0]),s[0]>t[0][1]&&(t[0][1]=s[0]),s[1]<t[1][0]&&(t[1][0]=s[1]),s[1]>t[1][1]&&(t[1][1]=s[1])}return t&&LO(t)}};function LO(r){return new We(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var Mme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){this.ecModel=e,this.api=a,this.model,(this._brushController=new zA(a.getZr())).on("brush",we(this._onBrush,this)).mount()},t.prototype.render=function(e,a,n,s){this.model=e,this._updateController(e,a,n,s)},t.prototype.updateTransform=function(e,a,n,s){JG(a),this._updateController(e,a,n,s)},t.prototype.updateVisual=function(e,a,n,s){this.updateTransform(e,a,n,s)},t.prototype.updateView=function(e,a,n,s){this._updateController(e,a,n,s)},t.prototype._updateController=function(e,a,n,s){(!s||s.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var a=this.model.id,n=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:a,areas:Oe(n),$from:a}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:a,areas:Oe(n),$from:a})},t.type="brush",t})(Yt),Rme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.areas=[],e.brushOption={},e}return t.prototype.optionUpdated=function(e,a){var n=this.option;!a&&QG(n,e,["inBrush","outOfBrush"]);var s=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:this.option.defaultOutOfBrushColor},s.hasOwnProperty("liftZ")||(s.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=pe(e,function(a){return IO(this.option,a)},this))},t.prototype.setBrushOption=function(e){this.brushOption=IO(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:ee.color.backgroundTint,borderColor:ee.color.borderTint},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4,defaultOutOfBrushColor:ee.color.disabled},t})(ct);function IO(r,t){return rt({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new dt(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},t,!0)}var Lme=["rect","polygon","lineX","lineY","keep","clear"],Ime=(function(r){re(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(e,a,n){var s,l,o;a.eachComponent({mainType:"brush"},function(c){s=c.brushType,l=c.brushOption.brushMode||"single",o=o||!!c.areas.length}),this._brushType=s,this._brushMode=l,B(e.get("type",!0),function(c){e.setIconStatus(c,(c==="keep"?l==="multiple":c==="clear"?o:c===s)?"emphasis":"normal")})},t.prototype.updateView=function(e,a,n){this.render(e,a,n)},t.prototype.getIcons=function(){var e=this.model,a=e.get("icon",!0),n={};return B(e.get("type",!0),function(s){a[s]&&(n[s]=a[s])}),n},t.prototype.onclick=function(e,a,n){var s=this._brushType,l=this._brushMode;n==="clear"?(a.dispatchAction({type:"axisAreaSelect",intervals:[]}),a.dispatchAction({type:"brush",command:"clear",areas:[]})):a.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?s:s===n?!1:n,brushMode:n==="keep"?l==="multiple"?"single":"multiple":l}})},t.getDefaultOption=function(e){var a={show:!0,type:Lme.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return a},t})(as);function kme(r){r.registerComponentView(Mme),r.registerComponentModel(Rme),r.registerPreprocessor(_me),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,Cme),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(a){a.setAreas(t.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},vr),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},vr),uh("brush",Ime)}var Ome=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:ee.size.m,backgroundColor:ee.color.transparent,borderColor:ee.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:ee.color.primary},subtextStyle:{fontSize:12,color:ee.color.quaternary}},t})(ct),Pme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){if(this.group.removeAll(),!!e.get("show")){var s=this.group,l=e.getModel("textStyle"),o=e.getModel("subtextStyle"),c=e.get("textAlign"),u=Me(e.get("textBaseline"),e.get("textVerticalAlign")),d=new vt({style:Gt(l,{text:e.get("text"),fill:l.getTextColor()},{disableBox:!0}),z2:10}),h=d.getBoundingRect(),p=e.get("subtext"),g=new vt({style:Gt(o,{text:p,fill:o.getTextColor(),y:h.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),v=e.get("link"),y=e.get("sublink"),x=e.get("triggerEvent",!0);d.silent=!v&&!x,g.silent=!y&&!x,v&&d.on("click",function(){gy(v,"_"+e.get("target"))}),y&&g.on("click",function(){gy(y,"_"+e.get("subtarget"))}),Xe(d).eventData=Xe(g).eventData=x?{componentType:"title",componentIndex:e.componentIndex}:null,s.add(d),p&&s.add(g);var b=s.getBoundingRect(),N=e.getBoxLayoutParams();N.width=b.width,N.height=b.height;var w=Kr(e,n),S=rr(N,w.refContainer,e.get("padding"));c||(c=e.get("left")||e.get("right"),c==="middle"&&(c="center"),c==="right"?S.x+=S.width:c==="center"&&(S.x+=S.width/2)),u||(u=e.get("top")||e.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?S.y+=S.height:u==="middle"&&(S.y+=S.height/2),u=u||"top"),s.x=S.x,s.y=S.y,s.markRedraw();var T={align:c,verticalAlign:u};d.setStyle(T),g.setStyle(T),b=s.getBoundingRect();var A=S.margin,C=e.getItemStyle(["color","opacity"]);C.fill=e.get("backgroundColor");var M=new it({shape:{x:b.x-A[3],y:b.y-A[0],width:b.width+A[1]+A[3],height:b.height+A[0]+A[2],r:e.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});s.add(M)}},t.type="title",t})(Yt);function zme(r){r.registerComponentModel(Ome),r.registerComponentView(Pme)}var kO=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n),this._initData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var a=this._data.count();this.option.loop?e=(e%a+a)%a:(e>=a&&(e=a-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e=this.option,a=e.data||[],n=e.axisType,s=this._names=[],l;n==="category"?(l=[],B(a,function(u,d){var h=$r(Zh(u),""),p;Ue(u)?(p=Oe(u),p.value=d):p=d,l.push(p),s.push(h)})):l=a;var o={category:"ordinal",time:"time",value:"number"}[n]||"number",c=this._data=new Ha([{name:"value",type:o}],this);c.initData(l,s)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:ee.size.m,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:ee.color.secondary},data:[]},t})(ct),eU=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline.slider",t.defaultOption=$o(kO.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:ee.color.border,borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:ee.color.accent10},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:ee.color.tertiary},itemStyle:{color:ee.color.accent20,borderWidth:0},checkpointStyle:{symbol:"circle",symbolSize:15,color:ee.color.accent50,borderColor:ee.color.accent50,borderWidth:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z",stopIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z",nextIcon:"path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z",prevIcon:"path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z",prevBtnSize:18,nextBtnSize:18,color:ee.color.accent50,borderColor:ee.color.accent50,borderWidth:0},emphasis:{label:{show:!0,color:ee.color.accent60},itemStyle:{color:ee.color.accent60,borderColor:ee.color.accent60},controlStyle:{color:ee.color.accent70,borderColor:ee.color.accent70}},progress:{lineStyle:{color:ee.color.accent30},itemStyle:{color:ee.color.accent40}},data:[]}),t})(kO);yr(eU,Ib.prototype);var Bme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline",t})(Yt),Vme=(function(r){re(t,r);function t(e,a,n,s){var l=r.call(this,e,a,n)||this;return l.type=s||"value",l}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t})(vs),Aw=Math.PI,OO=ut(),Hme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){this.api=a},t.prototype.render=function(e,a,n){if(this.model=e,this.api=n,this.ecModel=a,this.group.removeAll(),e.get("show",!0)){var s=this._layout(e,n),l=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(s,e);e.formatTooltip=function(u){var d=c.scale.getLabel({value:u});return Br("nameValue",{noName:!0,value:d})},B(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](s,l,c,e)},this),this._renderAxisLabel(s,o,c,e),this._position(s,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,a){var n=e.get(["label","position"]),s=e.get("orient"),l=Ume(e,a),o;n==null||n==="auto"?o=s==="horizontal"?l.y+l.height/2<a.getHeight()/2?"-":"+":l.x+l.width/2<a.getWidth()/2?"+":"-":je(n)?o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][n]:o=n;var c={horizontal:"center",vertical:o>=0||o==="+"?"left":"right"},u={horizontal:o>=0||o==="+"?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:Aw/2},h=s==="vertical"?l.height:l.width,p=e.getModel("controlStyle"),g=p.get("show",!0),v=g?p.get("itemSize"):0,y=g?p.get("itemGap"):0,x=v+y,b=e.get(["label","rotate"])||0;b=b*Aw/180;var N,w,S,T=p.get("position",!0),A=g&&p.get("showPlayBtn",!0),C=g&&p.get("showPrevBtn",!0),M=g&&p.get("showNextBtn",!0),R=0,k=h;T==="left"||T==="bottom"?(A&&(N=[0,0],R+=x),C&&(w=[R,0],R+=x),M&&(S=[k-v,0],k-=x)):(A&&(N=[k-v,0],k-=x),C&&(w=[0,0],R+=x),M&&(S=[k-v,0],k-=x));var L=[R,k];return e.get("inverse")&&L.reverse(),{viewRect:l,mainLength:h,orient:s,rotation:d[s],labelRotation:b,labelPosOpt:o,labelAlign:e.get(["label","align"])||c[s],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||u[s],playPosition:N,prevBtnPosition:w,nextBtnPosition:S,axisExtent:L,controlSize:v,controlGap:y}},t.prototype._position=function(e,a){var n=this._mainGroup,s=this._labelGroup,l=e.viewRect;if(e.orient==="vertical"){var o=na(),c=l.x,u=l.y+l.height;zs(o,o,[-c,-u]),Ml(o,o,-Aw/2),zs(o,o,[c,u]),l=l.clone(),l.applyTransform(o)}var d=N(l),h=N(n.getBoundingRect()),p=N(s.getBoundingRect()),g=[n.x,n.y],v=[s.x,s.y];v[0]=g[0]=d[0][0];var y=e.labelPosOpt;if(y==null||je(y)){var x=y==="+"?0:1;w(g,h,d,1,x),w(v,p,d,1,1-x)}else{var x=y>=0?0:1;w(g,h,d,1,x),v[1]=g[1]+y}n.setPosition(g),s.setPosition(v),n.rotation=s.rotation=e.rotation,b(n),b(s);function b(S){S.originX=d[0][0]-S.x,S.originY=d[1][0]-S.y}function N(S){return[[S.x,S.x+S.width],[S.y,S.y+S.height]]}function w(S,T,A,C,M){S[C]+=A[C][M]-T[C][M]}},t.prototype._createAxis=function(e,a){var n=a.getData(),s=a.get("axisType"),l=Gme(a,s);l.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var o=n.getDataExtent("value");l.setExtent(o[0],o[1]),l.calcNiceTicks();var c=new Vme("value",l,e.axisExtent,s);return c.model=a,c},t.prototype._createGroup=function(e){var a=this[e]=new Pe;return this.group.add(a),a},t.prototype._renderAxisLine=function(e,a,n,s){var l=n.getExtent();if(s.get(["lineStyle","show"])){var o=new Tr({shape:{x1:l[0],y1:0,x2:l[1],y2:0},style:ie({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});a.add(o);var c=this._progressLine=new Tr({shape:{x1:l[0],x2:this._currentPointer?this._currentPointer.x:l[0],y1:0,y2:0},style:Ge({lineCap:"round",lineWidth:o.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});a.add(c)}},t.prototype._renderAxisTick=function(e,a,n,s){var l=this,o=s.getData(),c=n.scale.getTicks();this._tickSymbols=[],B(c,function(u){var d=n.dataToCoord(u.value),h=o.getItemModel(u.value),p=h.getModel("itemStyle"),g=h.getModel(["emphasis","itemStyle"]),v=h.getModel(["progress","itemStyle"]),y={x:d,y:0,onclick:we(l._changeTimeline,l,u.value)},x=PO(h,p,a,y);x.ensureState("emphasis").style=g.getItemStyle(),x.ensureState("progress").style=v.getItemStyle(),Mo(x);var b=Xe(x);h.get("tooltip")?(b.dataIndex=u.value,b.dataModel=s):b.dataIndex=b.dataModel=null,l._tickSymbols.push(x)})},t.prototype._renderAxisLabel=function(e,a,n,s){var l=this,o=n.getLabelModel();if(o.get("show")){var c=s.getData(),u=n.getViewLabels();this._tickLabels=[],B(u,function(d){var h=d.tickValue,p=c.getItemModel(h),g=p.getModel("label"),v=p.getModel(["emphasis","label"]),y=p.getModel(["progress","label"]),x=n.dataToCoord(d.tickValue),b=new vt({x,y:0,rotation:e.labelRotation-e.rotation,onclick:we(l._changeTimeline,l,h),silent:!1,style:Gt(g,{text:d.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});b.ensureState("emphasis").style=Gt(v),b.ensureState("progress").style=Gt(y),a.add(b),Mo(b),OO(b).dataIndex=h,l._tickLabels.push(b)})}},t.prototype._renderControl=function(e,a,n,s){var l=e.controlSize,o=e.rotation,c=s.getModel("controlStyle").getItemStyle(),u=s.getModel(["emphasis","controlStyle"]).getItemStyle(),d=s.getPlayState(),h=s.get("inverse",!0);p(e.nextBtnPosition,"next",we(this._changeTimeline,this,h?"-":"+")),p(e.prevBtnPosition,"prev",we(this._changeTimeline,this,h?"+":"-")),p(e.playPosition,d?"stop":"play",we(this._handlePlayClick,this,!d),!0);function p(g,v,y,x){if(g){var b=Bs(Me(s.get(["controlStyle",v+"BtnSize"]),l),l),N=[0,-b/2,b,b],w=Fme(s,v+"Icon",N,{x:g[0],y:g[1],originX:l/2,originY:0,rotation:x?-o:0,rectHover:!0,style:c,onclick:y});w.ensureState("emphasis").style=u,a.add(w),Mo(w)}}},t.prototype._renderCurrentPointer=function(e,a,n,s){var l=s.getData(),o=s.getCurrentIndex(),c=l.getItemModel(o).getModel("checkpointStyle"),u=this,d={onCreate:function(h){h.draggable=!0,h.drift=we(u._handlePointerDrag,u),h.ondragend=we(u._handlePointerDragend,u),zO(h,u._progressLine,o,n,s,!0)},onUpdate:function(h){zO(h,u._progressLine,o,n,s)}};this._currentPointer=PO(c,c,this._mainGroup,{},this._currentPointer,d)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,a,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,a){var n=this._toAxisCoord(e)[0],s=this._axis,l=Mn(s.getExtent().slice());n>l[1]&&(n=l[1]),n<l[0]&&(n=l[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=n,o.dirty());var c=this._findNearestTick(n),u=this.model;(a||c!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(c)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var a=e.model;e._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){var a=this._mainGroup.getLocalTransform();return Os(e,a,!0)},t.prototype._findNearestTick=function(e){var a=this.model.getData(),n=1/0,s,l=this._axis;return a.each(["value"],function(o,c){var u=l.dataToCoord(o),d=Math.abs(u-e);d<n&&(n=d,s=c)}),s},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var a=this.model.getCurrentIndex();e==="+"?e=a+1:e==="-"&&(e=a-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),a=this._tickSymbols,n=this._tickLabels;if(a)for(var s=0;s<a.length;s++)a&&a[s]&&a[s].toggleState("progress",s<e);if(n)for(var s=0;s<n.length;s++)n&&n[s]&&n[s].toggleState("progress",OO(n[s]).dataIndex<=e)},t.type="timeline.slider",t})(Bme);function Gme(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new Ph({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new oA({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new El}}function Ume(r,t){return rr(r.getBoxLayoutParams(),Kr(r,t).refContainer,r.get("padding"))}function Fme(r,t,e,a){var n=a.style,s=rf(r.get(["controlStyle",t]),a||{},new We(e[0],e[1],e[2],e[3]));return n&&s.setStyle(n),s}function PO(r,t,e,a,n,s){var l=t.get("color");if(n)n.setColor(l),e.add(n),s&&s.onUpdate(n);else{var o=r.get("symbol");n=Er(o,-1,-1,2,2,l),n.setStyle("strokeNoScale",!0),e.add(n),s&&s.onCreate(n)}var c=t.getItemStyle(["color"]);n.setStyle(c),a=rt({rectHover:!0,z2:100},a,!0);var u=uf(r.get("symbolSize"));a.scaleX=u[0]/2,a.scaleY=u[1]/2;var d=Hu(r.get("symbolOffset"),u);d&&(a.x=(a.x||0)+d[0],a.y=(a.y||0)+d[1]);var h=r.get("symbolRotate");return a.rotation=(h||0)*Math.PI/180||0,n.attr(a),n.updateTransform(),n}function zO(r,t,e,a,n,s){if(!r.dragging){var l=n.getModel("checkpointStyle"),o=a.dataToCoord(n.getData().get("value",e));if(s||!l.get("animation",!0))r.attr({x:o,y:0}),t&&t.attr({shape:{x2:o}});else{var c={duration:l.get("animationDuration",!0),easing:l.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:o,y:0},c),t&&t.animateTo({shape:{x2:o}},c)}}}function Yme(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,a){var n=e.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),a.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Ge({currentIndex:n.option.currentIndex},t)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var a=e.getComponent("timeline");a&&t.playState!=null&&a.setPlayState(t.playState)})}function Wme(r){var t=r&&r.timeline;de(t)||(t=t?[t]:[]),B(t,function(e){e&&$me(e)})}function $me(r){var t=r.type,e={number:"value",time:"time"};if(e[t]&&(r.axisType=e[t],delete r.type),BO(r),Qc(r,"controlPosition")){var a=r.controlStyle||(r.controlStyle={});Qc(a,"position")||(a.position=r.controlPosition),a.position==="none"&&!Qc(a,"show")&&(a.show=!1,delete a.position),delete r.controlPosition}B(r.data||[],function(n){Ue(n)&&!de(n)&&(!Qc(n,"value")&&Qc(n,"name")&&(n.value=n.name),BO(n))})}function BO(r){var t=r.itemStyle||(r.itemStyle={}),e=t.emphasis||(t.emphasis={}),a=r.label||r.label||{},n=a.normal||(a.normal={}),s={normal:1,emphasis:1};B(a,function(l,o){!s[o]&&!Qc(n,o)&&(n[o]=l)}),e.label&&!Qc(a,"emphasis")&&(a.emphasis=e.label,delete e.label)}function Qc(r,t){return r.hasOwnProperty(t)}function qme(r){r.registerComponentModel(eU),r.registerComponentView(Hme),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),Yme(r),r.registerPreprocessor(Wme)}function mE(r,t){if(!r)return!1;for(var e=de(r)?r:[r],a=0;a<e.length;a++)if(e[a]&&e[a][t])return!0;return!1}function ux(r){wu(r,"label",["show"])}var dx=ut(),Ti=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e.preventAutoZ=!0,e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(pt.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,a){this._mergeOption(e,a,!1,!1)},t.prototype._mergeOption=function(e,a,n,s){var l=this.mainType;n||a.eachSeries(function(o){var c=o.get(this.mainType,!0),u=dx(o)[l];if(!c||!c.data){dx(o)[l]=null;return}u?u._mergeOption(c,a,!0):(s&&ux(c),B(c.data,function(d){d instanceof Array?(ux(d[0]),ux(d[1])):ux(d)}),u=this.createMarkerModelFromSeries(c,this,a),ie(u,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),u.__hostSeries=o),dx(o)[l]=u},this)},t.prototype.formatTooltip=function(e,a,n){var s=this.getData(),l=this.getRawValue(e),o=s.getName(e);return Br("section",{header:this.name,blocks:[Br("nameValue",{name:o,value:l,noName:!o,noValue:l==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.prototype.getDataParams=function(e,a){var n=Ib.prototype.getDataParams.call(this,e,a),s=this.__hostSeries;return s&&(n.seriesId=s.id,n.seriesName=s.name,n.seriesType=s.subType),n},t.getMarkerModelFromSeries=function(e,a){return dx(e)[a]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t})(ct);yr(Ti,Ib.prototype);var Xme=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,a,n){return new t(e,a,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t})(Ti);function xC(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function Zme(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function hx(r,t,e,a,n,s,l){var o=[],c=Al(t,n),u=c?t.getCalculationInfo("stackResultDimension"):n,d=Zy(t,u,r),h=t.hostModel,p=h.indicesOfNearest(e,u,d)[0];o[s]=t.get(a,p),o[l]=t.get(u,p);var g=t.get(n,p),v=Ds(t.get(n,p));return v=Math.min(v,20),v>=0&&(o[l]=+o[l].toFixed(v)),[o,g]}var fx={min:et(hx,"min"),max:et(hx,"max"),average:et(hx,"average"),median:et(hx,"median")};function hm(r,t){if(t){var e=r.getData(),a=r.coordinateSystem,n=a&&a.dimensions;if(!Zme(t)&&!de(t.coord)&&de(n)){var s=tU(t,e,a,r);if(t=Oe(t),t.type&&fx[t.type]&&s.baseAxis&&s.valueAxis){var l=tt(n,s.baseAxis.dim),o=tt(n,s.valueAxis.dim),c=fx[t.type](e,s.valueAxis.dim,s.baseDataDim,s.valueDataDim,l,o);t.coord=c[0],t.value=c[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!de(n)){t.coord=[];var u=r.getBaseAxis();if(u&&t.type&&fx[t.type]){var d=a.getOtherAxis(u);d&&(t.value=Zy(e,e.mapDimension(d.dim),t.type))}}else for(var h=t.coord,p=0;p<2;p++)fx[h[p]]&&(h[p]=Zy(e,e.mapDimension(n[p]),h[p]));return t}}function tU(r,t,e,a){var n={};return r.valueIndex!=null||r.valueDim!=null?(n.valueDataDim=r.valueIndex!=null?t.getDimension(r.valueIndex):r.valueDim,n.valueAxis=e.getAxis(Kme(a,n.valueDataDim)),n.baseAxis=e.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=a.getBaseAxis(),n.valueAxis=e.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function Kme(r,t){var e=r.getData().getDimensionInfo(t);return e&&e.coordDim}function fm(r,t){return r&&r.containData&&t.coord&&!xC(t)?r.containData(t.coord):!0}function Qme(r,t,e){return r&&r.containZone&&t.coord&&e.coord&&!xC(t)&&!xC(e)?r.containZone(t.coord,e.coord):!0}function rU(r,t){return r?function(e,a,n,s){var l=s<2?e.coord&&e.coord[s]:e.value;return Io(l,t[s])}:function(e,a,n,s){return Io(e.value,t[s])}}function Zy(r,t,e){if(e==="average"){var a=0,n=0;return r.each(t,function(s,l){isNaN(s)||(a+=s,n++)}),a/n}else return e==="median"?r.getMedian(t):r.getDataExtent(t)[e==="max"?1:0]}var Ew=ut(),vE=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this.markerGroupMap=De()},t.prototype.render=function(e,a,n){var s=this,l=this.markerGroupMap;l.each(function(o){Ew(o).keep=!1}),a.eachSeries(function(o){var c=Ti.getMarkerModelFromSeries(o,s.type);c&&s.renderSeries(o,c,a,n)}),l.each(function(o){!Ew(o).keep&&s.group.remove(o.group)}),Jme(a,l,this.type)},t.prototype.markKeep=function(e){Ew(e).keep=!0},t.prototype.toggleBlurSeries=function(e,a){var n=this;B(e,function(s){var l=Ti.getMarkerModelFromSeries(s,n.type);if(l){var o=l.getData();o.eachItemGraphicEl(function(c){c&&(a?v7(c):hT(c))})}})},t.type="marker",t})(Yt);function Jme(r,t,e){r.eachSeries(function(a){var n=Ti.getMarkerModelFromSeries(a,e),s=t.get(a.id);if(n&&s&&s.group){var l=Eu(n),o=l.z,c=l.zlevel;Db(s.group,o,c)}})}function VO(r,t,e){var a=t.coordinateSystem,n=e.getWidth(),s=e.getHeight(),l=a&&a.getArea&&a.getArea();r.each(function(o){var c=r.getItemModel(o),u=c.get("relativeTo")==="coordinate",d=u?l?l.width:0:n,h=u?l?l.height:0:s,p=u&&l?l.x:0,g=u&&l?l.y:0,v,y=Ne(c.get("x"),d)+p,x=Ne(c.get("y"),h)+g;if(!isNaN(y)&&!isNaN(x))v=[y,x];else if(t.getMarkerPosition)v=t.getMarkerPosition(r.getValues(r.dimensions,o));else if(a){var b=r.get(a.dimensions[0],o),N=r.get(a.dimensions[1],o);v=a.dataToPoint([b,N])}isNaN(y)||(v[0]=y),isNaN(x)||(v[1]=x),r.setItemLayout(o,v)})}var eve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,a,n){a.eachSeries(function(s){var l=Ti.getMarkerModelFromSeries(s,"markPoint");l&&(VO(l.getData(),s,n),this.markerGroupMap.get(s.id).updateLayout())},this)},t.prototype.renderSeries=function(e,a,n,s){var l=e.coordinateSystem,o=e.id,c=e.getData(),u=this.markerGroupMap,d=u.get(o)||u.set(o,new zm),h=tve(l,e,a);a.setData(h),VO(a.getData(),e,s),h.each(function(p){var g=h.getItemModel(p),v=g.getShallow("symbol"),y=g.getShallow("symbolSize"),x=g.getShallow("symbolRotate"),b=g.getShallow("symbolOffset"),N=g.getShallow("symbolKeepAspect");if(Le(v)||Le(y)||Le(x)||Le(b)){var w=a.getRawValue(p),S=a.getDataParams(p);Le(v)&&(v=v(w,S)),Le(y)&&(y=y(w,S)),Le(x)&&(x=x(w,S)),Le(b)&&(b=b(w,S))}var T=g.getModel("itemStyle").getItemStyle(),A=g.get("z2"),C=km(c,"color");T.fill||(T.fill=C),h.setItemVisual(p,{z2:Me(A,0),symbol:v,symbolSize:y,symbolRotate:x,symbolOffset:b,symbolKeepAspect:N,style:T})}),d.updateData(h),this.group.add(d.group),h.eachItemGraphicEl(function(p){p.traverse(function(g){Xe(g).dataModel=a})}),this.markKeep(d),d.group.silent=a.get("silent")||e.get("silent")},t.type="markPoint",t})(vE);function tve(r,t,e){var a;r?a=pe(r&&r.dimensions,function(o){var c=t.getData().getDimensionInfo(t.getData().mapDimension(o))||{};return ie(ie({},c),{name:o,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var n=new Ha(a,e),s=pe(e.get("data"),et(hm,t));r&&(s=Ct(s,et(fm,r)));var l=rU(!!r,a);return n.initData(s,null,l),n}function rve(r){r.registerComponentModel(Xme),r.registerComponentView(eve),r.registerPreprocessor(function(t){mE(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var ave=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,a,n){return new t(e,a,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t})(Ti),px=ut(),nve=function(r,t,e,a){var n=r.getData(),s;if(de(a))s=a;else{var l=a.type;if(l==="min"||l==="max"||l==="average"||l==="median"||a.xAxis!=null||a.yAxis!=null){var o=void 0,c=void 0;if(a.yAxis!=null||a.xAxis!=null)o=t.getAxis(a.yAxis!=null?"y":"x"),c=ga(a.yAxis,a.xAxis);else{var u=tU(a,n,t,r);o=u.valueAxis;var d=sA(n,u.valueDataDim);c=Zy(n,d,l)}var h=o.dim==="x"?0:1,p=1-h,g=Oe(a),v={coord:[]};g.type=null,g.coord=[],g.coord[p]=-1/0,v.coord[p]=1/0;var y=e.get("precision");y>=0&&xt(c)&&(c=+c.toFixed(Math.min(y,20))),g.coord[h]=v.coord[h]=c,s=[g,v,{type:l,valueIndex:a.valueIndex,value:c}]}else s=[]}var x=[hm(r,s[0]),hm(r,s[1]),ie({},s[2])];return x[2].type=x[2].type||null,rt(x[2],x[0]),rt(x[2],x[1]),x};function Ky(r){return!isNaN(r)&&!isFinite(r)}function HO(r,t,e,a){var n=1-r,s=a.dimensions[r];return Ky(t[n])&&Ky(e[n])&&t[r]===e[r]&&a.getAxis(s).containData(t[r])}function sve(r,t){if(r.type==="cartesian2d"){var e=t[0].coord,a=t[1].coord;if(e&&a&&(HO(1,e,a,r)||HO(0,e,a,r)))return!0}return fm(r,t[0])&&fm(r,t[1])}function Dw(r,t,e,a,n){var s=a.coordinateSystem,l=r.getItemModel(t),o,c=Ne(l.get("x"),n.getWidth()),u=Ne(l.get("y"),n.getHeight());if(!isNaN(c)&&!isNaN(u))o=[c,u];else{if(a.getMarkerPosition)o=a.getMarkerPosition(r.getValues(r.dimensions,t));else{var d=s.dimensions,h=r.get(d[0],t),p=r.get(d[1],t);o=s.dataToPoint([h,p])}if(Bo(s,"cartesian2d")){var g=s.getAxis("x"),v=s.getAxis("y"),d=s.dimensions;Ky(r.get(d[0],t))?o[0]=g.toGlobalCoord(g.getExtent()[e?0:1]):Ky(r.get(d[1],t))&&(o[1]=v.toGlobalCoord(v.getExtent()[e?0:1]))}isNaN(c)||(o[0]=c),isNaN(u)||(o[1]=u)}r.setItemLayout(t,o)}var ive=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,a,n){a.eachSeries(function(s){var l=Ti.getMarkerModelFromSeries(s,"markLine");if(l){var o=l.getData(),c=px(l).from,u=px(l).to;c.each(function(d){Dw(c,d,!0,s,n),Dw(u,d,!1,s,n)}),o.each(function(d){o.setItemLayout(d,[c.getItemLayout(d),u.getItemLayout(d)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,a,n,s){var l=e.coordinateSystem,o=e.id,c=e.getData(),u=this.markerGroupMap,d=u.get(o)||u.set(o,new OA);this.group.add(d.group);var h=lve(l,e,a),p=h.from,g=h.to,v=h.line;px(a).from=p,px(a).to=g,a.setData(v);var y=a.get("symbol"),x=a.get("symbolSize"),b=a.get("symbolRotate"),N=a.get("symbolOffset");de(y)||(y=[y,y]),de(x)||(x=[x,x]),de(b)||(b=[b,b]),de(N)||(N=[N,N]),h.from.each(function(S){w(p,S,!0),w(g,S,!1)}),v.each(function(S){var T=v.getItemModel(S),A=T.getModel("lineStyle").getLineStyle();v.setItemLayout(S,[p.getItemLayout(S),g.getItemLayout(S)]);var C=T.get("z2");A.stroke==null&&(A.stroke=p.getItemVisual(S,"style").fill),v.setItemVisual(S,{z2:Me(C,0),fromSymbolKeepAspect:p.getItemVisual(S,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(S,"symbolOffset"),fromSymbolRotate:p.getItemVisual(S,"symbolRotate"),fromSymbolSize:p.getItemVisual(S,"symbolSize"),fromSymbol:p.getItemVisual(S,"symbol"),toSymbolKeepAspect:g.getItemVisual(S,"symbolKeepAspect"),toSymbolOffset:g.getItemVisual(S,"symbolOffset"),toSymbolRotate:g.getItemVisual(S,"symbolRotate"),toSymbolSize:g.getItemVisual(S,"symbolSize"),toSymbol:g.getItemVisual(S,"symbol"),style:A})}),d.updateData(v),h.line.eachItemGraphicEl(function(S){Xe(S).dataModel=a,S.traverse(function(T){Xe(T).dataModel=a})});function w(S,T,A){var C=S.getItemModel(T);Dw(S,T,A,e,s);var M=C.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=km(c,"color")),S.setItemVisual(T,{symbolKeepAspect:C.get("symbolKeepAspect"),symbolOffset:Me(C.get("symbolOffset",!0),N[A?0:1]),symbolRotate:Me(C.get("symbolRotate",!0),b[A?0:1]),symbolSize:Me(C.get("symbolSize"),x[A?0:1]),symbol:Me(C.get("symbol",!0),y[A?0:1]),style:M})}this.markKeep(d),d.group.silent=a.get("silent")||e.get("silent")},t.type="markLine",t})(vE);function lve(r,t,e){var a;r?a=pe(r&&r.dimensions,function(u){var d=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ie(ie({},d),{name:u,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var n=new Ha(a,e),s=new Ha(a,e),l=new Ha([],e),o=pe(e.get("data"),et(nve,t,r,e));r&&(o=Ct(o,et(sve,r)));var c=rU(!!r,a);return n.initData(pe(o,function(u){return u[0]}),null,c),s.initData(pe(o,function(u){return u[1]}),null,c),l.initData(pe(o,function(u){return u[2]})),l.hasItemOption=!0,{from:n,to:s,line:l}}function ove(r){r.registerComponentModel(ave),r.registerComponentView(ive),r.registerPreprocessor(function(t){mE(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var cve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,a,n){return new t(e,a,n)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t})(Ti),gx=ut(),uve=function(r,t,e,a){var n=a[0],s=a[1];if(!(!n||!s)){var l=hm(r,n),o=hm(r,s),c=l.coord,u=o.coord;c[0]=ga(c[0],-1/0),c[1]=ga(c[1],-1/0),u[0]=ga(u[0],1/0),u[1]=ga(u[1],1/0);var d=fb([{},l,o]);return d.coord=[l.coord,o.coord],d.x0=l.x,d.y0=l.y,d.x1=o.x,d.y1=o.y,d}};function Qy(r){return!isNaN(r)&&!isFinite(r)}function GO(r,t,e,a){var n=1-r;return Qy(t[n])&&Qy(e[n])}function dve(r,t){var e=t.coord[0],a=t.coord[1],n={coord:e,x:t.x0,y:t.y0},s={coord:a,x:t.x1,y:t.y1};return Bo(r,"cartesian2d")?e&&a&&(GO(1,e,a)||GO(0,e,a))?!0:Qme(r,n,s):fm(r,n)||fm(r,s)}function UO(r,t,e,a,n){var s=a.coordinateSystem,l=r.getItemModel(t),o,c=Ne(l.get(e[0]),n.getWidth()),u=Ne(l.get(e[1]),n.getHeight());if(!isNaN(c)&&!isNaN(u))o=[c,u];else{if(a.getMarkerPosition){var d=r.getValues(["x0","y0"],t),h=r.getValues(["x1","y1"],t),p=s.clampData(d),g=s.clampData(h),v=[];e[0]==="x0"?v[0]=p[0]>g[0]?h[0]:d[0]:v[0]=p[0]>g[0]?d[0]:h[0],e[1]==="y0"?v[1]=p[1]>g[1]?h[1]:d[1]:v[1]=p[1]>g[1]?d[1]:h[1],o=a.getMarkerPosition(v,e,!0)}else{var y=r.get(e[0],t),x=r.get(e[1],t),b=[y,x];s.clampData&&s.clampData(b,b),o=s.dataToPoint(b,!0)}if(Bo(s,"cartesian2d")){var N=s.getAxis("x"),w=s.getAxis("y"),y=r.get(e[0],t),x=r.get(e[1],t);Qy(y)?o[0]=N.toGlobalCoord(N.getExtent()[e[0]==="x0"?0:1]):Qy(x)&&(o[1]=w.toGlobalCoord(w.getExtent()[e[1]==="y0"?0:1]))}isNaN(c)||(o[0]=c),isNaN(u)||(o[1]=u)}return o}var FO=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],hve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,a,n){a.eachSeries(function(s){var l=Ti.getMarkerModelFromSeries(s,"markArea");if(l){var o=l.getData();o.each(function(c){var u=pe(FO,function(h){return UO(o,c,h,s,n)});o.setItemLayout(c,u);var d=o.getItemGraphicEl(c);d.setShape("points",u)})}},this)},t.prototype.renderSeries=function(e,a,n,s){var l=e.coordinateSystem,o=e.id,c=e.getData(),u=this.markerGroupMap,d=u.get(o)||u.set(o,{group:new Pe});this.group.add(d.group),this.markKeep(d);var h=fve(l,e,a);a.setData(h),h.each(function(p){var g=pe(FO,function(k){return UO(h,p,k,e,s)}),v=l.getAxis("x").scale,y=l.getAxis("y").scale,x=v.getExtent(),b=y.getExtent(),N=[v.parse(h.get("x0",p)),v.parse(h.get("x1",p))],w=[y.parse(h.get("y0",p)),y.parse(h.get("y1",p))];Mn(N),Mn(w);var S=!(x[0]>N[1]||x[1]<N[0]||b[0]>w[1]||b[1]<w[0]),T=!S;h.setItemLayout(p,{points:g,allClipped:T});var A=h.getItemModel(p),C=A.getModel("itemStyle").getItemStyle(),M=A.get("z2"),R=km(c,"color");C.fill||(C.fill=R,je(C.fill)&&(C.fill=Vg(C.fill,.4))),C.stroke||(C.stroke=R),h.setItemVisual(p,"style",C),h.setItemVisual(p,"z2",Me(M,0))}),h.diff(gx(d).data).add(function(p){var g=h.getItemLayout(p),v=h.getItemVisual(p,"z2");if(!g.allClipped){var y=new Ma({z2:Me(v,0),shape:{points:g.points}});h.setItemGraphicEl(p,y),d.group.add(y)}}).update(function(p,g){var v=gx(d).data.getItemGraphicEl(g),y=h.getItemLayout(p),x=h.getItemVisual(p,"z2");y.allClipped?v&&d.group.remove(v):(v?Nt(v,{z2:Me(x,0),shape:{points:y.points}},a,p):v=new Ma({shape:{points:y.points}}),h.setItemGraphicEl(p,v),d.group.add(v))}).remove(function(p){var g=gx(d).data.getItemGraphicEl(p);d.group.remove(g)}).execute(),h.eachItemGraphicEl(function(p,g){var v=h.getItemModel(g),y=h.getItemVisual(g,"style");p.useStyle(h.getItemVisual(g,"style")),ia(p,Zr(v),{labelFetcher:a,labelDataIndex:g,defaultText:h.getName(g)||"",inheritColor:je(y.fill)?Vg(y.fill,1):ee.color.neutral99}),Xr(p,v),nr(p,null,null,v.get(["emphasis","disabled"])),Xe(p).dataModel=a}),gx(d).data=h,d.group.silent=a.get("silent")||e.get("silent")},t.type="markArea",t})(vE);function fve(r,t,e){var a,n,s=["x0","y0","x1","y1"];if(r){var l=pe(r&&r.dimensions,function(u){var d=t.getData(),h=d.getDimensionInfo(d.mapDimension(u))||{};return ie(ie({},h),{name:u,ordinalMeta:null})});n=pe(s,function(u,d){return{name:u,type:l[d%2].type}}),a=new Ha(n,e)}else n=[{name:"value",type:"float"}],a=new Ha(n,e);var o=pe(e.get("data"),et(uve,t,r,e));r&&(o=Ct(o,et(dve,r)));var c=r?function(u,d,h,p){var g=u.coord[Math.floor(p/2)][p%2];return Io(g,n[p])}:function(u,d,h,p){return Io(u.value,n[p])};return a.initData(o,null,c),a.hasItemOption=!0,a}function pve(r){r.registerComponentModel(cve),r.registerComponentView(hve),r.registerPreprocessor(function(t){mE(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var gve=function(r,t){if(t==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},yC=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,a){r.prototype.mergeOption.call(this,e,a),this._updateSelector(e)},t.prototype._updateSelector=function(e){var a=e.selector,n=this.ecModel;a===!0&&(a=e.selector=["all","inverse"]),de(a)&&B(a,function(s,l){je(s)&&(s={type:s}),a[l]=rt(s,gve(n,s.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var a=!1,n=0;n<e.length;n++){var s=e[n].get("name");if(this.isSelected(s)){this.select(s),a=!0;break}}!a&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var a=[],n=[];e.eachRawSeries(function(c){var u=c.name;n.push(u);var d;if(c.legendVisualProvider){var h=c.legendVisualProvider,p=h.getAllNames();e.isSeriesFiltered(c)||(n=n.concat(p)),p.length?a=a.concat(p):d=!0}else d=!0;d&&aT(c)&&a.push(c.name)}),this._availableNames=n;var s=this.get("data")||a,l=De(),o=pe(s,function(c){return(je(c)||xt(c))&&(c={name:c}),l.get(c.name)?null:(l.set(c.name,!0),new dt(c,this,this.ecModel))},this);this._data=Ct(o,function(c){return!!c})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var a=this.option.selected,n=this.get("selectedMode");if(n==="single"){var s=this._data;B(s,function(l){a[l.get("name")]=!1})}a[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var a=this.option.selected;a.hasOwnProperty(e)||(a[e]=!0),this[a[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,a=this.option.selected;B(e,function(n){a[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,a=this.option.selected;B(e,function(n){var s=n.get("name",!0);a.hasOwnProperty(s)||(a[s]=!0),a[s]=!a[s]})},t.prototype.isSelected=function(e){var a=this.option.selected;return!(a.hasOwnProperty(e)&&!a[e])&&tt(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:ee.size.m,align:"auto",backgroundColor:ee.color.transparent,borderColor:ee.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:ee.color.disabled,inactiveBorderColor:ee.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:ee.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:ee.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:ee.color.tertiary,borderWidth:1,borderColor:ee.color.border},emphasis:{selectorLabel:{show:!0,color:ee.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},t})(ct),th=et,bC=B,mx=Pe,aU=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new mx),this.group.add(this._selectorGroup=new mx),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,a,n){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var l=e.get("align"),o=e.get("orient");(!l||l==="auto")&&(l=e.get("left")==="right"&&o==="vertical"?"right":"left");var c=e.get("selector",!0),u=e.get("selectorPosition",!0);c&&(!u||u==="auto")&&(u=o==="horizontal"?"end":"start"),this.renderInner(l,e,a,n,c,o,u);var d=Kr(e,n).refContainer,h=e.getBoxLayoutParams(),p=e.get("padding"),g=rr(h,d,p),v=this.layoutInner(e,l,g,s,c,u),y=rr(Ge({width:v.width,height:v.height},h),d,p);this.group.x=y.x-v.x,this.group.y=y.y-v.y,this.group.markRedraw(),this.group.add(this._backgroundEl=YG(v,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,a,n,s,l,o,c){var u=this.getContentGroup(),d=De(),h=a.get("selectedMode"),p=a.get("triggerEvent"),g=[];n.eachRawSeries(function(v){!v.get("legendHoverLink")&&g.push(v.id)}),bC(a.getData(),function(v,y){var x=this,b=v.get("name");if(!this.newlineDisabled&&(b===""||b===`
`)){var N=new mx;N.newline=!0,u.add(N);return}var w=n.getSeriesByName(b)[0];if(!d.get(b))if(w){var S=w.getData(),T=S.getVisual("legendLineStyle")||{},A=S.getVisual("legendIcon"),C=S.getVisual("style"),M=this._createItem(w,b,y,v,a,e,T,C,A,h,s);M.on("click",th(YO,b,null,s,g)).on("mouseover",th(_C,w.name,null,s,g)).on("mouseout",th(NC,w.name,null,s,g)),n.ssr&&M.eachChild(function(R){var k=Xe(R);k.seriesIndex=w.seriesIndex,k.dataIndex=y,k.ssrType="legend"}),p&&M.eachChild(function(R){x.packEventData(R,a,w,y,b)}),d.set(b,!0)}else n.eachRawSeries(function(R){var k=this;if(!d.get(b)&&R.legendVisualProvider){var L=R.legendVisualProvider;if(!L.containName(b))return;var O=L.indexOfName(b),z=L.getItemVisual(O,"style"),U=L.getItemVisual(O,"legendIcon"),H=Va(z.fill);H&&H[3]===0&&(H[3]=.2,z=ie(ie({},z),{fill:os(H,"rgba")}));var P=this._createItem(R,b,y,v,a,e,{},z,U,h,s);P.on("click",th(YO,null,b,s,g)).on("mouseover",th(_C,null,b,s,g)).on("mouseout",th(NC,null,b,s,g)),n.ssr&&P.eachChild(function(F){var Y=Xe(F);Y.seriesIndex=R.seriesIndex,Y.dataIndex=y,Y.ssrType="legend"}),p&&P.eachChild(function(F){k.packEventData(F,a,R,y,b)}),d.set(b,!0)}},this)},this),l&&this._createSelector(l,a,s,o,c)},t.prototype.packEventData=function(e,a,n,s,l){var o={componentType:"legend",componentIndex:a.componentIndex,dataIndex:s,value:l,seriesIndex:n.seriesIndex};Xe(e).eventData=o},t.prototype._createSelector=function(e,a,n,s,l){var o=this.getSelectorGroup();bC(e,function(u){var d=u.type,h=new vt({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:d==="all"?"legendAllSelect":"legendInverseSelect",legendId:a.id})}});o.add(h);var p=a.getModel("selectorLabel"),g=a.getModel(["emphasis","selectorLabel"]);ia(h,{normal:p,emphasis:g},{defaultText:u.title}),Mo(h)})},t.prototype._createItem=function(e,a,n,s,l,o,c,u,d,h,p){var g=e.visualDrawType,v=l.get("itemWidth"),y=l.get("itemHeight"),x=l.isSelected(a),b=s.get("symbolRotate"),N=s.get("symbolKeepAspect"),w=s.get("icon");d=w||d||"roundRect";var S=mve(d,s,c,u,g,x,p),T=new mx,A=s.getModel("textStyle");if(Le(e.getLegendIcon)&&(!w||w==="inherit"))T.add(e.getLegendIcon({itemWidth:v,itemHeight:y,icon:d,iconRotate:b,itemStyle:S.itemStyle,lineStyle:S.lineStyle,symbolKeepAspect:N}));else{var C=w==="inherit"&&e.getData().getVisual("symbol")?b==="inherit"?e.getData().getVisual("symbolRotate"):b:0;T.add(vve({itemWidth:v,itemHeight:y,icon:d,iconRotate:C,itemStyle:S.itemStyle,symbolKeepAspect:N}))}var M=o==="left"?v+5:-5,R=o,k=l.get("formatter"),L=a;je(k)&&k?L=k.replace("{name}",a??""):Le(k)&&(L=k(a));var O=x?A.getTextColor():s.get("inactiveColor");T.add(new vt({style:Gt(A,{text:L,x:M,y:y/2,fill:O,align:R,verticalAlign:"middle"},{inheritColor:O})}));var z=new it({shape:T.getBoundingRect(),style:{fill:"transparent"}}),U=s.getModel("tooltip");return U.get("show")&&Ll({el:z,componentModel:l,itemName:a,itemTooltipOption:U.option}),T.add(z),T.eachChild(function(H){H.silent=!0}),z.silent=!h,this.getContentGroup().add(T),Mo(T),T.__legendDataIndex=n,T},t.prototype.layoutInner=function(e,a,n,s,l,o){var c=this.getContentGroup(),u=this.getSelectorGroup();gu(e.get("orient"),c,e.get("itemGap"),n.width,n.height);var d=c.getBoundingRect(),h=[-d.x,-d.y];if(u.markRedraw(),c.markRedraw(),l){gu("horizontal",u,e.get("selectorItemGap",!0));var p=u.getBoundingRect(),g=[-p.x,-p.y],v=e.get("selectorButtonGap",!0),y=e.getOrient().index,x=y===0?"width":"height",b=y===0?"height":"width",N=y===0?"y":"x";o==="end"?g[y]+=d[x]+v:h[y]+=p[x]+v,g[1-y]+=d[b]/2-p[b]/2,u.x=g[0],u.y=g[1],c.x=h[0],c.y=h[1];var w={x:0,y:0};return w[x]=d[x]+v+p[x],w[b]=Math.max(d[b],p[b]),w[N]=Math.min(0,p[N]+g[1-y]),w}else return c.x=h[0],c.y=h[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t})(Yt);function mve(r,t,e,a,n,s,l){function o(x,b){x.lineWidth==="auto"&&(x.lineWidth=b.lineWidth>0?2:0),bC(x,function(N,w){x[w]==="inherit"&&(x[w]=b[w])})}var c=t.getModel("itemStyle"),u=c.getItemStyle(),d=r.lastIndexOf("empty",0)===0?"fill":"stroke",h=c.getShallow("decal");u.decal=!h||h==="inherit"?a.decal:Oh(h,l),u.fill==="inherit"&&(u.fill=a[n]),u.stroke==="inherit"&&(u.stroke=a[d]),u.opacity==="inherit"&&(u.opacity=(n==="fill"?a:e).opacity),o(u,a);var p=t.getModel("lineStyle"),g=p.getLineStyle();if(o(g,e),u.fill==="auto"&&(u.fill=a.fill),u.stroke==="auto"&&(u.stroke=a.fill),g.stroke==="auto"&&(g.stroke=a.fill),!s){var v=t.get("inactiveBorderWidth"),y=u[d];u.lineWidth=v==="auto"?a.lineWidth>0&&y?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),g.stroke=p.get("inactiveColor"),g.lineWidth=p.get("inactiveWidth")}return{itemStyle:u,lineStyle:g}}function vve(r){var t=r.icon||"roundRect",e=Er(t,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return e.setStyle(r.itemStyle),e.rotation=(r.iconRotate||0)*Math.PI/180,e.setOrigin([r.itemWidth/2,r.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill=ee.color.neutral00,e.style.lineWidth=2),e}function YO(r,t,e,a){NC(r,t,e,a),e.dispatchAction({type:"legendToggleSelect",name:r??t}),_C(r,t,e,a)}function nU(r){for(var t=r.getZr().storage.getDisplayList(),e,a=0,n=t.length;a<n&&!(e=t[a].states.emphasis);)a++;return e&&e.hoverLayer}function _C(r,t,e,a){nU(e)||e.dispatchAction({type:"highlight",seriesName:r,name:t,excludeSeriesId:a})}function NC(r,t,e,a){nU(e)||e.dispatchAction({type:"downplay",seriesName:r,name:t,excludeSeriesId:a})}function xve(r){var t=r.findComponents({mainType:"legend"});t&&t.length&&r.filterSeries(function(e){for(var a=0;a<t.length;a++)if(!t[a].isSelected(e.name))return!1;return!0})}function Xp(r,t,e){var a=r==="allSelect"||r==="inverseSelect",n={},s=[];e.eachComponent({mainType:"legend",query:t},function(o){a?o[r]():o[r](t.name),WO(o,n),s.push(o.componentIndex)});var l={};return e.eachComponent("legend",function(o){B(n,function(c,u){o[c?"select":"unSelect"](u)}),WO(o,l)}),a?{selected:l,legendIndex:s}:{name:t.name,selected:l}}function WO(r,t){var e=t||{};return B(r.getData(),function(a){var n=a.get("name");if(!(n===`
`||n==="")){var s=r.isSelected(n);Te(e,n)?e[n]=e[n]&&s:e[n]=s}}),e}function yve(r){r.registerAction("legendToggleSelect","legendselectchanged",et(Xp,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",et(Xp,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",et(Xp,"inverseSelect")),r.registerAction("legendSelect","legendselected",et(Xp,"select")),r.registerAction("legendUnSelect","legendunselected",et(Xp,"unSelect"))}function sU(r){r.registerComponentModel(yC),r.registerComponentView(aU),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,xve),r.registerSubTypeDefaulter("legend",function(){return"plain"}),yve(r)}var bve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,a,n){var s=Bu(e);r.prototype.init.call(this,e,a,n),$O(this,e,s)},t.prototype.mergeOption=function(e,a){r.prototype.mergeOption.call(this,e,a),$O(this,this.option,e)},t.type="legend.scroll",t.defaultOption=$o(yC.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:ee.color.accent50,pageIconInactiveColor:ee.color.accent10,pageIconSize:15,pageTextStyle:{color:ee.color.tertiary},animationDurationUpdate:800}),t})(yC);function $O(r,t,e){var a=r.getOrient(),n=[1,1];n[a.index]=0,Si(t,e,{type:"box",ignoreSize:!!n})}var qO=Pe,Mw=["width","height"],Rw=["x","y"],_ve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new qO),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new qO)},t.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,a,n,s,l,o,c){var u=this;r.prototype.renderInner.call(this,e,a,n,s,l,o,c);var d=this._controllerGroup,h=a.get("pageIconSize",!0),p=de(h)?h:[h,h];v("pagePrev",0);var g=a.getModel("pageTextStyle");d.add(new vt({name:"pageText",style:{text:"xx/xx",fill:g.getTextColor(),font:g.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),v("pageNext",1);function v(y,x){var b=y+"DataIndex",N=rf(a.get("pageIcons",!0)[a.getOrient().name][x],{onclick:we(u._pageGo,u,b,a,s)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});N.name=y,d.add(N)}},t.prototype.layoutInner=function(e,a,n,s,l,o){var c=this.getSelectorGroup(),u=e.getOrient().index,d=Mw[u],h=Rw[u],p=Mw[1-u],g=Rw[1-u];l&&gu("horizontal",c,e.get("selectorItemGap",!0));var v=e.get("selectorButtonGap",!0),y=c.getBoundingRect(),x=[-y.x,-y.y],b=Oe(n);l&&(b[d]=n[d]-y[d]-v);var N=this._layoutContentAndController(e,s,b,u,d,p,g,h);if(l){if(o==="end")x[u]+=N[d]+v;else{var w=y[d]+v;x[u]-=w,N[h]-=w}N[d]+=y[d]+v,x[1-u]+=N[g]+N[p]/2-y[p]/2,N[p]=Math.max(N[p],y[p]),N[g]=Math.min(N[g],y[g]+x[1-u]),c.x=x[0],c.y=x[1],c.markRedraw()}return N},t.prototype._layoutContentAndController=function(e,a,n,s,l,o,c,u){var d=this.getContentGroup(),h=this._containerGroup,p=this._controllerGroup;gu(e.get("orient"),d,e.get("itemGap"),s?n.width:null,s?null:n.height),gu("horizontal",p,e.get("pageButtonItemGap",!0));var g=d.getBoundingRect(),v=p.getBoundingRect(),y=this._showController=g[l]>n[l],x=[-g.x,-g.y];a||(x[s]=d[u]);var b=[0,0],N=[-v.x,-v.y],w=Me(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(y){var S=e.get("pageButtonPosition",!0);S==="end"?N[s]+=n[l]-v[l]:b[s]+=v[l]+w}N[1-s]+=g[o]/2-v[o]/2,d.setPosition(x),h.setPosition(b),p.setPosition(N);var T={x:0,y:0};if(T[l]=y?n[l]:g[l],T[o]=Math.max(g[o],v[o]),T[c]=Math.min(0,v[c]+N[1-s]),h.__rectSize=n[l],y){var A={x:0,y:0};A[l]=Math.max(n[l]-v[l]-w,0),A[o]=T[o],h.setClipPath(new it({shape:A})),h.__rectSize=A[l]}else p.eachChild(function(M){M.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(e);return C.pageIndex!=null&&Nt(d,{x:C.contentPosition[0],y:C.contentPosition[1]},y?e:null),this._updatePageInfoView(e,C),T},t.prototype._pageGo=function(e,a,n){var s=this._getPageInfo(a)[e];s!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:a.id})},t.prototype._updatePageInfoView=function(e,a){var n=this._controllerGroup;B(["pagePrev","pageNext"],function(d){var h=d+"DataIndex",p=a[h]!=null,g=n.childOfName(d);g&&(g.setStyle("fill",p?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),g.cursor=p?"pointer":"default")});var s=n.childOfName("pageText"),l=e.get("pageFormatter"),o=a.pageIndex,c=o!=null?o+1:0,u=a.pageCount;s&&l&&s.setStyle("text",je(l)?l.replace("{current}",c==null?"":c+"").replace("{total}",u==null?"":u+""):l({current:c,total:u}))},t.prototype._getPageInfo=function(e){var a=e.get("scrollDataIndex",!0),n=this.getContentGroup(),s=this._containerGroup.__rectSize,l=e.getOrient().index,o=Mw[l],c=Rw[l],u=this._findTargetItemIndex(a),d=n.children(),h=d[u],p=d.length,g=p?1:0,v={contentPosition:[n.x,n.y],pageCount:g,pageIndex:g-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return v;var y=S(h);v.contentPosition[l]=-y.s;for(var x=u+1,b=y,N=y,w=null;x<=p;++x)w=S(d[x]),(!w&&N.e>b.s+s||w&&!T(w,b.s))&&(N.i>b.i?b=N:b=w,b&&(v.pageNextDataIndex==null&&(v.pageNextDataIndex=b.i),++v.pageCount)),N=w;for(var x=u-1,b=y,N=y,w=null;x>=-1;--x)w=S(d[x]),(!w||!T(N,w.s))&&b.i<N.i&&(N=b,v.pagePrevDataIndex==null&&(v.pagePrevDataIndex=b.i),++v.pageCount,++v.pageIndex),b=w;return v;function S(A){if(A){var C=A.getBoundingRect(),M=C[c]+A[c];return{s:M,e:M+C[o],i:A.__legendDataIndex}}}function T(A,C){return A.e>=C&&A.s<=C+s}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var a,n=this.getContentGroup(),s;return n.eachChild(function(l,o){var c=l.__legendDataIndex;s==null&&c!=null&&(s=o),c===e&&(a=o)}),a??s},t.type="legend.scroll",t})(aU);function Nve(r){r.registerAction("legendScroll","legendscroll",function(t,e){var a=t.scrollDataIndex;a!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(a)})})}function jve(r){st(sU),r.registerComponentModel(bve),r.registerComponentView(_ve),Nve(r)}function wve(r){st(sU),st(jve)}var Sve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.inside",t.defaultOption=$o(dm.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t})(dm),xE=ut();function Cve(r,t,e){xE(r).coordSysRecordMap.each(function(a){var n=a.dataZoomInfoMap.get(t.uid);n&&(n.getRange=e)})}function Tve(r,t){for(var e=xE(r).coordSysRecordMap,a=e.keys(),n=0;n<a.length;n++){var s=a[n],l=e.get(s),o=l.dataZoomInfoMap;if(o){var c=t.uid,u=o.get(c);u&&(o.removeKey(c),o.keys().length||iU(e,l))}}}function iU(r,t){if(t){r.removeKey(t.model.uid);var e=t.controller;e&&e.dispose()}}function Ave(r,t){var e={model:t,containsPoint:et(Dve,t),dispatchAction:et(Eve,r),dataZoomInfoMap:null,controller:null},a=e.controller=new Uu(r.getZr());return B(["pan","zoom","scrollMove"],function(n){a.on(n,function(s){var l=[];e.dataZoomInfoMap.each(function(o){if(s.isAvailableBehavior(o.model.option)){var c=(o.getRange||{})[n],u=c&&c(o.dzReferCoordSysInfo,e.model.mainType,e.controller,s);!o.model.get("disabled",!0)&&u&&l.push({dataZoomId:o.model.id,start:u[0],end:u[1]})}}),l.length&&e.dispatchAction(l)})}),e}function Eve(r,t){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function Dve(r,t,e,a){return r.coordinateSystem.containPoint([e,a])}function Mve(r,t,e){var a,n="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return r.each(function(o){var c=o.model,u=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;s[n+u]>s[n+a]&&(a=u),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:a,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l,api:e,zInfo:{component:t.model},triggerInfo:{roamTrigger:null,isInSelf:t.containsPoint}}}}function Rve(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(t,e){var a=xE(e),n=a.coordSysRecordMap||(a.coordSysRecordMap=De());n.each(function(s){s.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(s){var l=GG(s);B(l.infoList,function(o){var c=o.model.uid,u=n.get(c)||n.set(c,Ave(e,o.model)),d=u.dataZoomInfoMap||(u.dataZoomInfoMap=De());d.set(s.uid,{dzReferCoordSysInfo:o,model:s,getRange:null})})}),n.each(function(s){var l=s.controller,o,c=s.dataZoomInfoMap;if(c){var u=c.keys()[0];u!=null&&(o=c.get(u))}if(!o){iU(n,s);return}var d=Mve(c,s,e);l.enable(d.controlType,d.opt),cf(s,"dispatchAction",o.model.get("throttle",!0),"fixRate")})})}var Lve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return t.prototype.render=function(e,a,n){if(r.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),Cve(n,e,{pan:we(Lw.pan,this),zoom:we(Lw.zoom,this),scrollMove:we(Lw.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Tve(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t})(uE),Lw={zoom:function(r,t,e,a){var n=this.range,s=n.slice(),l=r.axisModels[0];if(l){var o=Iw[t](null,[a.originX,a.originY],l,e,r),c=(o.signal>0?o.pixelStart+o.pixelLength-o.pixel:o.pixel-o.pixelStart)/o.pixelLength*(s[1]-s[0])+s[0],u=Math.max(1/a.scale,0);s[0]=(s[0]-c)*u+c,s[1]=(s[1]-c)*u+c;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Vo(0,s,[0,100],0,d.minSpan,d.maxSpan),this.range=s,n[0]!==s[0]||n[1]!==s[1])return s}},pan:XO(function(r,t,e,a,n,s){var l=Iw[a]([s.oldX,s.oldY],[s.newX,s.newY],t,n,e);return l.signal*(r[1]-r[0])*l.pixel/l.pixelLength}),scrollMove:XO(function(r,t,e,a,n,s){var l=Iw[a]([0,0],[s.scrollDelta,s.scrollDelta],t,n,e);return l.signal*(r[1]-r[0])*s.scrollDelta})};function XO(r){return function(t,e,a,n){var s=this.range,l=s.slice(),o=t.axisModels[0];if(o){var c=r(l,o,t,e,a,n);if(Vo(c,l,[0,100],"all"),this.range=l,s[0]!==l[0]||s[1]!==l[1])return l}}}var Iw={grid:function(r,t,e,a,n){var s=e.axis,l={},o=n.model.coordinateSystem.getRect();return r=r||[0,0],s.dim==="x"?(l.pixel=t[0]-r[0],l.pixelLength=o.width,l.pixelStart=o.x,l.signal=s.inverse?1:-1):(l.pixel=t[1]-r[1],l.pixelLength=o.height,l.pixelStart=o.y,l.signal=s.inverse?-1:1),l},polar:function(r,t,e,a,n){var s=e.axis,l={},o=n.model.coordinateSystem,c=o.getRadiusAxis().getExtent(),u=o.getAngleAxis().getExtent();return r=r?o.pointToCoord(r):[0,0],t=o.pointToCoord(t),e.mainType==="radiusAxis"?(l.pixel=t[0]-r[0],l.pixelLength=c[1]-c[0],l.pixelStart=c[0],l.signal=s.inverse?1:-1):(l.pixel=t[1]-r[1],l.pixelLength=u[1]-u[0],l.pixelStart=u[0],l.signal=s.inverse?-1:1),l},singleAxis:function(r,t,e,a,n){var s=e.axis,l=n.model.coordinateSystem.getRect(),o={};return r=r||[0,0],s.orient==="horizontal"?(o.pixel=t[0]-r[0],o.pixelLength=l.width,o.pixelStart=l.x,o.signal=s.inverse?1:-1):(o.pixel=t[1]-r[1],o.pixelLength=l.height,o.pixelStart=l.y,o.signal=s.inverse?-1:1),o}};function lU(r){dE(r),r.registerComponentModel(Sve),r.registerComponentView(Lve),Rve(r)}var Ive=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=$o(dm.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:ee.color.accent10,borderRadius:0,backgroundColor:ee.color.transparent,dataBackground:{lineStyle:{color:ee.color.accent30,width:.5},areaStyle:{color:ee.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:ee.color.accent40,width:.5},areaStyle:{color:ee.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:ee.color.neutral00,borderColor:ee.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:ee.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:ee.color.tertiary},brushSelect:!0,brushStyle:{color:ee.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:ee.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),t})(dm),Zp=it,kve=1,kw=30,Ove=7,Kp="horizontal",ZO="vertical",Pve=5,zve=["line","bar","candlestick","scatter"],Bve={easing:"cubicOut",duration:100,delay:0},Vve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._displayables={},e}return t.prototype.init=function(e,a){this.api=a,this._onBrush=we(this._onBrush,this),this._onBrushEnd=we(this._onBrushEnd,this)},t.prototype.render=function(e,a,n,s){if(r.prototype.render.apply(this,arguments),cf(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!s||s.type!=="dataZoom"||s.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Zg(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var a=this._displayables.sliderGroup=new Pe;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(a),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,a=this.api,n=e.get("brushSelect"),s=n?Ove:0,l=Kr(e,a).refContainer,o=this._findCoordRect(),c=e.get("defaultLocationEdgeGap",!0)||0,u=this._orient===Kp?{right:l.width-o.x-o.width,top:l.height-kw-c-s,width:o.width,height:kw}:{right:c,top:o.y,width:kw,height:o.height},d=Bu(e.option);B(["right","top","width","height"],function(p){d[p]==="ph"&&(d[p]=u[p])});var h=rr(d,l);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===ZO&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,a=this._location,n=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),l=s&&s.get("inverse"),o=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n===Kp&&!l?{scaleY:c?1:-1,scaleX:1}:n===Kp&&l?{scaleY:c?1:-1,scaleX:-1}:n===ZO&&!l?{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2});var u=e.getBoundingRect([o]);e.x=a.x-u.x,e.y=a.y-u.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,a=this._size,n=this._displayables.sliderGroup,s=e.get("brushSelect");n.add(new Zp({silent:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var l=new Zp({shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:"transparent"},z2:0,onclick:we(this._onClickPanel,this)}),o=this.api.getZr();s?(l.on("mousedown",this._onBrushStart,this),l.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),n.add(l)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var a=this._size,n=this._shadowSize||[],s=e.series,l=s.getRawData(),o=s.getShadowDim&&s.getShadowDim(),c=o&&l.getDimensionInfo(o)?s.getShadowDim():e.otherDim;if(c==null)return;var u=this._shadowPolygonPts,d=this._shadowPolylinePts;if(l!==this._shadowData||c!==this._shadowDim||a[0]!==n[0]||a[1]!==n[1]){var h=l.getDataExtent(e.thisDim),p=l.getDataExtent(c),g=(p[1]-p[0])*.3;p=[p[0]-g,p[1]+g];var v=[0,a[1]],y=[0,a[0]],x=[[a[0],0],[0,0]],b=[],N=y[1]/Math.max(1,l.count()-1),w=a[0]/(h[1]-h[0]),S=e.thisAxis.type==="time",T=-N,A=Math.round(l.count()/a[0]),C;l.each([e.thisDim,c],function(O,z,U){if(A>0&&U%A){S||(T+=N);return}T=S?(+O-h[0])*w:T+N;var H=z==null||isNaN(z)||z==="",P=H?0:Tt(z,p,v,!0);H&&!C&&U?(x.push([x[x.length-1][0],0]),b.push([b[b.length-1][0],0])):!H&&C&&(x.push([T,0]),b.push([T,0])),H||(x.push([T,P]),b.push([T,P])),C=H}),u=this._shadowPolygonPts=x,d=this._shadowPolylinePts=b}this._shadowData=l,this._shadowDim=c,this._shadowSize=[a[0],a[1]];var M=this.dataZoomModel;function R(O){var z=M.getModel(O?"selectedDataBackground":"dataBackground"),U=new Pe,H=new Ma({shape:{points:u},segmentIgnoreThreshold:1,style:z.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),P=new ma({shape:{points:d},segmentIgnoreThreshold:1,style:z.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return U.add(H),U.add(P),U}for(var k=0;k<3;k++){var L=R(k===1);this._displayables.sliderGroup.add(L),this._displayables.dataShadowSegs.push(L)}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,a=e.get("showDataShadow");if(a!==!1){var n,s=this.ecModel;return e.eachTargetAxis(function(l,o){var c=e.getAxisProxy(l,o).getTargetSeriesModels();B(c,function(u){if(!n&&!(a!==!0&&tt(zve,u.get("type"))<0)){var d=s.getComponent(To(l),o).axis,h=Hve(l),p,g=u.coordinateSystem;h!=null&&g.getOtherAxis&&(p=g.getOtherAxis(d).inverse),h=u.getData().mapDimension(h);var v=u.getData().mapDimension(l);n={thisAxis:d,series:u,thisDim:v,otherDim:h,otherAxisInverse:p}}},this)},this),n}},t.prototype._renderHandle=function(){var e=this.group,a=this._displayables,n=a.handles=[null,null],s=a.handleLabels=[null,null],l=this._displayables.sliderGroup,o=this._size,c=this.dataZoomModel,u=this.api,d=c.get("borderRadius")||0,h=c.get("brushSelect"),p=a.filler=new Zp({silent:h,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});l.add(p),l.add(new Zp({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:d},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:kve,fill:ee.color.transparent}})),B([0,1],function(w){var S=c.get("handleIcon");!xy[S]&&S.indexOf("path://")<0&&S.indexOf("image://")<0&&(S="path://"+S);var T=Er(S,-1,0,2,2,null,!0);T.attr({cursor:Gve(this._orient),draggable:!0,drift:we(this._onDragMove,this,w),ondragend:we(this._onDragEnd,this),onmouseover:we(this._showDataInfo,this,!0),onmouseout:we(this._showDataInfo,this,!1),z2:5});var A=T.getBoundingRect(),C=c.get("handleSize");this._handleHeight=Ne(C,this._size[1]),this._handleWidth=A.width/A.height*this._handleHeight,T.setStyle(c.getModel("handleStyle").getItemStyle()),T.style.strokeNoScale=!0,T.rectHover=!0,T.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),Mo(T);var M=c.get("handleColor");M!=null&&(T.style.fill=M),l.add(n[w]=T);var R=c.getModel("textStyle"),k=c.get("handleLabel")||{},L=k.show||!1;e.add(s[w]=new vt({silent:!0,invisible:!L,style:Gt(R,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:R.getTextColor(),font:R.getFont()}),z2:10}))},this);var g=p;if(h){var v=Ne(c.get("moveHandleSize"),o[1]),y=a.moveHandle=new it({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:v}}),x=v*.8,b=a.moveHandleIcon=Er(c.get("moveHandleIcon"),-x/2,-x/2,x,x,ee.color.neutral00,!0);b.silent=!0,b.y=o[1]+v/2-.5,y.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var N=Math.min(o[1]/2,Math.max(v,10));g=a.moveZone=new it({invisible:!0,shape:{y:o[1]-N,height:v+N}}),g.on("mouseover",function(){u.enterEmphasis(y)}).on("mouseout",function(){u.leaveEmphasis(y)}),l.add(y),l.add(b),l.add(g)}g.attr({draggable:!0,cursor:"default",drift:we(this._onDragMove,this,"all"),ondragstart:we(this._showDataInfo,this,!0),ondragend:we(this._onDragEnd,this),onmouseover:we(this._showDataInfo,this,!0),onmouseout:we(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),a=this._getViewExtent();this._handleEnds=[Tt(e[0],[0,100],a,!0),Tt(e[1],[0,100],a,!0)]},t.prototype._updateInterval=function(e,a){var n=this.dataZoomModel,s=this._handleEnds,l=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];Vo(a,s,l,n.get("zoomLock")?"all":e,o.minSpan!=null?Tt(o.minSpan,c,l,!0):null,o.maxSpan!=null?Tt(o.maxSpan,c,l,!0):null);var u=this._range,d=this._range=Mn([Tt(s[0],l,c,!0),Tt(s[1],l,c,!0)]);return!u||u[0]!==d[0]||u[1]!==d[1]},t.prototype._updateView=function(e){var a=this._displayables,n=this._handleEnds,s=Mn(n.slice()),l=this._size;B([0,1],function(g){var v=a.handles[g],y=this._handleHeight;v.attr({scaleX:y/2,scaleY:y/2,x:n[g]+(g?-1:1),y:l[1]/2-y/2})},this),a.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:l[1]});var o={x:s[0],width:s[1]-s[0]};a.moveHandle&&(a.moveHandle.setShape(o),a.moveZone.setShape(o),a.moveZone.getBoundingRect(),a.moveHandleIcon&&a.moveHandleIcon.attr("x",o.x+o.width/2));for(var c=a.dataShadowSegs,u=[0,s[0],s[1],l[0]],d=0;d<c.length;d++){var h=c[d],p=h.getClipPath();p||(p=new it,h.setClipPath(p)),p.setShape({x:u[d],y:0,width:u[d+1]-u[d],height:l[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var a=this.dataZoomModel,n=this._displayables,s=n.handleLabels,l=this._orient,o=["",""];if(a.get("showDetail")){var c=a.findRepresentativeAxisProxy();if(c){var u=c.getAxisModel().axis,d=this._range,h=e?c.calculateDataWindow({start:d[0],end:d[1]}).valueWindow:c.getDataValueWindow();o=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var p=Mn(this._handleEnds.slice());g.call(this,0),g.call(this,1);function g(v){var y=Ro(n.handles[v].parent,this.group),x=Eb(v===0?"right":"left",y),b=this._handleWidth/2+Pve,N=Os([p[v]+(v===0?-b:b),this._size[1]/2],y);s[v].setStyle({x:N[0],y:N[1],verticalAlign:l===Kp?"middle":x,align:l===Kp?x:"center",text:o[v]})}},t.prototype._formatLabel=function(e,a){var n=this.dataZoomModel,s=n.get("labelFormatter"),l=n.get("labelPrecision");(l==null||l==="auto")&&(l=a.getPixelPrecision());var o=e==null||isNaN(e)?"":a.type==="category"||a.type==="time"?a.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(l,20));return Le(s)?s(e,o):je(s)?s.replace("{value}",o):o},t.prototype._showDataInfo=function(e){var a=this.dataZoomModel.get("handleLabel")||{},n=a.show||!1,s=this.dataZoomModel.getModel(["emphasis","handleLabel"]),l=s.get("show")||!1,o=e||this._dragging?l:n,c=this._displayables,u=c.handleLabels;u[0].attr("invisible",!o),u[1].attr("invisible",!o),c.moveHandle&&this.api[o?"enterEmphasis":"leaveEmphasis"](c.moveHandle,1)},t.prototype._onDragMove=function(e,a,n,s){this._dragging=!0,wl(s.event);var l=this._displayables.sliderGroup.getLocalTransform(),o=Os([a,n],l,!0),c=this._updateInterval(e,o[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),c&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var a=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>a[0]||n[1]<0||n[1]>a[1])){var s=this._handleEnds,l=(s[0]+s[1])/2,o=this._updateInterval("all",n[0]-l);this._updateView(),o&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var a=e.offsetX,n=e.offsetY;this._brushStart=new Ye(a,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var a=this._displayables.brushRect;if(this._brushing=!1,!!a){a.attr("ignore",!0);var n=a.shape,s=+new Date;if(!(s-this._brushStartTime<200&&Math.abs(n.width)<5)){var l=this._getViewExtent(),o=[0,100],c=this._handleEnds=[n.x,n.x+n.width],u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();Vo(0,c,l,0,u.minSpan!=null?Tt(u.minSpan,o,l,!0):null,u.maxSpan!=null?Tt(u.maxSpan,o,l,!0):null),this._range=Mn([Tt(c[0],l,o,!0),Tt(c[1],l,o,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(wl(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,a){var n=this._displayables,s=this.dataZoomModel,l=n.brushRect;l||(l=n.brushRect=new Zp({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(l)),l.attr("ignore",!1);var o=this._brushStart,c=this._displayables.sliderGroup,u=c.transformCoordToLocal(e,a),d=c.transformCoordToLocal(o.x,o.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),l.setShape({x:d[0],y:0,width:u[0]-d[0],height:h[1]})},t.prototype._dispatchZoomAction=function(e){var a=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Bve:null,start:a[0],end:a[1]})},t.prototype._findCoordRect=function(){var e,a=GG(this.dataZoomModel).infoList;if(!e&&a.length){var n=a[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var s=this.api.getWidth(),l=this.api.getHeight();e={x:s*.2,y:l*.2,width:s*.6,height:l*.6}}return e},t.type="dataZoom.slider",t})(uE);function Hve(r){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[r]}function Gve(r){return r==="vertical"?"ns-resize":"ew-resize"}function oU(r){r.registerComponentModel(Ive),r.registerComponentView(Vve),dE(r)}function Uve(r){st(lU),st(oU)}var cU={get:function(r,t,e){var a=Oe((Fve[r]||{})[t]);return e&&de(a)?a[a.length-1]:a}},Fve={color:{active:["#006edd","#e0ffff"],inactive:[ee.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},KO=sa.mapVisual,Yve=sa.eachVisual,Wve=de,QO=B,$ve=Mn,qve=Tt,Jy=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return t.prototype.init=function(e,a,n){this.mergeDefaultAndTheme(e,n)},t.prototype.optionUpdated=function(e,a){var n=this.option;!a&&QG(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var a=this.stateList;e=we(e,this),this.controllerVisuals=mC(this.option.controller,a,e),this.targetVisuals=mC(this.option.target,a,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesId,a=this.option.seriesIndex;a==null&&e==null&&(a="all");var n=Kh(this.ecModel,"series",{index:a,id:e},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return pe(n,function(s){return s.componentIndex})},t.prototype.eachTargetSeries=function(e,a){B(this.getTargetSeriesIndices(),function(n){var s=this.ecModel.getSeriesByIndex(n);s&&e.call(a,s)},this)},t.prototype.isTargetSeries=function(e){var a=!1;return this.eachTargetSeries(function(n){n===e&&(a=!0)}),a},t.prototype.formatValueText=function(e,a,n){var s=this.option,l=s.precision,o=this.dataBound,c=s.formatter,u;n=n||["<",">"],de(e)&&(e=e.slice(),u=!0);var d=a?e:u?[h(e[0]),h(e[1])]:h(e);if(je(c))return c.replace("{value}",u?d[0]:d).replace("{value2}",u?d[1]:d);if(Le(c))return u?c(e[0],e[1]):c(e);if(u)return e[0]===o[0]?n[0]+" "+d[1]:e[1]===o[1]?n[1]+" "+d[0]:d[0]+" - "+d[1];return d;function h(p){return p===o[0]?"min":p===o[1]?"max":(+p).toFixed(Math.min(l,20))}},t.prototype.resetExtent=function(){var e=this.option,a=$ve([e.min,e.max]);this._dataExtent=a},t.prototype.getDataDimensionIndex=function(e){var a=this.option.dimension;if(a!=null)return e.getDimensionIndex(a);for(var n=e.dimensions,s=n.length-1;s>=0;s--){var l=n[s],o=e.getDimensionInfo(l);if(!o.isCalculationCoord)return o.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,a=this.option,n={inRange:a.inRange,outOfRange:a.outOfRange},s=a.target||(a.target={}),l=a.controller||(a.controller={});rt(s,n),rt(l,n);var o=this.isCategory();c.call(this,s),c.call(this,l),u.call(this,s,"inRange","outOfRange"),d.call(this,l);function c(h){Wve(a.color)&&!h.inRange&&(h.inRange={color:a.color.slice().reverse()}),h.inRange=h.inRange||{color:e.get("gradientColor")}}function u(h,p,g){var v=h[p],y=h[g];v&&!y&&(y=h[g]={},QO(v,function(x,b){if(sa.isValidType(b)){var N=cU.get(b,"inactive",o);N!=null&&(y[b]=N,b==="color"&&!y.hasOwnProperty("opacity")&&!y.hasOwnProperty("colorAlpha")&&(y.opacity=[0,0]))}}))}function d(h){var p=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,g=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,v=this.get("inactiveColor"),y=this.getItemSymbol(),x=y||"roundRect";QO(this.stateList,function(b){var N=this.itemSize,w=h[b];w||(w=h[b]={color:o?v:[v]}),w.symbol==null&&(w.symbol=p&&Oe(p)||(o?x:[x])),w.symbolSize==null&&(w.symbolSize=g&&Oe(g)||(o?N[0]:[N[0],N[0]])),w.symbol=KO(w.symbol,function(A){return A==="none"?x:A});var S=w.symbolSize;if(S!=null){var T=-1/0;Yve(S,function(A){A>T&&(T=A)}),w.symbolSize=KO(S,function(A){return qve(A,[0,T],[0,N[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:ee.color.transparent,borderColor:ee.color.borderTint,contentColor:ee.color.theme[0],inactiveColor:ee.color.disabled,borderWidth:0,padding:ee.size.m,textGap:10,precision:0,textStyle:{color:ee.color.secondary}},t})(ct),JO=[20,140],Xve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(e,a){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=JO[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=JO[1])},t.prototype._resetRange=function(){var e=this.getExtent(),a=this.option.range;!a||a.auto?(e.auto=1,this.option.range=e):de(a)&&(a[0]>a[1]&&a.reverse(),a[0]=Math.max(a[0],e[0]),a[1]=Math.min(a[1],e[1]))},t.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),B(this.stateList,function(e){var a=this.option.controller[e].symbolSize;a&&a[0]!==a[1]&&(a[0]=a[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),a=Mn((this.get("range")||[]).slice());return a[0]>e[1]&&(a[0]=e[1]),a[1]>e[1]&&(a[1]=e[1]),a[0]<e[0]&&(a[0]=e[0]),a[1]<e[0]&&(a[1]=e[0]),a},t.prototype.getValueState=function(e){var a=this.option.range,n=this.getExtent(),s=Me(this.option.unboundedRange,!0);return(s&&a[0]<=n[0]||a[0]<=e)&&(s&&a[1]>=n[1]||e<=a[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[];return this.eachTargetSeries(function(n){var s=[],l=n.getData();l.each(this.getDataDimensionIndex(l),function(o,c){e[0]<=o&&o<=e[1]&&s.push(c)},this),a.push({seriesId:n.id,dataIndex:s})},this),a},t.prototype.getVisualMeta=function(e){var a=eP(this,"outOfRange",this.getExtent()),n=eP(this,"inRange",this.option.range.slice()),s=[];function l(g,v){s.push({value:g,color:e(g,v)})}for(var o=0,c=0,u=n.length,d=a.length;c<d&&(!n.length||a[c]<=n[0]);c++)a[c]<n[o]&&l(a[c],"outOfRange");for(var h=1;o<u;o++,h=0)h&&s.length&&l(n[o],"outOfRange"),l(n[o],"inRange");for(var h=1;c<d;c++)(!n.length||n[n.length-1]<a[c])&&(h&&(s.length&&l(s[s.length-1].value,"outOfRange"),h=0),l(a[c],"outOfRange"));var p=s.length;return{stops:s,outerColors:[p?s[0].color:"transparent",p?s[p-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=$o(Jy.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:ee.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:ee.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:ee.color.shadow}}),t})(Jy);function eP(r,t,e){if(e[0]===e[1])return e.slice();for(var a=200,n=(e[1]-e[0])/a,s=e[0],l=[],o=0;o<=a&&s<e[1];o++)l.push(s),s+=n;return l.push(e[1]),l}var uU=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return t.prototype.init=function(e,a){this.ecModel=e,this.api=a},t.prototype.render=function(e,a,n,s){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,a,n,s)},t.prototype.renderBackground=function(e){var a=this.visualMapModel,n=sf(a.get("padding")||0),s=e.getBoundingRect();e.add(new it({z2:-1,silent:!0,shape:{x:s.x-n[3],y:s.y-n[0],width:s.width+n[3]+n[1],height:s.height+n[0]+n[2]},style:{fill:a.get("backgroundColor"),stroke:a.get("borderColor"),lineWidth:a.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,a,n){n=n||{};var s=n.forceState,l=this.visualMapModel,o={};if(a==="color"){var c=l.get("contentColor");o.color=c}function u(g){return o[g]}function d(g,v){o[g]=v}var h=l.controllerVisuals[s||l.getValueState(e)],p=sa.prepareVisualTypes(h);return B(p,function(g){var v=h[g];n.convertOpacityToAlpha&&g==="opacity"&&(g="colorAlpha",v=h.__alphaForOpacity),sa.dependsOn(g,a)&&v&&v.applyVisual(e,u,d)}),o[a]},t.prototype.positionGroup=function(e){var a=this.visualMapModel,n=this.api,s=Kr(a,n).refContainer;Rb(e,a.getBoxLayoutParams(),s)},t.prototype.doRender=function(e,a,n,s){},t.type="visualMap",t})(Yt),tP=[["left","right","width"],["top","bottom","height"]];function dU(r,t,e){var a=r.option,n=a.align;if(n!=null&&n!=="auto")return n;for(var s={width:t.getWidth(),height:t.getHeight()},l=a.orient==="horizontal"?1:0,o=tP[l],c=[0,null,10],u={},d=0;d<3;d++)u[tP[1-l][d]]=c[d],u[o[d]]=d===2?e[0]:a[o[d]];var h=[["x","width",3],["y","height",0]][l],p=rr(u,s,a.padding);return o[(p.margin[h[2]]||0)+p[h[0]]+p[h[1]]*.5<s[h[1]]*.5?0:1]}function Ux(r,t){return B(r||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),r}var li=Tt,Zve=B,rP=Math.min,Ow=Math.max,Kve=12,Qve=6,Jve=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return t.prototype.init=function(e,a){r.prototype.init.call(this,e,a),this._hoverLinkFromSeriesMouseOver=we(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=we(this._hideIndicator,this)},t.prototype.doRender=function(e,a,n,s){(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,a=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(a);var n=e.get("text");this._renderEndsText(a,n,0),this._renderEndsText(a,n,1),this._updateView(!0),this.renderBackground(a),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(a)},t.prototype._renderEndsText=function(e,a,n){if(a){var s=a[1-n];s=s!=null?s+"":"";var l=this.visualMapModel,o=l.get("textGap"),c=l.itemSize,u=this._shapes.mainGroup,d=this._applyTransform([c[0]/2,n===0?-o:c[1]+o],u),h=this._applyTransform(n===0?"bottom":"top",u),p=this._orient,g=this.visualMapModel.textStyleModel;this.group.add(new vt({style:Gt(g,{x:d[0],y:d[1],verticalAlign:g.get("verticalAlign")||(p==="horizontal"?"middle":h),align:g.get("align")||(p==="horizontal"?h:"center"),text:s})}))}},t.prototype._renderBar=function(e){var a=this.visualMapModel,n=this._shapes,s=a.itemSize,l=this._orient,o=this._useHandle,c=dU(a,this.api,s),u=n.mainGroup=this._createBarGroup(c),d=new Pe;u.add(d),d.add(n.outOfRange=aP()),d.add(n.inRange=aP(null,o?sP(this._orient):null,we(this._dragHandle,this,"all",!1),we(this._dragHandle,this,"all",!0))),d.setClipPath(new it({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var h=a.textStyleModel.getTextRect(""),p=Ow(h.width,h.height);o&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(a,u,0,s,p,l),this._createHandle(a,u,1,s,p,l)),this._createIndicator(a,u,s,p,l),e.add(u)},t.prototype._createHandle=function(e,a,n,s,l,o){var c=we(this._dragHandle,this,n,!1),u=we(this._dragHandle,this,n,!0),d=Bs(e.get("handleSize"),s[0]),h=Er(e.get("handleIcon"),-d/2,-d/2,d,d,null,!0),p=sP(this._orient);h.attr({cursor:p,draggable:!0,drift:c,ondragend:u,onmousemove:function(b){wl(b.event)}}),h.x=s[0]/2,h.useStyle(e.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),ru(h,!0),a.add(h);var g=this.visualMapModel.textStyleModel,v=new vt({cursor:p,draggable:!0,drift:c,onmousemove:function(b){wl(b.event)},ondragend:u,style:Gt(g,{x:0,y:0,text:""})});v.ensureState("blur").style={opacity:.1},v.stateTransition={duration:200},this.group.add(v);var y=[d,0],x=this._shapes;x.handleThumbs[n]=h,x.handleLabelPoints[n]=y,x.handleLabels[n]=v},t.prototype._createIndicator=function(e,a,n,s,l){var o=Bs(e.get("indicatorSize"),n[0]),c=Er(e.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=e.getModel("indicatorStyle").getItemStyle();if(c instanceof la){var d=c.style;c.useStyle(ie({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},u))}else c.useStyle(u);a.add(c);var h=this.visualMapModel.textStyleModel,p=new vt({silent:!0,invisible:!0,style:Gt(h,{x:0,y:0,text:""})});this.group.add(p);var g=[(l==="horizontal"?s/2:Qve)+n[0]/2,0],v=this._shapes;v.indicator=c,v.indicatorLabel=p,v.indicatorLabelPoint=g,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,a,n,s){if(this._useHandle){if(this._dragging=!a,!a){var l=this._applyTransform([n,s],this._shapes.mainGroup,!0);this._updateInterval(e,l[1]),this._hideIndicator(),this._updateView()}a===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),a?!this._hovering&&this._clearHoverLinkToSeries():nP(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,a=this._dataInterval=e.getSelected(),n=e.getExtent(),s=[0,e.itemSize[1]];this._handleEnds=[li(a[0],n,s,!0),li(a[1],n,s,!0)]},t.prototype._updateInterval=function(e,a){a=a||0;var n=this.visualMapModel,s=this._handleEnds,l=[0,n.itemSize[1]];Vo(a,s,l,e,0);var o=n.getExtent();this._dataInterval=[li(s[0],l,o,!0),li(s[1],l,o,!0)]},t.prototype._updateView=function(e){var a=this.visualMapModel,n=a.getExtent(),s=this._shapes,l=[0,a.itemSize[1]],o=e?l:this._handleEnds,c=this._createBarVisual(this._dataInterval,n,o,"inRange"),u=this._createBarVisual(n,n,l,"outOfRange");s.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),s.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(o,c)},t.prototype._createBarVisual=function(e,a,n,s){var l={forceState:s,convertOpacityToAlpha:!0},o=this._makeColorGradient(e,l),c=[this.getControllerVisual(e[0],"symbolSize",l),this.getControllerVisual(e[1],"symbolSize",l)],u=this._createBarPoints(n,c);return{barColor:new Pu(0,0,0,1,o),barPoints:u,handlesColor:[o[0].color,o[o.length-1].color]}},t.prototype._makeColorGradient=function(e,a){var n=100,s=[],l=(e[1]-e[0])/n;s.push({color:this.getControllerVisual(e[0],"color",a),offset:0});for(var o=1;o<n;o++){var c=e[0]+l*o;if(c>e[1])break;s.push({color:this.getControllerVisual(c,"color",a),offset:o/n})}return s.push({color:this.getControllerVisual(e[1],"color",a),offset:1}),s},t.prototype._createBarPoints=function(e,a){var n=this.visualMapModel.itemSize;return[[n[0]-a[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-a[1],e[1]]]},t.prototype._createBarGroup=function(e){var a=this._orient,n=this.visualMapModel.get("inverse");return new Pe(a==="horizontal"&&!n?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:a==="horizontal"&&n?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:a==="vertical"&&!n?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},t.prototype._updateHandle=function(e,a){if(this._useHandle){var n=this._shapes,s=this.visualMapModel,l=n.handleThumbs,o=n.handleLabels,c=s.itemSize,u=s.getExtent(),d=this._applyTransform("left",n.mainGroup);Zve([0,1],function(h){var p=l[h];p.setStyle("fill",a.handlesColor[h]),p.y=e[h];var g=li(e[h],[0,c[1]],u,!0),v=this.getControllerVisual(g,"symbolSize");p.scaleX=p.scaleY=v/c[0],p.x=c[0]-v/2;var y=Os(n.handleLabelPoints[h],Ro(p,this.group));if(this._orient==="horizontal"){var x=d==="left"||d==="top"?(c[0]-v)/2:(c[0]-v)/-2;y[1]+=x}o[h].setStyle({x:y[0],y:y[1],text:s.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,a,n,s){var l=this.visualMapModel,o=l.getExtent(),c=l.itemSize,u=[0,c[1]],d=this._shapes,h=d.indicator;if(h){h.attr("invisible",!1);var p={convertOpacityToAlpha:!0},g=this.getControllerVisual(e,"color",p),v=this.getControllerVisual(e,"symbolSize"),y=li(e,o,u,!0),x=c[0]-v/2,b={x:h.x,y:h.y};h.y=y,h.x=x;var N=Os(d.indicatorLabelPoint,Ro(h,this.group)),w=d.indicatorLabel;w.attr("invisible",!1);var S=this._applyTransform("left",d.mainGroup),T=this._orient,A=T==="horizontal";w.setStyle({text:(n||"")+l.formatValueText(a),verticalAlign:A?S:"middle",align:A?"center":S});var C={x,y,style:{fill:g}},M={style:{x:N[0],y:N[1]}};if(l.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var R={duration:100,easing:"cubicInOut",additive:!0};h.x=b.x,h.y=b.y,h.animateTo(C,R),w.animateTo(M,R)}else h.attr(C),w.attr(M);this._firstShowIndicator=!1;var k=this._shapes.handleLabels;if(k)for(var L=0;L<k.length;L++)this.api.enterBlur(k[L])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(a){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,s=e._applyTransform([a.offsetX,a.offsetY],e._shapes.mainGroup,!0,!0);s[1]=rP(Ow(0,s[1]),n[1]),e._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,a){var n=this.visualMapModel,s=n.itemSize;if(n.option.hoverLink){var l=[0,s[1]],o=n.getExtent();e=rP(Ow(l[0],e),l[1]);var c=e0e(n,o,l),u=[e-c,e+c],d=li(e,l,o,!0),h=[li(u[0],l,o,!0),li(u[1],l,o,!0)];u[0]<l[0]&&(h[0]=-1/0),u[1]>l[1]&&(h[1]=1/0),a&&(h[0]===-1/0?this._showIndicator(d,h[1],"< ",c):h[1]===1/0?this._showIndicator(d,h[0],"> ",c):this._showIndicator(d,d," ",c));var p=this._hoverLinkDataIndices,g=[];(a||nP(n))&&(g=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var v=LK(p,g);this._dispatchHighDown("downplay",Ux(v[0],n)),this._dispatchHighDown("highlight",Ux(v[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var a;if(nu(e.target,function(c){var u=Xe(c);if(u.dataIndex!=null)return a=u,!0},!0),!!a){var n=this.ecModel.getSeriesByIndex(a.seriesIndex),s=this.visualMapModel;if(s.isTargetSeries(n)){var l=n.getData(a.dataType),o=l.getStore().get(s.getDataDimensionIndex(l),a.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var a=this._shapes.handleLabels;if(a)for(var n=0;n<a.length;n++)this.api.leaveBlur(a[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Ux(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,a,n,s){var l=Ro(a,s?null:this.group);return de(e)?Os(e,l,n):Eb(e,l,n)},t.prototype._dispatchHighDown=function(e,a){a&&a.length&&this.api.dispatchAction({type:e,batch:a})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t})(uU);function aP(r,t,e,a){return new Ma({shape:{points:r},draggable:!!e,cursor:t,drift:e,onmousemove:function(n){wl(n.event)},ondragend:a})}function e0e(r,t,e){var a=Kve/2,n=r.get("hoverLinkDataSize");return n&&(a=li(n,t,e,!0)/2),a}function nP(r){var t=r.get("hoverLinkOnHandle");return!!(t??r.get("realtime"))}function sP(r){return r==="vertical"?"ns-resize":"ew-resize"}var t0e={type:"selectDataRange",event:"dataRangeSelected",update:"update"},r0e=function(r,t){t.eachComponent({mainType:"visualMap",query:r},function(e){e.setSelected(r.selected)})},a0e=[{createOnAllSeries:!0,reset:function(r,t){var e=[];return t.eachComponent("visualMap",function(a){var n=r.pipelineContext;!a.isTargetSeries(r)||n&&n.large||e.push(wme(a.stateList,a.targetVisuals,we(a.getValueState,a),a.getDataDimensionIndex(r.getData())))}),e}},{createOnAllSeries:!0,reset:function(r,t){var e=r.getData(),a=[];t.eachComponent("visualMap",function(n){if(n.isTargetSeries(r)){var s=n.getVisualMeta(we(n0e,null,r,n))||{stops:[],outerColors:[]},l=n.getDataDimensionIndex(e);l>=0&&(s.dimension=l,a.push(s))}}),r.getData().setVisual("visualMeta",a)}}];function n0e(r,t,e,a){for(var n=t.targetVisuals[a],s=sa.prepareVisualTypes(n),l={color:km(r.getData(),"color")},o=0,c=s.length;o<c;o++){var u=s[o],d=n[u==="opacity"?"__alphaForOpacity":u];d&&d.applyVisual(e,h,p)}return l.color;function h(g){return l[g]}function p(g,v){l[g]=v}}var iP=B;function s0e(r){var t=r&&r.visualMap;de(t)||(t=t?[t]:[]),iP(t,function(e){if(e){rh(e,"splitList")&&!rh(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var a=e.pieces;a&&de(a)&&iP(a,function(n){Ue(n)&&(rh(n,"start")&&!rh(n,"min")&&(n.min=n.start),rh(n,"end")&&!rh(n,"max")&&(n.max=n.end))})}})}function rh(r,t){return r&&r.hasOwnProperty&&r.hasOwnProperty(t)}var lP=!1;function hU(r){lP||(lP=!0,r.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),r.registerAction(t0e,r0e),B(a0e,function(t){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,t)}),r.registerPreprocessor(s0e))}function fU(r){r.registerComponentModel(Xve),r.registerComponentView(Jve),hU(r)}var i0e=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return t.prototype.optionUpdated=function(e,a){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],l0e[this._mode].call(this,this._pieceList),this._resetSelected(e,a);var s=this.option.categories;this.resetVisual(function(l,o){n==="categories"?(l.mappingMethod="category",l.categories=Oe(s)):(l.dataExtent=this.getExtent(),l.mappingMethod="piecewise",l.pieceList=pe(this._pieceList,function(c){return c=Oe(c),o!=="inRange"&&(c.visual=null),c}))})},t.prototype.completeVisualOption=function(){var e=this.option,a={},n=sa.listVisualTypes(),s=this.isCategory();B(e.pieces,function(o){B(n,function(c){o.hasOwnProperty(c)&&(a[c]=1)})}),B(a,function(o,c){var u=!1;B(this.stateList,function(d){u=u||l(e,d,c)||l(e.target,d,c)},this),!u&&B(this.stateList,function(d){(e[d]||(e[d]={}))[c]=cU.get(c,d==="inRange"?"active":"inactive",s)})},this);function l(o,c,u){return o&&o[c]&&o[c].hasOwnProperty(u)}r.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,a){var n=this.option,s=this._pieceList,l=(a?n:e).selected||{};if(n.selected=l,B(s,function(c,u){var d=this.getSelectedMapKey(c);l.hasOwnProperty(d)||(l[d]=!0)},this),n.selectedMode==="single"){var o=!1;B(s,function(c,u){var d=this.getSelectedMapKey(c);l[d]&&(o?l[d]=!1:o=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=Oe(e)},t.prototype.getValueState=function(e){var a=sa.findPieceIndex(e,this._pieceList);return a!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var a=[],n=this._pieceList;return this.eachTargetSeries(function(s){var l=[],o=s.getData();o.each(this.getDataDimensionIndex(o),function(c,u){var d=sa.findPieceIndex(c,n);d===e&&l.push(u)},this),a.push({seriesId:s.id,dataIndex:l})},this),a},t.prototype.getRepresentValue=function(e){var a;if(this.isCategory())a=e.value;else if(e.value!=null)a=e.value;else{var n=e.interval||[];a=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return a},t.prototype.getVisualMeta=function(e){if(this.isCategory())return;var a=[],n=["",""],s=this;function l(d,h){var p=s.getRepresentValue({interval:d});h||(h=s.getValueState(p));var g=e(p,h);d[0]===-1/0?n[0]=g:d[1]===1/0?n[1]=g:a.push({value:d[0],color:g},{value:d[1],color:g})}var o=this._pieceList.slice();if(!o.length)o.push({interval:[-1/0,1/0]});else{var c=o[0].interval[0];c!==-1/0&&o.unshift({interval:[-1/0,c]}),c=o[o.length-1].interval[1],c!==1/0&&o.push({interval:[c,1/0]})}var u=-1/0;return B(o,function(d){var h=d.interval;h&&(h[0]>u&&l([u,h[0]],"outOfRange"),l(h.slice()),u=h[1])},this),{stops:a,outerColors:n}},t.type="visualMap.piecewise",t.defaultOption=$o(Jy.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t})(Jy),l0e={splitNumber:function(r){var t=this.option,e=Math.min(t.precision,20),a=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var s=(a[1]-a[0])/n;+s.toFixed(e)!==s&&e<5;)e++;t.precision=e,s=+s.toFixed(e),t.minOpen&&r.push({interval:[-1/0,a[0]],close:[0,0]});for(var l=0,o=a[0];l<n;o+=s,l++){var c=l===n-1?a[1]:o+s;r.push({interval:[o,c],close:[1,1]})}t.maxOpen&&r.push({interval:[a[1],1/0],close:[0,0]}),HS(r),B(r,function(u,d){u.index=d,u.text=this.formatValueText(u.interval)},this)},categories:function(r){var t=this.option;B(t.categories,function(e){r.push({text:this.formatValueText(e,!0),value:e})},this),oP(t,r)},pieces:function(r){var t=this.option;B(t.pieces,function(e,a){Ue(e)||(e={value:e});var n={text:"",index:a};if(e.label!=null&&(n.text=e.label),e.hasOwnProperty("value")){var s=n.value=e.value;n.interval=[s,s],n.close=[1,1]}else{for(var l=n.interval=[],o=n.close=[0,0],c=[1,0,1],u=[-1/0,1/0],d=[],h=0;h<2;h++){for(var p=[["gte","gt","min"],["lte","lt","max"]][h],g=0;g<3&&l[h]==null;g++)l[h]=e[p[g]],o[h]=c[g],d[h]=g===2;l[h]==null&&(l[h]=u[h])}d[0]&&l[1]===1/0&&(o[0]=0),d[1]&&l[0]===-1/0&&(o[1]=0),l[0]===l[1]&&o[0]&&o[1]&&(n.value=l[0])}n.visual=sa.retrieveVisuals(e),r.push(n)},this),oP(t,r),HS(r),B(r,function(e){var a=e.close,n=[["<",""][a[1]],[">",""][a[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,n)},this)}};function oP(r,t){var e=r.inverse;(r.orient==="vertical"?!e:e)&&t.reverse()}var o0e=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.doRender=function(){var e=this.group;e.removeAll();var a=this.visualMapModel,n=a.get("textGap"),s=a.textStyleModel,l=this._getItemAlign(),o=a.itemSize,c=this._getViewData(),u=c.endsText,d=ga(a.get("showLabel",!0),!u),h=!a.get("selectedMode");u&&this._renderEndsText(e,u[0],o,d,l),B(c.viewPieceList,function(p){var g=p.piece,v=new Pe;v.onclick=we(this._onItemClick,this,g),this._enableHoverLink(v,p.indexInModelPieceList);var y=a.getRepresentValue(g);if(this._createItemSymbol(v,y,[0,0,o[0],o[1]],h),d){var x=this.visualMapModel.getValueState(y),b=s.get("align")||l;v.add(new vt({style:Gt(s,{x:b==="right"?-n:o[0]+n,y:o[1]/2,text:g.text,verticalAlign:s.get("verticalAlign")||"middle",align:b,opacity:Me(s.get("opacity"),x==="outOfRange"?.5:1)}),silent:h}))}e.add(v)},this),u&&this._renderEndsText(e,u[1],o,d,l),gu(a.get("orient"),e,a.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,a){var n=this;e.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(l){var o=n.visualMapModel;o.option.hoverLink&&n.api.dispatchAction({type:l,batch:Ux(o.findTargetDataIndices(a),o)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,a=e.option;if(a.orient==="vertical")return dU(e,this.api,e.itemSize);var n=a.align;return(!n||n==="auto")&&(n="left"),n},t.prototype._renderEndsText=function(e,a,n,s,l){if(a){var o=new Pe,c=this.visualMapModel.textStyleModel;o.add(new vt({style:Gt(c,{x:s?l==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:s?l:"center",text:a})})),e.add(o)}},t.prototype._getViewData=function(){var e=this.visualMapModel,a=pe(e.getPieceList(),function(o,c){return{piece:o,indexInModelPieceList:c}}),n=e.get("text"),s=e.get("orient"),l=e.get("inverse");return(s==="horizontal"?l:!l)?a.reverse():n&&(n=n.slice().reverse()),{viewPieceList:a,endsText:n}},t.prototype._createItemSymbol=function(e,a,n,s){var l=Er(this.getControllerVisual(a,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(a,"color"));l.silent=s,e.add(l)},t.prototype._onItemClick=function(e){var a=this.visualMapModel,n=a.option,s=n.selectedMode;if(s){var l=Oe(n.selected),o=a.getSelectedMapKey(e);s==="single"||s===!0?(l[o]=!0,B(l,function(c,u){l[u]=u===o})):l[o]=!l[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:l})}},t.type="visualMap.piecewise",t})(uU);function pU(r){r.registerComponentModel(i0e),r.registerComponentView(o0e),hU(r)}function c0e(r){st(fU),st(pU)}var u0e=(function(){function r(t){this._thumbnailModel=t}return r.prototype.reset=function(t){this._renderVersion=t.getMainProcessVersion()},r.prototype.renderContent=function(t){var e=t.api.getViewOfComponentModel(this._thumbnailModel);e&&(t.group.silent=!0,e.renderContent({group:t.group,targetTrans:t.targetTrans,z2Range:z7(t.group),roamType:t.roamType,viewportRect:t.viewportRect,renderVersion:this._renderVersion}))},r.prototype.updateWindow=function(t,e){var a=e.getViewOfComponentModel(this._thumbnailModel);a&&a.updateWindow({targetTrans:t,renderVersion:this._renderVersion})},r})(),d0e=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return t.prototype.optionUpdated=function(e,a){this._updateBridge()},t.prototype._updateBridge=function(){var e=this._birdge=this._birdge||new u0e(this);if(this._target=null,this.ecModel.eachSeries(function(n){L6(n,null)}),this.shouldShow()){var a=this.getTarget();L6(a.baseMapProvider,e)}},t.prototype.shouldShow=function(){return this.getShallow("show",!0)},t.prototype.getBridge=function(){return this._birdge},t.prototype.getTarget=function(){if(this._target)return this._target;var e=this.getReferringComponents("series",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];return e?e.subType!=="graph"&&(e=null):e=this.ecModel.queryComponents({mainType:"series",subType:"graph"})[0],this._target={baseMapProvider:e},this._target},t.type="thumbnail",t.layoutMode="box",t.dependencies=["series","geo"],t.defaultOption={show:!0,right:1,bottom:1,height:"25%",width:"25%",itemStyle:{borderColor:ee.color.border,borderWidth:2},windowStyle:{borderWidth:1,color:ee.color.neutral30,borderColor:ee.color.neutral40,opacity:.3},z:10},t})(ct),h0e=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){if(this._api=n,this._model=e,this._coordSys||(this._coordSys=new Fu),!this._isEnabled()){this._clear();return}this._renderVersion=n.getMainProcessVersion();var s=this.group;s.removeAll();var l=e.getModel("itemStyle"),o=l.getItemStyle();o.fill==null&&(o.fill=a.get("backgroundColor")||ee.color.neutral00);var c=Kr(e,n).refContainer,u=rr(nB(e,!0),c),d=o.lineWidth||0,h=this._contentRect=Au(u.clone(),d/2,!0,!0),p=new Pe;s.add(p),p.setClipPath(new it({shape:h.plain()}));var g=this._targetGroup=new Pe;p.add(g);var v=u.plain();v.r=l.getShallow("borderRadius",!0),s.add(this._bgRect=new it({style:o,shape:v,silent:!1,cursor:"grab"}));var y=e.getModel("windowStyle"),x=y.getShallow("borderRadius",!0);p.add(this._windowRect=new it({shape:{x:0,y:0,width:0,height:0,r:x},style:y.getItemStyle(),silent:!1,cursor:"grab"})),this._dealRenderContent(),this._dealUpdateWindow(),uP(e,this)},t.prototype.renderContent=function(e){this._bridgeRendered=e,this._isEnabled()&&(this._dealRenderContent(),this._dealUpdateWindow(),uP(this._model,this))},t.prototype._dealRenderContent=function(){var e=this._bridgeRendered;if(!(!e||e.renderVersion!==this._renderVersion)){var a=this._targetGroup,n=this._coordSys,s=this._contentRect;if(a.removeAll(),!!e){var l=e.group,o=l.getBoundingRect();a.add(l),this._bgRect.z2=e.z2Range.min-10,n.setBoundingRect(o.x,o.y,o.width,o.height);var c=rr({left:"center",top:"center",aspect:o.width/o.height},s);n.setViewRect(c.x,c.y,c.width,c.height),l.attr(n.getTransformInfo().raw),this._windowRect.z2=e.z2Range.max+10,this._resetRoamController(e.roamType)}}},t.prototype.updateWindow=function(e){var a=this._bridgeRendered;a&&a.renderVersion===e.renderVersion&&(a.targetTrans=e.targetTrans),this._isEnabled()&&this._dealUpdateWindow()},t.prototype._dealUpdateWindow=function(){var e=this._bridgeRendered;if(!(!e||e.renderVersion!==this._renderVersion)){var a=hs([],e.targetTrans),n=Is([],this._coordSys.transform,a);this._transThisToTarget=hs([],n);var s=e.viewportRect;s?s=s.clone():s=new We(0,0,this._api.getWidth(),this._api.getHeight()),s.applyTransform(n);var l=this._windowRect,o=l.shape.r;l.setShape(Ge({r:o},s))}},t.prototype._resetRoamController=function(e){var a=this,n=this._api,s=this._roamController;if(s||(s=this._roamController=new Uu(n.getZr())),!e||!this._isEnabled()){s.disable();return}s.enable(e,{api:n,zInfo:{component:this._model},triggerInfo:{roamTrigger:null,isInSelf:function(l,o,c){return a._contentRect.contain(o,c)}}}),s.off("pan").off("zoom").on("pan",we(this._onPan,this)).on("zoom",we(this._onZoom,this))},t.prototype._onPan=function(e){var a=this._transThisToTarget;if(!(!this._isEnabled()||!a)){var n=xr([],[e.oldX,e.oldY],a),s=xr([],[e.oldX-e.dx,e.oldY-e.dy],a);this._api.dispatchAction(cP(this._model.getTarget().baseMapProvider,{dx:s[0]-n[0],dy:s[1]-n[1]}))}},t.prototype._onZoom=function(e){var a=this._transThisToTarget;if(!(!this._isEnabled()||!a)){var n=xr([],[e.originX,e.originY],a);this._api.dispatchAction(cP(this._model.getTarget().baseMapProvider,{zoom:1/e.scale,originX:n[0],originY:n[1]}))}},t.prototype._isEnabled=function(){var e=this._model;if(!e||!e.shouldShow())return!1;var a=e.getTarget().baseMapProvider;return!!a},t.prototype._clear=function(){this.group.removeAll(),this._bridgeRendered=null,this._roamController&&this._roamController.disable()},t.prototype.remove=function(){this._clear()},t.prototype.dispose=function(){this._clear()},t.type="thumbnail",t})(Yt);function cP(r,t){var e=r.mainType==="series"?r.subType+"Roam":r.mainType+"Roam",a={type:e};return a[r.mainType+"Id"]=r.id,ie(a,t),a}function uP(r,t){var e=Eu(r);Db(t.group,e.z,e.zlevel)}function f0e(r){r.registerComponentModel(d0e),r.registerComponentView(h0e)}var p0e={label:{enabled:!0},decal:{show:!1}},dP=ut(),g0e={};function m0e(r,t){var e=r.getModel("aria");if(!e.get("enabled"))return;var a=Oe(p0e);rt(a.label,r.getLocaleModel().get("aria"),!1),rt(e.option,a,!1),n(),s();function n(){var u=e.getModel("decal"),d=u.get("show");if(d){var h=De();r.eachSeries(function(p){if(!p.isColorBySeries()){var g=h.get(p.type);g||(g={},h.set(p.type,g)),dP(p).scope=g}}),r.eachRawSeries(function(p){if(r.isSeriesFiltered(p))return;if(Le(p.enableAriaDecal)){p.enableAriaDecal();return}var g=p.getData();if(p.isColorBySeries()){var N=o2(p.ecModel,p.name,g0e,r.getSeriesCount()),w=g.getVisual("decal");g.setVisual("decal",S(w,N))}else{var v=p.getRawData(),y={},x=dP(p).scope;g.each(function(T){var A=g.getRawIndex(T);y[A]=T});var b=v.count();v.each(function(T){var A=y[T],C=v.getName(T)||T+"",M=o2(p.ecModel,C,x,b),R=g.getItemVisual(A,"decal");g.setItemVisual(A,"decal",S(R,M))})}function S(T,A){var C=T?ie(ie({},A),T):A;return C.dirty=!0,C}})}}function s(){var u=t.getZr().dom;if(u){var d=r.getLocaleModel().get("aria"),h=e.getModel("label");if(h.option=Ge(h.option,d),!!h.get("enabled")){if(u.setAttribute("role","img"),h.get("description")){u.setAttribute("aria-label",h.get("description"));return}var p=r.getSeriesCount(),g=h.get(["data","maxCount"])||10,v=h.get(["series","maxCount"])||10,y=Math.min(p,v),x;if(!(p<1)){var b=o();if(b){var N=h.get(["general","withTitle"]);x=l(N,{title:b})}else x=h.get(["general","withoutTitle"]);var w=[],S=p>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);x+=l(S,{seriesCount:p}),r.eachSeries(function(M,R){if(R<y){var k=void 0,L=M.get("name"),O=L?"withName":"withoutName";k=p>1?h.get(["series","multiple",O]):h.get(["series","single",O]),k=l(k,{seriesId:M.seriesIndex,seriesName:M.get("name"),seriesType:c(M.subType)});var z=M.getData();if(z.count()>g){var U=h.get(["data","partialData"]);k+=l(U,{displayCnt:g})}else k+=h.get(["data","allData"]);for(var H=h.get(["data","separator","middle"]),P=h.get(["data","separator","end"]),F=h.get(["data","excludeDimensionId"]),Y=[],X=0;X<z.count();X++)if(X<g){var q=z.getName(X),G=F?Ct(z.getValues(X),function(Z,te){return tt(F,te)===-1}):z.getValues(X),$=h.get(["data",q?"withName":"withoutName"]);Y.push(l($,{name:q,value:G.join(H)}))}k+=Y.join(H)+P,w.push(k)}});var T=h.getModel(["series","multiple","separator"]),A=T.get("middle"),C=T.get("end");x+=w.join(A)+C,u.setAttribute("aria-label",x)}}}}function l(u,d){if(!je(u))return u;var h=u;return B(d,function(p,g){h=h.replace(new RegExp("\\{\\s*"+g+"\\s*\\}","g"),p)}),h}function o(){var u=r.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function c(u){var d=r.getLocaleModel().get(["series","typeNames"]);return d[u]||d.chart}}function v0e(r){if(!(!r||!r.aria)){var t=r.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},B(["description","general","series","data"],function(e){t[e]!=null&&(t.label[e]=t[e])})}}function x0e(r){r.registerPreprocessor(v0e),r.registerVisual(r.PRIORITY.VISUAL.ARIA,m0e)}var hP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},y0e=(function(){function r(t){var e=this._condVal=je(t)?new RegExp(t):oz(t)?t:null;if(e==null){var a="";At(a)}}return r.prototype.evaluate=function(t){var e=typeof t;return je(e)?this._condVal.test(t):xt(e)?this._condVal.test(t+""):!1},r})(),b0e=(function(){function r(){}return r.prototype.evaluate=function(){return this.value},r})(),_0e=(function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},r})(),N0e=(function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},r})(),j0e=(function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r})(),w0e=(function(){function r(){}return r.prototype.evaluate=function(){for(var t=!!this.valueParser,e=this.getValue,a=e(this.valueGetterParam),n=t?this.valueParser(a):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(t?n:a))return!1;return!0},r})();function yE(r,t){if(r===!0||r===!1){var e=new b0e;return e.value=r,e}var a="";return gU(r)||At(a),r.and?fP("and",r,t):r.or?fP("or",r,t):r.not?S0e(r,t):C0e(r,t)}function fP(r,t,e){var a=t[r],n="";de(a)||At(n),a.length||At(n);var s=r==="and"?new _0e:new N0e;return s.children=pe(a,function(l){return yE(l,e)}),s.children.length||At(n),s}function S0e(r,t){var e=r.not,a="";gU(e)||At(a);var n=new j0e;return n.child=yE(e,t),n.child||At(a),n}function C0e(r,t){for(var e="",a=t.prepareGetValue(r),n=[],s=gt(r),l=r.parser,o=l?CB(l):null,c=0;c<s.length;c++){var u=s[c];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var d=Te(hP,u)?hP[u]:u,h=r[u],p=o?o(h):h,g=Wee(d,p)||d==="reg"&&new y0e(p);g||At(e),n.push(g)}}n.length||At(e);var v=new w0e;return v.valueGetterParam=a,v.valueParser=o,v.getValue=t.getValue,v.subCondList=n,v}function gU(r){return Ue(r)&&!Aa(r)}var T0e=(function(){function r(t,e){this._cond=yE(t,e)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r})();function A0e(r,t){return new T0e(r,t)}var E0e={type:"echarts:filter",transform:function(r){for(var t=r.upstream,e,a=A0e(r.config,{valueGetterAttrMap:De({dimension:!0}),prepareGetValue:function(o){var c="",u=o.dimension;Te(o,"dimension")||At(c);var d=t.getDimensionInfo(u);return d||At(c),{dimIdx:d.index}},getValue:function(o){return t.retrieveValueFromItem(e,o.dimIdx)}}),n=[],s=0,l=t.count();s<l;s++)e=t.getRawDataItem(s),a.evaluate()&&n.push(e);return{data:n}}},D0e={type:"echarts:sort",transform:function(r){var t=r.upstream,e=r.config,a="",n=Ft(e);n.length||At(a);var s=[];B(n,function(d){var h=d.dimension,p=d.order,g=d.parser,v=d.incomparable;if(h==null&&At(a),p!=="asc"&&p!=="desc"&&At(a),v&&v!=="min"&&v!=="max"){var y="";At(y)}if(p!=="asc"&&p!=="desc"){var x="";At(x)}var b=t.getDimensionInfo(h);b||At(a);var N=g?CB(g):null;g&&!N&&At(a),s.push({dimIdx:b.index,parser:N,comparator:new AB(p,v)})});var l=t.sourceFormat;l!==va&&l!==On&&At(a);for(var o=[],c=0,u=t.count();c<u;c++)o.push(t.getRawDataItem(c));return o.sort(function(d,h){for(var p=0;p<s.length;p++){var g=s[p],v=t.retrieveValueFromItem(d,g.dimIdx),y=t.retrieveValueFromItem(h,g.dimIdx);g.parser&&(v=g.parser(v),y=g.parser(y));var x=g.comparator.evaluate(v,y);if(x!==0)return x}return 0}),{data:o}}};function M0e(r){r.registerTransform(E0e),r.registerTransform(D0e)}var R0e=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataset",e}return t.prototype.init=function(e,a,n){r.prototype.init.call(this,e,a,n),this._sourceManager=new RB(this),YL(this)},t.prototype.mergeOption=function(e,a){r.prototype.mergeOption.call(this,e,a),YL(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Ps},t})(ct),L0e=(function(r){re(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="dataset",e}return t.type="dataset",t})(Yt);function I0e(r){r.registerComponentModel(R0e),r.registerComponentView(L0e)}var si=wi.CMD;function vh(r,t){return Math.abs(r-t)<1e-5}function jC(r){var t=r.data,e=r.len(),a=[],n,s=0,l=0,o=0,c=0;function u(z,U){n&&n.length>2&&a.push(n),n=[z,U]}function d(z,U,H,P){vh(z,H)&&vh(U,P)||n.push(z,U,H,P,H,P)}function h(z,U,H,P,F,Y){var X=Math.abs(U-z),q=Math.tan(X/4)*4/3,G=U<z?-1:1,$=Math.cos(z),Z=Math.sin(z),te=Math.cos(U),me=Math.sin(U),Ce=$*F+H,Ve=Z*Y+P,Ee=te*F+H,be=me*Y+P,He=F*q*G,Se=Y*q*G;n.push(Ce-He*Z,Ve+Se*$,Ee+He*me,be-Se*te,Ee,be)}for(var p,g,v,y,x=0;x<e;){var b=t[x++],N=x===1;switch(N&&(s=t[x],l=t[x+1],o=s,c=l,(b===si.L||b===si.C||b===si.Q)&&(n=[o,c])),b){case si.M:s=o=t[x++],l=c=t[x++],u(o,c);break;case si.L:p=t[x++],g=t[x++],d(s,l,p,g),s=p,l=g;break;case si.C:n.push(t[x++],t[x++],t[x++],t[x++],s=t[x++],l=t[x++]);break;case si.Q:p=t[x++],g=t[x++],v=t[x++],y=t[x++],n.push(s+2/3*(p-s),l+2/3*(g-l),v+2/3*(p-v),y+2/3*(g-y),v,y),s=v,l=y;break;case si.A:var w=t[x++],S=t[x++],T=t[x++],A=t[x++],C=t[x++],M=t[x++]+C;x+=1;var R=!t[x++];p=Math.cos(C)*T+w,g=Math.sin(C)*A+S,N?(o=p,c=g,u(o,c)):d(s,l,p,g),s=Math.cos(M)*T+w,l=Math.sin(M)*A+S;for(var k=(R?-1:1)*Math.PI/2,L=C;R?L>M:L<M;L+=k){var O=R?Math.max(L+k,M):Math.min(L+k,M);h(L,O,w,S,T,A)}break;case si.R:o=s=t[x++],c=l=t[x++],p=o+t[x++],g=c+t[x++],u(p,c),d(p,c,p,g),d(p,g,o,g),d(o,g,o,c),d(o,c,p,c);break;case si.Z:n&&d(s,l,o,c),s=o,l=c;break}}return n&&n.length>2&&a.push(n),a}function wC(r,t,e,a,n,s,l,o,c,u){if(vh(r,e)&&vh(t,a)&&vh(n,l)&&vh(s,o)){c.push(l,o);return}var d=2/u,h=d*d,p=l-r,g=o-t,v=Math.sqrt(p*p+g*g);p/=v,g/=v;var y=e-r,x=a-t,b=n-l,N=s-o,w=y*y+x*x,S=b*b+N*N;if(w<h&&S<h){c.push(l,o);return}var T=p*y+g*x,A=-p*b-g*N,C=w-T*T,M=S-A*A;if(C<h&&T>=0&&M<h&&A>=0){c.push(l,o);return}var R=[],k=[];Po(r,e,n,l,.5,R),Po(t,a,s,o,.5,k),wC(R[0],k[0],R[1],k[1],R[2],k[2],R[3],k[3],c,u),wC(R[4],k[4],R[5],k[5],R[6],k[6],R[7],k[7],c,u)}function k0e(r,t){var e=jC(r),a=[];t=t||1;for(var n=0;n<e.length;n++){var s=e[n],l=[],o=s[0],c=s[1];l.push(o,c);for(var u=2;u<s.length;){var d=s[u++],h=s[u++],p=s[u++],g=s[u++],v=s[u++],y=s[u++];wC(o,c,d,h,p,g,v,y,l,t),o=v,c=y}a.push(l)}return a}function mU(r,t,e){var a=r[t],n=r[1-t],s=Math.abs(a/n),l=Math.ceil(Math.sqrt(s*e)),o=Math.floor(e/l);o===0&&(o=1,l=e);for(var c=[],u=0;u<l;u++)c.push(o);var d=l*o,h=e-d;if(h>0)for(var u=0;u<h;u++)c[u%l]+=1;return c}function pP(r,t,e){for(var a=r.r0,n=r.r,s=r.startAngle,l=r.endAngle,o=Math.abs(l-s),c=o*n,u=n-a,d=c>Math.abs(u),h=mU([c,u],d?0:1,t),p=(d?o:u)/h.length,g=0;g<h.length;g++)for(var v=(d?u:o)/h[g],y=0;y<h[g];y++){var x={};d?(x.startAngle=s+p*g,x.endAngle=s+p*(g+1),x.r0=a+v*y,x.r=a+v*(y+1)):(x.startAngle=s+v*y,x.endAngle=s+v*(y+1),x.r0=a+p*g,x.r=a+p*(g+1)),x.clockwise=r.clockwise,x.cx=r.cx,x.cy=r.cy,e.push(x)}}function O0e(r,t,e){for(var a=r.width,n=r.height,s=a>n,l=mU([a,n],s?0:1,t),o=s?"width":"height",c=s?"height":"width",u=s?"x":"y",d=s?"y":"x",h=r[o]/l.length,p=0;p<l.length;p++)for(var g=r[c]/l[p],v=0;v<l[p];v++){var y={};y[u]=p*h,y[d]=v*g,y[o]=h,y[c]=g,y.x+=r.x,y.y+=r.y,e.push(y)}}function gP(r,t,e,a){return r*a-e*t}function P0e(r,t,e,a,n,s,l,o){var c=e-r,u=a-t,d=l-n,h=o-s,p=gP(d,h,c,u);if(Math.abs(p)<1e-6)return null;var g=r-n,v=t-s,y=gP(g,v,d,h)/p;return y<0||y>1?null:new Ye(y*c+r,y*u+t)}function z0e(r,t,e){var a=new Ye;Ye.sub(a,e,t),a.normalize();var n=new Ye;Ye.sub(n,r,t);var s=n.dot(a);return s}function ah(r,t){var e=r[r.length-1];e&&e[0]===t[0]&&e[1]===t[1]||r.push(t)}function B0e(r,t,e){for(var a=r.length,n=[],s=0;s<a;s++){var l=r[s],o=r[(s+1)%a],c=P0e(l[0],l[1],o[0],o[1],t.x,t.y,e.x,e.y);c&&n.push({projPt:z0e(c,t,e),pt:c,idx:s})}if(n.length<2)return[{points:r},{points:r}];n.sort(function(x,b){return x.projPt-b.projPt});var u=n[0],d=n[n.length-1];if(d.idx<u.idx){var h=u;u=d,d=h}for(var p=[u.pt.x,u.pt.y],g=[d.pt.x,d.pt.y],v=[p],y=[g],s=u.idx+1;s<=d.idx;s++)ah(v,r[s].slice());ah(v,g),ah(v,p);for(var s=d.idx+1;s<=u.idx+a;s++)ah(y,r[s%a].slice());return ah(y,p),ah(y,g),[{points:v},{points:y}]}function mP(r){var t=r.points,e=[],a=[];wb(t,e,a);var n=new We(e[0],e[1],a[0]-e[0],a[1]-e[1]),s=n.width,l=n.height,o=n.x,c=n.y,u=new Ye,d=new Ye;return s>l?(u.x=d.x=o+s/2,u.y=c,d.y=c+l):(u.y=d.y=c+l/2,u.x=o,d.x=o+s),B0e(t,u,d)}function eb(r,t,e,a){if(e===1)a.push(t);else{var n=Math.floor(e/2),s=r(t);eb(r,s[0],n,a),eb(r,s[1],e-n,a)}return a}function V0e(r,t){for(var e=[],a=0;a<t;a++)e.push(pT(r));return e}function H0e(r,t){t.setStyle(r.style),t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel}function G0e(r){for(var t=[],e=0;e<r.length;)t.push([r[e++],r[e++]]);return t}function U0e(r,t){var e=[],a=r.shape,n;switch(r.type){case"rect":O0e(a,t,e),n=it;break;case"sector":pP(a,t,e),n=Da;break;case"circle":pP({r0:0,r:a.r,startAngle:0,endAngle:Math.PI*2,cx:a.cx,cy:a.cy},t,e),n=Da;break;default:var s=r.getComputedTransform(),l=s?Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1],s[2]*s[2]+s[3]*s[3])):1,o=pe(k0e(r.getUpdatedPathProxy(),l),function(b){return G0e(b)}),c=o.length;if(c===0)eb(mP,{points:o[0]},t,e);else if(c===t)for(var u=0;u<c;u++)e.push({points:o[u]});else{var d=0,h=pe(o,function(b){var N=[],w=[];wb(b,N,w);var S=(w[1]-N[1])*(w[0]-N[0]);return d+=S,{poly:b,area:S}});h.sort(function(b,N){return N.area-b.area});for(var p=t,u=0;u<c;u++){var g=h[u];if(p<=0)break;var v=u===c-1?p:Math.ceil(g.area/d*t);v<0||(eb(mP,{points:g.poly},v,e),p-=v)}}n=Ma;break}if(!n)return V0e(r,t);for(var y=[],u=0;u<e.length;u++){var x=new n;x.setShape(e[u]),H0e(r,x),y.push(x)}return y}function F0e(r,t){var e=r.length,a=t.length;if(e===a)return[r,t];for(var n=[],s=[],l=e<a?r:t,o=Math.min(e,a),c=Math.abs(a-e)/6,u=(o-2)/6,d=Math.ceil(c/u)+1,h=[l[0],l[1]],p=c,g=2;g<o;){var v=l[g-2],y=l[g-1],x=l[g++],b=l[g++],N=l[g++],w=l[g++],S=l[g++],T=l[g++];if(p<=0){h.push(x,b,N,w,S,T);continue}for(var A=Math.min(p,d-1)+1,C=1;C<=A;C++){var M=C/A;Po(v,x,N,S,M,n),Po(y,b,w,T,M,s),v=n[3],y=s[3],h.push(n[1],s[1],n[2],s[2],v,y),x=n[5],b=s[5],N=n[6],w=s[6]}p-=A-1}return l===r?[h,t]:[r,h]}function vP(r,t){for(var e=r.length,a=r[e-2],n=r[e-1],s=[],l=0;l<t.length;)s[l++]=a,s[l++]=n;return s}function Y0e(r,t){for(var e,a,n,s=[],l=[],o=0;o<Math.max(r.length,t.length);o++){var c=r[o],u=t[o],d=void 0,h=void 0;c?u?(e=F0e(c,u),d=e[0],h=e[1],a=d,n=h):(h=vP(n||c,c),d=c):(d=vP(a||u,u),h=u),s.push(d),l.push(h)}return[s,l]}function xP(r){for(var t=0,e=0,a=0,n=r.length,s=0,l=n-2;s<n;l=s,s+=2){var o=r[l],c=r[l+1],u=r[s],d=r[s+1],h=o*d-u*c;t+=h,e+=(o+u)*h,a+=(c+d)*h}return t===0?[r[0]||0,r[1]||0]:[e/t/3,a/t/3,t]}function W0e(r,t,e,a){for(var n=(r.length-2)/6,s=1/0,l=0,o=r.length,c=o-2,u=0;u<n;u++){for(var d=u*6,h=0,p=0;p<o;p+=2){var g=p===0?d:(d+p-2)%c+2,v=r[g]-e[0],y=r[g+1]-e[1],x=t[p]-a[0],b=t[p+1]-a[1],N=x-v,w=b-y;h+=N*N+w*w}h<s&&(s=h,l=u)}return l}function $0e(r){for(var t=[],e=r.length,a=0;a<e;a+=2)t[a]=r[e-a-2],t[a+1]=r[e-a-1];return t}function q0e(r,t,e,a){for(var n=[],s,l=0;l<r.length;l++){var o=r[l],c=t[l],u=xP(o),d=xP(c);s==null&&(s=u[2]<0!=d[2]<0);var h=[],p=[],g=0,v=1/0,y=[],x=o.length;s&&(o=$0e(o));for(var b=W0e(o,c,u,d)*6,N=x-2,w=0;w<N;w+=2){var S=(b+w)%N+2;h[w+2]=o[S]-u[0],h[w+3]=o[S+1]-u[1]}h[0]=o[b]-u[0],h[1]=o[b+1]-u[1];for(var T=a/e,A=-a/2;A<=a/2;A+=T){for(var C=Math.sin(A),M=Math.cos(A),R=0,w=0;w<o.length;w+=2){var k=h[w],L=h[w+1],O=c[w]-d[0],z=c[w+1]-d[1],U=O*M-z*C,H=O*C+z*M;y[w]=U,y[w+1]=H;var P=U-k,F=H-L;R+=P*P+F*F}if(R<v){v=R,g=A;for(var Y=0;Y<y.length;Y++)p[Y]=y[Y]}}n.push({from:h,to:p,fromCp:u,toCp:d,rotation:-g})}return n}function tb(r){return r.__isCombineMorphing}var vU="__mOriginal_";function rb(r,t,e){var a=vU+t,n=r[a]||r[t];r[a]||(r[a]=r[t]);var s=e.replace,l=e.after,o=e.before;r[t]=function(){var c=arguments,u;return o&&o.apply(this,c),s?u=s.apply(this,c):u=n.apply(this,c),l&&l.apply(this,c),u}}function Dg(r,t){var e=vU+t;r[e]&&(r[t]=r[e],r[e]=null)}function yP(r,t){for(var e=0;e<r.length;e++)for(var a=r[e],n=0;n<a.length;){var s=a[n],l=a[n+1];a[n++]=t[0]*s+t[2]*l+t[4],a[n++]=t[1]*s+t[3]*l+t[5]}}function xU(r,t){var e=r.getUpdatedPathProxy(),a=t.getUpdatedPathProxy(),n=Y0e(jC(e),jC(a)),s=n[0],l=n[1],o=r.getComputedTransform(),c=t.getComputedTransform();function u(){this.transform=null}o&&yP(s,o),c&&yP(l,c),rb(t,"updateTransform",{replace:u}),t.transform=null;var d=q0e(s,l,10,Math.PI),h=[];rb(t,"buildPath",{replace:function(p){for(var g=t.__morphT,v=1-g,y=[],x=0;x<d.length;x++){var b=d[x],N=b.from,w=b.to,S=b.rotation*g,T=b.fromCp,A=b.toCp,C=Math.sin(S),M=Math.cos(S);xg(y,T,A,g);for(var R=0;R<N.length;R+=2){var k=N[R],L=N[R+1],O=w[R],z=w[R+1],U=k*v+O*g,H=L*v+z*g;h[R]=U*M-H*C+y[0],h[R+1]=U*C+H*M+y[1]}var P=h[0],F=h[1];p.moveTo(P,F);for(var R=2;R<N.length;){var O=h[R++],z=h[R++],Y=h[R++],X=h[R++],q=h[R++],G=h[R++];P===O&&F===z&&Y===q&&X===G?p.lineTo(q,G):p.bezierCurveTo(O,z,Y,X,q,G),P=q,F=G}}}})}function bE(r,t,e){if(!r||!t)return t;var a=e.done,n=e.during;xU(r,t),t.__morphT=0;function s(){Dg(t,"buildPath"),Dg(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},Ge({during:function(l){t.dirtyShape(),n&&n(l)},done:function(){s(),a&&a()}},e)),t}function X0e(r,t,e,a,n,s){var l=16;r=n===e?0:Math.round(32767*(r-e)/(n-e)),t=s===a?0:Math.round(32767*(t-a)/(s-a));for(var o=0,c,u=(1<<l)/2;u>0;u/=2){var d=0,h=0;(r&u)>0&&(d=1),(t&u)>0&&(h=1),o+=u*u*(3*d^h),h===0&&(d===1&&(r=u-1-r,t=u-1-t),c=r,r=t,t=c)}return o}function ab(r){var t=1/0,e=1/0,a=-1/0,n=-1/0,s=pe(r,function(o){var c=o.getBoundingRect(),u=o.getComputedTransform(),d=c.x+c.width/2+(u?u[4]:0),h=c.y+c.height/2+(u?u[5]:0);return t=Math.min(d,t),e=Math.min(h,e),a=Math.max(d,a),n=Math.max(h,n),[d,h]}),l=pe(s,function(o,c){return{cp:o,z:X0e(o[0],o[1],t,e,a,n),path:r[c]}});return l.sort(function(o,c){return o.z-c.z}).map(function(o){return o.path})}function yU(r){return U0e(r.path,r.count)}function SC(){return{fromIndividuals:[],toIndividuals:[],count:0}}function Z0e(r,t,e){var a=[];function n(T){for(var A=0;A<T.length;A++){var C=T[A];tb(C)?n(C.childrenRef()):C instanceof ht&&a.push(C)}}n(r);var s=a.length;if(!s)return SC();var l=e.dividePath||yU,o=l({path:t,count:s});if(o.length!==s)return console.error("Invalid morphing: unmatched splitted path"),SC();a=ab(a),o=ab(o);for(var c=e.done,u=e.during,d=e.individualDelay,h=new fl,p=0;p<s;p++){var g=a[p],v=o[p];v.parent=t,v.copyTransform(h),d||xU(g,v)}t.__isCombineMorphing=!0,t.childrenRef=function(){return o};function y(T){for(var A=0;A<o.length;A++)o[A].addSelfToZr(T)}rb(t,"addSelfToZr",{after:function(T){y(T)}}),rb(t,"removeSelfFromZr",{after:function(T){for(var A=0;A<o.length;A++)o[A].removeSelfFromZr(T)}});function x(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,Dg(t,"addSelfToZr"),Dg(t,"removeSelfFromZr")}var b=o.length;if(d)for(var N=b,w=function(){N--,N===0&&(x(),c&&c())},p=0;p<b;p++){var S=d?Ge({delay:(e.delay||0)+d(p,b,a[p],o[p]),done:w},e):e;bE(a[p],o[p],S)}else t.__morphT=0,t.animateTo({__morphT:1},Ge({during:function(T){for(var A=0;A<b;A++){var C=o[A];C.__morphT=t.__morphT,C.dirtyShape()}u&&u(T)},done:function(){x();for(var T=0;T<r.length;T++)Dg(r[T],"updateTransform");c&&c()}},e));return t.__zr&&y(t.__zr),{fromIndividuals:a,toIndividuals:o,count:b}}function K0e(r,t,e){var a=t.length,n=[],s=e.dividePath||yU;function l(g){for(var v=0;v<g.length;v++){var y=g[v];tb(y)?l(y.childrenRef()):y instanceof ht&&n.push(y)}}if(tb(r)){l(r.childrenRef());var o=n.length;if(o<a)for(var c=0,u=o;u<a;u++)n.push(pT(n[c++%o]));n.length=a}else{n=s({path:r,count:a});for(var d=r.getComputedTransform(),u=0;u<n.length;u++)n[u].setLocalTransform(d);if(n.length!==a)return console.error("Invalid morphing: unmatched splitted path"),SC()}n=ab(n),t=ab(t);for(var h=e.individualDelay,u=0;u<a;u++){var p=h?Ge({delay:(e.delay||0)+h(u,a,n[u],t[u])},e):e;bE(n[u],t[u],p)}return{fromIndividuals:n,toIndividuals:t,count:t.length}}function bP(r){return de(r[0])}function _P(r,t){for(var e=[],a=r.length,n=0;n<a;n++)e.push({one:r[n],many:[]});for(var n=0;n<t.length;n++){var s=t[n].length,l=void 0;for(l=0;l<s;l++)e[l%a].many.push(t[n][l])}for(var o=0,n=a-1;n>=0;n--)if(!e[n].many.length){var c=e[o].many;if(c.length<=1)if(o)o=0;else return e;var s=c.length,u=Math.ceil(s/2);e[n].many=c.slice(u,s),e[o].many=c.slice(0,u),o++}return e}var Q0e={clone:function(r){for(var t=[],e=1-Math.pow(1-r.path.style.opacity,1/r.count),a=0;a<r.count;a++){var n=pT(r.path);n.setStyle("opacity",e),t.push(n)}return t},split:null};function Pw(r,t,e,a,n,s){if(!r.length||!t.length)return;var l=tf("update",a,n);if(!(l&&l.duration>0))return;var o=a.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},l),u,d;bP(r)&&(u=r,d=t),bP(t)&&(u=t,d=r);function h(b,N,w,S,T){var A=b.many,C=b.one;if(A.length===1&&!T){var M=N?A[0]:C,R=N?C:A[0];if(tb(M))h({many:[M],one:R},!0,w,S,!0);else{var k=o?Ge({delay:o(w,S)},c):c;bE(M,R,k),s(M,R,M,R,k)}}else for(var L=Ge({dividePath:Q0e[e],individualDelay:o&&function(F,Y,X,q){return o(F+w,S)}},c),O=N?Z0e(A,C,L):K0e(C,A,L),z=O.fromIndividuals,U=O.toIndividuals,H=z.length,P=0;P<H;P++){var k=o?Ge({delay:o(P,H)},c):c;s(z[P],U[P],N?A[P]:b.one,N?b.one:A[P],k)}}for(var p=u?u===r:r.length>t.length,g=u?_P(d,u):_P(p?t:r,[p?r:t]),v=0,y=0;y<g.length;y++)v+=g[y].many.length;for(var x=0,y=0;y<g.length;y++)h(g[y],p,x,v),x+=g[y].many.length}function $c(r){if(!r)return[];if(de(r)){for(var t=[],e=0;e<r.length;e++)t.push($c(r[e]));return t}var a=[];return r.traverse(function(n){n instanceof ht&&!n.disableMorphing&&!n.invisible&&!n.ignore&&a.push(n)}),a}var bU=1e4,J0e=0,NP=1,jP=2,exe=ut();function txe(r,t){for(var e=r.dimensions,a=0;a<e.length;a++){var n=r.getDimensionInfo(e[a]);if(n&&n.otherDims[t]===0)return e[a]}}function rxe(r,t,e){var a=r.getDimensionInfo(e),n=a&&a.ordinalMeta;if(a){var s=r.get(a.name,t);return n&&n.categories[s]||s+""}}function wP(r,t,e,a){var n=a?"itemChildGroupId":"itemGroupId",s=txe(r,n);if(s){var l=rxe(r,t,s);return l}var o=r.getRawDataItem(t),c=a?"childGroupId":"groupId";if(o&&o[c])return o[c]+"";if(!a)return e||r.getId(t)}function SP(r){var t=[];return B(r,function(e){var a=e.data,n=e.dataGroupId;if(!(a.count()>bU))for(var s=a.getIndices(),l=0;l<s.length;l++)t.push({data:a,groupId:wP(a,l,n,!1),childGroupId:wP(a,l,n,!0),divide:e.divide,dataIndex:l})}),t}function zw(r,t,e){r.traverse(function(a){a instanceof ht&&Kt(a,{style:{opacity:0}},t,{dataIndex:e,isFrom:!0})})}function Bw(r){if(r.parent){var t=r.getComputedTransform();r.setLocalTransform(t),r.parent.remove(r)}}function nh(r){r.stopAnimation(),r.isGroup&&r.traverse(function(t){t.stopAnimation()})}function axe(r,t,e){var a=tf("update",e,t);a&&r.traverse(function(n){if(n instanceof fs){var s=bJ(n);s&&n.animateFrom({style:s},a)}})}function nxe(r,t){var e=r.length;if(e!==t.length)return!1;for(var a=0;a<e;a++){var n=r[a],s=t[a];if(n.data.getId(n.dataIndex)!==s.data.getId(s.dataIndex))return!1}return!0}function _U(r,t,e){var a=SP(r),n=SP(t);function s(w,S,T,A,C){(T||w)&&S.animateFrom({style:T&&T!==w?ie(ie({},T.style),w.style):w.style},C)}var l=!1,o=J0e,c=De(),u=De();a.forEach(function(w){w.groupId&&c.set(w.groupId,!0),w.childGroupId&&u.set(w.childGroupId,!0)});for(var d=0;d<n.length;d++){var h=n[d].groupId;if(u.get(h)){o=NP;break}var p=n[d].childGroupId;if(p&&c.get(p)){o=jP;break}}function g(w,S){return function(T){var A=T.data,C=T.dataIndex;return S?A.getId(C):w?o===NP?T.childGroupId:T.groupId:o===jP?T.childGroupId:T.groupId}}var v=nxe(a,n),y={};if(!v)for(var d=0;d<n.length;d++){var x=n[d],b=x.data.getItemGraphicEl(x.dataIndex);b&&(y[b.id]=!0)}function N(w,S){var T=a[S],A=n[w],C=A.data.hostModel,M=T.data.getItemGraphicEl(T.dataIndex),R=A.data.getItemGraphicEl(A.dataIndex);if(M===R){R&&axe(R,A.dataIndex,C);return}M&&y[M.id]||R&&(nh(R),M?(nh(M),Bw(M),l=!0,Pw($c(M),$c(R),A.divide,C,w,s)):zw(R,C,w))}new Tl(a,n,g(!0,v),g(!1,v),null,"multiple").update(N).updateManyToOne(function(w,S){var T=n[w],A=T.data,C=A.hostModel,M=A.getItemGraphicEl(T.dataIndex),R=Ct(pe(S,function(k){return a[k].data.getItemGraphicEl(a[k].dataIndex)}),function(k){return k&&k!==M&&!y[k.id]});M&&(nh(M),R.length?(B(R,function(k){nh(k),Bw(k)}),l=!0,Pw($c(R),$c(M),T.divide,C,w,s)):zw(M,C,T.dataIndex))}).updateOneToMany(function(w,S){var T=a[S],A=T.data.getItemGraphicEl(T.dataIndex);if(!(A&&y[A.id])){var C=Ct(pe(w,function(R){return n[R].data.getItemGraphicEl(n[R].dataIndex)}),function(R){return R&&R!==A}),M=n[w[0]].data.hostModel;C.length&&(B(C,function(R){return nh(R)}),A?(nh(A),Bw(A),l=!0,Pw($c(A),$c(C),T.divide,M,w[0],s)):B(C,function(R){return zw(R,M,w[0])}))}}).updateManyToMany(function(w,S){new Tl(S,w,function(T){return a[T].data.getId(a[T].dataIndex)},function(T){return n[T].data.getId(n[T].dataIndex)}).update(function(T,A){N(w[T],S[A])}).execute()}).execute(),l&&B(t,function(w){var S=w.data,T=S.hostModel,A=T&&e.getViewOfSeriesModel(T),C=tf("update",T,0);A&&T.isAnimationEnabled()&&C&&C.duration>0&&A.group.traverse(function(M){M instanceof ht&&!M.animators.length&&M.animateFrom({style:{opacity:0}},C)})})}function CP(r){var t=r.getModel("universalTransition").get("seriesKey");return t||r.id}function TP(r){return de(r)?r.sort().join(","):r}function xo(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function sxe(r,t){var e=De(),a=De(),n=De();return B(r.oldSeries,function(s,l){var o=r.oldDataGroupIds[l],c=r.oldData[l],u=CP(s),d=TP(u);a.set(d,{dataGroupId:o,data:c}),de(u)&&B(u,function(h){n.set(h,{key:d,dataGroupId:o,data:c})})}),B(t.updatedSeries,function(s){if(s.isUniversalTransitionEnabled()&&s.isAnimationEnabled()){var l=s.get("dataGroupId"),o=s.getData(),c=CP(s),u=TP(c),d=a.get(u);if(d)e.set(u,{oldSeries:[{dataGroupId:d.dataGroupId,divide:xo(d.data),data:d.data}],newSeries:[{dataGroupId:l,divide:xo(o),data:o}]});else if(de(c)){var h=[];B(c,function(v){var y=a.get(v);y.data&&h.push({dataGroupId:y.dataGroupId,divide:xo(y.data),data:y.data})}),h.length&&e.set(u,{oldSeries:h,newSeries:[{dataGroupId:l,data:o,divide:xo(o)}]})}else{var p=n.get(c);if(p){var g=e.get(p.key);g||(g={oldSeries:[{dataGroupId:p.dataGroupId,data:p.data,divide:xo(p.data)}],newSeries:[]},e.set(p.key,g)),g.newSeries.push({dataGroupId:l,data:o,divide:xo(o)})}}}}),e}function AP(r,t){for(var e=0;e<r.length;e++){var a=t.seriesIndex!=null&&t.seriesIndex===r[e].seriesIndex||t.seriesId!=null&&t.seriesId===r[e].id;if(a)return e}}function ixe(r,t,e,a){var n=[],s=[];B(Ft(r.from),function(l){var o=AP(t.oldSeries,l);o>=0&&n.push({dataGroupId:t.oldDataGroupIds[o],data:t.oldData[o],divide:xo(t.oldData[o]),groupIdDim:l.dimension})}),B(Ft(r.to),function(l){var o=AP(e.updatedSeries,l);if(o>=0){var c=e.updatedSeries[o].getData();s.push({dataGroupId:t.oldDataGroupIds[o],data:c,divide:xo(c),groupIdDim:l.dimension})}}),n.length>0&&s.length>0&&_U(n,s,a)}function lxe(r){r.registerUpdateLifecycle("series:beforeupdate",function(t,e,a){B(Ft(a.seriesTransition),function(n){B(Ft(n.to),function(s){for(var l=a.updatedSeries,o=0;o<l.length;o++)(s.seriesIndex!=null&&s.seriesIndex===l[o].seriesIndex||s.seriesId!=null&&s.seriesId===l[o].id)&&(l[o][Ox]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(t,e,a){var n=exe(e);if(n.oldSeries&&a.updatedSeries&&a.optionChanged){var s=a.seriesTransition;if(s)B(Ft(s),function(g){ixe(g,n,a,e)});else{var l=sxe(n,a);B(l.keys(),function(g){var v=l.get(g);_U(v.oldSeries,v.newSeries,e)})}B(a.updatedSeries,function(g){g[Ox]&&(g[Ox]=!1)})}for(var o=t.getSeries(),c=n.oldSeries=[],u=n.oldDataGroupIds=[],d=n.oldData=[],h=0;h<o.length;h++){var p=o[h].getData();p.count()<bU&&(c.push(o[h]),u.push(o[h].get("dataGroupId")),d.push(p))}})}var oxe=(function(){function r(){this.breaks=[],this._elapsedExtent=[1/0,-1/0]}return r.prototype.setBreaks=function(t){this.breaks=t.breaks},r.prototype.update=function(t){uxe(this,t);var e=this._elapsedExtent;e[0]=this.elapse(t[0]),e[1]=this.elapse(t[1])},r.prototype.hasBreaks=function(){return!!this.breaks.length},r.prototype.calcNiceTickMultiple=function(t,e){for(var a=0;a<this.breaks.length;a++){var n=this.breaks[a];if(n.vmin<t&&t<n.vmax){var s=e(t,n.vmax);return s}}return 0},r.prototype.getExtentSpan=function(){return this._elapsedExtent[1]-this._elapsedExtent[0]},r.prototype.normalize=function(t){var e=this._elapsedExtent[1]-this._elapsedExtent[0];return e===0?.5:(this.elapse(t)-this._elapsedExtent[0])/e},r.prototype.scale=function(t){return this.unelapse(t*(this._elapsedExtent[1]-this._elapsedExtent[0])+this._elapsedExtent[0])},r.prototype.elapse=function(t){for(var e=EP,a=DP,n=!0,s=0;s<this.breaks.length;s++){var l=this.breaks[s];if(t<=l.vmax){t>l.vmin?e+=l.vmin-a+(t-l.vmin)/(l.vmax-l.vmin)*l.gapReal:e+=t-a,a=l.vmax,n=!1;break}e+=l.vmin-a+l.gapReal,a=l.vmax}return n&&(e+=t-a),e},r.prototype.unelapse=function(t){for(var e=EP,a=DP,n=!0,s=0,l=0;l<this.breaks.length;l++){var o=this.breaks[l],c=e+o.vmin-a,u=c+o.gapReal;if(t<=u){t>c?s=o.vmin+(t-c)/(u-c)*(o.vmax-o.vmin):s=a+t-e,a=o.vmax,n=!1;break}e=u,a=o.vmax}return n&&(s=a+t-e),s},r})();function cxe(){return new oxe}var EP=0,DP=0;function uxe(r,t){var e=0,a={tpAbs:{span:0,val:0},tpPrct:{span:0,val:0}},n=function(){return{has:!1,span:NaN,inExtFrac:NaN,val:NaN}},s={S:{tpAbs:n(),tpPrct:n()},E:{tpAbs:n(),tpPrct:n()}};B(r.breaks,function(o){var c=o.gapParsed;c.type==="tpPrct"&&(e+=c.val);var u=_E(o,t);if(u){var d=u.vmin!==o.vmin,h=u.vmax!==o.vmax,p=u.vmax-u.vmin;if(!(d&&h))if(d||h){var g=d?"S":"E";s[g][c.type].has=!0,s[g][c.type].span=p,s[g][c.type].inExtFrac=p/(o.vmax-o.vmin),s[g][c.type].val=c.val}else a[c.type].span+=p,a[c.type].val+=c.val}});var l=e*(0+(t[1]-t[0])+(a.tpAbs.val-a.tpAbs.span)+(s.S.tpAbs.has?(s.S.tpAbs.val-s.S.tpAbs.span)*s.S.tpAbs.inExtFrac:0)+(s.E.tpAbs.has?(s.E.tpAbs.val-s.E.tpAbs.span)*s.E.tpAbs.inExtFrac:0)-a.tpPrct.span-(s.S.tpPrct.has?s.S.tpPrct.span*s.S.tpPrct.inExtFrac:0)-(s.E.tpPrct.has?s.E.tpPrct.span*s.E.tpPrct.inExtFrac:0))/(1-a.tpPrct.val-(s.S.tpPrct.has?s.S.tpPrct.val*s.S.tpPrct.inExtFrac:0)-(s.E.tpPrct.has?s.E.tpPrct.val*s.E.tpPrct.inExtFrac:0));B(r.breaks,function(o){var c=o.gapParsed;c.type==="tpPrct"&&(o.gapReal=e!==0?Math.max(l,0)*c.val/e:0),c.type==="tpAbs"&&(o.gapReal=c.val),o.gapReal==null&&(o.gapReal=0)})}function dxe(r,t,e,a,n,s){r!=="no"&&B(e,function(l){var o=_E(l,s);if(o)for(var c=t.length-1;c>=0;c--){var u=t[c],d=a(u),h=n*3/4;d>o.vmin-h&&d<o.vmax+h&&(r!=="preserve_extent_bound"||d!==s[0]&&d!==s[1])&&t.splice(c,1)}})}function hxe(r,t,e,a){B(t,function(n){var s=_E(n,e);s&&(r.push({value:s.vmin,break:{type:"vmin",parsedBreak:s},time:a?a(s):void 0}),r.push({value:s.vmax,break:{type:"vmax",parsedBreak:s},time:a?a(s):void 0}))}),t.length&&r.sort(function(n,s){return n.value-s.value})}function _E(r,t){var e=Math.max(r.vmin,t[0]),a=Math.min(r.vmax,t[1]);return e<a||e===a&&e>t[0]&&e<t[1]?{vmin:e,vmax:a,breakOption:r.breakOption,gapParsed:r.gapParsed,gapReal:r.gapReal}:null}function CC(r,t,e){var a=[];if(!r)return{breaks:a};function n(l,o){return l>=0&&l<1-1e-5}B(r,function(l){if(!(!l||l.start==null||l.end==null)&&!l.isExpanded){var o={breakOption:Oe(l),vmin:t(l.start),vmax:t(l.end),gapParsed:{type:"tpAbs",val:0},gapReal:null};if(l.gap!=null){var c=!1;if(je(l.gap)){var u=Dn(l.gap);if(u.match(/%$/)){var d=parseFloat(u)/100;n(d)||(d=0),o.gapParsed.type="tpPrct",o.gapParsed.val=d,c=!0}}if(!c){var h=t(l.gap);(!isFinite(h)||h<0)&&(h=0),o.gapParsed.type="tpAbs",o.gapParsed.val=h}}if(o.vmin===o.vmax&&(o.gapParsed.type="tpAbs",o.gapParsed.val=0),e&&e.noNegative&&B(["vmin","vmax"],function(g){o[g]<0&&(o[g]=0)}),o.vmin>o.vmax){var p=o.vmax;o.vmax=o.vmin,o.vmin=p}a.push(o)}}),a.sort(function(l,o){return l.vmin-o.vmin});var s=-1/0;return B(a,function(l,o){s>l.vmin&&(a[o]=null),s=l.vmax}),{breaks:a.filter(function(l){return!!l})}}function NE(r,t){return TC(t)===TC(r)}function TC(r){return r.start+"_\0_"+r.end}function fxe(r,t,e){var a=[];B(r,function(s,l){var o=t(s);o&&o.type==="vmin"&&a.push([l])}),B(r,function(s,l){var o=t(s);if(o&&o.type==="vmax"){var c=Fo(a,function(u){return NE(t(r[u[0]]).parsedBreak.breakOption,o.parsedBreak.breakOption)});c&&c.push(l)}});var n=[];return B(a,function(s){s.length===2&&n.push(e?s:[r[s[0]],r[s[1]]])}),n}function pxe(r,t,e,a){var n,s;if(r.break){var l=r.break.parsedBreak,o=Fo(e,function(h){return NE(h.breakOption,r.break.parsedBreak.breakOption)}),c=a(Math.pow(t,l.vmin),o.vmin),u=a(Math.pow(t,l.vmax),o.vmax),d={type:l.gapParsed.type,val:l.gapParsed.type==="tpAbs"?Cr(Math.pow(t,l.vmin+l.gapParsed.val))-c:l.gapParsed.val};n={type:r.break.type,parsedBreak:{breakOption:l.breakOption,vmin:c,vmax:u,gapParsed:d,gapReal:l.gapReal}},s=o[r.break.type]}return{brkRoundingCriterion:s,vBreak:n}}function gxe(r,t,e){var a={noNegative:!0},n=CC(r,e,a),s=CC(r,e,a),l=Math.log(t);return s.breaks=pe(s.breaks,function(o){var c=Math.log(o.vmin)/l,u=Math.log(o.vmax)/l,d={type:o.gapParsed.type,val:o.gapParsed.type==="tpAbs"?Math.log(o.vmin+o.gapParsed.val)/l-c:o.gapParsed.val};return{vmin:c,vmax:u,gapParsed:d,gapReal:o.gapReal,breakOption:o.breakOption}}),{parsedOriginal:n,parsedLogged:s}}var mxe={vmin:"start",vmax:"end"};function vxe(r,t){return t&&(r=r||{},r.break={type:mxe[t.type],start:t.parsedBreak.vmin,end:t.parsedBreak.vmax}),r}function xxe(){VJ({createScaleBreakContext:cxe,pruneTicksByBreak:dxe,addBreaksToTicks:hxe,parseAxisBreakOption:CC,identifyAxisBreak:NE,serializeAxisBreakIdentifier:TC,retrieveAxisBreakPairs:fxe,getTicksLogTransformBreak:pxe,logarithmicParseBreaksFromOption:gxe,makeAxisLabelFormatterParamBreak:vxe})}var MP=ut();function yxe(r,t){var e=Fo(r,function(a){return Or().identifyAxisBreak(a.parsedBreak.breakOption,t.breakOption)});return e||r.push(e={zigzagRandomList:[],parsedBreak:t,shouldRemove:!1}),e}function bxe(r){B(r,function(t){return t.shouldRemove=!0})}function _xe(r){for(var t=r.length-1;t>=0;t--)r[t].shouldRemove&&r.splice(t,1)}function Nxe(r,t,e,a,n){var s=e.axis;if(s.scale.isBlank()||!Or())return;var l=Or().retrieveAxisBreakPairs(s.scale.getTicks({breakTicks:"only_break"}),function(R){return R.break},!1);if(!l.length)return;var o=e.getModel("breakArea"),c=o.get("zigzagAmplitude"),u=o.get("zigzagMinSpan"),d=o.get("zigzagMaxSpan");u=Math.max(2,u||0),d=Math.max(u,d||0);var h=o.get("expandOnClick"),p=o.get("zigzagZ"),g=o.getModel("itemStyle"),v=g.getItemStyle(),y=v.stroke,x=v.lineWidth,b=v.lineDash,N=v.fill,w=new Pe({ignoreModelZ:!0}),S=s.isHorizontal(),T=MP(t).visualList||(MP(t).visualList=[]);bxe(T);for(var A=function(R){var k=l[R][0].break.parsedBreak,L=[];L[0]=s.toGlobalCoord(s.dataToCoord(k.vmin,!0)),L[1]=s.toGlobalCoord(s.dataToCoord(k.vmax,!0)),L[1]<L[0]&&L.reverse();var O=yxe(T,k);O.shouldRemove=!1;var z=new Pe;M(O.zigzagRandomList,z,L[0],L[1],S,k),h&&z.on("click",function(){var U={type:Hb,breaks:[{start:k.breakOption.start,end:k.breakOption.end}]};U[s.dim+"AxisIndex"]=e.componentIndex,n.dispatchAction(U)}),z.silent=!h,w.add(z)},C=0;C<l.length;C++)A(C);r.add(w),_xe(T);function M(R,k,L,O,z,U){var H={stroke:y,lineWidth:x,lineDash:b,fill:"none"},P=z?0:1,F=1-P,Y=a[Ke[F]]+a[zr[F]];function X(ft){var le=[],ze=[];le[P]=ze[P]=ft,le[F]=a[Ke[F]],ze[F]=Y;var $e={x1:le[0],y1:le[1],x2:ze[0],y2:ze[1]};return Cb($e,$e,{lineWidth:1}),le[0]=$e.x1,le[1]=$e.y1,le[P]}L=X(L),O=X(O);for(var q=[],G=[],$=!0,Z=a[Ke[F]],te=0;;te++){var me=Z===a[Ke[F]],Ce=Z>=Y;Ce&&(Z=Y);var Ve=[],Ee=[];Ve[P]=L,Ee[P]=O,!me&&!Ce&&(Ve[P]+=$?-c:c,Ee[P]-=$?c:-c),Ve[F]=Z,Ee[F]=Z,q.push(Ve),G.push(Ee);var be=void 0;if(te<R.length?be=R[te]:(be=Math.random(),R.push(be)),Z+=be*(d-u)+u,$=!$,Ce)break}var He=Or().serializeAxisBreakIdentifier(U.breakOption);if(k.add(new ma({anid:"break_a_"+He,shape:{points:q},style:H,z:p})),U.gapReal!==0){k.add(new ma({anid:"break_b_"+He,shape:{points:G},style:H,z:p}));var Se=G.slice();Se.reverse();var Ie=q.concat(Se);k.add(new Ma({anid:"break_c_"+He,shape:{points:Ie},style:{fill:N,opacity:v.opacity},z:p}))}}}function jxe(r,t,e,a){var n=r.axis,s=e.transform;Ea(a.style);var l=n.getExtent();n.inverse&&(l=l.slice(),l.reverse());var o=Or().retrieveAxisBreakPairs(n.scale.getTicks({breakTicks:"only_break"}),function(x){return x.break},!1),c=pe(o,function(x){var b=x[0].break.parsedBreak,N=[n.dataToCoord(b.vmin,!0),n.dataToCoord(b.vmax,!0)];return N[0]>N[1]&&N.reverse(),{coordPair:N,brkId:Or().serializeAxisBreakIdentifier(b.breakOption)}});c.sort(function(x,b){return x.coordPair[0]-b.coordPair[0]});for(var u=l[0],d=null,h=0;h<c.length;h++){var p=c[h],g=Math.max(p.coordPair[0],l[0]),v=Math.min(p.coordPair[1],l[1]);u<=g&&y(u,g,d,p),u=v,d=p}u<=l[1]&&y(u,l[1],d,null);function y(x,b,N,w){function S(L,O){s&&(xr(L,L,s),xr(O,O,s))}function T(L,O){var z={x1:L[0],y1:L[1],x2:O[0],y2:O[1]};Cb(z,z,a.style),L[0]=z.x1,L[1]=z.y1,O[0]=z.x2,O[1]=z.y2}var A=[x,0],C=[b,0],M=[x,5],R=[b,5];S(A,M),T(A,M),S(C,R),T(C,R),T(A,C);var k=new Tr(ie({shape:{x1:A[0],y1:A[1],x2:C[0],y2:C[1]}},a));t.add(k),k.anid="breakLine_"+(N?N.brkId:"\0")+"_\0_"+(w?w.brkId:"\0")}}function wxe(r,t,e){if(Fo(e,function(N){return!N}))return;var a=new Ye;if(!Bb(e[0],e[1],a,{direction:-(r?t+Math.PI:t),touchThreshold:0,bidirectional:!1}))return;var n=na();Ml(n,n,-t);var s=pe(e,function(N){return N.transform?Is(na(),n,N.transform):n});function l(N){var w=e[0].localRect,S=new Ye(w[zr[N]]*s[0][0],w[zr[N]]*s[0][1]);return Math.abs(S.y)<1e-5}var o=.5;if(l(0)||l(1)){var c=pe(e,function(N,w){var S=N.localRect.clone();return S.applyTransform(s[w]),S}),u=new Ye;u.copy(e[0].label).add(e[1].label).scale(.5),u.transform(n);var d=a.clone().transform(n),h=c[0].x+c[1].x+(d.x>=0?c[0].width:c[1].width),p=(h+d.x)/2-u.x,g=Math.min(p,p-d.x),v=Math.max(p,p-d.x),y=v<0?v:g>0?g:0;o=(p-y)/d.x}var x=new Ye,b=new Ye;Ye.scale(x,a,-o),Ye.scale(b,a,1-o),A2(e[0],x),A2(e[1],b)}function Sxe(r,t){var e={breaks:[]};return B(t.breaks,function(a){if(a){var n=Fo(r.get("breaks",!0),function(o){return Or().identifyAxisBreak(o,a)});if(n){var s=t.type,l={isExpanded:!!n.isExpanded};n.isExpanded=s===Hb?!0:s===GV?!1:s===UV?!n.isExpanded:n.isExpanded,e.breaks.push({start:n.start,end:n.end,isExpanded:!!n.isExpanded,old:l})}}}),e}function Cxe(){_ie({adjustBreakLabelPair:wxe,buildAxisBreakLine:jxe,rectCoordBuildBreakAxis:Nxe,updateModelAxisBreak:Sxe})}function Txe(r){Tie(r),xxe(),Cxe()}function Axe(){qie(Exe)}function Exe(r,t){B(r,function(e){if(!e.model.get(["axisLabel","inside"])){var a=Dxe(e);if(a){var n=e.isHorizontal()?"height":"width",s=e.model.get(["axisLabel","margin"]);t[n]-=a[n]+s,e.position==="top"?t.y+=a.height+s:e.position==="left"&&(t.x+=a.width+s)}}})}function Dxe(r){var t=r.model,e=r.scale;if(!t.get(["axisLabel","show"])||e.isBlank())return;var a,n,s=e.getExtent();e instanceof Ph?n=e.count():(a=e.getTicks(),n=a.length);var l=r.getLabelModel(),o=hf(r),c,u=1;n>40&&(u=Math.ceil(n/40));for(var d=0;d<n;d+=u){var h=a?a[d]:{value:s[0]+d},p=o(h,d),g=l.getTextRect(p),v=y(g,l.get("rotate")||0);c?c.union(v):c=v}return c;function y(x,b){var N=b*Math.PI/180,w=x.width,S=x.height,T=w*Math.abs(Math.cos(N))+Math.abs(S*Math.sin(N)),A=w*Math.abs(Math.sin(N))+Math.abs(S*Math.cos(N)),C=new We(x.x,x.y,T,A);return C}}st([yse]);st([pse]);st([Bse,eie,uie,fle,wle,foe,Voe,jce,Fce,Kce,aue,due,nde,Ade,Bde,the,she,ghe,Nhe,Lhe,Bhe,Xhe,Lfe]);st(Qfe);st(jpe);st(gH);st(kpe);st(tG);st(Bpe);st(sge);st(pge);st(eme);st(yme);st(Gm);st(kme);st(zme);st(qme);st(rve);st(ove);st(pve);st(wve);st(Uve);st(lU);st(oU);st(c0e);st(fU);st(pU);st(f0e);st(x0e);st(M0e);st(I0e);st(lxe);st(Ine);st(Txe);st(Axe);st(ple);const Mxe=Object.freeze(Object.defineProperty({__proto__:null,Axis:vs,ChartView:Pt,ComponentModel:ct,ComponentView:Yt,List:Ha,Model:dt,PRIORITY:c9,SeriesModel:zt,color:RZ,connect:Pre,dataTool:Yre,dependencies:yre,disConnect:zre,disconnect:v9,dispose:Bre,env:pt,extendChartView:yne,extendComponentModel:mne,extendComponentView:vne,extendSeriesModel:xne,format:tne,getCoordinateSystemDimensions:Hre,getInstanceByDom:QT,getInstanceById:Vre,getMap:Fre,graphic:ene,helper:Wae,init:Ore,innerDrawElementOnCanvas:qT,matrix:lZ,number:Qae,parseGeoJSON:C2,parseGeoJson:C2,registerAction:Ys,registerCoordinateSystem:b9,registerCustomSeries:Gre,registerLayout:_9,registerLoading:aA,registerLocale:ST,registerMap:N9,registerPostInit:x9,registerPostUpdate:y9,registerPreprocessor:eA,registerProcessor:tA,registerTheme:JT,registerTransform:j9,registerUpdateLifecycle:zb,registerVisual:qo,setCanvasCreator:Ure,setPlatformAPI:nz,throttle:Ob,time:Jae,use:st,util:rne,vector:WX,version:xre,zrUtil:BX,zrender:pK},Symbol.toStringTag,{value:"Module"}));var rl={},al={},Vw={},RP;function Rxe(){return RP||(RP=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=1,e=function(){return"".concat(t++)};r.default=e})(Vw)),Vw}var Qp={},Jp={},Hw={},LP;function NU(){return LP||(LP=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,s=null;return function(){for(var l=this,o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];clearTimeout(s),s=setTimeout(function(){a.apply(l,c)},n)}};r.default=t})(Hw)),Hw}var nl={},IP;function jE(){if(IP)return nl;IP=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.SizeSensorId=nl.SensorTabIndex=nl.SensorClassName=void 0;var r="size-sensor-id";nl.SizeSensorId=r;var t="size-sensor-object";nl.SensorClassName=t;var e="-1";return nl.SensorTabIndex=e,nl}var kP;function Lxe(){if(kP)return Jp;kP=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.createSensor=void 0;var r=e(NU()),t=jE();function e(n){return n&&n.__esModule?n:{default:n}}var a=function(s,l){var o=void 0,c=[],u=function(){getComputedStyle(s).position==="static"&&(s.style.position="relative");var y=document.createElement("object");return y.onload=function(){y.contentDocument.defaultView.addEventListener("resize",d),d()},y.style.display="block",y.style.position="absolute",y.style.top="0",y.style.left="0",y.style.height="100%",y.style.width="100%",y.style.overflow="hidden",y.style.pointerEvents="none",y.style.zIndex="-1",y.style.opacity="0",y.setAttribute("class",t.SensorClassName),y.setAttribute("tabindex",t.SensorTabIndex),y.type="text/html",s.appendChild(y),y.data="about:blank",y},d=(0,r.default)(function(){c.forEach(function(v){v(s)})}),h=function(y){o||(o=u()),c.indexOf(y)===-1&&c.push(y)},p=function(){o&&o.parentNode&&(o.contentDocument&&o.contentDocument.defaultView.removeEventListener("resize",d),o.parentNode.removeChild(o),s.removeAttribute(t.SizeSensorId),o=void 0,c=[],l&&l())},g=function(y){var x=c.indexOf(y);x!==-1&&c.splice(x,1),c.length===0&&o&&p()};return{element:s,bind:h,destroy:p,unbind:g}};return Jp.createSensor=a,Jp}var eg={},OP;function Ixe(){if(OP)return eg;OP=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.createSensor=void 0;var r=jE(),t=e(NU());function e(n){return n&&n.__esModule?n:{default:n}}var a=function(s,l){var o=void 0,c=[],u=(0,t.default)(function(){c.forEach(function(v){v(s)})}),d=function(){var y=new ResizeObserver(u);return y.observe(s),u(),y},h=function(y){o||(o=d()),c.indexOf(y)===-1&&c.push(y)},p=function(){o.disconnect(),c=[],o=void 0,s.removeAttribute(r.SizeSensorId),l&&l()},g=function(y){var x=c.indexOf(y);x!==-1&&c.splice(x,1),c.length===0&&o&&p()};return{element:s,bind:h,destroy:p,unbind:g}};return eg.createSensor=a,eg}var PP;function kxe(){if(PP)return Qp;PP=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.createSensor=void 0;var r=Lxe(),t=Ixe(),e=typeof ResizeObserver<"u"?t.createSensor:r.createSensor;return Qp.createSensor=e,Qp}var zP;function Oxe(){if(zP)return al;zP=1,Object.defineProperty(al,"__esModule",{value:!0}),al.removeSensor=al.getSensor=al.Sensors=void 0;var r=a(Rxe()),t=kxe(),e=jE();function a(c){return c&&c.__esModule?c:{default:c}}var n={};al.Sensors=n;function s(c){c&&n[c]&&delete n[c]}var l=function(u){var d=u.getAttribute(e.SizeSensorId);if(d&&n[d])return n[d];var h=(0,r.default)();u.setAttribute(e.SizeSensorId,h);var p=(0,t.createSensor)(u,function(){return s(h)});return n[h]=p,p};al.getSensor=l;var o=function(u){var d=u.element.getAttribute(e.SizeSensorId);u.destroy(),s(d)};return al.removeSensor=o,al}var BP;function Pxe(){if(BP)return rl;BP=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.ver=rl.clear=rl.bind=void 0;var r=Oxe(),t=function(s,l){var o=(0,r.getSensor)(s);return o.bind(l),function(){o.unbind(l)}};rl.bind=t;var e=function(s){var l=(0,r.getSensor)(s);(0,r.removeSensor)(l)};rl.clear=e;var a="1.0.2";return rl.ver=a,rl}var VP=Pxe();function HP(r,t){var e={};return t.forEach(function(a){e[a]=r[a]}),e}function Gw(r){return typeof r=="function"}function zxe(r){return typeof r=="string"}var Uw,GP;function Bxe(){return GP||(GP=1,Uw=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var a,n,s;if(Array.isArray(t)){if(a=t.length,a!=e.length)return!1;for(n=a;n--!==0;)if(!r(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),a=s.length,a!==Object.keys(e).length)return!1;for(n=a;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=a;n--!==0;){var l=s[n];if(!r(t[l],e[l]))return!1}return!0}return t!==t&&e!==e}),Uw}var Vxe=Bxe();const sh=e8(Vxe);var Hxe=(function(r){rz(t,r);function t(e){var a=r.call(this,e)||this;return a.echarts=e.echarts,a.ele=null,a.isInitialResize=!0,a}return t.prototype.componentDidMount=function(){this.renderNewEcharts()},t.prototype.componentDidUpdate=function(e){var a=this.props.shouldSetOption;if(!(Gw(a)&&!a(e,this.props))){if(!sh(e.theme,this.props.theme)||!sh(e.opts,this.props.opts)||!sh(e.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var n=["option","notMerge","lazyUpdate","showLoading","loadingOption"];sh(HP(this.props,n),HP(e,n))||this.updateEChartsOption(),(!sh(e.style,this.props.style)||!sh(e.className,this.props.className))&&this.resize()}},t.prototype.componentWillUnmount=function(){this.dispose()},t.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},t.prototype.dispose=function(){if(this.ele){try{VP.clear(this.ele)}catch(e){console.warn(e)}this.echarts.dispose(this.ele)}},t.prototype.renderNewEcharts=function(){var e=this,a=this.props,n=a.onEvents,s=a.onChartReady,l=this.updateEChartsOption();this.bindEvents(l,n||{}),Gw(s)&&s(l),this.ele&&VP.bind(this.ele,function(){e.resize()})},t.prototype.bindEvents=function(e,a){function n(l,o){zxe(l)&&Gw(o)&&e.on(l,function(c){o(c,e)})}for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n(s,a[s])},t.prototype.updateEChartsOption=function(){var e=this.props,a=e.option,n=e.notMerge,s=n===void 0?!1:n,l=e.lazyUpdate,o=l===void 0?!1:l,c=e.showLoading,u=e.loadingOption,d=u===void 0?null:u,h=this.getEchartsInstance();return h.setOption(a,s,o),c?h.showLoading(d):h.hideLoading(),h},t.prototype.resize=function(){var e=this.getEchartsInstance();if(!this.isInitialResize)try{e.resize()}catch(a){console.warn(a)}this.isInitialResize=!1},t.prototype.render=function(){var e=this,a=this.props,n=a.style,s=a.className,l=s===void 0?"":s,o=gS({height:300},n);return t8.createElement("div",{ref:function(c){e.ele=c},style:o,className:"echarts-for-react "+l})},t})(I.PureComponent),lu=(function(r){rz(t,r);function t(e){var a=r.call(this,e)||this;return a.echarts=Mxe,a}return t})(Hxe);function Gxe(){const[r,t]=I.useState(!1),[e,a]=I.useState(""),[n,s]=I.useState({});I.useEffect(()=>{l()},[]);const l=async()=>{try{t(!0),a("");const[g,v,y]=await Promise.all([du.getActualCustomerDebtReport(),du.getInactiveCustomersReport(),du.getCustomersWithoutPurchaseReport()]);s({customerDebt:g,inactiveCustomers:v,customersWithoutPurchase:y})}catch(g){console.error("Error fetching customer stats:",g),a(g.response?.data?.message||"    ")}finally{t(!1)}},o=g=>new Intl.NumberFormat("fa-IR").format(g),c=g=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[g]||g,u=g=>({high:"",medium:"",low:""})[g.toLowerCase()]||g,d=g=>({high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"})[g.toLowerCase()]||"bg-gray-100 text-gray-800",h={title:{text:"   ",textStyle:{fontSize:18,fontWeight:"bold",color:"#374151",fontFamily:"Vazir, Tahoma, sans-serif"},left:"center",top:20},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12},formatter:g=>{const v=g[0];return`${v.name}<br/>${v.seriesName}: ${ue(v.value)}`}},grid:{left:"3%",right:"4%",bottom:"20%",top:"25%",containLabel:!0},xAxis:{type:"category",data:n.customerDebt?.report.sort((g,v)=>v.actual_debt-g.actual_debt).slice(0,10).map(g=>g.customer_title)||[],axisLabel:{rotate:45,fontSize:10,fontFamily:"Vazir, Tahoma, sans-serif",color:"#6b7280"},axisLine:{lineStyle:{color:"#e5e7eb"}}},yAxis:{type:"value",name:"  ()",nameTextStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12,color:"#6b7280"},axisLabel:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11,color:"#6b7280",formatter:g=>ue(g)},axisLine:{lineStyle:{color:"#e5e7eb"}},splitLine:{lineStyle:{color:"#f3f4f6"}}},series:[{name:" ",type:"bar",data:n.customerDebt?.report.sort((g,v)=>v.actual_debt-g.actual_debt).slice(0,10).map(g=>g.actual_debt)||[],itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#f59e0b"},{offset:1,color:"#d97706"}]},borderRadius:[4,4,0,0]},barWidth:"60%"}]},p={title:{text:"   ",textStyle:{fontSize:16,fontWeight:"bold",color:"#374151",fontFamily:"Vazir, Tahoma, sans-serif"},left:"center",top:10},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",textStyle:{fontFamily:"Vazir, Tahoma, sans-serif"}},legend:{orient:"vertical",right:10,top:"center",textStyle:{fontFamily:"Vazir, Tahoma, sans-serif"}},series:[{name:"",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {c}",fontFamily:"Vazir, Tahoma, sans-serif"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold"}},data:n.inactiveCustomers?.summary.risk_breakdown?[{value:n.inactiveCustomers.summary.risk_breakdown.high,name:" ",itemStyle:{color:"#ef4444"}},{value:n.inactiveCustomers.summary.risk_breakdown.medium,name:" ",itemStyle:{color:"#f59e0b"}},{value:n.inactiveCustomers.summary.risk_breakdown.low,name:" ",itemStyle:{color:"#10b981"}}]:[]}]};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(is,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"    "})]})]}),i.jsxs("button",{onClick:l,disabled:r,className:"px-4 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors flex items-center space-x-reverse space-x-2 disabled:opacity-50",children:[i.jsx(Ca,{className:`w-4 h-4 ${r?"animate-spin":""}`}),i.jsx("span",{className:"text-sm font-semibold",children:""})]})]})}),e&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx(e$,{className:"w-5 h-5 text-red-600"}),i.jsx("p",{className:"text-red-800 font-semibold",children:e})]})}),r&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!r&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-orange-200 shadow-sm p-6 hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(cn,{className:"w-6 h-6 text-white"})}),i.jsx(gg,{className:"w-5 h-5 text-red-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"  "}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-4",children:ue(n.customerDebt?.totals.total_actual_debt||0)}),i.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:o(n.customerDebt?.total_customers||0)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"  :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:o(n.customerDebt?.totals.total_pending_cheques||0)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:ue(n.customerDebt?.totals.total_accounting_debt||0)})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-red-200 shadow-sm p-6 hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(cn,{className:"w-6 h-6 text-white"})}),i.jsx(gg,{className:"w-5 h-5 text-red-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:" "}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-4",children:o(n.inactiveCustomers?.summary.total_inactive_customers||0)}),i.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"  :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:o(n.inactiveCustomers?.summary.avg_days_inactive||0)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"   :"}),i.jsx("span",{className:"font-semibold text-red-600",children:ue(n.inactiveCustomers?.summary.total_lost_revenue||0)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"  :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:ue(n.inactiveCustomers?.summary.avg_customer_value||0)})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-yellow-200 shadow-sm p-6 hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(cn,{className:"w-6 h-6 text-white"})}),i.jsx(gg,{className:"w-5 h-5 text-yellow-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"  "}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-4",children:o(n.customersWithoutPurchase?.summary.total_customers_without_purchase||0)}),i.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"  :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:o(n.customersWithoutPurchase?.summary.never_contacted||0)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"   :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:o(n.customersWithoutPurchase?.summary.contacted_no_purchase||0)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"  :"}),i.jsx("span",{className:"font-semibold text-gray-900",children:o(n.customersWithoutPurchase?.summary.avg_days_since_registration||0)})]})]})]})]}),!r&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:i.jsx(lu,{option:h,style:{height:"400px"},opts:{renderer:"svg"}})}),n.inactiveCustomers?.summary.risk_breakdown&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:i.jsx(lu,{option:p,style:{height:"400px"},opts:{renderer:"svg"}})})]}),!r&&n.customerDebt&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"  "})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:n.customerDebt.report.sort((g,v)=>v.actual_debt-g.actual_debt).slice(0,15).map((g,v)=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:"inline-block w-8 h-8 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center text-white text-sm font-bold",children:v+1})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:g.customer_title}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:g.customer_code}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-orange-600",children:ue(g.actual_debt)}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-blue-600",children:ue(g.accounting_debt)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:g.pending_cheques_count>0?i.jsxs("span",{className:"inline-block px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-xs font-semibold",children:[g.pending_cheques_count,"  -"," ",ue(g.pending_cheques_total)]}):i.jsx("span",{className:"text-gray-400",children:"-"})})]},g.customer_id))})]})})]}),!r&&n.inactiveCustomers&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:" "})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:n.inactiveCustomers.report.sort((g,v)=>v.days_since_last_purchase-g.days_since_last_purchase).slice(0,10).map(g=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:g.customer_title}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",g.customer_code]})]})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700",children:[o(g.days_since_last_purchase)," "]}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${d(g.risk_level)}`,children:u(g.risk_level)})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-red-600",children:ue(g.total_spent)})]},g.customer_id))})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"  "})}),i.jsx("div",{className:"p-6 space-y-4",children:n.inactiveCustomers.summary.top_5_valuable_customers.map((g,v)=>i.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("span",{className:"w-8 h-8 bg-gradient-to-br from-red-500 to-rose-600 rounded-lg flex items-center justify-center text-white text-sm font-bold",children:v+1}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:g.customer_title}),i.jsxs("p",{className:"text-xs text-gray-500",children:[g.days_inactive,"  "]})]})]}),i.jsx("p",{className:"text-sm font-bold text-red-600",children:ue(g.total_spent)})]})},v))})]})]}),!r&&n.customersWithoutPurchase&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"  "})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:n.customersWithoutPurchase.report.slice(0,15).map(g=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:g.customer_title}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",g.customer_code]})]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:c(g.customer_category)}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700",children:[o(g.days_since_registration)," "]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:g.total_contacts>0?i.jsxs("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold",children:[g.total_contacts," "]}):i.jsx("span",{className:"text-gray-400",children:" "})})]},g.customer_id))})]})})]}),i.jsxs("div",{className:"space-y-6",children:[n.customersWithoutPurchase.summary.top_5_not_purchased_reasons&&n.customersWithoutPurchase.summary.top_5_not_purchased_reasons.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"  "})}),i.jsx("div",{className:"p-6 space-y-3",children:n.customersWithoutPurchase.summary.top_5_not_purchased_reasons.map((g,v)=>i.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("span",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-amber-600 rounded-lg flex items-center justify-center text-white text-xs font-bold",children:v+1}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:g})]})},v))})]}),n.customersWithoutPurchase.summary.oldest_registered&&n.customersWithoutPurchase.summary.oldest_registered.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:" "})}),i.jsx("div",{className:"p-6 space-y-3",children:n.customersWithoutPurchase.summary.oldest_registered.map((g,v)=>i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:g.customer_title}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[i.jsxs("span",{children:[g.days_since_registration," "]}),i.jsxs("span",{children:[g.total_contacts," "]})]})]},v))})]})]})]})]})}function Uxe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState("");I.useEffect(()=>{x()},[u]),I.useEffect(()=>{d(1),x()},[p,v]);const x=async()=>{try{n(!0),l("");const T=await Nu.getEmployees({page:u,"page-size":h});e(T.data||[]),c(T.count||0)}catch(T){console.error("Error fetching employee profiles:",T),l(T.response?.data?.message||"    ")}finally{n(!1)}},b=T=>{d(T)},N=()=>{let T=0;return p&&T++,v!==""&&T++,T},w=t.filter(T=>{if(p){const A=p.toLowerCase();if(!(T.first_name.toLowerCase().includes(A)||T.last_name.toLowerCase().includes(A)||T.username?.toLowerCase().includes(A)||T.mobile?.includes(p)))return!1}if(v!==""){const A=v==="true";if(T.enabled!==A)return!1}return!0}),S=w.length;return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(cn,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[S," ",N()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:T=>g(T.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:T=>y(T.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"true",children:""}),i.jsx("option",{value:"false",children:""})]})]})]}),N()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[N(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),d(1)},className:"text-sm text-teal-600 hover:text-teal-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-teal-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&S>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"   "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/profiles/${T.id}`),children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:[T.first_name," ",T.last_name]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.username||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.mobile||"-"}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${T.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.enabled?"":""})}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:A=>{A.stopPropagation(),r(`/manage/profiles/${T.id}`)},className:"px-3 py-1 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 transition-colors text-sm font-semibold",children:""})})]},T.id))})]})})}),!a&&S===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(cn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:N()>0?"      ":"  "})]}),!a&&S>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:b})]})}function Fxe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{s(!0),o("");const b=await Ig.getInvoiceById(t);a(b)}catch(b){console.error("Error fetching invoice details:",b),o("    ")}finally{s(!1)}},u=b=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[b]||b,d=b=>({PURCHASED:"",RETURNED:"",INVENTORY:" "})[b]||b,h=b=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[b]||"bg-gray-100 text-gray-800",p=b=>({FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   ",AT_INVENTORY:"  "})[b]||b,g=b=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:" ",INVENTORY:"",ACCOUNTING:"",CARGO:"",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",PARTIALLY_RETURNED:" ",RETURNED:" "})[b]||b,v=b=>({PURCHASE:"",RETURN_FROM_PURCHASE:"  ",SELL:""})[b]||b,y=b=>({PURCHASE:"bg-blue-100 text-blue-800",RETURN_FROM_PURCHASE:"bg-orange-100 text-orange-800",SELL:"bg-green-100 text-green-800"})[b]||"bg-gray-100 text-gray-800";if(n)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]});if(l||!e)return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/invoices"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]});const x=(e.products||[]).reduce((b,N)=>b+N.price*N.net_weight,0);return i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/invoices"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["  #",e.code]}),i.jsxs("p",{className:"text-gray-500",children:[v(e.type)," "," ",u(e.payment_status)]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${y(e.type)}`,children:v(e.type)}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${h(e.payment_status)}`,children:u(e.payment_status)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Ba,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["#",e.code]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(Ba,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:ue(e.amount)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:ue(x)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(Ba,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.date)})]}),e.due_date&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.due_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold",children:e.deleted?i.jsx("span",{className:"text-red-600",children:" "}):i.jsx("span",{className:"text-green-600",children:""})})]}),e.description&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.description})]})]})]}),e.customer&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.code})]}),e.customer.phone&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.phone})]}),e.customer.address&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.address})]})]})]}),e.order&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("button",{onClick:()=>r(`/manage/orders/${e.order.id}`),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs font-semibold",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.order.code]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.order.delivery_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:p(e.order.delivery_method)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-2 py-1 rounded-lg text-xs font-semibold ${h(e.order.payment_status)}`,children:u(e.order.payment_status)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:g(e.order.step)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.order.fulfilled?" ":" "})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.receiving&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(kr,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.receiving.code]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.receiving.date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.receiving.license_plate})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.receiving.driver_name})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:d(e.receiving.source)})]})]})]})]}),e.cargo&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(kr,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.cargo.code]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.cargo.date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:p(e.cargo.delivery_method)})]}),e.cargo.truck&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.cargo.truck.license_plate})]}),e.cargo.truck?.driver&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.cargo.truck.driver.first_name," ",e.cargo.truck.driver.last_name]})]})]})]})]})]}),e.products&&e.products.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-purple-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:["  (",e.products.length,")"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100",children:e.products.map((b,N)=>{const w=b.price*b.net_weight;return i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b.product_title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[": ",b.product_id]})]}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ue(b.price)})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[b.net_weight.toLocaleString("fa-IR")," "]})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("p",{className:"text-base font-bold text-green-600",children:ue(w)})})]},b.product_id)})}),i.jsx("tfoot",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("td",{colSpan:3,className:"px-4 py-3 text-right text-sm font-bold text-gray-900",children:"  :"}),i.jsx("td",{className:"px-4 py-3 text-center text-lg font-bold text-green-600",children:ue(x)})]})})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Ba,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.cargo_id&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[": ",e.cargo_id]})]}),e.driver_id&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[": ",e.driver_id]})]}),e.warehouse_id&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[": ",e.warehouse_id]})]}),e.wallet_id&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[": ",e.wallet_id]})]}),e.hp_code&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" HP"}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.hp_code}),e.hp_title&&i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:e.hp_title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.updated_at)})]})]})]})]})}const Yxe=r=>({CREATED:" ",AMOUNT_CHANGED:" ",PAYMENT_STATUS_CHANGED:"  ",DUE_DATE_CHANGED:"  ",DATE_CHANGED:" ",TYPE_CHANGED:" ",SELLER_CHANGED:" ",DRIVER_CHANGED:" ",WAREHOUSE_CHANGED:" ",CARGO_CHANGED:" ",PRODUCTS_CHANGED:" ",DELETED:" ",RESTORED:" ",WALLET_LINKED:"   ",ORDER_LINKED:"  ",UPDATED:""})[r||""]||" ",Wxe=r=>({CREATED:"bg-green-100 text-green-800",AMOUNT_CHANGED:"bg-yellow-100 text-yellow-800",PAYMENT_STATUS_CHANGED:"bg-blue-100 text-blue-800",DUE_DATE_CHANGED:"bg-cyan-100 text-cyan-800",DATE_CHANGED:"bg-indigo-100 text-indigo-800",TYPE_CHANGED:"bg-purple-100 text-purple-800",SELLER_CHANGED:"bg-orange-100 text-orange-800",DRIVER_CHANGED:"bg-pink-100 text-pink-800",WAREHOUSE_CHANGED:"bg-teal-100 text-teal-800",CARGO_CHANGED:"bg-amber-100 text-amber-800",PRODUCTS_CHANGED:"bg-emerald-100 text-emerald-800",DELETED:"bg-red-100 text-red-800",RESTORED:"bg-green-100 text-green-800",WALLET_LINKED:"bg-indigo-100 text-indigo-800",ORDER_LINKED:"bg-blue-100 text-blue-800",UPDATED:"bg-gray-100 text-gray-800"})[r||""]||"bg-gray-100 text-gray-800",$xe=r=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[r||""]||r||"-",qxe=r=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[r||""]||"bg-gray-100 text-gray-800",Xxe=r=>({PURCHASE:"",RETURN_FROM_PURCHASE:"  ",SELL:""})[r||""]||r||"-",Zxe=r=>({PURCHASE:"bg-blue-100 text-blue-800",RETURN_FROM_PURCHASE:"bg-orange-100 text-orange-800",SELL:"bg-green-100 text-green-800"})[r||""]||"bg-gray-100 text-gray-800";function Kxe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState({page:1,"page-size":20});I.useEffect(()=>{g()},[h]);const g=async()=>{try{n(!0),l("");const b={page:h.page||o,"page-size":h["page-size"]||20,...h},N=await Gs.getInvoiceHistory(b);e(N.data||[]),d(N.count||0)}catch(b){console.error("Error fetching invoice history:",b),l(b.response?.data?.message||"    ")}finally{n(!1)}},v=b=>{p(N=>({...N,page:b})),c(b)},y=(b,N)=>{p(w=>({...w,[b]:N||void 0,page:1})),c(1)},x=()=>{let b=0;return h.invoice_id&&b++,h.employee_id&&b++,h.change_type&&b++,h.payment_status_after&&b++,h.type_after&&b++,h.by_system!==void 0&&b++,h.deleted_changed===!0&&b++,h.related_payment_id&&b++,h.related_invoice_id&&b++,h.created_at_min&&b++,h.created_at_max&&b++,b};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ba,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"text",value:h.invoice_id||"",onChange:b=>y("invoice_id",b.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.change_type||"",onChange:b=>y("change_type",b.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"CREATED",children:" "}),i.jsx("option",{value:"AMOUNT_CHANGED",children:" "}),i.jsx("option",{value:"PAYMENT_STATUS_CHANGED",children:"  "}),i.jsx("option",{value:"DUE_DATE_CHANGED",children:"  "}),i.jsx("option",{value:"DATE_CHANGED",children:" "}),i.jsx("option",{value:"TYPE_CHANGED",children:" "}),i.jsx("option",{value:"SELLER_CHANGED",children:" "}),i.jsx("option",{value:"PRODUCTS_CHANGED",children:" "}),i.jsx("option",{value:"DELETED",children:" "}),i.jsx("option",{value:"RESTORED",children:" "}),i.jsx("option",{value:"WALLET_LINKED",children:"   "}),i.jsx("option",{value:"ORDER_LINKED",children:"  "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.payment_status_after||"",onChange:b=>y("payment_status_after",b.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"NOT_PAID",children:" "}),i.jsx("option",{value:"PARTIALLY_PAID",children:" "}),i.jsx("option",{value:"PAID",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.by_system===void 0?"":h.by_system?"true":"false",onChange:b=>{b.target.value===""?y("by_system",void 0):y("by_system",b.target.value==="true")},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"true",children:""}),i.jsx("option",{value:"false",children:""})]})]})]}),x()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[x(),"  "]}),i.jsx("button",{onClick:()=>{p({page:1,"page-size":20}),c(1)},className:"text-sm text-orange-600 hover:text-orange-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-orange-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(b=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/invoice-history/${b.id}`),children:[i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Wxe(b.change_type)}`,children:Yxe(b.change_type)})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:b.invoice_id?`#${b.new_invoice?.code||b.invoice?.code||b.invoice_id}`:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:b.amount_before!==null?ue(b.amount_before):"-"}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-emerald-600",children:b.amount_after!==null?ue(b.amount_after):"-"}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold",children:b.amount_diff!==null?i.jsxs("span",{className:b.amount_diff>0?"text-green-600":b.amount_diff<0?"text-red-600":"text-gray-600",children:[b.amount_diff>0?"+":"",ue(b.amount_diff)]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4",children:b.payment_status_after?i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${qxe(b.payment_status_after)}`,children:$xe(b.payment_status_after)}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4",children:b.type_after?i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Zxe(b.type_after)}`,children:Xxe(b.type_after)}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${b.by_system?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:b.by_system?"":""})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(b.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:N=>{N.stopPropagation(),r(`/manage/invoice-history/${b.id}`)},className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm font-semibold",children:""})})]},b.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Ba,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:x()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:h["page-size"]||20,totalPages:Math.ceil(u/(h["page-size"]||20)),onPageChange:v})]})}const UP=r=>({CREATED:" ",AMOUNT_CHANGED:" ",PAYMENT_STATUS_CHANGED:"  ",DUE_DATE_CHANGED:"  ",DATE_CHANGED:" ",TYPE_CHANGED:" ",SELLER_CHANGED:" ",DRIVER_CHANGED:" ",WAREHOUSE_CHANGED:" ",CARGO_CHANGED:" ",PRODUCTS_CHANGED:" ",DELETED:" ",RESTORED:" ",WALLET_LINKED:"   ",ORDER_LINKED:"  ",UPDATED:""})[r]||" ",Qxe=r=>({CREATED:"bg-green-100 text-green-800",AMOUNT_CHANGED:"bg-yellow-100 text-yellow-800",PAYMENT_STATUS_CHANGED:"bg-blue-100 text-blue-800",DUE_DATE_CHANGED:"bg-indigo-100 text-indigo-800",DATE_CHANGED:"bg-purple-100 text-purple-800",TYPE_CHANGED:"bg-pink-100 text-pink-800",DELETED:"bg-red-100 text-red-800",RESTORED:"bg-emerald-100 text-emerald-800"})[r]||"bg-gray-100 text-gray-800",Fw=r=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[r||""]||r||"",Yw=r=>({PAID:"bg-green-100 text-green-800",NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800"})[r||""]||"bg-gray-100 text-gray-800",Ww=r=>({PURCHASE:"",RETURN_FROM_PURCHASE:"  ",SELL:""})[r||""]||r||"",$w=r=>({PURCHASE:"bg-blue-100 text-blue-800",RETURN_FROM_PURCHASE:"bg-orange-100 text-orange-800",SELL:"bg-green-100 text-green-800"})[r||""]||"bg-gray-100 text-gray-800";function Jxe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{s(!0),o("");const u=await Gs.getInvoiceHistoryById(t);a(u)}catch{o("     ")}finally{s(!1)}};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/invoice-history"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"    "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/invoice-history"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"  "}),e.invoice&&i.jsxs("p",{className:"text-gray-500",children:[" :"," ",i.jsxs("span",{className:"font-semibold text-gray-700",children:["#",e.invoice.code]})]})]}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${Qxe(e.change_type)}`,children:UP(e.change_type)})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-red-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[e.amount_before!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("p",{className:`text-xl font-bold ${e.amount_before>=0?"text-green-600":"text-red-600"}`,children:ue(e.amount_before)})]}),e.payment_status_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Yw(e.payment_status_before)}`,children:Fw(e.payment_status_before)})]}),e.type_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${$w(e.type_before)}`,children:Ww(e.type_before)})]}),e.date_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.date_before)})]}),e.due_date_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.due_date_before)})]}),e.old_invoice&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.old_invoice.code]})]})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-green-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[e.amount_after!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("p",{className:`text-xl font-bold ${e.amount_after>=0?"text-green-600":"text-red-600"}`,children:ue(e.amount_after)})]}),e.payment_status_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Yw(e.payment_status_after)}`,children:Fw(e.payment_status_after)})]}),e.type_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${$w(e.type_after)}`,children:Ww(e.type_after)})]}),e.date_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.date_after)})]}),e.due_date_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.due_date_after)})]}),e.new_invoice&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.new_invoice.code]})]}),e.amount_diff!==null&&i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsxs("p",{className:`text-lg font-bold ${e.amount_diff>=0?"text-green-600":"text-red-600"}`,children:[e.amount_diff>=0?"+":"",ue(e.amount_diff)]})]})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:UP(e.change_type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold",children:e.by_system?i.jsx("span",{className:"text-orange-600",children:" "}):i.jsx("span",{className:"text-blue-600",children:" "})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),e.employee&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.employee.profile.first_name," ",e.employee.profile.last_name]})]}),e.reason&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.reason})]})]})]}),e.invoice&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(Ba,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.invoice.code]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:`text-xl font-bold ${e.invoice.amount>=0?"text-green-600":"text-red-600"}`,children:ue(e.invoice.amount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Yw(e.invoice.payment_status)}`,children:Fw(e.invoice.payment_status)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${$w(e.invoice.type)}`,children:Ww(e.invoice.type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.invoice.date)})]}),e.invoice.due_date&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.invoice.due_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold",children:e.invoice.deleted?i.jsx("span",{className:"text-red-600",children:" "}):i.jsx("span",{className:"text-green-600",children:""})})]}),e.invoice.description&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.invoice.description})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[e.invoice?.customer&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.invoice.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.invoice.customer.code})]})]})]}),e.ip_address&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" IP"}),i.jsx("p",{className:"text-sm font-semibold text-gray-900 font-mono bg-gray-50 rounded px-2 py-1 inline-block",children:e.ip_address.split(",")[0]})]}),e.ip_address.split(",").length>1&&i.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-gray-100",children:[e.ip_address.split(",")[1]?.trim()&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[1].trim()})]}),e.ip_address.split(",")[2]?.trim()&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[2].trim()})]}),e.ip_address.split(",")[6]?.trim()&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[6].trim()})]})]})]})]})]})]})]})}const eye=r=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[r]||r,tye=r=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[r]||"bg-gray-100 text-gray-800",rye=r=>({PURCHASE:"",RETURN_FROM_PURCHASE:"  ",SELL:""})[r]||r,aye=r=>({PURCHASE:"bg-blue-100 text-blue-800",RETURN_FROM_PURCHASE:"bg-orange-100 text-orange-800",SELL:"bg-green-100 text-green-800"})[r]||"bg-gray-100 text-gray-800";function nye(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState({page:1,"page-size":20}),[g,v]=I.useState([]);I.useEffect(()=>{y(),x()},[h]);const y=async()=>{try{n(!0),l("");const S={page:h.page||o,"page-size":h["page-size"]||20,...h},T=await Ig.getInvoices(S);e(T.data||[]),d(T.count||0)}catch(S){console.error("Error fetching invoices:",S),l(S.response?.data?.message||"    ")}finally{n(!1)}},x=async()=>{try{const S=await gr.getAllCustomers();v(S.data||[])}catch(S){console.error("Error fetching customers:",S)}},b=S=>{p(T=>({...T,page:S})),c(S)},N=(S,T)=>{p(A=>({...A,[S]:T||void 0,page:1})),c(1)},w=()=>{let S=0;return h.cargo_id&&S++,h.customer_id&&S++,h.seller_id&&S++,h.warehouse_id&&S++,h.order_id&&S++,h.driver_id&&S++,h.due_date_min&&S++,h.due_date_max&&S++,h.from&&S++,h.to&&S++,h.amount_min&&S++,h.amount_max&&S++,h.code&&S++,h.hp_code&&S++,h.hp_title&&S++,h.date&&S++,S};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ba,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"number",value:h.code||"",onChange:S=>N("code",S.target.value?parseInt(S.target.value):void 0),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:h.customer_id||"",onChange:S=>N("customer_id",S.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[i.jsx("option",{value:"",children:""}),g.map(S=>i.jsxs("option",{value:S.id,children:[S.title," (: ",S.code,")"]},S.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" HP"}),i.jsx("input",{type:"number",value:h.hp_code||"",onChange:S=>N("hp_code",S.target.value?parseInt(S.target.value):void 0),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"text",value:h.order_id||"",onChange:S=>N("order_id",S.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),w()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[w(),"  "]}),i.jsx("button",{onClick:()=>{p({page:1,"page-size":20}),c(1)},className:"text-sm text-orange-600 hover:text-orange-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-orange-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(S=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/invoices/${S.id}`),children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:["#",S.code]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:S.customer.title}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-emerald-600",children:ue(S.amount)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(S.date)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:S.due_date?_e(S.due_date):"-"}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${aye(S.type)}`,children:rye(S.type)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${tye(S.payment_status)}`,children:eye(S.payment_status)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:S.order?`#${S.order.code}`:"-"}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:T=>{T.stopPropagation(),r(`/manage/invoices/${S.id}`)},className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors text-sm font-semibold",children:""})})]},S.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Ba,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:w()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:h["page-size"]||20,totalPages:Math.ceil(u/(h["page-size"]||20)),onPageChange:b})]})}function sye(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(null),[d,h]=I.useState(!1);I.useEffect(()=>{t&&p()},[t]);const p=async()=>{if(t)try{s(!0),o("");const w=await tz.getLogById(t);a(w)}catch(w){console.error("Error fetching log details:",w),o("    ")}finally{s(!1)}},g=(w,S)=>{navigator.clipboard.writeText(w),u(S),setTimeout(()=>u(null),2e3)},v=w=>({ERROR:"bg-red-100 text-red-800",WARN:"bg-yellow-100 text-yellow-800",INFO:"bg-blue-100 text-blue-800",DEBUG:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800",y=w=>({ERROR:"",WARN:"",INFO:"",DEBUG:""})[w]||w,x=w=>w?w>=500?"text-red-600":w>=400?"text-yellow-600":w>=300?"text-blue-600":"text-green-600":"text-gray-500",b=w=>w?w>=500?"bg-red-100":w>=400?"bg-yellow-100":w>=300?"bg-blue-100":"bg-green-100":"bg-gray-100",N=(w,S=0)=>!w||typeof w!="object"?i.jsx("span",{className:"text-sm text-gray-700 ltr-text text-left",children:w===null?"null":String(w)}):Array.isArray(w)?i.jsx("div",{className:"space-y-2 ltr-text text-left",children:w.map((T,A)=>i.jsxs("div",{className:"ml-4",children:[i.jsxs("span",{className:"text-xs text-gray-500",children:["[",A,"]:"]}),i.jsx("div",{className:"ml-4 mt-1",children:N(T,S+1)})]},A))}):i.jsx("div",{className:"space-y-2 ltr-text text-left",children:Object.entries(w).map(([T,A])=>i.jsx("div",{className:"ml-4",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("span",{className:"text-xs font-semibold text-gray-600 min-w-[120px] flex-shrink-0",children:[T,":"]}),i.jsx("div",{className:"flex-1 min-w-0",children:typeof A=="object"&&A!==null?i.jsx("div",{className:"bg-gray-50 rounded-lg p-2 border border-gray-200",children:N(A,S+1)}):i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:"text-sm text-gray-700 break-all block",children:A===null?"null":String(A)}),T.toLowerCase()==="timestamp"&&A&&i.jsx("span",{className:"text-xs text-blue-600 font-medium rtl-text text-right",children:_e(typeof A=="number"?new Date(A).toISOString():String(A))})]})})]})},T))});return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/logs"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/logs"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" "}),i.jsx("p",{className:"text-gray-500 text-sm font-mono",children:e.id})]}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${v(e.level)}`,children:y(e.level)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Fx,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.service})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(GW,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),e.status_code?i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-lg font-bold ${b(e.status_code)} ${x(e.status_code)}`,children:e.status_code}):i.jsx("span",{className:"text-sm text-gray-400",children:"-"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(Ch,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.response_time?`${e.response_time}ms`:"-"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(Ch,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.message})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("span",{className:"px-3 py-1.5 bg-gray-100 rounded-lg text-sm font-mono text-gray-900",children:e.method||"-"}),e.method&&i.jsx("button",{onClick:()=>g(e.method,"method"),className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:c==="method"?i.jsx(ci,{className:"w-4 h-4 text-green-600"}):i.jsx(Md,{className:"w-4 h-4 text-gray-600"})})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("p",{className:"text-sm text-gray-900 font-mono flex-1 break-all bg-gray-50 rounded-lg px-3 py-1.5",children:e.path||"-"}),e.path&&i.jsx("button",{onClick:()=>g(e.path,"path"),className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:c==="path"?i.jsx(ci,{className:"w-4 h-4 text-green-600"}):i.jsx(Md,{className:"w-4 h-4 text-gray-600"})})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"Request ID"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("p",{className:"text-sm text-gray-900 font-mono flex-1 truncate bg-gray-50 rounded-lg px-3 py-1.5",children:e.request_id||"-"}),e.request_id&&i.jsx("button",{onClick:()=>g(e.request_id,"request_id"),className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:c==="request_id"?i.jsx(ci,{className:"w-4 h-4 text-green-600"}):i.jsx(Md,{className:"w-4 h-4 text-gray-600"})})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"Trace ID"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("p",{className:"text-sm text-gray-900 font-mono flex-1 truncate bg-gray-50 rounded-lg px-3 py-1.5",children:e.trace_id||"-"}),e.trace_id&&i.jsx("button",{onClick:()=>g(e.trace_id,"trace_id"),className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:c==="trace_id"?i.jsx(ci,{className:"w-4 h-4 text-green-600"}):i.jsx(Md,{className:"w-4 h-4 text-gray-600"})})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(WW,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" IP"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("p",{className:"text-sm text-gray-900 font-mono flex-1 break-all bg-gray-50 rounded-lg px-3 py-1.5",children:e.ip_address||"-"}),e.ip_address&&i.jsx("button",{onClick:()=>g(e.ip_address,"ip"),className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:c==="ip"?i.jsx(ci,{className:"w-4 h-4 text-green-600"}):i.jsx(Md,{className:"w-4 h-4 text-gray-600"})})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"User ID"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("p",{className:"text-sm text-gray-900 font-mono flex-1 truncate bg-gray-50 rounded-lg px-3 py-1.5",children:e.user_id||"-"}),e.user_id&&i.jsx("button",{onClick:()=>g(e.user_id,"user_id"),className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",children:c==="user_id"?i.jsx(ci,{className:"w-4 h-4 text-green-600"}):i.jsx(Md,{className:"w-4 h-4 text-gray-600"})})]})]}),e.user_agent&&i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"User Agent"}),i.jsx("p",{className:"text-sm text-gray-700 break-all bg-gray-50 rounded-lg px-3 py-1.5",children:e.user_agent})]})]})]}),e.error&&i.jsxs("div",{className:"bg-white rounded-xl border border-red-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:i.jsx(gl,{className:"w-4 h-4 text-red-600"})}),i.jsx("h3",{className:"font-bold text-red-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[e.error.name&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-red-900 bg-red-50 rounded-lg px-3 py-1.5",children:e.error.name})]}),e.error.message&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm text-red-900 bg-red-50 rounded-lg px-3 py-1.5",children:e.error.message})]}),e.error.stack&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"Stack Trace"}),i.jsx("pre",{className:"text-xs text-red-900 bg-red-50 p-4 rounded-lg overflow-x-auto border border-red-200",children:e.error.stack})]})]})]}),e.metadata&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"Metadata"})]}),i.jsx("button",{onClick:()=>h(!d),className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:d?"":" "})]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:d?i.jsx("div",{className:"space-y-3 ltr-text text-left",children:N(e.metadata)}):i.jsx("pre",{className:"text-xs text-gray-700 overflow-x-auto max-h-64 overflow-y-auto ltr-text text-left",children:JSON.stringify(e.metadata,null,2)})})]})]})}function iye(r){return!r||r.length===0?!1:r.some(t=>{const e=t.toUpperCase();return e==="UMA_PROTECTION"||e==="CUSTOMER"||e.startsWith("$")?!1:!e.endsWith("_SELF")})}function lye(r){return!r||r.length===0?!1:r.some(t=>t.toUpperCase().endsWith("_SELF"))}function oye(r){const t=iye(r),e=lye(r);return t&&e?"both":t?"admin":"customer"}function cye({onRoleSelected:r}){const[t,e]=I.useState(null),a=n=>{e(n),r(n)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-100 flex items-center justify-center p-6",children:i.jsx("div",{className:"max-w-2xl w-full",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-5",children:i.jsx(_t,{className:"w-10 h-10 text-primary-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"  "}),i.jsx("p",{className:"text-gray-600 mt-3 text-base",children:"         "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("button",{onClick:()=>a("admin"),className:`p-8 rounded-xl border-2 transition-all duration-200 text-right ${t==="admin"?"border-primary-500 bg-primary-50 shadow-lg scale-105":"border-gray-200 hover:border-primary-300 hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${t==="admin"?"bg-primary-600":"bg-gray-100"}`,children:i.jsx(KW,{className:`w-8 h-8 ${t==="admin"?"text-white":"text-gray-600"}`})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm",children:"      "})]})}),i.jsx("button",{onClick:()=>a("customer"),className:`p-8 rounded-xl border-2 transition-all duration-200 text-right ${t==="customer"?"border-primary-500 bg-primary-50 shadow-lg scale-105":"border-gray-200 hover:border-primary-300 hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${t==="customer"?"bg-primary-600":"bg-gray-100"}`,children:i.jsx(RC,{className:`w-8 h-8 ${t==="customer"?"text-white":"text-gray-600"}`})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm",children:"          "})]})})]})]})})})}function uye({onLoginSuccess:r}){const t=Je(),[e,a]=I.useState({mobile:"",password:""}),[n,s]=I.useState(!1),[l,o]=I.useState(!1),[c,u]=I.useState(""),[d,h]=I.useState(!1),p=async y=>{y.preventDefault(),o(!0),u("");try{const x=await bo.login(e);console.log("Login response:",x),x.access_token&&localStorage.setItem("access_token",x.access_token),x.refresh_token&&localStorage.setItem("refresh_token",x.refresh_token);try{const b=await Nu.getRoles(),N=oye(b);N==="both"?h(!0):N==="admin"?(localStorage.setItem("panel_type","admin"),r(),setTimeout(()=>t("/manage"),0)):(localStorage.setItem("panel_type","customer"),r(),setTimeout(()=>t("/user"),0))}catch(b){console.error("Error fetching roles:",b),localStorage.setItem("panel_type","customer"),r(),setTimeout(()=>t("/user"),0)}}catch(x){console.error("Login error:",x),u(x.response?.data?.message||x.message||"    ")}finally{o(!1)}},g=y=>{localStorage.setItem("panel_type",y),r(),setTimeout(()=>{t(y==="admin"?"/manage":"/user")},0)},v=y=>{a(x=>({...x,[y.target.name]:y.target.value}))};return d?i.jsx(cye,{onRoleSelected:g}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-100 flex items-center justify-center p-6",children:i.jsx("div",{className:"max-w-lg w-full",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-10",children:[i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-5",children:i.jsx(iS,{className:"w-10 h-10 text-primary-600"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"  "}),i.jsx("p",{className:"text-gray-600 mt-3 text-base",children:"     "})]}),i.jsxs("form",{onSubmit:p,className:"space-y-7",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"mobile",className:"block text-base font-semibold text-gray-700 mb-3",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(QW,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400"}),i.jsx("input",{type:"tel",id:"mobile",name:"mobile",value:e.mobile,onChange:v,className:"flex h-12 w-full rounded-lg border-2 border-gray-300 bg-white px-4 py-3 text-base placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 focus-visible:border-primary-500 disabled:cursor-not-allowed disabled:opacity-50 pr-12 w-full",placeholder:"09123456789",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-base font-semibold text-gray-700 mb-3",children:" "}),i.jsxs("div",{className:"relative",children:[i.jsx(iS,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400"}),i.jsx("input",{type:n?"text":"password",id:"password",name:"password",value:e.password,onChange:v,className:"flex h-12 w-full rounded-lg border-2 border-gray-300 bg-white px-4 py-3 text-base placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 focus-visible:border-primary-500 disabled:cursor-not-allowed disabled:opacity-50 pr-12 pl-12 w-full",placeholder:"     ",required:!0}),i.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:n?i.jsx(UW,{className:"w-6 h-6"}):i.jsx(FW,{className:"w-6 h-6"})})]})]}),c&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-600 text-base font-semibold",children:c})}),i.jsx("button",{type:"submit",disabled:l,className:"inline-flex items-center justify-center rounded-lg text-base font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary-600 text-white hover:bg-primary-700 hover:shadow-lg active:scale-95 w-full py-4 text-lg",children:l?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-6 h-6 border-[3px] border-white border-t-transparent rounded-full animate-spin ml-3"}),i.jsx("span",{children:"  ..."})]}):"  "})]})]})})})}const dye=r=>({ERROR:"",WARN:"",INFO:"",DEBUG:""})[r]||r,hye=r=>({ERROR:"bg-red-100 text-red-800",WARN:"bg-yellow-100 text-yellow-800",INFO:"bg-blue-100 text-blue-800",DEBUG:"bg-gray-100 text-gray-800"})[r]||"bg-gray-100 text-gray-800",fye=r=>r?r>=500?"text-red-600":r>=400?"text-yellow-600":r>=300?"text-blue-600":"text-green-600":"text-gray-500",pye=r=>{if(!r||r==="unknown")return"-";const t=/\b(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\b/g,e=r.match(t);if(e&&e.length>0)return e[e.length-1];const a=/\b([0-9a-fA-F]{1,4}(?::[0-9a-fA-F]{1,4}){7}|::1|::)\b/g,n=r.match(a);return n&&n.length>0?n[n.length-1]:r.length>30?r.substring(0,30)+"...":r};function gye(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState(""),[x,b]=I.useState(""),[N,w]=I.useState("");I.useEffect(()=>{S()},[u]),I.useEffect(()=>{d(1),S()},[p,v,x,N]);const S=async()=>{try{n(!0),l("");const C={page:u,"page-size":h};p&&(C.search=p),v&&(C.level=v),x&&(C.statusCode=parseInt(x)),N&&(C.method=N);const M=await tz.getLogs(C);e(M.data||[]),c(M.count||0)}catch(C){console.error("Error fetching logs:",C),l(C.response?.data?.message||"    ")}finally{n(!1)}},T=C=>{d(C)},A=()=>{let C=0;return p&&C++,v&&C++,x&&C++,N&&C++,C};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-500 to-gray-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Fx,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o,"   ",A()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:C=>g(C.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:C=>y(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"ERROR",children:""}),i.jsx("option",{value:"WARN",children:""}),i.jsx("option",{value:"INFO",children:""}),i.jsx("option",{value:"DEBUG",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"number",value:x,onChange:C=>b(C.target.value),placeholder:" ",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:N,onChange:C=>w(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"GET",children:"GET"}),i.jsx("option",{value:"POST",children:"POST"}),i.jsx("option",{value:"PUT",children:"PUT"}),i.jsx("option",{value:"PATCH",children:"PATCH"}),i.jsx("option",{value:"DELETE",children:"DELETE"})]})]})]}),A()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[A(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),b(""),w(""),d(1)},className:"text-sm text-slate-600 hover:text-slate-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-slate-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 min-w-[200px]",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 w-20",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 w-24",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 w-28",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700 w-32",children:"IP"}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/logs/${C.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(C.created_at)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${hye(C.level)}`,children:dye(C.level)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.service}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 min-w-[200px]",children:i.jsx("div",{className:"break-all",children:C.path||"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:i.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs font-mono",children:C.method||"-"})}),i.jsx("td",{className:"px-4 py-4",children:C.status_code?i.jsx("span",{className:`text-sm font-semibold ${fye(C.status_code)}`,children:C.status_code}):i.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:C.response_time?`${C.response_time}ms`:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 font-mono",children:pye(C.ip_address)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:M=>{M.stopPropagation(),r(`/manage/logs/${C.id}`)},className:"px-3 py-1 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors text-sm font-semibold",children:""})})]},C.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Fx,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:A()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:T})]})}function mye(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState("");I.useEffect(()=>{x()},[u]),I.useEffect(()=>{d(1),x()},[p,v]);const x=async()=>{try{n(!0),l("");const T=await Nu.getNonEmployees({page:u,"page-size":h});e(T.data||[]),c(T.count||0)}catch(T){console.error("Error fetching non-employee profiles:",T),l(T.response?.data?.message||"    ")}finally{n(!1)}},b=T=>{d(T)},N=()=>{let T=0;return p&&T++,v!==""&&T++,T},w=t.filter(T=>{if(p){const A=p.toLowerCase();if(!(T.first_name.toLowerCase().includes(A)||T.last_name.toLowerCase().includes(A)||T.username?.toLowerCase().includes(A)||T.mobile?.includes(p)))return!1}if(v!==""){const A=v==="true";if(T.enabled!==A)return!1}return!0}),S=w.length;return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(ol,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[S," ",N()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:T=>g(T.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:T=>y(T.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"true",children:""}),i.jsx("option",{value:"false",children:""})]})]})]}),N()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[N(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),d(1)},className:"text-sm text-emerald-600 hover:text-emerald-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&S>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"   "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/profiles/${T.id}`),children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:[T.first_name," ",T.last_name]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.username||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.mobile||"-"}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${T.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.enabled?"":""})}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:A=>{A.stopPropagation(),r(`/manage/profiles/${T.id}`)},className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors text-sm font-semibold",children:""})})]},T.id))})]})})}),!a&&S===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(ol,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:N()>0?"      ":"  "})]}),!a&&S>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:b})]})}function vye({cargo:r}){const t=Je(),e=o=>({DISPATCH:"",RETURN:"",EXCHANGE:""})[o]||o,a=o=>({AT_INVENTORY:" ",FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   "})[o]||o,n=(r.products||[]).reduce((o,c)=>o+c.net_weight,0),s=(r.products||[]).reduce((o,c)=>o+c.box_weight,0),l=(r.products||[]).reduce((o,c)=>o+c.gross_weight,0);return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("button",{onClick:()=>t(-1),className:"flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:i.jsx(Ut,{className:"w-5 h-5 text-gray-600"})}),i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-md",children:i.jsx(kr,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl font-bold text-gray-900",children:["  #",r.code]}),i.jsxs("p",{className:"text-gray-600 text-sm",children:[e(r.type)," -"," ",a(r.delivery_method)]})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800",children:[r.products?.length||0," "]}),i.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800",children:[n.toFixed(2)," "]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-2",children:[i.jsx(S8,{className:"w-4 h-4 text-blue-600"}),i.jsx("h3",{className:"font-semibold text-blue-900",children:" "})]}),i.jsxs("p",{className:"text-sm text-blue-800",children:[n.toFixed(2)," "]})]}),i.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-2",children:[i.jsx(nt,{className:"w-4 h-4 text-orange-600"}),i.jsx("h3",{className:"font-semibold text-orange-900",children:" "})]}),i.jsxs("p",{className:"text-sm text-orange-800",children:[s.toFixed(2)," "]})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-2",children:[i.jsx(kr,{className:"w-4 h-4 text-green-600"}),i.jsx("h3",{className:"font-semibold text-green-900",children:" "})]}),i.jsxs("p",{className:"text-sm text-green-800",children:[l.toFixed(2)," "]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx(kr,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-medium",children:e(r.type)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-medium",children:a(r.delivery_method)})]}),r.truck_license_plate&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-medium",children:r.truck_license_plate})]}),r.truck_driver&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:":"}),i.jsxs("span",{className:"text-sm font-medium",children:[r.truck_driver.first_name," ",r.truck_driver.last_name]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx(Wr,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-medium",children:_e(r.date)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-medium",children:_e(r.created_at)})]}),r.created_date&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-medium",children:_e(r.created_date)})]})]})]})]}),r.employee&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx(_t,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-medium",children:r.employee_id})]}),r.employee.profile&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:" :"}),i.jsxs("span",{className:"text-sm font-medium",children:[r.employee.profile.first_name," ",r.employee.profile.last_name]})]})]})]}),(r.products||[]).length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx(nt,{className:"w-5 h-5 text-gray-600"}),i.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:["  (",(r.products||[]).length," )"]})]}),i.jsx("div",{className:"space-y-4",children:(r.products||[]).map((o,c)=>i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:o.product_title}),i.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",o.product_code]})]}),i.jsx("div",{className:"text-left",children:i.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[o.sec_unit_amount," "]})})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("p",{className:"font-medium",children:[o.net_weight," "]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("p",{className:"font-medium",children:[o.box_weight," "]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("p",{className:"font-medium",children:[o.gross_weight," "]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mt-3",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsx("p",{className:"font-medium",children:ue(o.online_price)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsx("p",{className:"font-medium",children:ue(o.retail_price)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsx("p",{className:"font-medium",children:ue(o.wholesale_price)})]})]})]},c))})]}),r.description&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),i.jsx("p",{className:"text-gray-800",children:r.description})]})]})}const qw={[wt.Seller]:"",[wt.SalesManager]:" ",[wt.Processing]:" ",[wt.Inventory]:"",[wt.Accounting]:"",[wt.Cargo]:"",[wt.PartiallyDelivered]:" ",[wt.Delivered]:" ",[wt.PartiallyReturned]:" ",[wt.Returned]:" "};function xye({order:r,isOpen:t,onClose:e,onSuccess:a}){const[n,s]=I.useState(!1),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(""),p=T=>{switch(T){case wt.Seller:return wt.SalesManager;case wt.SalesManager:return wt.Processing;case wt.Processing:return wt.Inventory;case wt.Inventory:return wt.Accounting;case wt.Accounting:return wt.Cargo;case wt.Cargo:return wt.PartiallyDelivered;default:return null}},g=T=>{switch(T){case wt.SalesManager:return wt.Seller;case wt.Processing:return wt.SalesManager;case wt.Inventory:return wt.Processing;case wt.Accounting:return wt.Inventory;case wt.Cargo:return wt.Accounting;case wt.PartiallyDelivered:return wt.Cargo;default:return null}},v=p(r.step),y=g(r.step),x=[wt.Delivered,wt.PartiallyReturned,wt.Returned],b=[wt.Seller,wt.Delivered,wt.Returned],N=v!==null&&!x.includes(r.step),w=y!==null&&!b.includes(r.step),S=async()=>{if(n&&!l.trim()){h("      ");return}if(!N&&!n){h("      ");return}if(!w&&n){h("      ");return}try{u(!0),h("");const T=n?y:v;if(!T){h("   ");return}const A={step:T,description:l.trim()||void 0,rejected:n||void 0};await ls.changeOrderStep(r.id,A),a(),e(),s(!1),o("")}catch(T){console.error("Error changing order step:",T),h(T.response?.data?.message||"    ")}finally{u(!1)}};return t?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx(gl,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "})]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[d&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-600",children:d})}),i.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-lg font-bold text-blue-900",children:qw[r.step]||r.step})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx(gl,{className:"w-6 h-6 text-white"})})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"  *"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsxs("label",{className:`flex-1 flex items-center justify-center space-x-reverse space-x-2 p-4 border-2 rounded-lg cursor-pointer transition-all ${n?"border-gray-300 bg-white hover:bg-gray-50":"border-green-500 bg-green-50"} ${N?"":"opacity-50 cursor-not-allowed"}`,children:[i.jsx("input",{type:"radio",name:"action",checked:!n,onChange:()=>{s(!1),h("")},disabled:!N,className:"w-4 h-4 text-green-600"}),i.jsx(us,{className:`w-5 h-5 ${n?"text-gray-400":"text-green-600"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:"     "}),v&&i.jsx("p",{className:"text-sm text-gray-600",children:qw[v]||v}),!N&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:"      "})]}),i.jsx(Ut,{className:`w-5 h-5 ${n?"text-gray-400":"text-green-600"}`})]}),i.jsxs("label",{className:`flex-1 flex items-center justify-center space-x-reverse space-x-2 p-4 border-2 rounded-lg cursor-pointer transition-all ${n?"border-red-500 bg-red-50":"border-gray-300 bg-white hover:bg-gray-50"} ${w?"":"opacity-50 cursor-not-allowed"}`,children:[i.jsx("input",{type:"radio",name:"action",checked:n,onChange:()=>{s(!0),h("")},disabled:!w,className:"w-4 h-4 text-red-600"}),i.jsx(xi,{className:`w-5 h-5 ${n?"text-red-600":"text-gray-400"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:"     "}),y&&i.jsx("p",{className:"text-sm text-gray-600",children:qw[y]||y}),!w&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:"      "})]}),i.jsx(yu,{className:`w-5 h-5 ${n?"text-red-600":"text-gray-400"}`})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",n&&i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("textarea",{value:l,onChange:T=>{o(T.target.value),h("")},placeholder:n?"      ":" ()",rows:4,className:`w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${n&&!l.trim()?"border-red-300":"border-gray-300"}`}),n&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:"      "})]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 p-6 border-t border-gray-200",children:[i.jsx("button",{onClick:e,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:""}),i.jsx("button",{onClick:S,disabled:c||n&&!l.trim(),className:`px-6 py-2 rounded-lg text-white font-semibold flex items-center space-x-reverse space-x-2 transition-colors ${n?"bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed":"bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"  ..."})]}):n?i.jsxs(i.Fragment,{children:[i.jsx(yu,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ut,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})})]})]})}):null}function En({label:r,isRequired:t,value:e,onChange:a,options:n,placeholder:s=" ",icon:l,className:o=""}){const[c,u]=I.useState(!1),[d,h]=I.useState(!1),[p,g]=I.useState(!1),v=I.useRef(null),y=n.find(x=>x.value===e);return I.useEffect(()=>{const x=b=>{v.current&&!v.current.contains(b.target)&&(u(!1),h(!1))};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),i.jsxs("div",{className:`w-full ${o}`,ref:v,children:[r&&i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 transition-all duration-200",children:[r,t&&i.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!c)},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),className:`
            w-full px-4 py-3 
            ${l?"pr-11":""}
            text-right
            border-2 rounded-xl
            bg-gradient-to-r from-white to-gray-50
            text-gray-900 font-medium
            cursor-pointer
            transition-all duration-300 ease-out
            ${d||c?"border-blue-500 shadow-lg shadow-blue-100 scale-[1.01] from-white to-blue-50/30":p?"border-gray-400 shadow-md scale-[1.005]":"border-gray-300 shadow-sm"}
            focus:outline-none focus:ring-4 focus:ring-blue-100
            hover:border-gray-400
          `,children:[l&&i.jsx("div",{className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-all duration-300 ${d||c?"text-blue-500":"text-gray-400"}`,children:l}),i.jsx("span",{className:y?"text-gray-900":"text-gray-400",children:y?y.label:s}),i.jsx(LC,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-all duration-300 ${c?"rotate-180 text-blue-500":"rotate-0 text-gray-400"}`})]}),i.jsx("div",{className:`
            absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-500
            transition-all duration-500 ease-out
            ${d||c?"w-full opacity-100":"w-0 opacity-0"}
          `}),c&&i.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 border-blue-200 rounded-xl shadow-2xl overflow-hidden animate-dropdown-open",style:{animation:"dropdownSlide 0.3s ease-out"},children:i.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar",children:n.map((x,b)=>{const N=x.value===e;return i.jsxs("button",{type:"button",onClick:()=>{a(x.value),u(!1),h(!1)},className:`
                      w-full px-4 py-3 text-right flex items-center justify-between
                      transition-all duration-200
                      ${N?"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 font-semibold":"text-gray-700 hover:bg-gradient-to-r hover:from-gray-50 hover:to-blue-50/30"}
                      ${b!==0?"border-t border-gray-100":""}
                    `,style:{animation:`fadeInItem 0.2s ease-out ${b*.03}s both`},children:[i.jsx("span",{children:x.label}),N&&i.jsx(ci,{className:"w-5 h-5 text-blue-600 animate-scale-in"})]},x.value)})})})]}),i.jsx("style",{jsx:!0,children:`
        @keyframes dropdownSlide {
          from {
            opacity: 0;
            transform: translateY(-10px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        @keyframes fadeInItem {
          from {
            opacity: 0;
            transform: translateX(10px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }

        @keyframes scaleIn {
          from {
            transform: scale(0);
          }
          to {
            transform: scale(1);
          }
        }

        .animate-scale-in {
          animation: scaleIn 0.2s ease-out;
        }

        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: linear-gradient(180deg, #3b82f6, #6366f1);
          border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(180deg, #2563eb, #4f46e5);
        }
      `})]})}const Pa=I.forwardRef(({label:r,error:t,icon:e,isRequired:a,type:n="text",value:s,onChange:l,className:o="",...c},u)=>{const[d,h]=I.useState(!1),[p,g]=I.useState(!1),[v,y]=I.useState(""),x=S=>{const T=S.target.value;if(n==="number"){const A=T.replace(/[^\d-,]/g,"");if(y(A),A===""){l?.(0);return}const C=r$(A);l?.(C)}else l?.(T)},b=()=>{h(!0),n==="number"&&s&&y(String(s))},N=()=>{h(!1),y("")},w=n==="number"?d?v||(s===0?"":String(s)):s&&s!==0?ih(s):"":s;return i.jsxs("div",{className:"w-full",children:[r&&i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 transition-all duration-200",children:[r,a&&i.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),i.jsxs("div",{className:"relative group",children:[e&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 transition-all duration-300 group-hover:text-blue-500 group-focus-within:text-blue-600",children:e}),i.jsx("input",{ref:u,type:"text",value:w,onChange:x,onFocus:b,onBlur:N,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onWheel:S=>S.currentTarget.blur(),className:`
              w-full px-4 py-3 
              ${e?"pr-11":""}
              border-2 rounded-xl
              bg-gradient-to-r from-white to-gray-50
              text-gray-900 font-medium
              placeholder:text-gray-400 placeholder:font-normal
              transition-all duration-300 ease-out
              ${d?"border-blue-500 shadow-lg shadow-blue-100 scale-[1.01] from-white to-blue-50/30":p?"border-gray-400 shadow-md scale-[1.005]":t?"border-red-300 bg-red-50/30":"border-gray-300 shadow-sm"}
              focus:outline-none focus:ring-4 focus:ring-blue-100
              hover:border-gray-400
              disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
              ${o}
            `,...c}),i.jsx("div",{className:`
              absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-500
              transition-all duration-500 ease-out
              ${d?"w-full opacity-100":"w-0 opacity-0"}
            `})]}),t&&i.jsx("p",{className:"mt-1.5 text-sm text-red-600 font-medium animate-shake",children:t})]})});Pa.displayName="CustomInput";const ou=I.forwardRef(({label:r,error:t,isRequired:e,className:a="",...n},s)=>{const[l,o]=I.useState(!1),[c,u]=I.useState(!1);return i.jsxs("div",{className:"w-full",children:[r&&i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 transition-all duration-200",children:[r,e&&i.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),i.jsxs("div",{className:"relative group",children:[i.jsx("textarea",{ref:s,onFocus:()=>o(!0),onBlur:()=>o(!1),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:`
              w-full px-4 py-3
              border-2 rounded-xl
              bg-gradient-to-r from-white to-gray-50
              text-gray-900 font-medium
              placeholder:text-gray-400 placeholder:font-normal
              resize-none
              transition-all duration-300 ease-out
              ${l?"border-blue-500 shadow-lg shadow-blue-100 scale-[1.01] from-white to-blue-50/30":c?"border-gray-400 shadow-md scale-[1.005]":t?"border-red-300 bg-red-50/30":"border-gray-300 shadow-sm"}
              focus:outline-none focus:ring-4 focus:ring-blue-100
              hover:border-gray-400
              disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
              ${a}
            `,...n}),i.jsx("div",{className:`
              absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-500
              transition-all duration-500 ease-out
              ${l?"w-full opacity-100":"w-0 opacity-0"}
            `})]}),t&&i.jsx("p",{className:"mt-1.5 text-sm text-red-600 font-medium animate-shake",children:t})]})});ou.displayName="CustomTextarea";function yye({isOpen:r,onClose:t,onSuccess:e,order:a}){const[n,s]=I.useState(!1),[l,o]=I.useState(""),[c,u]=I.useState([]),[d,h]=I.useState([]),[p,g]=I.useState([]),[v,y]=I.useState(""),[x,b]=I.useState(""),[N,w]=I.useState(""),[S,T]=I.useState(""),[A,C]=I.useState(""),[M,R]=I.useState(""),[k,L]=I.useState([]);I.useEffect(()=>{if(r){O(),U();const q=new Date,G=ra.toJalaali(q);y(`${G.jy}/${String(G.jm).padStart(2,"0")}/${String(G.jd).padStart(2,"0")}`)}else H()},[r,a]);const O=async()=>{try{const[q,G]=await Promise.all([Us.getWarehouses(),_m.getAllEmployees()]);u(q||[]),g(G||[])}catch(q){console.error("Error fetching data:",q),o("   ")}};I.useEffect(()=>{x?z(x):(h([]),w(""))},[x]);const z=async q=>{try{const G=await Q8.getTrucksByWarehouse(q);h(G.data||[])}catch(G){console.error("Error fetching trucks:",G),h([])}},U=()=>{const q=(a.ordered_basket||[]).map(G=>({product_id:G.product_id,product_code:G.product_code.toString(),product_title:G.product_title,sec_unit_amount:0,net_weight:0,box_weight:0,gross_weight:0,carton_count:0,maxAvailable:G.weight}));L(q)},H=()=>{y(""),b(""),w(""),T(""),C(""),R(""),L([]),o("")},P=q=>{if(!q||q.trim()==="")return new Date;const G=q.split("/");if(G.length!==3)return new Date;const $=parseInt(G[0]),Z=parseInt(G[1]),te=parseInt(G[2]);if(isNaN($)||isNaN(Z)||isNaN(te)||$<1300||$>1500||Z<1||Z>12||te<1||te>31)return new Date;try{const me=ra.jalaaliToDateObject($,Z,te);return!me||isNaN(me.getTime())?new Date:me}catch(me){return console.error("Error converting Persian date:",me),new Date}},F=(q,G,$)=>{L(k.map(Z=>Z.product_id===q?{...Z,[G]:$}:Z))},Y=()=>{if(!v)return o("    "),!1;if(!x)return o("    "),!1;if(!S)return o("     "),!1;if(!A)return o("    "),!1;if(!k.some(G=>G.sec_unit_amount>0))return o("       "),!1;for(const G of k)if(G.sec_unit_amount>G.maxAvailable)return o(`  ${G.product_title}    ${G.maxAvailable} `),!1;return!0},X=async()=>{if(o(""),!!Y())try{s(!0);const q=k.filter($=>$.sec_unit_amount>0).map($=>({product_id:$.product_id,sec_unit_amount:$.sec_unit_amount,net_weight:$.net_weight,box_weight:$.box_weight,gross_weight:$.gross_weight,carton_count:$.carton_count})),G={order_id:a.id,date:P(v),warehouse_id:x,truck_id:N||void 0,delivery_method:S,employee_id:A,description:M||void 0,products:q};await K8.createDispatch(G),e(),t(),H()}catch(q){console.error("Error creating dispatch cargo:",q),o(q.response?.data?.message||"   ")}finally{s(!1)}};return r?i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 font-vazir",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(nt,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),i.jsxs("p",{className:"text-sm text-blue-100",children:[" #",a.code]})]})]}),i.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",disabled:n,children:i.jsx(St,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"p-6 max-h-[calc(90vh-140px)] overflow-y-auto",children:[l&&i.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ls,{value:v,onChange:q=>y(q),placeholder:" "})]}),i.jsx(En,{label:"",isRequired:!0,value:x,onChange:q=>b(q),options:[{value:"",label:" "},...c.map(q=>({value:q.id,label:`${q.name} (${q.code})`}))],placeholder:" ",icon:i.jsx(nt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(En,{label:" ",isRequired:!0,value:S,onChange:q=>T(q),options:[{value:"",label:"  "},{value:"FREE_OUR_TRUCK",label:"    "},{value:"FREE_OTHER_SERVICES",label:"    "},{value:"PAID",label:"   "},{value:"AT_INVENTORY",label:" "}],placeholder:"  "}),S==="FREE_OUR_TRUCK"&&i.jsxs("div",{children:[i.jsx(En,{label:" ()",value:N,onChange:q=>w(q),options:[{value:"",label:" "},...d.map(q=>({value:q.id,label:`${q.license_plate}`}))],placeholder:x?d.length===0?"     ":" ":"    ",icon:i.jsx(kr,{className:"w-5 h-5"})}),!x&&i.jsx("p",{className:"text-xs text-amber-600 mt-1.5",children:"         "}),x&&d.length===0&&i.jsx("p",{className:"text-xs text-red-600 mt-1.5",children:"      "})]})]}),i.jsx(En,{label:"",isRequired:!0,value:A,onChange:q=>C(q),options:[{value:"",label:" "},...p.map(q=>({value:q.id,label:`${q.profile.first_name} ${q.profile.last_name}`}))],placeholder:" ",icon:i.jsx(_t,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),i.jsx("div",{className:"space-y-3",children:k.map(q=>i.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:q.product_title}),i.jsxs("p",{className:"text-sm text-gray-600",children:[": ",q.product_code]}),i.jsxs("p",{className:"text-xs text-blue-600 font-medium mt-1",children:["  : ",q.maxAvailable," "]})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[i.jsx(Pa,{label:" ()",type:"number",value:q.sec_unit_amount||"",onChange:G=>F(q.product_id,"sec_unit_amount",typeof G=="number"?G:0),placeholder:"0",className:"text-sm"}),i.jsx(Pa,{label:"  ()",type:"number",value:q.net_weight||"",onChange:G=>F(q.product_id,"net_weight",typeof G=="number"?G:0),placeholder:"0",className:"text-sm"}),i.jsx(Pa,{label:"  ()",type:"number",value:q.box_weight||"",onChange:G=>F(q.product_id,"box_weight",typeof G=="number"?G:0),placeholder:"0",className:"text-sm"}),i.jsx(Pa,{label:"  ()",type:"number",value:q.gross_weight||"",onChange:G=>F(q.product_id,"gross_weight",typeof G=="number"?G:0),placeholder:"0",className:"text-sm"}),i.jsx(Pa,{label:" ",type:"number",value:q.carton_count||"",onChange:G=>F(q.product_id,"carton_count",typeof G=="number"?G:0),placeholder:"0",className:"text-sm"})]})]},q.product_id))})]}),i.jsx(ou,{label:"",value:M,onChange:q=>R(q.target.value),rows:3,placeholder:"    ..."})]})]}),i.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex items-center justify-end space-x-reverse space-x-3 bg-gray-50",children:[i.jsx("button",{type:"button",onClick:t,disabled:n,className:"px-4 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-semibold disabled:opacity-50",children:""}),i.jsxs("button",{type:"button",onClick:X,disabled:n,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-semibold disabled:opacity-50 flex items-center space-x-reverse space-x-2",children:[n&&i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:n?"  ...":" "})]})]})]})}):null}function bye({isOpen:r,onClose:t,onSuccess:e,order:a,dispatchCargo:n}){const[s,l]=I.useState(!1),[o,c]=I.useState(""),[u,d]=I.useState([]),[h,p]=I.useState([]),[g,v]=I.useState([]),[y,x]=I.useState(""),[b,N]=I.useState(""),[w,S]=I.useState(""),[T,A]=I.useState(""),[C,M]=I.useState(""),[R,k]=I.useState(""),[L,O]=I.useState([]);I.useEffect(()=>{if(r){z(),H();const G=new Date,$=ra.toJalaali(G);x(`${$.jy}/${String($.jm).padStart(2,"0")}/${String($.jd).padStart(2,"0")}`)}else P()},[r,n]);const z=async()=>{try{const[G,$]=await Promise.all([Us.getWarehouses(),_m.getAllEmployees()]);d(G||[]),v($||[])}catch(G){console.error("Error fetching data:",G),c("   ")}};I.useEffect(()=>{b?U(b):(p([]),S(""))},[b]);const U=async G=>{try{const $=await Q8.getTrucksByWarehouse(G);p($.data||[])}catch($){console.error("Error fetching trucks:",$),p([])}},H=()=>{const G=n.products.map($=>({product_id:$.product_id,product_code:$.product_code.toString(),product_title:$.product_title,sec_unit_amount:0,net_weight:0,box_weight:0,gross_weight:0,maxAvailable:$.sec_unit_amount}));O(G)},P=()=>{x(""),N(""),S(""),A(""),M(""),k(""),O([]),c("")},F=G=>{if(!G||G.trim()==="")return new Date;const $=G.split("/");if($.length!==3)return new Date;const Z=parseInt($[0]),te=parseInt($[1]),me=parseInt($[2]);if(isNaN(Z)||isNaN(te)||isNaN(me)||Z<1300||Z>1500||te<1||te>12||me<1||me>31)return new Date;try{const Ce=ra.jalaaliToDateObject(Z,te,me);return!Ce||isNaN(Ce.getTime())?new Date:Ce}catch(Ce){return console.error("Error converting Persian date:",Ce),new Date}},Y=(G,$,Z)=>{O(L.map(te=>te.product_id===G?{...te,[$]:Z}:te))},X=()=>{if(!y)return c("    "),!1;if(!b)return c("    "),!1;if(!T)return c("     "),!1;if(!C)return c("    "),!1;if(!L.some($=>$.sec_unit_amount>0))return c("       "),!1;for(const $ of L)if($.sec_unit_amount>$.maxAvailable)return c(`  ${$.product_title}    ${$.maxAvailable} `),!1;return!0},q=async()=>{if(c(""),!!X())try{l(!0);const G=L.filter(Z=>Z.sec_unit_amount>0).map(Z=>({product_id:Z.product_id,sec_unit_amount:Z.sec_unit_amount,net_weight:Z.net_weight,box_weight:Z.box_weight,gross_weight:Z.gross_weight})),$={order_id:a.id,date:F(y),warehouse_id:b,truck_id:w||void 0,delivery_method:T,employee_id:C,dispatch_cargo_id:n.id,description:R||void 0,products:G};await K8.createReturn($),e(),t(),P()}catch(G){console.error("Error creating return cargo:",G),c(G.response?.data?.message||"    ")}finally{l(!1)}};return r?i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 font-vazir",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-rose-600 px-6 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(nt,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),i.jsxs("p",{className:"text-sm text-red-100",children:["   #",n.code]})]})]}),i.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",disabled:s,children:i.jsx(St,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"p-6 max-h-[calc(90vh-140px)] overflow-y-auto",children:[o&&i.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ls,{value:y,onChange:G=>x(G),placeholder:" "})]}),i.jsx(En,{label:"",isRequired:!0,value:b,onChange:G=>N(G),options:[{value:"",label:" "},...u.map(G=>({value:G.id,label:`${G.name} (${G.code})`}))],placeholder:" ",icon:i.jsx(nt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(En,{label:" ",isRequired:!0,value:T,onChange:G=>A(G),options:[{value:"",label:"  "},{value:"FREE_OUR_TRUCK",label:"    ()"},{value:"FREE_OTHER_SERVICES",label:"    ()"},{value:"PAID",label:"  "},{value:"AT_INVENTORY",label:" "}],placeholder:"  "}),T==="FREE_OUR_TRUCK"&&i.jsxs("div",{children:[i.jsx(En,{label:" ()",value:w,onChange:G=>S(G),options:[{value:"",label:" "},...h.map(G=>({value:G.id,label:`${G.license_plate}`}))],placeholder:b?h.length===0?"     ":" ":"    ",icon:i.jsx(kr,{className:"w-5 h-5"})}),!b&&i.jsx("p",{className:"text-xs text-amber-600 mt-1.5",children:"         "}),b&&h.length===0&&i.jsx("p",{className:"text-xs text-red-600 mt-1.5",children:"      "})]})]}),i.jsx(En,{label:"",isRequired:!0,value:C,onChange:G=>M(G),options:[{value:"",label:" "},...g.map(G=>({value:G.id,label:`${G.profile.first_name} ${G.profile.last_name}`}))],placeholder:" ",icon:i.jsx(_t,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),i.jsx("div",{className:"space-y-3",children:L.map(G=>i.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:G.product_title}),i.jsxs("p",{className:"text-sm text-gray-600",children:[": ",G.product_code]}),i.jsxs("p",{className:"text-xs text-red-600 font-medium mt-1",children:["  : ",G.maxAvailable," "]})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsx(Pa,{label:" ()",type:"number",value:G.sec_unit_amount||"",onChange:$=>Y(G.product_id,"sec_unit_amount",typeof $=="number"?$:0),placeholder:"0",className:"text-sm"}),i.jsx(Pa,{label:"  ()",type:"number",value:G.net_weight||"",onChange:$=>Y(G.product_id,"net_weight",typeof $=="number"?$:0),placeholder:"0",className:"text-sm"}),i.jsx(Pa,{label:"  ()",type:"number",value:G.box_weight||"",onChange:$=>Y(G.product_id,"box_weight",typeof $=="number"?$:0),placeholder:"0",className:"text-sm"}),i.jsx(Pa,{label:"  ()",type:"number",value:G.gross_weight||"",onChange:$=>Y(G.product_id,"gross_weight",typeof $=="number"?$:0),placeholder:"0",className:"text-sm"})]})]},G.product_id))})]}),i.jsx(ou,{label:"",value:R,onChange:G=>k(G.target.value),rows:3,placeholder:"    ..."})]})]}),i.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex items-center justify-end space-x-reverse space-x-3 bg-gray-50",children:[i.jsx("button",{type:"button",onClick:t,disabled:s,className:"px-4 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-semibold disabled:opacity-50",children:""}),i.jsxs("button",{type:"button",onClick:q,disabled:s,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-rose-600 text-white rounded-lg hover:from-red-700 hover:to-rose-700 transition-all font-semibold disabled:opacity-50 flex items-center space-x-reverse space-x-2",children:[s&&i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:s?"  ...":"  "})]})]})]})}):null}function _ye({isOpen:r,onClose:t,onSuccess:e,orderId:a,productId:n,productTitle:s}){const[l,o]=I.useState(!1),[c,u]=I.useState(""),d=async()=>{try{o(!0),u(""),await ls.fulfillProduct(a,n),e(),t()}catch(h){console.error("Error fulfilling product:",h),u(h.response?.data?.message||"    ")}finally{o(!1)}};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx(nt,{className:"w-6 h-6 text-green-600"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[c&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-600 flex items-center space-x-reverse space-x-2",children:[i.jsx(gl,{className:"w-5 h-5"}),i.jsx("span",{children:c})]})}),i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[i.jsx("p",{className:"text-yellow-800 font-semibold mb-2",children:"             "}),i.jsxs("div",{className:"bg-white rounded-lg p-3 mt-3",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:":"}),i.jsx("p",{className:"text-base font-bold text-gray-900",children:s})]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:i.jsx("p",{className:"text-sm text-blue-800",children:'       "  "               .'})})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 p-6 border-t border-gray-200",children:[i.jsx("button",{onClick:t,disabled:l,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:""}),i.jsx("button",{onClick:d,disabled:l,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-reverse space-x-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(us,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})})]})]})}):null}function Nye({order:r,isOpen:t,onClose:e,onSuccess:a}){const[n,s]=I.useState(r.hp_invoice_code??0),[l,o]=I.useState(!1),[c,u]=I.useState(""),d=async()=>{if(!n){u("     ");return}try{o(!0),u(""),await ls.updateOrderHpCode(r.id,n),a(),e()}catch(h){console.error("Error updating HP code:",h),u(h.response?.data?.message||"    ")}finally{o(!1)}};return t?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx(nS,{className:"w-6 h-6 text-green-600"}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "})]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[c&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-600",children:c})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsx("input",{type:"number",value:n,onChange:h=>{s(Number(h.target.value)),u("")},placeholder:": 12345",min:"1",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),r.hp_invoice_code&&i.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[" : ",r.hp_invoice_code]})]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 p-6 border-t border-gray-200",children:[i.jsx("button",{onClick:e,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:""}),i.jsx("button",{onClick:d,disabled:l,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-reverse space-x-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(us,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})})]})]})}):null}const FP=r=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:" ",INVENTORY:"",ACCOUNTING:"",CARGO:"",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",PARTIALLY_RETURNED:" ",RETURNED:" "})[r]||r,YP=r=>({SELLER:"bg-blue-100 text-blue-800",SALES_MANAGER:"bg-purple-100 text-purple-800",PROCESSING:"bg-yellow-100 text-yellow-800",INVENTORY:"bg-indigo-100 text-indigo-800",ACCOUNTING:"bg-green-100 text-green-800",CARGO:"bg-teal-100 text-teal-800",PARTIALLY_DELIVERED:"bg-orange-100 text-orange-800",DELIVERED:"bg-emerald-100 text-emerald-800",PARTIALLY_RETURNED:"bg-red-100 text-red-800",RETURNED:"bg-gray-100 text-gray-800"})[r]||"bg-gray-100 text-gray-800",jye=r=>({PAID:" ",NOT_PAID:" ",PARTIALLY_PAID:" "})[r]||r,wye=r=>({PAID:"bg-green-100 text-green-800",NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800"})[r]||"bg-gray-100 text-gray-800",WP=r=>({AT_INVENTORY:" ",FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   "})[r]||r,Sye=r=>({PERSONAL:"",CORPORATE:""})[r]||r,Cye=r=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:""})[r]||r,Tye=r=>({0:"",1:"",2:"",3:"",4:"",5:"",6:""})[r]||` ${r}`,Aye=r=>{const t={MANNERED:" ",POLITE:"",ANGRY:"",PATIENCE:"",RUDE:" ",HASTY:""};return r.map(e=>t[e]||e)},Eye=r=>({DISPATCH:"",RETURN:""})[r]||r;function Dye(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(null),[d,h]=I.useState(!1),[p,g]=I.useState(!1),[v,y]=I.useState(!1),[x,b]=I.useState(null),[N,w]=I.useState(!1),[S,T]=I.useState(!1),[A,C]=I.useState(!1),[M,R]=I.useState({isOpen:!1,productId:"",productTitle:""});I.useEffect(()=>{t&&k()},[t]);const k=async()=>{if(t)try{s(!0),o("");const P=await ls.getOrderDetails(t);a(P)}catch(P){console.error("Error fetching order details:",P),o("    ")}finally{s(!1)}},L=async P=>{if(!(!t||!e)&&e.payment_status!==P)try{T(!0),o(""),await ls.changePaymentStatus(t,P),await k()}catch(F){console.error("Error changing payment status:",F),o(F.response?.data?.message||"    ")}finally{T(!1)}},O=async()=>{if(!(!t||!e))try{C(!0),await ls.archiveOrder(t,!e.archived),await k()}catch(P){console.error("Error archiving order:",P),o("    ")}finally{C(!1)}};if(n)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]});if(l||!e)return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/orders"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]});if(c)return i.jsx(vye,{cargo:c,onBack:()=>u(null)});const z=(e.ordered_basket||[]).reduce((P,F)=>P+F.price*F.weight,0),U=(e.ordered_basket||[]).reduce((P,F)=>P+F.price*(F.fulfilled_weight||0),0),H=(e.failed_basket||[]).reduce((P,F)=>P+F.price*F.weight,0);return i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/orders"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["  #",e.code]}),i.jsxs("p",{className:"text-gray-500",children:[":"," ",i.jsx("span",{className:"font-semibold text-gray-700",children:e.customer?.title||""})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("span",{className:`inline-flex items-center rounded-lg px-3 py-1.5 text-xs font-semibold ${e.bought?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.bought?i.jsx(us,{className:"w-3 h-3 ml-1"}):i.jsx(xi,{className:"w-3 h-3 ml-1"}),e.bought?" ":" "]}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-3 py-1.5 text-xs font-semibold ${e.fulfilled?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:e.fulfilled?" ":"  "}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${YP(e.step)}`,children:FP(e.step)})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[e.step!=="DELIVERED"&&i.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm",children:[i.jsx(Ch,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsxs("div",{className:"relative flex items-center",children:[i.jsx(Ot,{className:"absolute right-3 w-4 h-4 text-white pointer-events-none z-10"}),i.jsxs("select",{value:e.payment_status,onChange:P=>L(P.target.value),disabled:S,className:"px-4 py-2 pr-10 pl-10 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold text-sm appearance-none cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='white' d='M6 9L1 4h10z'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"left 0.75rem center",paddingLeft:"2.5rem"},children:[i.jsx("option",{value:"NOT_PAID",children:" "}),i.jsx("option",{value:"PARTIALLY_PAID",children:" "}),i.jsx("option",{value:"PAID",children:" "})]}),S&&i.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2",children:i.jsx(Ae,{className:"w-4 h-4 text-white animate-spin"})})]}),(e.step==="PROCESSING"||e.step==="CARGO"||e.step==="PARTIALLY_DELIVERED"||e.step==="DELIVERED")&&i.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm",children:[i.jsx(kr,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]}),e.step==="ACCOUNTING"&&i.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm",children:[i.jsx(nS,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsx("button",{onClick:O,disabled:A,className:`px-4 py-2 rounded-lg transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm disabled:opacity-50 ${e.archived?"bg-green-600 text-white hover:bg-green-700":"bg-amber-600 text-white hover:bg-amber-700"}`,children:A?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(v8,{className:"w-4 h-4"}),i.jsx("span",{children:e.archived?"  ":" "})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(us,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-xs text-gray-500",children:[(e.ordered_basket||[]).length," "]}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:ue(z)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:i.jsx(xi,{className:"w-4 h-4 text-red-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-xs text-gray-500",children:[(e.failed_basket||[]).length," "]}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:ue(H)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"  "}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ue(U)}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" : ",ue(z+H)]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Ch,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${YP(e.step)}`,children:FP(e.step)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${wye(e.payment_status)}`,children:jye(e.payment_status)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:WP(e.delivery_method)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.archived?" ":""})]}),e.hp_invoice_code&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-semibold bg-green-100 text-green-800",children:[i.jsx(nS,{className:"w-4 h-4 ml-1"}),e.hp_invoice_code?typeof e.hp_invoice_code=="string"?e.hp_invoice_code:String(e.hp_invoice_code):""]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(Wr,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.delivery_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Tye(e.day_index)})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[e.customer?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.code})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Sye(e.customer.type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Cye(e.customer.category)})]}),e.customer.phone&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.phone})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"    "}),e.address&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.address})]})]})]})]}),e.seller&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.seller.profile.first_name," ",e.seller.profile.last_name]})]}),e.representative_name&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.representative_name})]}),e.call_duration!==void 0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.call_duration," "]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.answered?"":""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.new_customer?"":""})]})]})]}),e.order_creator&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-cyan-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-cyan-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.order_creator.profile.first_name," ",e.order_creator.profile.last_name]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.order_creator.profile.username})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.order_creator.profile.mobile})]})]})]}),(e.ordered_basket||[]).length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[" : ",ue(z)," |  :"," ",ue(U)]})]}),i.jsx("div",{className:"space-y-3",children:(e.ordered_basket||[]).map((P,F)=>{const Y=e.step==="PARTIALLY_DELIVERED",X=!P.fulfilled,q=Y&&X;return i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:P.product_title}),i.jsxs("p",{className:"text-xs text-gray-600",children:[" : ",P.product_code]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ue(P.price*P.weight)}),i.jsxs("p",{className:"text-xs text-gray-600",children:[P.weight,"   ",ue(P.price)]})]}),q&&i.jsx("button",{onClick:()=>R({isOpen:!0,productId:P.product_id,productTitle:P.product_title}),className:"p-2 hover:bg-gray-200 rounded-lg transition-colors text-gray-600 hover:text-gray-900",title:" ",children:i.jsx(R4,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("p",{className:"font-semibold text-gray-900 mt-0.5",children:[P.weight," "]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"  :"}),i.jsxs("p",{className:"font-semibold text-gray-900 mt-0.5",children:[P.fulfilled_weight||0," "]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"  :"}),i.jsx("p",{className:"font-semibold text-gray-900 mt-0.5",children:ue(P.price*(P.fulfilled_weight||0))})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("p",{className:"font-semibold text-gray-900 mt-0.5",children:[((P.fulfilled_weight||0)/P.weight*100).toFixed(1),"%"]})]})]}),P.fulfilled_weight&&P.fulfilled_weight<P.weight&&i.jsx("div",{className:"mt-3 p-2 bg-yellow-50 rounded border border-yellow-200",children:i.jsxs("p",{className:"text-xs text-yellow-800",children:[i.jsx("span",{className:"font-medium",children:" :"})," ",P.weight-P.fulfilled_weight," "]})})]},F)})})]}),(e.failed_basket||[]).length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:i.jsx(xi,{className:"w-4 h-4 text-red-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:["  (: ",ue(H),")"]})]}),i.jsx("div",{className:"space-y-3",children:(e.failed_basket||[]).map((P,F)=>i.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-red-900 mb-1",children:P.product_title}),i.jsxs("p",{className:"text-xs text-red-700",children:[" : ",P.product_code]})]}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"text-sm font-semibold text-red-900",children:ue(P.price*P.weight)}),i.jsxs("p",{className:"text-xs text-red-700",children:[P.weight,"   ",ue(P.price)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:"  :"}),i.jsx("p",{className:"font-medium text-red-800 mt-0.5",children:P.reason})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:" :"}),i.jsx("p",{className:"font-medium text-red-800 mt-0.5",children:P.locked?"":""})]})]})]},F))})]}),e.behavior_tags&&e.behavior_tags.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:" "}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Aye(e.behavior_tags).map((P,F)=>i.jsx("span",{className:"inline-flex items-center rounded-lg bg-purple-100 px-3 py-1.5 text-xs font-semibold text-purple-800",children:P},F))})]}),(e.cargos||[]).length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 flex items-center justify-center",children:i.jsx(kr,{className:"w-4 h-4 text-teal-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("div",{className:"space-y-3",children:(e.cargos||[]).map(P=>i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>u(P),children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-1",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:[" #",P.code]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${P.type==="DISPATCH"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:Eye(P.type)})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4 text-xs text-gray-600",children:[i.jsx("span",{children:_e(P.date)}),i.jsxs("span",{children:[P.products.length," "]})]})]}),P.type==="DISPATCH"&&i.jsxs("div",{className:"relative group",children:[i.jsx("button",{onClick:F=>{F.stopPropagation(),b(P),y(!0)},className:"p-1.5 hover:bg-gray-200 rounded-lg transition-colors",title:" ",children:i.jsx(R4,{className:"w-4 h-4 text-gray-600"})}),i.jsx("div",{className:"absolute left-0 top-full mt-1 hidden group-hover:block bg-gray-900 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-10",children:" "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsx("p",{className:"font-medium text-gray-900 mt-0.5",children:WP(P.delivery_method)})]}),P.truck_license_plate&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsx("p",{className:"font-medium text-gray-900 mt-0.5",children:P.truck_license_plate})]}),P.truck_driver&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsxs("p",{className:"font-medium text-gray-900 mt-0.5",children:[P.truck_driver.first_name," ",P.truck_driver.last_name]})]})]}),P.description&&i.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:i.jsxs("p",{className:"text-xs text-blue-800",children:[i.jsx("span",{className:"font-medium",children:":"})," ",P.description]})})]},P.id))})]}),e.description&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:""}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap bg-gray-50 rounded-lg p-3",children:e.description})]}),e&&i.jsxs(i.Fragment,{children:[i.jsx(xye,{order:e,isOpen:d,onClose:()=>h(!1),onSuccess:()=>{k(),h(!1)}}),i.jsx(yye,{order:e,isOpen:p,onClose:()=>g(!1),onSuccess:()=>{k(),g(!1)}}),x&&i.jsx(bye,{order:e,dispatchCargo:x,isOpen:v,onClose:()=>{y(!1),b(null)},onSuccess:()=>{k(),y(!1),b(null)}}),i.jsx(Nye,{order:e,isOpen:N,onClose:()=>w(!1),onSuccess:()=>{k(),w(!1)}})]}),e&&t&&i.jsx(_ye,{isOpen:M.isOpen,onClose:()=>R({isOpen:!1,productId:"",productTitle:""}),onSuccess:()=>{k(),R({isOpen:!1,productId:"",productTitle:""})},orderId:t,productId:M.productId,productTitle:M.productTitle})]})}const Mye=r=>({CREATED:" ",STEP_CHANGED:" ",PAYMENT_STATUS_CHANGED:"  ",FULFILLED_STATUS_CHANGED:"  ",ARCHIVED_STATUS_CHANGED:"  ",DELIVERY_DATE_CHANGED:"  ",DELIVERY_METHOD_CHANGED:"  ",SELLER_CHANGED:" ",VISITOR_CHANGED:" ",WAREHOUSE_CHANGED:" ",PRODUCTS_CHANGED:" ",CUSTOMER_CHANGED:" ",DELETED:" ",RESTORED:" "})[r||""]||" ",Rye=r=>({CREATED:"bg-green-100 text-green-800",STEP_CHANGED:"bg-blue-100 text-blue-800",PAYMENT_STATUS_CHANGED:"bg-yellow-100 text-yellow-800",FULFILLED_STATUS_CHANGED:"bg-purple-100 text-purple-800",ARCHIVED_STATUS_CHANGED:"bg-gray-100 text-gray-800",DELIVERY_DATE_CHANGED:"bg-cyan-100 text-cyan-800",DELIVERY_METHOD_CHANGED:"bg-indigo-100 text-indigo-800",SELLER_CHANGED:"bg-orange-100 text-orange-800",VISITOR_CHANGED:"bg-pink-100 text-pink-800",WAREHOUSE_CHANGED:"bg-teal-100 text-teal-800",PRODUCTS_CHANGED:"bg-amber-100 text-amber-800",CUSTOMER_CHANGED:"bg-red-100 text-red-800",DELETED:"bg-red-100 text-red-800",RESTORED:"bg-green-100 text-green-800"})[r||""]||"bg-gray-100 text-gray-800",Lye=r=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:" ",INVENTORY:"",ACCOUNTING:"",CARGO:"",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",PARTIALLY_RETURNED:" ",RETURNED:" "})[r||""]||r||"-",Iye=r=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[r||""]||r||"-",kye=r=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[r||""]||"bg-gray-100 text-gray-800",Oye=r=>({FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   ",AT_INVENTORY:"  ",PAID_OUR_TRUCK:"   "})[r||""]||r||"-";function Pye(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState({page:1,"page-size":20});I.useEffect(()=>{g()},[h]);const g=async()=>{try{n(!0),l("");const b={page:h.page||o,"page-size":h["page-size"]||20,...h},N=await Gs.getOrderHistory(b);e(N.data||[]),d(N.count||0)}catch(b){console.error("Error fetching order history:",b),l(b.response?.data?.message||"    ")}finally{n(!1)}},v=b=>{p(N=>({...N,page:b})),c(b)},y=(b,N)=>{p(w=>({...w,[b]:N||void 0,page:1})),c(1)},x=()=>{let b=0;return h.order_id&&b++,h.employee_id&&b++,h.change_type&&b++,h.step_after&&b++,h.by_system!==void 0&&b++,h.deleted_changed===!0&&b++,h.related_payment_id&&b++,h.related_invoice_id&&b++,h.created_at_min&&b++,h.created_at_max&&b++,b};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Wr,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"text",value:h.order_id||"",onChange:b=>y("order_id",b.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.change_type||"",onChange:b=>y("change_type",b.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"CREATED",children:" "}),i.jsx("option",{value:"STEP_CHANGED",children:" "}),i.jsx("option",{value:"PAYMENT_STATUS_CHANGED",children:"  "}),i.jsx("option",{value:"FULFILLED_STATUS_CHANGED",children:"  "}),i.jsx("option",{value:"DELIVERY_DATE_CHANGED",children:"  "}),i.jsx("option",{value:"DELIVERY_METHOD_CHANGED",children:"  "}),i.jsx("option",{value:"SELLER_CHANGED",children:" "}),i.jsx("option",{value:"PRODUCTS_CHANGED",children:" "}),i.jsx("option",{value:"CUSTOMER_CHANGED",children:" "}),i.jsx("option",{value:"DELETED",children:" "}),i.jsx("option",{value:"RESTORED",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:h.step_after||"",onChange:b=>y("step_after",b.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"SELLER",children:""}),i.jsx("option",{value:"SALES_MANAGER",children:" "}),i.jsx("option",{value:"PROCESSING",children:" "}),i.jsx("option",{value:"INVENTORY",children:""}),i.jsx("option",{value:"ACCOUNTING",children:""}),i.jsx("option",{value:"CARGO",children:""}),i.jsx("option",{value:"PARTIALLY_DELIVERED",children:" "}),i.jsx("option",{value:"DELIVERED",children:"  "}),i.jsx("option",{value:"RETURNED",children:""}),i.jsx("option",{value:"PARTIALLY_RETURNED",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.by_system===void 0?"":h.by_system?"true":"false",onChange:b=>{b.target.value===""?y("by_system",void 0):y("by_system",b.target.value==="true")},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"true",children:""}),i.jsx("option",{value:"false",children:""})]})]})]}),x()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[x(),"  "]}),i.jsx("button",{onClick:()=>{p({page:1,"page-size":20}),c(1)},className:"text-sm text-purple-600 hover:text-purple-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-purple-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(b=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/order-history/${b.id}`),children:[i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Rye(b.change_type)}`,children:Mye(b.change_type)})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:b.new_order?.code?`#${b.new_order?.code}`:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:b.step_after?Lye(b.step_after):"-"}),i.jsx("td",{className:"px-4 py-4",children:b.payment_status_after?i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${kye(b.payment_status_after)}`,children:Iye(b.payment_status_after)}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:b.delivery_date_after?_e(b.delivery_date_after):"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:b.delivery_method_after?Oye(b.delivery_method_after):"-"}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${b.by_system?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:b.by_system?"":""})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(b.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:N=>{N.stopPropagation(),r(`/manage/order-history/${b.id}`)},className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm font-semibold",children:""})})]},b.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:x()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:h["page-size"]||20,totalPages:Math.ceil(u/(h["page-size"]||20)),onPageChange:v})]})}const $P=r=>({CREATED:" ",STEP_CHANGED:" ",PAYMENT_STATUS_CHANGED:"  ",FULFILLED_STATUS_CHANGED:"  ",ARCHIVED_STATUS_CHANGED:"  ",DELIVERY_DATE_CHANGED:"  ",DELIVERY_METHOD_CHANGED:"  ",SELLER_CHANGED:" ",VISITOR_CHANGED:" ",WAREHOUSE_CHANGED:" ",PRODUCTS_CHANGED:" ",CUSTOMER_CHANGED:" ",DELETED:" ",RESTORED:" "})[r||""]||" ",zye=r=>({CREATED:"bg-green-100 text-green-800",STEP_CHANGED:"bg-blue-100 text-blue-800",PAYMENT_STATUS_CHANGED:"bg-yellow-100 text-yellow-800",FULFILLED_STATUS_CHANGED:"bg-purple-100 text-purple-800",ARCHIVED_STATUS_CHANGED:"bg-gray-100 text-gray-800",DELIVERY_DATE_CHANGED:"bg-indigo-100 text-indigo-800",DELIVERY_METHOD_CHANGED:"bg-teal-100 text-teal-800",SELLER_CHANGED:"bg-pink-100 text-pink-800",DELETED:"bg-red-100 text-red-800",RESTORED:"bg-emerald-100 text-emerald-800"})[r||""]||"bg-gray-100 text-gray-800",Xw=r=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:" ",INVENTORY:"",ACCOUNTING:"",CARGO:"",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",PARTIALLY_RETURNED:" ",RETURNED:" "})[r||""]||r||"",Zw=r=>({SELLER:"bg-blue-100 text-blue-800",SALES_MANAGER:"bg-purple-100 text-purple-800",PROCESSING:"bg-yellow-100 text-yellow-800",INVENTORY:"bg-indigo-100 text-indigo-800",ACCOUNTING:"bg-green-100 text-green-800",CARGO:"bg-teal-100 text-teal-800",PARTIALLY_DELIVERED:"bg-orange-100 text-orange-800",DELIVERED:"bg-emerald-100 text-emerald-800",PARTIALLY_RETURNED:"bg-red-100 text-red-800",RETURNED:"bg-gray-100 text-gray-800"})[r||""]||"bg-gray-100 text-gray-800",Kw=r=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[r||""]||r||"",Qw=r=>({PAID:"bg-green-100 text-green-800",NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800"})[r||""]||"bg-gray-100 text-gray-800",qP=r=>({FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   ",AT_INVENTORY:"  "})[r||""]||r||"",Bye=r=>({PERSONAL:"",CORPORATE:""})[r||""]||r||"",Vye=r=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:""})[r||""]||r||"";function Hye(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{s(!0),o("");const u=await Gs.getOrderHistoryById(t);a(u)}catch(u){console.error("Error fetching order history:",u),o("    ")}finally{s(!1)}};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/order-history"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/order-history"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"  "}),e.order&&i.jsxs("p",{className:"text-gray-500",children:[" :"," ",i.jsxs("span",{className:"font-semibold text-gray-700",children:["#",e.order.code]})]})]}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${zye(e.change_type)}`,children:$P(e.change_type)})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-red-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[e.step_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Zw(e.step_before)}`,children:Xw(e.step_before)})]}),e.payment_status_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Qw(e.payment_status_before)}`,children:Kw(e.payment_status_before)})]}),e.delivery_date_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.delivery_date_before)})]}),e.delivery_method_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:qP(e.delivery_method_before)})]}),e.fulfilled_before!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.fulfilled_before?" ":"  "})]}),e.archived_before!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.archived_before?" ":""})]}),e.old_order?.ordered_basket&&Array.isArray(e.old_order.ordered_basket)&&e.old_order.ordered_basket.length>0&&i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsxs("label",{className:"text-xs font-medium text-gray-500 block mb-3",children:["   (",e.old_order.ordered_basket.length," )"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.old_order.ordered_basket.map((u,d)=>i.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u.product_title||u.product?.title||" "}),(u.product_code||u.product?.code)&&i.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[": ",u.product_code||u.product?.code]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[u.weight!==void 0&&u.weight!==null&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:[":"," "]}),i.jsxs("span",{className:"font-semibold text-gray-900",children:[u.weight," "]})]}),u.price!==void 0&&u.price!==null&&u.weight!==void 0&&u.weight!==null&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:[":"," "]}),i.jsx("span",{className:"font-semibold text-gray-900",children:ue(u.price*u.weight)})]}),u.fulfilled_weight!==null&&u.fulfilled_weight!==void 0&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:["  :"," "]}),i.jsxs("span",{className:"font-semibold text-gray-900",children:[u.fulfilled_weight," "]})]}),u.fulfilled!==void 0&&u.fulfilled!==null&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:[":"," "]}),i.jsx("span",{className:`font-semibold ${u.fulfilled?"text-green-600":"text-yellow-600"}`,children:u.fulfilled?" ":" "})]})]})]},d))})]})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-green-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[e.step_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Zw(e.step_after)}`,children:Xw(e.step_after)})]}),e.payment_status_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Qw(e.payment_status_after)}`,children:Kw(e.payment_status_after)})]}),e.delivery_date_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.delivery_date_after)})]}),e.delivery_method_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:qP(e.delivery_method_after)})]}),e.fulfilled_after!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.fulfilled_after?" ":"  "})]}),e.archived_after!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.archived_after?" ":""})]}),e.new_order?.ordered_basket&&Array.isArray(e.new_order.ordered_basket)&&e.new_order.ordered_basket.length>0&&i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsxs("label",{className:"text-xs font-medium text-gray-500 block mb-3",children:["   (",e.new_order.ordered_basket.length," )"]}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.new_order.ordered_basket.map((u,d)=>i.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:u.product_title||u.product?.title||" "}),(u.product_code||u.product?.code)&&i.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[": ",u.product_code||u.product?.code]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[u.weight!==void 0&&u.weight!==null&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:[":"," "]}),i.jsxs("span",{className:"font-semibold text-gray-900",children:[u.weight," "]})]}),u.price!==void 0&&u.price!==null&&u.weight!==void 0&&u.weight!==null&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:[":"," "]}),i.jsx("span",{className:"font-semibold text-gray-900",children:ue(u.price*u.weight)})]}),u.fulfilled_weight!==null&&u.fulfilled_weight!==void 0&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:["  :"," "]}),i.jsxs("span",{className:"font-semibold text-gray-900",children:[u.fulfilled_weight," "]})]}),u.fulfilled!==void 0&&u.fulfilled!==null&&i.jsxs("div",{children:[i.jsxs("span",{className:"text-gray-600",children:[":"," "]}),i.jsx("span",{className:`font-semibold ${u.fulfilled?"text-green-600":"text-yellow-600"}`,children:u.fulfilled?" ":" "})]})]})]},d))})]})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:$P(e.change_type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold",children:e.by_system?i.jsx("span",{className:"text-orange-600",children:" "}):i.jsx("span",{className:"text-blue-600",children:" "})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),e.employee&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.employee.profile.first_name," ",e.employee.profile.last_name]})]}),e.reason&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.reason})]})]})]}),e.order&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(Ir,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.order.code]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Zw(e.order.step)}`,children:Xw(e.order.step)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${Qw(e.order.payment_status)}`,children:Kw(e.order.payment_status)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:ue(e.order.total_price)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold",children:e.order.fulfilled?i.jsx("span",{className:"text-green-600",children:" "}):i.jsx("span",{className:"text-yellow-600",children:"  "})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold",children:e.order.archived?i.jsx("span",{className:"text-gray-600",children:" "}):i.jsx("span",{className:"text-green-600",children:""})})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[e.order?.customer&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.order.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.order.customer.code})]}),e.order.customer.type&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Bye(e.order.customer.type)})]}),e.order.customer.category&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Vye(e.order.customer.category)})]})]})]}),e.order?.seller&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.order.seller.profile.first_name," ",e.order.seller.profile.last_name]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.order.seller.profile.kid})]})]})]}),e.ip_address&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" IP"}),i.jsx("p",{className:"text-sm font-semibold text-gray-900 font-mono bg-gray-50 rounded px-2 py-1 inline-block",children:e.ip_address.split(",")[0]})]}),e.ip_address.split(",").length>1&&i.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-gray-100",children:[e.ip_address.split(",")[1]?.trim()&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[1].trim()})]}),e.ip_address.split(",")[2]?.trim()&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[2].trim()})]}),e.ip_address.split(",")[6]?.trim()&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[6].trim()})]})]})]})]})]})]})]})}function Gye({isOpen:r,onClose:t,onSuccess:e}){const[a,n]=I.useState(1),[s,l]=I.useState(!1),[o,c]=I.useState(!1),[u,d]=I.useState(""),[h,p]=I.useState(""),[g,v]=I.useState(""),[y,x]=I.useState(!1),[b,N]=I.useState(!1),[w,S]=I.useState(!1),[T,A]=I.useState(0),[C,M]=I.useState(!0),[R,k]=I.useState(""),[L,O]=I.useState([]),[z,U]=I.useState(""),[H,P]=I.useState([]),[F,Y]=I.useState([]),[X,q]=I.useState(""),[G,$]=I.useState(""),[Z,te]=I.useState(),[me,Ce]=I.useState(""),[Ve,Ee]=I.useState(),[be,He]=I.useState([]),[Se,Ie]=I.useState(""),[ft,le]=I.useState([]),[ze,$e]=I.useState({method:"",date:"",description:""}),[ot,Rt]=I.useState(!1),[or,Qr]=I.useState(""),[Vr,gn]=I.useState(),[Il,oa]=I.useState([]),[Ws,Zo]=I.useState(null),[kl,Mi]=I.useState([]);I.useEffect(()=>{if(r){vf(),xa();const Q=new Date,Re=ra.toJalaali(Q);q(`${Re.jy}/${String(Re.jm).padStart(2,"0")}/${String(Re.jd).padStart(2,"0")}`),Qo(`${Re.jy}/${String(Re.jm).padStart(2,"0")}/${String(Re.jd).padStart(2,"0")}`)}else Yu()},[r]),I.useEffect(()=>{h&&r?$s():(Zo(null),v(""))},[h,r]),I.useEffect(()=>{z&&r?Pn():Mi([])},[z,r]);const[Ko,Qo]=I.useState(""),Yu=()=>{n(1),p(""),v(""),x(!1),N(!1),S(!1),A(0),M(!0),k(""),U(""),P([]),Y([]),q(""),$(""),te(void 0),Ce(""),Ee(void 0),He([]),Ie(""),le([]),$e({method:"",date:"",description:""}),Rt(!1),Qr(""),gn(void 0),d("")},vf=async()=>{try{l(!0);const Q=await gr.getAllCustomers({page:1,"page-size":1e3});oa(Q.data||[])}catch(Q){console.error("Error fetching customers:",Q),d("    ")}finally{l(!1)}},$s=async()=>{if(h)try{l(!0);const Q=await gr.getCustomerById(h);Zo(Q),Q.people&&Q.people.length>0&&(v(Q.people[0].id),Ce(Q.address||""))}catch(Q){console.error("Error fetching customer details:",Q),d("    ")}finally{l(!1)}},xa=async()=>{try{const Q=await Us.getWarehouses();O(Q||[]),Q&&Q.length>0&&U(Q[0].id)}catch(Q){console.error("Error fetching warehouses:",Q)}},Pn=async()=>{if(z)try{l(!0);const Q=await Oo.getProductsByWarehouse(z);Mi(Q||[])}catch(Q){console.error("Error fetching products:",Q),d("    ")}finally{l(!1)}},ca=Q=>{if(!Q||Q.trim()==="")return new Date;const Re=Q.split("/");if(Re.length!==3)return new Date;const qe=parseInt(Re[0]),cr=parseInt(Re[1]),ya=parseInt(Re[2]);if(isNaN(qe)||isNaN(cr)||isNaN(ya)||qe<1300||qe>1500||cr<1||cr>12||ya<1||ya>31)return new Date;try{const mn=ra.jalaaliToDateObject(qe,cr,ya);return!mn||isNaN(mn.getTime())?new Date:mn}catch(mn){return console.error("Error converting Persian date:",mn),new Date}},xf=Q=>{if(!Q||Q.trim()==="")return"";const Re=Q.split("/");if(Re.length!==3)return"";const qe=parseInt(Re[0]),cr=parseInt(Re[1]),ya=parseInt(Re[2]);if(isNaN(qe)||isNaN(cr)||isNaN(ya)||qe<1300||qe>1500||cr<1||cr>12||ya<1||ya>31)return"";try{const mn=ra.jalaaliToDateObject(qe,cr,ya);return!mn||isNaN(mn.getTime())?"":mn.toISOString()}catch(mn){return console.error("Error converting Persian date:",mn),""}},yf=[{value:"MANNERED",label:" "},{value:"POLITE",label:""},{value:"ANGRY",label:""},{value:"PATIENCE",label:""},{value:"RUDE",label:" "},{value:"HASTY",label:""}],Wu=Q=>{const Re={MANNERED:" ",POLITE:"",ANGRY:"",PATIENCE:"",RUDE:" ",HASTY:""};return Q.map(qe=>Re[qe]||qe)},Ol=Q=>({AT_INVENTORY:"  ",FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   "})[Q]||Q,oe=[{value:"CASH",label:""},{value:"DEPOSIT_TO_ACCOUNT",label:"  "},{value:"CHEQUE",label:""},{value:"ONLINE",label:""}],Et=Q=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",ONLINE:""})[Q]||Q,Jr=()=>{if(!ze.method||!ze.date){d("       ");return}le([...ft,{...ze}]),$e({method:"",date:"",description:""})},xs=Q=>{le(ft.filter((Re,qe)=>qe!==Q))},Ga=Q=>{if(H.find(cr=>cr.product_id===Q.id))return;const qe={product_id:Q.id,product_title:Q.title,product_code:Q.code,price:0,weight:0,inventory_net_weight:Q.net_weight||0,warehouse_id:z,retail_price:Q.retail_price,wholesale_price:Q.wholesale_price,online_price:Q.online_price,sec_unit_amount:void 0};P([...H,qe])},ys=Q=>{if(F.find(cr=>cr.product_id===Q.id))return;const qe={product_id:Q.id,product_title:Q.title,product_code:Q.code,price:0,weight:0,locked:!1,not_purchased_reason:"",retail_price:Q.retail_price,wholesale_price:Q.wholesale_price,online_price:Q.online_price};Y([...F,qe])},Ri=Q=>{P(H.filter(Re=>Re.product_id!==Q))},mr=Q=>{Y(F.filter(Re=>Re.product_id!==Q))},Dr=(Q,Re)=>{P(H.map(qe=>qe.product_id===Q?{...qe,...Re}:qe))},$u=(Q,Re)=>{Y(F.map(qe=>qe.product_id===Q?{...qe,...Re}:qe))},bf=()=>h?g?y&&!w?(d("      "),!1):!C&&!R?(d("       "),!1):!0:(d("    "),!1):(d("    "),!1),_f=()=>{if(C&&H.length===0&&F.length===0)return d("     "),!1;if(H.length>0&&!z)return d("      "),!1;for(const Q of H){if(!Q.price||Q.price<=0)return d(`  ${Q.product_title}     `),!1;if(!Q.weight||Q.weight<=0)return d(`  ${Q.product_title}     `),!1}for(const Q of F)if(!Q.not_purchased_reason)return d(`     ${Q.product_title}  `),!1;return!0},Nf=()=>X?G?me?!0:(d("    "),!1):(d("     "),!1):(d("     "),!1),jf=()=>{d(""),!(a===1&&!bf())&&(a===2&&!_f()||a===3&&!Nf()||a<4&&n(a+1))},wf=()=>{d(""),a>1&&n(a-1)},Um=async()=>{if(!bf()||!_f()||!Nf()){n(1);return}try{c(!0),d("");const Q={customer_id:h,did_we_contact:y,new_customer:b,person_id:g,answered:w,call_duration:T,bought:C,not_purchased_reason:C?void 0:R,ordered_basket:H.length>0?H.map(qe=>({id:qe.product_id,price:qe.price,weight:qe.weight,sec_unit_amount:qe.sec_unit_amount,retail_price:qe.retail_price,wholesale_price:qe.wholesale_price,online_price:qe.online_price,inventory_net_weight:qe.inventory_net_weight})):void 0,failed_basket:F.length>0?F.map(qe=>({id:qe.product_id,price:qe.price,weight:qe.weight,locked:qe.locked,not_purchased_reason:qe.not_purchased_reason,retail_price:qe.retail_price,wholesale_price:qe.wholesale_price,online_price:qe.online_price})):void 0,settlements:ft.length>0?ft.map(qe=>({method:qe.method,date:xf(qe.date),description:qe.description||void 0})):void 0,delivery_date:ca(X),consumption_time:Z,created_date:ca(Ko),delivery_method:G,location:Ve,behavior_tags:be,description:Se||void 0,address:me,warehouse_id:H.length>0?z:void 0,in_person_order:ot,follow_up_id:or||void 0,hp_invoice_code:Vr},Re=await ls.createOrder(Q);e(Re.id),t(),Yu()}catch(Q){console.error("Error creating order:",Q),d(Q.response?.data?.message||"   ")}finally{c(!1)}};if(!r)return null;const Sf=[{number:1,label:" ",icon:_t},{number:2,label:" ",icon:Ir},{number:3,label:" ",icon:nt},{number:4,label:"",icon:us}];return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl mx-4 my-8",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-500"})})]}),i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsx("div",{className:"flex items-center justify-between",children:Sf.map((Q,Re)=>{const qe=Q.icon,cr=a===Q.number,ya=a>Q.number;return i.jsxs("div",{className:"flex items-center flex-1",children:[i.jsxs("div",{className:"flex flex-col items-center flex-1",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${ya?"bg-green-500 border-green-500 text-white":cr?"bg-blue-600 border-blue-600 text-white":"bg-gray-100 border-gray-300 text-gray-400"}`,children:ya?i.jsx(ci,{className:"w-5 h-5"}):i.jsx(qe,{className:"w-5 h-5"})}),i.jsx("span",{className:`mt-2 text-xs font-semibold ${cr?"text-blue-600":"text-gray-500"}`,children:Q.label})]}),Re<Sf.length-1&&i.jsx("div",{className:`h-0.5 flex-1 mx-2 ${ya?"bg-green-500":"bg-gray-300"}`})]},Q.number)})})}),i.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[u&&i.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),s&&i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx(Ae,{className:"w-8 h-8 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600",children:"  ..."})]}),!s&&i.jsxs(i.Fragment,{children:[a===1&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsx(En,{label:"",isRequired:!0,value:h,onChange:Q=>p(Q),options:[{value:"",label:" "},...Il.map(Q=>({value:Q.id,label:`${Q.title} (${Q.code})`}))],placeholder:" ",icon:i.jsx(_t,{className:"w-5 h-5"})}),Ws&&Ws.people&&Ws.people.length>0&&i.jsx(En,{label:"",isRequired:!0,value:g,onChange:Q=>v(Q),options:[{value:"",label:" "},...Ws.people.map(Q=>({value:Q.id,label:`${Q.profile.first_name} ${Q.profile.last_name} - ${Q.title}`}))],placeholder:" ",icon:i.jsx(_t,{className:"w-5 h-5"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("input",{type:"checkbox",id:"didWeContact",checked:y,onChange:Q=>x(Q.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:"didWeContact",className:"text-sm text-gray-700",children:"  "})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("input",{type:"checkbox",id:"newCustomer",checked:b,onChange:Q=>N(Q.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:"newCustomer",className:"text-sm text-gray-700",children:" "})]})]}),y&&i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("input",{type:"checkbox",id:"answered",checked:w,onChange:Q=>S(Q.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:"answered",className:"text-sm text-gray-700",children:"  "})]}),y&&w&&i.jsx(Pa,{label:"   ()",type:"number",value:T||"",onChange:Q=>A(typeof Q=="number"?Q:0),placeholder:"0"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("input",{type:"checkbox",id:"bought",checked:C,onChange:Q=>M(Q.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:"bought",className:"text-sm text-gray-700",children:"  "})]}),!C&&i.jsx(ou,{label:"  ",isRequired:!0,value:R,onChange:Q=>k(Q.target.value),rows:3,placeholder:"     "})]}),a===2&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),C&&i.jsx(En,{label:"",isRequired:!0,value:z,onChange:Q=>{U(Q),P([])},options:[{value:"",label:" "},...L.map(Q=>({value:Q.id,label:`${Q.name} (${Q.code})`}))],placeholder:" ",icon:i.jsx(nt,{className:"w-5 h-5"})}),z&&C&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),i.jsx("div",{className:"border border-gray-300 rounded-lg max-h-60 overflow-y-auto",children:kl.map(Q=>i.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center justify-between hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-semibold text-gray-900",children:Q.title}),i.jsxs("p",{className:"text-sm text-gray-600",children:[": ",Q.code,"  : ",Q.net_weight," ",""]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>Ga(Q),disabled:H.some(Re=>Re.product_id===Q.id),className:"px-3 py-1 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-semibold",children:""}),i.jsx("button",{type:"button",onClick:()=>ys(Q),disabled:F.some(Re=>Re.product_id===Q.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-semibold",children:""})]})]},Q.id))})]}),H.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:["  (",H.length,")"]}),i.jsx("div",{className:"space-y-3",children:H.map(Q=>i.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-green-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:Q.product_title}),i.jsxs("p",{className:"text-sm text-gray-600",children:[": ",Q.product_code]})]}),i.jsx("button",{type:"button",onClick:()=>Ri(Q.product_id),className:"text-red-600 hover:text-red-700",children:i.jsx(St,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(Pa,{label:"",type:"number",value:Q.price||"",onChange:Re=>Dr(Q.product_id,{price:typeof Re=="number"?Re:0}),placeholder:"0",className:"text-sm"}),Q.retail_price&&i.jsxs("div",{className:"mt-1.5 flex items-center space-x-reverse space-x-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:" :"}),i.jsxs("span",{className:"text-xs font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-md",children:[Q.retail_price.toLocaleString("fa-IR")," ",""]})]})]}),i.jsx(Pa,{label:" ()",type:"number",value:Q.weight||"",onChange:Re=>Dr(Q.product_id,{weight:typeof Re=="number"?Re:0}),placeholder:"0",className:"text-sm"})]})]},Q.product_id))})]}),F.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:["  (",F.length,")"]}),i.jsx("div",{className:"space-y-3",children:F.map(Q=>i.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-red-50",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:Q.product_title}),i.jsxs("p",{className:"text-sm text-gray-600",children:[": ",Q.product_code]})]}),i.jsx("button",{type:"button",onClick:()=>mr(Q.product_id),className:"text-red-600 hover:text-red-700",children:i.jsx(St,{className:"w-5 h-5"})})]}),i.jsx(ou,{label:"  ",isRequired:!0,value:Q.not_purchased_reason||"",onChange:Re=>$u(Q.product_id,{not_purchased_reason:Re.target.value}),rows:2,placeholder:"     ",className:"text-sm"})]},Q.product_id))})]})]}),a===3&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["  ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ls,{value:X,onChange:q,placeholder:"  "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),i.jsx(Ls,{value:Ko,onChange:Qo,placeholder:"  "})]})]}),i.jsx(En,{label:" ",isRequired:!0,value:G,onChange:Q=>$(Q),options:[{value:"",label:"  "},{value:"FREE_OUR_TRUCK",label:"    "},{value:"FREE_OTHER_SERVICES",label:"    "},{value:"PAID",label:"   "},{value:"AT_INVENTORY",label:"  "}],placeholder:"  "}),i.jsx(ou,{label:"",isRequired:!0,value:me,onChange:Q=>Ce(Q.target.value),rows:3,placeholder:"    "}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsx(En,{label:" ",value:ze.method,onChange:Q=>$e({...ze,method:Q}),options:[{value:"",label:" "},...oe.map(Q=>({value:Q.value,label:Q.label}))],placeholder:" ",className:"text-sm"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx(Ls,{value:ze.date,onChange:Q=>$e({...ze,date:Q}),placeholder:" "})]}),i.jsx(Pa,{label:" ()",type:"text",value:ze.description||"",onChange:Q=>$e({...ze,description:String(Q)}),placeholder:"",className:"text-sm"})]}),i.jsx("button",{type:"button",onClick:Jr,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold",children:"  "})]}),ft.length>0&&i.jsx("div",{className:"space-y-2",children:ft.map((Q,Re)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Et(Q.method)}),i.jsxs("p",{className:"text-xs text-gray-600",children:[": ",Q.date,Q.description&&`  ${Q.description}`]})]}),i.jsx("button",{type:"button",onClick:()=>xs(Re),className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(St,{className:"w-4 h-4"})})]},Re))})]})]}),i.jsx(Pa,{label:"  ()",type:"number",value:Z||"",onChange:Q=>te(Q?typeof Q=="number"?Q:0:void 0),placeholder:"0"}),i.jsx(ou,{label:"",value:Se,onChange:Q=>Ie(Q.target.value),rows:3,placeholder:"  ()"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("input",{type:"checkbox",id:"inPersonOrder",checked:ot,onChange:Q=>Rt(Q.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:"inPersonOrder",className:"text-sm text-gray-700",children:" "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),i.jsx("select",{multiple:!0,value:be,onChange:Q=>{const Re=Array.from(Q.target.selectedOptions,qe=>qe.value);He(Re)},className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400 shadow-sm hover:shadow-md min-h-[120px] cursor-pointer",size:6,children:yf.map(Q=>i.jsx("option",{value:Q.value,children:Q.label},Q.value))}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"    Ctrl ( Cmd  Mac)      "}),be.length>0&&i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Wu(be).map((Q,Re)=>i.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold flex items-center space-x-reverse space-x-1",children:[i.jsx("span",{children:Q}),i.jsx("button",{type:"button",onClick:()=>He(be.filter((qe,cr)=>cr!==Re)),className:"text-purple-600 hover:text-purple-800",children:i.jsx(St,{className:"w-3 h-3"})})]},Re))})]}),i.jsx(Pa,{label:"  HP",type:"number",value:Vr||"",onChange:Q=>gn(Q?typeof Q=="number"?Q:0:void 0),placeholder:"0"})]}),a===4&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" "}),i.jsxs("p",{className:"text-sm text-gray-700",children:[":"," ",Il.find(Q=>Q.id===h)?.title||"N/A"]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[":"," ",Ws?.people.find(Q=>Q.id===g)?.profile.first_name," ",Ws?.people.find(Q=>Q.id===g)?.profile.last_name]})]}),H.length>0&&i.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["  (",H.length,")"]}),H.map(Q=>i.jsxs("p",{className:"text-sm text-gray-700",children:[Q.product_title," - ",Q.weight,"  -"," ",Q.price.toLocaleString()," "]},Q.product_id))]}),F.length>0&&i.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["  (",F.length,")"]}),F.map(Q=>i.jsxs("p",{className:"text-sm text-gray-700",children:[Q.product_title," -"," ",Q.not_purchased_reason]},Q.product_id))]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" "}),i.jsxs("p",{className:"text-sm text-gray-700",children:[" : ",X]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[" : ",Ol(G)]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[": ",me]})]}),ft.length>0&&i.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 mb-2",children:["  (",ft.length,")"]}),i.jsx("div",{className:"space-y-2",children:ft.map((Q,Re)=>i.jsxs("div",{className:"p-2 bg-white rounded border border-yellow-200",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Et(Q.method)}),i.jsxs("p",{className:"text-xs text-gray-600",children:[": ",Q.date,Q.description&&`  ${Q.description}`]})]},Re))})]}),be.length>0&&i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" "}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Wu(be).map((Q,Re)=>i.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold",children:Q},Re))})]})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[i.jsxs("button",{type:"button",onClick:a===1?t:wf,disabled:o,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-reverse space-x-2",children:[i.jsx(Ut,{className:"w-4 h-4"}),i.jsx("span",{children:a===1?"":""})]}),a<4?i.jsxs("button",{type:"button",onClick:jf,disabled:s||o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-reverse space-x-2",children:[i.jsx("span",{children:""}),i.jsx(yu,{className:"w-4 h-4"})]}):i.jsx("button",{type:"button",onClick:Um,disabled:o||s,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-reverse space-x-2",children:o?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(ci,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})})]})]})})}const Uye=r=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:" ",INVENTORY:"",ACCOUNTING:"",CARGO:"",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",RETURNED:"",PARTIALLY_RETURNED:" "})[r]||r,Fye=r=>({SELLER:"bg-blue-100 text-blue-800",SALES_MANAGER:"bg-purple-100 text-purple-800",PROCESSING:"bg-yellow-100 text-yellow-800",INVENTORY:"bg-orange-100 text-orange-800",ACCOUNTING:"bg-indigo-100 text-indigo-800",CARGO:"bg-cyan-100 text-cyan-800",PARTIALLY_DELIVERED:"bg-green-100 text-green-800",DELIVERED:"bg-green-100 text-green-800",RETURNED:"bg-red-100 text-red-800",PARTIALLY_RETURNED:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800",Yye=r=>({PAID:" ",NOT_PAID:" ",PARTIALLY_PAID:" "})[r]||r,Wye=r=>({PAID:"bg-green-100 text-green-800",NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800"})[r]||"bg-gray-100 text-gray-800",$ye=r=>({FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   ",AT_INVENTORY:" "})[r]||r;function qye(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState({page:1,"page-size":20}),[g,v]=I.useState([]),[y,x]=I.useState(!1),[b,N]=I.useState(null);I.useEffect(()=>{w(),S()},[h]);const w=async()=>{try{n(!0),l("");const R={page:h.page||o,"page-size":h["page-size"]||20,...h},k=await ls.getOrders(R);e(k.data||[]),d(k.count||0)}catch(R){console.error("Error fetching orders:",R),l(R.response?.data?.message||"    ")}finally{n(!1)}},S=async()=>{try{const R=await gr.getAllCustomers();v(R.data||[])}catch(R){console.error("Error fetching customers:",R)}},T=async(R,k)=>{try{N(R),await ls.archiveOrder(R,k),await w()}catch(L){console.error("Error archiving order:",L),l("    ")}finally{N(null)}},A=R=>{p(k=>({...k,page:R})),c(R)},C=(R,k)=>{p(L=>({...L,[R]:k||void 0,page:1})),c(1)},M=()=>{let R=0;return h.search&&R++,h.customer_id&&R++,h.seller_id&&R++,h.step&&R++,h.payment_status&&R++,h.delivery_method&&R++,h.bought!==void 0&&R++,h.fulfilled!==void 0&&R++,h.archived!==void 0&&R++,h.date_from&&R++,h.date_to&&R++,R};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ir,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]}),i.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(Nl,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:h.search||"",onChange:R=>C("search",R.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:h.customer_id||"",onChange:R=>C("customer_id",R.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),g.map(R=>i.jsxs("option",{value:R.id,children:[R.title," (: ",R.code,")"]},R.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.step||"",onChange:R=>C("step",R.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"SELLER",children:""}),i.jsx("option",{value:"SALES_MANAGER",children:" "}),i.jsx("option",{value:"PROCESSING",children:" "}),i.jsx("option",{value:"INVENTORY",children:""}),i.jsx("option",{value:"ACCOUNTING",children:""}),i.jsx("option",{value:"CARGO",children:""}),i.jsx("option",{value:"PARTIALLY_DELIVERED",children:" "}),i.jsx("option",{value:"DELIVERED",children:"  "}),i.jsx("option",{value:"RETURNED",children:""}),i.jsx("option",{value:"PARTIALLY_RETURNED",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.payment_status||"",onChange:R=>C("payment_status",R.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"PAID",children:" "}),i.jsx("option",{value:"NOT_PAID",children:" "}),i.jsx("option",{value:"PARTIALLY_PAID",children:" "})]})]})]}),M()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[M(),"  "]}),i.jsx("button",{onClick:()=>{p({page:1,"page-size":20}),c(1)},className:"text-sm text-blue-600 hover:text-blue-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(R=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/orders/${R.id}`),children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:["#",R.code]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:R.customer.title}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:R.representative_name||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(R.delivery_date)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Fye(R.step)}`,children:Uye(R.step)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Wye(R.payment_status)}`,children:Yye(R.payment_status)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:$ye(R.delivery_method)}),i.jsx("td",{className:"px-4 py-4 text-center",children:R.bought?i.jsx("span",{className:"text-green-600 font-semibold",children:""}):i.jsx("span",{className:"text-red-600 font-semibold",children:""})}),i.jsx("td",{className:"px-4 py-4 text-center",children:R.fulfilled?i.jsx("span",{className:"text-green-600 font-semibold",children:""}):i.jsx("span",{className:"text-yellow-600 font-semibold",children:"-"})}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsxs("div",{className:"flex items-center justify-center space-x-reverse space-x-2",children:[i.jsx("button",{onClick:k=>{k.stopPropagation(),r(`/manage/orders/${R.id}`)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-semibold",children:""}),i.jsx("button",{onClick:k=>{k.stopPropagation(),T(R.id,!R.archived)},disabled:b===R.id,className:`p-2 rounded-lg transition-colors text-sm font-semibold flex items-center justify-center disabled:opacity-50 ${R.archived?"bg-green-100 text-green-700 hover:bg-green-200":"bg-amber-100 text-amber-700 hover:bg-amber-200"}`,title:R.archived?"  ":" ",children:b===R.id?i.jsx(Ae,{className:"w-4 h-4 animate-spin"}):i.jsx(v8,{className:"w-4 h-4"})})]})})]},R.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Ir,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:h["page-size"]||20,totalPages:Math.ceil(u/(h["page-size"]||20)),onPageChange:A}),i.jsx(Gye,{isOpen:y,onClose:()=>x(!1),onSuccess:R=>{x(!1),w(),r(`/manage/orders/${R}`)}})]})}function Xye(){const[r,t]=I.useState(!0),[e,a]=I.useState(""),[n,s]=I.useState({});I.useEffect(()=>{l()},[]);const l=async()=>{try{t(!0),a("");const[d,h]=await Promise.all([du.getReturnedOrdersReport(),du.getReturnedProductsReport()]);s({returnedOrders:d,returnedProducts:h})}catch{a("    ")}finally{t(!1)}},o=d=>new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(d),c=d=>new Intl.NumberFormat("fa-IR").format(d),u={title:{text:" ",textStyle:{fontSize:18,fontWeight:"bold",color:"#374151",fontFamily:"Vazir, Tahoma, sans-serif"},left:"center",top:20},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12}},grid:{left:"3%",right:"4%",bottom:"15%",top:"25%",containLabel:!0},xAxis:{type:"category",data:n.returnedProducts?.report.slice(0,8).map(d=>d.product_title)||[],axisLabel:{rotate:45,fontSize:10,fontFamily:"Vazir, Tahoma, sans-serif",color:"#6b7280"},axisLine:{lineStyle:{color:"#e5e7eb"}}},yAxis:{type:"value",name:"  ()",nameTextStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12,color:"#6b7280"},axisLabel:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11,color:"#6b7280"},axisLine:{lineStyle:{color:"#e5e7eb"}},splitLine:{lineStyle:{color:"#f3f4f6"}}},series:[{name:" ",type:"bar",data:n.returnedProducts?.report.slice(0,8).map(d=>d.total_returned_weight)||[],itemStyle:{color:"#ef4444",borderRadius:[4,4,0,0]},barWidth:"60%"}]};return r?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(is,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600",children:e})]}):i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ir,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsx("p",{className:"text-gray-600 text-base",children:"       "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-100 rounded-xl border border-red-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center",children:i.jsx(Ir,{className:"w-6 h-6 text-white"})}),i.jsx(gg,{className:"w-5 h-5 text-red-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c((n.returnedOrders?.summary.fully_returned_count||0)+(n.returnedOrders?.summary.partially_returned_count||0))}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("p",{className:"text-xs text-gray-500",children:["  :"," ",o(n.returnedOrders?.summary.total_returned_amount||0)]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[" :"," ",(n.returnedOrders?.summary.average_return_percentage||0).toFixed(1),"%"]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-100 rounded-xl border border-orange-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center",children:i.jsx(nt,{className:"w-6 h-6 text-white"})}),i.jsx(gg,{className:"w-5 h-5 text-orange-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:" "}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c(n.returnedProducts?.summary.total_returned_weight||0)," ",""]}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("p",{className:"text-xs text-gray-500",children:[" :"," ",o(n.returnedProducts?.summary.total_returned_amount||0)]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[" :"," ",(n.returnedProducts?.summary.average_return_percentage||0).toFixed(1),"%"]})]})]})]}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:i.jsx(lu,{option:u,style:{height:"400px"},opts:{renderer:"svg"}})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),i.jsx("div",{className:"space-y-3",children:n.returnedOrders?.report.sort((d,h)=>h.total_returned_amount-d.total_returned_amount).slice(0,10).map((d,h)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-red-50 hover:to-rose-50 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-rose-600 rounded-lg flex items-center justify-center text-white text-sm font-bold shadow-md",children:h+1}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold text-gray-900",children:[" #",d.order_code]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",d.customer_title]})]})]}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-red-600",children:o(d.total_returned_amount)}),i.jsxs("p",{className:"text-xs text-gray-500",children:[c(d.total_returned_weight)," "]})]})]},d.order_id))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),i.jsx("div",{className:"space-y-3",children:n.returnedProducts?.report.sort((d,h)=>h.total_returned_weight-d.total_returned_weight).slice(0,10).map((d,h)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-orange-50 hover:to-amber-50 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center text-white text-sm font-bold shadow-md",children:h+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:d.product_title}),i.jsxs("p",{className:"text-xs text-gray-500",children:[d.total_return_count,"  "]})]})]}),i.jsxs("div",{className:"text-left",children:[i.jsxs("p",{className:"font-bold text-orange-600",children:[c(d.total_returned_weight)," "]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[d.return_percentage.toFixed(1),"% "]})]})]},d.product_id))})]})]})]})}function Zye(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{s(!0),o("");const h=await un.getPaymentById(t);a(h)}catch(h){console.error("Error fetching payment details:",h),o("    ")}finally{s(!1)}},u=h=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[h]||h,d=h=>({CASH:"bg-green-100 text-green-800",DEPOSIT_TO_ACCOUNT:"bg-blue-100 text-blue-800",CHEQUE:"bg-yellow-100 text-yellow-800",CREDIT:"bg-purple-100 text-purple-800",WALLET:"bg-indigo-100 text-indigo-800",ONLINE:"bg-cyan-100 text-cyan-800"})[h]||"bg-gray-100 text-gray-800";return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ot,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/customers"),className:"mt-4 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors bg-purple-600 text-white hover:bg-purple-700",children:""})]}):i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("button",{onClick:()=>r(-1),className:"w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-xl flex items-center justify-center transition-all",children:i.jsx(yu,{className:"w-5 h-5 text-gray-700"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["  #",e.code]}),i.jsx("p",{className:"text-gray-600 text-base",children:u(e.method)})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-purple-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(Ot,{className:"w-6 h-6 ml-2 text-purple-600"}),"  "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[i.jsx("p",{className:"text-sm font-bold text-purple-700 mb-2",children:" "}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["#",e.code]})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[i.jsx("p",{className:"text-sm font-bold text-green-700 mb-2",children:""}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ue(e.amount)})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[i.jsx("p",{className:"text-sm font-bold text-blue-700 mb-2",children:" "}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${d(e.method)}`,children:u(e.method)})})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[i.jsxs("p",{className:"text-sm font-bold text-yellow-700 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:_e(e.date)})]}),e.cheque_due_date&&i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[i.jsxs("p",{className:"text-sm font-bold text-orange-700 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"}),"  "]}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:_e(e.cheque_due_date)})]}),i.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[i.jsx("p",{className:"text-sm font-bold text-indigo-700 mb-2",children:""}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.deleted?i.jsx("span",{className:"text-red-600",children:" "}):i.jsx("span",{className:"text-green-600",children:""})})]})]}),e.description&&i.jsxs("div",{className:"mt-4 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"text-sm font-bold text-gray-700 mb-2",children:""}),i.jsx("p",{className:"text-base text-gray-900",children:e.description})]})]}),e.customer&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-blue-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(_t,{className:"w-6 h-6 ml-2 text-blue-600"})," "]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[i.jsx("p",{className:"text-sm font-bold text-blue-700 mb-2",children:" "}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.customer.title}),i.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[": ",e.customer.code]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(Ot,{className:"w-6 h-6 ml-2 text-gray-600"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.wallet_id&&i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[i.jsxs("p",{className:"text-sm font-bold text-green-700 mb-2 flex items-center",children:[i.jsx(wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsxs("p",{className:"text-base font-semibold text-gray-900",children:[": ",e.wallet_id]})]}),e.order_id&&i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[i.jsxs("p",{className:"text-sm font-bold text-blue-700 mb-2 flex items-center",children:[i.jsx(nt,{className:"w-4 h-4 ml-1"}),""]}),i.jsxs("button",{onClick:()=>r(`/manage/orders/${e.order_id}`),className:"text-base font-semibold text-blue-600 hover:text-blue-800 underline",children:[": ",e.order_id]})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(e.created_at)})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(e.updated_at)})]})]})]})]})}const Kye=r=>({CREATED:" ",AMOUNT_CHANGED:" ",METHOD_CHANGED:"  ",DATE_CHANGED:" ",CHEQUE_DATE_CHANGED:"  ",DELETED:" ",RESTORED:" ",INVOICE_LINKED:"  ",INVOICE_UNLINKED:"   "})[r||""]||" ",Qye=r=>({CREATED:"bg-green-100 text-green-800",AMOUNT_CHANGED:"bg-yellow-100 text-yellow-800",METHOD_CHANGED:"bg-blue-100 text-blue-800",DATE_CHANGED:"bg-cyan-100 text-cyan-800",CHEQUE_DATE_CHANGED:"bg-indigo-100 text-indigo-800",DELETED:"bg-red-100 text-red-800",RESTORED:"bg-green-100 text-green-800",INVOICE_LINKED:"bg-purple-100 text-purple-800",INVOICE_UNLINKED:"bg-orange-100 text-orange-800"})[r||""]||"bg-gray-100 text-gray-800",Jye=r=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[r||""]||r||"-",ebe=r=>({CASH:"bg-green-100 text-green-800",DEPOSIT_TO_ACCOUNT:"bg-blue-100 text-blue-800",CHEQUE:"bg-yellow-100 text-yellow-800",CREDIT:"bg-purple-100 text-purple-800",WALLET:"bg-indigo-100 text-indigo-800",ONLINE:"bg-cyan-100 text-cyan-800"})[r||""]||"bg-gray-100 text-gray-800";function tbe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState({page:1,"page-size":20}),[g,v]=I.useState([]);I.useEffect(()=>{y(),x()},[h]);const y=async()=>{try{n(!0),l("");const S={page:h.page||o,"page-size":h["page-size"]||20,...h},T=await Gs.getPaymentHistory(S);e(T.data||[]),d(T.count||0)}catch(S){console.error("Error fetching payment history:",S),l(S.response?.data?.message||"    ")}finally{n(!1)}},x=async()=>{try{const S=await gr.getAllCustomers();v(S.data||[])}catch(S){console.error("Error fetching customers:",S)}},b=S=>{p(T=>({...T,page:S})),c(S)},N=(S,T)=>{p(A=>({...A,[S]:T||void 0,page:1})),c(1)},w=()=>{let S=0;return h.payment_id&&S++,h.employee_id&&S++,h.customer_id&&S++,h.change_type&&S++,h.by_system!==void 0&&S++,h.deleted_changed===!0&&S++,h.related_payment_id&&S++,h.related_invoice_id&&S++,h.created_at_min&&S++,h.created_at_max&&S++,S};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ot,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"text",value:h.payment_id||"",onChange:S=>N("payment_id",S.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:h.customer_id||"",onChange:S=>N("customer_id",S.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[i.jsx("option",{value:"",children:""}),g.map(S=>i.jsxs("option",{value:S.id,children:[S.title," (: ",S.code,")"]},S.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.change_type||"",onChange:S=>N("change_type",S.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"CREATED",children:" "}),i.jsx("option",{value:"AMOUNT_CHANGED",children:" "}),i.jsx("option",{value:"METHOD_CHANGED",children:"  "}),i.jsx("option",{value:"DATE_CHANGED",children:" "}),i.jsx("option",{value:"CHEQUE_DATE_CHANGED",children:"  "}),i.jsx("option",{value:"DELETED",children:" "}),i.jsx("option",{value:"RESTORED",children:" "}),i.jsx("option",{value:"INVOICE_LINKED",children:"  "}),i.jsx("option",{value:"INVOICE_UNLINKED",children:"   "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:h.by_system===void 0?"":h.by_system?"true":"false",onChange:S=>{S.target.value===""?N("by_system",void 0):N("by_system",S.target.value==="true")},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"true",children:""}),i.jsx("option",{value:"false",children:""})]})]})]}),w()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[w(),"  "]}),i.jsx("button",{onClick:()=>{p({page:1,"page-size":20}),c(1)},className:"text-sm text-emerald-600 hover:text-emerald-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(S=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/payment-history/${S.id}`),children:[i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Qye(S.change_type)}`,children:Kye(S.change_type)})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:S.payment_id?`#${S.new_payment?.code||S.payment?.code||S.payment_id}`:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:S.amount_before!==null?ue(S.amount_before):"-"}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-emerald-600",children:S.amount_after!==null?ue(S.amount_after):"-"}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold",children:S.amount_diff!==null?i.jsxs("span",{className:S.amount_diff>0?"text-green-600":S.amount_diff<0?"text-red-600":"text-gray-600",children:[S.amount_diff>0?"+":"",ue(S.amount_diff)]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4",children:S.method_after?i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${ebe(S.method_after)}`,children:Jye(S.method_after)}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${S.by_system?"bg-emerald-100 text-emerald-800":"bg-blue-100 text-blue-800"}`,children:S.by_system?"":""})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(S.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:T=>{T.stopPropagation(),r(`/manage/payment-history/${S.id}`)},className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors text-sm font-semibold",children:""})})]},S.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Ot,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:w()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:h["page-size"]||20,totalPages:Math.ceil(u/(h["page-size"]||20)),onPageChange:b})]})}const XP=r=>({CREATED:" ",AMOUNT_CHANGED:" ",METHOD_CHANGED:"  ",DATE_CHANGED:" ",CHEQUE_DATE_CHANGED:"  ",DELETED:" ",RESTORED:" ",INVOICE_LINKED:"  ",INVOICE_UNLINKED:"   "})[r]||" ",rbe=r=>({CREATED:"bg-green-100 text-green-800",AMOUNT_CHANGED:"bg-yellow-100 text-yellow-800",METHOD_CHANGED:"bg-blue-100 text-blue-800",DATE_CHANGED:"bg-indigo-100 text-indigo-800",CHEQUE_DATE_CHANGED:"bg-purple-100 text-purple-800",DELETED:"bg-red-100 text-red-800",RESTORED:"bg-emerald-100 text-emerald-800",INVOICE_LINKED:"bg-teal-100 text-teal-800",INVOICE_UNLINKED:"bg-orange-100 text-orange-800"})[r]||"bg-gray-100 text-gray-800",Jw=r=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[r||""]||r||"",eS=r=>({CASH:"bg-green-100 text-green-800",DEPOSIT_TO_ACCOUNT:"bg-blue-100 text-blue-800",CHEQUE:"bg-yellow-100 text-yellow-800",CREDIT:"bg-purple-100 text-purple-800",WALLET:"bg-indigo-100 text-indigo-800",ONLINE:"bg-teal-100 text-teal-800"})[r||""]||"bg-gray-100 text-gray-800";function abe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{s(!0),o("");const u=await Gs.getPaymentHistoryById(t);a(u)}catch(u){console.error("Error fetching payment history:",u),o("     ")}finally{s(!1)}};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/payment-history"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"    "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/payment-history"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"  "}),e.payment&&i.jsxs("p",{className:"text-gray-500",children:[" :"," ",i.jsxs("span",{className:"font-semibold text-gray-700",children:["#",e.payment.code]})]})]}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${rbe(e.change_type)}`,children:XP(e.change_type)})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" "}),e.amount_diff!==null&&i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("span",{className:"text-sm text-gray-500",children:" :"}),i.jsxs("span",{className:`text-xl font-bold ${e.amount_diff>=0?"text-green-600":"text-red-600"}`,children:[e.amount_diff>=0?"+":"",ue(e.amount_diff)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-red-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[e.amount_before!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1",children:""}),i.jsx("p",{className:`text-2xl font-bold ${e.amount_before>=0?"text-green-600":"text-red-600"}`,children:ue(e.amount_before)})]}),e.method_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-2",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${eS(e.method_before)}`,children:Jw(e.method_before)})]}),e.date_before&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.date_before)})]}),e.old_payment&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.old_payment.code]})]})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-green-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[e.amount_after!==null&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1",children:""}),i.jsx("p",{className:`text-2xl font-bold ${e.amount_after>=0?"text-green-600":"text-red-600"}`,children:ue(e.amount_after)})]}),e.method_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-2",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${eS(e.method_after)}`,children:Jw(e.method_after)})]}),e.date_after&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.date_after)})]}),e.new_payment&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.new_payment.code]})]})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:XP(e.change_type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold",children:e.by_system?i.jsx("span",{className:"text-orange-600",children:" "}):i.jsx("span",{className:"text-blue-600",children:" "})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),e.employee&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.employee.profile.first_name," ",e.employee.profile.last_name]})]}),e.reason&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.reason})]})]})]}),e.payment&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.payment.code]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:`text-xl font-bold ${e.payment.amount>=0?"text-green-600":"text-red-600"}`,children:ue(e.payment.amount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-sm font-semibold ${eS(e.payment.method)}`,children:Jw(e.payment.method)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.payment.date)})]}),e.payment.cheque_due_date&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"  "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.payment.cheque_due_date)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold",children:e.payment.deleted?i.jsx("span",{className:"text-red-600",children:" "}):i.jsx("span",{className:"text-green-600",children:""})})]}),e.payment.description&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.payment.description})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[e.payment?.customer&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.payment.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.payment.customer.code})]})]})]}),e.ip_address&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" IP"}),i.jsx("p",{className:"text-sm font-semibold text-gray-900 font-mono bg-gray-50 rounded px-2 py-1 inline-block",children:e.ip_address.split(",")[0]})]}),e.ip_address.split(",").length>1&&i.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-gray-100",children:[e.ip_address.split(",")[1]?.trim()&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[1].trim()})]}),e.ip_address.split(",")[2]?.trim()&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[2].trim()})]}),e.ip_address.split(",")[6]?.trim()&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[6].trim()})]})]})]})]})]})]})]})}function nbe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState([]),[p,g]=I.useState([]),[v,y]=I.useState(""),[x,b]=I.useState(!1),[N,w]=I.useState(!1),[S,T]=I.useState(null);I.useEffect(()=>{t&&A()},[t]);const A=async()=>{if(t)try{s(!0),o("");const O=await Oo.getProductById(t);a(O),y(O.description||""),b(O.is_special||!1),w(O.is_online||!1)}catch{o("    ")}finally{s(!1)}},C=O=>{const z=Array.from(O.target.files||[]);z.length>0&&(h(z),g([]))},M=async()=>{if(d.length!==0)try{u(!0);const O=await ku.uploadFiles(d);g(O)}catch{o("   ")}finally{u(!1)}},R=async()=>{if(!(!e||!t))try{u(!0);const O={};p.length>0&&(O.image_ids=p.map(z=>z.id)),v!==e.description&&(O.description=v),x!==(e.is_special||!1)&&(O.is_special=x),N!==(e.is_online||!1)&&(O.is_online=N),Object.keys(O).length>0&&(await Oo.updateProduct(t,O),await A(),h([]),g([]))}catch{o("   ")}finally{u(!1)}},k=O=>{h(z=>z.filter((U,H)=>H!==O))},L=O=>{g(z=>z.filter((U,H)=>H!==O))};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l&&!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l}),i.jsx("button",{onClick:A,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors mr-2",children:" "}),i.jsx("button",{onClick:()=>r("/manage/products"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"  "})]}):e?i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/products"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e.title}),i.jsx("p",{className:"text-gray-500",children:"   "})]}),i.jsxs("button",{onClick:A,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 text-sm",children:[i.jsx(Ca,{className:"w-4 h-4"}),i.jsx("span",{children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:e.code})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("p",{className:"text-xl font-bold text-green-600",children:[e.net_weight," "]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-xl font-bold text-purple-600",children:ue(e.retail_price)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold",children:e.locked?i.jsx("span",{className:"text-red-600",children:" "}):i.jsx("span",{className:"text-green-600",children:""})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-cyan-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-cyan-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-xl font-bold text-cyan-600",children:ue(e.wholesale_price)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-pink-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-pink-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-xl font-bold text-pink-600",children:ue(e.online_price)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.categories&&e.categories.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-purple-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:[" (",e.categories.length,")"]})]}),i.jsx("div",{className:"space-y-3",children:e.categories.map(O=>i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:O.title}),i.jsxs("p",{className:"text-xs text-gray-600",children:[": ",O.code]})]},O.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"flex items-center space-x-reverse space-x-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",id:"is_special",checked:x,onChange:O=>b(O.target.checked),className:"w-5 h-5 cursor-pointer rounded border-2 border-gray-300 bg-white text-purple-600 transition-all focus:ring-2 focus:ring-purple-500/20 checked:bg-purple-600 checked:border-purple-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:" "}),i.jsx("p",{className:"text-xs text-gray-500",children:"      "})]})]}),i.jsxs("label",{className:"flex items-center space-x-reverse space-x-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",id:"is_online",checked:N,onChange:O=>w(O.target.checked),className:"w-5 h-5 cursor-pointer rounded border-2 border-gray-300 bg-white text-blue-600 transition-all focus:ring-2 focus:ring-blue-500/20 checked:bg-blue-600 checked:border-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"  "}),i.jsx("p",{className:"text-xs text-gray-500",children:"      "})]})]})]})]})]}),e.images&&e.images.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx($W,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:["  (",e.images.length,")"]})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:e.images.map((O,z)=>i.jsxs("div",{className:"group relative aspect-square rounded-lg overflow-hidden border-2 border-gray-200 hover:border-blue-400 transition-all cursor-pointer",onClick:()=>T(z),children:[i.jsx("img",{src:lr(O.thumbnail)||lr(O.url)||"",alt:`${e.title} -  ${z+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 flex items-center justify-center",children:i.jsx(Wx,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"})})]},O.id))})]}),S!==null&&e.images&&i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>T(null),children:i.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",children:[i.jsx("button",{onClick:()=>T(null),className:"absolute top-4 right-4 z-10 w-10 h-10 bg-white/90 hover:bg-white rounded-full flex items-center justify-center transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-900"})}),i.jsx("img",{src:lr(e.images[S].url)||"",alt:`${e.title} -  ${S+1}`,className:"w-full h-full object-contain rounded-lg",onClick:O=>O.stopPropagation()}),e.images.length>1&&i.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center space-x-reverse space-x-2 bg-white/90 rounded-full px-4 py-2",children:[i.jsx("button",{onClick:O=>{O.stopPropagation(),T(z=>z>0?z-1:e.images.length-1)},className:"w-8 h-8 bg-gray-900 hover:bg-gray-700 text-white rounded-full flex items-center justify-center transition-colors",children:i.jsx(Ut,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm font-semibold text-gray-900 px-3",children:[S+1,"  ",e.images.length]}),i.jsx("button",{onClick:O=>{O.stopPropagation(),T(z=>z<e.images.length-1?z+1:0)},className:"w-8 h-8 bg-gray-900 hover:bg-gray-700 text-white rounded-full flex items-center justify-center transition-colors rotate-180",children:i.jsx(Ut,{className:"w-4 h-4"})})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("textarea",{value:v,onChange:O=>y(O.target.value),placeholder:"    ...",className:"w-full h-32 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none transition-all bg-gray-50"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-cyan-50 flex items-center justify-center",children:i.jsx(Wx,{className:"w-4 h-4 text-cyan-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("input",{type:"file",id:"product-images",accept:"image/*",multiple:!0,onChange:C,className:"hidden"}),i.jsx("label",{htmlFor:"product-images",className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-gray-400 transition-colors bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Rs,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:d.length>0?`${d.length}   `:"  ()"})]})})]}),d.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"  :"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:d.map((O,z)=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-2 border border-gray-200",children:[i.jsx("span",{className:"text-xs text-gray-700 truncate flex-1",children:O.name}),i.jsx("button",{onClick:()=>k(z),className:"text-red-500 hover:text-red-700 p-1",children:i.jsx(St,{className:"w-4 h-4"})})]},z))})]}),d.length>0&&p.length===0&&i.jsx("button",{onClick:M,disabled:c,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center space-x-reverse space-x-2 text-sm",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ca,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Rs,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})}),p.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"  :"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:p.map((O,z)=>i.jsxs("div",{className:"flex items-center justify-between bg-green-50 rounded-lg p-2 border border-green-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 flex-1",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-md flex items-center justify-center",children:i.jsx(Rs,{className:"w-3 h-3 text-white"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-xs font-semibold text-gray-900 truncate",children:O.name}),i.jsxs("p",{className:"text-xs text-gray-600",children:[O.size," "]})]})]}),i.jsx("button",{onClick:()=>L(z),className:"text-red-500 hover:text-red-700 p-1",children:i.jsx(St,{className:"w-4 h-4"})})]},O.id))})]}),(p.length>0||v!==e.description||x!==(e.is_special||!1)||N!==(e.is_online||!1))&&i.jsx("button",{onClick:R,disabled:c,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold flex items-center justify-center space-x-reverse space-x-2 text-sm",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ca,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(nt,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})})]})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:"  "}),i.jsx("button",{onClick:()=>r("/manage/products"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"  "})]})}function sbe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState([]),[l,o]=I.useState(""),[c,u]=I.useState(""),[d,h]=I.useState(""),[p,g]=I.useState(null),[v,y]=I.useState(!1),[x,b]=I.useState(!1),[N,w]=I.useState("");I.useEffect(()=>{t&&(S(),T())},[t]);const S=async()=>{if(t)try{const R=await Us.getWarehouseById(t);a(R)}catch(R){console.error("Error fetching warehouse details:",R),w("    ")}},T=async()=>{if(t)try{b(!0);const R=await Oo.getProductsByWarehouse(t);s(Array.isArray(R)?R:[])}catch(R){console.error("Error fetching products:",R),w("   ")}finally{b(!1)}},A=async()=>{if(!l){w("     ");return}if(t)try{y(!0),w("");const R={page:1,"page-size":1e3,product_id:l,from:c||"",to:d||""},k=await du.getProductKardex(R);g(k)}catch(R){console.error("Error generating kardex report:",R),w("   ")}finally{y(!1)}},C=R=>({CARGO_DISPATCH:" ",RECEIVING:"  ",DISPATCHING:"  ",PRODUCE_INPUT:"   ",PRODUCE_OUTPUT:" ",CARGO_RETURN:"",ADVANCE_INVENTORY:" "})[R]||R,M=R=>({CARGO_DISPATCH:"bg-blue-100 text-blue-800",RECEIVING:"bg-green-100 text-green-800",DISPATCHING:"bg-red-100 text-red-800",PRODUCE_INPUT:"bg-gray-100 text-gray-800",PRODUCE_OUTPUT:"bg-emerald-100 text-emerald-800",CARGO_RETURN:"bg-orange-100 text-orange-800",ADVANCE_INVENTORY:"bg-yellow-100 text-yellow-800"})[R]||"bg-gray-100 text-gray-800";return t?i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("button",{onClick:()=>r(`/manage/warehouses/${t}`),className:"w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-xl flex items-center justify-center transition-all",children:i.jsx(Ut,{className:"w-5 h-5 text-gray-700"})}),i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(is,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e?.name||""})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:l,onChange:R=>o(R.target.value),disabled:x,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"",children:" "}),n.map(R=>i.jsxs("option",{value:R.id,children:[R.title," (: ",R.code,")"]},R.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx(Ls,{value:c,onChange:u,placeholder:"  "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx(Ls,{value:d,onChange:h,placeholder:"  "})]})]}),i.jsx("button",{onClick:A,disabled:v||!l||x,className:"w-full md:w-auto px-6 py-3 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold flex items-center justify-center space-x-reverse space-x-2",children:v?i.jsxs(i.Fragment,{children:[i.jsx(Ca,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"   ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(is,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})})]}),N&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:N})}),x&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-amber-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"   ..."})]}),p&&p.items&&p.items.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center",children:i.jsx(nt,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600",children:[p.items.length," "]})]})]}),i.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(YW,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})]}),p.product&&i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-4 border border-amber-200",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsx("div",{className:"w-10 h-10 bg-amber-600 rounded-lg flex items-center justify-center",children:i.jsx(nt,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:":"}),i.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[p.product.title," (:"," ",p.product.code,")"]}),i.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" :"," ",p.product.net_weight.toLocaleString("fa-IR")," ",""]})]})]})})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"#"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:p.items.map((R,k)=>{const L=R.type==="RECEIVING"||R.type==="CARGO_RETURN"||R.type==="PRODUCE_OUTPUT",O=R.type==="DISPATCHING"||R.type==="CARGO_DISPATCH"||R.type==="PRODUCE_INPUT",z=Math.abs(R.net_weight),U=L?z:0,H=O?z:0;return i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 font-semibold text-right",children:k+1}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 text-right",children:_e(R.date)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 font-semibold text-right",children:R.code||"-"}),i.jsx("td",{className:"px-4 py-4 text-right",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold ${M(R.type)}`,children:C(R.type)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 text-right",children:R.customer?.title||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-green-700 font-semibold text-right",children:U>0?`${U.toLocaleString("fa-IR")} `:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-red-700 font-semibold text-right",children:H>0?`${H.toLocaleString("fa-IR")} `:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 text-right",children:ue(R.fee)}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-green-700 text-right",children:ue(R.amount)}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-right",children:i.jsxs("span",{className:R.remaining<0?"text-red-600":R.remaining>0?"text-blue-600":"text-gray-900",children:[R.remaining.toLocaleString("fa-IR")," "]})})]},k)})})]})})]}),p&&p.items&&p.items.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[i.jsx(is,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"     "})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"   "}),i.jsx("button",{onClick:()=>r("/manage/warehouses"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]})}function ibe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState([]),[s,l]=I.useState(""),[o,c]=I.useState(!1),[u,d]=I.useState(""),[h,p]=I.useState(1),[g,v]=I.useState(0),[y]=I.useState(20),[x,b]=I.useState(""),[N,w]=I.useState(""),[S,T]=I.useState(""),[A,C]=I.useState("");I.useEffect(()=>{M()},[]),I.useEffect(()=>{s?R():(e([]),v(0))},[s]),I.useEffect(()=>{p(1)},[x,N,S,A]);const M=async()=>{try{c(!0),d("");const H=await Us.getWarehouses();if(Array.isArray(H)){n(H);const P=H.find(F=>F.name.toLowerCase().includes("")||F.name.toLowerCase().includes(""));P&&l(P.id)}else d("    ")}catch{d("   ")}finally{c(!1)}},R=async()=>{if(!s){e([]),v(0);return}try{c(!0),d("");const H=await Oo.getProductsByWarehouse(s);Array.isArray(H)?(e(H),v(H.length)):(d("    "),e([]),v(0))}catch(H){console.error("Error fetching products:",H),d(H?.message||"    "),e([]),v(0)}finally{c(!1)}},k=H=>{p(H)},L=()=>{let H=0;return x&&H++,N&&H++,S&&H++,A&&H++,H},O=t.filter(H=>{if(x){const P=x.toLowerCase();if(!(H.title.toLowerCase().includes(P)||H.code.toString().includes(x)||H.description?.toLowerCase().includes(P)))return!1}if(N){const P=N==="true";if(H.locked!==P)return!1}if(S){const P=parseFloat(S);if(!isNaN(P)&&H.retail_price<P)return!1}if(A){const P=parseFloat(A);if(!isNaN(P)&&H.retail_price>P)return!1}return!0}),z=O.length,U=O.slice((h-1)*y,h*y);return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(nt,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[z," ",L()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:s,onChange:H=>{l(H.target.value),p(1)},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:" "}),a.map(H=>i.jsxs("option",{value:H.id,children:[H.name," (: ",H.code,")"]},H.id))]})]}),s&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:x,onChange:H=>b(H.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:N,onChange:H=>w(H.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"false",children:""}),i.jsx("option",{value:"true",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"number",value:S,onChange:H=>T(H.target.value),placeholder:" ",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"number",value:A,onChange:H=>C(H.target.value),placeholder:" ",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]})]}),L()>0&&s&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[L(),"  "]}),i.jsx("button",{onClick:()=>{b(""),w(""),T(""),C(""),p(1)},className:"text-sm text-teal-600 hover:text-teal-700 font-semibold",children:"  "})]})]}),u&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:u})}),o&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-teal-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!o&&s&&z>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:U.map(H=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/products/${H.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:H.title}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:H.code}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-purple-600",children:ue(H.retail_price)}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-orange-600",children:ue(H.wholesale_price)}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-emerald-600",children:ue(H.online_price)}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700",children:[H.net_weight," "]}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${H.locked?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:H.locked?" ":""})}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:P=>{P.stopPropagation(),r(`/manage/products/${H.id}`)},className:"px-3 py-1 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 transition-colors text-sm font-semibold",children:""})})]},H.id))})]})})}),!o&&s&&z===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:L()>0?"      ":"  "})]}),!o&&!s&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"    "})]}),!o&&s&&z>0&&i.jsx($t,{currentPage:h,totalItems:z,itemsPerPage:y,totalPages:Math.ceil(z/y),onPageChange:k})]})}function lbe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[p,g]=I.useState([]),[v,y]=I.useState([]),[x,b]=I.useState({});I.useEffect(()=>{t&&w(),N()},[t]);const N=async()=>{try{const[k,L]=await Promise.all([K4.getGroups(),K4.getClients()]);g(k.data||[]),y(L.data||[])}catch(k){console.error("Error fetching groups and clients:",k)}};I.useEffect(()=>{e&&!c&&b({first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",mobile:e.mobile||"",national_code:e.national_code||"",gender:e.gender||"",enabled:e.enabled,person_title:e.person?.title||""})},[e,c]);const w=async()=>{if(t)try{s(!0),o("");const k=await Nu.getProfileDetails(t);a(k)}catch(k){console.error("Error fetching profile details:",k),o("    ")}finally{s(!1)}},S=k=>({MALE:"",FEMALE:"",OTHER:""})[k]||k,T=async()=>{if(!(!t||!e))try{if(h(!0),e.employee){alert("        ");return}await Nu.updateNonEmployee(t,x),await w(),u(!1)}catch(k){console.error("Error updating profile:",k),alert("   ")}finally{h(!1)}},A=e?.employee!==null&&e?.employee!==void 0,C=!A,M=k=>p.find(O=>O.id===k)?.name||k,R=k=>v.find(O=>O.id===k||O.clientId===k)?.name||k;return n?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})}):l?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l}),i.jsx("button",{onClick:w,className:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:" "})]}):e?i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsx("button",{onClick:()=>{r(A?"/manage/profiles/employees":"/manage/profiles/others")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(Ut,{className:"w-6 h-6 text-gray-600"})}),i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(ol,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[" : ",e.first_name," ",e.last_name]}),i.jsx("p",{className:"text-gray-600 text-base",children:A?"  ":"    "})]})]}),C&&i.jsx("div",{className:"flex items-center space-x-reverse space-x-3",children:c?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>{u(!1),e&&b({first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",mobile:e.mobile||"",national_code:e.national_code||"",gender:e.gender||"",enabled:e.enabled,person_title:e.person?.title||""})},className:"flex items-center space-x-reverse space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(St,{className:"w-5 h-5"}),""]}),i.jsxs("button",{onClick:T,disabled:d,className:"flex items-center space-x-reverse space-x-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors disabled:opacity-50",children:[i.jsx(sb,{className:"w-5 h-5"}),d?"  ...":""]})]}):i.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-reverse space-x-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[i.jsx(bu,{className:"w-5 h-5"}),""]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(_t,{className:"w-6 h-6 ml-2 text-teal-600"})," "]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:"   "}),c?i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",value:x.first_name||"",onChange:k=>b({...x,first_name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:""}),i.jsx("input",{type:"text",value:x.last_name||"",onChange:k=>b({...x,last_name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:" "})]}):i.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[e.first_name," ",e.last_name]})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:" "}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.username})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:"  (KID)"}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.kid})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-600 mb-2 flex items-center",children:[i.jsx(qW,{className:"w-4 h-4 ml-1"}),""]}),c?i.jsx("input",{type:"email",value:x.email||"",onChange:k=>b({...x,email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:""}):i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.email||""})]}),i.jsxs("div",{className:"bg-cyan-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-600 mb-2 flex items-center",children:[i.jsx(w8,{className:"w-4 h-4 ml-1"})," "]}),c?i.jsx("input",{type:"text",value:x.mobile||"",onChange:k=>b({...x,mobile:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:" "}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.mobile}),e.mobile_verified&&i.jsxs("span",{className:"inline-flex items-center mt-2 text-xs text-green-600",children:[i.jsx(us,{className:"w-3 h-3 ml-1"})," "]})]})]}),i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:" "}),c?i.jsx("input",{type:"text",value:x.national_code||"",onChange:k=>b({...x,national_code:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:" "}):i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.national_code||""})]}),i.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:""}),c?i.jsxs("select",{value:x.gender||"",onChange:k=>b({...x,gender:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",children:[i.jsx("option",{value:"",children:" "}),i.jsx("option",{value:"MALE",children:""}),i.jsx("option",{value:"FEMALE",children:""}),i.jsx("option",{value:"OTHER",children:""})]}):i.jsx("p",{className:"text-lg font-bold text-gray-900",children:S(e.gender)})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-600 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.birth_date?_e(e.birth_date):""})]}),i.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:" "}),c?i.jsxs("label",{className:"flex items-center space-x-reverse space-x-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.enabled??!1,onChange:k=>b({...x,enabled:k.target.checked}),className:"w-5 h-5 text-teal-600 rounded focus:ring-teal-500"}),i.jsx("span",{className:"text-lg font-bold text-gray-900",children:x.enabled?"":""})]}):i.jsx("div",{className:"flex items-center space-x-reverse space-x-2",children:e.enabled?i.jsxs(i.Fragment,{children:[i.jsx(us,{className:"w-5 h-5 text-green-600"}),i.jsx("p",{className:"text-lg font-bold text-green-600",children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx(xi,{className:"w-5 h-5 text-red-600"}),i.jsx("p",{className:"text-lg font-bold text-red-600",children:""})]})})]})]})]}),e.person&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(_t,{className:"w-6 h-6 ml-2 text-green-600"})," "]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:" / "}),c?i.jsx("input",{type:"text",value:x.person_title||"",onChange:k=>b({...x,person_title:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:"/"}):i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.person.title||""})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(ol,{className:"w-6 h-6 ml-2 text-teal-600"})," (",e.groups.length,")"]}),e.groups.length>0?i.jsx("div",{className:"space-y-3",children:e.groups.map((k,L)=>{const O=M(k.id),z=p.find(U=>U.id===k.id);return i.jsx("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-teal-50 hover:to-cyan-50 transition-all duration-300",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-lg flex items-center justify-center text-white text-sm font-bold shadow-md",children:L+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:O}),z?.path&&i.jsx("p",{className:"text-xs text-gray-500",children:z.path}),!z&&i.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",k.id]})]})]})},k.id)})}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"   "})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(ol,{className:"w-6 h-6 ml-2 text-blue-600"})," (",e.clients.length,")"]}),e.clients.length>0?i.jsx("div",{className:"space-y-3",children:e.clients.map((k,L)=>{const O=R(k),z=v.find(U=>U.id===k||U.clientId===k);return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-blue-50 hover:to-indigo-50 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white text-sm font-bold shadow-md",children:L+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:O}),z?.description&&i.jsx("p",{className:"text-xs text-gray-500",children:z.description}),!z&&i.jsxs("p",{className:"text-xs text-gray-400",children:["ID: ",k]})]})]}),z?.enabled!==void 0&&i.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${z.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.enabled?"":""})]},k)})}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"   "})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx(ol,{className:"w-6 h-6 ml-2 text-purple-600"})," (",e.roles.length,")"]}),e.roles.length>0?i.jsx("div",{className:"space-y-3",children:e.roles.map((k,L)=>i.jsx("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-purple-50 hover:to-indigo-50 transition-all duration-300",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center text-white text-sm font-bold shadow-md",children:L+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:k.title}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",R(k.client_id)]})]})]})},k.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"   "})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:" "}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.mobile_prefix||""})]}),i.jsxs("div",{className:"bg-cyan-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:"  "}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.mobile_country_code||""})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:"  "}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.third_party_provider||""})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm font-bold text-gray-600 mb-2",children:"     "}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:e.is_verified_via_third_party===!0?"":e.is_verified_via_third_party===!1?"":""})]}),i.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-600 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:_e(e.created_at)})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-600 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsx("p",{className:"text-lg font-bold text-gray-900",children:_e(e.updated_at)})]}),e.deleted_at&&i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[i.jsxs("p",{className:"text-sm font-bold text-gray-600 mb-2 flex items-center",children:[i.jsx(Wr,{className:"w-4 h-4 ml-1"})," "]}),i.jsx("p",{className:"text-lg font-bold text-red-600",children:_e(e.deleted_at)})]})]})]}),e.timestamps&&e.timestamps.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsx("div",{className:"space-y-2",children:e.timestamps.map((k,L)=>i.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm text-gray-700",children:_e(k)},L))})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(ol,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"  "})]})}function obe(){const r=Je(),{id:t,receivingId:e}=sr(),[a,n]=I.useState(null),[s,l]=I.useState(null),[o,c]=I.useState(!0),[u,d]=I.useState("");I.useEffect(()=>{t&&e&&(h(),p())},[t,e]);const h=async()=>{if(t)try{const w=await Us.getWarehouseById(t);n(w)}catch(w){console.error("Error fetching warehouse details:",w)}},p=async()=>{if(e)try{c(!0),d("");const w=await ez.getReceivingById(e);l(w)}catch(w){console.error("Error fetching receiving details:",w),d("    ")}finally{c(!1)}},g=w=>({PURCHASED:"",RETURNED:"",INVENTORY:" "})[w]||w,v=w=>({PURCHASED:"bg-green-100 text-green-800",RETURNED:"bg-orange-100 text-orange-800",INVENTORY:"bg-blue-100 text-blue-800"})[w]||"bg-gray-100 text-gray-800",y=w=>({PURCHASE:"",RETURN_FROM_PURCHASE:"  ",SELL:""})[w]||w,x=w=>({PURCHASE:"bg-blue-100 text-blue-800",RETURN_FROM_PURCHASE:"bg-orange-100 text-orange-800",SELL:"bg-green-100 text-green-800"})[w]||"bg-gray-100 text-gray-800",b=w=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[w]||w,N=w=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[w]||"bg-gray-100 text-gray-800";return!t||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(kr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"  "}),i.jsx("button",{onClick:()=>r(`/manage/warehouses/${t}/receivings`),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"  "})]}):o?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):u||!s?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:u||"  "}),i.jsx("button",{onClick:()=>r(`/manage/warehouses/${t}/receivings`),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"  "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r(`/manage/warehouses/${t}/receivings`),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["  #",s.code]}),i.jsx("p",{className:"text-gray-500",children:a?.name||""})]}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${v(s.source)}`,children:g(s.source)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(kr,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:["#",s.code]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Wr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(s.date)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("p",{className:"text-xl font-bold text-purple-600",children:[s.products_count," "]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(kr,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.license_plate||"-"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.customer&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.customer.code})]}),s.customer.phone&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.customer.phone})]}),s.customer.address&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.customer.address})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[s.license_plate&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(kr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"   "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.license_plate})]}),s.driver_name&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.driver_name})]})]})]}),s.employee&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"   "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[s.employee.profile.first_name," ",s.employee.profile.last_name]})]})]})]})]}),s.products&&s.products.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-orange-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:[" (",s.products.length,")"]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  ()"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  ()"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:s.products.map((w,S)=>{const T=w.purchase_price*w.net_weight;return i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900 text-right",children:w.product_title}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700 text-right",children:[w.net_weight.toLocaleString("fa-IR")," "]}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700 text-right",children:[w.gross_weight.toLocaleString("fa-IR")," "]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 text-right",children:ue(w.purchase_price)}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-green-700 text-right",children:ue(T)})]},w.product_id||S)})}),i.jsx("tfoot",{children:i.jsxs("tr",{className:"bg-gray-50 border-t border-gray-200",children:[i.jsx("td",{colSpan:4,className:"px-4 py-4 text-right text-sm font-bold text-gray-900",children:" :"}),i.jsx("td",{className:"px-4 py-4 text-lg font-bold text-green-700 text-right",children:ue(s.products.reduce((w,S)=>w+S.purchase_price*S.net_weight,0))})]})})]})})]}),s.invoices&&s.invoices.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(Ba,{className:"w-4 h-4 text-orange-600"})}),i.jsxs("h3",{className:"font-bold text-gray-900",children:["  (",s.invoices.length,")"]})]}),i.jsx("div",{className:"space-y-3",children:s.invoices.map(w=>i.jsx("div",{onClick:()=>r(`/manage/invoices/${w.id}`),className:"bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 cursor-pointer transition-colors",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-2",children:[i.jsxs("p",{className:"font-bold text-gray-900",children:[" #",w.code]}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold ${x(w.type)}`,children:y(w.type)}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold ${N(w.payment_status)}`,children:b(w.payment_status)})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx(Wr,{className:"w-4 h-4 text-gray-400"}),i.jsx("span",{className:"text-gray-600",children:_e(w.date)})]}),w.due_date&&i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx(Wr,{className:"w-4 h-4 text-gray-400"}),i.jsxs("span",{className:"text-gray-600",children:[": ",_e(w.due_date)]})]}),i.jsx("div",{children:i.jsxs("span",{className:"text-gray-600 font-semibold",children:[": ",ue(w.amount)]})})]})]})})},w.id))}),i.jsx("div",{className:"mt-4 bg-gray-50 rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-bold text-gray-900",children:"  :"}),i.jsx("span",{className:"text-lg font-bold text-green-700",children:ue(s.invoices.reduce((w,S)=>w+S.amount,0))})]})})]}),(s.waybill||s.veterinary||s.origin_scale||s.destination_scale||s.other_files&&s.other_files.length>0)&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.waybill&&i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:""}),i.jsx("p",{className:"text-xs text-gray-600",children:""})]}),i.jsx("a",{href:lr(s.waybill.url)??"",target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:i.jsx(vp,{className:"w-5 h-5 text-gray-600"})})]})}),s.veterinary&&i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:" "}),i.jsx("p",{className:"text-xs text-gray-600",children:""})]}),i.jsx("a",{href:lr(s.veterinary.url)??"",target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:i.jsx(vp,{className:"w-5 h-5 text-gray-600"})})]})}),s.origin_scale&&i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:" "}),i.jsx("p",{className:"text-xs text-gray-600",children:""})]}),i.jsx("a",{href:lr(s.origin_scale.url)??"",target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:i.jsx(vp,{className:"w-5 h-5 text-gray-600"})})]})}),s.destination_scale&&i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:" "}),i.jsx("p",{className:"text-xs text-gray-600",children:""})]}),i.jsx("a",{href:lr(s.destination_scale.url)??"",target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:i.jsx(vp,{className:"w-5 h-5 text-gray-600"})})]})}),s.other_files&&s.other_files.length>0&&s.other_files.map((w,S)=>i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:["  #",S+1]}),i.jsx("p",{className:"text-xs text-gray-600",children:""})]}),i.jsx("a",{href:lr(w.url)??"",target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:i.jsx(vp,{className:"w-5 h-5 text-gray-600"})})]})},S))]})]})]})}function cbe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState([]),[l,o]=I.useState(!0),[c,u]=I.useState(""),[d,h]=I.useState({}),[p,g]=I.useState(1),[v,y]=I.useState(0),[x]=I.useState(20);I.useEffect(()=>{t&&(b(),N())},[t,p,d]);const b=async()=>{if(t)try{const T=await Us.getWarehouseById(t);a(T)}catch(T){console.error("Error fetching warehouse details:",T)}},N=async()=>{if(t)try{o(!0),u("");const T={page:p,"page-size":x,...d},A=await ez.getReceivings(T,t);s(A.data||[]),y(A.count||0)}catch(T){console.error("Error fetching receivings:",T),u("   ")}finally{o(!1)}},w=T=>({PURCHASED:"",RETURNED:"",INVENTORY:" "})[T]||T,S=T=>({PURCHASED:"bg-green-100 text-green-800",RETURNED:"bg-orange-100 text-orange-800",INVENTORY:"bg-blue-100 text-blue-800"})[T]||"bg-gray-100 text-gray-800";return t?i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("button",{onClick:()=>r(`/manage/warehouses/${t}`),className:"w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-xl flex items-center justify-center transition-all",children:i.jsx(Ut,{className:"w-5 h-5 text-gray-700"})}),i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(kr,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e?.name||"","  ",v,"   "]})]})]})})}),c&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:c})}),l&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!l&&n.length>0&&i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" / "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(T=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/warehouses/${t}/receivings/${T.id}`),children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:["#",T.code]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(T.date)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold ${S(T.source)}`,children:w(T.source)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.customer?T.customer.title:"-"}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700",children:[T.products_count," "]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:T.license_plate?i.jsxs("div",{children:[i.jsx("div",{children:T.license_plate}),T.driver_name&&i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:T.driver_name})]}):"-"}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:A=>{A.stopPropagation(),r(`/manage/warehouses/${t}/receivings/${T.id}`)},className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors text-sm font-semibold",children:""})})]},T.id))})]})})}),!l&&n.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[i.jsx(kr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"  "})]}),!l&&n.length>0&&i.jsx($t,{currentPage:p,totalItems:v,itemsPerPage:x,totalPages:Math.ceil(v/x),onPageChange:g})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(kr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"   "}),i.jsx("button",{onClick:()=>r("/manage/warehouses"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]})}const ube=r=>r?" ":" ",dbe=r=>r?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",hbe=r=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[r]||r,fbe=r=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[r]||"bg-gray-100 text-gray-800";function pbe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{s(!0),o("");const u=await VC.getReminderById(t);a(u)}catch(u){console.error("Error fetching reminder details:",u),o(u.response?.data?.message||"    ")}finally{s(!1)}};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/reminders"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/reminders"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" "}),i.jsxs("p",{className:"text-gray-500",children:[" #",e.id.substring(0,8)]})]}),i.jsxs("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${dbe(e.seen)}`,children:[e.seen?i.jsx(us,{className:"w-4 h-4 ml-2"}):i.jsx(xi,{className:"w-4 h-4 ml-2"}),ube(e.seen)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(Wr,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.date)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Wr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.title})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Yx,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-4 whitespace-pre-wrap",children:e.message})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.code})]}),e.representative_name&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.representative_name})]})]})]}),e.order&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("button",{onClick:()=>r(`/manage/orders/${e.order?.id}`),className:"text-sm font-semibold text-emerald-600 hover:text-emerald-700 transition-colors",children:["#",e.order.code]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-sm font-semibold ${fbe(e.order.payment_status)}`,children:hbe(e.order.payment_status)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-sm font-semibold ${e.order.fulfilled?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.order.fulfilled?" ":" "})]})]})]})]})]})}function gbe({onClose:r,onSuccess:t}){const e=()=>{const w=new Date,S=ra.toJalaali(w);return`${S.jy}/${String(S.jm).padStart(2,"0")}/${String(S.jd).padStart(2,"0")}`},[a,n]=I.useState({customer_id:"",order_id:void 0,message:"",date:new Date,hour:void 0}),[s,l]=I.useState([]),[o,c]=I.useState([]),[u,d]=I.useState(!1),[h,p]=I.useState(""),[g,v]=I.useState(e());I.useEffect(()=>{y()},[]),I.useEffect(()=>{a.customer_id?x():c([])},[a.customer_id]);const y=async()=>{try{const w=await gr.getAllCustomers({page:1,"page-size":100});l(w.data||[])}catch(w){console.error("Error fetching customers:",w)}},x=async()=>{if(a.customer_id)try{const w=await ls.getOrders({customer_id:a.customer_id,page:1,"page-size":100});c(w.data||[])}catch(w){console.error("Error fetching orders:",w)}},b=w=>{if(!w||w.trim()==="")throw new Error("  ");const S=w.split("/");if(S.length!==3)throw new Error("   ");const T=parseInt(S[0]),A=parseInt(S[1]),C=parseInt(S[2]);if(isNaN(T)||isNaN(A)||isNaN(C)||T<1300||T>1500||A<1||A>12||C<1||C>31)throw new Error("    ");try{const M=ra.jalaaliToDateObject(T,A,C);if(!M||isNaN(M.getTime()))throw new Error("    ");if(a.hour){const[R,k]=a.hour.split(":").map(Number);!isNaN(R)&&!isNaN(k)&&(M.setHours(R),M.setMinutes(k),M.setSeconds(0),M.setMilliseconds(0))}else{const R=new Date;M.setHours(R.getHours()),M.setMinutes(R.getMinutes()),M.setSeconds(R.getSeconds()),M.setMilliseconds(R.getMilliseconds())}return M}catch(M){throw new Error("   : "+(M.message||"  "))}},N=async w=>{if(w.preventDefault(),!a.customer_id||!a.message.trim()){p("      ");return}try{d(!0),p("");const S=b(g),T={customer_id:a.customer_id,order_id:a.order_id||void 0,message:a.message.trim(),date:S,hour:a.hour||void 0};await VC.createReminder(T),t()}catch(S){console.error("Error creating reminder:",S),p(S.response?.data?.message||S.message||"   ")}finally{d(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" "}),i.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[h&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-800 text-sm font-semibold",children:h})}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:a.customer_id,onChange:w=>n(S=>({...S,customer_id:w.target.value,order_id:void 0})),required:!0,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[i.jsx("option",{value:"",children:" ..."}),s.map(w=>i.jsxs("option",{value:w.id,children:[w.title," (",w.code,")"]},w.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),i.jsxs("select",{value:a.order_id||"",onChange:w=>n(S=>({...S,order_id:w.target.value||void 0})),disabled:!a.customer_id||o.length===0,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"",children:" ..."}),o.map(w=>i.jsxs("option",{value:w.id,children:[" #",w.code]},w.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:a.message,onChange:w=>n(S=>({...S,message:w.target.value})),required:!0,rows:4,placeholder:"    ...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["  ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ls,{value:g,onChange:v,className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),i.jsx("input",{type:"time",value:a.hour||"",onChange:w=>n(S=>({...S,hour:w.target.value})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 pt-4",children:[i.jsxs("button",{type:"submit",disabled:u,className:"flex-1 px-4 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold flex items-center justify-center space-x-reverse space-x-2",children:[u&&i.jsx(Ae,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:u?"  ...":" "})]}),i.jsx("button",{type:"button",onClick:r,disabled:u,className:"px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:""})]})]})]})})}const mbe=r=>r?" ":" ",vbe=r=>r?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800";function xbe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h,p]=I.useState(!1),[g,v]=I.useState({page:1,"page-size":20}),[y,x]=I.useState([]);I.useEffect(()=>{b(),N()},[g]);const b=async()=>{try{n(!0),l("");const C=await VC.getReminders(g);e(C.data||[]),d(C.count||0),c(g.page||1)}catch(C){console.error("Error fetching reminders:",C),l(C.response?.data?.message||"    ")}finally{n(!1)}},N=async()=>{try{const C=await gr.getAllCustomers({page:1,"page-size":100});x(C.data||[])}catch(C){console.error("Error fetching customers:",C)}},w=C=>{c(C),v(M=>({...M,page:C}))},S=()=>{let C=0;return g.customer_id&&C++,g.message&&C++,g.seen!==null&&g.seen!==void 0&&C++,g.from&&C++,g.to&&C++,C},T=(C,M)=>{c(1),v(R=>({...R,[C]:M,page:1}))},A=()=>{c(1),v({page:1,"page-size":20})};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Yx,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u," ",S()>0&&" ( )"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:b,disabled:a,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-reverse space-x-2 disabled:opacity-50",children:[i.jsx(Ca,{className:`w-4 h-4 ${a?"animate-spin":""}`}),i.jsx("span",{className:"text-sm font-semibold",children:""})]}),i.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors flex items-center space-x-reverse space-x-2",children:[i.jsx(Nl,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-semibold",children:" "})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:g.customer_id||"",onChange:C=>T("customer_id",C.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[i.jsx("option",{value:"",children:" "}),y.map(C=>i.jsxs("option",{value:C.id,children:[C.title," (",C.code,")"]},C.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),i.jsx("input",{type:"text",value:g.message||"",onChange:C=>T("message",C.target.value||null),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:g.seen===null||g.seen===void 0?"":g.seen?"true":"false",onChange:C=>{const M=C.target.value;T("seen",M===""?null:M==="true")},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"false",children:" "}),i.jsx("option",{value:"true",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"date",value:g.from||"",onChange:C=>T("from",C.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("input",{type:"date",value:g.to||"",onChange:C=>T("to",C.target.value||null),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]})]}),S()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[S(),"  "]}),i.jsx("button",{onClick:A,className:"text-sm text-emerald-600 hover:text-emerald-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/reminders/${C.id}`),children:[i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C.customer.title}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",C.customer.code]})]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 max-w-md",children:i.jsx("p",{className:"truncate",children:C.message})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(C.date)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.representative_name||"-"}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${vbe(C.seen)}`,children:mbe(C.seen)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(C.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:M=>{M.stopPropagation(),r(`/manage/reminders/${C.id}`)},className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 transition-colors text-sm font-semibold",children:""})})]},C.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Yx,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:S()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:u,itemsPerPage:g["page-size"]||20,totalPages:Math.ceil(u/(g["page-size"]||20)),onPageChange:w}),h&&i.jsx(gbe,{onClose:()=>p(!1),onSuccess:()=>{p(!1),b()}})]})}function ybe(){const{id:r}=sr(),t=Je(),[e,a]=I.useState(!0),[n,s]=I.useState(""),[l,o]=I.useState(null);I.useEffect(()=>{r&&c(r)},[r]);const c=async d=>{try{a(!0),s("");const h=await Z8.getReturnRequestById(d);o(h)}catch(h){console.error("Failed to load return request details",h),s(h?.response?.data?.message||"    ")}finally{a(!1)}},u=d=>d?{PENDING:" ",APPROVED:" ",REJECTED:" ",RECEIVED:" "}[d]||d:"-";return i.jsxs("div",{className:"space-y-6 font-vazir fade-in",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-rose-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Pr,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[": ",r]})]})]}),i.jsx("div",{children:i.jsxs("button",{onClick:()=>t(-1),className:"px-3 py-2 bg-gray-50 rounded-lg hover:bg-gray-100 flex items-center space-x-reverse space-x-2",children:[i.jsx(yu,{className:"w-4 h-4"}),""]})})]})}),e&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-rose-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),n&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:n})}),!e&&l&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:" "}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"font-medium",children:":"})," ",u(l.status)]}),i.jsxs("div",{children:[i.jsx("strong",{className:"font-medium",children:":"})," ",l.reason||"-"]}),i.jsxs("div",{children:[i.jsx("strong",{className:"font-medium",children:":"})," ",l.description||"-"]}),i.jsxs("div",{children:[i.jsx("strong",{className:"font-medium",children:"  :"})," ",_e(l.created_at)]}),i.jsxs("div",{children:[i.jsx("strong",{className:"font-medium",children:" :"})," ",_e(l.updated_at)]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 lg:col-span-2",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"  "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("h3",{className:"font-semibold",children:""}),i.jsxs("p",{className:"text-sm text-gray-700",children:[l.customer?.title||"-"," (: ",l.customer?.code,")"]})]}),i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsx("h3",{className:"font-semibold",children:""}),i.jsxs("p",{className:"text-sm text-gray-700",children:[" : #",l.order?.code]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[": ",l.order?.address||"-"]}),i.jsxs("p",{className:"text-sm text-gray-700",children:["  : ",_e(l.order?.created_at)]}),i.jsxs("p",{className:"text-sm text-gray-700",children:[": ",l.order?.step]})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"   "}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-right",children:""}),i.jsx("th",{className:"px-4 py-2 text-right",children:""}),i.jsx("th",{className:"px-4 py-2 text-right",children:" "}),i.jsx("th",{className:"px-4 py-2 text-right",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:Array.isArray(l.return_items)&&l.return_items.length>0?l.return_items.map((d,h)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 text-right",children:d.product_title}),i.jsx("td",{className:"px-4 py-3 text-right",children:d.weight}),i.jsx("td",{className:"px-4 py-3 text-right",children:ue(d.online_price)}),i.jsx("td",{className:"px-4 py-3 text-right",children:ue(d.total_price)})]},h)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-gray-500",children:"  "})})})]})})]})]})]})}function bbe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u]=I.useState(20),[d,h]=I.useState(0),[p,g]=I.useState(""),[v,y]=I.useState("");I.useEffect(()=>{x()},[o]),I.useEffect(()=>{c(1),x()},[p,v]);const x=async()=>{try{n(!0),l("");const w={page:o,"page-size":u};p&&(w.status=p),v&&(w.request_id=v);const S=await Z8.getAllReturnRequests(w);S&&Array.isArray(S.data)?(e(S.data),h(S.count||0)):(e([]),h(0))}catch(w){console.error("Error fetching return requests",w),l(w?.response?.data?.message||"    ")}finally{n(!1)}},b=w=>{c(w)},N=w=>w?{PENDING:" ",APPROVED:" ",REJECTED:" ",RECEIVED:" "}[w]||w:"-";return i.jsxs("div",{className:"space-y-6 font-vazir fade-in",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-rose-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Pr,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[d,"   "]})]})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ( )"}),i.jsx("input",{type:"text",value:v,onChange:w=>y(w.target.value),placeholder:" ...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:p,onChange:w=>g(w.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"PENDING",children:" "}),i.jsx("option",{value:"APPROVED",children:" "}),i.jsx("option",{value:"REJECTED",children:" "})]})]})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-rose-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(w=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:["#",w.request?.code??""]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:w.customer?.title||` ${w.customer?.code??""}`}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:w.order?.code?`#${w.order.code}`:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:w.return_items_count??0}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:N(w.status)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(w.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:()=>r(`/manage/return-requests/${w.id}`),className:"px-3 py-1 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 transition-colors text-sm font-semibold",children:""})})]},w.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(Pr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:o,totalItems:d,itemsPerPage:u,totalPages:Math.ceil(d/u),onPageChange:b})]})}function _be(){const[r,t]=I.useState(!0),[e,a]=I.useState(""),[n,s]=I.useState({});I.useEffect(()=>{l()},[]);const l=async()=>{try{t(!0),a("");const g=await du.getSellerReport();s({sellerReport:g})}catch{a("    ")}finally{t(!1)}},o=g=>new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(g),c=g=>new Intl.NumberFormat("fa-IR").format(g),u={title:{text:" ",textStyle:{fontSize:18,fontWeight:"bold",color:"#374151",fontFamily:"Vazir, Tahoma, sans-serif"},left:"center",top:20},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12}},grid:{left:"3%",right:"4%",bottom:"15%",top:"25%",containLabel:!0},xAxis:{type:"category",data:n.sellerReport?.report.map(g=>g.seller_name)||[],axisLabel:{rotate:45,fontSize:10,fontFamily:"Vazir, Tahoma, sans-serif",color:"#6b7280"},axisLine:{lineStyle:{color:"#e5e7eb"}}},yAxis:{type:"value",name:" ",nameTextStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12,color:"#6b7280"},axisLabel:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11,color:"#6b7280"},axisLine:{lineStyle:{color:"#e5e7eb"}},splitLine:{lineStyle:{color:"#f3f4f6"}}},series:[{name:" ",type:"bar",data:n.sellerReport?.report.map(g=>g.successful_orders)||[],itemStyle:{color:"#10b981",borderRadius:[4,4,0,0]},barWidth:"60%"},{name:"  ",type:"bar",data:n.sellerReport?.report.map(g=>g.delivered_orders)||[],itemStyle:{color:"#3b82f6",borderRadius:[4,4,0,0]},barWidth:"60%"}]},d={title:{text:"  ",textStyle:{fontSize:18,fontWeight:"bold",color:"#374151",fontFamily:"Vazir, Tahoma, sans-serif"},left:"center",top:20},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12}},legend:{orient:"vertical",left:"left",top:"middle",textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11}},series:[{name:" ",type:"pie",radius:["40%","70%"],center:["60%","50%"],data:n.sellerReport?.report.map(g=>({value:g.total_sales_amount,name:g.seller_name}))||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11},labelLine:{lineStyle:{color:"#6b7280"}}}],color:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"]},h={title:{text:"  ",textStyle:{fontSize:18,fontWeight:"bold",color:"#374151",fontFamily:"Vazir, Tahoma, sans-serif"},left:"center",top:20},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12}},grid:{left:"3%",right:"4%",bottom:"15%",top:"25%",containLabel:!0},xAxis:{type:"category",data:n.sellerReport?.report.flatMap(g=>g.top_products).sort((g,v)=>v.total_amount-g.total_amount).slice(0,8).map(g=>g.product_title)||[],axisLabel:{rotate:45,fontSize:10,fontFamily:"Vazir, Tahoma, sans-serif",color:"#6b7280"},axisLine:{lineStyle:{color:"#e5e7eb"}}},yAxis:{type:"value",name:"  ()",nameTextStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12,color:"#6b7280"},axisLabel:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11,color:"#6b7280"},axisLine:{lineStyle:{color:"#e5e7eb"}},splitLine:{lineStyle:{color:"#f3f4f6"}}},series:[{name:" ",type:"bar",data:n.sellerReport?.report.flatMap(g=>g.top_products).sort((g,v)=>v.total_amount-g.total_amount).slice(0,8).map(g=>g.total_amount)||[],itemStyle:{color:"#8b5cf6",borderRadius:[4,4,0,0]},barWidth:"60%"}]},p={title:{text:"  ",textStyle:{fontSize:18,fontWeight:"bold",color:"#374151",fontFamily:"Vazir, Tahoma, sans-serif"},left:"center",top:20},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#e5e7eb",borderWidth:1,textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:12}},legend:{orient:"vertical",left:"left",top:"middle",textStyle:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11}},series:[{name:" ",type:"pie",radius:["40%","70%"],center:["60%","50%"],data:n.sellerReport?.report.flatMap(g=>g.top_categories).reduce((g,v)=>{const y=g.find(x=>x.name===v.category_title);return y?y.value+=v.total_amount:g.push({name:v.category_title,value:v.total_amount}),g},[]).sort((g,v)=>v.value-g.value).slice(0,6)||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{fontFamily:"Vazir, Tahoma, sans-serif",fontSize:11},labelLine:{lineStyle:{color:"#6b7280"}}}],color:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"]};return r?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(is,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-red-600",children:e})]}):i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(is,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsx("p",{className:"text-gray-600 text-base",children:"      "})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl border border-blue-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:i.jsx(cn,{className:"w-6 h-6 text-white"})}),i.jsx(ln,{className:"w-5 h-5 text-green-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c(n.sellerReport?.report.length||0)}),i.jsx("div",{className:"mt-2 space-y-1",children:i.jsxs("p",{className:"text-xs text-gray-500",children:[" :"," ",c(n.sellerReport?.report.reduce((g,v)=>g+v.total_calls,0)||0)]})})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl border border-green-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:i.jsx(mm,{className:"w-6 h-6 text-white"})}),i.jsx(ln,{className:"w-5 h-5 text-green-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o(n.sellerReport?.report.reduce((g,v)=>g+v.total_sales_amount,0)||0)}),i.jsx("div",{className:"mt-2 space-y-1",children:i.jsxs("p",{className:"text-xs text-gray-500",children:[" :"," ",c(n.sellerReport?.report.reduce((g,v)=>g+v.successful_orders,0)||0)]})})]}),i.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-100 rounded-xl border border-indigo-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:i.jsx(ln,{className:"w-6 h-6 text-white"})}),i.jsx(ln,{className:"w-5 h-5 text-green-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"  "}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((n.sellerReport?.report||[]).reduce((g,v)=>g+v.conversion_rate,0)/((n.sellerReport?.report||[]).length||1)).toFixed(1),"%"]}),i.jsx("div",{className:"mt-2 space-y-1",children:i.jsxs("p",{className:"text-xs text-gray-500",children:[" :"," ",((n.sellerReport?.report||[]).reduce((g,v)=>g+v.performance_score,0)/((n.sellerReport?.report||[]).length||1)).toFixed(1)]})})]}),i.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-100 rounded-xl border border-teal-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-teal-500 rounded-xl flex items-center justify-center",children:i.jsx(S8,{className:"w-6 h-6 text-white"})}),i.jsx(ln,{className:"w-5 h-5 text-green-600"})]}),i.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"  "}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c(n.sellerReport?.report.reduce((g,v)=>g+v.total_weight_sold,0)||0)," ",""]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:i.jsx(lu,{option:u,style:{height:"400px"},opts:{renderer:"svg"}})}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:i.jsx(lu,{option:d,style:{height:"400px"},opts:{renderer:"svg"}})}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:i.jsx(lu,{option:h,style:{height:"400px"},opts:{renderer:"svg"}})}),i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:i.jsx(lu,{option:p,style:{height:"400px"},opts:{renderer:"svg"}})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-all duration-300",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),i.jsx("div",{className:"space-y-3",children:n.sellerReport?.report.sort((g,v)=>v.total_sales_amount-g.total_sales_amount).map((g,v)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-blue-50 hover:to-indigo-50 transition-all duration-300",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white text-sm font-bold shadow-md",children:v+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-900",children:g.seller_name}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4 mt-1",children:[i.jsxs("p",{className:"text-xs text-gray-500",children:[i.jsx(w8,{className:"w-3 h-3 inline ml-1"}),g.total_calls," "]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[i.jsx(cn,{className:"w-3 h-3 inline ml-1"}),g.unique_customers," "]})]})]})]}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-green-600",children:o(g.total_sales_amount)}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mt-1",children:[i.jsxs("p",{className:"text-xs text-gray-500",children:[" : ",g.conversion_rate.toFixed(1),"%"]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",g.performance_score]})]})]})]},g.seller_id))})]})]})}const ZP=[{id:"customers",label:"",icon:cn,color:"text-blue-600",path:"/manage/customers",children:[{id:"customers-list",label:" ",icon:cn,color:"text-blue-600",path:"/manage/customers"},{id:"customers-by-debt",label:" ",icon:gl,color:"text-red-600",path:"/manage/customers/by-debt"},{id:"customers-report",label:" ",icon:sS,color:"text-green-600",path:"/manage/customers/report"}]},{id:"orders",label:"",icon:Ir,color:"text-blue-600",path:"/manage/orders"},{id:"order-history",label:" ",icon:Pr,color:"text-green-600",path:"/manage/order-history"},{id:"payment-history",label:" ",icon:Ot,color:"text-purple-600",path:"/manage/payment-history"},{id:"invoices",label:"",icon:Ba,color:"text-orange-600",path:"/manage/invoices"},{id:"invoice-history",label:" ",icon:Pr,color:"text-orange-600",path:"/manage/invoice-history"},{id:"cargo-history",label:" ",icon:nt,color:"text-indigo-600",path:"/manage/cargo-history"},{id:"customer-requests",label:" ",icon:kC,color:"text-pink-600",path:"/manage/customer-requests"},{id:"return-requests",label:"  ",icon:Pr,color:"text-rose-600",path:"/manage/return-requests"},{id:"categories",label:"",icon:As,color:"text-teal-600",path:"/manage/categories"},{id:"products",label:"",icon:nt,color:"text-cyan-600",path:"/manage/products"},{id:"warehouses",label:" ",icon:yh,color:"text-amber-600",path:"/manage/warehouses"},{id:"capillary-sales-lines",label:"  ",icon:ln,color:"text-purple-600",path:"/manage/capillary-sales-lines"},{id:"stats",label:"",icon:is,color:"text-red-600",path:"/manage/stats",children:[{id:"stats-customers",label:" ",icon:cn,color:"text-blue-600",path:"/manage/stats/customers"},{id:"stats-orders",label:" ",icon:Ir,color:"text-green-600",path:"/manage/stats/orders"},{id:"stats-sellers",label:" ",icon:is,color:"text-purple-600",path:"/manage/stats/sellers"}]},{id:"tickets",label:"",icon:ss,color:"text-indigo-600",path:"/manage/tickets"},{id:"wallets",label:" ",icon:wr,color:"text-purple-600",path:"/manage/wallets"},{id:"wallet-history",label:"  ",icon:wr,color:"text-yellow-600",path:"/manage/wallet-history"},{id:"profiles",label:" ",icon:ol,color:"text-teal-600",path:"/manage/profiles",children:[{id:"profiles-employees",label:"",icon:cn,color:"text-blue-600",path:"/manage/profiles/employees"},{id:"profiles-others",label:" ",icon:ol,color:"text-green-600",path:"/manage/profiles/others"}]},{id:"logs",label:"  ",icon:Fx,color:"text-slate-600",path:"/manage/logs"},{id:"checks",label:"",icon:Ot,color:"text-teal-600",path:"/manage/checks"},{id:"reminders",label:"",icon:Yx,color:"text-emerald-600",path:"/manage/reminders"}];function Nbe({onLogout:r}){const[t,e]=I.useState(!1),a=Wh(),n=Je(),s=(h,p=!1)=>p?a.pathname===h:a.pathname===h||a.pathname.startsWith(h+"/"),l=h=>h.children?h.children.some(p=>s(p.path,!0)):!1,o=()=>{const h=new Set;return ZP.forEach(p=>{p.children&&l(p)&&h.add(p.path)}),h},[c,u]=I.useState(o());I.useEffect(()=>{u(o())},[a.pathname]);const d=(h,p)=>{p?u(g=>{const v=new Set(g);return v.has(h)?v.delete(h):v.add(h),v}):(n(h),e(!1))};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"lg:hidden fixed top-4 right-4 z-50",children:i.jsx("button",{onClick:()=>e(!0),className:"p-3 bg-white rounded-lg shadow-md border border-gray-200",children:i.jsx(_8,{className:"w-7 h-7 text-gray-600"})})}),i.jsx("div",{className:`fixed inset-y-0 right-0 z-40 w-80 bg-white border-l border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${t?"translate-x-0":"translate-x-full"}`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(is,{className:"w-7 h-7 text-white"})}),i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:" "})]}),i.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-6 h-6 text-gray-600"})})]}),i.jsx("nav",{className:"flex-1 px-6 py-8 space-y-2 overflow-y-auto",children:ZP.map(h=>{const p=h.icon,g=!!h.children,v=c.has(h.path),y=s(h.path)||l(h);return i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>d(h.path,g),className:`w-full flex items-center justify-between space-x-reverse space-x-4 px-6 py-4 rounded-xl transition-all duration-200 group ${y?"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 shadow-sm":"hover:bg-gray-50 hover:shadow-sm"}`,children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsx(p,{className:`w-6 h-6 transition-colors ${y?h.color:"text-gray-500 group-hover:text-gray-700"}`}),i.jsx("span",{className:`text-base font-semibold transition-colors ${y?"text-gray-900":"text-gray-600 group-hover:text-gray-800"}`,children:h.label})]}),g&&i.jsx(i.Fragment,{children:v?i.jsx(HW,{className:"w-5 h-5 text-gray-400"}):i.jsx(LC,{className:"w-5 h-5 text-gray-400"})})]}),g&&v&&i.jsx("div",{className:"mr-8 mt-2 space-y-1",children:h.children?.map(x=>{const b=x.icon,N=s(x.path,!0);return i.jsxs("button",{onClick:()=>d(x.path),className:`w-full flex items-center space-x-reverse space-x-3 px-5 py-3 rounded-lg transition-all duration-200 group ${N?"bg-gradient-to-r from-blue-100 to-purple-100 border border-blue-300 shadow-sm":"hover:bg-gray-100"}`,children:[i.jsx(b,{className:`w-5 h-5 transition-colors ${N?x.color:"text-gray-400 group-hover:text-gray-600"}`}),i.jsx("span",{className:`text-sm font-medium transition-colors ${N?"text-gray-900 font-bold":"text-gray-600 group-hover:text-gray-800"}`,children:x.label})]},x.id)})})]},h.id)})}),i.jsx("div",{className:"p-6 border-t border-gray-200",children:i.jsxs("button",{onClick:r,className:"w-full flex items-center space-x-reverse space-x-4 px-6 py-4 text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 group",children:[i.jsx(b8,{className:"w-6 h-6"}),i.jsx("span",{className:"text-base font-semibold",children:"  "})]})})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>e(!1)})]})}function jbe(){const r=Je(),{id:t}=sr(),e=I.useRef(null),a=I.useRef(null),[n,s]=I.useState(null),[l,o]=I.useState([]),[c,u]=I.useState(!0),[d,h]=I.useState(""),[p,g]=I.useState(""),[v,y]=I.useState(!1),[x,b]=I.useState([]),[N,w]=I.useState(!1),[S,T]=I.useState([]),[A,C]=I.useState(!1),[M,R]=I.useState(!1),[k,L]=I.useState(""),[O,z]=I.useState(!1),[U,H]=I.useState(!1);I.useEffect(()=>{t&&(F(),Y())},[t]),I.useEffect(()=>{P()},[l]);const P=()=>{e.current?.scrollIntoView({behavior:"smooth"})},F=async()=>{if(t)try{u(!0),h("");const le=await Es.getTicketById(t);s(le)}catch(le){console.error("Error fetching ticket details:",le),h("    ")}finally{u(!1)}},Y=async()=>{if(t)try{const le=await Es.getTicketMessages(t,{});o(le.data||[])}catch(le){console.error("Error fetching ticket messages:",le)}},X=async()=>{try{const le=await _m.getAllEmployees();T(le||[])}catch(le){console.error("Error fetching employees:",le)}},q=async()=>{if(!(!t||!k))try{R(!0),await Es.assignTicket(t,k),await F(),C(!1),L("")}catch(le){console.error("Error assigning ticket:",le),alert("   ")}finally{R(!1)}},G=async le=>{if(!(!t||!n||le===n.status))try{H(!0),await Es.updateTicketStatus(t,le),await F(),z(!1)}catch(ze){console.error("Error updating ticket status:",ze),alert("    ")}finally{H(!1)}},$=async le=>{if(!(!le||le.length===0))try{w(!0);const ze=Array.from(le),$e=await Promise.all(ze.map(async ot=>{let Rt;return ot.type.startsWith("image/")&&(Rt=URL.createObjectURL(ot)),{id:`${Date.now()}-${Math.random()}`,file:ot,preview:Rt}}));b(ot=>[...ot,...$e])}catch(ze){console.error("Error processing files:",ze)}finally{w(!1)}},Z=le=>{b(ze=>{const $e=ze.find(ot=>ot.id===le);return $e?.preview&&URL.revokeObjectURL($e.preview),ze.filter(ot=>ot.id!==le)})},te=async()=>{if(!(!t||!p.trim()&&x.length===0))try{y(!0);let le=[];x.length>0&&(le=(await ku.uploadFiles(x.map(Rt=>Rt.file))).map(Rt=>Rt.id));const ze={message:p.trim()||"",attachment_ids:le.length>0?le:void 0},$e=await Es.replyTicket(t,ze);if($e.message){const ot={id:$e.message.id,ticket_id:t,sender_type:$e.message.sender_type,employee_id:$e.message.employee_id??$e.message.employee?.id??null,person_id:$e.message.person_id??$e.message.person?.id??null,message:$e.message.message,created_at:$e.message.created_at,updated_at:$e.message.created_at,deleted_at:null,employee:$e.message.employee??null,person:$e.message.person??null,attachments:$e.message.attachments||[]};o(Rt=>[...Rt,ot])}$e.ticket&&n&&s({...n,status:$e.ticket.status,updated_at:new Date().toISOString()}),x.forEach(ot=>{ot.preview&&URL.revokeObjectURL(ot.preview)}),g(""),b([])}catch(le){console.error("Error replying to ticket:",le),alert("   ")}finally{y(!1)}},me=[{value:"OPEN",label:""},{value:"WAITING_CUSTOMER",label:"  "},{value:"WAITING_SUPPORT",label:"  "},{value:"CLOSED",label:" "},{value:"RESOLVED",label:" "},{value:"REOPENED",label:" "}],Ce=le=>({OPEN:"",WAITING_CUSTOMER:"  ",WAITING_SUPPORT:"  ",CLOSED:" ",RESOLVED:" ",REOPENED:" "})[le]||le,Ve=le=>({OPEN:"bg-green-100 text-green-800",WAITING_CUSTOMER:"bg-blue-100 text-blue-800",WAITING_SUPPORT:"bg-purple-100 text-purple-800",CLOSED:"bg-gray-100 text-gray-800",RESOLVED:"bg-green-100 text-green-800",REOPENED:"bg-yellow-100 text-yellow-800"})[le]||"bg-gray-100 text-gray-800",Ee=le=>({LOW:"",NORMAL:"",HIGH:"",URGENT:""})[le]||le,be=le=>({LOW:"bg-blue-100 text-blue-800",NORMAL:"bg-yellow-100 text-yellow-800",HIGH:"bg-orange-100 text-orange-800",URGENT:"bg-red-100 text-red-800"})[le]||"bg-gray-100 text-gray-800",He=le=>({PERSONAL:"",CORPORATE:""})[le]||le,Se=le=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[le]||le,Ie=le=>le.sender_type==="EMPLOYEE"||le.employee_id!==null,ft=le=>le.employee?`${le.employee.profile.first_name} ${le.employee.profile.last_name}`:le.person?`${le.person.profile.first_name} ${le.person.profile.last_name}`:"";return c?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):d||!n?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:d||"  "}),i.jsx("button",{onClick:()=>r("/manage/tickets"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"   "})]}):i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsx("button",{onClick:()=>r("/manage/tickets"),className:"flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:i.jsx(Ut,{className:"w-5 h-5 text-gray-600"})}),i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(ss,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.subject}),i.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[" #",n.id.substring(0,8)]})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:()=>{C(!0),X()},className:"inline-flex items-center justify-center px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors text-sm font-semibold space-x-reverse space-x-2",children:[i.jsx(t$,{className:"w-4 h-4"}),i.jsx("span",{children:n.assigned_to?" ":"  "})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>z(!O),disabled:U,className:`inline-flex items-center rounded-full px-4 py-2 text-sm font-semibold transition-all duration-200 hover:shadow-md ${Ve(n.status)} ${U?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[i.jsx("span",{children:Ce(n.status)}),i.jsx(LC,{className:"w-4 h-4 mr-2"})]}),O&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>z(!1)}),i.jsx("div",{className:"absolute left-0 top-full mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden",children:i.jsx("div",{className:"py-2",children:me.map(le=>i.jsx("button",{onClick:()=>{le.value!==n.status&&G(le.value)},disabled:le.value===n.status||U,className:`w-full text-right px-4 py-3 text-sm font-semibold transition-colors duration-200 ${le.value===n.status?"bg-emerald-50 text-emerald-700 cursor-default":"text-gray-700 hover:bg-gray-50 cursor-pointer"} ${U?"opacity-50 cursor-not-allowed":""}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:le.label}),le.value===n.status&&i.jsx("span",{className:"text-emerald-600",children:""})]})},le.value))})})]})]}),i.jsx("span",{className:`inline-flex items-center rounded-full px-4 py-2 text-sm font-semibold ${be(n.priority)}`,children:Ee(n.priority)})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx(_t,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:":"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n.customer.title})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:":"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n.customer.code})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:":"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:He(n.customer.type)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Se(n.customer.category)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n.customer?.capillary_sales_line?.title||""})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx(ss,{className:"w-5 h-5 text-gray-600"}),i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n.creator_person?`${n.creator_person.profile.first_name} ${n.creator_person.profile.last_name}`:""})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"  :"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n.assigned_to?`${n.assigned_to.profile.first_name} ${n.assigned_to.profile.last_name}`:" "})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:_e(n.created_at)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:" :"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:_e(n.updated_at)})]}),n.closed_at&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"  :"}),i.jsx("span",{className:"text-sm font-semibold text-gray-900",children:_e(n.closed_at)})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden flex flex-col",style:{height:"600px"},children:[i.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx(ss,{className:"w-5 h-5 text-gray-600"}),i.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:["  (",l.length,")"]})]})}),i.jsxs("div",{ref:a,className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar",children:[l.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx(ss,{className:"w-16 h-16 text-gray-300 mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"    "})]}):l.map(le=>{const ze=Ie(le),$e=ft(le);return i.jsxs("div",{className:`flex items-start space-x-reverse space-x-3 ${ze?"justify-start":"justify-end"}`,children:[ze&&i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center flex-shrink-0 shadow-md",children:i.jsx(kC,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:`max-w-[75%] rounded-2xl p-4 shadow-sm ${ze?"bg-emerald-50 border border-emerald-200":"bg-gray-100 border border-gray-200"}`,children:[i.jsx("div",{className:"mb-2",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-1",children:[i.jsx("p",{className:"text-sm font-bold text-gray-900",children:$e}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-semibold ${ze?"bg-emerald-200 text-emerald-800":"bg-gray-200 text-gray-800"}`,children:ze?"":""})]})}),i.jsx("p",{className:"text-sm text-gray-800 mb-2 whitespace-pre-wrap",children:le.message}),le.attachments&&le.attachments.length>0&&i.jsx("div",{className:"mt-3 space-y-2",children:le.attachments.map(ot=>{const Rt=lr(ot.url)||ot.url,or=lr(ot.thumbnail)||ot.thumbnail||Rt,Qr=ot.url.match(/\.(jpg|jpeg|png|gif|webp)$/i)||ot.thumbnail;return i.jsx("div",{className:"border border-gray-300 rounded-lg p-2 bg-white",children:Qr?i.jsx("a",{href:Rt,target:"_blank",rel:"noopener noreferrer",className:"block",children:i.jsx("img",{src:or,alt:"",className:"w-full h-auto max-h-48 object-contain rounded",onError:Vr=>{const gn=Vr.target;gn.style.display="none"}})}):i.jsxs("a",{href:Rt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-reverse space-x-2 text-sm text-indigo-600 hover:text-indigo-800",children:[i.jsx(Lg,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})},ot.id)})}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:_e(le.created_at)})]}),!ze&&i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-500 to-gray-600 flex items-center justify-center flex-shrink-0 shadow-md",children:i.jsx(_t,{className:"w-5 h-5 text-white"})})]},le.id)}),i.jsx("div",{ref:e})]}),n.status!=="CLOSED"&&i.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[x.length>0&&i.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["   (",x.length,")"]})}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:x.map(le=>i.jsx("div",{className:"relative border border-gray-300 rounded-lg p-2 bg-white group",children:le.preview?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:le.preview,alt:le.file.name,className:"w-full h-24 object-cover rounded"}),i.jsx("button",{onClick:()=>Z(le.id),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(St,{className:"w-3 h-3"})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-24",children:[i.jsx(Lg,{className:"w-6 h-6 text-gray-400 mb-1"}),i.jsx("p",{className:"text-xs text-gray-600 truncate w-full text-center",children:le.file.name}),i.jsx("button",{onClick:()=>Z(le.id),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(St,{className:"w-3 h-3"})})]})},le.id))})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("label",{className:"inline-flex items-center justify-center px-4 py-2 bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded-lg cursor-pointer transition-colors",children:[i.jsx(Rs,{className:"w-4 h-4 ml-2 text-gray-700"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),i.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:le=>$(le.target.files),disabled:N})]})}),i.jsxs("div",{className:"flex items-end space-x-reverse space-x-3",children:[i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:p,onChange:le=>g(le.target.value),onKeyDown:le=>{le.key==="Enter"&&!le.shiftKey&&(le.preventDefault(),!v&&(p.trim()||x.length>0)&&te())},placeholder:"    ...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",rows:3})}),i.jsxs("button",{onClick:te,disabled:!p.trim()&&x.length===0||v||N,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-reverse space-x-2",children:[v||N?i.jsx(Ae,{className:"w-4 h-4 animate-spin"}):i.jsx(IC,{className:"w-4 h-4"}),i.jsx("span",{children:v||N?"  ...":""})]})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 shadow-xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"   "}),i.jsx("button",{onClick:()=>{C(!1),L("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:k,onChange:le=>L(le.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:M,children:[i.jsx("option",{value:"",children:"   ..."}),S.map(le=>i.jsxs("option",{value:le.id,children:[le.profile.first_name," ",le.profile.last_name]},le.id))]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("button",{onClick:q,disabled:!k||M,className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:M?"  ...":" "}),i.jsx("button",{onClick:()=>{C(!1),L("")},disabled:M,className:"px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:""})]})]})})]})}const wbe=r=>({OPEN:"",WAITING_CUSTOMER:"  ",WAITING_SUPPORT:"  ",CLOSED:" ",RESOLVED:" ",REOPENED:" "})[r]||r,Sbe=r=>({OPEN:"bg-green-100 text-green-800",WAITING_CUSTOMER:"bg-blue-100 text-blue-800",WAITING_SUPPORT:"bg-purple-100 text-purple-800",CLOSED:"bg-gray-100 text-gray-800",RESOLVED:"bg-green-100 text-green-800",REOPENED:"bg-yellow-100 text-yellow-800"})[r]||"bg-gray-100 text-gray-800",Cbe=r=>({LOW:"",NORMAL:"",HIGH:"",URGENT:""})[r]||r,Tbe=r=>({LOW:"bg-blue-100 text-blue-800",NORMAL:"bg-yellow-100 text-yellow-800",HIGH:"bg-orange-100 text-orange-800",URGENT:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800";function Abe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState(""),[x,b]=I.useState(""),[N,w]=I.useState(""),[S,T]=I.useState(""),[A,C]=I.useState([]),[M,R]=I.useState([]);I.useEffect(()=>{k(),L(),O()},[u]),I.useEffect(()=>{d(1),k()},[p,v,x,N,S]);const k=async()=>{try{n(!0),l("");const H={page:u,"page-size":h};v&&(H.status=v),x&&(H.priority=x),N&&(H.customer_id=N),S&&(H.assigned_to_id=S);const P=await Es.getTickets(H);e(P.data||[]),c(P.count||0)}catch(H){console.error("Error fetching tickets:",H),l(H.response?.data?.message||"    ")}finally{n(!1)}},L=async()=>{try{const H=await gr.getAllCustomers();C(H.data||[])}catch(H){console.error("Error fetching customers:",H)}},O=async()=>{try{const H=await _m.getAllEmployees();R(Array.isArray(H)?H:[])}catch(H){console.error("Error fetching employees:",H)}},z=H=>{d(H)},U=()=>{let H=0;return p&&H++,v&&H++,x&&H++,N&&H++,S&&H++,H};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(ss,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o,"   ",U()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:H=>g(H.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:H=>y(H.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"OPEN",children:""}),i.jsx("option",{value:"WAITING_CUSTOMER",children:"  "}),i.jsx("option",{value:"WAITING_SUPPORT",children:"  "}),i.jsx("option",{value:"CLOSED",children:" "}),i.jsx("option",{value:"RESOLVED",children:" "}),i.jsx("option",{value:"REOPENED",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:x,onChange:H=>b(H.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"LOW",children:""}),i.jsx("option",{value:"NORMAL",children:""}),i.jsx("option",{value:"HIGH",children:""}),i.jsx("option",{value:"URGENT",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:N,onChange:H=>w(H.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:""}),A.map(H=>i.jsxs("option",{value:H.id,children:[H.title," (: ",H.code,")"]},H.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  "}),i.jsxs("select",{value:S,onChange:H=>T(H.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:""}),M.map(H=>i.jsxs("option",{value:H.id,children:[H.profile.first_name," ",H.profile.last_name]},H.id))]})]})]}),U()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[U(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),b(""),w(""),T(""),d(1)},className:"text-sm text-indigo-600 hover:text-indigo-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-indigo-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"  "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(H=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/tickets/${H.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:H.subject}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700",children:[H.customer.title," (: ",H.customer.code,")"]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:H.creator_person?`${H.creator_person.profile.first_name} ${H.creator_person.profile.last_name}`:"-"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:H.assigned_to?`${H.assigned_to.profile.first_name} ${H.assigned_to.profile.last_name}`:" "}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Sbe(H.status)}`,children:wbe(H.status)})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Tbe(H.priority)}`,children:Cbe(H.priority)})}),i.jsxs("td",{className:"px-4 py-4 text-sm text-gray-700",children:[H.messages_count||0," "]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(H.updated_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:P=>{P.stopPropagation(),r(`/manage/tickets/${H.id}`)},className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors text-sm font-semibold",children:""})})]},H.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(ss,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:U()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:z})]})}function Ebe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState([]),[l,o]=I.useState(!0),[c,u]=I.useState(!1),[d,h]=I.useState("");I.useEffect(()=>{t&&(p(),g())},[t]);const p=async()=>{if(t)try{const x=await Us.getWarehouseById(t);a(x)}catch(x){console.error("Error fetching warehouse details:",x)}},g=async()=>{if(t)try{o(!0),h("");const x=await Oo.getProductsByWarehouse(t),b=(Array.isArray(x)?x:[]).map(N=>({id:N.id,title:N.title,code:N.code,retail_price:N.retail_price||0,wholesale_price:N.wholesale_price||0,online_price:N.online_price||0}));s(b)}catch(x){console.error("Error fetching products:",x),h("   ")}finally{o(!1)}},v=(x,b,N)=>{let w=N.replace(/[^\d-]/g,"");const S=["","","","","","","","","",""],T=["0","1","2","3","4","5","6","7","8","9"];S.forEach((C,M)=>{w=w.replace(new RegExp(C,"g"),T[M])});const A=w===""?0:parseFloat(w)||0;s(C=>C.map(M=>M.id===x?{...M,[b]:A}:M))},y=async()=>{if(t)try{u(!0),h("");const x=n.map(b=>({id:b.id,retail_price:b.retail_price||0,wholesale_price:b.wholesale_price||0,online_price:b.online_price||0}));await Oo.updateProductPrices(t,x),r(`/manage/warehouses/${t}`)}catch(x){console.error("Error updating prices:",x),h("   ")}finally{u(!1)}};return t?l?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("button",{onClick:()=>r(`/manage/warehouses/${t}`),className:"w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-xl flex items-center justify-center transition-all",children:i.jsx(Ut,{className:"w-5 h-5 text-gray-700"})}),i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(mm,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e?.name||"","  ",n.length," "]})]})]}),i.jsx("button",{onClick:y,disabled:c,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold flex items-center space-x-reverse space-x-2",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(sb,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})})]})}),d&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:d})}),n.length===0?i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"   "})]}):i.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"#"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map((x,b)=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 font-semibold text-right",children:ih(b+1)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 font-semibold text-right",children:ih(x.code)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 font-semibold text-right",children:x.title}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",inputMode:"numeric",value:x.retail_price?ih(x.retail_price):"",onChange:N=>v(x.id,"retail_price",N.target.value),placeholder:"0",dir:"ltr",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-right text-sm font-semibold bg-white",style:{direction:"ltr",textAlign:"right"}}),i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-gray-500 font-medium",children:""})]})}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",inputMode:"numeric",value:x.wholesale_price?ih(x.wholesale_price):"",onChange:N=>v(x.id,"wholesale_price",N.target.value),placeholder:"0",dir:"ltr",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-right text-sm font-semibold bg-white",style:{direction:"ltr",textAlign:"right"}}),i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-gray-500 font-medium",children:""})]})}),i.jsx("td",{className:"px-4 py-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",inputMode:"numeric",value:x.online_price?ih(x.online_price):"",onChange:N=>v(x.id,"online_price",N.target.value),placeholder:"0",dir:"ltr",className:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-right text-sm font-semibold bg-white",style:{direction:"ltr",textAlign:"right"}}),i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-gray-500 font-medium",children:""})]})})]},x.id))})]})})})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:"   "}),i.jsx("button",{onClick:()=>r("/manage/warehouses"),className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]})}function Dbe(){const r=Je(),[t]=MC(),[e,a]=I.useState(!0),[n,s]=I.useState(!1),[l,o]=I.useState(""),[c,u]=I.useState(null),[d,h]=I.useState(null),[p,g]=I.useState(null),[v,y]=I.useState(null),[x,b]=I.useState(null),[N,w]=I.useState(null);I.useEffect(()=>{S()},[]);const S=async()=>{try{a(!0);const A=t.get("invoice_id"),C=t.get("payment_transaction_id"),M=t.get("success"),R=t.get("message"),k=t.get("ref_id"),L=t.get("order_id"),O=t.get("amount_paid"),z=t.get("remaining_amount"),U=t.get("invoice_fully_paid"),H=t.get("payment_id"),P=t.get("invoice_code"),F=t.get("card_pan"),Y=t.get("already_verified"),X=t.get("cancelled");if(M!==null&&R&&A){if(s(M==="true"),o(decodeURIComponent(R)),y(A),L)h(L);else try{const te=await Ig.getInvoiceById(A);te.order?.id&&h(te.order.id),te.order?.customer_request_id&&g(te.order.customer_request_id)}catch(te){console.error("Error fetching invoice for order_id:",te)}k&&u(k),O&&b(parseFloat(O)),a(!1);return}if(!A||!C){s(!1),o("   "),a(!1);return}const q=t.get("Authority"),G=t.get("Status"),$=t.get("trackId");let Z;if(q&&G!==null)Z=await un.invoiceZarinpalCallback(A,C,q,G||"");else if($)Z=await un.invoiceZibalCallback(A,C,parseInt($));else{s(!1),o("   "),a(!1);return}if(s(Z.success),o(Z.message),u(Z.ref_id),h(Z.order_id),y(Z.invoice_id),b(Z.amount_paid),w(Z.wallet_balance_after),Z.invoice_id&&!p)try{const te=await Ig.getInvoiceById(Z.invoice_id);te.order?.customer_request_id&&g(te.order.customer_request_id)}catch(te){console.error("Error fetching invoice for request_id:",te)}}catch(A){console.error("Error verifying payment:",A),s(!1),o(A.response?.data?.message||"    ")}finally{a(!1)}},T=()=>{localStorage.removeItem("invoice_payment_callback"),sessionStorage.setItem("wallet_refresh_needed","true"),r(p?`/user/requests/${p}`:"/user/requests")};return e?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-50 to-orange-50",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-12 max-w-md w-full mx-4",children:i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx(Ae,{className:"w-20 h-20 text-amber-600 animate-spin"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"   ..."}),i.jsx("p",{className:"text-gray-600 text-center",children:"  "})]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-50 to-orange-50 p-4",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-12 max-w-md w-full",children:i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center ${n?"bg-green-100":"bg-red-100"}`,children:n?i.jsx(us,{className:"w-16 h-16 text-green-600"}):i.jsx(xi,{className:"w-16 h-16 text-red-600"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:`text-3xl font-bold mb-3 ${n?"text-green-600":"text-red-600"}`,children:n?"  !":" "}),i.jsx("p",{className:"text-gray-600 text-lg mb-4",children:l}),n&&i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 mt-4 border-2 border-green-200 space-y-2",children:[c&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" :"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:c})]}),x!==null&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"  :"}),i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[new Intl.NumberFormat("fa-IR").format(x)," "]})]}),N!==null&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"     :"}),i.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[new Intl.NumberFormat("fa-IR").format(N)," ",""]})]})]})]}),i.jsxs("button",{onClick:T,className:"w-full px-6 py-4 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-xl font-semibold hover:from-amber-700 hover:to-orange-700 transition-all shadow-lg flex items-center justify-center space-x-reverse space-x-2",children:[i.jsx(yu,{className:"w-5 h-5"}),i.jsx("span",{children:p||d?"   ":"  "})]})]})})})}function Mbe(){const r=Je(),{orderId:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[p,g]=I.useState("zarinpal");I.useEffect(()=>{t&&v()},[t]);const v=async()=>{if(t)try{s(!0),o("");const w=await un.getInvoicePaymentInfo(t);a(w)}catch(w){console.error("Error fetching payment info:",w),o(w.response?.data?.message||"     ")}finally{s(!1)}},y=async()=>{if(!(!t||!e))try{u(!0),o("");const w=await un.payInvoiceFromWallet(t,{amount:e.remaining_amount});if(w.success){alert("    ");const S=e.request_id;await v(),r(S?`/user/requests/${S}`:"/user/requests")}else o(w.message||"     ")}catch(w){console.error("Error paying from wallet:",w),o(w.response?.data?.message||"     ")}finally{u(!1)}},x=async()=>{if(e)try{h(!0),o("");const w=p==="zarinpal"?await un.initiateInvoiceZarinpalPayment(e.invoice_id,e.remaining_amount):await un.initiateInvoiceZibalPayment(e.invoice_id,e.remaining_amount);w.redirect_url?(localStorage.setItem("invoice_payment_callback","/user/invoice-payment/callback"),window.location.href=w.redirect_url):o("    ")}catch(w){console.error("Error initiating gateway payment:",w),o(w.response?.data?.message||"    ")}finally{h(!1)}},b=w=>({NOT_PAID:" ",PARTIALLY_PAID:" ",PAID:" "})[w]||w,N=w=>({NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800",PAID:"bg-green-100 text-green-800"})[w]||"bg-gray-100 text-gray-800";return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-amber-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l&&!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4 font-semibold",children:l}),i.jsx("button",{onClick:()=>r("/user/requests"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors font-semibold",children:"  "})]}):e?e.payment_status==="PAID"?i.jsx("div",{className:"fade-in font-vazir max-w-4xl mx-auto",children:i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Ba,{className:"w-12 h-12 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"   "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"     "}),i.jsx("button",{onClick:()=>r(`/user/requests/${t}`),className:"px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors font-semibold",children:"   "})]})}):i.jsxs("div",{className:"fade-in font-vazir max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r(`/user/requests/${t}`),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ba,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["  ",e.invoice_code]})]})]})})]}),l&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:l})}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"  "}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ue(e.total_amount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"  "}),i.jsx("p",{className:`text-3xl font-bold ${e.wallet_balance>=0?"text-green-600":"text-red-600"}`,children:ue(e.wallet_balance)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:`text-3xl font-bold ${e.remaining_amount>0?"text-orange-600":"text-green-600"}`,children:ue(e.remaining_amount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold ${N(e.payment_status)}`,children:b(e.payment_status)})]})]})]}),e.remaining_amount>0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),e.can_pay_from_wallet&&i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center",children:i.jsx(wr,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"   "}),i.jsx("p",{className:"text-sm text-gray-600",children:"     "})]})]}),i.jsx("button",{onClick:y,disabled:c,className:"w-full px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all font-bold text-lg flex items-center justify-center space-x-reverse space-x-2 shadow-lg disabled:opacity-50",children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-6 h-6 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(wr,{className:"w-6 h-6"}),i.jsxs("span",{children:[" ",ue(e.remaining_amount),"   "]})]})})]})}),i.jsx("div",{children:i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx(Ot,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"  "}),i.jsx("p",{className:"text-sm text-gray-600",children:e.can_pay_from_wallet?"     ":"    "})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("button",{type:"button",onClick:()=>g("zarinpal"),className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold ${p==="zarinpal"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:""}),i.jsx("button",{type:"button",onClick:()=>g("zibal"),className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold ${p==="zibal"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:""})]})]}),i.jsx("button",{onClick:x,disabled:d,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all font-bold text-lg flex items-center justify-center space-x-reverse space-x-2 shadow-lg disabled:opacity-50",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-6 h-6 animate-spin"}),i.jsx("span",{children:"    ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ot,{className:"w-6 h-6"}),i.jsxs("span",{children:[" ",ue(e.remaining_amount),"  "," ",p==="zarinpal"?"":""]})]})})]})})]})]}):null}function Rbe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{s(!0),o("");const b=await J8.getMyRequestById(t);a(b)}catch(b){console.error("Error fetching request details:",b),o("    ")}finally{s(!1)}},u=b=>({PENDING:" ",APPROVED:" ",REJECTED:" ",CONVERTED_TO_ORDER:"  "})[b]||b,d=b=>{switch(b){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"CONVERTED_TO_ORDER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=b=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[b]||b,p=b=>({SELLER:"",SALES_MANAGER:" ",PROCESSING:" ",INVENTORY:"",ACCOUNTING:"",CARGO:"",PARTIALLY_DELIVERED:" ",DELIVERED:"  ",PARTIALLY_RETURNED:" ",RETURNED:" "})[b]||b,g=b=>({SELLER:"bg-blue-100 text-blue-800",SALES_MANAGER:"bg-purple-100 text-purple-800",PROCESSING:"bg-yellow-100 text-yellow-800",INVENTORY:"bg-indigo-100 text-indigo-800",ACCOUNTING:"bg-green-100 text-green-800",CARGO:"bg-teal-100 text-teal-800",PARTIALLY_DELIVERED:"bg-orange-100 text-orange-800",DELIVERED:"bg-emerald-100 text-emerald-800",PARTIALLY_RETURNED:"bg-red-100 text-red-800",RETURNED:"bg-gray-100 text-gray-800"})[b]||"bg-gray-100 text-gray-800",v=b=>({PAID:" ",NOT_PAID:" ",PARTIALLY_PAID:" "})[b]||b,y=b=>({PAID:"bg-green-100 text-green-800",NOT_PAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800"})[b]||"bg-gray-100 text-gray-800",x=b=>({AT_INVENTORY:" ",FREE_OUR_TRUCK:"   ",FREE_OTHER_SERVICES:"   ",PAID:"   "})[b]||b;return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-orange-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4 font-semibold",children:l||"  "}),i.jsx("button",{onClick:()=>r("/user/requests"),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-semibold",children:"  "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/user/requests"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[" "," ",e.code?`#${e.code}`:e.id.slice(0,8)]}),i.jsxs("p",{className:"text-gray-500",children:[" :"," ",i.jsx("span",{className:"font-semibold text-gray-700",children:_e(e.created_at)})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${d(e.status)}`,children:u(e.status)}),i.jsxs("button",{onClick:c,className:"inline-flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200",children:[i.jsx(Ca,{className:"w-4 h-4 ml-2"}),""]})]})]})]}),l&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:l})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-semibold ${d(e.status)}`,children:u(e.status)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:h(e.payment_method)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.products_count})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),e.request_items&&Array.isArray(e.request_items)&&e.request_items.length>0?i.jsx("div",{className:"space-y-4",children:e.request_items.map((b,N)=>i.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:i.jsxs("div",{className:"flex items-start space-x-reverse space-x-4",children:[b.images&&Array.isArray(b.images)&&b.images.length>0&&i.jsx("div",{className:"flex-shrink-0",children:i.jsx("img",{src:lr(b.images[0].thumbnail||b.images[0].url)||"",alt:b.product_title,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-base font-bold text-gray-900 mb-3",children:b.product_title}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b.product_code})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" ()"}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b.weight})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ue(b.online_price)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-green-600",children:ue(b.total_price)})]})]})]})]})},N))}):i.jsx("p",{className:"text-gray-500 text-center py-8",children:"     "})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.products_count," "]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:ue(e.freight_cost)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-3xl font-bold text-green-600",children:ue(e.total_price)})]}),e.address&&i.jsxs("div",{className:"md:col-span-2 pt-4 border-t border-gray-200",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:""}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:e.address})]})]})]}),e.orders&&Array.isArray(e.orders)&&e.orders.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ir,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" : ",e.orders.length]})]})]})}),i.jsx("div",{className:"space-y-6",children:e.orders.map((b,N)=>i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[" #",b.code]}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["  ",N+1]})]}),b.step==="PARTIALLY_DELIVERED"&&b.payment_status!=="PAID"&&i.jsxs("button",{onClick:()=>r(`/user/orders/${b.id}/invoice/payment`),className:"px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all font-semibold flex items-center space-x-reverse space-x-2 shadow-lg",children:[i.jsx(Ba,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-3",children:[i.jsx(Ch,{className:"w-4 h-4 text-gray-600"}),i.jsx("p",{className:"text-sm font-semibold text-gray-700",children:" "})]}),i.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-semibold ${g(b.step)}`,children:p(b.step)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-3",children:[i.jsx(Ot,{className:"w-4 h-4 text-gray-600"}),i.jsx("p",{className:"text-sm font-semibold text-gray-700",children:" "})]}),i.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-semibold ${y(b.payment_status)}`,children:v(b.payment_status)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-3",children:[i.jsx(kr,{className:"w-4 h-4 text-gray-600"}),i.jsx("p",{className:"text-sm font-semibold text-gray-700",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:x(b.delivery_method)})]}),b.address&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-3",children:[i.jsx(nt,{className:"w-4 h-4 text-gray-600"}),i.jsx("p",{className:"text-sm font-semibold text-gray-700",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b.address})]})]}),b.description&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-2",children:[i.jsx(Pr,{className:"w-4 h-4 text-gray-600"}),i.jsx("p",{className:"text-sm font-semibold text-gray-700",children:""})]}),i.jsx("p",{className:"text-sm text-gray-900",children:b.description})]}),b.invoices&&Array.isArray(b.invoices)&&b.invoices.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h4",{className:"text-lg font-bold text-gray-900",children:["  (",b.invoices.length,")"]}),b.invoices.map((w,S)=>i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h5",{className:"text-base font-semibold text-gray-800",children:[" #",w.code]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["  ",S+1]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsxs("p",{className:"text-base font-semibold text-gray-900",children:["#",w.code]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base font-semibold text-green-600",children:ue(w.amount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"  "}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-sm font-semibold ${y(w.payment_status)}`,children:v(w.payment_status)})]}),w.description&&i.jsxs("div",{className:"md:col-span-3 pt-4 border-t border-blue-200",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base text-gray-900",children:w.description})]})]})]},S))]})]},N))})]})]})}function Lbe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!0),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h]=I.useState(10);I.useEffect(()=>{p()},[o]);const p=async()=>{try{n(!0),l("");const b=await J8.getMyRequests(o,h);e(b.data),d(b.count)}catch(b){console.error("Error fetching my requests:",b),l("   ")}finally{n(!1)}},g=b=>({PENDING:" ",APPROVED:" ",REJECTED:" ",CONVERTED_TO_ORDER:"  "})[b]||b,v=b=>{switch(b){case"PENDING":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"CONVERTED_TO_ORDER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},y=b=>({CASH:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CREDIT:"",WALLET:" ",ONLINE:""})[b]||b,x=b=>{c(b)};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(nt,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u,"   "]})]})]}),i.jsxs("button",{onClick:p,className:"inline-flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200",children:[i.jsx(Ca,{className:"w-4 h-4 ml-2"}),""]})]})}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-orange-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(b=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/user/requests/${b.id}`),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"font-semibold text-gray-900",children:b.code?`#${b.code}`:b.id.slice(0,8)+"..."})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_e(b.created_at)}),i.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[b.products_count," "]}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:y(b.payment_method)}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:"font-semibold text-green-600",children:ue(b.total_price)})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ${v(b.status)}`,children:g(b.status)})}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("button",{onClick:N=>{N.stopPropagation(),r(`/user/requests/${b.id}`)},className:"text-orange-600 hover:text-orange-700 font-semibold text-sm",children:""})})]},b.id))})]})})}),!a&&t.length===0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"   "})]})}),!a&&u>h&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-4",children:i.jsx($t,{currentPage:o,totalPages:Math.ceil(u/h),totalItems:u,itemsPerPage:h,onPageChange:x})})]})}function Ibe(){const[r,t]=I.useState(null),[e,a]=I.useState(!0),[n,s]=I.useState(!1),[l,o]=I.useState({}),[c,u]=I.useState(""),[d,h]=I.useState(!1);I.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0),u("");const x=await gr.getCustomerInfo();t(x),o({title:x.title,description:x.description||void 0,phone:x.phone||void 0,address:x.address||void 0,age:x.age||void 0,is_property_owner:x.is_property_owner||void 0,type:x.category||void 0,category:x.category||void 0})}catch(x){u("   "),console.error(x)}finally{a(!1)}},g=async x=>{x.preventDefault();try{h(!0),u(""),await gr.updateCustomerInfo(l),await p(),s(!1)}catch(b){u("   "),console.error(b)}finally{h(!1)}},v=()=>{s(!1),r&&o({title:r.title,description:r.description||void 0,phone:r.phone||void 0,address:r.address||void 0,age:r.age||void 0,is_property_owner:r.is_property_owner||void 0,type:r.category||void 0,category:r.category||void 0})},y=x=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[x]||x;return e?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-green-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):c&&!r?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4 font-semibold",children:c||"   "}),i.jsx("button",{onClick:p,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:" "})]}):r?i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(RC,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"   "}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"     "})]})]}),n?i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:g,disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 disabled:opacity-50",children:[d?i.jsx(Ae,{className:"w-5 h-5 animate-spin"}):i.jsx(sb,{className:"w-5 h-5"}),i.jsx("span",{children:d?"  ...":""})]}),i.jsxs("button",{onClick:v,disabled:d,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold flex items-center space-x-reverse space-x-2 disabled:opacity-50",children:[i.jsx(St,{className:"w-5 h-5"}),i.jsx("span",{children:""})]})]}):i.jsxs("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(j8,{className:"w-5 h-5"}),i.jsx("span",{children:""})]})]})})}),c&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:c})}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsx("form",{onSubmit:g,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"   "}),n?i.jsx("input",{type:"text",value:l.title||"",onChange:x=>o(b=>({...b,title:x.target.value})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.title})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.code})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:y(r.category)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),n?i.jsx("input",{type:"tel",value:l.phone||"",onChange:x=>o(b=>({...b,phone:x.target.value})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.phone||"-"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),n?i.jsx("textarea",{value:l.address||"",onChange:x=>o(b=>({...b,address:x.target.value})),rows:3,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none"}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.address||"-"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),n?i.jsx("input",{type:"number",value:l.age||"",onChange:x=>o(b=>({...b,age:x.target.value?parseInt(x.target.value):void 0})),min:"0",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.age||"-"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),n?i.jsxs("select",{value:l.is_property_owner?"true":"false",onChange:x=>o(b=>({...b,is_property_owner:x.target.value==="true"})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[i.jsx("option",{value:"false",children:""}),i.jsx("option",{value:"true",children:""})]}):i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-sm font-semibold ${r.is_property_owner?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_property_owner?"":""})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),n?i.jsx("textarea",{value:l.description||"",onChange:x=>o(b=>({...b,description:x.target.value||void 0})),rows:4,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none"}):i.jsx("p",{className:"text-base text-gray-900 bg-gray-50 rounded-lg p-4",children:r.description||"-"})]})]})})]}),r.files&&r.files.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:""}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.files.map(x=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:lr(x.thumbnail)||lr(x.url)||"",alt:"",className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 hover:border-green-300 transition-colors"}),i.jsx("a",{href:lr(x.url)||"",target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg",children:i.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 text-sm font-semibold",children:""})})]},x.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(r.created_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(r.updated_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:""}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-sm font-semibold ${r.deleted?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:r.deleted?"":""})]})]})]})]}):null}function kbe(){const r=Je(),[t,e]=I.useState(null),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(new Set),[u,d]=I.useState(!1),[h,p]=I.useState(!1),[g,v]=I.useState(!1),[y,x]=I.useState(null),[b,N]=I.useState("1"),[w,S]=I.useState({address:"",payment_method:"WALLET",freight_cost:0});I.useEffect(()=>{T()},[]);const T=async()=>{try{n(!0),l("");const L=await qc.getMyCart();e(L)}catch(L){console.error("Error fetching cart:",L),L.response?.status===404?e(null):l(L.response?.data?.message||"    ")}finally{n(!1)}},A=L=>{x(L),N(Math.floor(L.weight).toString()),v(!0),l("")},C=async()=>{if(!y)return;const L=parseInt(b,10);if(isNaN(L)||L<=0){l("      ");return}if(L===Math.floor(y.weight)){v(!1),x(null);return}try{c(O=>new Set(O).add(y.id)),l(""),await qc.updateCartItem({cart_item_id:y.id,weight:L}),await T(),v(!1),x(null)}catch(O){console.error("Error updating cart item:",O),l(O.response?.data?.message||"   ")}finally{c(O=>{const z=new Set(O);return z.delete(y.id),z})}},M=async L=>{if(confirm("         "))try{c(O=>new Set(O).add(L)),l(""),await qc.removeCartItem(L),await T()}catch(O){console.error("Error removing cart item:",O),l(O.response?.data?.message||"   ")}finally{c(O=>{const z=new Set(O);return z.delete(L),z})}},R=async()=>{if(confirm("         "))try{n(!0),l(""),await qc.clearCart(),e(null)}catch(L){console.error("Error clearing cart:",L),l(L.response?.data?.message||"     ")}finally{n(!1)}},k=async()=>{if(!w.address.trim()){l("    ");return}try{d(!0),l("");const L=await qc.checkout(w);alert("     "),p(!1),e(null),r(`/user/requests/${L.id}`)}catch(L){console.error("Error checking out:",L),l(L.response?.data?.message||"   .    .")}finally{d(!1)}};return a?i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-amber-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):!t||!t.items||t.items.length===0?i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ir,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"   "})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Ir,{className:"w-12 h-12 text-gray-400"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"    "}),i.jsx("p",{className:"text-gray-500 mb-6",children:"         "}),i.jsx("button",{onClick:()=>r("/user/products"),className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold shadow-lg",children:"  "})]})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(Ir,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.items.length,"    "]})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:T,className:"inline-flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200",children:[i.jsx(Ca,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("button",{onClick:R,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-all font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(xh,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]})}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"  "}),i.jsx("div",{className:"space-y-4",children:t.items.map(L=>{const O=o.has(L.id);return i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4 p-4 border-2 border-gray-200 rounded-xl hover:border-amber-300 hover:shadow-md transition-all bg-gray-50",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:L.images&&L.images.length>0?i.jsx("img",{src:lr(L.images[0].thumbnail)||lr(L.images[0].url)||"",alt:L.product_title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:i.jsx(Ir,{className:"w-8 h-8 text-gray-400"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:L.product_title}),i.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[": ",L.product_code]}),i.jsxs("p",{className:"text-sm font-semibold text-emerald-600",children:[ue(L.online_price)," / "]})]}),i.jsxs("div",{className:"flex flex-col items-center space-y-2 min-w-[120px]",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-600 mb-1",children:":"}),O?i.jsx(Ae,{className:"w-5 h-5 text-amber-600 animate-spin mx-auto"}):i.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[Math.floor(L.weight)," "]})]}),i.jsxs("button",{onClick:()=>A(L),disabled:O,className:"px-4 py-2 bg-amber-100 hover:bg-amber-200 text-amber-700 rounded-lg transition-colors disabled:opacity-50 font-semibold text-sm flex items-center space-x-reverse space-x-1",children:[i.jsx(bu,{className:"w-4 h-4"}),i.jsx("span",{children:""})]})]}),i.jsxs("div",{className:"text-left min-w-[140px]",children:[i.jsx("p",{className:"text-xs text-gray-600 mb-1",children:" :"}),i.jsx("p",{className:"text-xl font-bold text-emerald-600",children:ue(L.total_price)})]}),i.jsx("button",{onClick:()=>M(L.id),disabled:O,className:"p-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"  ",children:i.jsx(xh,{className:"w-5 h-5"})})]},L.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-lg p-4 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"text-gray-700 font-semibold",children:"   :"}),i.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:ue(t.total_price)})]}),i.jsxs("button",{onClick:()=>p(!0),className:"w-full px-6 py-4 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all font-bold text-lg flex items-center justify-center space-x-reverse space-x-2 shadow-lg",children:[i.jsx(kr,{className:"w-6 h-6"}),i.jsx("span",{children:" "})]})]})]}),h&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:L=>{L.target===L.currentTarget&&(p(!1),l(""))},children:i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsx("button",{onClick:()=>{p(!1),l("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsx("textarea",{value:w.address,onChange:L=>S(O=>({...O,address:L.target.value})),rows:4,placeholder:"     ...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  *"}),i.jsxs("select",{value:w.payment_method,onChange:L=>S(O=>({...O,payment_method:L.target.value})),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:[i.jsx("option",{value:"WALLET",children:" "}),i.jsx("option",{value:"CASH",children:""}),i.jsx("option",{value:"ONLINE",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),i.jsx("input",{type:"number",value:w.freight_cost,onChange:L=>S(O=>({...O,freight_cost:parseFloat(L.target.value)||0})),min:0,placeholder:"0",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),i.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg p-4 border-2 border-emerald-200",children:i.jsxs("div",{className:"flex items-center justify-between text-lg",children:[i.jsx("span",{className:"text-gray-700 font-semibold",children:" :"}),i.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:ue(t.total_price+w.freight_cost)})]})})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>{p(!1),l("")},disabled:u,className:"px-6 py-3 border-2 border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 font-semibold",children:""}),i.jsx("button",{onClick:k,disabled:u,className:"px-6 py-3 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 transition-all font-semibold flex items-center space-x-reverse space-x-2",children:u?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(kr,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})})]})]})}),g&&y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:L=>{L.target===L.currentTarget&&(v(!1),x(null),l(""))},children:i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:()=>{v(!1),x(null),l("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:y.product_title}),i.jsxs("p",{className:"text-sm text-gray-600",children:[": ",y.product_code]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" () *"}),i.jsx("input",{type:"text",inputMode:"numeric",value:b,onChange:L=>{const O=L.target.value;if(O===""){N("");return}/^\d+$/.test(O)&&parseInt(O,10)>0&&N(O)},onBlur:L=>{const O=parseInt(L.target.value,10);!O||O<1||isNaN(O)?N("1"):N(O.toString())},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-center font-semibold text-lg",autoFocus:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"      "})]}),i.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg p-4 border-2 border-emerald-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:" :"}),i.jsx("span",{className:"text-xl font-bold text-emerald-600",children:ue(y.online_price*(parseInt(b,10)||1))})]})})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>{v(!1),x(null),l("")},disabled:o.has(y.id),className:"px-6 py-3 border-2 border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 font-semibold",children:""}),i.jsx("button",{onClick:C,disabled:o.has(y.id),className:"px-6 py-3 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 transition-all font-semibold flex items-center space-x-reverse space-x-2",children:o.has(y.id)?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsx("span",{children:""})})]})]})})]})}function Obe(){const[r,t]=I.useState([]),[e,a]=I.useState(!1),[n,s]=I.useState(""),[l,o]=I.useState({}),[c,u]=I.useState(null),[d,h]=I.useState(null),[p,g]=I.useState(0);I.useEffect(()=>{v()},[]);const v=async()=>{try{a(!0),s("");const S=await fS.getFavoriteProducts();let T=[];if(Array.isArray(S))T=S;else if(S&&S.data&&Array.isArray(S.data))T=S.data;else{console.warn("Unexpected response structure:",S),t([]),g(0);return}const A=T.map(R=>R.product_id).filter(R=>!!R);if(A.length===0){t([]),g(0);return}const C=[];if(A.length<=10){const R=A.map(L=>hS.getProductById(L).catch(()=>null));(await Promise.all(R)).forEach(L=>{if(L){const O={id:L.id,title:L.title,code:L.code,online_price:L.online_price,temperature_type:L.temperature_type,images:L.images||[],is_favorite:!0};C.push(O)}})}else{let R=1,k=!0;const L=new Set;for(;k&&L.size<A.length;){const z=(await hS.getProducts({page:R,"page-size":100})).data||[];if(z.length===0){k=!1;break}z.forEach(U=>{A.includes(U.id)&&!L.has(U.id)&&(C.push({...U,is_favorite:!0}),L.add(U.id))}),L.size>=A.length||z.length<100?k=!1:R++}}const M=T.map(R=>{const k=C.find(L=>L.id===R.product_id);return k?{...k,favoriteCreatedAt:R.created_at}:null}).filter(R=>R!==null).sort((R,k)=>new Date(k.favoriteCreatedAt).getTime()-new Date(R.favoriteCreatedAt).getTime()).map(({favoriteCreatedAt:R,...k})=>k);t(M),g(M.length)}catch(S){console.error("Error fetching favorites:",S),s(S.response?.data?.message||"   "),t([]),g(0)}finally{a(!1)}},y=async(S,T)=>{T.stopPropagation();try{h(S),s("");const A=await fS.addFavoriteProduct({product_id:S});t(C=>C.map(M=>M.id===S?{...M,is_favorite:A.is_favorite}:M)),A.action==="removed"&&(t(C=>C.filter(M=>M.id!==S)),g(C=>Math.max(0,C-1)))}catch(A){console.error("Error toggling favorite:",A),s(A.response?.data?.message||"    ")}finally{h(null)}},x=(S,T)=>{const A=parseInt(T,10);(T===""||A>0&&!isNaN(A))&&o(C=>({...C,[S]:T===""?1:A}))},b=S=>{const T=l[S]||1;o(A=>({...A,[S]:T+1}))},N=S=>{const T=l[S]||1;T>1&&o(A=>({...A,[S]:T-1}))},w=async S=>{const T=l[S]||1;if(T<=0){s("     ");return}try{u(S),s(""),await qc.addCartItem({product_id:S,weight:T}),o(A=>{const C={...A};return delete C[S],C}),alert("     ")}catch(A){console.error("Error adding to cart:",A),s(A.response?.data?.message||"       ")}finally{u(null)}};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(pg,{className:"w-7 h-7 text-white fill-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[p,"   "]})]})]})})}),n&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:n})}),e&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-red-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!e&&r.length>0&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(S=>i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 group",children:[i.jsxs("div",{className:"relative h-48 bg-gray-100 overflow-hidden",children:[S.images&&S.images.length>0?i.jsx("img",{src:lr(S.images[0].thumbnail)||lr(S.images[0].url)||"",alt:S.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:i.jsx(vx,{className:"w-16 h-16 text-gray-400"})}),i.jsx("button",{onClick:T=>y(S.id,T),disabled:d===S.id,className:`absolute top-2 left-2 p-2 rounded-full transition-all duration-200 ${S.is_favorite?"bg-red-500 text-white":"bg-white/80 text-gray-400 hover:bg-white"} ${d===S.id?"opacity-50 cursor-not-allowed":"hover:scale-110"}`,children:i.jsx(pg,{className:`w-5 h-5 ${S.is_favorite?"fill-current":""} ${d===S.id?"animate-pulse":""}`})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2",children:S.title}),i.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[": ",S.code]}),S.temperature_type&&i.jsx("div",{className:"mb-3",children:i.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold",children:S.temperature_type===fr.COLD?"":S.temperature_type===fr.HOT?"":""})}),S.online_price!==void 0&&S.online_price!==null&&i.jsx("div",{className:"mb-4",children:i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[ue(S.online_price),i.jsx("span",{className:"text-sm text-gray-600 mr-1",children:"/ "})]})}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("button",{onClick:()=>N(S.id),disabled:c===S.id||(l[S.id]||1)<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(N8,{className:"w-5 h-5 text-gray-700"})}),i.jsx("input",{type:"number",min:"1",step:"1",value:l[S.id]||1,onChange:T=>x(S.id,T.target.value),onBlur:T=>{const A=parseInt(T.target.value,10);(!A||A<1)&&o(C=>({...C,[S.id]:1}))},disabled:c===S.id,className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-center font-semibold disabled:opacity-50 disabled:cursor-not-allowed"}),i.jsx("button",{onClick:()=>b(S.id),disabled:c===S.id,className:"w-10 h-10 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Nl,{className:"w-5 h-5 text-gray-700"})})]})]}),i.jsx("button",{onClick:()=>w(S.id),disabled:c===S.id,className:"w-full flex items-center justify-center space-x-reverse space-x-2 px-4 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold",children:c===S.id?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"   ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Nl,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]})})]})]},S.id))}),!e&&r.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(pg,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"     "})]})]})}function Pbe(){const[r,t]=I.useState([]),[e,a]=I.useState(!1),[n,s]=I.useState(""),[l,o]=I.useState(""),[c,u]=I.useState({page:1,"page-size":20}),[d,h]=I.useState({}),[p,g]=I.useState(null),[v,y]=I.useState(null),[x,b]=I.useState(0);I.useEffect(()=>{N()},[c]);const N=async()=>{try{a(!0),s("");const L=await hS.getProducts(c);t(L.data||[]),b(L.count||0)}catch(L){console.error("Error fetching products:",L),s(L.response?.data?.message||"    ")}finally{a(!1)}},w=(L,O)=>{const z=parseInt(O,10);(O===""||z>0&&!isNaN(z))&&h(U=>({...U,[L]:O===""?1:z}))},S=L=>{const O=d[L]||1;h(z=>({...z,[L]:O+1}))},T=L=>{const O=d[L]||1;O>1&&h(z=>({...z,[L]:O-1}))},A=async(L,O)=>{O.stopPropagation();try{y(L),s("");const z=await fS.addFavoriteProduct({product_id:L});t(U=>U.map(H=>H.id===L?{...H,is_favorite:z.is_favorite}:H))}catch(z){console.error("Error toggling favorite:",z),s(z.response?.data?.message||"    ")}finally{y(null)}},C=async L=>{const O=d[L]||1;if(O<=0){s("     ");return}try{g(L),s(""),await qc.addCartItem({product_id:L,weight:O}),h(z=>{const U={...z};return delete U[L],U}),alert("     ")}catch(z){console.error("Error adding to cart:",z),s(z.response?.data?.message||"       ")}finally{g(null)}},M=()=>{u(L=>({...L,page:1,search:l||void 0}))},R=L=>{u(O=>({...O,page:L}))},k=Math.ceil(x/(c["page-size"]||20));return i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(vx,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[x,"  "]})]})]}),i.jsxs("button",{onClick:N,className:"inline-flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200",children:[i.jsx(Ca,{className:"w-4 h-4 ml-2"}),""]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(ZW,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",value:l,onChange:L=>o(L.target.value),onKeyPress:L=>{L.key==="Enter"&&M()},placeholder:" ...",className:"w-full pr-10 pl-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})]}),i.jsx("button",{onClick:M,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all font-semibold shadow-lg",children:""})]})]}),n&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:n})}),e&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!e&&r.length>0&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-6",children:r.map(L=>i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 group",children:[i.jsxs("div",{className:"relative h-48 bg-gray-100 overflow-hidden",children:[L.images&&L.images.length>0?i.jsx("img",{src:lr(L.images[0].thumbnail)||lr(L.images[0].url)||"",alt:L.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:i.jsx(vx,{className:"w-16 h-16 text-gray-400"})}),i.jsx("button",{onClick:O=>A(L.id,O),disabled:v===L.id,className:`absolute top-3 left-3 p-2 rounded-full transition-all duration-200 shadow-lg ${L.is_favorite?"bg-red-500 text-white hover:bg-red-600":"bg-white/90 text-gray-400 hover:bg-white hover:text-red-500"} ${v===L.id?"opacity-50 cursor-not-allowed":"hover:scale-110"}`,children:i.jsx(pg,{className:`w-5 h-5 ${L.is_favorite?"fill-current":""} ${v===L.id?"animate-pulse":""}`})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-2 min-h-[3.5rem]",children:L.title}),i.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[": ",L.code]}),L.temperature_type&&i.jsx("div",{className:"mb-3",children:i.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${L.temperature_type===fr.COLD?"bg-blue-100 text-blue-800":L.temperature_type===fr.HOT?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:L.temperature_type===fr.COLD?"":L.temperature_type===fr.HOT?"":""})}),L.online_price!==void 0&&L.online_price!==null&&i.jsx("div",{className:"mb-4",children:i.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[ue(L.online_price),i.jsx("span",{className:"text-sm text-gray-600 mr-1 font-normal",children:"/ "})]})}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2",children:[i.jsx("button",{onClick:()=>T(L.id),disabled:p===L.id||(d[L.id]||1)<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(N8,{className:"w-5 h-5 text-gray-700"})}),i.jsx("input",{type:"number",min:"1",step:"1",value:d[L.id]||1,onChange:O=>w(L.id,O.target.value),onBlur:O=>{const z=parseInt(O.target.value,10);(!z||z<1)&&h(U=>({...U,[L.id]:1}))},disabled:p===L.id,className:"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-center font-semibold disabled:opacity-50 disabled:cursor-not-allowed"}),i.jsx("button",{onClick:()=>S(L.id),disabled:p===L.id,className:"w-10 h-10 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Nl,{className:"w-5 h-5 text-gray-700"})})]})]}),i.jsx("button",{onClick:()=>C(L.id),disabled:p===L.id,className:"w-full flex items-center justify-center space-x-reverse space-x-2 px-4 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold shadow-lg",children:p===L.id?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"   ..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]})})]})]},L.id))}),!e&&r.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(vx,{className:"w-12 h-12 text-gray-400"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"  "}),i.jsx("p",{className:"text-gray-500",children:"      "})]}),!e&&r.length>0&&k>1&&i.jsx("div",{className:"flex justify-center",children:i.jsx($t,{currentPage:c.page||1,totalPages:k,totalItems:x,itemsPerPage:c["page-size"]||20,onPageChange:R})})]})}function zbe(){const[r,t]=I.useState(null),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(!1),[c,u]=I.useState({}),[d,h]=I.useState(""),[p,g]=I.useState(!1),[v,y]=I.useState(!1);I.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0),h("");const[T,A]=await Promise.all([Nu.getProfileInfo(),Iq.getPeopleInfo()]);t(T),a(A),u({first_name:T.first_name,last_name:T.last_name,email:T.email,mobile:T.mobile,gender:T.gender,birth_date:T.birth_date||void 0,username:T.username||void 0,national_code:T.national_code||void 0})}catch(T){h("   "),console.error(T)}finally{s(!1)}},b=async T=>{T.preventDefault();try{g(!0),h(""),await Nu.updateProfileInfo(c),await x(),o(!1)}catch(A){h("   "),console.error(A)}finally{g(!1)}},N=()=>{o(!1),r&&u({first_name:r.first_name,last_name:r.last_name,email:r.email,mobile:r.mobile,gender:r.gender,birth_date:r.birth_date||void 0,username:r.username||void 0,national_code:r.national_code||void 0})},w=async T=>{if(!(!T.target.files||T.target.files.length===0))try{y(!0);const A=Array.from(T.target.files),C=await ku.uploadFiles(A);C.length>0&&u(M=>({...M,profile_image_id:C[0].id}))}catch(A){console.error("Error uploading file:",A),h("   ")}finally{y(!1)}},S=T=>T?{MALE:"",FEMALE:"",OTHER:""}[T]||T:"-";return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):d&&!r?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4 font-semibold",children:d||"   "}),i.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:" "})]}):r?i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(_t,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"   "})]})]}),l?i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:b,disabled:p||v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2 disabled:opacity-50",children:[p?i.jsx(Ae,{className:"w-5 h-5 animate-spin"}):i.jsx(sb,{className:"w-5 h-5"}),i.jsx("span",{children:p?"  ...":""})]}),i.jsxs("button",{onClick:N,disabled:p||v,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold flex items-center space-x-reverse space-x-2 disabled:opacity-50",children:[i.jsx(St,{className:"w-5 h-5"}),i.jsx("span",{children:""})]})]}):i.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(j8,{className:"w-5 h-5"}),i.jsx("span",{children:""})]})]})})}),d&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:d})}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"relative",children:[r.profile_image?i.jsx("img",{src:lr(r.profile_image.thumbnail)||lr(r.profile_image.url)||"",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg"}):i.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center border-4 border-blue-200 shadow-lg",children:i.jsx(_t,{className:"w-16 h-16 text-gray-400"})}),l&&i.jsxs("label",{className:"absolute bottom-0 left-0 bg-blue-600 text-white p-3 rounded-full cursor-pointer hover:bg-blue-700 transition-colors shadow-lg",children:[v?i.jsx(Ae,{className:"w-5 h-5 animate-spin"}):i.jsx(Rs,{className:"w-5 h-5"}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:w,disabled:v})]})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsx("form",{onSubmit:b,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),l?i.jsx("input",{type:"text",value:c.first_name||"",onChange:T=>u(A=>({...A,first_name:T.target.value})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.first_name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),l?i.jsx("input",{type:"text",value:c.last_name||"",onChange:T=>u(A=>({...A,last_name:T.target.value})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.last_name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),l?i.jsx("input",{type:"email",value:c.email||"",onChange:T=>u(A=>({...A,email:T.target.value})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.email||"-"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.mobile_prefix&&r.mobile?`${r.mobile_prefix}${r.mobile}`:r.mobile||"-"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),l?i.jsxs("select",{value:c.gender||"",onChange:T=>u(A=>({...A,gender:T.target.value||null})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:" "}),i.jsx("option",{value:"MALE",children:""}),i.jsx("option",{value:"FEMALE",children:""}),i.jsx("option",{value:"OTHER",children:""})]}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:S(r.gender)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),l?i.jsx("input",{type:"date",value:c.birth_date?new Date(c.birth_date).toISOString().split("T")[0]:"",onChange:T=>u(A=>({...A,birth_date:T.target.value||void 0})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.birth_date?_e(r.birth_date):"-"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),l?i.jsx("input",{type:"text",value:c.national_code||"",onChange:T=>u(A=>({...A,national_code:T.target.value||void 0})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.national_code||"-"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),l?i.jsx("input",{type:"text",value:c.username||"",onChange:T=>u(A=>({...A,username:T.target.value||void 0})),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):i.jsx("p",{className:"text-base font-semibold text-gray-900",children:r.username||"-"})]})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-sm font-semibold ${r.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.enabled?"":""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-sm font-semibold ${r.mobile_verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:r.mobile_verified?" ":" "})]}),e&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:""}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:e.title||"-"})]})]})]})]}):null}function Bbe(){const r=Je(),{id:t}=sr(),e=I.useRef(null),a=I.useRef(null),[n,s]=I.useState(null),[l,o]=I.useState([]),[c,u]=I.useState(!0),[d,h]=I.useState(""),[p,g]=I.useState(""),[v,y]=I.useState(!1),[x,b]=I.useState([]),[N,w]=I.useState(!1);I.useEffect(()=>{t&&(T(),A())},[t]),I.useEffect(()=>{S()},[l]);const S=()=>{e.current?.scrollIntoView({behavior:"smooth"})},T=async()=>{if(t)try{u(!0),h("");const P=await Es.getTicketById(t);s(P)}catch(P){console.error("Error fetching ticket details:",P),P.response?.status===403?h("        "):P.response?.status===401?h("   .    "):h("    : "+(P.response?.data?.message||P.message))}finally{u(!1)}},A=async()=>{if(t)try{const P=await Es.getTicketMessages(t,{});o(P.data||[])}catch(P){console.error("Error fetching ticket messages:",P)}},C=async P=>{if(!(!P||P.length===0))try{w(!0);const F=Array.from(P),Y=await Promise.all(F.map(async X=>{let q;return X.type.startsWith("image/")&&(q=URL.createObjectURL(X)),{id:`${Date.now()}-${Math.random()}`,file:X,preview:q}}));b(X=>[...X,...Y])}catch(F){console.error("Error processing files:",F)}finally{w(!1)}},M=P=>{b(F=>{const Y=F.find(X=>X.id===P);return Y?.preview&&URL.revokeObjectURL(Y.preview),F.filter(X=>X.id!==P)})},R=async()=>{if(!(!t||!p.trim()&&x.length===0))try{y(!0);let P=[];x.length>0&&(P=(await ku.uploadFiles(x.map(q=>q.file))).map(q=>q.id));const F={message:p.trim()||"",attachment_ids:P.length>0?P:void 0},Y=await Es.replyTicket(t,F);if(Y.message){const X={id:Y.message.id,ticket_id:t,sender_type:Y.message.sender_type,employee_id:Y.message.employee_id??Y.message.employee?.id??null,person_id:Y.message.person_id??Y.message.person?.id??null,message:Y.message.message,created_at:Y.message.created_at,updated_at:Y.message.created_at,deleted_at:null,employee:Y.message.employee??null,person:Y.message.person??null,attachments:Y.message.attachments||[]};o(q=>[...q,X])}Y.ticket&&n&&s({...n,status:Y.ticket.status,updated_at:new Date().toISOString()}),x.forEach(X=>{X.preview&&URL.revokeObjectURL(X.preview)}),g(""),b([])}catch(P){console.error("Error replying to ticket:",P),alert("   ")}finally{y(!1)}},k=P=>({OPEN:"",WAITING_CUSTOMER:"  ",WAITING_SUPPORT:"  ",CLOSED:" ",RESOLVED:" ",REOPENED:"  "})[P]||P,L=P=>({OPEN:"bg-green-100 text-green-800",WAITING_CUSTOMER:"bg-blue-100 text-blue-800",WAITING_SUPPORT:"bg-purple-100 text-purple-800",CLOSED:"bg-gray-100 text-gray-800",RESOLVED:"bg-green-100 text-green-800",REOPENED:"bg-yellow-100 text-yellow-800"})[P]||"bg-gray-100 text-gray-800",O=P=>({LOW:"",MEDIUM:"",HIGH:"",URGENT:""})[P]||P,z=P=>({LOW:"bg-gray-100 text-gray-800",MEDIUM:"bg-blue-100 text-blue-800",HIGH:"bg-orange-100 text-orange-800",URGENT:"bg-red-100 text-red-800"})[P]||"bg-gray-100 text-gray-800",U=P=>P.sender_type==="EMPLOYEE"||P.employee_id!==null,H=P=>P.employee?`${P.employee.profile.first_name} ${P.employee.profile.last_name}`:P.person?`${P.person.profile.first_name} ${P.person.profile.last_name}`:"";return c?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-indigo-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):d||!n?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4 font-semibold",children:d||"  "}),i.jsx("button",{onClick:()=>r("/user/tickets"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold",children:"   "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/user/tickets"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.subject}),i.jsxs("p",{className:"text-gray-500",children:[" #",n.id.substring(0,8)]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${L(n.status)}`,children:k(n.status)}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${z(n.priority)}`,children:O(n.priority)})]})]})]}),d&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:d})}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(n.created_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(n.updated_at)})]}),n.assigned_to&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"   "}),i.jsxs("p",{className:"text-base font-semibold text-gray-900",children:[n.assigned_to.profile.first_name," ",n.assigned_to.profile.last_name]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden flex flex-col mb-6",style:{height:"600px"},children:[i.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:i.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:[" (",l.length,")"]})}),i.jsxs("div",{ref:a,className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar",children:[l.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx(ss,{className:"w-16 h-16 text-gray-300 mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:"    "})]}):l.map(P=>{const F=U(P),Y=H(P);return i.jsxs("div",{className:`flex items-start space-x-reverse space-x-3 ${F?"justify-end":"justify-start"}`,children:[!F&&i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-500 to-gray-600 flex items-center justify-center flex-shrink-0 shadow-md",children:i.jsx(_t,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:`max-w-[75%] rounded-2xl p-4 shadow-sm ${F?"bg-indigo-50 border border-indigo-200":"bg-gray-100 border border-gray-200"}`,children:[i.jsx("div",{className:"mb-2",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-1",children:[i.jsx("p",{className:"text-sm font-bold text-gray-900",children:Y}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-semibold ${F?"bg-indigo-200 text-indigo-800":"bg-gray-200 text-gray-800"}`,children:F?"":""})]})}),i.jsx("p",{className:"text-sm text-gray-800 mb-2 whitespace-pre-wrap",children:P.message}),P.attachments&&P.attachments.length>0&&i.jsx("div",{className:"mt-3 space-y-2",children:P.attachments.map(X=>{const q=lr(X.url)||X.url,G=lr(X.thumbnail)||X.thumbnail||q,$=X.url.match(/\.(jpg|jpeg|png|gif|webp)$/i)||X.thumbnail;return i.jsx("div",{className:"border border-gray-300 rounded-lg p-2 bg-white",children:$?i.jsx("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"block",children:i.jsx("img",{src:G,alt:"",className:"w-full h-auto max-h-48 object-contain rounded",onError:Z=>{const te=Z.target;te.style.display="none"}})}):i.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-reverse space-x-2 text-sm text-indigo-600 hover:text-indigo-800",children:[i.jsx(Lg,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})},X.id)})}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:_e(P.created_at)})]}),F&&i.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center flex-shrink-0 shadow-md",children:i.jsx(kC,{className:"w-5 h-5 text-white"})})]},P.id)}),i.jsx("div",{ref:e})]}),n.status!=="CLOSED"&&n.status!=="RESOLVED"&&i.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[x.length>0&&i.jsxs("div",{className:"mb-3 p-3 bg-white rounded-lg border border-gray-200",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["   (",x.length,")"]})}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:x.map(P=>i.jsx("div",{className:"relative border border-gray-300 rounded-lg p-2 bg-white group",children:P.preview?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:P.preview,alt:P.file.name,className:"w-full h-24 object-cover rounded"}),i.jsx("button",{onClick:()=>M(P.id),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(St,{className:"w-3 h-3"})})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-24",children:[i.jsx(Lg,{className:"w-6 h-6 text-gray-400 mb-1"}),i.jsx("p",{className:"text-xs text-gray-600 truncate w-full text-center",children:P.file.name}),i.jsx("button",{onClick:()=>M(P.id),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(St,{className:"w-3 h-3"})})]})},P.id))})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("label",{className:"inline-flex items-center justify-center px-4 py-2 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg cursor-pointer transition-colors",children:[i.jsx(Rs,{className:"w-4 h-4 ml-2 text-gray-700"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:" "}),i.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:P=>C(P.target.files),disabled:N})]})}),i.jsxs("div",{className:"flex items-end space-x-reverse space-x-3",children:[i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:p,onChange:P=>g(P.target.value),onKeyDown:P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),!v&&(p.trim()||x.length>0)&&R())},placeholder:"    ...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",rows:3})}),i.jsxs("button",{onClick:R,disabled:!p.trim()&&x.length===0||v||N,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-reverse space-x-2",children:[v||N?i.jsx(Ae,{className:"w-4 h-4 animate-spin"}):i.jsx(IC,{className:"w-4 h-4"}),i.jsx("span",{children:v||N?"  ...":""})]})]})]})]})]})}function Vbe({isOpen:r,onClose:t,onSuccess:e,customerId:a}){const[n,s]=I.useState(""),[l,o]=I.useState(""),[c,u]=I.useState("MEDIUM"),[d,h]=I.useState([]),[p,g]=I.useState(!1),[v,y]=I.useState(!1),[x,b]=I.useState(""),N=async C=>{if(!(!C||C.length===0))try{g(!0);const M=Array.from(C),R=await Promise.all(M.map(async k=>{let L;return k.type.startsWith("image/")&&(L=URL.createObjectURL(k)),{id:`${Date.now()}-${Math.random()}`,file:k,preview:L}}));h(k=>[...k,...R])}catch(M){console.error("Error processing files:",M)}finally{g(!1)}},w=async()=>{if(d.length===0)return[];try{const C=d.map(R=>R.file);return(await ku.uploadFiles(C)).map(R=>R.id)}catch(C){throw console.error("Error uploading files:",C),new Error("   ")}},S=C=>{h(M=>{const R=M.find(k=>k.id===C);return R?.preview&&URL.revokeObjectURL(R.preview),M.filter(k=>k.id!==C)})},T=async C=>{if(C.preventDefault(),!n.trim()){b("     ");return}if(!l.trim()){b("     ");return}try{y(!0),b("");const M=await w();await Es.createTicket({customer_id:a,subject:n.trim(),priority:c,message:l.trim(),attachment_ids:M}),s(""),o(""),u("MEDIUM"),h([]),e()}catch(M){console.error("Error creating ticket:",M),b(M.response?.data?.message||M.message||"   ")}finally{y(!1)}},A=()=>{d.forEach(C=>{C.preview&&URL.revokeObjectURL(C.preview)}),s(""),o(""),u("MEDIUM"),h([]),b(""),t()};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:i.jsx(ss,{className:"w-5 h-5 text-indigo-600"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "})]}),i.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("form",{onSubmit:T,className:"p-6 space-y-6",children:[x&&i.jsx("div",{className:"bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded-lg text-sm",children:x}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:n,onChange:C=>{s(C.target.value),b("")},placeholder:"     ",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:c,onChange:C=>u(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"LOW",children:""}),i.jsx("option",{value:"MEDIUM",children:""}),i.jsx("option",{value:"HIGH",children:""}),i.jsx("option",{value:"URGENT",children:""})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:l,onChange:C=>{o(C.target.value),b("")},placeholder:"    ...",rows:6,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"  ()"}),i.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:i.jsxs("label",{className:"flex flex-col items-center justify-center cursor-pointer",children:[i.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:C=>N(C.target.files),disabled:p}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(Rs,{className:"w-8 h-8 text-gray-400 mb-2"}),i.jsx("span",{className:"text-sm text-gray-600",children:p?"  ...":"        "})]})]})}),d.length>0&&i.jsx("div",{className:"mt-4 space-y-2",children:d.map(C=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 flex-1 min-w-0",children:[C.preview?i.jsx("img",{src:C.preview,alt:"Preview",className:"w-12 h-12 object-cover rounded"}):i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center",children:i.jsx(Lg,{className:"w-5 h-5 text-gray-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:C.file.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[(C.file.size/1024).toFixed(2)," KB"]})]})]}),i.jsx("button",{type:"button",onClick:()=>S(C.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",children:i.jsx(St,{className:"w-4 h-4 text-red-600"})})]},C.id))})]}),i.jsxs("div",{className:"flex justify-end space-x-reverse space-x-3 pt-4 border-t border-gray-200",children:[i.jsx("button",{type:"button",onClick:A,className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-semibold",disabled:v,children:""}),i.jsx("button",{type:"submit",className:"px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2",disabled:v,children:v?"  ...":i.jsxs(i.Fragment,{children:[i.jsx(IC,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]})})]})]})]})}):null}function Hbe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!0),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(10),[p,g]=I.useState(!1),[v,y]=I.useState(null);I.useEffect(()=>{x()},[]),I.useEffect(()=>{v&&b()},[u,v]);const x=async()=>{try{const R=await gr.getCustomerInfo();y(R.id)}catch(R){console.error("Error fetching customer info:",R),R.response?.status===403?l("       "):R.response?.status===401?l("   .    "):l("    : "+(R.response?.data?.message||R.message))}},b=async()=>{if(v)try{n(!0),l("");const R={page:u,"page-size":h,customer_id:v},k=await Es.getTickets(R);e(k.data||[]),c(k.count||0)}catch(R){console.error("Error fetching tickets:",R),R.response?.status===403?l("       "):R.response?.status===401?l("   .    "):l("   : "+(R.response?.data?.message||R.message))}finally{n(!1)}},N=()=>{b()},w=R=>{d(R)},S=()=>{g(!1),b()},T=R=>({OPEN:"",WAITING_CUSTOMER:"  ",WAITING_SUPPORT:"  ",CLOSED:" ",RESOLVED:" ",REOPENED:"  "})[R]||R,A=R=>({OPEN:"bg-green-100 text-green-800",WAITING_CUSTOMER:"bg-blue-100 text-blue-800",WAITING_SUPPORT:"bg-purple-100 text-purple-800",CLOSED:"bg-gray-100 text-gray-800",RESOLVED:"bg-green-100 text-green-800",REOPENED:"bg-yellow-100 text-yellow-800"})[R]||"bg-gray-100 text-gray-800",C=R=>({LOW:"",NORMAL:"",HIGH:"",URGENT:""})[R]||R,M=R=>({LOW:"bg-gray-100 text-gray-800",NORMAL:"bg-blue-100 text-blue-800",HIGH:"bg-orange-100 text-orange-800",URGENT:"bg-red-100 text-red-800"})[R]||"bg-gray-100 text-gray-800";return a&&!v?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-indigo-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):s&&!v?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4 font-semibold",children:s}),i.jsx("button",{onClick:x,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold",children:" "})]}):i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(ss,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o,"   "]})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:N,className:"inline-flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200",children:[i.jsx(Ca,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(Nl,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]})}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-indigo-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(R=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/user/tickets/${R.id}`),children:[i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"font-semibold text-gray-900",children:R.subject}),R.last_message&&i.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:R.last_message.message})]}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_e(R.created_at)}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ${A(R.status)}`,children:T(R.status)})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-xs font-semibold ${M(R.priority)}`,children:C(R.priority)})}),i.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[R.messages_count," "]}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("button",{onClick:k=>{k.stopPropagation(),r(`/user/tickets/${R.id}`)},className:"text-indigo-600 hover:text-indigo-700 font-semibold text-sm",children:""})})]},R.id))})]})})}),!a&&t.length===0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ss,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold mb-4",children:"   "}),i.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center justify-center rounded-lg bg-indigo-600 hover:bg-indigo-700 px-6 py-3 text-base font-medium text-white transition-all duration-200",children:[i.jsx(Nl,{className:"w-5 h-5 ml-2"}),"  "]})]})}),!a&&o>h&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-4",children:i.jsx($t,{currentPage:u,totalPages:Math.ceil(o/h),totalItems:o,itemsPerPage:h,onPageChange:w})}),v&&i.jsx(Vbe,{isOpen:p,onClose:()=>g(!1),onSuccess:S,customerId:v})]})}function Gbe({isOpen:r,onClose:t,onSuccess:e}){const[a,n]=I.useState(""),[s,l]=I.useState(""),[o,c]=I.useState("zarinpal"),[u,d]=I.useState(!1),[h,p]=I.useState(""),g=async x=>{x.preventDefault(),p("");const b=parseInt(a.replace(/,/g,""));if(!b||b<1e3){p("     ");return}try{d(!0);let N;o==="zarinpal"?N=await un.zarinpalInitiateWalletTopup(b,s||void 0):N=await un.zibalInitiateWalletTopup(b,s||void 0),N.redirect_url?e(N.redirect_url):p("    ")}catch(N){console.error("Error initiating topup:",N),p(N.response?.data?.message||"    ")}finally{d(!1)}},v=x=>{const b=x.target.value.replace(/,/g,"");/^\d*$/.test(b)&&n(b)},y=x=>x.replace(/\B(?=(\d{3})+(?!\d))/g,",");return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(Ot,{className:"w-5 h-5 text-green-600"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:" "})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-600"})})]}),i.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[h&&i.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start space-x-reverse space-x-3",children:[i.jsx(gl,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),i.jsx("p",{className:"text-sm text-red-700",children:h})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),i.jsx("input",{type:"text",value:y(a),onChange:v,placeholder:": 100000",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all outline-none text-lg font-semibold",required:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" :  "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" ()"}),i.jsx("textarea",{value:s,onChange:x=>l(x.target.value),placeholder:" ...",rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all outline-none resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("button",{type:"button",onClick:()=>c("zarinpal"),className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold ${o==="zarinpal"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:""}),i.jsx("button",{type:"button",onClick:()=>c("zibal"),className:`px-4 py-3 rounded-lg border-2 transition-all font-semibold ${o==="zibal"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:""})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:""}),i.jsx("button",{type:"submit",disabled:u||!a,className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:u?"  ...":"   "})]})]})]})}):null}function Ube(){const[r,t]=I.useState(null),[e,a]=I.useState(!0),[n,s]=I.useState(""),[l,o]=I.useState(!1);I.useEffect(()=>{c()},[]),I.useEffect(()=>{sessionStorage.getItem("wallet_refresh_needed")==="true"&&(c(),sessionStorage.removeItem("wallet_refresh_needed"))},[]);const c=async()=>{try{a(!0),s("");const h=await Iu.getWalletInfo();t(h)}catch(h){s("   "),console.error(h)}finally{a(!1)}},u=h=>{localStorage.setItem("wallet_topup_callback","/user/wallet-topup/callback"),window.location.href=h};if(e)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-purple-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]});if(n||!r)return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4 font-semibold",children:n||"   "}),i.jsx("button",{onClick:c,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold",children:" "})]});const d=r.credit_cap-r.balance;return i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsx("div",{className:"mb-8",children:i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(wr,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"   "})]})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsxs("button",{onClick:c,className:"inline-flex items-center justify-center rounded-lg bg-gray-100 hover:bg-gray-200 px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200",children:[i.jsx(Ca,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold flex items-center space-x-reverse space-x-2",children:[i.jsx(Nl,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]})]})]})})}),n&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-6",children:i.jsx("p",{className:"text-red-800 font-semibold",children:n})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(mm,{className:"w-5 h-5 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:`text-3xl font-bold ${r.balance>=0?"text-green-600":"text-red-600"}`,children:ue(r.balance)})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-5 h-5 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ue(r.credit_cap)})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(ln,{className:"w-5 h-5 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ue(r.initial_balance)})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-5 h-5 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsx("p",{className:`text-3xl font-bold ${d>=0?"text-orange-600":"text-red-600"}`,children:ue(d)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"  "}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(r.created_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" "}),i.jsx("p",{className:"text-base font-semibold text-gray-900",children:_e(r.updated_at)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:""}),i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-lg text-sm font-semibold ${r.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:r.deleted_at?"":""})]})]})]}),r.description&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:""}),i.jsx("p",{className:"text-base text-gray-700 bg-gray-50 rounded-lg p-4",children:r.description})]}),i.jsx(Gbe,{isOpen:l,onClose:()=>o(!1),onSuccess:u})]})}function Fbe(){const r=Je(),[t]=MC(),[e,a]=I.useState(!0),[n,s]=I.useState(!1),[l,o]=I.useState(""),[c,u]=I.useState(null);I.useEffect(()=>{d()},[]);const d=async()=>{try{a(!0);const p=t.get("payment_transaction_id"),g=t.get("success"),v=t.get("message"),y=t.get("ref_id");if(g!==null&&v){s(g==="true"),o(decodeURIComponent(v)),y&&u(parseInt(y)),a(!1);return}const x=t.get("Authority"),b=t.get("Status"),N=t.get("trackId");if(!p){s(!1),o("   "),a(!1);return}let w;if(x&&b!==null)w=await un.zarinpalWalletTopupCallback(p,x,b||"");else if(N)w=await un.zibalWalletTopupCallback(p,parseInt(N));else{s(!1),o("   "),a(!1);return}s(w.success),o(w.message),u(w.ref_id)}catch(p){console.error("Error verifying payment:",p),s(!1),o(p.response?.data?.message||"    ")}finally{a(!1)}},h=()=>{localStorage.removeItem("wallet_topup_callback"),sessionStorage.setItem("wallet_refresh_needed","true"),r("/user/wallet")};return e?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-12 max-w-md w-full mx-4",children:i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:"w-20 h-20 border-4 border-green-500 border-t-transparent rounded-full animate-spin"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"   ..."}),i.jsx("p",{className:"text-gray-600 text-center",children:"  "})]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-12 max-w-md w-full",children:i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center ${n?"bg-green-100":"bg-red-100"}`,children:n?i.jsx(us,{className:"w-16 h-16 text-green-600"}):i.jsx(xi,{className:"w-16 h-16 text-red-600"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:`text-3xl font-bold mb-3 ${n?"text-green-600":"text-red-600"}`,children:n?"  !":" "}),i.jsx("p",{className:"text-gray-600 text-lg mb-4",children:l}),c&&i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:" :"}),i.jsx("p",{className:"text-xl font-bold text-gray-900",children:c})]})]}),i.jsxs("button",{onClick:h,className:"w-full px-6 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all shadow-lg flex items-center justify-center space-x-reverse space-x-2",children:[i.jsx(yu,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]})]})})})}const Ybe=[{id:"profile",label:" ",icon:_t,color:"text-blue-600",path:"/user/profile"},{id:"business",label:"   ",icon:RC,color:"text-green-600",path:"/user/business"},{id:"wallet",label:" ",icon:wr,color:"text-purple-600",path:"/user/wallet"},{id:"requests",label:" ",icon:nt,color:"text-orange-600",path:"/user/requests"},{id:"tickets",label:"",icon:ss,color:"text-indigo-600",path:"/user/tickets"},{id:"products",label:" ",icon:JW,color:"text-emerald-600",path:"/user/products"},{id:"favorites",label:"",icon:pg,color:"text-red-600",path:"/user/favorites"},{id:"cart",label:" ",icon:Ir,color:"text-amber-600",path:"/user/cart"}];function Wbe({onLogout:r}){const[t,e]=I.useState(!1),a=Wh(),n=Je(),s=o=>a.pathname===o,l=o=>{n(o),e(!1)};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"lg:hidden fixed top-4 right-4 z-50",children:i.jsx("button",{onClick:()=>e(!0),className:"p-3 bg-white rounded-lg shadow-md border border-gray-200",children:i.jsx(_8,{className:"w-7 h-7 text-gray-600"})})}),i.jsx("div",{className:`fixed inset-y-0 right-0 z-40 w-80 bg-white border-l border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${t?"translate-x-0":"translate-x-full"}`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(_t,{className:"w-7 h-7 text-white"})}),i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:" "})]}),i.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(St,{className:"w-6 h-6 text-gray-600"})})]}),i.jsx("nav",{className:"flex-1 px-6 py-8 space-y-2 overflow-y-auto",children:Ybe.map(o=>{const c=o.icon,u=s(o.path);return i.jsxs("button",{onClick:()=>l(o.path),className:`w-full flex items-center space-x-reverse space-x-4 px-6 py-4 rounded-xl transition-all duration-200 group ${u?"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 shadow-sm":"hover:bg-gray-50 hover:shadow-sm"}`,children:[i.jsx(c,{className:`w-6 h-6 transition-colors ${u?o.color:"text-gray-500 group-hover:text-gray-700"}`}),i.jsx("span",{className:`text-base font-semibold transition-colors ${u?"text-gray-900":"text-gray-600 group-hover:text-gray-800"}`,children:o.label})]},o.id)})}),i.jsx("div",{className:"p-6 border-t border-gray-200",children:i.jsxs("button",{onClick:r,className:"w-full flex items-center space-x-reverse space-x-4 px-6 py-4 text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 group",children:[i.jsx(b8,{className:"w-6 h-6"}),i.jsx("span",{className:"text-base font-semibold",children:"  "})]})})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>e(!1)})]})}function $be({isOpen:r,onClose:t,customerId:e,onSuccess:a}){const[n,s]=I.useState(0),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(""),p=async g=>{if(g.preventDefault(),h(""),n===0){h("     ");return}try{u(!0),await Iu.addCustomerInitialBalance(e,{initial_balance:n,description:l||void 0}),a(),t(),s(0),o("")}catch(v){console.error("Error adding initial balance:",v),h(v.response?.data?.message||"    .    .")}finally{u(!1)}};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-500"})})]}),i.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[d&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:d}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["   () ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",value:n||"",onChange:g=>s(parseFloat(g.target.value)||0),required:!0,step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"     "}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),i.jsx("textarea",{value:l,onChange:g=>o(g.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:" ()"})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:""}),i.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"  ...":"  "})]})]})]})}):null}function qbe({isOpen:r,onClose:t,customerId:e,onSuccess:a}){const n=()=>{const x=new Date,b=ra.toJalaali(x);return`${b.jy}/${String(b.jm).padStart(2,"0")}/${String(b.jd).padStart(2,"0")}`},[s,l]=I.useState({amount:0,customer_id:e,method:"CASH",description:null,date:n()}),[o,c]=I.useState(!1),[u,d]=I.useState(""),h=[{value:"CASH",label:""},{value:"DEPOSIT_TO_ACCOUNT",label:"  "},{value:"CHEQUE",label:""},{value:"ONLINE",label:""}],p=x=>{if(!x||x.trim()==="")throw new Error("  ");const b=x.split("/");if(b.length!==3)throw new Error("   ");const N=parseInt(b[0]),w=parseInt(b[1]),S=parseInt(b[2]);if(isNaN(N)||isNaN(w)||isNaN(S)||N<1300||N>1500||w<1||w>12||S<1||S>31)throw new Error("    ");try{const T=ra.jalaaliToDateObject(N,w,S);if(!T||isNaN(T.getTime()))throw new Error("    ");const A=new Date;return T.setHours(A.getHours()),T.setMinutes(A.getMinutes()),T.setSeconds(A.getSeconds()),T.setMilliseconds(A.getMilliseconds()),T.toISOString()}catch(T){throw new Error("   : "+(T.message||"  "))}},g=async x=>{if(x.preventDefault(),d(""),s.amount<=0){d("     ");return}if(s.method==="CHEQUE"&&!s.cheque_due_date){d("     ");return}try{c(!0);let b,N;try{b=p(s.date)}catch(w){d(w.message||"    "),c(!1);return}if(s.cheque_due_date)try{N=p(s.cheque_due_date)}catch(w){d(w.message||"     "),c(!1);return}await un.createPayment({...s,date:b,cheque_due_date:N}),a(),t(),l({amount:0,customer_id:e,method:"CASH",description:null,date:n()})}catch(b){console.error("Error creating payment:",b),d(b.response?.data?.message||"   .    .")}finally{c(!1)}},v=x=>{l(b=>({...b,date:x}))},y=x=>{l(b=>({...b,cheque_due_date:x}))};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" "}),i.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-500"})})]}),i.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[u&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" () ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",value:s.amount||"",onChange:x=>l(b=>({...b,amount:parseFloat(x.target.value)||0})),required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"   "})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["  ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("select",{value:s.method,onChange:x=>l(b=>({...b,method:x.target.value})),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:h.map(x=>i.jsx("option",{value:x.value,children:x.label},x.value))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["  ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ls,{value:s.date,onChange:v,placeholder:"   "})]}),s.method==="CHEQUE"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["   ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ls,{value:s.cheque_due_date||"",onChange:y,placeholder:"    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),i.jsx("textarea",{value:s.description||"",onChange:x=>l(b=>({...b,description:x.target.value||null})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:" ()"})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:""}),i.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"  ...":" "})]})]})]})}):null}function Xbe({isOpen:r,onClose:t,customerId:e,currentCreditCap:a,onSuccess:n}){const[s,l]=I.useState(a),[o,c]=I.useState(!1),[u,d]=I.useState(""),h=async p=>{if(p.preventDefault(),d(""),s<0){d("    ");return}try{c(!0),await Iu.updateCustomerCreditCap(e,s),n(),t(),l(a)}catch(g){console.error("Error updating credit cap:",g),d(g.response?.data?.message||"    .    .")}finally{c(!1)}};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:i.jsx(St,{className:"w-5 h-5 text-gray-500"})})]}),i.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[u&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),i.jsx("div",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50",children:new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(a)})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["   () ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",value:s||"",onChange:p=>l(parseFloat(p.target.value)||0),required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"     "})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:""}),i.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"  ...":""})]})]})]})}):null}function jU({isOpen:r,onClose:t,walletId:e,currentBalance:a,currentCreditCap:n,onSuccess:s}){const[l,o]=I.useState(a.toString()),[c,u]=I.useState(n.toString()),[d,h]=I.useState(!1),[p,g]=I.useState("");I.useEffect(()=>{r&&(o(a.toString()),u(n.toString()),g(""))},[r,a,n]);const v=async y=>{y.preventDefault(),g("");const x=parseFloat(l)||0,b=parseFloat(c)||0;if(b<0){g("    ");return}try{h(!0);const N={};if(x!==a&&(N.balance=x),b!==n&&(N.credit_cap=b),Object.keys(N).length===0){t();return}await Iu.updateWallet(e,N),s(),t()}catch(N){console.error("Error updating wallet:",N),g(N.response?.data?.message||"    .    .")}finally{h(!1)}};return r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"  "}),i.jsx("button",{onClick:t,disabled:d,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:i.jsx(St,{className:"w-5 h-5 text-gray-500"})})]}),i.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[p&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),i.jsx("div",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50",children:ue(a)})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["  () ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",value:l,onChange:y=>o(y.target.value),required:!0,step:"0.01",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),i.jsx("div",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50",children:ue(n)})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["   () ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",value:c,onChange:y=>u(y.target.value),required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"     "})]}),i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,disabled:d,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-semibold disabled:opacity-50",children:""}),i.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold disabled:opacity-50 flex items-center justify-center space-x-reverse space-x-2",children:d?i.jsxs(i.Fragment,{children:[i.jsx(Ae,{className:"w-5 h-5 animate-spin"}),i.jsx("span",{children:"  ..."})]}):i.jsx("span",{children:" "})})]})]})]})}):null}function Zbe(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[p,g]=I.useState(!1),[v,y]=I.useState(!1);I.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{s(!0),o("");const A=await Iu.getWalletById(t);a(A)}catch(A){console.error("Error fetching wallet details:",A),o("     ")}finally{s(!1)}},b=A=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[A]||A,N=()=>{u(!1),x()},w=()=>{h(!1),x()},S=()=>{g(!1),x()},T=A=>({PERSONAL:"",CORPORATE:""})[A]||A;return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"   "}),i.jsx("button",{onClick:()=>r("/manage/wallets"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"    "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/wallets"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e.customer.title}),i.jsxs("p",{className:"text-gray-500",children:[": ",e.customer.code," -   "]})]}),i.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-reverse space-x-2 font-semibold",children:[i.jsx(bu,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:`text-2xl font-bold ${e.balance>=0?"text-green-600":"text-red-600"}`,children:ue(e.balance)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:`text-2xl font-bold ${(e.actual_balance??e.balance)>=0?"text-green-600":"text-red-600"}`,children:ue(e.actual_balance??e.balance)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ue(e.credit_cap)})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-indigo-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsx("p",{className:`text-2xl font-bold ${(e.actual_credit??e.balance-e.credit_cap)>=0?"text-green-600":"text-red-600"}`,children:ue(e.actual_credit??e.balance-e.credit_cap)})]})]}),(e.pending_cheques_count??0)>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-orange-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-orange-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[e.pending_cheques_count," "]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:"  "}),i.jsx("p",{className:"text-xl font-bold text-orange-600",children:ue(e.pending_cheques_total??0)})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.customer.code})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:T(e.customer.type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:b(e.customer.category)})]})]})]}),e.description&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.description})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(L4,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>u(!0),className:"flex items-center justify-center space-x-reverse space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all",children:[i.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:i.jsx(Ot,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:" "}),i.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]}),i.jsxs("button",{onClick:()=>h(!0),className:"flex items-center justify-center space-x-reverse space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:i.jsx(L4,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"  "}),i.jsx("p",{className:"text-xs text-gray-600",children:"   "})]})]}),i.jsxs("button",{onClick:()=>g(!0),className:"flex items-center justify-center space-x-reverse space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all",children:[i.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(mm,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"  "}),i.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})]})]}),c&&e&&i.jsx(qbe,{isOpen:c,onClose:()=>u(!1),customerId:e.customer.id,onSuccess:N}),d&&e&&i.jsx(Xbe,{isOpen:d,onClose:()=>h(!1),customerId:e.customer.id,currentCreditCap:e.credit_cap,onSuccess:w}),p&&e&&i.jsx($be,{isOpen:p,onClose:()=>g(!1),customerId:e.customer.id,onSuccess:S}),v&&e&&i.jsx(jU,{isOpen:v,onClose:()=>y(!1),walletId:e.id,currentBalance:e.balance,currentCreditCap:e.credit_cap,onSuccess:x})]})}const Kbe=r=>({BALANCE_INCREASE:" ",BALANCE_DECREASE:" ",CREDIT_CAP_INCREASE:" ",CREDIT_CAP_DECREASE:" ",PAYMENT_RECEIVED:" ",INVOICE_CREATED:" ",MANUAL_ADJUSTMENT:" "})[r||""]||" ",Qbe=r=>({BALANCE_INCREASE:"bg-green-100 text-green-800",BALANCE_DECREASE:"bg-red-100 text-red-800",CREDIT_CAP_INCREASE:"bg-blue-100 text-blue-800",CREDIT_CAP_DECREASE:"bg-orange-100 text-orange-800",PAYMENT_RECEIVED:"bg-emerald-100 text-emerald-800",INVOICE_CREATED:"bg-purple-100 text-purple-800",MANUAL_ADJUSTMENT:"bg-yellow-100 text-yellow-800"})[r||""]||"bg-gray-100 text-gray-800";function Jbe(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState(""),[x,b]=I.useState(""),[N,w]=I.useState([]);I.useEffect(()=>{S(),T()},[u]),I.useEffect(()=>{d(1),S()},[p,v,x]);const S=async()=>{try{n(!0),l("");const M={page:u,"page-size":h};p&&(M.change_type=p),v&&(M.customer_id=v),x!==""&&(M.by_system=x==="true");const R=await Gs.getWalletHistory(M);e(R.data||[]),c(R.count||0)}catch(M){console.error("Error fetching wallet history:",M),l(M.response?.data?.message||"     ")}finally{n(!1)}},T=async()=>{try{const M=await gr.getAllCustomers();w(M.data||[])}catch(M){console.error("Error fetching customers:",M)}},A=M=>{d(M)},C=()=>{let M=0;return p&&M++,v&&M++,x!==""&&M++,M};return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(wr,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[o,"   ",C()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:p,onChange:M=>g(M.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"BALANCE_INCREASE",children:" "}),i.jsx("option",{value:"BALANCE_DECREASE",children:" "}),i.jsx("option",{value:"CREDIT_CAP_INCREASE",children:" "}),i.jsx("option",{value:"CREDIT_CAP_DECREASE",children:" "}),i.jsx("option",{value:"PAYMENT_RECEIVED",children:" "}),i.jsx("option",{value:"INVOICE_CREATED",children:" "}),i.jsx("option",{value:"MANUAL_ADJUSTMENT",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:M=>y(M.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),N.map(M=>i.jsxs("option",{value:M.id,children:[M.title," (: ",M.code,")"]},M.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("select",{value:x,onChange:M=>b(M.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"true",children:""}),i.jsx("option",{value:"false",children:""})]})]})]}),C()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[C(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),b(""),d(1)},className:"text-sm text-blue-600 hover:text-blue-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-blue-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&t.length>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(M=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/wallet-history/${M.id}`),children:[i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${Qbe(M.change_type)}`,children:Kbe(M.change_type)})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:M.wallet?.customer?.title||"-"}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-700",children:ue(M.balance_before)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`text-sm font-bold ${M.balance_diff&&M.balance_diff>0?"text-green-600":M.balance_diff&&M.balance_diff<0?"text-red-600":"text-gray-600"}`,children:M.balance_diff?`${M.balance_diff>0?"+":""}${ue(M.balance_diff)}`:"-"})}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-700",children:ue(M.balance_after)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${M.by_system?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:M.by_system?"":""})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(M.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:R=>{R.stopPropagation(),r(`/manage/wallet-history/${M.id}`)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-semibold",children:""})})]},M.id))})]})})}),!a&&t.length===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:C()>0?"      ":"  "})]}),!a&&t.length>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:A})]})}const KP=r=>({CREATED:"  ",BALANCE_CHANGED:" ",CREDIT_CAP_CHANGED:"  ",PAYMENT_RECEIVED:" ",PAYMENT_MADE:"  ",REFUND:"",ADJUSTMENT:" ",DELETED:"  ",INVOICE_CREATED:" ",CREDIT_CAP_INCREASE:"  ",CREDIT_CAP_DECREASE:"  "})[r]||" ",e1e=r=>({CREATED:"bg-green-100 text-green-800",BALANCE_CHANGED:"bg-yellow-100 text-yellow-800",CREDIT_CAP_CHANGED:"bg-blue-100 text-blue-800",PAYMENT_RECEIVED:"bg-emerald-100 text-emerald-800",PAYMENT_MADE:"bg-purple-100 text-purple-800",REFUND:"bg-orange-100 text-orange-800",ADJUSTMENT:"bg-indigo-100 text-indigo-800",DELETED:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800",t1e=r=>({WALLET:" ",CREDIT:"",DEPOSIT_TO_ACCOUNT:"  ",CHEQUE:"",CARD:"",CASH:"",ONLINE:""})[r]||r,r1e=r=>({PERSONAL:"",CORPORATE:""})[r]||r,a1e=r=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[r]||"";function n1e(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{s(!0),o("");const u=await Gs.getWalletHistoryById(t);a(u)}catch{o("      ")}finally{s(!1)}};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/wallet-history"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/wallet-history"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"   "}),e.wallet&&i.jsxs("p",{className:"text-gray-500",children:[":"," ",i.jsx("span",{className:"font-semibold text-gray-700",children:e.wallet.customer.title})]})]}),i.jsx("span",{className:`inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold ${e1e(e.change_type)}`,children:KP(e.change_type)})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:" "}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-red-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("p",{className:`text-xl font-bold ${e.balance_before>=0?"text-green-600":"text-red-600"}`,children:ue(e.balance_before)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ue(e.credit_before)})]})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-0.5 bg-green-200"}),i.jsxs("div",{className:"pr-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-white shadow-sm"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:""}),i.jsx("p",{className:`text-xl font-bold ${e.balance_after>=0?"text-green-600":"text-red-600"}`,children:ue(e.balance_after)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ue(e.credit_after)})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsx("label",{className:"text-xs font-medium text-gray-500 block mb-1.5",children:" "}),i.jsxs("p",{className:`text-lg font-bold ${e.balance_diff>=0?"text-green-600":"text-red-600"}`,children:[e.balance_diff>=0?"+":"",ue(e.balance_diff)]})]})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:KP(e.change_type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold",children:e.by_system?i.jsx("span",{className:"text-orange-600",children:" "}):i.jsx("span",{className:"text-blue-600",children:" "})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]}),e.employee&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.employee.profile.first_name," ",e.employee.profile.last_name]})]}),e.reason&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.reason})]})]})]}),e.wallet&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:i.jsx(wr,{className:"w-4 h-4 text-emerald-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:`text-xl font-bold ${e.wallet.balance>=0?"text-green-600":"text-red-600"}`,children:ue(e.wallet.balance)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ue(e.wallet.credit_cap)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:ue(e.wallet.initial_balance)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.wallet.updated_at)})]}),e.wallet.description&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.wallet.description})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[e.wallet&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.wallet.customer.title})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.wallet.customer.code})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r1e(e.wallet.customer.type)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:a1e(e.wallet.customer.category)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.wallet.customer.phone})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.wallet.customer.address})]})]})]}),e.payment&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-50 flex items-center justify-center",children:i.jsx(Ot,{className:"w-4 h-4 text-teal-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["#",e.payment.code]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-xl font-bold text-emerald-600",children:ue(e.payment.amount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:t1e(e.payment.method)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.payment.date)})]}),e.payment.description&&i.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.payment.description})]})]})]})]})]}),e.ip_address&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(Pr,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:" "}),i.jsx("p",{className:"text-sm font-semibold text-gray-900 font-mono",children:e.ip_address.split(",")[0]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[1]?.trim()||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[2]?.trim()||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.ip_address.split(",")[6]?.trim()||""})]})]})]})]})}const QP=r=>({RESTAURANT:"",HOTEL:"",CHAIN_STORE:" ",GOVERNMENTAL:"",FAST_FOOD:" ",CHARITY:"",BUTCHER:"",WHOLESALER:"",FELLOW:"",CATERING:"",KEBAB:"",DISTRIBUTOR:"",HOSPITAL:"",FACTORY:"",OTHER:""})[r]||r,JP=r=>({PERSONAL:"",CORPORATE:""})[r]||r;function s1e(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(0),[u,d]=I.useState(1),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState(""),[x,b]=I.useState([]),[N,w]=I.useState(!1),[S,T]=I.useState(null);I.useEffect(()=>{A(),C()},[u]),I.useEffect(()=>{d(1),A()},[p,v]);const A=async()=>{try{n(!0),l("");const O={page:u,"page-size":h};v&&(O.customer_id=v);const z=await Iu.getWalletList(O);e(z.data||[]),c(z.count||0)}catch(O){console.error("Error fetching wallets:",O),l(O.response?.data?.message||"     ")}finally{n(!1)}},C=async()=>{try{const O=await gr.getAllCustomers();b(O.data||[])}catch(O){console.error("Error fetching customers:",O)}},M=O=>{d(O)},R=()=>{let O=0;return p&&O++,v&&O++,O},k=t.filter(O=>{if(p){const z=p.toLowerCase();if(!(O.customer.title.toLowerCase().includes(z)||O.customer.code.toString().includes(p)||QP(O.customer.category).toLowerCase().includes(z)||JP(O.customer.type).toLowerCase().includes(z)))return!1}return!0}),L=k.length;return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(wr,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"  "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[L,"  ",R()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:O=>g(O.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:O=>y(O.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[i.jsx("option",{value:"",children:""}),x.map(O=>i.jsxs("option",{value:O.id,children:[O.title," (: ",O.code,")"]},O.id))]})]})]}),R()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[R(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),d(1)},className:"text-sm text-purple-600 hover:text-purple-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-purple-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&L>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:k.map(O=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/wallets/${O.id}`),children:[i.jsxs("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:[O.customer.title,i.jsx("br",{}),i.jsxs("span",{className:"text-xs text-gray-500",children:[": ",O.customer.code]})]}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:JP(O.customer.type)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:QP(O.customer.category)}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`text-sm font-bold ${O.balance>=0?"text-green-600":"text-red-600"}`,children:ue(O.balance)})}),i.jsx("td",{className:"px-4 py-4 text-sm font-bold text-blue-600",children:ue(O.credit_cap)}),i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-700",children:ue(O.initial_balance||0)}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(O.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsxs("div",{className:"flex items-center justify-center space-x-reverse space-x-2",children:[i.jsx("button",{onClick:z=>{z.stopPropagation(),T(O),w(!0)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"  ",children:i.jsx(bu,{className:"w-5 h-5"})}),i.jsx("button",{onClick:z=>{z.stopPropagation(),r(`/manage/wallets/${O.id}`)},className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm font-semibold",children:""})]})})]},O.id))})]})})}),!a&&L===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(wr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:R()>0?"      ":"   "})]}),!a&&L>0&&i.jsx($t,{currentPage:u,totalItems:o,itemsPerPage:h,totalPages:Math.ceil(o/h),onPageChange:M}),N&&S&&i.jsx(jU,{isOpen:N,onClose:()=>{w(!1),T(null)},walletId:S.id,currentBalance:S.balance,currentCreditCap:S.credit_cap,onSuccess:()=>{A(),w(!1),T(null)}})]})}function i1e(){const r=Je(),{id:t}=sr(),[e,a]=I.useState(null),[n,s]=I.useState(!0),[l,o]=I.useState("");I.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{s(!0),o("");const u=await Us.getWarehouseById(t);a(u)}catch(u){console.error("Error fetching warehouse details:",u),o("    ")}finally{s(!1)}};return n?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ae,{className:"w-8 h-8 text-emerald-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}):l||!e?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-red-500 mb-4",children:l||"  "}),i.jsx("button",{onClick:()=>r("/manage/warehouses"),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"   "})]}):i.jsxs("div",{className:"fade-in font-vazir max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>r("/manage/warehouses"),className:"mb-6 inline-flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm",children:[i.jsx(Ut,{className:"w-4 h-4 ml-2"}),""]}),i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e.name}),i.jsx("p",{className:"text-gray-500",children:"   "})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center",children:i.jsx(yh,{className:"w-4 h-4 text-amber-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsxs("p",{className:"text-xl font-bold text-amber-600",children:["#",e.code]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(yh,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm font-semibold",children:e.deleted?i.jsx("span",{className:"text-red-600",children:" "}):i.jsx("span",{className:"text-green-600",children:""})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:i.jsx(yh,{className:"w-4 h-4 text-green-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold",children:e.are_prices_updated?i.jsx("span",{className:"text-green-600",children:""}):i.jsx("span",{className:"text-red-600",children:""})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-4",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(Wr,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_e(e.created_at)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[e.address&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:i.jsx(XW,{className:"w-4 h-4 text-gray-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:e.address})]}),e.branch&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:i.jsx(nt,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.branch.name})]}),e.branch.address&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.branch.address})]})]})]}),e.manager&&i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:i.jsx(_t,{className:"w-4 h-4 text-purple-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:" "})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1.5",children:""}),i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[e.manager.profile.first_name," ",e.manager.profile.last_name]})]})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center space-x-reverse space-x-2 mb-5",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center",children:i.jsx(is,{className:"w-4 h-4 text-amber-600"})}),i.jsx("h3",{className:"font-bold text-gray-900",children:"  "})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>r(`/manage/warehouses/${t}/product-kardex`),className:"flex items-center space-x-reverse space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all",children:[i.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-lg flex items-center justify-center",children:i.jsx(is,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"  "}),i.jsx("p",{className:"text-xs text-gray-600",children:"   "})]})]}),i.jsxs("button",{onClick:()=>r(`/manage/warehouses/${t}/receivings`),className:"flex items-center space-x-reverse space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all",children:[i.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:i.jsx(kr,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:" "}),i.jsx("p",{className:"text-xs text-gray-600",children:"    "})]})]}),i.jsxs("button",{onClick:()=>r(`/manage/warehouses/${t}/update-prices`),className:"flex items-center space-x-reverse space-x-3 p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 hover:border-gray-300 transition-all",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:i.jsx(mm,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"text-right flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900",children:" "}),i.jsx("p",{className:"text-xs text-gray-600",children:"    "})]})]})]})]})]})}function l1e(){const r=Je(),[t,e]=I.useState([]),[a,n]=I.useState(!1),[s,l]=I.useState(""),[o,c]=I.useState(1),[u,d]=I.useState(0),[h]=I.useState(20),[p,g]=I.useState(""),[v,y]=I.useState("");I.useEffect(()=>{x()},[]),I.useEffect(()=>{c(1)},[p,v]);const x=async()=>{try{n(!0),l("");const C=await Us.getWarehouses(),M=Array.isArray(C)?C:[];e(M),d(M.length)}catch(C){console.error("Error fetching warehouses:",C),l(C?.message||"    "),e([]),d(0)}finally{n(!1)}},b=C=>{c(C)},N=()=>{let C=0;return p&&C++,v&&C++,C},w=C=>({ISFAHAN:"",TEHRAN:""})[C]||C,S=t.filter(C=>{if(p){const M=p.toLowerCase();if(!(C.name.toLowerCase().includes(M)||C.code.toString().includes(p)||C.address?.toLowerCase().includes(M)||C.branch?.name?.toLowerCase().includes(M)))return!1}if(v){const M=v==="true";if(C.deleted!==M)return!1}return!0}),T=S.length,A=S.slice((o-1)*h,o*h);return i.jsxs("div",{className:"space-y-6 fade-in font-vazir",children:[i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center space-x-reverse space-x-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:i.jsx(yh,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" "}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[T," ",N()>0&&" ( )"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",value:p,onChange:C=>g(C.target.value),placeholder:"...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{value:v,onChange:C=>y(C.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"false",children:""}),i.jsx("option",{value:"true",children:" "})]})]})]}),N()>0&&i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[N(),"  "]}),i.jsx("button",{onClick:()=>{g(""),y(""),c(1)},className:"text-sm text-amber-600 hover:text-amber-700 font-semibold",children:"  "})]})]}),s&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:i.jsx("p",{className:"text-red-800 font-semibold",children:s})}),a&&i.jsxs("div",{className:"flex items-center justify-center py-20",children:[i.jsx(Ae,{className:"w-8 h-8 text-amber-600 animate-spin"}),i.jsx("span",{className:"mr-3 text-gray-600 font-semibold",children:"  ..."})]}),!a&&T>0&&i.jsx("div",{className:"bg-white rounded-xl border-2 border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:""}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:" "}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:""})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:A.map(C=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(`/manage/warehouses/${C.id}`),children:[i.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:C.name}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:C.code||"N/A"}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700 max-w-xs truncate",children:C.address||"  "}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:w(C.branch?.name||"")}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${C.are_prices_updated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:C.are_prices_updated?" ":"  "})}),i.jsx("td",{className:"px-4 py-4",children:i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${C.deleted?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:C.deleted?" ":""})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-700",children:_e(C.created_at)}),i.jsx("td",{className:"px-4 py-4 text-center",children:i.jsx("button",{onClick:M=>{M.stopPropagation(),r(`/manage/warehouses/${C.id}`)},className:"px-3 py-1 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 transition-colors text-sm font-semibold",children:""})})]},C.id))})]})})}),!a&&T===0&&i.jsxs("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-12 text-center",children:[i.jsx(yh,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500 text-lg font-semibold",children:N()>0?"      ":"  "})]}),!a&&T>0&&i.jsx($t,{currentPage:o,totalItems:T,itemsPerPage:h,totalPages:Math.ceil(T/h),onPageChange:b})]})}function o1e({onLogout:r}){return i.jsxs("div",{className:"flex h-screen overflow-hidden font-vazir",children:[i.jsx(Nbe,{onLogout:r}),i.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-100",children:i.jsxs(DC,{children:[i.jsx(ke,{path:"",element:i.jsx(ll,{to:"/manage/orders",replace:!0})}),i.jsx(ke,{path:"/",element:i.jsx(ll,{to:"/manage/orders",replace:!0})}),i.jsx(ke,{path:"orders",element:i.jsx(qye,{})}),i.jsx(ke,{path:"orders/:id",element:i.jsx(Dye,{})}),i.jsx(ke,{path:"order-history",element:i.jsx(Pye,{})}),i.jsx(ke,{path:"order-history/:id",element:i.jsx(Hye,{})}),i.jsx(ke,{path:"payments/:id",element:i.jsx(Zye,{})}),i.jsx(ke,{path:"payment-history",element:i.jsx(tbe,{})}),i.jsx(ke,{path:"payment-history/:id",element:i.jsx(abe,{})}),i.jsx(ke,{path:"invoices",element:i.jsx(nye,{})}),i.jsx(ke,{path:"invoices/:id",element:i.jsx(Fxe,{})}),i.jsx(ke,{path:"invoice-history",element:i.jsx(Kxe,{})}),i.jsx(ke,{path:"invoice-history/:id",element:i.jsx(Jxe,{})}),i.jsx(ke,{path:"cargo-history",element:i.jsx(Bq,{})}),i.jsx(ke,{path:"customers/by-debt",element:i.jsx(mX,{})}),i.jsx(ke,{path:"customers/report",element:i.jsx(_X,{})}),i.jsx(ke,{path:"customers/:id",element:i.jsx(aX,{})}),i.jsx(ke,{path:"customers",element:i.jsx(fX,{})}),i.jsx(ke,{path:"customer-requests",element:i.jsx(uX,{})}),i.jsx(ke,{path:"customer-requests/:id",element:i.jsx(sX,{})}),i.jsx(ke,{path:"return-requests",element:i.jsx(bbe,{})}),i.jsx(ke,{path:"return-requests/:id",element:i.jsx(ybe,{})}),i.jsx(ke,{path:"categories",element:i.jsx(Gq,{})}),i.jsx(ke,{path:"categories/:id",element:i.jsx(Uq,{})}),i.jsx(ke,{path:"products",element:i.jsx(ibe,{})}),i.jsx(ke,{path:"products/:id",element:i.jsx(nbe,{})}),i.jsx(ke,{path:"warehouses",element:i.jsx(l1e,{})}),i.jsx(ke,{path:"warehouses/:id",element:i.jsx(i1e,{})}),i.jsx(ke,{path:"warehouses/:id/product-kardex",element:i.jsx(sbe,{})}),i.jsx(ke,{path:"warehouses/:id/receivings",element:i.jsx(cbe,{})}),i.jsx(ke,{path:"warehouses/:id/receivings/:receivingId",element:i.jsx(obe,{})}),i.jsx(ke,{path:"warehouses/:id/update-prices",element:i.jsx(Ebe,{})}),i.jsx(ke,{path:"capillary-sales-lines",element:i.jsx(Oq,{})}),i.jsx(ke,{path:"capillary-sales-lines/:id",element:i.jsx(kq,{})}),i.jsx(ke,{path:"stats",element:i.jsx(ll,{to:"/manage/stats/customers",replace:!0})}),i.jsx(ke,{path:"stats/customers",element:i.jsx(Gxe,{})}),i.jsx(ke,{path:"stats/orders",element:i.jsx(Xye,{})}),i.jsx(ke,{path:"stats/sellers",element:i.jsx(_be,{})}),i.jsx(ke,{path:"tickets",element:i.jsx(Abe,{})}),i.jsx(ke,{path:"tickets/:id",element:i.jsx(jbe,{})}),i.jsx(ke,{path:"wallets",element:i.jsx(s1e,{})}),i.jsx(ke,{path:"wallets/:id",element:i.jsx(Zbe,{})}),i.jsx(ke,{path:"wallet-history",element:i.jsx(Jbe,{})}),i.jsx(ke,{path:"wallet-history/:id",element:i.jsx(n1e,{})}),i.jsx(ke,{path:"profiles",element:i.jsx(ll,{to:"/manage/profiles/employees",replace:!0})}),i.jsx(ke,{path:"profiles/employees",element:i.jsx(Uxe,{})}),i.jsx(ke,{path:"profiles/others",element:i.jsx(mye,{})}),i.jsx(ke,{path:"profiles/:id",element:i.jsx(lbe,{})}),i.jsx(ke,{path:"logs",element:i.jsx(gye,{})}),i.jsx(ke,{path:"logs/:id",element:i.jsx(sye,{})}),i.jsx(ke,{path:"checks",element:i.jsx(eX,{})}),i.jsx(ke,{path:"checks/:id",element:i.jsx(qq,{})}),i.jsx(ke,{path:"reminders",element:i.jsx(xbe,{})}),i.jsx(ke,{path:"reminders/:id",element:i.jsx(pbe,{})}),i.jsx(ke,{path:"*",element:i.jsx(ll,{to:"/manage/orders",replace:!0})})]})})]})}function c1e({onLogout:r}){return i.jsxs("div",{className:"flex h-screen overflow-hidden font-vazir",children:[i.jsx(Wbe,{onLogout:r}),i.jsx("main",{className:"flex-1 overflow-y-auto p-6 bg-gray-100",children:i.jsxs(DC,{children:[i.jsx(ke,{path:"",element:i.jsx(ll,{to:"/user/profile",replace:!0})}),i.jsx(ke,{path:"profile",element:i.jsx(zbe,{})}),i.jsx(ke,{path:"business",element:i.jsx(Ibe,{})}),i.jsx(ke,{path:"wallet",element:i.jsx(Ube,{})}),i.jsx(ke,{path:"wallet-topup/callback",element:i.jsx(Fbe,{})}),i.jsx(ke,{path:"requests",element:i.jsx(Lbe,{})}),i.jsx(ke,{path:"requests/:id",element:i.jsx(Rbe,{})}),i.jsx(ke,{path:"orders/:orderId/invoice/payment",element:i.jsx(Mbe,{})}),i.jsx(ke,{path:"invoice-payment/callback",element:i.jsx(Dbe,{})}),i.jsx(ke,{path:"tickets",element:i.jsx(Hbe,{})}),i.jsx(ke,{path:"tickets/:id",element:i.jsx(Bbe,{})}),i.jsx(ke,{path:"products",element:i.jsx(Pbe,{})}),i.jsx(ke,{path:"favorites",element:i.jsx(Obe,{})}),i.jsx(ke,{path:"cart",element:i.jsx(kbe,{})}),i.jsx(ke,{path:"*",element:i.jsx(ll,{to:"/user/profile",replace:!0})})]})})]})}function u1e(){const[r,t]=I.useState(!!localStorage.getItem("access_token")),[e,a]=I.useState(localStorage.getItem("panel_type")),[n,s]=I.useState(!0);I.useEffect(()=>{(async()=>{if(localStorage.getItem("access_token"))try{const d=await bo.checkAuth();if(t(d),d){const h=localStorage.getItem("panel_type");h&&a(h)}else a(null)}catch(d){console.error("Auth check failed:",d),t(!1),a(null),bo.logout()}else t(!1);s(!1)})()},[]);const l=()=>{t(!0);const c=localStorage.getItem("panel_type");c&&a(c)},o=()=>{bo.logout(),localStorage.removeItem("panel_type"),t(!1),a(null)};return n?i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),i.jsx("p",{className:"text-gray-600 font-semibold font-vazir",children:"    ..."})]})}):i.jsx(PW,{children:i.jsx(DC,{children:r?i.jsxs(i.Fragment,{children:[i.jsx(ke,{path:"/",element:i.jsx(ll,{to:e==="admin"?"/manage/orders":"/user/profile",replace:!0})}),i.jsx(ke,{path:"/manage/*",element:i.jsx(o1e,{onLogout:o})}),i.jsx(ke,{path:"/user/*",element:i.jsx(c1e,{onLogout:o})}),i.jsx(ke,{path:"*",element:i.jsx(ll,{to:e==="admin"?"/manage/orders":"/user/profile",replace:!0})})]}):i.jsx(ke,{path:"*",element:i.jsx(uye,{onLoginSuccess:l})})})})}FY.createRoot(document.getElementById("root")).render(i.jsx(I.StrictMode,{children:i.jsx(u1e,{})}));
